(function(){var b={};PBS=this.PBS||{};PBS.KIDS=this.PBS.KIDS||{};PBS.KIDS.platformer=b;b.settings={global:{autoLoad:true,initialScene:"load",fps:60,rootElement:"root",aspectRatio:1.776978417266187,resizeFont:true},aspects:[{ogg:["firefox","opera","chrome"],m4aCombined:["android"],m4a:["silk","ipod","ipad","iphone"],mp3:["msie","safari","trident"]}],assets:{logo:{id:"logo",src:"i/logo.png",data:{spritesheet:{frames:{width:320,height:88,regX:160,regY:44},animations:{"default":0}}}},title:{id:"title",src:"i/title.png",data:{spritesheet:{frames:{width:595,height:201,regX:297,regY:100},animations:{"default":0}}}},progress:{id:"progress",src:"i/progress.png"},"title-screen-jpg":{id:"title-screen-jpg",src:"i/title-screen.jpg",data:{spritesheet:{frames:{width:988,height:556,regX:494,regY:278},animations:{title:0,"default":1}}}},"title-back":{id:"title-back",src:"i/title-back.jpg",data:{spritesheet:{frames:{width:1088,height:656,regX:50,regY:50},animations:{"default":0}}}},"title-middle":{id:"title-middle",src:"i/title-middle.png",data:{spritesheet:{frames:{width:1088,height:656,regX:50,regY:50},animations:{"default":0}}}},"title-front":{id:"title-front",src:"i/title-front.png",data:{spritesheet:{frames:{width:1088,height:656,regX:50,regY:50},animations:{"default":0}}}},"hacker-binoculars":{id:"hacker-binoculars",src:"i/hacker-binoculars.png",data:{spritesheet:{framerate:30,images:["hacker-binoculars"],frames:[[2,2,131,170,0,65,170],[141,2,131,170,0,65,170],[280,2,131,170,0,65,170],[419,2,131,170,0,65,170],[558,2,131,170,0,65,170],[697,2,131,170,0,65,170],[836,2,131,170,0,65,170],[975,2,131,170,0,65,170],[1114,2,131,170,0,65,170],[1253,2,131,170,0,65,170],[1392,2,131,170,0,65,170],[1531,2,131,170,0,65,170],[1670,2,131,170,0,65,170],[1809,2,131,170,0,65,170],[2,180,131,170,0,65,170],[141,180,131,170,0,65,170],[280,180,131,170,0,65,170],[419,180,131,170,0,65,170],[558,180,131,170,0,65,170],[697,180,131,170,0,65,170],[836,180,131,170,0,65,170],[975,180,131,170,0,65,170],[1114,180,131,170,0,65,170],[1253,180,131,170,0,65,170],[1392,180,131,170,0,65,170],[1531,180,131,170,0,65,170],[1670,180,131,170,0,65,170],[1809,180,131,170,0,65,170],[2,358,131,170,0,65,170],[141,358,131,170,0,65,170],[280,358,131,170,0,65,170],[419,358,131,170,0,65,170],[558,358,131,170,0,65,170],[697,358,131,170,0,65,170],[836,358,131,170,0,65,170],[975,358,131,170,0,65,170],[1114,358,131,170,0,65,170],[1253,358,131,170,0,65,170],[1392,358,131,170,0,65,170],[1531,358,131,170,0,65,170]],animations:{look:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,14,14,14,14,14,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,33,33,33,33,34,35,36,37,38],speed:1,next:"default"},"default":{frames:[40],speed:1}}}}},"hacker-button":{id:"hacker-button",src:"i/hacker-button.png",data:{spritesheet:{framerate:30,images:["hacker-button"],frames:[[2,2,285,270,0,142,270],[295,2,285,270,0,142,270],[588,2,285,270,0,142,270],[881,2,285,270,0,142,270],[1174,2,285,270,0,142,270],[1467,2,285,270,0,142,270],[1760,2,285,270,0,142,270],[2053,2,285,270,0,142,270],[2346,2,285,270,0,142,270],[2639,2,285,270,0,142,270],[2932,2,285,270,0,142,270],[3225,2,285,270,0,142,270],[3518,2,285,270,0,142,270],[2,280,285,270,0,142,270],[295,280,285,270,0,142,270],[588,280,285,270,0,142,270],[881,280,285,270,0,142,270],[1174,280,285,270,0,142,270],[1467,280,285,270,0,142,270],[1760,280,285,270,0,142,270],[2053,280,285,270,0,142,270],[2346,280,285,270,0,142,270],[2639,280,285,270,0,142,270],[2932,280,285,270,0,142,270],[3225,280,285,270,0,142,270],[3518,280,285,270,0,142,270],[2,558,285,270,0,142,270],[295,558,285,270,0,142,270],[588,558,285,270,0,142,270],[881,558,285,270,0,142,270],[1174,558,285,270,0,142,270],[1467,558,285,270,0,142,270],[1760,558,285,270,0,142,270],[2053,558,285,270,0,142,270],[2346,558,285,270,0,142,270],[2639,558,285,270,0,142,270],[2932,558,285,270,0,142,270],[3225,558,285,270,0,142,270],[3518,558,285,270,0,142,270],[2,836,285,270,0,142,270],[295,836,285,270,0,142,270],[588,836,285,270,0,142,270],[881,836,285,270,0,142,270],[1174,836,285,270,0,142,270],[1467,836,285,270,0,142,270]],animations:{button:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,11,11,12,13,14,15,15,15,15,16,17,18,19,20,21,22,23,24,25,26,26,26,27,28,28,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,31,32,33,34,35,36,36,36,36,36,36,36,36,36,36,37,38,39,40,41,42,43,44],speed:1,next:"default"},out:{frames:[30,31,32,33,34,35,36,36,36,36,36,36,36,36,36,36,37,38,39,40,41,42,43],speed:1,next:"default"},idle:{frames:[30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],speed:1},"default":{frames:[44],speed:1}}}}},"hacker-laughing":{id:"hacker-laughing",src:"i/hacker-laughing.png",data:{spritesheet:{framerate:30,images:["hacker-laughing"],frames:[[2,2,215,313,0,107,313],[225,2,215,313,0,107,313],[448,2,215,313,0,107,313],[671,2,215,313,0,107,313],[894,2,215,313,0,107,313],[1117,2,215,313,0,107,313],[1340,2,215,313,0,107,313],[1563,2,215,313,0,107,313],[1786,2,215,313,0,107,313],[2,323,215,313,0,107,313],[225,323,215,313,0,107,313],[448,323,215,313,0,107,313],[671,323,215,313,0,107,313],[894,323,215,313,0,107,313],[1117,323,215,313,0,107,313],[1340,323,215,313,0,107,313],[1563,323,215,313,0,107,313],[1786,323,215,313,0,107,313],[2,644,215,313,0,107,313],[225,644,215,313,0,107,313],[448,644,215,313,0,107,313],[671,644,215,313,0,107,313],[894,644,215,313,0,107,313],[1117,644,215,313,0,107,313],[1340,644,215,313,0,107,313],[1563,644,215,313,0,107,313],[1786,644,215,313,0,107,313],[2,965,215,313,0,107,313],[225,965,215,313,0,107,313],[448,965,215,313,0,107,313],[671,965,215,313,0,107,313],[894,965,215,313,0,107,313],[1117,965,215,313,0,107,313],[1340,965,215,313,0,107,313],[1563,965,215,313,0,107,313],[1786,965,215,313,0,107,313],[2,1286,215,313,0,107,313],[225,1286,215,313,0,107,313],[448,1286,215,313,0,107,313],[671,1286,215,313,0,107,313],[894,1286,215,313,0,107,313],[1117,1286,215,313,0,107,313],[1340,1286,215,313,0,107,313],[1563,1286,215,313,0,107,313],[1786,1286,215,313,0,107,313],[2,1607,215,313,0,107,313],[225,1607,215,313,0,107,313],[448,1607,215,313,0,107,313],[671,1607,215,313,0,107,313],[894,1607,215,313,0,107,313],[1117,1607,215,313,0,107,313],[1340,1607,215,313,0,107,313],[1563,1607,215,313,0,107,313]],animations:{laugh:{frames:[0,1,2,3,4,5,6,7,8,9,10,10,10,10,10,10,10,10,11,11,11,12,13,14,15,15,15,15,16,17,18,19,20,20,20,20,20,20,21,22,23,24,25,26,26,26,27,28,28,29,29,29,29,29,30,31,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],speed:1,next:"default"},"default":{frames:[53],speed:1}}}}},"bio-forest":{id:"bio-forest",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:3250,length:1038}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:3250,length:1038}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:3250,length:1038}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:3250,length:1738}}}},"bio-lake":{id:"bio-lake",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:6000,length:884}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:6000,length:884}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:6000,length:884}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:6000,length:1584}}}},"bio-mangrove":{id:"bio-mangrove",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:8600,length:1165}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:8600,length:1165}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:8600,length:1165}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:8600,length:1865}}}},"disaster-buzz":{id:"disaster-buzz",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:11329,length:3069}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:11329,length:3069}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:11329,length:3069}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:11329,length:3769}}}},"disaster-cyclone":{id:"disaster-cyclone",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:16144,length:2796}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:16144,length:2796}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:16144,length:2796}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:16144,length:3496}}}},"disaster-disease":{id:"disaster-disease",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:20642,length:1943}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:20642,length:1943}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:20642,length:1943}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:20642,length:2643}}}},"disaster-earthquake":{id:"disaster-earthquake",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:23748,length:2482}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:23748,length:2482}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:23748,length:2482}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:23748,length:3182}}}},"disaster-hacker":{id:"disaster-hacker",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:27920,length:1400}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:27920,length:1400}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:27920,length:1400}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:27920,length:2100}}}},"disaster-hacker-2":{id:"disaster-hacker-2",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:31014,length:2123}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:31014,length:2123}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:31014,length:2123}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:31014,length:2823}}}},"disaster-look":{id:"disaster-look",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:34860,length:1227}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:34860,length:1227}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:34860,length:1227}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:34860,length:1927}}}},"disaster-not-good":{id:"disaster-not-good",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:37250,length:4086.0000000000005}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:37250,length:4086.0000000000005}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:37250,length:4086.0000000000005}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:37250,length:4786}}}},"disaster-oh-dear":{id:"disaster-oh-dear",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:42520,length:1500}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:42520,length:1500}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:42520,length:1500}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:42520,length:2200}}}},"disaster-oh-no":{id:"disaster-oh-no",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:45124,length:1821}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:45124,length:1821}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:45124,length:1821}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:45124,length:2521}}}},"disaster-resolved":{id:"disaster-resolved",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:48100,length:3062}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:48100,length:3062}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:48100,length:3062}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:48100,length:3762}}}},"disaster-resolved-2":{id:"disaster-resolved-2",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:52840,length:2477}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:52840,length:2477}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:52840,length:2477}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:52840,length:3177}}}},"disaster-resolved-3":{id:"disaster-resolved-3",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:57030,length:2563}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:57030,length:2563}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:57030,length:2563}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:57030,length:3263}}}},"help-feed":{id:"help-feed",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:61276,length:1362}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:61276,length:1362}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:61276,length:1362}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:61276,length:2062}}}},"help-for":{id:"help-for",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:64324,length:520}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:64324,length:520}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:64324,length:520}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:64324,length:1220}}}},"help-healthy-forest":{id:"help-healthy-forest",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:66509,length:2005}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:66509,length:2005}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:66509,length:2005}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:66509,length:2705}}}},"help-healthy-lake":{id:"help-healthy-lake",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:70178,length:1575}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:70178,length:1575}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:70178,length:1575}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:70178,length:2275}}}},"help-healthy-mangrove":{id:"help-healthy-mangrove",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:73435,length:1924}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:73435,length:1924}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:73435,length:1924}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:73435,length:2624}}}},"help-if-enough":{id:"help-if-enough",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:77050,length:1312}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:77050,length:1312}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:77050,length:1312}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:77050,length:2012}}}},"help-if-enough-alt":{id:"help-if-enough-alt",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:80050,length:2094}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:80050,length:2094}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:80050,length:2094}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:80050,length:2794}}}},"help-in":{id:"help-in",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:83370,length:400}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:83370,length:400}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:83370,length:400}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:83370,length:1100}}}},"help-no":{id:"help-no",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:85439,length:964}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:85439,length:964}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:85439,length:964}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:85439,length:1664}}}},"help-not-enough":{id:"help-not-enough",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:88085,length:1114}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:88085,length:1114}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:88085,length:1114}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:88085,length:1814}}}},"help-pollinate":{id:"help-pollinate",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:90873,length:1368}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:90873,length:1368}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:90873,length:1368}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:90873,length:2068}}}},"help-prompt-1":{id:"help-prompt-1",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:93937,length:4785}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:93937,length:4785}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:93937,length:4785}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:93937,length:5485}}}},"help-prompt-2":{id:"help-prompt-2",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:100420,length:4475}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:100420,length:4475}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:100420,length:4475}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:100420,length:5175}}}},"help-prompt-3":{id:"help-prompt-3",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:106620,length:4507}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:106620,length:4507}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:106620,length:4507}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:106620,length:5207}}}},"need-food":{id:"need-food",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:112789,length:1400}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:112789,length:1400}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:112789,length:1400}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:112789,length:2100}}}},"need-generic":{id:"need-generic",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:115900,length:729}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:115900,length:729}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:115900,length:729}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:115900,length:1429}}}},"need-pollination":{id:"need-pollination",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:118260,length:1682}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:118260,length:1682}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:118260,length:1682}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:118260,length:2382}}}},"need-prompt-generic":{id:"need-prompt-generic",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:121640,length:2110}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:121640,length:2110}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:121640,length:2110}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:121640,length:2810}}}},"need-prompt-look":{id:"need-prompt-look",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:125410,length:990}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:125410,length:990}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:125410,length:990}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:125410,length:1690}}}},"need-prompt-look-the":{id:"need-prompt-look-the",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:128117,length:1127}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:128117,length:1127}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:128117,length:1127}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:128117,length:1827}}}},"need-prompt-need":{id:"need-prompt-need",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:130893,length:1200}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:130893,length:1200}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:130893,length:1200}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:130893,length:1900}}}},"need-prompt-needs":{id:"need-prompt-needs",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:133767,length:1212}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:133767,length:1212}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:133767,length:1212}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:133767,length:1912}}}},"need-shelter":{id:"need-shelter",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:136674,length:932}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:136674,length:932}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:136674,length:932}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:136674,length:1632}}}},"org-animals":{id:"org-animals",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:139294,length:800}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:139294,length:800}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:139294,length:800}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:139294,length:1500}}}},"org-bat":{id:"org-bat",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:141766,length:1046}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:141766,length:1046}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:141766,length:1046}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:141766,length:1746}}}},"org-bats":{id:"org-bats",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:144034,length:864}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:144034,length:864}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:144034,length:864}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:144034,length:1564}}}},"org-crocodile":{id:"org-crocodile",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:146300,length:962}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:146300,length:962}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:146300,length:962}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:146300,length:1662}}}},"org-crocodile-eggs":{id:"org-crocodile-eggs",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:148950,length:1300}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:148950,length:1300}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:148950,length:1300}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:148950,length:2000}}}},"org-crocodiles":{id:"org-crocodiles",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:151930,length:1077}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:151930,length:1077}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:151930,length:1077}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:151930,length:1777}}}},"org-durian-fruit":{id:"org-durian-fruit",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:154700,length:924}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:154700,length:924}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:154700,length:924}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:154700,length:1624}}}},"org-fish":{id:"org-fish",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:157316,length:769}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:157316,length:769}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:157316,length:769}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:157316,length:1469}}}},"org-fishs":{id:"org-fishs",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:159777,length:655}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:159777,length:655}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:159777,length:655}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:159777,length:1355}}}},"org-forest-trees":{id:"org-forest-trees",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:162122,length:1287}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:162122,length:1287}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:162122,length:1287}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:162122,length:1987}}}},"org-goanna":{id:"org-goanna",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:165085,length:842}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:165085,length:842}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:165085,length:842}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:165085,length:1542}}}},"org-goannas":{id:"org-goannas",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:167618,length:877}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:167618,length:877}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:167618,length:877}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:167618,length:1577}}}},"org-mangrove-trees":{id:"org-mangrove-trees",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:170188,length:1300}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:170188,length:1300}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:170188,length:1300}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:170188,length:2000}}}},"org-monkey":{id:"org-monkey",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:173152,length:903}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:173152,length:903}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:173152,length:903}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:173152,length:1603}}}},"org-monkeys":{id:"org-monkeys",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:175751,length:835}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:175751,length:835}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:175751,length:835}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:175751,length:1535}}}},"org-mudskipper":{id:"org-mudskipper",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:178234,length:1111}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:178234,length:1111}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:178234,length:1111}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:178234,length:1811}}}},"org-mudskippers":{id:"org-mudskippers",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:181050,length:1027}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:181050,length:1027}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:181050,length:1027}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:181050,length:1727}}}},"org-orangutan":{id:"org-orangutan",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:183772,length:1070}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:183772,length:1070}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:183772,length:1070}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:183772,length:1770}}}},"org-orangutans":{id:"org-orangutans",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:186518,length:1089}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:186518,length:1089}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:186518,length:1089}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:186518,length:1789}}}},"org-stork":{id:"org-stork",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:189281,length:864}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:189281,length:864}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:189281,length:864}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:189281,length:1564}}}},"org-stork-eggs":{id:"org-stork-eggs",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:191751,length:1038}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:191751,length:1038}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:191751,length:1038}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:191751,length:1738}}}},"org-storks":{id:"org-storks",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:194457,length:861}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:194457,length:861}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:194457,length:861}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:194457,length:1561}}}},"org-tree":{id:"org-tree",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:197017,length:1108}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:197017,length:1108}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:197017,length:1108}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:197017,length:1808}}}},"org-trees":{id:"org-trees",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:199788,length:1232}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:199788,length:1232}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:199788,length:1232}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:199788,length:1932}}}},"resource-bat-fact":{id:"resource-bat-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:202710,length:2770}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:202710,length:2770}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:202710,length:2770}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:202710,length:3470}}}},"resource-crocodile-eggs-fact":{id:"resource-crocodile-eggs-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:207198,length:2725}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:207198,length:2725}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:207198,length:2725}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:207198,length:3425}}}},"resource-crocodile-fact":{id:"resource-crocodile-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:211602,length:4824}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:211602,length:4824}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:211602,length:4824}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:211602,length:5524}}}},"resource-durian-fruit-fact":{id:"resource-durian-fruit-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:218090,length:3434}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:218090,length:3434}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:218090,length:3434}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:218090,length:4134}}}},"resource-durian-tree-fact":{id:"resource-durian-tree-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:223200,length:3839}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:223200,length:3839}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:223200,length:3839}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:223200,length:4539}}}},"resource-fish-fact":{id:"resource-fish-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:228747,length:6016}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:228747,length:6016}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:228747,length:6016}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:228747,length:6716}}}},"resource-forest-trees-fact":{id:"resource-forest-trees-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:236432,length:4471}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:236432,length:4471}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:236432,length:4471}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:236432,length:5171}}}},"resource-goanna-fact":{id:"resource-goanna-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:242605,length:3144}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:242605,length:3144}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:242605,length:3144}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:242605,length:3844}}}},"resource-mangrove-trees-fact":{id:"resource-mangrove-trees-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:247433,length:5103}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:247433,length:5103}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:247433,length:5103}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:247433,length:5803}}}},"resource-monkey-fact":{id:"resource-monkey-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:254223,length:2220}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:254223,length:2220}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:254223,length:2220}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:254223,length:2920}}}},"resource-mudskipper-fact":{id:"resource-mudskipper-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:258125,length:3268}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:258125,length:3268}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:258125,length:3268}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:258125,length:3968}}}},"resource-orangutan-fact":{id:"resource-orangutan-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:263064,length:1950}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:263064,length:1950}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:263064,length:1950}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:263064,length:2650}}}},"resource-stork-eggs-fact":{id:"resource-stork-eggs-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:266716,length:2645}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:266716,length:2645}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:266716,length:2645}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:266716,length:3345}}}},"resource-stork-fact":{id:"resource-stork-fact",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:271028,length:3150}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:271028,length:3150}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:271028,length:3150}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:271028,length:3850}}}},"results-5":{id:"results-5",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:275886,length:5633}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:275886,length:5633}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:275886,length:5633}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:275886,length:6333}}}},"results-10":{id:"results-10",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:284178,length:5643}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:284178,length:5643}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:284178,length:5643}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:284178,length:6343}}}},"results-a":{id:"results-a",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:300151,length:3929}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:300151,length:3929}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:300151,length:3929}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:300151,length:4629}}}},"results-b":{id:"results-b",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:305802,length:4847}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:305802,length:4847}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:305802,length:4847}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:305802,length:5547}}}},"results-c":{id:"results-c",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:312329,length:4187}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:312329,length:4187}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:312329,length:4187}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:312329,length:4887}}}},"results-follow-up":{id:"results-follow-up",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:318191,length:4000}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:318191,length:4000}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:318191,length:4000}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:318191,length:4700}}}},"results-high":{id:"results-high",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:323892,length:3297}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:323892,length:3297}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:323892,length:3297}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:323892,length:3997}}}},"title-screen":{id:"title-screen",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:328857,length:1682}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:328857,length:1682}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:328857,length:1682}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:328857,length:2382}}}},"tutorial-button-green":{id:"tutorial-button-green",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:332255,length:5309}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:332255,length:5309}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:332255,length:5309}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:332255,length:6009}}}},"tutorial-one":{id:"tutorial-one",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:339363,length:21887}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:339363,length:21887}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:339363,length:21887}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:339363,length:22587}}}},"tutorial-prompt":{id:"tutorial-prompt",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:362814,length:3400}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:362814,length:3400}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:362814,length:3400}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:362814,length:4100}}}},"tutorial-resource":{id:"tutorial-resource",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:370408,length:6272}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:370408,length:6272}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:370408,length:6272}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:370408,length:6972}}}},"tutorial-space-large":{id:"tutorial-space-large",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:378415,length:6870}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:378415,length:6870}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:378415,length:6870}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:378415,length:7570}}}},"tutorial-space-medium":{id:"tutorial-space-medium",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:386963,length:8631}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:386963,length:8631}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:386963,length:8631}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:386963,length:9331}}}},"tutorial-tap-button":{id:"tutorial-tap-button",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:397267,length:4217}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:397267,length:4217}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:397267,length:4217}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:397267,length:4917}}}},"tutorial-three":{id:"tutorial-three",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:403162,length:8615}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:403162,length:8615}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:403162,length:8615}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:403162,length:9315}}}},"tutorial-two":{id:"tutorial-two",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:412945,length:4667}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:412945,length:4667}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:412945,length:4667}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:412945,length:5367}}}},"warn-enough":{id:"warn-enough",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:418814,length:1569}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:418814,length:1569}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:418814,length:1569}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:418814,length:2269}}}},"warn-for-the":{id:"warn-for-the",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:422087,length:428}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:422087,length:428}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:422087,length:428}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:422087,length:1128}}}},"warn-may-eat":{id:"warn-may-eat",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:424215,length:1661}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:424215,length:1661}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:424215,length:1661}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:424215,length:2361}}}},"warn-may-not":{id:"warn-may-not",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:427530,length:1657}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:427530,length:1657}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:427530,length:1657}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:427530,length:2357}}}},"warn-to-eat":{id:"warn-to-eat",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:430888,length:710}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:430888,length:710}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:430888,length:710}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:430888,length:1410}}}},"warn-we-add":{id:"warn-we-add",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:433315,length:2065}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:433315,length:2065}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:433315,length:2065}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:433315,length:2765}}}},"warn-you-add":{id:"warn-you-add",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:437082,length:1200}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:437082,length:1200}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:437082,length:1200}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:437082,length:1900}}}},"timer-prompt":{id:"timer-prompt",src:{ogg:{assetId:"vo",src:"a/vo.ogg",data:{offset:439920,length:1618}},mp3:{assetId:"vo",src:"a/vo.mp3",data:{offset:439920,length:1618}},m4a:{assetId:"vo",src:"a/vo.m4a",data:{offset:439920,length:1618}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:439920,length:2318}}}},"biotopes-balanced":{id:"biotopes-balanced",src:{ogg:"a/biotopes-balanced.ogg",mp3:"a/biotopes-balanced.mp3",m4a:"a/biotopes-balanced.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:443250,length:2068}}}},"bio-worse":{id:"bio-worse",src:{ogg:"a/bio-worse.ogg",mp3:"a/bio-worse.mp3",m4a:"a/bio-worse.m4a"}},"buzz-delete-party":{id:"buzz-delete-party",src:{ogg:"a/buzz-delete-party.ogg",mp3:"a/buzz-delete-party.mp3",m4a:"a/buzz-delete-party.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:448342,length:8044}}}},"clock-tick":{id:"clock-tick",src:{ogg:"a/clock-tick.ogg",mp3:"a/clock-tick.mp3",m4a:"a/clock-tick.m4a"}},"clock-tock":{id:"clock-tock",src:{ogg:"a/clock-tock.ogg",mp3:"a/clock-tock.mp3",m4a:"a/clock-tock.m4a"}},croc:{id:"croc",src:{ogg:"a/croc.ogg",mp3:"a/croc.mp3",m4a:"a/croc.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:460963,length:1540}}}},"cyclone-hacker-talk":{id:"cyclone-hacker-talk",src:{ogg:"a/cyclone-hacker-talk.ogg",mp3:"a/cyclone-hacker-talk.mp3",m4a:"a/cyclone-hacker-talk.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:463499,length:4876}}}},"cyclone-winds":{id:"cyclone-winds",src:{ogg:"a/cyclone-winds.ogg",mp3:"a/cyclone-winds.mp3",m4a:"a/cyclone-winds.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:469397,length:14068}}}},"dawn-bat":{id:"dawn-bat",src:{ogg:"a/dawn-bat.ogg",mp3:"a/dawn-bat.mp3",m4a:"a/dawn-bat.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:484399,length:2764}}}},"disease-pass-0":{id:"disease-pass-0",src:{ogg:"a/disease-pass-0.ogg",mp3:"a/disease-pass-0.mp3",m4a:"a/disease-pass-0.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:488158,length:3676}}}},"disease-pass-1":{id:"disease-pass-1",src:{ogg:"a/disease-pass-1.ogg",mp3:"a/disease-pass-1.mp3",m4a:"a/disease-pass-1.m4a"}},earthquake:{id:"earthquake",src:{ogg:"a/earthquake.ogg",mp3:"a/earthquake.mp3",m4a:"a/earthquake.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:497130,length:6196}}}},"fish-fx":{id:"fish-fx",src:{ogg:"a/fish-fx.ogg",mp3:"a/fish-fx.mp3",m4a:"a/fish-fx.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:504363,length:1540}}}},"monkey-fx":{id:"monkey-fx",src:{ogg:"a/monkey-fx.ogg",mp3:"a/monkey-fx.mp3",m4a:"a/monkey-fx.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:506841,length:1804}}}},"mudskipper-fx":{id:"mudskipper-fx",src:{ogg:"a/mudskipper-fx.ogg",mp3:"a/mudskipper-fx.mp3",m4a:"a/mudskipper-fx.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:509654,length:1300}}}},"need-met":{id:"need-met",src:{ogg:"a/need-met.ogg",mp3:"a/need-met.mp3",m4a:"a/need-met.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:511974,length:1060}}}},"power-up":{id:"power-up",src:{ogg:"a/power-up.ogg",mp3:"a/power-up.mp3",m4a:"a/power-up.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:513949,length:2193}}}},"stork-fx":{id:"stork-fx",src:{ogg:"a/stork-fx.ogg",mp3:"a/stork-fx.mp3",m4a:"a/stork-fx.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:517139,length:2308}}}},"terrain-hacker-talking":{id:"terrain-hacker-talking",src:{ogg:"a/terrain-hacker-talking.ogg",mp3:"a/terrain-hacker-talking.mp3",m4a:"a/terrain-hacker-talking.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:520437,length:4228}}}},"terrain-hacking":{id:"terrain-hacking",src:{ogg:"a/terrain-hacking.ogg",mp3:"a/terrain-hacking.mp3",m4a:"a/terrain-hacking.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:525710,length:2740}}}},"bio-better":{id:"bio-better",src:{ogg:"a/bio-better.ogg",mp3:"a/bio-better.mp3",m4a:"a/bio-better.m4a"}},"times-up":{id:"times-up",src:{ogg:"a/times-up.ogg",mp3:"a/times-up.mp3",m4a:"a/times-up.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:531383,length:2932}}}},"tractor-beam-sfx":{id:"tractor-beam-sfx",src:{ogg:"a/tractor-beam-sfx.ogg",mp3:"a/tractor-beam-sfx.mp3",m4a:"a/tractor-beam-sfx.m4a"}},"tractor-hacker-talking":{id:"tractor-hacker-talking",src:{ogg:"a/tractor-hacker-talking.ogg",mp3:"a/tractor-hacker-talking.mp3",m4a:"a/tractor-hacker-talking.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:539078,length:4612}}}},"orang-female":{id:"orang-female",src:{ogg:"a/orang-female.ogg",mp3:"a/orang-female.mp3",m4a:"a/orang-female.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:544654,length:1515}}}},"orang-male":{id:"orang-male",src:{ogg:"a/orang-male.ogg",mp3:"a/orang-male.mp3",m4a:"a/orang-male.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:547000,length:2100}}}},"terrain-transform":{id:"terrain-transform",src:{ogg:"a/terrain-transform.ogg",mp3:"a/terrain-transform.mp3",m4a:"a/terrain-transform.m4a"}},"title-creak":{id:"title-creak",src:{ogg:"a/title-creak.ogg",mp3:"a/title-creak.mp3",m4a:"a/title-creak.m4a"}},"wreaker-woosh":{id:"wreaker-woosh",src:{ogg:"a/wreaker-woosh.ogg",mp3:"a/wreaker-woosh.mp3",m4a:"a/wreaker-woosh.m4a"}},"disaster-start":{id:"disaster-start",src:{ogg:"a/disaster-start.ogg",mp3:"a/disaster-start.mp3",m4a:"a/disaster-start.m4a",m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{channels:1,offset:577342,length:2230}}}},"bgm-in-game":{id:"bgm-in-game",src:{ogg:"a/bgm-in-game.ogg",mp3:"a/bgm-in-game.mp3",m4a:"a/bgm-in-game.m4a"}},"bgm-title":{id:"bgm-title",src:{ogg:"a/bgm-title.ogg",mp3:"a/bgm-title.mp3",m4a:"a/bgm-title.m4a"}},"title-laugh":{id:"title-laugh",src:{ogg:{assetId:"cyclone-hacker-talk",src:"a/cyclone-hacker-talk.ogg",data:{offset:1500,length:2000}},mp3:{assetId:"cyclone-hacker-talk",src:"a/cyclone-hacker-talk.mp3",data:{offset:1500,length:2000}},m4a:{assetId:"cyclone-hacker-talk",src:"a/cyclone-hacker-talk.m4a",data:{offset:1500,length:2000}},m4aCombined:{assetId:"combined",src:"a/combined.m4a",data:{offset:465000,length:2100}}}},buttons:{id:"buttons",src:"i/buttons.png"},bat:{id:"bat",src:"i/dawn_bat.png",data:{spritesheet:{framerate:30,images:["bat"],frames:[[2,2,83,71,0,52,41],[93,2,83,71,0,52,41],[184,2,83,71,0,52,41],[275,2,83,71,0,52,41],[366,2,83,71,0,52,41],[457,2,83,71,0,52,41],[548,2,83,71,0,52,41],[639,2,83,71,0,52,41],[730,2,83,71,0,52,41],[821,2,83,71,0,52,41],[912,2,83,71,0,52,41],[2,81,83,71,0,52,41],[93,81,83,71,0,52,41],[184,81,83,71,0,52,41],[275,81,83,71,0,52,41],[366,81,83,71,0,52,41],[457,81,83,71,0,52,41],[548,81,83,71,0,52,41],[639,81,83,71,0,52,41],[730,81,83,71,0,52,41],[821,81,83,71,0,52,41],[912,81,83,71,0,52,41],[2,160,83,71,0,52,41],[93,160,83,71,0,52,41]],animations:{pollinating:{frames:[12,13,14,15,16,17,18,19,20,21,22,23,12],speed:1},flying:{frames:[0,1,2,3,4,5,6,7,8,9,10,11],speed:1}}}}},crocodile:{id:"crocodile",src:"i/crocodile.png",data:{spritesheet:{framerate:30,images:["crocodile"],frames:[[2,2,149,47,0,87,45],[159,2,149,47,0,87,45],[316,2,149,47,0,87,45],[473,2,149,47,0,87,45],[630,2,149,47,0,87,45],[787,2,149,47,0,87,45],[944,2,149,47,0,87,45],[1101,2,149,47,0,87,45],[1258,2,149,47,0,87,45],[1415,2,149,47,0,87,45],[1572,2,149,47,0,87,45],[1729,2,149,47,0,87,45],[1886,2,149,47,0,87,45],[2,57,149,47,0,87,45],[159,57,149,47,0,87,45],[316,57,149,47,0,87,45],[473,57,149,47,0,87,45],[630,57,149,47,0,87,45],[787,57,149,47,0,87,45],[944,57,149,47,0,87,45],[1101,57,149,47,0,87,45],[1258,57,149,47,0,87,45],[1415,57,149,47,0,87,45],[1572,57,149,47,0,87,45],[1729,57,149,47,0,87,45],[1886,57,149,47,0,87,45],[2,112,149,47,0,87,45],[159,112,149,47,0,87,45],[316,112,149,47,0,87,45],[473,112,149,47,0,87,45],[630,112,149,47,0,87,45],[787,112,149,47,0,87,45],[944,112,149,47,0,87,45],[1101,112,149,47,0,87,45],[1258,112,149,47,0,87,45],[1415,112,149,47,0,87,45],[1572,112,149,47,0,87,45],[1729,112,149,47,0,87,45],[1886,112,149,47,0,87,45],[2,167,149,47,0,87,45],[159,167,149,47,0,87,45],[316,167,149,47,0,87,45],[473,167,149,47,0,87,45],[630,167,149,47,0,87,45],[787,167,149,47,0,87,45],[944,167,149,47,0,87,45],[1101,167,149,47,0,87,45],[1258,167,149,47,0,87,45],[1415,167,149,47,0,87,45],[1572,167,149,47,0,87,45],[1729,167,149,47,0,87,45],[1886,167,149,47,0,87,45],[2,222,149,47,0,87,45],[159,222,149,47,0,87,45],[316,222,149,47,0,87,45],[473,222,149,47,0,87,45],[630,222,149,47,0,87,45],[787,222,149,47,0,87,45],[944,222,149,47,0,87,45],[1101,222,149,47,0,87,45],[1258,222,149,47,0,87,45],[1415,222,149,47,0,87,45],[1572,222,149,47,0,87,45],[1729,222,149,47,0,87,45],[1886,222,149,47,0,87,45],[2,277,149,47,0,87,45],[159,277,149,47,0,87,45],[316,277,149,47,0,87,45],[473,277,149,47,0,87,45],[630,277,149,47,0,87,45],[787,277,149,47,0,87,45],[944,277,149,47,0,87,45],[1101,277,149,47,0,87,45],[1258,277,149,47,0,87,45],[1415,277,149,47,0,87,45],[1572,277,149,47,0,87,45],[1729,277,149,47,0,87,45],[1886,277,149,47,0,87,45],[2,332,149,47,0,87,45],[159,332,149,47,0,87,45],[316,332,149,47,0,87,45],[473,332,149,47,0,87,45],[630,332,149,47,0,87,45],[787,332,149,47,0,87,45],[944,332,149,47,0,87,45],[1101,332,149,47,0,87,45],[1258,332,149,47,0,87,45],[1415,332,149,47,0,87,45],[1572,332,149,47,0,87,45],[1729,332,149,47,0,87,45],[1886,332,149,47,0,87,45],[2,387,149,47,0,87,45],[159,387,149,47,0,87,45],[316,387,149,47,0,87,45],[473,387,149,47,0,87,45],[630,387,149,47,0,87,45],[787,387,149,47,0,87,45],[944,387,149,47,0,87,45],[1101,387,149,47,0,87,45],[1258,387,149,47,0,87,45],[1415,387,149,47,0,87,45],[1572,387,149,47,0,87,45],[1729,387,149,47,0,87,45],[1886,387,149,47,0,87,45],[2,442,149,47,0,87,45],[159,442,149,47,0,87,45],[316,442,149,47,0,87,45],[473,442,149,47,0,87,45],[630,442,149,47,0,87,45],[787,442,149,47,0,87,45],[944,442,149,47,0,87,45],[1101,442,149,47,0,87,45],[1258,442,149,47,0,87,45],[1415,442,149,47,0,87,45],[1572,442,149,47,0,87,45],[1729,442,149,47,0,87,45],[1886,442,149,47,0,87,45],[2,497,149,47,0,87,45],[159,497,149,47,0,87,45],[316,497,149,47,0,87,45],[473,497,149,47,0,87,45],[630,497,149,47,0,87,45],[787,497,149,47,0,87,45],[944,497,149,47,0,87,45],[1101,497,149,47,0,87,45],[1258,497,149,47,0,87,45],[1415,497,149,47,0,87,45],[1572,497,149,47,0,87,45],[1729,497,149,47,0,87,45],[1886,497,149,47,0,87,45],[2,552,149,47,0,87,45],[159,552,149,47,0,87,45],[316,552,149,47,0,87,45],[473,552,149,47,0,87,45],[630,552,149,47,0,87,45],[787,552,149,47,0,87,45],[944,552,149,47,0,87,45],[1101,552,149,47,0,87,45],[1258,552,149,47,0,87,45],[1415,552,149,47,0,87,45],[1572,552,149,47,0,87,45],[1729,552,149,47,0,87,45],[1886,552,149,47,0,87,45],[2,607,149,47,0,87,45],[159,607,149,47,0,87,45],[316,607,149,47,0,87,45],[473,607,149,47,0,87,45],[630,607,149,47,0,87,45],[787,607,149,47,0,87,45],[944,607,149,47,0,87,45],[1101,607,149,47,0,87,45],[1258,607,149,47,0,87,45],[1415,607,149,47,0,87,45],[1572,607,149,47,0,87,45],[1729,607,149,47,0,87,45],[1886,607,149,47,0,87,45],[2,662,149,47,0,87,45],[159,662,149,47,0,87,45],[316,662,149,47,0,87,45],[473,662,149,47,0,87,45],[630,662,149,47,0,87,45],[787,662,149,47,0,87,45],[944,662,149,47,0,87,45],[1101,662,149,47,0,87,45],[1258,662,149,47,0,87,45],[1415,662,149,47,0,87,45],[1572,662,149,47,0,87,45],[1729,662,149,47,0,87,45],[1886,662,149,47,0,87,45],[2,717,149,47,0,87,45],[159,717,149,47,0,87,45],[316,717,149,47,0,87,45],[473,717,149,47,0,87,45],[630,717,149,47,0,87,45],[787,717,149,47,0,87,45],[944,717,149,47,0,87,45],[1101,717,149,47,0,87,45],[1258,717,149,47,0,87,45],[1415,717,149,47,0,87,45],[1572,717,149,47,0,87,45],[1729,717,149,47,0,87,45],[1886,717,149,47,0,87,45],[2,772,149,47,0,87,45],[159,772,149,47,0,87,45],[316,772,149,47,0,87,45],[473,772,149,47,0,87,45],[630,772,149,47,0,87,45],[787,772,149,47,0,87,45],[944,772,149,47,0,87,45],[1101,772,149,47,0,87,45],[1258,772,149,47,0,87,45],[1415,772,149,47,0,87,45],[1572,772,149,47,0,87,45],[1729,772,149,47,0,87,45],[1886,772,149,47,0,87,45],[2,827,149,47,0,87,45],[159,827,149,47,0,87,45],[316,827,149,47,0,87,45],[473,827,149,47,0,87,45],[630,827,149,47,0,87,45],[787,827,149,47,0,87,45],[944,827,149,47,0,87,45],[1101,827,149,47,0,87,45],[1258,827,149,47,0,87,45],[1415,827,149,47,0,87,45],[1572,827,149,47,0,87,45],[1729,827,149,47,0,87,45],[1886,827,149,47,0,87,45]],animations:{"walking loop":{frames:[43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62],speed:1},"walking end":{frames:[43,63,64,65,66,67,68,69,0],speed:1},"swimming end":{frames:[172,173,174,175,176,177,178],speed:1},"idle water":{frames:[93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132],speed:1},"swimming start":{frames:[133,134,135,136,137,138],next:"swimming loop",speed:1},eating:{frames:[0,70,71,72,73,74,75,75,76,77,78,79,80,81,82,83,84,84,84,84,84,85,85,85,84,86,87,88,89,90,91,92,0],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,0,0,33,34,35,33,0],speed:1},"eating water":{frames:[179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,196,196,195,197,197,198,199,200,201,202,203,204,205,206,207],speed:1},"swimming loop":{frames:[139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171],speed:1},walking:{frames:[0,36,37,38,39,40,41,42],next:"walking loop",speed:1}}}}},"crocodile-eggs":{id:"crocodile-eggs",src:"i/crocodile-eggs.png",data:{spritesheet:{frames:{width:82,height:40,regX:41,regY:-10},animations:{"default":0}}}},"durian-fruit":{id:"durian-fruit",src:"i/durian-fruit.png",data:{spritesheet:{frames:[[0,0,20,20,0,10,10],[21,0,16,23,0,8,0]],animations:{flower:0,fruit:1}}}},"durian-tree":{id:"durian-tree",src:"i/durian-tree.png",data:{spritesheet:{frames:{width:120,height:193,regX:35,regY:215},animations:{glow:1,"default":0}}}},fish:{id:"fish",src:"i/fish.png",data:{spritesheet:{framerate:30,images:["fish"],frames:[[2,2,177,197,0,88,118],[187,2,177,197,0,88,118],[372,2,177,197,0,88,118],[557,2,177,197,0,88,118],[742,2,177,197,0,88,118],[927,2,177,197,0,88,118],[1112,2,177,197,0,88,118],[1297,2,177,197,0,88,118],[1482,2,177,197,0,88,118],[1667,2,177,197,0,88,118],[1852,2,177,197,0,88,118],[2037,2,177,197,0,88,118],[2222,2,177,197,0,88,118],[2407,2,177,197,0,88,118],[2592,2,177,197,0,88,118],[2777,2,177,197,0,88,118],[2962,2,177,197,0,88,118],[3147,2,177,197,0,88,118],[3332,2,177,197,0,88,118],[3517,2,177,197,0,88,118],[3702,2,177,197,0,88,118],[3887,2,177,197,0,88,118],[2,207,177,197,0,88,118],[187,207,177,197,0,88,118],[372,207,177,197,0,88,118],[557,207,177,197,0,88,118],[742,207,177,197,0,88,118],[927,207,177,197,0,88,118],[1112,207,177,197,0,88,118],[1297,207,177,197,0,88,118],[1482,207,177,197,0,88,118],[1667,207,177,197,0,88,118],[1852,207,177,197,0,88,118],[2037,207,177,197,0,88,118],[2222,207,177,197,0,88,118],[2407,207,177,197,0,88,118],[2592,207,177,197,0,88,118],[2777,207,177,197,0,88,118],[2962,207,177,197,0,88,118],[3147,207,177,197,0,88,118],[3332,207,177,197,0,88,118],[3517,207,177,197,0,88,118],[3702,207,177,197,0,88,118],[3887,207,177,197,0,88,118],[2,412,177,197,0,88,118],[187,412,177,197,0,88,118],[372,412,177,197,0,88,118],[557,412,177,197,0,88,118],[742,412,177,197,0,88,118],[927,412,177,197,0,88,118],[1112,412,177,197,0,88,118],[1297,412,177,197,0,88,118],[1482,412,177,197,0,88,118],[1667,412,177,197,0,88,118],[1852,412,177,197,0,88,118],[2037,412,177,197,0,88,118],[2222,412,177,197,0,88,118],[2407,412,177,197,0,88,118],[2592,412,177,197,0,88,118],[2777,412,177,197,0,88,118],[2962,412,177,197,0,88,118]],animations:{jump:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],speed:1},"default":{speed:1,frames:[45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]}}}}},trees:{id:"trees",src:"i/trees.png",data:{spritesheet:{frames:{width:330,height:210,regX:165,regY:210},animations:{"forest-1":0,"forest-2":1,"forest-cover":2,"mangrove-1":3,"mangrove-2":4,"mangrove-cover":5}}}},goanna:{id:"goanna",src:"i/goanna.png",data:{spritesheet:{framerate:30,images:["goanna"],frames:[[2,2,99,37,0,70,37],[109,2,99,37,0,70,37],[216,2,99,37,0,70,37],[323,2,99,37,0,70,37],[430,2,99,37,0,70,37],[537,2,99,37,0,70,37],[644,2,99,37,0,70,37],[751,2,99,37,0,70,37],[858,2,99,37,0,70,37],[2,47,99,37,0,70,37],[109,47,99,37,0,70,37],[216,47,99,37,0,70,37],[323,47,99,37,0,70,37],[430,47,99,37,0,70,37],[537,47,99,37,0,70,37],[644,47,99,37,0,70,37],[751,47,99,37,0,70,37],[858,47,99,37,0,70,37],[2,92,99,37,0,70,37],[109,92,99,37,0,70,37],[216,92,99,37,0,70,37],[323,92,99,37,0,70,37],[430,92,99,37,0,70,37],[537,92,99,37,0,70,37],[644,92,99,37,0,70,37],[751,92,99,37,0,70,37],[858,92,99,37,0,70,37],[2,137,99,37,0,70,37],[109,137,99,37,0,70,37],[216,137,99,37,0,70,37],[323,137,99,37,0,70,37],[430,137,99,37,0,70,37],[537,137,99,37,0,70,37],[644,137,99,37,0,70,37],[751,137,99,37,0,70,37],[858,137,99,37,0,70,37],[2,182,99,37,0,70,37],[109,182,99,37,0,70,37],[216,182,99,37,0,70,37],[323,182,99,37,0,70,37],[430,182,99,37,0,70,37],[537,182,99,37,0,70,37],[644,182,99,37,0,70,37],[751,182,99,37,0,70,37],[858,182,99,37,0,70,37],[2,227,99,37,0,70,37],[109,227,99,37,0,70,37],[216,227,99,37,0,70,37],[323,227,99,37,0,70,37],[430,227,99,37,0,70,37],[537,227,99,37,0,70,37],[644,227,99,37,0,70,37],[751,227,99,37,0,70,37],[858,227,99,37,0,70,37],[2,272,99,37,0,70,37],[109,272,99,37,0,70,37],[216,272,99,37,0,70,37],[323,272,99,37,0,70,37],[430,272,99,37,0,70,37],[537,272,99,37,0,70,37],[644,272,99,37,0,70,37],[751,272,99,37,0,70,37],[858,272,99,37,0,70,37],[2,317,99,37,0,70,37],[109,317,99,37,0,70,37],[216,317,99,37,0,70,37],[323,317,99,37,0,70,37],[430,317,99,37,0,70,37],[537,317,99,37,0,70,37],[644,317,99,37,0,70,37],[751,317,99,37,0,70,37]],animations:{eating:{frames:[0,45,46,47,48,49,50,51,52,52,53,54,55,56,55,54,57,52,53,54,55,56,55,54,57,52,52,52,52,52,52,52,58,59,60,61,62,63,64,65,66,67,68,69,70],speed:1},idle:{frames:[0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,0,11,12,13,14,15,16,17,18,19,20,21,0,0,0,0,0,0,0,22,23,24,25,25,23,0,0,0,0],speed:1},walking:{frames:[0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,0],speed:1}}}}},monkey:{id:"monkey",src:"i/proboscis_monkey.png",data:{spritesheet:{framerate:30,images:["monkey"],frames:[[2,2,89,102,0,52,55],[99,2,89,102,0,52,55],[196,2,89,102,0,52,55],[293,2,89,102,0,52,55],[390,2,89,102,0,52,55],[487,2,89,102,0,52,55],[584,2,89,102,0,52,55],[681,2,89,102,0,52,55],[778,2,89,102,0,52,55],[875,2,89,102,0,52,55],[972,2,89,102,0,52,55],[1069,2,89,102,0,52,55],[1166,2,89,102,0,52,55],[1263,2,89,102,0,52,55],[1360,2,89,102,0,52,55],[1457,2,89,102,0,52,55],[1554,2,89,102,0,52,55],[1651,2,89,102,0,52,55],[1748,2,89,102,0,52,55],[1845,2,89,102,0,52,55],[1942,2,89,102,0,52,55],[2,112,89,102,0,52,55],[99,112,89,102,0,52,55],[196,112,89,102,0,52,55],[293,112,89,102,0,52,55],[390,112,89,102,0,52,55],[487,112,89,102,0,52,55],[584,112,89,102,0,52,55],[681,112,89,102,0,52,55],[778,112,89,102,0,52,55],[875,112,89,102,0,52,55],[972,112,89,102,0,52,55],[1069,112,89,102,0,52,55],[1166,112,89,102,0,52,55],[1263,112,89,102,0,52,55],[1360,112,89,102,0,52,55],[1457,112,89,102,0,52,55],[1554,112,89,102,0,52,55],[1651,112,89,102,0,52,55],[1748,112,89,102,0,60,100],[1845,112,89,102,0,60,100],[1942,112,89,102,0,60,100],[2,222,89,102,0,60,100],[99,222,89,102,0,60,100],[196,222,89,102,0,60,100],[293,222,89,102,0,60,100],[390,222,89,102,0,60,100],[487,222,89,102,0,60,100],[584,222,89,102,0,60,100],[681,222,89,102,0,60,100],[778,222,89,102,0,60,100],[875,222,89,102,0,60,100],[972,222,89,102,0,60,100],[1069,222,89,102,0,60,100],[1166,222,89,102,0,60,100],[1263,222,89,102,0,60,100],[1360,222,89,102,0,60,100],[1457,222,89,102,0,60,100],[1554,222,89,102,0,60,100],[1651,222,89,102,0,60,100],[1748,222,89,102,0,60,100],[1845,222,89,102,0,60,100],[1942,222,89,102,0,60,100],[2,332,89,102,0,60,100],[99,332,89,102,0,60,100],[196,332,89,102,0,60,100],[293,332,89,102,0,60,100],[390,332,89,102,0,60,100],[487,332,89,102,0,60,100],[584,332,89,102,0,60,100],[681,332,89,102,0,60,100],[778,332,89,102,0,60,100],[875,332,89,102,0,60,100],[972,332,89,102,0,60,100],[1069,332,89,102,0,60,100],[1166,332,89,102,0,60,100],[1263,332,89,102,0,60,100],[1360,332,89,102,0,60,100],[1457,332,89,102,0,60,100],[1554,332,89,102,0,60,100],[1651,332,89,102,0,60,100],[1748,332,89,102,0,60,100],[1845,332,89,102,0,60,100],[1942,332,89,102,0,60,100],[2,442,89,102,0,60,100],[99,442,89,102,0,60,100],[196,442,89,102,0,60,100],[293,442,89,102,0,60,100],[390,442,89,102,0,60,100],[487,442,89,102,0,60,100],[584,442,89,102,0,60,100],[681,442,89,102,0,60,100],[778,442,89,102,0,60,100],[875,442,89,102,0,60,100],[972,442,89,102,0,60,100],[1069,442,89,102,0,60,100],[1166,442,89,102,0,60,100],[1263,442,89,102,0,60,100],[1360,442,89,102,0,60,100],[1457,442,89,102,0,60,100],[1554,442,89,102,0,60,100],[1651,442,89,102,0,67,55],[1748,442,89,102,0,67,55],[1845,442,89,102,0,67,55],[1942,442,89,102,0,67,55],[2,552,89,102,0,67,55],[99,552,89,102,0,67,55],[196,552,89,102,0,67,55],[293,552,89,102,0,67,55],[390,552,89,102,0,67,55],[487,552,89,102,0,67,55],[584,552,89,102,0,67,55],[681,552,89,102,0,67,55],[778,552,89,102,0,67,55],[875,552,89,102,0,67,55],[972,552,89,102,0,67,55],[1069,552,89,102,0,67,55],[1166,552,89,102,0,67,55],[1263,552,89,102,0,52,55],[1360,552,89,102,0,52,55],[1457,552,89,102,0,52,55],[1554,552,89,102,0,52,55],[1651,552,89,102,0,52,55],[1748,552,89,102,0,52,55],[1845,552,89,102,0,52,55],[1942,552,89,102,0,52,55],[2,662,89,102,0,52,55],[99,662,89,102,0,52,55],[196,662,89,102,0,52,55],[293,662,89,102,0,52,55],[390,662,89,102,0,52,55],[487,662,89,102,0,52,55],[584,662,89,102,0,52,55],[681,662,89,102,0,52,55],[778,662,89,102,0,52,55],[875,662,89,102,0,52,55],[972,662,89,102,0,52,55],[1069,662,89,102,0,52,55],[1166,662,89,102,0,52,55],[1263,662,89,102,0,52,55],[1360,662,89,102,0,52,55],[1457,662,89,102,0,52,55],[1554,662,89,102,0,52,55],[1651,662,89,102,0,52,55],[1748,662,89,102,0,52,55],[1845,662,89,102,0,52,55],[1942,662,89,102,0,52,55],[2,772,89,102,0,52,55],[99,772,89,102,0,52,55],[196,772,89,102,0,52,55],[293,772,89,102,0,52,55],[390,772,89,102,0,52,55],[487,772,89,102,0,52,55],[584,772,89,102,0,52,55],[681,772,89,102,0,52,55],[778,772,89,102,0,52,55],[875,772,89,102,0,52,55]],animations:{walking:{frames:[77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],speed:1},"idle ground":{frames:[39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,39],speed:1},climbing:{frames:[101,102,103,104,105,106,107,108,108,108,108,108,108,108,109,110,111,112,113,114,115,116,117,101],speed:1},eating:{frames:[118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156],speed:1}}}}},mudskipper:{id:"mudskipper",src:"i/mudskipper.png",data:{spritesheet:{framerate:30,images:["mudskipper"],frames:{width:75,height:83,regX:40,regY:70},animations:{skipping:{frames:[0,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,0,0,0],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,11,11,11,11,11,11,11,11,11,11,12,13,14,15,15,13,12,16,16,17,18,19,20,21,22,3,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],speed:1}}}}},"orangutan-female":{id:"orangutan-female",src:"i/orangutan_female.png",data:{spritesheet:{framerate:30,images:["orangutan-female"],frames:[[2,2,69,90,0,28,83],[79,2,69,90,0,28,83],[156,2,69,90,0,28,83],[233,2,69,90,0,28,83],[310,2,69,90,0,28,83],[387,2,69,90,0,28,83],[464,2,69,90,0,28,83],[541,2,69,90,0,28,83],[618,2,69,90,0,28,83],[695,2,69,90,0,28,83],[772,2,69,90,0,28,83],[849,2,69,90,0,28,83],[926,2,69,90,0,28,83],[1003,2,69,90,0,28,83],[1080,2,69,90,0,28,83],[1157,2,69,90,0,28,83],[1234,2,69,90,0,28,83],[1311,2,69,90,0,28,83],[1388,2,69,90,0,28,83],[1465,2,69,90,0,28,83],[1542,2,69,90,0,28,83],[1619,2,69,90,0,28,83],[1696,2,69,90,0,28,83],[1773,2,69,90,0,28,83],[1850,2,69,90,0,28,83],[1927,2,69,90,0,28,83],[2,100,69,90,0,28,83],[79,100,69,90,0,28,83],[156,100,69,90,0,28,83],[233,100,69,90,0,28,83],[310,100,69,90,0,28,83],[387,100,69,90,0,28,83],[464,100,69,90,0,28,83],[541,100,69,90,0,28,83],[618,100,69,90,0,28,83],[695,100,69,90,0,28,83],[772,100,69,90,0,28,83],[849,100,69,90,0,28,83],[926,100,69,90,0,28,83],[1003,100,69,90,0,28,83],[1080,100,69,90,0,28,83],[1157,100,69,90,0,28,83],[1234,100,69,90,0,28,83],[1311,100,69,90,0,28,83],[1388,100,69,90,0,28,83],[1465,100,69,90,0,28,83],[1542,100,69,90,0,28,83],[1619,100,69,90,0,28,83],[1696,100,69,90,0,28,83],[1773,100,69,90,0,28,83],[1850,100,69,90,0,28,83],[1927,100,69,90,0,28,83],[2,198,69,90,0,28,83],[79,198,69,90,0,28,83],[156,198,69,90,0,28,83],[233,198,69,90,0,28,83],[310,198,69,90,0,28,83],[387,198,69,90,0,28,83],[464,198,69,90,0,28,83],[541,198,69,90,0,28,83],[618,198,69,90,0,28,83],[695,198,69,90,0,28,83],[772,198,69,90,0,28,83],[849,198,69,90,0,28,83],[926,198,69,90,0,28,83],[1003,198,69,90,0,28,83],[1080,198,69,90,0,28,83],[1157,198,69,90,0,28,83],[1234,198,69,90,0,28,83],[1311,198,69,90,0,28,83],[1388,198,69,90,0,28,83],[1465,198,69,90,0,28,83],[1542,198,69,90,0,28,83],[1619,198,69,90,0,28,83],[1696,198,69,90,0,28,83],[1773,198,69,90,0,28,83],[1850,198,69,90,0,28,83],[1927,198,69,90,0,28,83],[2,296,69,90,0,28,83],[79,296,69,90,0,28,83],[156,296,69,90,0,28,83],[233,296,69,90,0,28,83],[310,296,69,90,0,28,83],[387,296,69,90,0,28,83],[464,296,69,90,0,28,83],[541,296,69,90,0,28,83],[618,296,69,90,0,28,83],[695,296,69,90,0,28,83],[772,296,69,90,0,28,83],[849,296,69,90,0,28,83],[926,296,69,90,0,28,83],[1003,296,69,90,0,28,83],[1080,296,69,90,0,28,83],[1157,296,69,90,0,28,83],[1234,296,69,90,0,28,83],[1311,296,69,90,0,28,83],[1388,296,69,90,0,28,83],[1465,296,69,90,0,28,83],[1542,296,69,90,0,28,83],[1619,296,69,90,0,28,83],[1696,296,69,90,0,28,83],[1773,296,69,90,0,28,83],[1850,296,69,90,0,28,83],[1927,296,69,90,0,28,83],[2,394,69,90,0,28,83],[79,394,69,90,0,28,83],[156,394,69,90,0,28,83],[233,394,69,90,0,28,83],[310,394,69,90,0,28,83],[387,394,69,90,0,28,83],[464,394,69,90,0,28,83],[541,394,69,90,0,28,83],[618,394,69,90,0,28,83],[695,394,69,90,0,28,83],[772,394,69,90,0,28,83],[849,394,69,90,0,28,83],[926,394,69,90,0,28,83],[1003,394,69,90,0,28,83],[1080,394,69,90,0,28,83],[1157,394,69,90,0,28,83],[1234,394,69,90,0,28,83],[1311,394,69,90,0,28,83],[1388,394,69,90,0,28,83],[1465,394,69,90,0,28,83],[1542,394,69,90,0,28,83],[1619,394,69,90,0,28,83],[1696,394,69,90,0,28,83],[1773,394,69,90,0,28,83],[1850,394,69,90,0,28,83],[1927,394,69,90,0,28,83],[2,492,69,90,0,28,83],[79,492,69,90,0,28,83],[156,492,69,90,0,28,83],[233,492,69,90,0,28,83],[310,492,69,90,0,28,83],[387,492,69,90,0,28,83],[464,492,69,90,0,28,83],[541,492,69,90,0,28,83],[618,492,69,90,0,28,83],[695,492,69,90,0,28,83],[772,492,69,90,0,28,83],[849,492,69,90,0,28,83],[926,492,69,90,0,48,83],[1003,492,69,90,0,48,83],[1080,492,69,90,0,48,83],[1157,492,69,90,0,48,83],[1234,492,69,90,0,48,83],[1311,492,69,90,0,48,83],[1388,492,69,90,0,48,83],[1465,492,69,90,0,48,83],[1542,492,69,90,0,48,83],[1619,492,69,90,0,48,83],[1696,492,69,90,0,48,83],[1773,492,69,90,0,48,83],[1850,492,69,90,0,48,83],[1927,492,69,90,0,48,83]],animations:{climbing:{frames:[142,143,144,145,146,147,148,148,148,148,148,148,149,150,151,152,153,154,155,142],speed:1},"walking loop":{frames:[105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128],speed:1},"walking end":{frames:[105,129,130,131,132,133,134,135,136,137,138,139,140,141,0,0,0,0],speed:1},"walking start":{frames:[93,94,95,96,97,98,99,100,101,102,103,104],speed:1},eating:{frames:[40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,0],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,19,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,0,0,0,0,0,0,0,0,0],speed:1}}}}},"orangutan-male":{id:"orangutan-male",src:"i/orangutan_male.png",data:{spritesheet:{framerate:30,images:["orangutan-male"],frames:[[2,2,84,113,0,37,107],[94,2,84,113,0,37,107],[186,2,84,113,0,37,107],[278,2,84,113,0,37,107],[370,2,84,113,0,37,107],[462,2,84,113,0,37,107],[554,2,84,113,0,37,107],[646,2,84,113,0,37,107],[738,2,84,113,0,37,107],[830,2,84,113,0,37,107],[922,2,84,113,0,37,107],[1014,2,84,113,0,37,107],[1106,2,84,113,0,37,107],[1198,2,84,113,0,37,107],[1290,2,84,113,0,37,107],[1382,2,84,113,0,37,107],[1474,2,84,113,0,37,107],[1566,2,84,113,0,37,107],[1658,2,84,113,0,37,107],[1750,2,84,113,0,37,107],[1842,2,84,113,0,37,107],[1934,2,84,113,0,37,107],[2,123,84,113,0,37,107],[94,123,84,113,0,37,107],[186,123,84,113,0,37,107],[278,123,84,113,0,37,107],[370,123,84,113,0,37,107],[462,123,84,113,0,37,107],[554,123,84,113,0,37,107],[646,123,84,113,0,37,107],[738,123,84,113,0,37,107],[830,123,84,113,0,37,107],[922,123,84,113,0,37,107],[1014,123,84,113,0,37,107],[1106,123,84,113,0,37,107],[1198,123,84,113,0,37,107],[1290,123,84,113,0,37,107],[1382,123,84,113,0,37,107],[1474,123,84,113,0,37,107],[1566,123,84,113,0,37,107],[1658,123,84,113,0,37,107],[1750,123,84,113,0,37,107],[1842,123,84,113,0,37,107],[1934,123,84,113,0,37,107],[2,244,84,113,0,37,107],[94,244,84,113,0,37,107],[186,244,84,113,0,37,107],[278,244,84,113,0,37,107],[370,244,84,113,0,37,107],[462,244,84,113,0,37,107],[554,244,84,113,0,37,107],[646,244,84,113,0,37,107],[738,244,84,113,0,37,107],[830,244,84,113,0,37,107],[922,244,84,113,0,37,107],[1014,244,84,113,0,37,107],[1106,244,84,113,0,37,107],[1198,244,84,113,0,37,107],[1290,244,84,113,0,37,107],[1382,244,84,113,0,37,107],[1474,244,84,113,0,37,107],[1566,244,84,113,0,37,107],[1658,244,84,113,0,37,107],[1750,244,84,113,0,37,107],[1842,244,84,113,0,37,107],[1934,244,84,113,0,37,107],[2,365,84,113,0,37,107],[94,365,84,113,0,37,107],[186,365,84,113,0,37,107],[278,365,84,113,0,37,107],[370,365,84,113,0,37,107],[462,365,84,113,0,37,107],[554,365,84,113,0,37,107],[646,365,84,113,0,37,107],[738,365,84,113,0,37,107],[830,365,84,113,0,37,107],[922,365,84,113,0,37,107],[1014,365,84,113,0,37,107],[1106,365,84,113,0,37,107],[1198,365,84,113,0,37,107],[1290,365,84,113,0,37,107],[1382,365,84,113,0,37,107],[1474,365,84,113,0,37,107],[1566,365,84,113,0,37,107],[1658,365,84,113,0,37,107],[1750,365,84,113,0,37,107],[1842,365,84,113,0,37,107],[1934,365,84,113,0,37,107],[2,486,84,113,0,37,107],[94,486,84,113,0,37,107],[186,486,84,113,0,37,107],[278,486,84,113,0,37,107],[370,486,84,113,0,37,107],[462,486,84,113,0,37,107],[554,486,84,113,0,37,107],[646,486,84,113,0,37,107],[738,486,84,113,0,37,107],[830,486,84,113,0,37,107],[922,486,84,113,0,37,107],[1014,486,84,113,0,37,107],[1106,486,84,113,0,37,107],[1198,486,84,113,0,37,107],[1290,486,84,113,0,37,107],[1382,486,84,113,0,37,107],[1474,486,84,113,0,37,107],[1566,486,84,113,0,37,107],[1658,486,84,113,0,37,107],[1750,486,84,113,0,37,107],[1842,486,84,113,0,37,107],[1934,486,84,113,0,37,107],[2,607,84,113,0,37,107],[94,607,84,113,0,37,107],[186,607,84,113,0,37,107],[278,607,84,113,0,37,107],[370,607,84,113,0,61,107],[462,607,84,113,0,61,107],[554,607,84,113,0,61,107],[646,607,84,113,0,61,107],[738,607,84,113,0,61,107],[830,607,84,113,0,61,107],[922,607,84,113,0,61,107],[1014,607,84,113,0,61,107],[1106,607,84,113,0,61,107],[1198,607,84,113,0,61,107],[1290,607,84,113,0,61,107],[1382,607,84,113,0,61,107],[1474,607,84,113,0,61,107],[1566,607,84,113,0,61,107],[1658,607,84,113,0,61,107],[1750,607,84,113,0,61,107],[1842,607,84,113,0,61,107],[1934,607,84,113,0,61,107],[2,728,84,113,0,61,107],[94,728,84,113,0,61,107],[186,728,84,113,0,61,107],[278,728,84,113,0,61,107],[370,728,84,113,0,61,107]],animations:{climbing:{frames:[114,115,116,117,118,119,120,121,122,123,124,125,125,125,126,127,128,129,130,131,132,133,134,135,136,114],speed:1},"walking end":{frames:[60,61,62,63,64,65,66,67,68,69,0],speed:1},walking:{frames:[0,29,30,31,32,33,34,35,36,37,38,39],next:"loop",speed:1},eating:{frames:[70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,0],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,0],speed:1},loop:{frames:[40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],speed:1}}}}},stork:{id:"stork",src:"i/stork.png",data:{spritesheet:{framerate:30,images:["stork"],frames:[[2,2,116,85,0,51,85],[126,2,116,85,0,51,85],[250,2,116,85,0,51,85],[374,2,116,85,0,51,85],[498,2,116,85,0,51,85],[622,2,116,85,0,51,85],[746,2,116,85,0,51,85],[870,2,116,85,0,51,85],[994,2,116,85,0,51,85],[1118,2,116,85,0,51,85],[1242,2,116,85,0,51,85],[1366,2,116,85,0,51,85],[1490,2,116,85,0,51,85],[1614,2,116,85,0,51,85],[1738,2,116,85,0,51,85],[1862,2,116,85,0,51,85],[2,95,116,85,0,51,85],[126,95,116,85,0,51,85],[250,95,116,85,0,51,85],[374,95,116,85,0,51,85],[498,95,116,85,0,51,85],[622,95,116,85,0,51,85],[746,95,116,85,0,51,85],[870,95,116,85,0,51,85],[994,95,116,85,0,51,85],[1118,95,116,85,0,51,85],[1242,95,116,85,0,51,85],[1366,95,116,85,0,51,85],[1490,95,116,85,0,51,85],[1614,95,116,85,0,51,85],[1738,95,116,85,0,51,85],[1862,95,116,85,0,51,85],[2,188,116,85,0,51,85],[126,188,116,85,0,51,85],[250,188,116,85,0,51,85],[374,188,116,85,0,51,85],[498,188,116,85,0,51,85],[622,188,116,85,0,51,85],[746,188,116,85,0,51,85],[870,188,116,85,0,51,85],[994,188,116,85,0,51,85],[1118,188,116,85,0,51,85],[1242,188,116,85,0,51,85],[1366,188,116,85,0,51,85],[1490,188,116,85,0,51,85],[1614,188,116,85,0,51,85],[1738,188,116,85,0,51,85],[1862,188,116,85,0,51,85],[2,281,116,85,0,51,85],[126,281,116,85,0,51,85],[250,281,116,85,0,51,85],[374,281,116,85,0,51,85],[498,281,116,85,0,51,85],[622,281,116,85,0,51,85],[746,281,116,85,0,51,85],[870,281,116,85,0,51,85],[994,281,116,85,0,51,85],[1118,281,116,85,0,51,85],[1242,281,116,85,0,51,85],[1366,281,116,85,0,51,85],[1490,281,116,85,0,51,85],[1614,281,116,85,0,51,85],[1738,281,116,85,0,51,85],[1862,281,116,85,0,51,85],[2,374,116,85,0,51,85],[126,374,116,85,0,51,85],[250,374,116,85,0,51,85],[374,374,116,85,0,51,85],[498,374,116,85,0,51,85],[622,374,116,85,0,51,85],[746,374,116,85,0,51,85],[870,374,116,85,0,51,85],[994,374,116,85,0,51,85],[1118,374,116,85,0,51,85],[1242,374,116,85,0,51,85],[1366,374,116,85,0,51,85],[1490,374,116,85,0,51,85],[1614,374,116,85,0,51,85],[1738,374,116,85,0,51,85],[1862,374,116,85,0,51,85],[2,467,116,85,0,51,85],[126,467,116,85,0,51,85],[250,467,116,85,0,51,85],[374,467,116,85,0,51,85],[498,467,116,85,0,51,85],[622,467,116,85,0,51,85],[746,467,116,85,0,51,85],[870,467,116,85,0,51,85],[994,467,116,85,0,51,85],[1118,467,116,85,0,51,85],[1242,467,116,85,0,51,85],[1366,467,116,85,0,51,85],[1490,467,116,85,0,51,85],[1614,467,116,85,0,51,85],[1738,467,116,85,0,51,85],[1862,467,116,85,0,51,85],[2,560,116,85,0,51,85],[126,560,116,85,0,51,85],[250,560,116,85,0,51,85],[374,560,116,85,0,51,85],[498,560,116,85,0,51,85],[622,560,116,85,0,51,85],[746,560,116,85,0,51,85],[870,560,116,85,0,51,85],[994,560,116,85,0,51,85],[1118,560,116,85,0,51,85],[1242,560,116,85,0,51,85],[1366,560,116,85,0,51,85],[1490,560,116,85,0,51,85],[1614,560,116,85,0,51,85],[1738,560,116,85,0,51,85],[1862,560,116,85,0,51,85],[2,653,116,85,0,51,85],[126,653,116,85,0,51,85],[250,653,116,85,0,51,85],[374,653,116,85,0,51,85],[498,653,116,85,0,51,85],[622,653,116,85,0,51,85],[746,653,116,85,0,51,85],[870,653,116,85,0,51,85],[994,653,116,85,0,51,85],[1118,653,116,85,0,51,85],[1242,653,116,85,0,51,85],[1366,653,116,85,0,51,85],[1490,653,116,85,0,51,85],[1614,653,116,85,0,51,85],[1738,653,116,85,0,51,85],[1862,653,116,85,0,51,85],[2,746,116,85,0,51,85],[126,746,116,85,0,51,85],[250,746,116,85,0,51,85],[374,746,116,85,0,51,85],[498,746,116,85,0,51,85],[622,746,116,85,0,51,85],[746,746,116,85,0,51,85],[870,746,116,85,0,51,85],[994,746,116,85,0,51,85],[1118,746,116,85,0,51,85],[1242,746,116,85,0,51,85],[1366,746,116,85,0,51,85],[1490,746,116,85,0,51,85],[1614,746,116,85,0,51,85],[1738,746,116,85,0,51,85],[1862,746,116,85,0,51,85],[2,839,116,85,0,51,85]],animations:{eating:{frames:[48,49,50,51,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,71,71,71,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,94,94],speed:1},flying:{frames:[35,36,37,38,39,40,41,42,43,44,45,46,47,35],speed:1},idle:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,13,13,13,13,14,15,16,17,17,15,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],speed:1},"water idle":{frames:[95],speed:1},"eating in water":{frames:[95,96,97,98,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,118,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,144],speed:1}}}}},"stork-eggs":{id:"stork-eggs",src:"i/stork-eggs.png",data:{spritesheet:{frames:{width:63,height:63,regX:32,regY:63},animations:{"default":0}}}},cards:{id:"cards",src:"i/cards.png",data:{spritesheet:{frames:{width:100,height:100,regX:50,regY:50},animations:{"forest-trees":0,fish:1,"mangrove-trees":2,forest:4,orangutan:5,"orangutan-male":5,crocodile:6,mudskipper:7,shoreline:8,lake:9,bat:10,stork:11,goanna:12,"durian-fruit":13,mangrove:14,"durian-tree":15,"orangutan-female":16,monkey:17,"default":20}},rows:4,columns:5}},circle:{id:"circle",src:"i/circle.png",data:{spritesheet:{frames:[[0,0,178,114,0,94,-9],[0,114,178,114,0,92,99],[0,228,178,114,0,101,75]],animations:{fish:0,stork:1,crocodile:2}}}},circuitboarder:{id:"circuitboarder",src:"i/circuitboarder.png",data:{spritesheet:{frames:[[0,0,259,259,0,17,17]],animations:{"default":0}}}},"card-frame":{id:"card-frame",src:"i/card_frame.png"},checkmark:{id:"checkmark",src:"i/checkmark.png",data:{spritesheet:{frames:{width:80,height:80,regX:41,regY:32},animations:{satisfied:1,background:2,critical:3,"default":0}}}},inez:{id:"inez",src:"i/inez.png"},inez2:{id:"inez2",src:"i/inez2.png"},tiles:{id:"tiles",src:"i/tiles.png",data:{spritesheet:{frames:{width:225,height:225,regX:112,regY:225},animations:{valid:12,invalid:8,"default":-1}},rows:6,columns:4}},disease:{id:"disease",src:"i/disease.png",data:{spritesheet:{framerate:30,images:["disease"],frames:[[2,2,46,67,0,23,66],[56,2,46,67,0,23,66],[110,2,46,67,0,23,66],[164,2,46,67,0,23,66],[218,2,46,67,0,23,66],[272,2,46,67,0,23,66],[326,2,46,67,0,23,66],[380,2,46,67,0,23,66],[434,2,46,67,0,23,66],[2,77,46,67,0,23,66],[56,77,46,67,0,23,66],[110,77,46,67,0,23,66],[164,77,46,67,0,23,66],[218,77,46,67,0,23,66],[272,77,46,67,0,23,66],[326,77,46,67,0,23,66],[380,77,46,67,0,23,66],[434,77,46,67,0,23,66],[2,152,46,67,0,23,66],[56,152,46,67,0,23,66],[110,152,46,67,0,23,66],[164,152,46,67,0,23,66],[218,152,46,67,0,23,66],[272,152,46,67,0,23,66],[326,152,46,67,0,23,66],[380,152,46,67,0,23,66],[434,152,46,67,0,23,66],[2,227,46,67,0,23,66],[56,227,46,67,0,23,66],[110,227,46,67,0,23,66],[164,227,46,67,0,23,66],[218,227,46,67,0,23,66],[272,227,46,67,0,23,66],[326,227,46,67,0,23,66],[380,227,46,67,0,23,66],[434,227,46,67,0,23,66],[2,302,46,67,0,23,66],[56,302,46,67,0,23,66],[110,302,46,67,0,23,66],[164,302,46,67,0,23,66]],animations:{}}}},"disease-cloud":{id:"disease-cloud",src:"i/disease-cloud.png",data:{spritesheet:{framerate:30,images:["disease-cloud"],frames:[[2,2,98,81,0,49,40],[108,2,98,81,0,49,40],[214,2,98,81,0,49,40],[320,2,98,81,0,49,40],[426,2,98,81,0,49,40],[532,2,98,81,0,49,40],[638,2,98,81,0,49,40],[744,2,98,81,0,49,40],[850,2,98,81,0,49,40],[2,91,98,81,0,49,40],[108,91,98,81,0,49,40],[214,91,98,81,0,49,40],[320,91,98,81,0,49,40],[426,91,98,81,0,49,40],[532,91,98,81,0,49,40],[638,91,98,81,0,49,40],[744,91,98,81,0,49,40],[850,91,98,81,0,49,40],[2,180,98,81,0,49,40],[108,180,98,81,0,49,40],[214,180,98,81,0,49,40],[320,180,98,81,0,49,40],[426,180,98,81,0,49,40],[532,180,98,81,0,49,40],[638,180,98,81,0,49,40],[744,180,98,81,0,49,40],[850,180,98,81,0,49,40],[2,269,98,81,0,49,40],[108,269,98,81,0,49,40],[214,269,98,81,0,49,40]],animations:{}}}},"disease-ship":{id:"disease-ship",src:"i/disease-ship.png",data:{spritesheet:{framerate:30,images:["disease-ship"],frames:[[2,2,160,146,0,80,73],[170,2,160,146,0,80,73],[338,2,160,146,0,80,73],[506,2,160,146,0,80,73],[674,2,160,146,0,80,73],[842,2,160,146,0,80,73],[2,156,160,146,0,80,73],[170,156,160,146,0,80,73],[338,156,160,146,0,80,73],[506,156,160,146,0,80,73],[674,156,160,146,0,80,73],[842,156,160,146,0,80,73],[2,310,160,146,0,80,73],[170,310,160,146,0,80,73],[338,310,160,146,0,80,73],[506,310,160,146,0,80,73],[674,310,160,146,0,80,73],[842,310,160,146,0,80,73],[2,464,160,146,0,80,73],[170,464,160,146,0,80,73],[338,464,160,146,0,80,73],[506,464,160,146,0,80,73],[674,464,160,146,0,80,73],[842,464,160,146,0,80,73],[2,618,160,146,0,80,73],[170,618,160,146,0,80,73],[338,618,160,146,0,80,73],[506,618,160,146,0,80,73],[674,618,160,146,0,80,73],[842,618,160,146,0,80,73]],animations:{idle:{frames:[0,25,26,26,25,0,0,0,27,28,28,29,0,0,0,0,0,0],speed:1},"pass-0":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,18,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,5,6,7,8,9,10,11,12,13,5,6,7,8,9,10,11,12,13,14,15,16,17,18,18,18,19,20,21,22,23,24],speed:1,next:"idle"},"pass-1":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,18,18,19,20,21,22,23,24,0,1,2,3,4,5,6,7,8,9,10,11,12,13,5,6,7,8,9,10,11,12,13,5,6,7,8,9,10,11,12,13,14,15,15,15,16,16,16,16,17,18,18,18,19,20,21,22,23,24],speed:1,next:"idle"}}}}},"buzz-and-delete-ship":{id:"buzz-and-delete-ship",src:"i/buzz-and-delete-ship.png",data:{spritesheet:{framerate:30,images:["buzz-and-delete-ship"],frames:[[2,2,323,118,0,161,59],[333,2,323,118,0,161,59],[664,2,323,118,0,161,59],[995,2,323,118,0,161,59],[1326,2,323,118,0,161,59],[1657,2,323,118,0,161,59],[2,128,323,118,0,161,59],[333,128,323,118,0,161,59],[664,128,323,118,0,161,59],[995,128,323,118,0,161,59],[1326,128,323,118,0,161,59],[1657,128,323,118,0,161,59],[2,254,323,118,0,161,59],[333,254,323,118,0,161,59],[664,254,323,118,0,161,59],[995,254,323,118,0,161,59],[1326,254,323,118,0,161,59],[1657,254,323,118,0,161,59],[2,380,323,118,0,161,59],[333,380,323,118,0,161,59]],animations:{}}}},cyclone:{id:"cyclone",src:"i/cyclone.png",data:{spritesheet:{framerate:30,images:["cyclone"],frames:[[2,2,197,258,0,162,256],[207,2,197,258,0,162,256],[412,2,197,258,0,162,256],[617,2,197,258,0,162,256],[822,2,197,258,0,162,256],[1027,2,197,258,0,162,256],[1232,2,197,258,0,162,256],[1437,2,197,258,0,162,256],[1642,2,197,258,0,162,256],[2,268,197,258,0,162,256],[207,268,197,258,0,162,256],[412,268,197,258,0,162,256],[617,268,197,258,0,162,256],[822,268,197,258,0,162,256],[1027,268,197,258,0,162,256],[1232,268,197,258,0,162,256],[1437,268,197,258,0,162,256],[1642,268,197,258,0,162,256],[2,534,197,258,0,162,256]],animations:{}}}},"grim-wreaker":{id:"grim-wreaker",src:"i/grim-wreaker.png",data:{spritesheet:{frames:{width:170,height:98,regX:137,regY:86},animations:{"default":0}}}},"tractor-beam":{id:"tractor-beam",src:"i/tractor-beam.png",data:{spritesheet:{framerate:30,images:["tractor-beam"],frames:[[2,2,139,154,0,69,0],[149,2,139,154,0,69,0],[296,2,139,154,0,69,0],[2,164,139,154,0,69,0],[149,164,139,154,0,69,0],[296,164,139,154,0,69,0],[2,326,139,154,0,69,0],[149,326,139,154,0,69,0]],animations:{closing:{frames:[5,6,7,2,1,0],speed:1},opening:{frames:[0,1,2,3,4],speed:1},open:{frames:[5,5,5,5,5,5,5,5,5,5,5,5],speed:1},"default":{frames:[0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,2,1,0],speed:1,next:"idle"},idle:{frames:[0],speed:1}}}}},"terrain-ship":{id:"terrain-ship",src:"i/terrain-ship.png",data:{spritesheet:{framerate:30,images:["terrain-ship"],frames:[[2,2,179,138,0,145,127],[189,2,179,138,0,145,127],[376,2,179,138,0,145,127],[563,2,179,138,0,145,127],[750,2,179,138,0,145,127],[2,148,179,138,0,145,127],[189,148,179,138,0,145,127],[376,148,179,138,0,145,127],[563,148,179,138,0,145,127],[750,148,179,138,0,145,127],[2,294,179,138,0,145,127],[189,294,179,138,0,145,127]],animations:{opening:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,10,9,8,7,6,5,4,3,2,1,0],speed:1,next:"default"},closing:{frames:[11,10,9,8,7,6,5,4,3,2,1,0],speed:1},opened:{frames:[11],speed:1},"default":{frames:[0],speed:1}}}}},"terrain-beam":{id:"terrain-beam",src:"i/terrain-beam.png",data:{spritesheet:{framerate:30,images:["terrain-beam"],frames:[[2,2,93,163,0,46,0],[103,2,93,163,0,46,0],[204,2,93,163,0,46,0],[305,2,93,163,0,46,0],[406,2,93,163,0,46,0],[507,2,93,163,0,46,0],[608,2,93,163,0,46,0],[709,2,93,163,0,46,0],[810,2,93,163,0,46,0],[911,2,93,163,0,46,0],[2,173,93,163,0,46,0],[103,173,93,163,0,46,0],[204,173,93,163,0,46,0],[305,173,93,163,0,46,0],[406,173,93,163,0,46,0],[507,173,93,163,0,46,0]],animations:{opening:{frames:[0,1,2,3],speed:1},closing:{frames:[10,12,13,14,15],speed:1},open:{frames:[4,5,6,7,8,9,10,11],speed:1},"default":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,4,5,6,7,8,9,10,11,4,5,6,7,8,9,10,11,4,5,6,7,8,9,10,11,4,5,6,7,8,9,10,11,10,12,13,14,15],speed:1,next:"idle"},idle:{frames:[15],speed:1}}}}},"terrain-splash":{id:"terrain-splash",src:"i/terrain-splash.png",data:{spritesheet:{frames:{width:225,height:225,regX:112,regY:112},animations:{"default":0}}}},"terrain-wall":{id:"terrain-wall",src:"i/terrain-wall.png",data:{spritesheet:{framerate:30,images:["terrain-wall"],frames:[[2,2,225,260,0,122,260],[235,2,225,260,0,122,260],[468,2,225,260,0,122,260],[701,2,225,260,0,122,260],[934,2,225,260,0,122,260],[1167,2,225,260,0,122,260],[1400,2,225,260,0,122,260],[1633,2,225,260,0,122,260],[2,270,225,260,0,122,260],[235,270,225,260,0,122,260],[468,270,225,260,0,122,260],[701,270,225,260,0,122,260],[934,270,225,260,0,122,260],[1167,270,225,260,0,122,260],[1400,270,225,260,0,122,260],[1633,270,225,260,0,122,260],[2,538,225,260,0,122,260],[235,538,225,260,0,122,260],[468,538,225,260,0,122,260],[701,538,225,260,0,122,260],[934,538,225,260,0,122,260],[1167,538,225,260,0,122,260],[1400,538,225,260,0,122,260],[1633,538,225,260,0,122,260],[2,806,225,260,0,122,260],[235,806,225,260,0,122,260],[468,806,225,260,0,122,260]],animations:{idle:{frames:[0],speed:1},up:{frames:[0,1,2,3],speed:1},down:{frames:[23,24,25,26,0],speed:1},"default":{frames:[0,1,1,2,2,3,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,23,24,24,25,25,26,26,0],speed:1,next:"idle"}}}}},"wall-trees":{id:"wall-trees",src:"i/wall-trees.png",data:{spritesheet:{framerate:30,images:["wall-trees"],frames:[[2,2,225,260,0,122,260],[235,2,225,260,0,122,260],[468,2,225,260,0,122,260],[701,2,225,260,0,122,260],[934,2,225,260,0,122,260],[1167,2,225,260,0,122,260],[1400,2,225,260,0,122,260],[1633,2,225,260,0,122,260],[2,270,225,260,0,122,260],[235,270,225,260,0,122,260],[468,270,225,260,0,122,260],[701,270,225,260,0,122,260],[934,270,225,260,0,122,260],[1167,270,225,260,0,122,260],[1400,270,225,260,0,122,260],[1633,270,225,260,0,122,260],[2,538,225,260,0,122,260],[235,538,225,260,0,122,260],[468,538,225,260,0,122,260],[701,538,225,260,0,122,260],[934,538,225,260,0,122,260],[1167,538,225,260,0,122,260],[1400,538,225,260,0,122,260],[1633,538,225,260,0,122,260],[2,806,225,260,0,122,260],[235,806,225,260,0,122,260],[468,806,225,260,0,122,260]],animations:{idle:{frames:[0],speed:1},up:{frames:[0,1,2,3],speed:1},down:{frames:[23,24,25,26,0],speed:1},"default":{frames:[0,1,1,2,2,3,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,23,24,24,25,25,26,26,0],speed:1,next:"idle"}}}}},"wall-fish":{id:"wall-fish",src:"i/wall-fish.png",data:{spritesheet:{framerate:30,images:["wall-fish"],frames:[[2,2,225,260,0,122,260],[235,2,225,260,0,122,260],[468,2,225,260,0,122,260],[701,2,225,260,0,122,260],[934,2,225,260,0,122,260],[1167,2,225,260,0,122,260],[1400,2,225,260,0,122,260],[1633,2,225,260,0,122,260],[2,270,225,260,0,122,260],[235,270,225,260,0,122,260],[468,270,225,260,0,122,260],[701,270,225,260,0,122,260],[934,270,225,260,0,122,260],[1167,270,225,260,0,122,260],[1400,270,225,260,0,122,260],[1633,270,225,260,0,122,260],[2,538,225,260,0,122,260],[235,538,225,260,0,122,260],[468,538,225,260,0,122,260],[701,538,225,260,0,122,260],[934,538,225,260,0,122,260],[1167,538,225,260,0,122,260],[1400,538,225,260,0,122,260],[1633,538,225,260,0,122,260],[2,806,225,260,0,122,260],[235,806,225,260,0,122,260],[468,806,225,260,0,122,260]],animations:{idle:{frames:[0],speed:1},up:{frames:[0,1,2,3],speed:1},down:{frames:[23,24,25,26,0],speed:1},"default":{frames:[0,1,1,2,2,3,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,23,24,24,25,25,26,26,0],speed:1,next:"idle"}}}}},timer:{id:"timer",src:"i/timer.png"},"final-results":{id:"final-results",src:"i/final-results.png"},"bottom-bar":{id:"bottom-bar",src:"i/bottom_bar.png"},"cyclone-starter-clouds":{id:"cyclone-starter-clouds",src:"i/cyclone-starter-clouds.png",data:{spritesheet:{framerate:30,images:["cyclone-starter-clouds"],frames:[[2,2,175,74,0,87,37],[185,2,175,74,0,87,37],[368,2,175,74,0,87,37],[551,2,175,74,0,87,37],[734,2,175,74,0,87,37],[2,84,175,74,0,87,37],[185,84,175,74,0,87,37],[368,84,175,74,0,87,37],[551,84,175,74,0,87,37],[734,84,175,74,0,87,37],[2,166,175,74,0,87,37],[185,166,175,74,0,87,37],[368,166,175,74,0,87,37],[551,166,175,74,0,87,37],[734,166,175,74,0,87,37],[2,248,175,74,0,87,37],[185,248,175,74,0,87,37],[368,248,175,74,0,87,37],[551,248,175,74,0,87,37]],animations:{"default":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],speed:1}}}}},"cyclone-starter-hacker-0":{id:"cyclone-starter-hacker-0",src:"i/cyclone-starter-hacker-0.png",data:{rows:2,columns:21}},"cyclone-starter-hacker-1":{id:"cyclone-starter-hacker-1",src:"i/cyclone-starter-hacker-1.png",data:{rows:2,columns:21}},"cyclone-from-fan":{id:"cyclone-from-fan",src:"i/cyclone-from-fan.png",data:{spritesheet:{framerate:30,images:["cyclone-from-fan"],frames:[[2,2,185,148,0,92,0],[195,2,185,148,0,92,0],[388,2,185,148,0,92,0],[581,2,185,148,0,92,0],[774,2,185,148,0,92,0],[2,158,185,148,0,92,0],[195,158,185,148,0,92,0]],animations:{"default":{frames:[0,0,1,1,2,2,3,3],speed:1,next:"loop"},loop:{frames:[4,4,5,5,6,6],speed:1}}}}}},includes:{"../engine/main.js":{src:"../engine/main.js",id:"../engine/main.js"},"css/button.css":{src:"../game/css/button.css",id:"css/button.css"},"css/cards.css":{src:"../game/css/cards.css",id:"css/cards.css"},"css/main.css":{src:"../game/css/main.css",id:"css/main.css"},"css/results.css":{src:"../game/css/results.css",id:"css/results.css"},"css/game.css":{src:"../game/css/game.css",id:"css/game.css"},"css/gui.css":{src:"../game/css/gui.css",id:"css/gui.css"},"css/fullscreen.css":{src:"../game/css/fullscreen.css",id:"css/fullscreen.css"},"css/timer.css":{src:"../game/css/timer.css",id:"css/timer.css"},"../engine/collision-shape.js":{src:"../engine/collision-shape.js",id:"../engine/collision-shape.js"},"../engine/aabb.js":{src:"../engine/aabb.js",id:"../engine/aabb.js"},"../engine/vector2D.js":{src:"../engine/vector2D.js",id:"../engine/vector2D.js"},"../engine/collision-data-container.js":{src:"../engine/collision-data-container.js",id:"../engine/collision-data-container.js"},"../engine/messenger.js":{src:"../engine/messenger.js",id:"../engine/messenger.js"},"../engine/browser.js":{src:"../engine/browser.js",id:"../engine/browser.js"},"../engine/game.js":{src:"../engine/game.js",id:"../engine/game.js"},"../engine/scene.js":{src:"../engine/scene.js",id:"../engine/scene.js"},"../engine/entity.js":{src:"../engine/entity.js",id:"../engine/entity.js"},"https://code.createjs.com/createjs-2013.12.12.min.js":{src:"https://code.createjs.com/createjs-2013.12.12.min.js",id:"https://code.createjs.com/createjs-2013.12.12.min.js"},"../engine/flashplugin-NEXT.min.js":{src:"../engine/flashplugin-NEXT.min.js",id:"../engine/flashplugin-NEXT.min.js"},"../engine/factory.js":{src:"../engine/factory.js",id:"../engine/factory.js"}},entities:{"action-layer":{id:"action-layer",components:[{type:"handler-controller"},{type:"handler-ai"},{type:"handler-logic"},{type:"handler-collision"},{type:"camera",width:1111,transitionX:100,transitionY:100},{type:"handler-render-createjs",acceptInput:{touch:true,click:true,camera:false,movement:false},autoClear:true,buffer:150},{type:"mother-nature"},{type:"entity-container",entities:[{type:"inez",properties:{x:1100,y:200}},{type:"camera-man"},{type:"background"},{type:"bg-music-game"},{type:"disaster-audio-manager"}],childEvents:["link-entity","scene-loaded","play-place-medium","play-place-large"]},{type:"level-maker"},{type:"entity-linker",linkId:"score",events:{"update-score":"update-score","set-biotope-list":"set-biotope-list","update-health":"update-health","el-update-time":"update-time","el-show-timer":"show-timer","el-hide-timer":"hide-timer","show-skip-button":"show-skip","hide-skip-button":"hide-skip"}},{type:"node-map",node:"terrain",map:{type:"grid",rows:6,columns:10,width:225,height:225,connections:["ne","e","se","sw","w","nw"]}},{type:"tiled-loader",manuallyLoad:true},{type:"entity-linker",linkId:"camera",events:{"world-loaded":"world-loaded","el-move-to-closest-grid":"move-to-closest-grid","el-follow-entity":"follow-entity","el-stop-following":"stop-following","enable-nav":"enable-arrows","disable-nav":"disable-arrows"}},{type:"entity-linker",linkId:"mouse-movement",events:{mousemove:"move",mouseup:"drop","valid-tile":"valid-tile","lock-cards":"lock","update-health":"health","play-sound-disaster-resolved":"play-disaster-resolved","play-sound-disaster-resolved2":"play-disaster-resolved2","play-sound-disaster-resolved3":"play-disaster-resolved3"}},{type:"entity-linker",linkId:"layer",events:{deal:"deal",undeal:"undeal"}},{type:"entity-linker",linkId:"disaster-channel"},{type:"entity-linker",linkId:"disaster-audio",events:{"play-earthquake":"earthquake"}},{type:"audio",audioMap:{"play-biotope-healthier":{sound:"bio-better"},"play-biotope-sicker":{sound:"bio-worse"},"play-biotopes-balanced":{sound:"biotopes-balanced"},"play-times-up":{sound:"times-up"},"add-all-fish":"power-up","add-all-trees":"power-up","re-deal":"power-up","play-terrain-transform":"terrain-transform"}}]},"interface-layer":{id:"interface-layer",filter:{excludes:["android"]},components:[{type:"handler-logic"},{type:"handler-render-dom"},{type:"dealer"},{type:"entity-container",entities:[{id:"button-home",components:[{type:"dom-element",className:"corner-button button-home",onmousedown:"ignore",ontouchstart:"ignore",onmouseup:["show-dialog","home-pause"],ontouchend:["show-dialog","home-pause"]},{type:"dom-element",id:"dialog-yes-no",innerHTML:"Are you sure?",updateClassName:true},{type:"dom-element",innerHTML:"Yes",className:"menu-button button-yes",parent:"dialog-yes-no",onmouseup:["new-scene","hide-dialog","home-unpause"],ontouchend:["new-scene","hide-dialog","home-unpause"],updateClassName:true},{type:"dom-element",innerHTML:"No",className:"menu-button button-no",parent:"dialog-yes-no",onmouseup:["hide-dialog","home-unpause"],ontouchend:["hide-dialog","home-unpause"],updateClassName:true},{type:"show-hide-dialog"},{type:"change-scene",scene:"menu",transition:"fade-to-black"},{type:"entity-linker",linkId:"layer",events:{"home-pause":"pause","home-unpause":"unpause"}}]},{id:"button-mute",components:[{type:"dom-element",className:"corner-button button-mute",onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"audio-mute-toggle",ontouchend:"audio-mute-toggle",updateClassName:true},{type:"audio"}]},{id:"button-skip",components:[{type:"dom-element",className:"skip-button",updateClassName:true,onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"skip",ontouchend:"skip"},{type:"logic-state-machine",inputs:{load:{"show-skip":false},skip:{"show-skip":false},"hide-skip":{"show-skip":false},"show-skip":{"show-skip":true}}},{type:"entity-linker",linkId:"score",events:{skip:"skip-tutorial"}}]},{id:"button-pause",components:[{type:"dom-element",className:"corner-button button-pause",onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"pause-game",ontouchend:"pause-game",updateClassName:true},{type:"dom-element",className:"game-pause-overlay",innerHTML:"<div>&nbsp;</div>",onmouseup:"pause-game",ontouchend:"pause-game",updateClassName:true},{type:"entity-linker",linkId:"score"},{type:"logic-state-machine",inputs:{load:{toggled:false,paused:false},"pause-game":{toggled:true},pause:{paused:true,toggled:false},unpause:{paused:false,toggled:false}},outputs:{toggled:{paused:{event:"unpause",message:{global:true}},"!paused":{event:"pause",message:{global:true}}}}},{type:"audio",aliases:{pause:"audio-pause",unpause:"audio-unpause"}},{type:"entity-linker",linkId:"layer",events:{pause:"pause-environment",unpause:"unpause-environment"}}]},{id:"power-ups",components:[{type:"dom-element",className:"power-up wildlife-upgrade",updateClassName:true,onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"use-C",ontouchend:"use-C",aliases:{"upgrade-count":"update-content"}},{type:"dom-element",className:"power-up tree-saplings",updateClassName:true,onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"use-A",ontouchend:"use-A",aliases:{"sapling-count":"update-content"}},{type:"dom-element",className:"power-up fish-flood",updateClassName:true,onmousedown:"ignore",ontouchstart:"ignore",onmouseup:"use-B",ontouchend:"use-B",aliases:{"flood-count":"update-content"}},{type:"entity-linker",linkId:"power-ups",events:{"use-A":"use-tree-saplings","use-B":"use-fish-flood","use-C":"use-wildlife-upgrade"}}]},{type:"nav-arrows"},{type:"gui"},{type:"timer"}],childEvents:["time-elapsed","link-entity"]},{type:"entity-linker",linkId:"power-ups",events:{"handle-power-ups":"logical-state","set-sapling-count":"sapling-count","set-flood-count":"flood-count","set-upgrade-count":"upgrade-count"}},{type:"entity-linker",linkId:"layer",events:{"place-biotope-tutorial-medium":"play-place-medium","place-biotope-tutorial-large":"play-place-large","fish-boom":"add-all-fish","tree-boom":"add-all-trees","using-wc":"re-deal"}}]},"interface-layer-android":{id:"interface-layer-android",filter:{includes:["android"]},components:[{type:"handler-logic"},{type:"handler-render-dom"},{type:"dealer"},{type:"entity-container",entities:[{id:"button-home",components:[{type:"dom-element",className:"corner-button button-home",onmousedown:"ignore",ontouchstart:"ignore",onmouseup:["show-dialog","home-pause"],ontouchend:["show-dialog","home-pause"]},{type:"dom-element",id:"dialog-yes-no",innerHTML:"Are you sure?",updateClassName:true},{type:"dom-element",innerHTML:"Yes",className:"menu-button button-yes",parent:"dialog-yes-no",onmouseup:["new-scene","hide-dialog","home-unpause"],ontouchend:["new-scene","hide-dialog","home-unpause"],updateClassName:true},{type:"dom-element",innerHTML:"No",className:"menu-button button-no",parent:"dialog-yes-no",onmouseup:["hide-dialog","home-unpause"],ontouchend:["hide-dialog","home-unpause"],updateClassName:true},{type:"show-hide-dialog"},{type:"change-scene",scene:"menu",transition:"fade-to-black"},{type:"entity-linker",linkId:"layer",events:{"home-pause":"pause","home-unpause":"unpause"}}]},{id:"button-mute",components:[{type:"dom-element",className:"corner-button button-mute",ontouchend:"audio-mute-toggle",updateClassName:true},{type:"audio"}]},{id:"button-skip",components:[{type:"dom-element",className:"skip-button",updateClassName:true,ontouchend:"skip"},{type:"logic-state-machine",inputs:{load:{"show-skip":false},skip:{"show-skip":false},"hide-skip":{"show-skip":false},"show-skip":{"show-skip":true}}},{type:"entity-linker",linkId:"score",events:{skip:"skip-tutorial"}}]},{id:"button-pause",components:[{type:"dom-element",className:"corner-button button-pause",ontouchend:"pause-game",updateClassName:true},{type:"dom-element",className:"game-pause-overlay",innerHTML:"<div>&nbsp;</div>",ontouchend:"pause-game",updateClassName:true},{type:"entity-linker",linkId:"score"},{type:"logic-state-machine",inputs:{load:{toggled:false,paused:false},"pause-game":{toggled:true},pause:{paused:true,toggled:false},unpause:{paused:false,toggled:false}},outputs:{toggled:{paused:{event:"unpause",message:{global:true}},"!paused":{event:"pause",message:{global:true}}}}},{type:"audio",aliases:{pause:"audio-pause",unpause:"audio-unpause"}},{type:"entity-linker",linkId:"layer",events:{pause:"pause-environment",unpause:"unpause-environment"}}]},{id:"power-ups",components:[{type:"dom-element",className:"power-up wildlife-upgrade",updateClassName:true,ontouchend:"use-C"},{type:"dom-element",className:"power-up tree-saplings",updateClassName:true,ontouchend:"use-A",aliases:{"sapling-count":"update-content"}},{type:"dom-element",className:"power-up fish-flood",updateClassName:true,ontouchend:"use-B",aliases:{"flood-count":"update-content"}},{type:"entity-linker",linkId:"power-ups",events:{"use-A":"use-tree-saplings","use-B":"use-fish-flood","use-C":"use-wildlife-upgrade"}}]},{type:"nav-arrows"},{type:"gui"},{type:"timer"}],childEvents:["time-elapsed","link-entity"]},{type:"entity-linker",linkId:"power-ups",events:{"handle-power-ups":"logical-state","set-sapling-count":"sapling-count","set-flood-count":"flood-count"}},{type:"entity-linker",linkId:"layer",events:{"place-biotope-tutorial-medium":"play-place-medium","place-biotope-tutorial-large":"play-place-large","fish-boom":"add-all-fish","tree-boom":"add-all-trees","using-wc":"re-deal"}}]},"tile-layer":{id:"tile-layer",components:[{type:"render-tiles",spriteSheet:"import",imageMap:"import"},{type:"collision-tiles",collisionMap:"import"}]},"render-layer":{id:"render-layer",components:[{type:"render-tiles",spriteSheet:"import",imageMap:"import"},{type:"fade-out"}],properties:{z:-1000}},"collision-layer":{id:"collision-layer",components:[{type:"collision-tiles",collisionMap:"import"}]},"button-fullscreen":{id:"button-fullscreen",components:[{type:"dom-element",element:"div",className:"button-fullscreen",onmouseup:"toggle-fullscreen",ontouchend:"toggle-fullscreen"},{type:"fullscreen"}]},"button-mute":{id:"button-mute",components:[{type:"logic-button",toggle:true,state:"pressed"},{type:"dom-element",element:"div",className:"game-button mute-button",updateClassName:true,onmouseup:["audio-mute-toggle","mouseup"],ontouchend:["audio-mute-toggle","mouseup"]},{type:"audio"}],properties:{x:10,y:10,z:400,width:400,height:400}},"button-pre-game":{id:"button-pre-game",components:[{type:"dom-element",element:"div",className:"menu-button pre-menu",onclick:"new-scene",innerHTML:"PLAY!"},{type:"audio",audioMap:{"new-scene":"bio-better"}},{type:"change-scene",scene:"menu",preload:true}]},"progress-bar":{id:"progress-bar",components:[{type:"dom-element",id:"progress-bar-container",className:"progress-bar"},{type:"dom-element",id:"progress-bar-container-container",parent:"progress-bar-container"},{type:"dom-element",id:"progress-bar",parent:"progress-bar-container-container"},{type:"entity-container",entities:[{id:"container",components:[{type:"change-scene",scene:"menu",aliases:{complete:"new-scene"}},{type:"asset-loader",progressBar:"progress-bar",useXHR:false}]}]}]},"progress-bar-mobile":{id:"progress-bar-mobile",components:[{type:"dom-element",id:"progress-bar-container",className:"progress-bar"},{type:"dom-element",id:"progress-bar-container-container",parent:"progress-bar-container"},{type:"dom-element",id:"progress-bar",parent:"progress-bar-container-container"},{type:"entity-container",entities:[{id:"container",components:[{type:"change-scene",scene:"pre-menu",aliases:{complete:"new-scene"}},{type:"asset-loader",progressBar:"progress-bar",useXHR:false}]}]}]},"level-portal":{id:"level-portal",components:[{type:"logic-portal"},{type:"collision-basic",collisionType:"portal",immobile:true,softCollisions:{hero:"occupied-portal"}},{type:"change-scene",transition:"fade-to-black"}],properties:{z:0}},"load-screen":{id:"load-screen",components:[{type:"dom-element",className:"load-screen",innerHTML:"<div class='cyber'>Cyberchase</div><div class='title'>Trouble in Ecotopia</div>"}]},"load-overlay":{id:"load-overlay",components:[{type:"dom-element",className:"load-overlay"}]},"title-screen":{id:"title-screen",components:[{type:"dom-element",element:"div",className:"title-screen"}]},"title-back":{id:"title-back",components:[{type:"render-sprite",image:"title-back"}],properties:{x:0,y:0,z:0}},"title-middle":{id:"title-middle",components:[{type:"render-sprite",image:"title-middle"}],properties:{x:0,y:0,z:2}},"title-front":{id:"title-front",components:[{type:"render-sprite",image:"title-front"}],properties:{x:0,y:0,z:4}},"title-screen-title":{id:"title-screen-title",components:[{type:"logic-title-screen-title"},{type:"render-sprite",image:"title",rotate:true},{type:"entity-linker",linkId:"title-camera",events:{}},{type:"audio",audioMap:{"play-title-creak":"title-creak"}}],properties:{x:494,y:277,z:10}},"title-screen-cyberchase":{id:"title-screen-cyberchase",components:[{type:"logic-title-screen-title"},{type:"render-sprite",image:"logo"},{type:"entity-linker",linkId:"title-camera",events:{}}],properties:{x:494,y:94,z:10}},"title-screen-hackers":{id:"title-screen-hackers",components:[{type:"logic-title-screen-hacker"},{type:"render-sprite",image:"hacker-laughing"},{type:"render-sprite",image:"hacker-binoculars"},{type:"render-sprite",image:"hacker-button"},{type:"entity-linker",linkId:"title-camera",events:{"el-shake":"shake","el-lean-right":"lean-right","el-lean-left":"lean-left"}},{type:"audio",audioMap:{"play-earthquake":"earthquake","play-title-laugh":"title-laugh"}}],properties:{x:70,y:500}},timer:{id:"timer",components:[{type:"logic-disaster-timer"},{type:"dom-element",className:"timer",id:"timer-container",onmousedown:"ignore",ontouchstart:"ignore",aliases:{"update-class-timer":"set-attribute"}},{type:"dom-element",className:"timer-message timer-warning",parent:"timer-container",id:"timer-message",onmousedown:"ignore",ontouchstart:"ignore",aliases:{"update-class-timer-message":"set-attribute"}},{type:"dom-element",className:"timer-time tick-1",parent:"timer-container",id:"time-next",onmousedown:"ignore",ontouchstart:"ignore",aliases:{"update-class-time-next":"set-attribute"}},{type:"dom-element",className:"timer-time tick-0",parent:"timer-container",id:"time-current",onmousedown:"ignore",ontouchstart:"ignore",aliases:{"update-class-time-current":"set-attribute"}},{type:"audio",audioMap:{"play-tick":{sound:"clock-tick"},"play-tock":{sound:"clock-tock"}}},{type:"entity-linker",linkId:"score"}]},card:{id:"card",components:[{type:"dom-element",className:"card",updateClassName:true,onmousedown:"pick-up",ontouchstart:"pick-up",onmousemove:"move",ontouchmove:"move",onmouseup:"drop",ontouchend:"drop",ontouchcancel:"drop",innerHTML:"<div class='image'></div><div class='add'>+</div><div class='subtract'>-</div>"},{type:"dom-drag-drop"},{type:"entity-linker",linkId:"mouse-movement",events:{"released-card":"placed-card","place-card":"add-organism","check-this-spot":"check-spot","prompt-player":"prompt-the-player","tap-for-info":"tutorial-tap-button","durian-tree-need-unmet":"tutorial-durian-need","durian-tree-need-met":"tutorial-durian-need-met"}}]},cursor:{id:"cursor",components:[{type:"render-sprite",image:"tiles"}],properties:{alwaysOn:true,z:100}},"nav-arrows":{id:"nav-arrows",components:[{type:"dom-element",className:"nav-arrow north",updateClassName:true,onmousedown:"go-north",ontouchstart:"go-north",onmouseup:"stop",ontouchend:"stop",ontouchcancel:"stop"},{type:"dom-element",className:"nav-arrow east",updateClassName:true,onmousedown:"go-east",ontouchstart:"go-east",onmouseup:"stop",ontouchend:"stop",ontouchcancel:"stop"},{type:"dom-element",className:"nav-arrow south",updateClassName:true,onmousedown:"go-south",ontouchstart:"go-south",onmouseup:"stop",ontouchend:"stop",ontouchcancel:"stop"},{type:"dom-element",className:"nav-arrow west",updateClassName:true,onmousedown:"go-west",ontouchstart:"go-west",onmouseup:"stop",ontouchend:"stop",ontouchcancel:"stop"},{type:"map-navigator"},{type:"entity-linker",linkId:"camera",events:{"el-go-to-grid-position":"go-to-grid-position"}}]},gui:{id:"gui",components:[{type:"entity-linker",linkId:"score"},{type:"entity-linker",linkId:"card-tut"},{type:"dom-element",className:"score-panel",innerHTML:"Rescues: 0",onmousedown:"ignore",ontouchstart:"ignore",aliases:{"update-score":"update-content"}},{type:"dom-element",className:"card-tut",innerHTML:"<div class='card-tut-title'>Biotope Resources:</div><div class='card lake'><div class='image'></div><div class='add'>+</div></div><div class='card forest'><div class='image'></div><div class='add'>+</div></div><div class='card mangrove'><div class='image'></div><div class='add'>+</div></div>",updateClassName:true,aliases:{"update-card-tut":"logical-state"}},{type:"dom-element",className:"health-panel",updateClassName:true,onmousedown:"ignore",ontouchstart:"ignore",aliases:{"set-biotope-list":"update-content","update-health":"logical-state"}}]},popup:{id:"popup",components:[{type:"render-sprite",image:"cards",eventBased:false,offsetZ:200,scaleX:0.5,scaleY:0.5,acceptInput:{click:true,touch:true}},{type:"render-sprite",image:"checkmark",offsetZ:199,animationMap:{"default":"background"},acceptInput:{click:true,touch:true}},{type:"render-sprite",image:"checkmark",offsetZ:201,animationMap:{satisfied:"satisfied","default":"default"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["need"]},{type:"logic-state-machine"},{type:"bubble-in"}]},"popup-major":{id:"popup-major",components:[{type:"logic-popup-major"},{type:"render-sprite",image:"cards",eventBased:false,offsetZ:200,scaleX:0.5,scaleY:0.5,acceptInput:{click:true,touch:true}},{type:"render-sprite",image:"checkmark",offsetZ:199.9,rotate:true,animationMap:{"default":"background"},acceptInput:{touch:true,click:true}},{type:"render-sprite",image:"checkmark",offsetZ:200.1,rotate:true,animationMap:{critical:"critical","default":"default"},acceptInput:{touch:true,click:true}},{type:"logic-state-machine",inputs:{bat:{bat:true},crocodile:{crocodile:true},"durian-fruit":{"durian-fruit":true},"durian-tree":{"durian-tree":true},fish:{fish:true},forest:{forest:true},"forest-trees":{"forest-trees":true},goanna:{goanna:true},lake:{lake:true},mangrove:{mangrove:true},"mangrove-trees":{"mangrove-trees":true},monkey:{monkey:true},mudskipper:{mudskipper:true},"orangutan-female":{"orangutan-female":true},"orangutan-male":{"orangutan-male":true},shoreline:{shoreline:true},stork:{stork:true},satisfied:{satisfied:true}}},{type:"bubble-in"},{type:"entity-linker",linkId:"disaster-channel",events:{"el-extinction-warning-pan":"extinction-warning-pan"}}],properties:{alwaysOn:true,z:11000}},background:{id:"background",components:[{type:"logic-background"},{type:"render-sprite",image:"title-screen-jpg",scaleX:1.2,scaleY:1.2}],properties:{alwaysOn:true,z:-1}},"bg-music-menus":{id:"bg-music-menus",components:[{type:"logic-delay-message",events:{"scene-live":{event:"play-background-music",delay:1}}},{type:"audio",audioMap:{"play-background-music":{sound:"bgm-title",loop:-1}}}],properties:{}},"bg-music-game":{id:"bg-music-game",components:[{type:"logic-delay-message",events:{"scene-loaded":{event:"play-background-music",delay:1}}},{type:"audio",audioMap:{"play-background-music":{sound:"bgm-in-game",loop:-1}}}],properties:{}},"camera-man":{id:"camera-man",components:[{type:"logic-camera-man"},{type:"entity-linker",linkId:"camera",events:{"el-jump-to-position":"jump-to-position","el-follow":"follow"}}],properties:{alwaysOn:true,z:-1}},circle:{id:"circle",components:[{type:"render-sprite",image:"circle",mirror:true},{type:"logic-fade-up",fadeThreshold:0.3,time:1500,move:{x:0,y:0,z:0}}],properties:{alwaysOn:true}},circuitboarder:{id:"circuitboarder",components:[{type:"render-sprite",image:"circuitboarder"},{type:"tween",events:{load:[["to",{opacity:1},500],["to",{opacity:0.3},350],["to",{opacity:1},350],["to",{opacity:0.3},350],["to",{opacity:1},350],["to",{opacity:0.3},350],["to",{opacity:1},350],["to",{opacity:0.3},350],["to",{opacity:1},350],["to",{opacity:0.3},350],["to",{opacity:1},350],["call","pop"]]}},{type:"logic-fade-up",fadeThreshold:0.9999,time:500,move:{x:0,y:0,z:0}}],properties:{alwaysOn:true,x:1575,y:450,z:1,opacity:0}},"disaster-audio-manager":{id:"disaster-audio-manager",components:[{type:"disaster-audio-logic"},{type:"audio",preventOverlaps:"ignore",audioMap:{"cyclone-hacker-talk":"cyclone-hacker-talk","cyclone-winds":{sound:"cyclone-winds",loop:-1},"disease-pass-0":"disease-pass-0","disease-pass-1":"disease-pass-1","tractor-beam-sfx":"tractor-beam-sfx","tractor-hacker-talking":"tractor-hacker-talking","terrain-hacking":"terrain-hacking","terrain-hacker-talking":"terrain-hacker-talking",earthquake:"earthquake","buzz-delete-party":{sound:"buzz-delete-party",loop:-1},"wreaker-woosh":"wreaker-woosh"}},{type:"entity-linker",linkId:"disaster-audio",events:{}}],properties:{alwaysOn:true}},disease:{id:"disease",components:[{type:"render-sprite",image:"disease"},{type:"logic-fade-up",fadeThreshold:0.8,time:7000,move:{x:0,y:0,z:0},aliases:{"bubbled-in":"pop"}},{type:"bubble-in"}],properties:{alwaysOn:true}},"disease-land":{id:"disease-land",components:[{type:"render-sprite",image:"disease-cloud"},{type:"logic-fade-up",fadeThreshold:0.8,time:7000,move:{x:0,y:0,z:0},aliases:{"bubbled-in":"pop"}},{type:"bubble-in"}],properties:{alwaysOn:true}},"disease-cloud":{id:"disease-cloud",components:[{type:"render-sprite",image:"disease-cloud",rotate:true}],properties:{alwaysOn:true,z:10000}},"disease-ship":{id:"disease-ship",components:[{type:"render-sprite",image:"disease-ship",mirror:true},{type:"particle-emitter",mirror:true,zOffset:-1,particleCount:20,particleType:"disease-cloud",offsetX:-80,offsetY:40,frequency:14,behavior:{translation:"static",rotation:"constant",velocityX:0,velocityY:0,velocityA:0.001,visual:"lifetime-fade",scale:"linear",scaleM:0.002,scaleB:0.125,lifetime:1500}},{type:"logic-disease-ship"},{type:"entity-linker",linkId:"disaster-channel",events:{"el-entity-created":"entity-created","el-remove-organism":"remove-organism","el-disaster-finished":"disaster-finished"}},{type:"entity-linker",linkId:"camera",events:{"el-move-to-closest-grid":"move-to-closest-grid"}},{type:"entity-linker",linkId:"disaster-audio",events:{"play-disease-pass-0":"disease-pass-0","play-disease-pass-1":"disease-pass-1"}}],properties:{alwaysOn:true,z:10000}},fire:{id:"fire",components:[{type:"render-sprite",image:"fire"},{type:"logic-fade-up",fadeThreshold:0.8,time:7000,move:{x:0,y:0,z:0},aliases:{"bubbled-in":"pop"}},{type:"bubble-in"}],properties:{alwaysOn:true}},cyclone:{id:"cyclone",components:[{type:"render-sprite",image:"cyclone"},{type:"ai-cyclone"},{type:"ai-chaser"},{type:"logic-angular-movement",maxVelocity:4},{type:"entity-linker",linkId:"disaster-channel",events:{"el-remove-organism":"remove-organism","el-disaster-finished":"disaster-finished"}},{type:"entity-linker",linkId:"camera",events:{"el-follow-entity":"follow-entity","el-stop-following":"stop-following"}},{type:"entity-linker",linkId:"cyclone-starter",events:{}},{type:"entity-linker",linkId:"disaster-audio",events:{"play-cyclone-winds":"cyclone-winds","fade-out-disaster":"fade-out","el-trigger-script":"trigger-script"}}],properties:{alwaysOn:true,z:10000}},"cyclone-mini":{id:"cyclone-mini",components:[{type:"render-sprite",image:"cyclone"},{type:"logic-cyclone-mini"},{type:"entity-linker",linkId:"cyclone-starter",events:{}}],properties:{alwaysOn:true,z:10000}},"cyclone-hacker":{id:"cyclone-hacker",components:[{type:"render-sprite",spriteSheet:{images:["cyclone-starter-hacker-0","cyclone-starter-hacker-1"],framerate:30,frames:[[2,2,180,217,0,90,217],[190,2,180,217,0,90,217],[378,2,180,217,0,90,217],[566,2,180,217,0,90,217],[754,2,180,217,0,90,217],[942,2,180,217,0,90,217],[1130,2,180,217,0,90,217],[1318,2,180,217,0,90,217],[1506,2,180,217,0,90,217],[1694,2,180,217,0,90,217],[1882,2,180,217,0,90,217],[2070,2,180,217,0,90,217],[2258,2,180,217,0,90,217],[2446,2,180,217,0,90,217],[2634,2,180,217,0,90,217],[2822,2,180,217,0,90,217],[3010,2,180,217,0,90,217],[3198,2,180,217,0,90,217],[3386,2,180,217,0,90,217],[3574,2,180,217,0,90,217],[3762,2,180,217,0,90,217],[2,227,180,217,0,90,217],[190,227,180,217,0,90,217],[378,227,180,217,0,90,217],[566,227,180,217,0,90,217],[754,227,180,217,0,90,217],[942,227,180,217,0,90,217],[1130,227,180,217,0,90,217],[1318,227,180,217,0,90,217],[1506,227,180,217,0,90,217],[1694,227,180,217,0,90,217],[1882,227,180,217,0,90,217],[2070,227,180,217,0,90,217],[2258,227,180,217,0,90,217],[2446,227,180,217,0,90,217],[2634,227,180,217,0,90,217],[2822,227,180,217,0,90,217],[3010,227,180,217,0,90,217],[3198,227,180,217,0,90,217],[3386,227,180,217,0,90,217],[3574,227,180,217,0,90,217],[3762,227,180,217,0,90,217],[2,2,180,217,1,90,217],[190,2,180,217,1,90,217],[378,2,180,217,1,90,217],[566,2,180,217,1,90,217],[754,2,180,217,1,90,217],[942,2,180,217,1,90,217],[1130,2,180,217,1,90,217],[1318,2,180,217,1,90,217],[1506,2,180,217,1,90,217],[1694,2,180,217,1,90,217],[1882,2,180,217,1,90,217],[2070,2,180,217,1,90,217],[2258,2,180,217,1,90,217],[2446,2,180,217,1,90,217],[2634,2,180,217,1,90,217],[2822,2,180,217,1,90,217],[3010,2,180,217,1,90,217],[3198,2,180,217,1,90,217],[3386,2,180,217,1,90,217],[3574,2,180,217,1,90,217],[3762,2,180,217,1,90,217],[2,227,180,217,1,90,217],[190,227,180,217,1,90,217]],animations:{idle:{frames:[64,63,64,63,64,63,64,63],speed:1},"fan-out":{frames:[29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,52,52,52,52,52,53,54,55,56,57,58,59,60,61,62,63],speed:1,next:"idle"},"default":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,12,13,14,14,13,12,12,12,12,12,12,12,15,16,17,18,19,20,21,22,23,24,25,26,27,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],speed:1}}}},{type:"logic-cyclone-hacker"},{type:"entity-linker",linkId:"cyclone-starter",events:{"el-grow":"grow"}},{type:"entity-linker",linkId:"disaster-audio",events:{"play-cyclone-hacker-talk":"cyclone-hacker-talk"}}],properties:{alwaysOn:true,z:10000}},"cyclone-clouds":{id:"cyclone-clouds",components:[{type:"render-sprite",image:"cyclone-starter-clouds"},{type:"logic-cyclone-clouds"},{type:"entity-linker",linkId:"cyclone-starter",events:{}},{type:"audio",audioMap:{"play-sfx":"buzz-delete-party"}}],properties:{alwaysOn:true,z:10000}},"cyclone-from-fan":{id:"cyclone-from-fan",components:[{type:"render-sprite",image:"cyclone-from-fan"},{type:"logic-cyclone-from-fan"},{type:"entity-linker",linkId:"cyclone-starter",events:{}}],properties:{alwaysOn:true,z:10000}},hacker:{id:"hacker",components:[{type:"render-sprite",image:"grim-wreaker",mirror:true},{type:"ai-hacker"},{type:"ai-chaser"},{type:"logic-angular-movement",maxVelocity:5},{type:"entity-linker",linkId:"disaster-channel",events:{"el-remove-organism":"remove-organism","el-disaster-finished":"disaster-finished"}},{type:"entity-linker",linkId:"camera",events:{"el-follow-entity":"follow-entity","el-stop-following":"stop-following"}},{type:"logic-shield",shield:"tractor-beam",state:"beam-on",offsetX:0,offsetY:0},{type:"entity-linker",linkId:"disaster-audio",events:{"play-tractor-beam":"tractor-beam-sfx","play-tractor-hacker-talking":"tractor-hacker-talking","play-wreaker-woosh":"wreaker-woosh","el-trigger-script":"trigger-script"}}],properties:{alwaysOn:true,z:10000}},"tractor-beam":{id:"tractor-beam",components:[{type:"render-sprite",image:"tractor-beam"}],properties:{alwaysOn:true}},"terrain-hacker":{id:"terrain-hacker",components:[{type:"render-sprite",image:"terrain-ship",mirror:true},{type:"ai-terrain-hacker"},{type:"ai-chaser"},{type:"logic-angular-movement",maxVelocity:5},{type:"entity-linker",linkId:"disaster-channel",events:{"el-remove-organism":"remove-organism","el-disaster-finished":"disaster-finished","el-flip-tile":"flip-tile","el-delayed-remove-organisms-in-radius":"delayed-remove-organisms-in-radius"}},{type:"logic-shield",shield:"terrain-beam",state:"beam-on",offsetX:0,offsetY:0},{type:"entity-linker",linkId:"disaster-audio",events:{"play-terrain-hacking":"terrain-hacking","play-terrain-hacker-talking":"terrain-hacker-talking","play-wreaker-woosh":"wreaker-woosh","el-trigger-script":"trigger-script"}},{type:"entity-linker",linkId:"camera",events:{"el-follow-entity":"follow-entity","el-stop-following":"stop-following"}},{type:"entity-linker",linkId:"disaster-channel",events:{"el-entity-created":"entity-created"}}],properties:{alwaysOn:true,z:10000}},"terrain-beam":{id:"terrain-beam",components:[{type:"render-sprite",image:"terrain-beam"}],properties:{alwaysOn:true}},"terrain-splash":{id:"terrain-splash",components:[{type:"render-sprite",image:"terrain-splash"},{type:"logic-fade",inTime:750,fullTime:2250,outTime:750}],properties:{alwaysOn:true}},"terrain-wall":{id:"terrain-wall",components:[{type:"render-sprite",image:"terrain-wall"},{type:"logic-fade",inTime:750,fullTime:100,outTime:750}],properties:{alwaysOn:true}},"wall-trees":{id:"wall-trees",components:[{type:"render-sprite",image:"wall-trees"},{type:"logic-fade",inTime:750,fullTime:100,outTime:750}],properties:{alwaysOn:true}},"wall-fish":{id:"wall-fish",components:[{type:"render-sprite",image:"wall-fish"},{type:"logic-fade",inTime:750,fullTime:100,outTime:750}],properties:{alwaysOn:true}},"buzz-and-delete":{id:"buzz-and-delete",components:[{type:"render-sprite",image:"buzz-and-delete-ship",mirror:true},{type:"logic-buzz-and-delete-ship"},{type:"entity-linker",linkId:"disaster-channel",events:{"el-remove-organism":"remove-organism","el-disaster-finished":"disaster-finished"}},{type:"entity-linker",linkId:"camera",events:{"el-follow-entity":"follow-entity","el-stop-following":"stop-following"}},{type:"entity-linker",linkId:"disaster-audio",events:{"play-buzz-delete-party":"buzz-delete-party","fade-out-disaster":"fade-out"}}],properties:{alwaysOn:true,z:10000}},terrain:{id:"terrain",components:[{type:"node"},{type:"terrain-tile"}]},inez:{id:"inez",components:[{type:"logic-inez"},{type:"audio",preventOverlaps:"append",channel:"inez",priority:5,audioMap:{"tutorial-button-green":"tutorial-button-green","tutorial-fish":["disaster-oh-no","disaster-disease",{sound:"org-fishs",events:[{event:"show-resources",time:10000}]}],"tutorial-resource":[{sound:"tutorial-resource",events:[{event:"end-tutorial",time:20000}]},{sound:"tutorial-tap-button",events:[{event:"allow-ending",time:20000}]}],"tutorial-two":["tutorial-two",{sound:"tutorial-space-medium",events:[{event:"update-card-tut",message:{"show-card-tut":true},time:2600},{event:"update-card-tut",message:{"show-card-tut":false},time:10000},{event:"finished-talk",time:20000}]}],"tutorial-three":["tutorial-three",{sound:"tutorial-space-large",events:[{event:"highlight-circuit-board",time:6000},{event:"finished-talk",time:20000}]}],"disease-bat":["disaster-oh-no","disaster-disease",{sound:"org-bat",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-bats":["disaster-oh-dear","disaster-disease",{sound:"org-bats",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-orangutan":["disaster-not-good","disaster-disease",{sound:"org-orangutan",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-orangutans":["disaster-oh-no","disaster-disease",{sound:"org-orangutans",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-durian-tree":["disaster-oh-dear","disaster-disease",{sound:"org-tree",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-durian-trees":["disaster-not-good","disaster-disease",{sound:"org-trees",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-fish":["disaster-look","disaster-disease",{sound:"org-fish",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-fishs":["disaster-oh-dear","disaster-disease",{sound:"org-fishs",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-stork":["disaster-oh-dear","disaster-disease",{sound:"org-stork",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-storks":["disaster-oh-no","disaster-disease",{sound:"org-storks",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-crocodile":["disaster-look","disaster-disease",{sound:"org-crocodile",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-crocodiles":["disaster-oh-no","disaster-disease",{sound:"org-crocodiles",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-mudskipper":["disaster-oh-no","disaster-disease",{sound:"org-mudskipper",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-mudskippers":["disaster-oh-dear","disaster-disease",{sound:"org-mudskippers",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-goanna":["disaster-not-good","disaster-disease",{sound:"org-goanna",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-goannas":["disaster-oh-no","disaster-disease",{sound:"org-goannas",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-monkey":["disaster-oh-dear","disaster-disease",{sound:"org-monkey",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-monkeys":["disaster-oh-no","disaster-disease",{sound:"org-monkeys",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"disease-animals":["disaster-oh-no","disaster-disease",{sound:"org-animals",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-forest-trees":["disaster-oh-no",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-forest-treess":["disaster-oh-no",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-mangrove-trees":["disaster-oh-dear",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-mangrove-treess":["disaster-oh-dear",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-durian-tree":["disaster-oh-dear",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"cyclone-durian-trees":["disaster-oh-dear",{sound:"disaster-cyclone",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-bat":["disaster-look","disaster-hacker","org-bat",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-bats":["disaster-oh-dear","disaster-hacker","org-bats",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-orangutan":["disaster-not-good","disaster-hacker","org-orangutan",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-orangutans":["disaster-oh-no","disaster-hacker","org-orangutans",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-fish":["disaster-oh-no","disaster-hacker","org-fish",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-fishs":["disaster-oh-dear","disaster-hacker","org-fishs",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-stork":["disaster-not-good","disaster-hacker","org-stork",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-storks":["disaster-look","disaster-hacker","org-storks",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-crocodile":["disaster-oh-dear","disaster-hacker","org-crocodile",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-crocodiles":["disaster-oh-dear","disaster-hacker","org-crocodiles",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-mudskipper":["disaster-oh-no","disaster-hacker","org-mudskipper",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-mudskippers":["disaster-oh-dear","disaster-hacker","org-mudskippers",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-goanna":["disaster-oh-no","disaster-hacker","org-goanna",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-goannas":["disaster-oh-no","disaster-hacker","org-goannas",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-monkey":["disaster-look","disaster-hacker","org-monkey",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-monkeys":["disaster-not-good","disaster-hacker","org-monkeys",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"hacker-animals":["disaster-not-good","disaster-hacker","org-animals",{sound:"tractor-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"buzz-and-delete-orangutan":["disaster-oh-no",{sound:"disaster-buzz",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"buzz-and-delete-orangutans":["disaster-oh-no",{sound:"disaster-buzz",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"earthquake-lake":["disaster-not-good",{sound:"disaster-earthquake",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"earthquake-forest":["disaster-oh-no",{sound:"disaster-earthquake",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"earthquake-mangrove":["disaster-oh-dear",{sound:"disaster-earthquake",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"terrain-hacker-lake":["disaster-oh-dear","disaster-hacker-2",{sound:"terrain-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"terrain-hacker-forest":["disaster-look","disaster-hacker-2",{sound:"terrain-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"terrain-hacker-mangrove":["disaster-look","disaster-hacker-2",{sound:"terrain-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"terrain-hacker-shoreline":["disaster-look","disaster-hacker-2",{sound:"terrain-hacker-talking",events:[{event:"show-resources",time:10000},{event:"end-script",time:10000}]}],"play-disaster-resolved":"disaster-resolved","play-disaster-resolved2":"disaster-resolved-2","play-disaster-resolved3":"disaster-resolved-3","play-disaster-start":"disaster-start"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{"popup-low-mangrove-trees":["help-not-enough","org-mangrove-trees","help-in","bio-mangrove"],"popup-low-monkey":["help-not-enough","org-monkeys","help-in","bio-mangrove"],"popup-low-mudskipper":["help-not-enough","org-mudskippers","help-in","bio-mangrove"],"popup-low-goanna":["help-not-enough","org-goannas","help-in","bio-mangrove"],"popup-low-forest-trees":["help-not-enough","org-forest-trees","help-in","bio-forest"],"popup-low-durian-tree":["help-not-enough","org-trees","help-in","bio-forest"],"popup-low-orangutan":["help-not-enough","org-orangutans","help-in","bio-forest"],"popup-low-bat":["help-not-enough","org-bats","help-in","bio-forest"],"popup-low-fish":["help-not-enough","org-fishs","help-in","bio-lake"],"popup-low-crocodile":["help-not-enough","org-crocodiles","help-in","bio-lake"],"popup-low-stork":["help-not-enough","org-storks","help-in","bio-lake"],"popup-no-mangrove-trees":["help-no","org-mangrove-trees","help-in","bio-mangrove"],"popup-no-monkey":["help-no","org-monkeys","help-in","bio-mangrove"],"popup-no-mudskipper":["help-no","org-mudskippers","help-in","bio-mangrove"],"popup-no-goanna":["help-no","org-goannas","help-in","bio-mangrove"],"popup-no-forest-trees":["help-no","org-forest-trees","help-in","bio-forest"],"popup-no-durian-tree":["help-no","org-trees","help-in","bio-forest"],"popup-no-orangutan":["help-not-enough","org-orangutans","help-in","bio-forest"],"popup-no-bat":["help-no","org-bats","help-in","bio-forest"],"popup-no-fish":["help-no","org-fishs","help-in","bio-lake"],"popup-no-crocodile":["help-no","org-crocodiles","help-in","bio-lake"],"popup-no-stork":["help-no","org-storks","help-in","bio-lake"],"bad-mangrove-mangrove-trees":["help-if-enough-alt","org-mangrove-trees","help-in","bio-mangrove"],"bad-mangrove-goanna":["help-if-enough","org-goannas","help-in","bio-mangrove"],"bad-mangrove-monkey":["help-if-enough-alt","org-monkeys","help-in","bio-mangrove"],"bad-mudskipper-mangrove-trees":["help-if-enough","org-mangrove-trees","help-for","org-mudskippers"],"bad-goanna-mudskipper":["help-if-enough-alt","org-mudskippers","help-feed","org-goannas"],"bad-monkey-mangrove-trees":["help-if-enough","org-mangrove-trees","help-for","org-monkeys"],"bad-forest-forest-trees":["help-if-enough-alt","org-forest-trees","help-in","bio-forest"],"bad-forest-orangutan":["help-if-enough-alt","org-orangutans","help-in","bio-forest"],"bad-bat-durian-tree":["help-if-enough","org-trees","help-for","org-bats"],"bad-bat-forest-trees":["help-if-enough-alt","org-forest-trees","help-for","org-bats"],"bad-durian-tree-bat":["help-if-enough","org-bats","help-pollinate","org-trees"],"bad-orangutan-durian-fruit":["help-if-enough-alt","org-durian-fruit","help-feed","org-orangutans"],"bad-orangutan-forest-trees":["help-if-enough","org-forest-trees","help-for","org-orangutans"],"bad-lake-crocodile":["help-if-enough-alt","org-crocodiles","help-in","bio-lake"],"bad-lake-stork":["help-if-enough","org-storks","help-in","bio-lake"],"bad-crocodile-fish":["help-if-enough-alt","org-fishs","help-feed","org-crocodiles"],"bad-stork-fish":["help-if-enough","org-fishs","help-feed","org-storks"],"bad-stork-forest-trees":["help-if-enough-alt","org-forest-trees","help-for","org-storks"],"worse-mangrove-mangrove-trees":["help-not-enough","org-mangrove-trees","help-in","bio-mangrove"],"worse-mangrove-goanna":["help-not-enough","org-goannas","help-in","bio-mangrove"],"worse-mangrove-monkey":["help-not-enough","org-monkeys","help-in","bio-mangrove"],"worse-mudskipper-mangrove-trees":["help-not-enough","org-mangrove-trees","help-for","org-mudskippers"],"worse-goanna-mudskipper":["help-not-enough","org-mudskippers","help-feed","org-goannas"],"worse-monkey-mangrove-trees":["help-not-enough","org-mangrove-trees","help-for","org-monkeys"],"worse-forest-forest-trees":["help-not-enough","org-forest-trees","help-in","bio-forest"],"worse-forest-orangutan":["help-not-enough","org-orangutans","help-in","bio-forest"],"worse-bat-durian-tree":["help-not-enough","org-trees","help-for","org-bats"],"worse-bat-forest-trees":["help-not-enough","org-forest-trees","help-for","org-bats"],"worse-durian-tree-bat":["help-not-enough","org-bats","help-pollinate","org-trees"],"worse-orangutan-durian-fruit":["help-not-enough","org-durian-fruit","help-feed","org-orangutans"],"worse-orangutan-forest-trees":["help-not-enough","org-forest-trees","help-for","org-orangutans"],"worse-lake-crocodile":["help-not-enough","org-crocodiles","help-in","bio-lake"],"worse-lake-stork":["help-not-enough","org-storks","help-in","bio-lake"],"worse-crocodile-fish":["help-not-enough","org-fishs","help-feed","org-crocodiles"],"worse-stork-fish":["help-not-enough","org-fishs","help-feed","org-storks"],"worse-stork-forest-trees":["help-not-enough","org-forest-trees","help-for","org-storks"],"none-mangrove-trees-mangrove":["help-no","org-mangrove-trees","help-in","bio-mangrove"],"none-monkey-mangrove":["help-no","org-monkeys","help-in","bio-mangrove"],"none-mudskipper-mangrove":["help-no","org-mudskippers","help-in","bio-mangrove"],"none-goanna-mangrove":["help-no","org-goannas","help-in","bio-mangrove"],"none-forest-trees-forest":["help-no","org-forest-trees","help-in","bio-forest"],"none-durian-tree-forest":["help-no","org-trees","help-in","bio-forest"],"none-orangutan-forest":["help-no","org-orangutans","help-in","bio-forest"],"none-bat-forest":["help-no","org-bats","help-in","bio-forest"],"none-fish-lake":["help-no","org-fishs","help-in","bio-lake"],"none-crocodile-lake":["help-no","org-crocodiles","help-in","bio-lake"],"none-stork-lake":["help-no","org-storks","help-in","bio-lake"],"healthy-forest":"help-healthy-forest","healthy-lake":"help-healthy-lake","healthy-mangrove":"help-healthy-mangrove","warn-crocodile-0":["warn-we-add","org-crocodiles","warn-may-eat","org-fishs"],"warn-crocodile-1":["warn-you-add","org-crocodiles","warn-may-not"],"warn-crocodile-2":["warn-enough","org-fishs","warn-for-the","org-crocodiles","warn-to-eat"],"warn-stork-0":["warn-we-add","org-storks","warn-may-eat","org-fishs"],"warn-stork-1":["warn-you-add","org-storks","warn-may-not"],"warn-stork-2":["warn-enough","org-fishs","warn-for-the","org-storks","warn-to-eat"],"warn-goanna-0":["warn-we-add","org-goannas","warn-may-eat","org-mudskippers"],"warn-goanna-1":["warn-you-add","org-goannas","warn-may-not"],"warn-goanna-2":["warn-enough","org-mudskippers","warn-for-the","org-goannas","warn-to-eat"],"warn-orangutan-male-0":["warn-we-add","org-orangutans","warn-may-eat","org-durian-fruit"],"warn-orangutan-male-1":["warn-you-add","org-orangutans","warn-may-not"],"warn-orangutan-male-2":["warn-enough","org-durian-fruit","warn-for-the","org-orangutans","warn-to-eat"],"warn-orangutan-female-0":["warn-we-add","org-orangutans","warn-may-eat","org-durian-fruit"],"warn-orangutan-female-1":["warn-you-add","org-orangutans","warn-may-not"],"warn-orangutan-female-2":["warn-enough","org-durian-fruit","warn-for-the","org-orangutans","warn-to-eat"],"timer-prompt":"timer-prompt"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:2,audioMap:{"need-prompt-generic":"need-prompt-generic","tutorial-wonder":"tutorial-prompt","help-prompt-1":"help-prompt-1","help-prompt-2":"help-prompt-2","help-prompt-3":"help-prompt-3","prompt-monkey":["need-prompt-look-the","org-monkeys","need-prompt-need"],"prompt-mudskipper":["need-prompt-look-the","org-mudskippers","need-prompt-need"],"prompt-goanna":["need-prompt-look-the","org-goannas","need-prompt-need"],"prompt-durian-tree":["need-prompt-look-the","org-trees","need-prompt-need"],"prompt-orangutan":["need-prompt-look-the","org-orangutans","need-prompt-need"],"prompt-bat":["need-prompt-look-the","org-bats","need-prompt-need"],"prompt-crocodile":["need-prompt-look-the","org-crocodiles","need-prompt-need"],"prompt-stork":["need-prompt-look-the","org-storks","need-prompt-need"]}},{type:"entity-linker",linkId:"camera",events:{"focus-here":"move-to-closest-grid"}},{type:"entity-linker",linkId:"card-tut",events:{"update-card-tut":"update-card-tut"}},{type:"entity-linker",linkId:"mouse-movement",events:{"begin-tut-stage-1":"begin-tutorial-stage-1","end-tutorial":"tutorial-durian-need"}},{type:"entity-linker",linkId:"disaster-audio",events:{}}],properties:{orientation:3.1457,alwaysOn:true,z:8000}},"vo-inez":{id:"vo-inez",components:[{type:"logic-delay-message",events:{"scene-live":{event:"play-intro",delay:2000}}},{type:"voice-over",messagePrefix:"inez-says",frameLength:100,preventOverlaps:"append",channel:"inez",priority:5,mirror:true,animationMap:{"-":"face-m",a:"face-a",b:"face-m",c:"face-k",d:"face-d",e:"face-ee",f:"face-f",g:"face-d",h:"face-a",i:"face-i",j:"face-ch",k:"face-k",l:"face-l",m:"face-m",n:"face-d",o:"face-o",p:"face-m",q:"face-o",r:"face-d",s:"face-d",t:"face-d",u:"face-o",v:"face-f",w:"face-o",x:"face-d",y:"face-a",z:"face-d",_:"face-M",A:"face-A",B:"face-M",C:"face-K",D:"face-D",E:"face-EE",F:"face-F",G:"face-D",H:"face-A",I:"face-I",J:"face-CH",K:"face-K",L:"face-L",M:"face-M",N:"face-D",O:"face-O",P:"face-M",Q:"face-O",R:"face-D",S:"face-D",T:"face-D",U:"face-O",V:"face-F",W:"face-O",X:"face-D",Y:"face-A",Z:"face-D",sad:"sad","default":"default"},spriteSheet:{images:["inez","inez2"],framerate:30,frames:[[2,2,186,410,0,93,410],[196,2,186,410,0,93,410],[390,2,186,410,0,93,410],[584,2,186,410,0,93,410],[778,2,186,410,0,93,410],[972,2,186,410,0,93,410],[1166,2,186,410,0,93,410],[1360,2,186,410,0,93,410],[1554,2,186,410,0,93,410],[1748,2,186,410,0,93,410],[1942,2,186,410,0,93,410],[2136,2,186,410,0,93,410],[2330,2,186,410,0,93,410],[2524,2,186,410,0,93,410],[2718,2,186,410,0,93,410],[2912,2,186,410,0,93,410],[3106,2,186,410,0,93,410],[3300,2,186,410,0,93,410],[3494,2,186,410,0,93,410],[3688,2,186,410,0,93,410],[3882,2,186,410,0,93,410],[2,420,186,410,0,93,410],[196,420,186,410,0,93,410],[390,420,186,410,0,93,410],[584,420,186,410,0,93,410],[778,420,186,410,0,93,410],[972,420,186,410,0,93,410],[1166,420,186,410,0,93,410],[1360,420,186,410,0,93,410],[1554,420,186,410,0,93,410],[1748,420,186,410,0,93,410],[1942,420,186,410,0,93,410],[2136,420,186,410,0,93,410],[2330,420,186,410,0,93,410],[2524,420,186,410,0,93,410],[2718,420,186,410,0,93,410],[2912,420,186,410,0,93,410],[3106,420,186,410,0,93,410],[3300,420,186,410,0,93,410],[3494,420,186,410,0,93,410],[3688,420,186,410,0,93,410],[3882,420,186,410,0,93,410],[2,2,186,410,1,93,410],[196,2,186,410,1,93,410],[390,2,186,410,1,93,410],[584,2,186,410,1,93,410],[778,2,186,410,1,93,410],[972,2,186,410,1,93,410],[1166,2,186,410,1,93,410],[1360,2,186,410,1,93,410],[1554,2,186,410,1,93,410],[1748,2,186,410,1,93,410],[1942,2,186,410,1,93,410],[2136,2,186,410,1,93,410],[2330,2,186,410,1,93,410],[2524,2,186,410,1,93,410],[2718,2,186,410,1,93,410],[2912,2,186,410,1,93,410],[3106,2,186,410,1,93,410],[3300,2,186,410,1,93,410],[3494,2,186,410,1,93,410],[3688,2,186,410,1,93,410],[3882,2,186,410,1,93,410],[2,420,186,410,1,93,410],[196,420,186,410,1,93,410],[390,420,186,410,1,93,410],[584,420,186,410,1,93,410],[778,420,186,410,1,93,410],[972,420,186,410,1,93,410],[1166,420,186,410,1,93,410],[1360,420,186,410,1,93,410],[1554,420,186,410,1,93,410],[1748,420,186,410,1,93,410]],animations:{"face-m":0,"face-e":46,"face-ee":47,"face-eee":48,"face-eeee":49,"face-ch":50,"face-f":51,"face-a":52,"face-o":53,"face-l":54,"face-k":46,"face-d":46,"face-i":46,"face-n":46,"face-M":55,"face-E":56,"face-EE":57,"face-EEE":58,"face-EEEE":59,"face-CH":60,"face-F":61,"face-A":62,"face-O":63,"face-L":64,"face-AA":65,"face-AAA":66,"face-K":56,"face-D":56,"face-I":56,"face-N":46,sad:{frames:[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,23,24,25,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55]},"default":{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,23,24,25,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}},voiceoverMap:{"tutorial-one":[{sound:{sound:"tutorial-one",events:[{event:"begin-tut-stage-1",time:40000}]},voice:"_JUNYRANJER__WINIIJRHELP_______HAKRHASULISDAVARISTASKASNDSASTRSNIKOOTOOPYAA___eranjrsssfrstjobistugtunotiikosisteem----taap-orclik-onanimlsplastlrnabotem-andterrisorsstainiid--now-gooexplorreikootopiaaaa-"}],"results-5":[{sound:{sound:"results-5",events:[{event:"talk-done",time:20000}]},voice:"nnnaiissss----yuusavikotopiaanunlokdanubaiotop-"}],"results-10":[{sound:{sound:"results-10",events:[{event:"talk-done",time:20000}]},voice:"aaaassseem----ysavdikotopia-andunlokdaubaiotop-"}],"results-a":[{sound:{sound:"results-a",events:[{event:"talk-done",time:20000}]},voice:"aasseem-yuuelprtekiktopiaa----kipgooing-"}],"results-b":[{sound:{sound:"results-b",events:[{event:"talk-done",time:20000}]},voice:"-tankyuuuu---yuusavikotopyafomsombiighakitaakssss-"}],"results-c":[{sound:{sound:"results-c",events:[{event:"talk-done",time:20000}]},voice:"-wwaaaooll-----yuusolvdalootofdisaastrssss-"}],"results-high":[{sound:{sound:"results-high",events:[{event:"talk-done",time:20000}]},voice:"todlialseem--yuuhavunuhaaisskorrrr-"}],"follow-up":[{sound:{sound:"results-follow-up",events:[{event:"talk-done",time:20000}]},voice:"TRAIAGENJUNYRANGR____HELPSAIVIKOTOPIAAAA_"}]}},{type:"entity-linker",linkId:"inez-link",events:{"talk-done":"finished-talking"}},{type:"entity-linker",linkId:"mouse-movement",events:{"begin-tut-stage-1":"begin-tutorial-stage-1","end-tutorial":"tutorial-durian-need"}}],properties:{x:800,y:556,z:1,state:{"inez-says-sad":true}}},bat:{id:"bat",components:[{type:"render-sprite",mirror:true,image:"bat",animationMap:{moving:"flying",pollinating:"pollinating","default":"flying"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","sfx"]},{type:"audio",audioMap:{sfx:"dawn-bat"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-bat",fact:"resource-bat-fact","need-bat":["org-bat","need-generic","org-bats"],"need-durian-tree":["org-bat","need-shelter","org-tree"],"need-forest-trees":["org-bat","need-shelter","org-forest-trees"],"need-forest":["org-bat","need-shelter","bio-forest"]}},{type:"node-resident2",speed:0.12,updateOrientation:true,offset:{x:0,y:-200,z:30},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",foods:["durian-tree"],hungerTime:10000,shelter:"forest-trees",homeTime:15000,biotopes:["forest"],nestBiotope:"forest",nestOrganism:"bat",crowdLimit:2,procreateTime:180000,creates:"bat",consumes:false,contentStationary:3500,pollinator:true},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-100},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},crocodile:{id:"crocodile",components:[{type:"render-sprite",image:"crocodile",mirror:true,animationMap:{"watered,moving":"swimming start","watered,eating":"eating water",watered:"idle water",moving:"walking",eating:"eating","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["fact","name","sfx"]},{type:"audio",audioMap:{sfx:"croc"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-crocodile",fact:"resource-crocodile-fact","need-fish":["org-crocodile","need-food","org-fishs"],"need-lake":["org-crocodile","need-shelter","bio-lake"]}},{type:"node-resident2",speed:0.05,updateOrientation:true,offset:{x:0,y:0,z:2},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",foods:["fish","stork-eggs","mudskipper","goanna","stork","monkey","orangutan"],hungerTime:25000,biotopes:["lake","shoreline"],nestBiotope:"shoreline",procreateTime:180000,creates:"crocodile-eggs"},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-90},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"crocodile-eggs":{id:"crocodile-eggs",components:[{type:"render-sprite",image:"crocodile-eggs",scaleX:0.6,scaleY:0.6,acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-crocodile-eggs",fact:"resource-crocodile-eggs-fact"}},{type:"node-resident2",offset:{x:112,y:225,z:2}},{type:"wander",biotopes:["shoreline"],nestBiotope:"shoreline",creates:"crocodile",procreateTime:120000,hatches:true},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"durian-flower":{id:"durian-flower",components:[{type:"render-sprite",image:"durian-fruit",animationMap:{"default":"flower"},scaleX:1,scaleY:1,offsetZ:0.0001,acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","need","hide"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{fact:"resource-durian-tree-fact",need:["org-tree","need-pollination","org-bat"]}},{type:"node-resident2",offset:{x:0,y:0,z:-8000}},{type:"logic-flower"},{type:"position-saver",positionType:"durian-fruit"},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"durian-fruit":{id:"durian-fruit",components:[{type:"render-sprite",image:"durian-fruit",animationMap:{"default":"fruit"},scaleX:1,scaleY:1,acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","fall"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-durian-fruit",fact:"resource-durian-fruit-fact"}},{type:"node-resident2",offset:{x:0,y:0,z:-8000}},{type:"position-saver",positionType:"durian-fruit"},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"durian-tree":{id:"durian-tree",components:[{type:"render-sprite",image:"durian-tree",acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-tree","need-forest":["org-tree","need-shelter","bio-forest"],"need-bat":["org-tree","need-pollination","org-bat"],fact:"resource-durian-tree-fact"}},{type:"node-resident2",offset:{x:0,y:0,z:-20}},{type:"logic-shield",shield:"popup",state:"needing",offsetX:25,offsetY:-225},{type:"bubble-in"},{type:"wander",biotopes:["forest"],mobile:false,dies:false},{type:"remove-residents",residents:["durian-fruit","durian-flower"]},{type:"pollen"}],properties:{alwaysOn:true,z:100}},fish:{id:"fish",components:[{type:"render-sprite",image:"fish",acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["fact","name","sfx"]},{type:"audio",audioMap:{sfx:"fish-fx"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-fish",fact:"resource-fish-fact"}},{type:"tree-producer"},{type:"node-resident2"},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"forest-trees":{id:"forest-trees",components:[{type:"render-sprite",image:"trees",animationMap:{"variant-0":"forest-1","variant-1":"forest-2"},acceptInput:{click:true,touch:true}},{type:"render-sprite",image:"trees",offsetZ:10,animationMap:{"default":"forest-cover"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-forest-trees",fact:"resource-forest-trees-fact"}},{type:"tree-producer"},{type:"node-resident2"},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},goanna:{id:"goanna",components:[{type:"render-sprite",mirror:true,image:"goanna",animationMap:{moving:"walking",eating:"eating","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","eating"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-goanna",fact:"resource-goanna-fact","need-mudskipper":["org-goanna","need-food","org-mudskippers"],"need-mangrove":["org-goanna","need-shelter","bio-mangrove"],"need-goanna":["org-goanna","need-generic","org-goannas"]}},{type:"node-resident2",speed:0.04,updateOrientation:true,offset:{x:0,y:0,z:3},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",foods:["mudskipper","stork-eggs","crocodile-eggs","stork","monkey"],biotopes:["mangrove"],acceptBiotopes:["forest","shoreline","mangrove"],nestBiotope:"mangrove",nestOrganism:"goanna",crowdLimit:2,procreateTime:120000,creates:"goanna"},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-100},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"mangrove-trees":{id:"mangrove-trees",components:[{type:"render-sprite",image:"trees",animationMap:{"variant-0":"mangrove-1","variant-1":"mangrove-2"},acceptInput:{click:true,touch:true}},{type:"render-sprite",image:"trees",offsetZ:10,animationMap:{"default":"mangrove-cover"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-mangrove-trees",fact:"resource-mangrove-trees-fact"}},{type:"tree-producer"},{type:"node-resident2",offset:{x:0,y:0,z:-21}},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},monkey:{id:"monkey",components:[{type:"render-sprite",image:"monkey",mirror:true,animationMap:{"moving,treed":"climbing","moving,detreed":"climbing","eating,treed":"eating",treed:"idle",moving:"walking","default":"idle ground"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","sfx"]},{type:"audio",audioMap:{sfx:"monkey-fx"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-monkey",fact:"resource-monkey-fact","need-mangrove-trees":["org-monkey","need-shelter","org-mangrove-trees"],"need-mangrove":["org-monkey","need-shelter","bio-mangrove"],"need-monkey":["org-monkey","need-generic","org-monkeys"]}},{type:"node-resident2",speed:0.09,updateOrientation:true,offset:{x:0,y:0,z:2},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",biotopes:["mangrove"],foods:["mangrove-trees"],hungerTime:49000,shelter:"mangrove-trees",homeTime:20000,acceptBiotopes:["forest","shoreline","mangrove"],nestBiotope:"mangrove",nestOrganism:"monkey",crowdLimit:2,procreateTime:180000,creates:"monkey",consumes:false,climber:true},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-130},{type:"bubble-in"}],properties:{treeDweller:true,alwaysOn:true,z:100}},mudskipper:{id:"mudskipper",components:[{type:"render-sprite",mirror:true,image:"mudskipper",animationMap:{moving:"skipping","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","sfx"]},{type:"audio",audioMap:{sfx:"mudskipper-fx"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-mudskipper",fact:"resource-mudskipper-fact","need-mangrove-trees":["org-mudskipper","need-shelter","org-mangrove-trees"],"need-mangrove":["org-mudskipper","need-shelter","bio-mangrove"],"need-mudskipper":["org-mudskipper","need-generic","org-mudskippers"]}},{type:"node-resident2",speed:0.06,updateOrientation:true,offset:{x:0,y:0,z:2},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",biotopes:["mangrove"],shelter:"mangrove-trees",homeTime:123000,acceptBiotopes:["forest","shoreline","mangrove"],nestBiotope:"mangrove",crowdLimit:3,procreateTime:30000,creates:"mudskipper"},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-100},{type:"bubble-in"}],properties:{alwaysOn:true,z:100}},"orangutan-female":{id:"orangutan-female",components:[{type:"render-sprite",image:"orangutan-female",mirror:true,animationMap:{"moving,treed":"climbing","moving,detreed":"climbing",moving:"walking loop",eating:"eating","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","sfx"]},{type:"audio",audioMap:{sfx:"orang-female"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-orangutan",fact:"resource-orangutan-fact","need-forest-trees":["org-orangutan","need-shelter","org-forest-trees"],"need-forest":["org-orangutan","need-shelter","bio-forest"],"need-durian-fruit":["org-orangutan","need-food","org-durian-fruit"],"need-orangutan-female":["org-orangutan","need-generic","org-orangutan"],"need-orangutan-male":["org-orangutan","need-generic","org-orangutan"]}},{type:"node-resident2",speed:0.06,updateOrientation:true,offset:{x:0,y:0,z:1},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",biotopes:["forest"],foods:["durian-fruit"],hungerTime:51000,shelter:"forest-trees",homeTime:20000,acceptBiotopes:["forest","shoreline","mangrove"],nestBiotope:"forest",nestOrganism:"orangutan-male",procreateTime:180000,createLimit:2,crowdLimit:5,creates:["orangutan-female","orangutan-male"],contentStationary:16000,climber:true},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-130},{type:"bubble-in"}],properties:{treeDweller:true,alwaysOn:true,z:100}},"orangutan-male":{id:"orangutan-male",components:[{type:"render-sprite",image:"orangutan-male",mirror:true,animationMap:{"moving,treed":"climbing","moving,detreed":"climbing",moving:"walking",eating:"eating","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact","sfx"]},{type:"audio",audioMap:{sfx:"orang-male"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-orangutan",fact:"resource-orangutan-fact","need-forest-trees":["org-orangutan","need-shelter","org-forest-trees"],"need-forest":["org-orangutan","need-shelter","bio-forest"],"need-durian-fruit":["org-orangutan","need-food","org-durian-fruit"],"need-orangutan-female":["org-orangutan","need-generic","org-orangutan"],"need-orangutan-male":["org-orangutan","need-generic","org-orangutan"]}},{type:"node-resident2",speed:0.06,updateOrientation:true,offset:{x:0,y:0,z:1},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",biotopes:["forest"],foods:["durian-fruit"],hungerTime:55000,shelter:"forest-trees",homeTime:22000,acceptBiotopes:["forest","shoreline","mangrove"],crowdLimit:5,contentStationary:18000,climber:true},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-130},{type:"bubble-in"}],properties:{treeDweller:true,alwaysOn:true,z:100}},stork:{id:"stork",components:[{type:"render-sprite",image:"stork",mirror:true,animationMap:{moving:"flying","eating,watered":"eating in water",eating:"eating",watered:"water idle","default":"idle"},acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["fact","name","sfx"]},{type:"audio",audioMap:{sfx:"stork-fx"}},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-stork",fact:"resource-stork-fact","need-fish":["org-stork","need-food","org-fishs"],"need-lake":["org-stork","need-shelter","bio-lake"],"need-forest-trees":["org-stork","need-shelter","org-forest-trees"],"need-forest":["org-stork","need-shelter","bio-forest"]}},{type:"node-resident2",speed:0.1,updateOrientation:true,offset:{x:0,y:0,z:2},shares:["bat","crocodile","crocodile-eggs","durian-fruit","durian-flower","durian-tree","fish","forest-trees","goanna","mangrove-trees","monkey","mudskipper","orangutan","stork","stork-eggs"]},{type:"wander",foods:["fish"],hungerTime:34000,biotopes:["lake","shoreline"],nestBiotope:"forest",nestOrganism:"forest-trees",creates:"stork-eggs"},{type:"logic-shield",shield:"popup",state:"needing",offsetX:0,offsetY:-130},{type:"bubble-in"}],properties:{treeDweller:true,alwaysOn:true,z:100}},"stork-eggs":{id:"stork-eggs",components:[{type:"render-sprite",image:"stork-eggs",scaleX:0.5,scaleY:0.5,acceptInput:{click:true,touch:true}},{type:"tap-me",taps:["name","fact"]},{type:"audio",preventOverlaps:true,channel:"inez",priority:3,audioMap:{name:"org-stork-eggs",fact:"resource-stork-eggs-fact"}},{type:"node-resident2",offset:{x:0,y:0,z:-8000}},{type:"wander",biotopes:["forest"],nestBiotope:"forest",creates:"stork",hatches:true},{type:"bubble-in"}],properties:{treeDweller:true,alwaysOn:true,z:100}}},scenes:{load:{id:"load",layers:[{id:"load-layer-mobile",filter:{includes:["mobile"]},components:[{type:"handler-logic"},{type:"handler-render-dom"},{type:"entity-container",entities:[{type:"load-screen"},{type:"progress-bar-mobile"}],childEvents:["link-entity"]}]},{id:"load-layer-desktop",filter:{excludes:["mobile"]},components:[{type:"handler-logic"},{type:"handler-render-dom"},{type:"entity-container",entities:[{type:"load-screen"},{type:"progress-bar"}],childEvents:["link-entity"]}]}]},menu:{id:"menu",layers:[{id:"menu-layer",components:[{type:"audio-muter"},{type:"handler-logic"},{type:"camera",width:988},{type:"handler-render-dom"},{type:"handler-render-createjs",canvasId:"menu-canvas"},{type:"handler-controller"},{type:"entity-linker",linkId:"title-camera",events:{}},{type:"entity-container",childEvents:["link-entity","scene-live","scene-loaded"],entities:[{type:"bg-music-menus"},{type:"title-back"},{type:"title-middle"},{type:"title-front"},{type:"title-screen-cyberchase"},{type:"title-screen-title"},{type:"title-screen-hackers"},{type:"load-screen"},{id:"button-play-game",components:[{type:"dom-element",innerHTML:"Play Game",className:"menu-button play-game",onmouseup:"new-scene",ontouchend:"new-scene",updateClassName:true},{type:"check-saved-game"},{type:"map-lock"},{type:"change-scene",scene:"scene-level-1",persistentData:{size:"small"},transition:"fade-to-black"}]},{id:"button-play-new-game",components:[{type:"dom-element",innerHTML:"Start Over",className:"menu-button new-game",onmouseup:"show-dialog",ontouchend:"show-dialog",updateClassName:true},{type:"dom-element",id:"dialog-yes-no",innerHTML:"Are you sure?",updateClassName:true},{type:"dom-element",className:"dialog-extra-text",parent:"dialog-yes-no",innerHTML:"You will erase your score and progress in the game.",updateClassName:true},{type:"dom-element",innerHTML:"Yes",className:"menu-button button-yes",parent:"dialog-yes-no",onmouseup:"clear-then-new-scene",ontouchend:"clear-then-new-scene",updateClassName:true},{type:"dom-element",innerHTML:"No",className:"menu-button button-no",parent:"dialog-yes-no",onmouseup:"hide-dialog",ontouchend:"hide-dialog",updateClassName:true},{type:"check-saved-game",remove:true},{type:"map-lock"},{type:"change-scene",scene:"scene-level-1",transition:"fade-to-black"}]},{id:"button-saved-game",components:[{type:"dom-element",innerHTML:"Keep Playing",className:"menu-button continue-game",onmouseup:"new-scene",ontouchend:"new-scene",updateClassName:true},{type:"check-saved-game",remove:true},{type:"map-lock"},{type:"change-scene",scene:"scene-level-1",transition:"fade-to-black",persistentData:{keepPlaying:true}}]}]}]},{id:"enable-ios-audio-layer",filter:{includes:["iOS"]},components:[{type:"enable-ios-audio",audioId:"combined"}]}]},"pre-menu":{id:"pre-menu",layers:[{id:"pre-menu-layer",components:[{type:"handler-logic"},{type:"handler-render-dom",className:"pre-game-button-screen"},{type:"handler-controller"},{type:"entity-container",entities:[{type:"load-overlay"},{type:"button-pre-game"}],childEvents:["scene-live","new-scene"]},{type:"entity-linker",linkId:"audio-go"}]},{id:"enable-ios-audio-layer",filter:{includes:["iOS"]},components:[{type:"enable-ios-audio",audioId:"combined"},{type:"entity-linker",linkId:"audio-go",events:{"ios-audio-ready":"new-scene"}}]}]},results:{id:"results",layers:[{id:"menu-layer",components:[{type:"audio-muter"},{type:"handler-logic"},{type:"camera",width:988},{type:"handler-render-dom"},{type:"handler-render-createjs",canvasId:"menu-canvas",autoClear:true},{type:"handler-controller"},{type:"entity-container",childEvents:["scene-loaded","link-entity"],entities:[{type:"vo-inez"},{type:"background",properties:{state:{title:true}}},{id:"button-home",components:[{type:"dom-element",className:"corner-button button-home",onmouseup:"new-scene",ontouchend:"new-scene"},{type:"change-scene",scene:"menu",transition:"fade-to-black"}]},{type:"title-screen"},{id:"results-screen",components:[{type:"dom-element",className:"results",updateClassName:true},{type:"results",unlockMediumScore:1000,unlockLargeScore:5000},{type:"logic-delay-message",events:{"scene-loaded":{event:"play-results-audio",delay:2000}}},{type:"entity-linker",linkId:"inez-link",events:{"el-unlock":"unlock","el-high":"high","el-healthy":"healthy","el-unhealthy":"unhealthy","el-sick":"sick"}}]},{id:"button-saved-game",components:[{type:"dom-element",innerHTML:"Keep Going",className:"menu-button results-scene keep-going",onmouseup:"new-scene",ontouchend:"new-scene",updateClassName:true},{type:"map-lock"},{type:"change-scene",scene:"scene-level-1",transition:"fade-to-black",persistentData:{keepPlaying:true}}]}]}]}]},"scene-level-1":{id:"scene-level-1",layers:[{type:"action-layer",properties:{level:"level-1"}},{type:"interface-layer"},{type:"interface-layer-android"}]}},levels:{"level-1":{height:4,layers:[{data:[0,3221225489,3221225489,3221225489,1073741842,0,2684354577,1,1,1,2,1610612755,2684354577,1,5,2684354562,6,1610612755,0,21,22,23,23,0],height:4,name:"background",opacity:1,type:"tilelayer",visible:true,width:6,x:0,y:0},{height:4,name:"entities",objects:[],opacity:1,type:"objectgroup",visible:true,width:6,x:0,y:0}],orientation:"orthogonal",properties:{},tileheight:225,tilesets:[{firstgid:1,image:"../game/images/tiles.png",imageheight:1350,imagewidth:900,margin:0,name:"tiles",properties:{},spacing:0,tileheight:225,tilewidth:225}],tilewidth:225,version:1,width:6,id:"level-1"}},components:{"handler-controller":{id:"handler-controller",src:"../engine/components/handler-controller.js"},"handler-ai":{id:"handler-ai",src:"../engine/components/handler-ai.js"},"handler-logic":{id:"handler-logic",src:"../engine/components/handler-logic.js"},"handler-collision":{id:"handler-collision",src:"../engine/components/handler-collision.js"},camera:{id:"camera",src:"../engine/components/camera.js"},"handler-render-createjs":{id:"handler-render-createjs",src:"../engine/components/handler-render-createjs.js"},"mother-nature":{id:"mother-nature",src:"../game/components/mother-nature.js"},"entity-container":{id:"entity-container",src:"../engine/components/entity-container.js"},"level-maker":{id:"level-maker",src:"../game/components/level-maker.js"},"entity-linker":{id:"entity-linker",src:"../engine/components/entity-linker.js"},"node-map":{id:"node-map",src:"../engine/components/node-map.js"},"tiled-loader":{id:"tiled-loader",src:"../engine/components/tiled-loader.js"},audio:{id:"audio",src:"../engine/components/audio.js"},"handler-render-dom":{id:"handler-render-dom",src:"../engine/components/handler-render-dom.js"},dealer:{id:"dealer",src:"../game/components/dealer.js"},"dom-element":{id:"dom-element",src:"../engine/components/dom-element.js"},"show-hide-dialog":{id:"show-hide-dialog",src:"../game/components/show-hide-dialog.js"},"change-scene":{id:"change-scene",src:"../engine/components/change-scene.js"},"logic-state-machine":{id:"logic-state-machine",src:"../engine/components/logic-state-machine.js"},"render-tiles":{id:"render-tiles",src:"../engine/components/render-tiles.js"},"collision-tiles":{id:"collision-tiles",src:"../engine/components/collision-tiles.js"},"fade-out":{id:"fade-out",src:"../game/components/fade-out.js"},fullscreen:{id:"fullscreen",src:"../engine/components/fullscreen.js"},"logic-button":{id:"logic-button",src:"../engine/components/logic-button.js"},"asset-loader":{id:"asset-loader",src:"../engine/components/asset-loader.js"},"logic-portal":{id:"logic-portal",src:"../engine/components/logic-portal.js"},"collision-basic":{id:"collision-basic",src:"../engine/components/collision-basic.js"},"render-sprite":{id:"render-sprite",src:"../engine/components/render-sprite.js"},"logic-title-screen-title":{id:"logic-title-screen-title",src:"../game/components/logic-title-screen-title.js"},"logic-title-screen-hacker":{id:"logic-title-screen-hacker",src:"../game/components/logic-title-screen-hacker.js"},"logic-disaster-timer":{id:"logic-disaster-timer",src:"../game/components/logic-disaster-timer.js"},"dom-drag-drop":{id:"dom-drag-drop",src:"../game/components/dom-drag-drop.js"},"map-navigator":{id:"map-navigator",src:"../game/components/map-navigator.js"},"tap-me":{id:"tap-me",src:"../game/components/tap-me.js"},"bubble-in":{id:"bubble-in",src:"../game/components/bubble-in.js"},"logic-popup-major":{id:"logic-popup-major",src:"../game/components/logic-popup-major.js"},"logic-background":{id:"logic-background",src:"../game/components/logic-background.js"},"logic-delay-message":{id:"logic-delay-message",src:"../engine/components/logic-delay-message.js"},"logic-camera-man":{id:"logic-camera-man",src:"../game/components/logic-camera-man.js"},"logic-fade-up":{id:"logic-fade-up",src:"../game/components/logic-fade-up.js"},tween:{id:"tween",src:"../engine/components/tween.js"},"disaster-audio-logic":{id:"disaster-audio-logic",src:"../game/components/disaster-audio-logic.js"},"particle-emitter":{id:"particle-emitter",src:"../game/components/particle-emitter.js"},"logic-disease-ship":{id:"logic-disease-ship",src:"../game/components/logic-disease-ship.js"},"ai-cyclone":{id:"ai-cyclone",src:"../game/components/ai-cyclone.js"},"ai-chaser":{id:"ai-chaser",src:"../engine/components/ai-chaser.js"},"logic-angular-movement":{id:"logic-angular-movement",src:"../engine/components/logic-angular-movement.js"},"logic-cyclone-mini":{id:"logic-cyclone-mini",src:"../game/components/logic-cyclone-mini.js"},"logic-cyclone-hacker":{id:"logic-cyclone-hacker",src:"../game/components/logic-cyclone-hacker.js"},"logic-cyclone-clouds":{id:"logic-cyclone-clouds",src:"../game/components/logic-cyclone-clouds.js"},"logic-cyclone-from-fan":{id:"logic-cyclone-from-fan",src:"../game/components/logic-cyclone-from-fan.js"},"ai-hacker":{id:"ai-hacker",src:"../game/components/ai-hacker.js"},"logic-shield":{id:"logic-shield",src:"../engine/components/logic-shield.js"},"ai-terrain-hacker":{id:"ai-terrain-hacker",src:"../game/components/ai-terrain-hacker.js"},"logic-fade":{id:"logic-fade",src:"../game/components/logic-fade.js"},"logic-buzz-and-delete-ship":{id:"logic-buzz-and-delete-ship",src:"../game/components/logic-buzz-and-delete-ship.js"},node:{id:"node",src:"../engine/components/node.js"},"terrain-tile":{id:"terrain-tile",src:"../game/components/terrain-tile.js"},"logic-inez":{id:"logic-inez",src:"../game/components/logic-inez.js"},"voice-over":{id:"voice-over",src:"../engine/components/voice-over.js"},"node-resident2":{id:"node-resident2",src:"../game/components/node-resident2.js"},wander:{id:"wander",src:"../game/components/wander.js"},"logic-flower":{id:"logic-flower",src:"../game/components/logic-flower.js"},"position-saver":{id:"position-saver",src:"../game/components/position-saver.js"},"remove-residents":{id:"remove-residents",src:"../game/components/remove-residents.js"},pollen:{id:"pollen",src:"../game/components/pollen.js"},"tree-producer":{id:"tree-producer",src:"../game/components/tree-producer.js"},"audio-muter":{id:"audio-muter",src:"../game/components/audio-muter.js"},"check-saved-game":{id:"check-saved-game",src:"../game/components/check-saved-game.js"},"map-lock":{id:"map-lock",src:"../game/components/map-lock.js"},"enable-ios-audio":{id:"enable-ios-audio",src:"../engine/components/enable-ios-audio.js"},results:{id:"results",src:"../game/components/results.js"}},debug:false};(function(d){if(d){if(!d.console){var c=d.console={};c.log=c.warn=c.error=function(){}}if(d.Array&&!d.Array.isArray){d.Array.isArray=function(e){return(e instanceof Array)}}}})(window);window.addEventListener("load",function(){var f=localStorage.getItem("cyberchase-re");b.cheats=0;if(f){try{f=JSON.parse(f);if(f&&f.debug){b.cheats=+(f.debug||0)}}catch(d){}}if((window.top!==window)&&(b.settings.supports.iPhone||b.settings.supports.iPad2)){window.top.location="/cyberchase/media/games/rescue-ecotopia/mobile.html"}if(b.settings&&b.settings.global&&(b.settings.global.autoLoad!==false)){new b.Game(b.settings,function(c){if(window.PBS&&PBS.KIDS&&PBS.KIDS.KartKingdom){c.kartKingdom=new PBS.KIDS.KartKingdom.minigame("a679153f-113e-4f34-b80f-973c9ddc4e11","root",function(){},function(){},{dock:"TR",enable_notifications:true,hide_notification_delay:4000,fade_notification_duration:500,slide_notification_duration:750});try{c.kartKingdom.addEventListener(PBS.KIDS.KartKingdom.minigameEvent.MINIGAME_READY,function(){console.log("Kart Kingdom is connected.")})}catch(g){}}else{c.kartKingdom=null;console.warn("Kart Kingdom not loaded.")}window.addEventListener("blur",function(){if(c&&c.currentScene&&c.currentScene.layers&&c.currentScene.layers[0]){c.currentScene.layers[0].triggerEvent("window-blurred")}},false);window.addEventListener("focus",function(){if(c&&c.currentScene&&c.currentScene.layers&&c.currentScene.layers[0]){c.currentScene.layers[0].triggerEvent("window-focused")}},false)})}},false);(function(){var c=function(d){var e=new XMLHttpRequest();e.open("POST","/cyberchase/php/rescue_ecotopia/",true);e.responseType="text";e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onload=function(f){if(this.status===200){console.log("Server POST response: "+this.responseText)}};e.send("data="+encodeURIComponent(d))};b.childIsLoggedIn=false;b.getOnline=function(e){var d=new XMLHttpRequest();d.open("GET","/cyberchase/php/rescue_ecotopia/",true);d.responseType="text";d.onload=function(g){if(this.status===200){try{var f=JSON.parse(this.responseText);if(f){if(f.id){b.childIsLoggedIn=f.id}if(f.data){localStorage.setItem("cyberchase-re",JSON.stringify(f.data))}else{localStorage.setItem("cyberchase-re","{}")}if(e){e()}}}catch(g){}}};d.send()};b.getOnline();b.setOnline=function(d){if(b.childIsLoggedIn){c(d)}else{b.getOnline(function(){c(d)})}}})();b.CollisionShape=(function(){var c=function(f,g,j){var l=g.regX,k=g.regY;this.owner=f;this.collisionType=j;this.width=g.width||g.radius||0;this.height=g.height||g.radius||0;this.radius=g.radius||0;if(typeof l!=="number"){l=this.width/2}if(typeof k!=="number"){k=this.height/2}this.offsetX=g.offsetX||((this.width/2)-l);this.offsetY=g.offsetY||((this.height/2)-k);if(f){this.x=f.x+this.offsetX;this.y=f.y+this.offsetY}else{this.x=g.x+this.offsetX;this.y=g.y+this.offsetY}this.type=g.type||"rectangle";this.subType="";this.points=g.points;this.aABB=undefined;var h=0;var e=0;switch(this.type){case"circle":h=e=this.radius*2;break;case"rectangle":h=this.width;e=this.height;break;case"triangle":if(this.points[0][1]==this.points[1][1]&&this.points[0][0]==this.points[2][0]){if(this.points[0][0]<this.points[1][0]){this.subType="tl";h=this.points[1][0]-this.points[0][0];e=this.points[2][1]-this.points[0][1]}else{this.subType="br";h=this.points[0][0]-this.points[1][0];e=this.points[0][1]-this.points[2][1]}}else{if(this.points[0][1]==this.points[2][1]&&this.points[0][0]==this.points[1][0]){if(this.points[0][1]<this.points[1][1]){this.subType="tr";h=this.points[0][0]-this.points[2][0];e=this.points[1][1]-this.points[0][1]}else{this.subType="bl";h=this.points[2][0]-this.points[0][0];e=this.points[0][1]-this.points[1][1]}}}}this.aABB=new b.AABB(this.x,this.y,h,e)};var d=c.prototype;d.update=function(f,e){this.x=f+this.offsetX;this.y=e+this.offsetY;this.aABB.move(this.x,this.y)};d.moveX=function(e){this.x=e;this.aABB.moveX(this.x)};d.moveY=function(e){this.y=e;this.aABB.moveY(this.y)};d.moveXBy=function(e){this.x+=e;this.aABB.moveX(this.x)};d.moveYBy=function(e){this.y+=e;this.aABB.moveY(this.y)};d.getXY=function(){return[this.x,this.y]};d.getX=function(){return this.x};d.getY=function(){return this.y};d.getAABB=function(){return this.aABB};d.getXOffset=function(){return this.offsetX};d.getYOffset=function(){return this.offsetY};d.setXWithEntityX=function(e){this.x=e+this.offsetX;this.aABB.moveX(this.x)};d.setYWithEntityY=function(e){this.y=e+this.offsetY;this.aABB.moveY(this.y)};d.destroy=function(){this.aABB=undefined;this.points=undefined};return c})();b.AABB=(function(){var d=function(f,h,g,e){this.empty=true;this.setAll(f,h,g,e)};var c=d.prototype;c.setAll=function(f,h,g,e){this.empty=false;this.x=f;this.y=h;this.width=g||0;this.height=e||0;this.halfWidth=this.width/2;this.halfHeight=this.height/2;if(typeof f==="undefined"){this.empty=true}else{this.left=-this.halfWidth+this.x;this.right=this.halfWidth+this.x}if(typeof h==="undefined"){this.empty=true}else{this.top=-this.halfHeight+this.y;this.bottom=this.halfHeight+this.y}return this};c.set=function(e){this.empty=e.empty;this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;this.halfWidth=e.halfWidth;this.halfHeight=e.halfHeight;this.left=e.left;this.right=e.right;this.top=e.top;this.bottom=e.bottom;return this};c.reset=function(){this.empty=true;return this};c.include=function(e){if(e){if(this.empty){this.set(e)}else{if(this.left>e.left){this.left=e.left}if(this.right<e.right){this.right=e.right}if(this.top>e.top){this.top=e.top}if(this.bottom<e.bottom){this.bottom=e.bottom}this.width=this.right-this.left;this.height=this.bottom-this.top;this.halfWidth=this.width/2;this.halfHeight=this.height/2;this.x=this.left+this.halfWidth;this.y=this.top+this.halfHeight}}};c.move=function(e,f){this.moveX(e);this.moveY(f);return this};c.moveX=function(e){this.x=e;this.left=-this.halfWidth+this.x;this.right=this.halfWidth+this.x;return this};c.moveY=function(e){this.y=e;this.top=-this.halfHeight+this.y;this.bottom=this.halfHeight+this.y;return this};c.moveXBy=function(e){this.x+=e;this.left=-this.halfWidth+this.x;this.right=this.halfWidth+this.x;return this};c.moveYBy=function(e){this.y+=e;this.top=-this.halfHeight+this.y;this.bottom=this.halfHeight+this.y;return this};c.getCopy=function(){return new d(this.x,this.y,this.width,this.height)};c.matches=function(f,h,g,e){return !((this.x!==f)||(this.y!==h)||(this.width!==g)||(this.height!==e))};c.contains=function(e){return !((e.top<this.top)||(e.bottom>this.bottom)||(e.left<this.left)||(e.right>this.right))};c.containsVector=function(e){return !((e.y<this.top)||(e.y>this.bottom)||(e.x<this.left)||(e.x>this.right))};c.intersects=function(e){return !((e.bottom<this.top)||(e.top>this.bottom)||(e.right<this.left)||(e.left>this.right))};return d})();b.Vector2D=(function(){var c=function(e,f){this.x=e||0;this.y=f||0};var d=c.prototype;d.set=function(e,f){this.x=e;this.y=f;return this};d.copyValues=function(e){this.x=e.x;this.y=e.y;return this};d.setX=function(e){this.x=e;return this};d.setY=function(e){this.y=e;return this};d.getX=function(){return this.x};d.getY=function(){return this.y};d.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))};d.direction=function(){var e=this.magnitude();var f=0;if(e!=0){f=Math.acos(this.x/e);if(this.y<0){f=(Math.PI*2)-f}}return f};d.getUnit=function(){var e=this.magnitude();if(e==0){return new b.Vector2D(0,0)}else{return new b.Vector2D(this.x/e,this.y/e)}};d.getInverse=function(){return new b.Vector2D(-this.x,-this.y)};d.normalize=function(){var e=this.magnitude();if(e!=0){this.x/=e;this.y/=e}return this};d.rotate=function(f){var e=this.x;var g=this.y;this.x=e*Math.cos(f)-g*Math.sin(f);this.y=e*Math.sin(f)+g*Math.cos(f);return this};d.add=function(e,f){this.x+=e;this.y+=f;return this};d.addVector=function(e){this.x+=e.x;this.y+=e.y;return this};d.subtractVector=function(e){this.x-=e.x;this.y-=e.y;return this};d.scale=function(e){this.x*=e;this.y*=e;return this};d.dot=function(e){return this.x*e.x+this.y*e.y};d.shortestAngleTo=function(e){return Math.acos(this.dot(e)/(this.magnitude()*e.magnitude()))};d.scalarProjection=function(f){var g=0;var e=null;if(typeof f=="number"){g=f}else{e=f;g=this.shortestAngleTo(e)}return this.magnitude()*Math.cos(g)};d.copy=function(){return new c(this.x,this.y)};return c})();b.CollisionData=(function(){var d=function(g,l,e,j,m,k,h,f){this.occurred=g||false;this.direction=l||null;this.position=e||null;this.deltaMovement=j||null;this.aABB=m||null;this.thisShape=k||null;this.thatShape=h||null;this.vector=f||null};var c=d.prototype;c.copy=function(e){this.occurred=e.occurred;this.direction=e.direction;this.position=e.position;this.deltaMovement=e.deltaMovement;this.aABB=e.aABB;this.thisShape=e.thisShape;this.thatShape=e.thatShape;this.vector=e.vector};c.clear=function(){this.occurred=false;this.direction=null;this.position=null;this.deltaMovement=null;this.aABB=null;this.thisShape=null;this.thatShape=null;this.vector=null};return d})();b.CollisionDataContainer=(function(){var c=function(){this.xData=[new b.CollisionData(),new b.CollisionData()];this.yData=[new b.CollisionData(),new b.CollisionData()];this.xCount=0;this.yCount=0;this.xDeltaMovement=Infinity;this.yDeltaMovement=Infinity};var d=c.prototype;d.getXEntry=function(e){return this.xData[e]};d.getYEntry=function(e){return this.yData[e]};d.tryToAddX=function(e){if(e.deltaMovement<this.xDeltaMovement){this.xDeltaMovement=e.deltaMovement;this.xData[0].copy(e);this.xCount=1;return true}else{if(e.deltaMovement==this.xDeltaMovement){this.ensureRoomX();this.xData[this.xCount].copy(e);this.xCount++;return true}}return false};d.tryToAddY=function(e){if(e.deltaMovement<this.yDeltaMovement){this.yDeltaMovement=e.deltaMovement;this.yData[0].copy(e);this.yCount=1;return true}else{if(e.deltaMovement==this.yDeltaMovement){this.ensureRoomY();this.yData[this.yCount].copy(e);this.yCount++;return true}}return false};d.ensureRoomX=function(){var f=this.xData.length*2;if(this.xData.length<=this.xCount){for(var e=this.xData.length;e<f;e++){this.xData[e]=new b.CollisionData()}}};d.ensureRoomY=function(){var f=this.yData.length*2;if(this.yData.length<=this.yCount){for(var e=this.yData.length;e<f;e++){this.yData[e]=new b.CollisionData()}}};d.reset=function(){this.xCount=0;this.yCount=0;this.xDeltaMovement=Infinity;this.yDeltaMovement=Infinity};return c})();b.Messenger=(function(){var d=function(){this.messages={};this.loopCheck=[];this.unbindLater=[]},c=d.prototype;c.toString=function(){return"[messenger Object]"};c.bind=function(f,g,e){if(!this.messages[f]){this.messages[f]=[]}this.messages[f].push({callback:g,scope:e})};c.unbind=function(g,k,f){var h=false,e=0;if(this.loopCheck.length){for(e=0;e<this.loopCheck.length;e++){if(this.loopCheck[e]===g){h=true;break}}}if(h){this.unbindLater.push({event:g,callback:k,scope:f})}else{this.safelyUnbind(g,k,f)}};c.safelyUnbind=function(g,h,f){if(!this.messages[g]){this.messages[g]=[]}for(var e in this.messages[g]){if((this.messages[g][e].callback===h)&&(this.messages[g][e].scope===f)){this.messages[g].splice(e,1);break}}};c.trigger=function(g,j,e){var f=0,h=0;if(typeof g==="string"){return this.triggerEvent(g,j,e)}else{if(Array.isArray(g)){for(;f<g.length;f++){h+=this.trigger(g[f],j,e)}return h}else{if(g.event){return this.triggerEvent(g.event,g.message||j,e)}else{console.warn('Event incorrectly formatted: must be string, array, or object containing an "event" property.',g);return 0}}}};c.triggerEvent=function(h,k,e){var g=0,f=0,l=0;if(this.debug||e||(k&&k.debug)){if(this.messages[h]&&this.messages[h].length){console.log('Entity "'+this.type+'": Event "'+h+'" has '+this.messages[h].length+" subscriber"+((this.messages[h].length>1)?"s":"")+".",k)}else{console.warn('Entity "'+this.type+'": Event "'+h+'" has no subscribers.',k)}for(g=0;g<this.loopCheck.length;g++){if(this.loopCheck[g]===h){l+=1;if(l>5){throw"Endless loop detected for '"+h+"'."}else{console.warn("Event '"+h+"' is nested inside another '"+h+"' event.")}}}g=0}this.loopCheck.push(h);if(this.messages[h]){for(g=0;g<this.messages[h].length;g++){this.messages[h][g].callback.call(this.messages[h][g].scope||this,k,e)}}this.loopCheck.length=this.loopCheck.length-1;if(!this.loopCheck.length&&this.unbindLater.length){for(f=0;f<this.unbindLater.length;f++){this.safelyUnbind(this.unbindLater[f].event,this.unbindLater[f].callback,this.unbindLater[f].scope)}this.unbindLater.length=0}return g};c.getMessageIds=function(){var e=[];for(var f in this.messages){e.push(f)}return e};c.copyEventHandlers=function(e){return this.messages[events]||null};return d})();(function(){var g=navigator.userAgent.toLowerCase(),o=document.createElement("audio"),r={canvas:false,touch:!!("ontouchstart" in window),iPod:(g.search("ipod")>-1),iPhone:(g.search("iphone")>-1),iPad:(g.search("ipad")>-1),safari:(g.search("safari")>-1),ie:(g.search("msie")>-1)||(g.search("trident")>-1),firefox:(g.search("firefox")>-1),android:(g.search("android")>-1),chrome:(g.search("chrome")>-1),silk:(g.search("silk")>-1),iPhone4:false,iPad2:false,iOS:false,mobile:false,desktop:false,multitouch:false,ogg:true,m4a:true,mp3:true},q=b.settings.aspects,c={},n=0,m=0,l=0,f=false,h="";r.iPhone4=r.iPhone&&(window.screen.height==(960/2));r.iPad2=r.iPad&&(!window.devicePixelRatio||(window.devicePixelRatio===1));r.iOS=r.iPod||r.iPhone||r.iPad;r.mobile=r.iOS||r.android||r.silk;r.desktop=!r.mobile;if(r.touch){if(r.android){if(parseInt(g.slice(g.indexOf("android")+8))>2){r.multitouch=true}}else{r.multitouch=true}}if((o.canPlayType)&&!(!!o.canPlayType&&""!=o.canPlayType('audio/ogg; codecs="vorbis"'))){r.ogg=false;if(r.ie||!(!!o.canPlayType&&""!=o.canPlayType("audio/mp4"))){r.m4a=false}}var d=document.createElement("canvas");try{r.canvas=!!(d.getContext("2d"))}catch(p){r.canvas=!!(d.getContext)}delete d;b.settings.aspects=c;b.settings.aspects={};for(n in q){f=false;h="";for(m in q[n]){h+=" "+m;for(l in q[n][m]){if(g.search(q[n][m][l])>-1){b.settings.aspects[m]=true;f=true;break}}if(f){break}}if(!f){console.warn("This browser doesn't support any of the following: "+h)}}b.settings.supports=r})();b.Game=(function(){var e=function(f,g){return function(h){g(f,h)}};var c=function(k,h){var f=document.createElement("div"),l=null;b.game=this;this.currentScene=undefined;this.loaded=null;this.settings=k;if(!k.aspects){k.aspects=b.settings.aspects}if(!k.supports){k.supports=b.settings.supports}if(!k.classes){k.classes=b.settings.classes}if(!k.components){k.components=b.settings.components}if(document.getElementById(k.global.rootElement||"root")){l=document.getElementById(k.global.rootElement||"root")}else{l=document.createElement("div");l.id=k.global.rootElement||"root";document.getElementsByTagName("body")[0].appendChild(l)}for(var j in k.supports){if(k.supports[j]){l.className+=" supports-"+j}}f.id="inner-"+l.id;l.appendChild(f);this.rootElement=f;this.containerElement=l;this.loadScene(k.global.initialScene);var g=this,m=null;if(k.debug){m=function(n,o){g.currentScene.trigger(n,o)}}else{m=function(n,o){g.currentScene.trigger(n,o);o.preventDefault()}}this.bindings=[];this.addEventListener(window,"keydown",m);this.addEventListener(window,"keyup",m);if(k.global.aspectRatio){m=function(r,s){var p=f;var q=k.global.aspectRatio;var t=l.offsetWidth;var o=l.offsetHeight;if(k.global.maxWidth&&(k.global.maxWidth<t)){t=k.global.maxWidth}var n=t/o;if(n>q){p.style.height=o+"px";t=o*q;p.style.width=t+"px"}else{p.style.width=t+"px";o=t/q;p.style.height=o+"px"}if(k.global.resizeFont){l.style.fontSize=Math.round(t/20)+"px"}p.style.marginTop="-"+Math.round(o/2)+"px";p.style.marginLeft="-"+Math.round(t/2)+"px";p.style.top="50%";p.style.left="50%";g.currentScene.trigger(r,s)};m("resize")}else{if(k.global.resizeFont){m=function(n,o){l.style.fontSize=Math.round(g.rootElement.offsetWidth/20)+"px";g.currentScene.trigger(n,o)};m("resize")}}this.addEventListener(window,"orientationchange",m);this.addEventListener(window,"resize",m);if(h){h(this)}createjs.Ticker.timingMode="raf";createjs.Ticker.setFPS(k.global.fps||60);this.tickWrapper=function(n){g.tick(n)};createjs.Ticker.addEventListener("tick",this.tickWrapper);if(window){window.getEntityById=function(n){return g.getEntityById(n)};window.getEntitiesByType=function(n){return g.getEntitiesByType(n)}}};var d=c.prototype;d.tick=function(f){if(this.loadedScene){this.loadedScene.trigger("tick",f)}if(this.currentScene){this.currentScene.trigger("tick",f)}};d.loadScene=function(f,l,k,j){var g=this;this.inTransition=true;this.leavingScene=this.currentScene;if(j){this.loadNextScene(f);return}switch(l){case"fade-to-black":var h=document.createElement("div");this.rootElement.appendChild(h);h.style.width="100%";h.style.height="100%";h.style.position="absolute";h.style.zIndex="12";h.style.opacity="0";h.style.background="#000";new createjs.Tween(h.style).to({opacity:0},500).to({opacity:1},500).call(function(m){if(!this.loaded){g.loadNextScene(f,k)}g.completeSceneTransition(k)}).wait(500).to({opacity:0},500).call(function(m){g.rootElement.removeChild(h);h=undefined});break;case"instant":default:if(!this.loaded){g.loadNextScene(f,k)}this.completeSceneTransition(k)}};d.loadNextScene=function(f,h){var g=null;if(typeof f==="string"){g=this.settings.scenes[f]}else{g=f}this.loaded=f;this.loadedScene=new b.Scene(g,this.rootElement);console.log("Scene loaded: "+f);this.loadedScene.trigger("scene-loaded",h)};d.completeSceneTransition=function(g){var f=this.loaded;this.currentScene=this.loadedScene;this.loadedScene=null;this.loaded=false;this.inTransition=false;if(this.leavingScene){this.leavingScene.destroy();this.leavingScene=false}console.log("Scene live: "+f);this.currentScene.trigger("scene-live",g)};d.addEventListener=function(f,g,h){this.bindings[g]={element:f,event:g,callback:e(g,h)};f.addEventListener(g,this.bindings[g].callback,true)};d.getEntityById=function(f){if(this.currentScene){return this.currentScene.getEntityById(f)}else{return undefined}};d.getEntitiesByType=function(f){if(this.currentScene){return this.currentScene.getEntitiesByType(f)}else{return[]}};d.destroy=function(){createjs.Ticker.removeEventListener("tick",this.tickWrapper);for(var f in this.bindings){this.bindings[f].element.removeEventListener(this.bindings[f].event,this.bindings[f].callback)}this.bindings.length=0};return c})();b.Scene=(function(){var d=function(g,e){var k=g.layers,l=true,o=false,n=false,h=null;this.id=g.id;this.storedMessages=[];this.rootElement=e;this.layers=[];for(var m in k){o=k[m];n={rootElement:this.rootElement,parent:this};if(o.properties){for(j in o.properties){n[j]=o.properties[j]}}if(o.type){o=b.game.settings.entities[o.type]}l=true;if(o.filter){if(o.filter.includes){l=false;for(var f in o.filter.includes){if(b.game.settings.supports[o.filter.includes[f]]){l=true}}}if(o.filter.excludes){for(var f in o.filter.excludes){if(b.game.settings.supports[o.filter.excludes[f]]){l=false}}}}if(l){this.layers.push(new b.Entity(o,{properties:n}))}}h=this.storedMessages;this.storedMessages=false;for(var j=0;j<h.length;j++){this.trigger(h[j].message,h[j].value)}h.length=0;this.time=new Date().getTime();this.timeElapsed={name:"",time:0}};var c=d.prototype;c.trigger=function(f,g){var e=0,h=0;if(this.storedMessages){this.storedMessages.push({message:f,value:g})}else{if(f==="tick"){h=new Date().getTime();this.timeElapsed.name="Non-Engine";this.timeElapsed.time=h-this.time;this.trigger("time-elapsed",this.timeElapsed);this.time=h}for(;e<this.layers.length;e++){this.layers[e].trigger(f,g)}if(f==="tick"){h=new Date().getTime();this.timeElapsed.name="Engine Total";this.timeElapsed.time=h-this.time;this.trigger("time-elapsed",this.timeElapsed);this.time=h}}};c.getEntityById=function(g){var e=0,f=null;for(;e<this.layers.length;e++){if(this.layers[e].id===g){return this.layers[e]}if(this.layers[e].getEntityById){f=this.layers[e].getEntityById(g);if(f){return f}}}return undefined};c.getEntitiesByType=function(g){var e=0,f=null,h=[];for(;e<this.layers.length;e++){if(this.layers[e].type===g){h.push(this.layers[e])}if(this.layers[e].getEntitiesByType(g)){f=this.layers[e].getEntitiesByType(g);if(f){h=h.concat(f)}}}return h};c.destroy=function(){for(var e in this.layers){this.layers[e].destroy()}this.layers.length=0};return d})();b.Entity=(function(){var e={},c=function(j,g){var p=this,m=undefined,l=undefined,h=j||{},f=h.components||[],o=h.properties||{},n=g||{},k=n.properties||{};b.Messenger.call(this);p.components=[];p.type=h.id||"none";p.id=g.id||k.id;if(!p.id){if(!e[p.type]){e[p.type]=0}p.id=p.type+"-"+e[p.type];e[p.type]+=1}this.setProperty(o);this.setProperty(k);this.bind("set-property",function(q){p.setProperty(q)});if(!p.state){p.state={}}p.lastState={};for(m in f){l=f[m];if(b.components[l.type]){p.addComponent(new b.components[l.type](p,l))}else{console.warn("Component '"+l.type+"' is not defined.",l)}}p.trigger("load")};var d=c.prototype=new b.Messenger();d.toString=function(){return"[entity "+this.type+"]"};d.addComponent=function(f){this.components.push(f);return f};d.removeComponent=function(g){var f="";if(typeof g==="string"){for(f in this.components){if(this.components[f].type===g){g=this.components[f];this.components.splice(f,1);g.destroy();return g}}}else{for(f in this.components){if(this.components[f]===g){this.components.splice(f,1);g.destroy();return g}}}return false};d.setProperty=function(g){var f="";for(f in g){this[f]=g[f]}};d.destroy=function(){for(var f in this.components){this.components[f].destroy()}this.components.length=0};return c})();
/*
* @license SoundJS
* Visit https://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* https://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
/*	SWFObject v2.2 <https://code.google.com/p/swfobject/> 
	is released under the MIT License <https://www.opensource.org/licenses/mit-license.php> 
*/
var a=function(){function aQ(){if(!Y){try{var f=af.getElementsByTagName("body")[0].appendChild(aA("span"));f.parentNode.removeChild(f)}catch(e){return}Y=!0;for(var h=ac.length,g=0;h>g;g++){ac[g]()}}}function aP(c){Y?c():ac[ac.length]=c}function aO(d){if(typeof ag.addEventListener!=an){ag.addEventListener("load",d,!1)}else{if(typeof af.addEventListener!=an){af.addEventListener("load",d,!1)}else{if(typeof ag.attachEvent!=an){az(ag,"onload",d)}else{if("function"==typeof ag.onload){var c=ag.onload;ag.onload=function(){c(),d()}}else{ag.onload=d}}}}}function aN(){ad?aM():aL()}function aM(){var f=af.getElementsByTagName("body")[0],e=aA(am);e.setAttribute("type",aj);var h=f.appendChild(e);if(h){var g=0;!function(){if(typeof h.GetVariable!=an){var c=h.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),V.pv=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}else{if(10>g){return g++,setTimeout(arguments.callee,10),void 0}}f.removeChild(e),h=null,aL()}()}else{aL()}}function aL(){var y=ab.length;if(y>0){for(var x=0;y>x;x++){var w=ab[x].id,v=ab[x].callbackFn,u={success:!1,id:w};if(V.pv[0]>0){var t=aB(w);if(t){if(!ay(ab[x].swfVersion)||V.wk&&V.wk<312){if(ab[x].expressInstall&&aJ()){var s={};s.data=ab[x].expressInstall,s.width=t.getAttribute("width")||"0",s.height=t.getAttribute("height")||"0",t.getAttribute("class")&&(s.styleclass=t.getAttribute("class")),t.getAttribute("align")&&(s.align=t.getAttribute("align"));for(var r={},p=t.getElementsByTagName("param"),j=p.length,h=0;j>h;h++){"movie"!=p[h].getAttribute("name").toLowerCase()&&(r[p[h].getAttribute("name")]=p[h].getAttribute("value"))}aI(s,r,w,v)}else{aH(t),v&&v(u)}}else{aw(w,!0),v&&(u.success=!0,u.ref=aK(w),v(u))}}}else{if(aw(w,!0),v){var g=aK(w);g&&typeof g.SetVariable!=an&&(u.success=!0,u.ref=g),v(u)}}}}}function aK(f){var e=null,h=aB(f);if(h&&"OBJECT"==h.nodeName){if(typeof h.SetVariable!=an){e=h}else{var g=h.getElementsByTagName(am)[0];g&&(e=g)}}return e}function aJ(){return !X&&ay("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function aI(k,j,q,p){X=!0,ar=p||null,aq={success:!1,id:q};var o=aB(q);if(o){"OBJECT"==o.nodeName?(au=aG(o),at=null):(au=o,at=q),k.id=ai,(typeof k.width==an||!/%$/.test(k.width)&&parseInt(k.width,10)<310)&&(k.width="310"),(typeof k.height==an||!/%$/.test(k.height)&&parseInt(k.height,10)<137)&&(k.height="137"),af.title=af.title.slice(0,47)+" - Flash Player Installation";var n=V.ie&&V.win?"ActiveX":"PlugIn",m="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+n+"&MMdoctitle="+af.title;if(typeof j.flashvars!=an?j.flashvars+="&"+m:j.flashvars=m,V.ie&&V.win&&4!=o.readyState){var l=aA("div");q+="SWFObjectNew",l.setAttribute("id",q),o.parentNode.insertBefore(l,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}aF(k,j,q)}}function aH(d){if(V.ie&&V.win&&4!=d.readyState){var c=aA("div");d.parentNode.insertBefore(c,d),c.parentNode.replaceChild(aG(d),c),d.style.display="none",function(){4==d.readyState?d.parentNode.removeChild(d):setTimeout(arguments.callee,10)}()}else{d.parentNode.replaceChild(aG(d),d)}}function aG(h){var g=aA("div");if(V.win&&V.ie){g.innerHTML=h.innerHTML}else{var m=h.getElementsByTagName(am)[0];if(m){var l=m.childNodes;if(l){for(var k=l.length,j=0;k>j;j++){1==l[j].nodeType&&"PARAM"==l[j].nodeName||8==l[j].nodeType||g.appendChild(l[j].cloneNode(!0))}}}}return g}function aF(x,w,v){var u,t=aB(v);if(V.wk&&V.wk<312){return u}if(t){if(typeof x.id==an&&(x.id=v),V.ie&&V.win){var s="";for(var r in x){x[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?w.movie=x[r]:"styleclass"==r.toLowerCase()?s+=' class="'+x[r]+'"':"classid"!=r.toLowerCase()&&(s+=" "+r+'="'+x[r]+'"'))}var q="";for(var p in w){w[p]!=Object.prototype[p]&&(q+='<param name="'+p+'" value="'+w[p]+'" />')}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+q+"</object>",aa[aa.length]=x.id,u=aB(x.id)}else{var o=aA(am);o.setAttribute("type",aj);for(var n in x){x[n]!=Object.prototype[n]&&("styleclass"==n.toLowerCase()?o.setAttribute("class",x[n]):"classid"!=n.toLowerCase()&&o.setAttribute(n,x[n]))}for(var m in w){w[m]!=Object.prototype[m]&&"movie"!=m.toLowerCase()&&aE(o,m,w[m])}t.parentNode.replaceChild(o,t),u=o}}return u}function aE(f,e,h){var g=aA("param");g.setAttribute("name",e),g.setAttribute("value",h),f.appendChild(g)}function aD(d){var c=aB(d);c&&"OBJECT"==c.nodeName&&(V.ie&&V.win?(c.style.display="none",function(){4==c.readyState?aC(d):setTimeout(arguments.callee,10)}()):c.parentNode.removeChild(c))}function aC(e){var d=aB(e);if(d){for(var f in d){"function"==typeof d[f]&&(d[f]=null)}d.parentNode.removeChild(d)}}function aB(e){var d=null;try{d=af.getElementById(e)}catch(f){}return d}function aA(c){return af.createElement(c)}function az(e,d,f){e.attachEvent(d,f),Z[Z.length]=[e,d,f]}function ay(e){var d=V.pv,f=e.split(".");return f[0]=parseInt(f[0],10),f[1]=parseInt(f[1],10)||0,f[2]=parseInt(f[2],10)||0,d[0]>f[0]||d[0]==f[0]&&d[1]>f[1]||d[0]==f[0]&&d[1]==f[1]&&d[2]>=f[2]?!0:!1}function ax(j,h,o,n){if(!V.ie||!V.mac){var m=af.getElementsByTagName("head")[0];if(m){var l=o&&"string"==typeof o?o:"screen";if(n&&(ap=null,ao=null),!ap||ao!=l){var k=aA("style");k.setAttribute("type","text/css"),k.setAttribute("media",l),ap=m.appendChild(k),V.ie&&V.win&&typeof af.styleSheets!=an&&af.styleSheets.length>0&&(ap=af.styleSheets[af.styleSheets.length-1]),ao=l}V.ie&&V.win?ap&&typeof ap.addRule==am&&ap.addRule(j,h):ap&&typeof af.createTextNode!=an&&ap.appendChild(af.createTextNode(j+" {"+h+"}"))}}}function aw(e,d){if(W){var f=d?"visible":"hidden";Y&&aB(e)?aB(e).style.visibility=f:ax("#"+e,"visibility:"+f)}}function av(e){var d=/[\\\"<>\.;]/,f=null!=d.exec(e);return f&&typeof encodeURIComponent!=an?encodeURIComponent(e):e}var au,at,ar,aq,ap,ao,an="undefined",am="object",al="Shockwave Flash",ak="ShockwaveFlash.ShockwaveFlash",aj="application/x-shockwave-flash",ai="SWFObjectExprInst",ah="onreadystatechange",ag=window,af=document,ae=navigator,ad=!1,ac=[aN],ab=[],aa=[],Z=[],Y=!1,X=!1,W=!0,V=function(){var v=typeof af.getElementById!=an&&typeof af.getElementsByTagName!=an&&typeof af.createElement!=an,u=ae.userAgent.toLowerCase(),t=ae.platform.toLowerCase(),s=t?/win/.test(t):/win/.test(u),r=t?/mac/.test(t):/mac/.test(u),q=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,o=[0,0,0],n=null;if(typeof ae.plugins!=an&&typeof ae.plugins[al]==am){n=ae.plugins[al].description,!n||typeof ae.mimeTypes!=an&&ae.mimeTypes[aj]&&!ae.mimeTypes[aj].enabledPlugin||(ad=!0,p=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0)}else{if(typeof ag.ActiveXObject!=an){try{var m=new ActiveXObject(ak);m&&(n=m.GetVariable("$version"),n&&(p=!0,n=n.split(" ")[1].split(","),o=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(l){}}}return{w3:v,pv:o,wk:q,ie:p,win:s,mac:r}}();return !function(){V.w3&&((typeof af.readyState!=an&&"complete"==af.readyState||typeof af.readyState==an&&(af.getElementsByTagName("body")[0]||af.body))&&aQ(),Y||(typeof af.addEventListener!=an&&af.addEventListener("DOMContentLoaded",aQ,!1),V.ie&&V.win&&(af.attachEvent(ah,function(){"complete"==af.readyState&&(af.detachEvent(ah,arguments.callee),aQ())}),ag==top&&!function(){if(!Y){try{af.documentElement.doScroll("left")}catch(c){return setTimeout(arguments.callee,0),void 0}aQ()}}()),V.wk&&!function(){return Y?void 0:/loaded|complete/.test(af.readyState)?(aQ(),void 0):(setTimeout(arguments.callee,0),void 0)}(),aO(aQ)))}(),!function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var h=Z.length,g=0;h>g;g++){Z[g][0].detachEvent(Z[g][1],Z[g][2])}for(var m=aa.length,l=0;m>l;l++){aD(aa[l])}for(var k in V){V[k]=null}V=null;for(var j in a){a[j]=null}a=null})}(),{registerObject:function(g,f,k,j){if(V.w3&&g&&f){var h={};h.id=g,h.swfVersion=f,h.expressInstall=k,h.callbackFn=j,ab[ab.length]=h,aw(g,!1)}else{j&&j({success:!1,id:g})}},getObjectById:function(c){return V.w3?aK(c):void 0},embedSWF:function(x,w,v,u,t,s,r,q,p,l){var h={success:!1,id:w};V.w3&&!(V.wk&&V.wk<312)&&x&&w&&v&&u&&t?(aw(w,!1),aP(function(){v+="",u+="";var c={};if(p&&typeof p===am){for(var j in p){c[j]=p[j]}}c.data=x,c.width=v,c.height=u;var g={};if(q&&typeof q===am){for(var f in q){g[f]=q[f]}}if(r&&typeof r===am){for(var e in r){typeof g.flashvars!=an?g.flashvars+="&"+e+"="+r[e]:g.flashvars=e+"="+r[e]}}if(ay(t)){var d=aF(c,g,w);c.id==w&&aw(w,!0),h.success=!0,h.ref=d}else{if(s&&aJ()){return c.data=s,aI(c,g,w,l),void 0}aw(w,!0)}l&&l(h)})):l&&l(h)},switchOffAutoHideShow:function(){W=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:ay,createSWF:function(e,d,f){return V.w3?aF(e,d,f):void 0},showExpressInstall:function(f,e,h,g){V.w3&&aJ()&&aI(f,e,h,g)},removeSWF:function(c){V.w3&&aD(c)},createCSS:function(f,e,h,g){V.w3&&ax(f,e,h,g)},addDomLoadEvent:aP,addLoadEvent:aO,getQueryParamValue:function(f){var e=af.location.search||af.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==f){return av(e)}for(var h=e.split("&"),g=0;g<h.length;g++){if(h[g].substring(0,h[g].indexOf("="))==f){return av(h[g].substring(h[g].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(X){var c=aB(ai);c&&au&&(c.parentNode.replaceChild(au,c),at&&(aw(at,!0),V.ie&&V.win&&(au.style.display="block")),ar&&ar(aq)),X=!1}}}}();this.createjs=this.createjs||{},function(){function e(){this._init()}var d=e;d._capabilities=null,d.swfPath="src/SoundJS/",d.isSupported=function(){return createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry||createjs.Sound.BrowserDetect.isWindowsPhone?!1:(d._generateCapabilities(),null==a?!1:a.hasFlashPlayerVersion("9.0.0"))},d._generateCapabilities=function(){null==d._capabilities&&(d._capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!1,mp4:!1,aiff:!1,wma:!1,mid:!1})};var f=d.prototype={_audioSources:null,_volume:1,_CONTAINER_ID:"flashAudioContainer",_WRAPPER_ID:"SoundJSFlashContainer",_capabilities:null,_container:null,_flash:null,flashReady:!1,_flashInstances:null,_flashPreloadInstances:null,_preloadInstances:null,_queuedInstances:null,showOutput:!1,_init:function(){this._capabilities=d._capabilities,this._audioSources={},this._flashInstances={},this._flashPreloadInstances={},this._preloadInstances={},this._queuedInstances=[];var g=this.wrapper=document.createElement("div");g.id=this._WRAPPER_ID,g.style.position="absolute",g.style.marginLeft="-1px",g.className=this._WRAPPER_ID,document.body.appendChild(g);var j=this._container=document.createElement("div");j.id=this._CONTAINER_ID,j.appendChild(document.createTextNode("SoundJS Flash Container")),g.appendChild(j);var h=d.swfPath;a.embedSWF(h+"FlashAudioPlugin.swf",this._CONTAINER_ID,"1","1","9.0.0",null,null,{AllowScriptAccess:"always"},null,createjs.proxy(this._handleSWFReady,this))},_handleSWFReady:function(c){this._flash=c.ref},_handleFlashReady:function(){this.flashReady=!0;for(var h=0,g=this._queuedInstances.length;g>h;h++){this._flash.register(this._queuedInstances[h])}this._queuedInstances.length=0;for(var j in this._flashPreloadInstances){this._flashPreloadInstances[j].initialize(this._flash)}for(var j in this._preloadInstances){this._preloadInstances[j].initialize(this._flash)}this._preloadInstances={};for(var j in this._flashInstances){this._flashInstances[j].initialize(this._flash)}},register:function(g){this._audioSources[g]=!0,this.flashReady?this._flash.register(g):this._queuedInstances.push(g);var c={tag:new createjs.FlashPlugin.Loader(g,this,this._flash)};return c},removeSound:function(g){delete this._audioSources[g];var c=createjs.indexOf(this._queuedInstances,g);-1!=c&&this._queuedInstances.splice(c,1)},removeAllSounds:function(){this._audioSources={},this._queuedInstances.length=0,this._flashInstances={},this._flashPreloadInstances={},this._preloadInstances={}},create:function(h,g,l){this.isPreloadStarted(h)||this.preload(h);try{var k=new createjs.FlashPlugin.SoundInstance(h,g,l,this,this._flash);return k}catch(j){}return null},isPreloadStarted:function(c){return null!=this._audioSources[c]},preload:function(g){this._audioSources[g]=!0;var c=new createjs.FlashPlugin.Loader(g,this,this._flash);c.load()},_registerLoadedSrc:function(c){this._audioSources[c]=c},setVolume:function(c){return this._volume=c,this._updateVolume()},_updateVolume:function(){var c=createjs.Sound._masterMute?0:this._volume;return this._flash.setMasterVolume(c)},getVolume:function(){return this._volume},setMute:function(){return this._updateVolume()},registerPreloadInstance:function(g,c){this._flashPreloadInstances[g]=c},unregisterPreloadInstance:function(c){delete this._flashPreloadInstances[c]},registerSoundInstance:function(g,c){this._flashInstances[g]=c},unregisterSoundInstance:function(c){delete this._flashInstances[c]},flashLog:function(g){try{this.showOutput&&console.log(g)}catch(c){}},handleSoundEvent:function(j,h){var o=this._flashInstances[j];if(null!=o){for(var n=[],m=2,l=arguments.length;l>m;m++){n.push(arguments[m])}try{0==n.length?o[h]():o[h].apply(o,n)}catch(k){}}},handlePreloadEvent:function(j,h){var o=this._flashPreloadInstances[j];if(null!=o){for(var n=[],m=2,l=arguments.length;l>m;m++){n.push(arguments[m])}try{0==n.length?o[h]():o[h].apply(o,n)}catch(k){}}},handleEvent:function(c){switch(c){case"ready":clearTimeout(this.loadTimeout),this._handleFlashReady()}},handleErrorEvent:function(){},toString:function(){return"[FlashPlugin]"}};f.constructor=e,createjs.FlashPlugin=e}(),function(){function d(g,f,k,j,h){this._init(g,f,k,j,h)}var c=d.prototype=new createjs.EventDispatcher;c.constructor=d,c.src=null,c.uniqueId=-1,c._owner=null,c._capabilities=null,c._flash=null,c.flashId=null,c._remainingLoops=0,createjs.definePropertySupported&&Object.defineProperty(c,"loop",{get:function(){return this._remainingLoops},set:function(e){return this._remainingLoops=e,this._flash.setLoop(this.flashId,e)}}),c._volume=1,c._pan=0,c._offset=0,c._startTime=0,c._duration=0,c._delayTimeoutId=null,c._muted=!1,c.paused=!1,c._paused=!1,createjs.definePropertySupported&&(Object.defineProperty(c,"volume",{get:function(){return this._volume},set:function(e){return null!=Number(e)?(e=Math.max(0,Math.min(1,e)),this._volume=e,this._flash.setVolume(this.flashId,e)):void 0}}),Object.defineProperty(c,"pan",{get:function(){return this._pan},set:function(e){return null!=Number(e)?(e=Math.max(-1,Math.min(1,e)),this._pan=e,this._flash.setPan(this.flashId,e)):void 0}})),c._init=function(g,f,k,j,h){this.src=g,this._startTime=f||0,this._duration=k||h.getDurationBySrc(g),this._owner=j,this._flash=h},c.initialize=function(e){this._flash=e},c._interrupt=function(){this.playState=createjs.Sound.PLAY_INTERRUPTED,this._flash.interrupt(this.flashId),this._cleanUp(),this._sendEvent("interrupted")},c._cleanUp=function(){this.paused=this._paused=!1,this._flash.stopSound(this.flashId),clearTimeout(this._delayTimeoutId),this._owner.unregisterSoundInstance(this.flashId),createjs.Sound._playFinished(this)},c.play=function(h,g,m,l,k,j){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(h instanceof Object&&(m=h.offset,l=h.loop,k=h.volume,j=h.pan),null!=m&&this.setPosition(m),null!=l&&(this.loop=l),null!=k&&this.setVolume(k),null!=j&&this.setPan(j),this._paused&&this.resume(),void 0):(this._cleanUp(),createjs.Sound._playInstance(this,h,g,m,l,k,j),void 0)},c._beginPlaying=function(f,e,h,g){return this._remainingLoops=e,this.paused=this._paused=!1,this._owner.flashReady?(this._offset=f,this.flashId=this._flash.playSound(this.src,f,e,h,g,this._startTime,this._duration),null==this.flashId?(this._cleanUp(),!1):(this._muted&&this.setMute(!0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._owner.registerSoundInstance(this.flashId,this),this._sendEvent("succeeded"),!0)):!1},c.playFailed=function(){this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed")},c.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.paused=this._paused=!0,clearTimeout(this._delayTimeoutId),this._flash.pauseSound(this.flashId))},c.resume=function(){return this._paused?(this.paused=this._paused=!1,this._flash.resumeSound(this.flashId)):!1},c.stop=function(){this.playState=createjs.Sound.PLAY_FINISHED,this.paused=this._paused=!1,this._offset=0;var e=this._flash.stopSound(this.flashId);return this._cleanUp(),e},c.setVolume=function(e){return null!=Number(e)?(e=Math.max(0,Math.min(1,e)),this._volume=e,this._flash.setVolume(this.flashId,e)):void 0},c.getVolume=function(){return this._volume},c.setMute=function(e){return this._muted=e,e?this._flash.muteSound(this.flashId):this._flash.unmuteSound(this.flashId)},c.getMute=function(){return this._muted},c.getPan=function(){return this._pan},c.setPan=function(e){return null!=Number(e)?(e=Math.max(-1,Math.min(1,e)),this._pan=e,this._flash.setPan(this.flashId,e)):void 0},c.getPosition=function(){var e=-1;return this._flash&&this.flashId&&(e=this._flash.getPosition(this.flashId)),-1!=e&&(this._offset=e),this._offset},c.setPosition=function(e){return this._offset=e,this._flash&&this.flashId&&this._flash.setPosition(this.flashId,e),!0},c.getDuration=function(){return this._duration},c._sendEvent=function(f){var e=new createjs.Event(f);this.dispatchEvent(e)},c.handleSoundFinished=function(){this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,this._cleanUp(),this._sendEvent("complete")},c.handleSoundLoop=function(){this._sendEvent("loop")},c.toString=function(){return"[FlashPlugin SoundInstance]"},createjs.FlashPlugin.SoundInstance=d}(),function(){function d(f,e,g){this._init(f,e,g)}var c=d.prototype;c.constructor=d,c._flash=null,c.src=null,c.flashId=null,c.progress=-1,c.readyState=0,c.loading=!1,c.owner=null,c.onload=null,c.onprogress=null,c.onerror=null,c._init=function(f,e,g){this.src=f,this.owner=e,this._flash=g},c.initialize=function(e){this._flash=e,this.loading&&(this.loading=!1,this.load(this.src))},c.load=function(e){return null!=e&&(this.src=e),null!=this._flash&&this.owner.flashReady?(this.flashId=this._flash.preload(this.src),this.owner.registerPreloadInstance(this.flashId,this),!0):(this.loading=!0,this.owner._preloadInstances[this.src]=this,!1)},c.handleProgress=function(f,e){this.progress=f/e,this.onprogress&&this.onprogress({loaded:f,total:e,progress:this.progress})},c.handleComplete=function(){this.progress=1,this.readyState=4,this.owner._registerLoadedSrc(this.src),createjs.Sound._sendFileLoadEvent(this.src),this.onload&&this.onload()},c.handleError=function(e){this.onerror&&this.onerror(e)},c.toString=function(){return"[FlashPlugin Loader]"},createjs.FlashPlugin.Loader=d}(),this.createjs=this.createjs||{},function(){var c=createjs.FlashPlugin=createjs.FlashPlugin||{};c.version="NEXT",c.buildDate="Fri, 11 Jan 2013 22:39:59 GMT"}();(function(c){c.components={};c.createComponentClass=function(f,e){var d=function(j,m){var n=null,k="";if(e){e.call(this)}this.owner=j;this.listener={events:[],messages:[]};this.publicMethods={};this.type=f.id;if(f.events){for(n in f.events){this.addEventListener(n,f.events[n]);if(m.aliases){for(var l in m.aliases){if(m.aliases[l]===n){this.addEventListener(l,f.events[n])}}}}}if(f.publicMethods){for(n in f.publicMethods){k=n;if(m.aliases){for(var l in m.aliases){if(m.aliases[l]===n){k=l}}}this.addMethod(k,f.publicMethods[n])}}if(this.constructor){this.constructor(m)}},h=null,g=d.prototype;if(e){g=d.prototype=new e()}g.constructor=f.constructor;if(f.methods){for(h in f.methods){if(h==="destroy"){g["___"+h]=f.methods[h]}else{g[h]=f.methods[h]}}}if(f.publicMethods){for(h in f.publicMethods){g[h]=f.publicMethods[h]}}g.toString=function(){return"[component "+this.type+"]"};g.destroy=function(){if(this.___destroy){this.___destroy()}for(h in this.publicMethods){this.removeMethod(h)}this.removeEventListeners()};g.setProperty=function(k,j){this[k]=j};g.addListeners=function(){console.warn('Component "'+this.type+'": "component.addListeners()" is deprecated. Use "component.addEventListener()".')};g.addListener=function(){console.warn('Component "'+this.type+'": "component.addListener()" is deprecated. Use "component.addEventListener()".')};g.removeListeners=function(){console.warn('Component "'+this.type+'": "component.removeListeners()" is deprecated. Use "component.removeEventListeners()".')};g.removeListener=function(){console.warn('Component "'+this.type+'": "component.removeListener()" is deprecated. Use "component.removeEventListener()".')};g.removeEventListeners=function(l){var k=null,m=null;if(!l){k=this.listener.events;m=this.listener.messages;for(var j=0;j<k.length;j++){this.removeEventListener(k[j],m[j])}}else{k=l;for(var j=0;j<k.length;j++){this.removeEventListener(k[j])}}};g.addEventListener=function(j,k){this.listener.events.push(j);this.listener.messages.push(k);this.owner.bind(j,k,this)};g.addMethod=function(k,l){var j=this;if(this.owner[k]){console.warn(owner.type+': Entity already has a method called "'+k+'". Method not added.')}else{this.owner[k]=function(){return l.apply(j,arguments)};this.publicMethods[k]=l}};g.removeEventListener=function(m,n){var k=this.listener.events,l=this.listener.messages;for(var j=0;j<k.length;j++){if((k[j]===m)&&(!n||(l[j]===n))){this.owner.unbind(m,l[j],this)}}};g.removeMethod=function(j){if(!this.owner[j]){console.warn(owner.type+': Entity does not have a method called "'+j+'".')}else{delete this.owner[j]}delete this.publicMethods[j]};c.components[f.id]=d}})(b);b.components={};(function(){var c=function(g,f){return function(j){if(j.released){g+=":up"}else{if(j.pressed){g+=":down"}}for(var h=0;h<f.entities.length;h++){f.entities[h].trigger(g,j)}}},e=function(g,f){return function(j){for(var h=0;h<f.entities.length;h++){f.entities[h].trigger(g,j)}}},d={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"};return b.createComponentClass({id:"handler-controller",constructor:function(f){this.entities=[];this.timeElapsed={name:"Controller",time:0}},events:{keydown:function(g){for(var f=0;f<this.entities.length;f++){this.entities[f].trigger("key:"+(d["kc"+g.keyCode]||("key-code-"+g.keyCode))+":down",g)}},keyup:function(g){for(var f=0;f<this.entities.length;f++){this.entities[f].trigger("key:"+(d["kc"+g.keyCode]||("key-code-"+g.keyCode))+":up",g)}},tick:function(h){var g=new Date().getTime();for(var f=this.entities.length-1;f>-1;f--){if(!this.entities[f].trigger("handle-controller",h)){this.entities.splice(f,1)}}this.timeElapsed.time=new Date().getTime()-g;b.game.currentScene.trigger("time-elapsed",this.timeElapsed)},"child-entity-added":function(f){this.updateEntity(f)},"child-entity-updated":function(f){this.updateEntity(f)}},methods:{updateEntity:function(g){var k=g.getMessageIds(),m=false;for(var f=0;f<k.length;f++){if(k[f]=="handle-controller"){for(var h=0;h<this.entities.length;h++){if(this.entities[h]==g){m=true;break}}if(!m){if(g.controlMap){for(var l in g.controlMap){if((l.indexOf("key:")<0)&&(l.indexOf("mouse:")<0)){if(!this[l]){this.addEventListener(l,c(l,this));this.addEventListener(l+":up",e(l+":up",this));this.addEventListener(l+":down",e(l+":down",this))}}}}this.entities.push(g);g.trigger("controller-load")}break}}},destroy:function(){this.entities.length=0}}})})();(function(){return b.createComponentClass({id:"handler-ai",constructor:function(c){this.entities=[]},events:{"child-entity-added":function(d){var e=d.getMessageIds();for(var c=0;c<e.length;c++){if(e[c]=="handle-ai"){this.entities.push(d);break}}},tick:function(d){for(var c=this.entities.length-1;c>-1;c--){if(!this.entities[c].trigger("handle-ai",d)){this.entities.splice(c,1)}}}},methods:{destroy:function(){this.entities.length=0}}})})();(function(){var c=function(d){var e=null,f=false;for(e in d.state){if(d.state[e]!==d.lastState[e]){d.lastState[e]=d.state[e];f=true}}return f};return b.createComponentClass({id:"handler-logic",constructor:function(d){this.entities=[];this.activeEntities=this.entities;this.paused=0;this.stepLength=d.stepLength||30;this.leftoverTime=0;this.maximumStepsPerTick=10;this.camera={left:0,top:0,width:0,height:0,bufferLeft:d.bufferLeft||d.bufferWidth||d.buffer||-1,bufferRight:d.bufferRight||d.bufferWidth||d.buffer||-1,bufferTop:d.bufferTop||d.bufferHeight||d.buffer||-1,bufferBottom:d.bufferBottom||d.bufferHeight||d.buffer||-1,active:false};this.message={delta:this.stepLength,tick:null,camera:this.camera,movers:this.activeEntities};this.timeElapsed={name:"Logic",time:0}},events:{"child-entity-added":function(e){var f=e.getMessageIds();for(var d=0;d<f.length;d++){if(f[d]=="handle-logic"||f[d]=="handle-post-collision-logic"){this.entities.push(e);this.updateNeeded=this.camera.active;break}}},"child-entity-removed":function(d){for(var e=this.entities.length-1;e>-1;e--){if(this.entities[e]===d){this.entities.splice(e,1);break}}},"pause-logic":function(d){if(d&&d.time){this.paused=d.time}else{this.paused=-1}},"unpause-logic":function(){this.paused=0},"camera-update":function(d){this.camera.left=d.viewportLeft;this.camera.top=d.viewportTop;this.camera.width=d.viewportWidth;this.camera.height=d.viewportHeight;if(this.camera.bufferLeft==-1){this.camera.bufferLeft=this.camera.width/10}if(this.camera.bufferRight==-1){this.camera.bufferRight=this.camera.width/10}if(this.camera.bufferTop==-1){this.camera.bufferTop=this.camera.width/10}if(this.camera.bufferBottom==-1){this.camera.bufferBottom=this.camera.width/10}this.camera.active=true;this.updateNeeded=true},tick:function(h){var g=0,k=undefined,f=new Date().getTime();this.leftoverTime+=h.delta;g=Math.floor(this.leftoverTime/this.stepLength)||1;this.message.delta=Math.min(this.leftoverTime,this.stepLength);this.leftoverTime=Math.max(this.leftoverTime-(g*this.stepLength),0);if(this.paused>0){this.paused-=h.delta;if(this.paused<0){this.paused=0}}if(!this.paused){if(!this.message.tick){this.message.tick=h}if(this.activeEntities===this.entities){this.message.movers=this.activeEntities=[]}this.activeEntities.length=0;for(var d=this.entities.length-1;d>-1;d--){k=this.entities[d];if(k.alwaysOn||(typeof k.x==="undefined")||((k.x>=this.camera.left-this.camera.bufferLeft)&&(k.x<=this.camera.left+this.camera.width+this.camera.bufferRight)&&(k.y>=this.camera.top-this.camera.bufferTop)&&(k.y<=this.camera.top+this.camera.height+this.camera.bufferBottom))){this.activeEntities.push(k)}}g=Math.min(g,this.maximumStepsPerTick);for(var e=0;e<g;e++){for(var d=this.activeEntities.length-1;d>-1;d--){k=this.activeEntities[d];if(k.triggerEvent("handle-logic",this.message)){k.checkCollision=true}}this.timeElapsed.name="Logic";this.timeElapsed.time=new Date().getTime()-f;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);f+=this.timeElapsed.time;if(this.owner.triggerEvent("check-collision-group",this.message)){this.timeElapsed.name="Collision";this.timeElapsed.time=new Date().getTime()-f;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);f+=this.timeElapsed.time;for(var d=this.activeEntities.length-1;d>-1;d--){k=this.activeEntities[d];k.triggerEvent("handle-post-collision-logic",this.message);if(c(k)){k.triggerEvent("logical-state",k.state)}}this.timeElapsed.name="Collision Logic";this.timeElapsed.time=new Date().getTime()-f;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);f+=this.timeElapsed.time}else{for(var d=this.activeEntities.length-1;d>-1;d--){k=this.activeEntities[d];if(c(k)){k.triggerEvent("logical-state",k.state)}}}}}this.timeElapsed.time=new Date().getTime()-f;b.game.currentScene.trigger("time-elapsed",this.timeElapsed)}}})})();(function(){var c={entity:null,type:null,x:0,y:0,hitType:null,myType:null},f={x:0,y:0,relative:false},h=function(j){j.x=0;j.y=0;j.relative=false},e=new b.CollisionDataContainer(),g=function(k,j){if(k.left>=j.right){return false}if(k.right<=j.left){return false}if(k.top>=j.bottom){return false}if(k.bottom<=j.top){return false}return true},d=function(m,l){var n=0;var q=0;var j=undefined;var p=undefined;var s=0;var r=0;var o=undefined;var k=0;if(m.type=="rectangle"&&l.type=="rectangle"){return true}else{if(m.type=="circle"&&l.type=="circle"){n=Math.pow((m.x-l.x),2)+Math.pow((m.y-l.y),2);q=Math.pow((m.radius+l.radius),2);if(n<=q){return true}}else{if(m.type=="circle"&&l.type=="rectangle"||m.type=="rectangle"&&l.type=="circle"){if(m.type=="circle"){j=m;p=l}else{j=l;p=m}o=p.getAABB();s=Math.abs(j.x-p.x);r=Math.abs(j.y-p.y);if(s>=(o.halfWidth+j.radius)){return false}if(r>=(o.halfHeight+j.radius)){return false}if(s<(o.halfWidth)){return true}if(r<(o.halfHeight)){return true}k=Math.pow((s-o.halfWidth),2)+Math.pow((r-o.halfHeight),2);if(k<Math.pow(j.radius,2)){return true}}}}return false};return b.createComponentClass({id:"handler-collision",constructor:function(j){this.entitiesByType={};this.entitiesByTypeLive={};this.allEntities=[];this.solidEntitiesLive=[];this.softEntitiesLive=[];this.allEntitiesLive=[];this.groupsLive=[];this.nonColliders=[];this.terrain=undefined;this.aabb=new b.AABB(this.owner.x,this.owner.y);this.prevAABB=new b.AABB(this.owner.x,this.owner.y);this.owner.previousX=this.owner.previousX||this.owner.x;this.owner.previousY=this.owner.previousY||this.owner.y;this.updateLiveList=true;this.cameraLogicAABB=new b.AABB(0,0);this.cameraCollisionAABB=new b.AABB(0,0);this.timeElapsed={name:"Col",time:0}},events:{"child-entity-added":function(j){this.addCollisionEntity(j)},"add-collision-entity":function(j){this.addCollisionEntity(j)},"child-entity-removed":function(j){this.removeCollisionEntity(j)},"remove-collision-entity":function(j){this.removeCollisionEntity(j)},"check-collision-group":function(k){var j=new Date().getTime();if(k.camera){this.checkCamera(k.camera)}this.timeElapsed.name="Col-Cam";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time;this.prepareCollisions(k);this.timeElapsed.name="Col-Prep";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time;this.checkGroupCollisions();this.timeElapsed.name="Col-Group";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time;this.checkSolidCollisions();this.timeElapsed.name="Col-Solid";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time;this.resolveNonCollisions(k);this.timeElapsed.name="Col-None";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time;this.checkSoftCollisions(k);this.timeElapsed.name="Col-Soft";this.timeElapsed.time=new Date().getTime()-j;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);j+=this.timeElapsed.time}},methods:{addCollisionEntity:function(j){var l=0,k=j.collisionTypes;if((j.type=="tile-layer")||(j.type=="collision-layer")){this.terrain=j;this.updateLiveList=true}else{if(k){for(;l<k.length;l++){if(!this.entitiesByType[k[l]]){this.entitiesByType[k[l]]=[];this.entitiesByTypeLive[k[l]]=[]}this.entitiesByType[k[l]][this.entitiesByType[k[l]].length]=j}if(!j.immobile){this.allEntities[this.allEntities.length]=j;this.updateLiveList=true}}}},removeCollisionEntity:function(l){var k=0,o=0,m=0,n=l.collisionTypes;if(n){for(;o<n.length;o++){for(k in this.entitiesByType[n[o]]){if(this.entitiesByType[n[o]][k]===l){this.entitiesByType[n[o]].splice(k,1);break}}}if(!l.immobile){for(m=0;m<this.allEntities.length;m++){if(this.allEntities[m]===l){this.allEntities.splice(m,1);break}}this.updateLiveList=true}}},checkCamera:(function(){var j=function(l,k){return l.collisionGroup.getAllEntities()-k.collisionGroup.getAllEntities()};return function(E,z){var C=0,B=0,m=0,F=null,k=null,I=null,o=null,A=E.width,v=E.height,s=E.left+A/2,q=E.top+v/2,H=E.bufferLeft,p=E.bufferRight,w=E.bufferTop,r=E.bufferBottom,l=undefined,u=undefined,G=g,n=this.cameraLogicAABB,D=this.cameraCollisionAABB,t=null;A+=H+p;v+=w+r;if(this.updateLiveList||!n.matches(s,q,A,v)){n.setAll(s,q,A,v);if(this.updateLiveList||!D.contains(n)){this.updateLiveList=false;k=this.allEntitiesLive;k.length=0;o=this.solidEntitiesLive;o.length=0;I=this.softEntitiesLive;I.length=0;groups=this.groupsLive;groups.length=0;m=this.allEntities.length;for(C=0;C<m;C++){u=this.allEntities[C];if(u.alwaysOn||u.checkCollision||G(u.getAABB(),n)){u.checkCollision=false;k[k.length]=u;t=u.collisionTypes;if(u!==this.owner){for(B=0;B<t.length;B++){if(u.solidCollisions[t[B]].length){o[o.length]=u;break}}}for(B=0;B<t.length;B++){if(u.softCollisions[t[B]].length){I[I.length]=u;break}}if(u.collisionGroup){groups.push(u)}}}groups.sort(j);D.setAll(s,q,A+H+p,v+w+r);for(C in this.entitiesByType){l=this.entitiesByType[C];F=this.entitiesByTypeLive[C];F.length=0;m=l.length;for(B=0;B<m;B++){u=l[B];if(u.alwaysOn||G(u.getAABB(),D)){F[F.length]=u}}}}}}})(),prepareCollisions:function(l){var k=null;this.nonColliders.length=0;for(var j=this.allEntitiesLive.length-1;j>-1;j--){k=this.allEntitiesLive[j];k.triggerEvent("prepare-for-collision",l);if(!k.collides){this.nonColliders.push(k)}}},resolveNonCollisions:function(m){var k=null,l=f;l.relative=false;for(var j=this.nonColliders.length-1;j>-1;j--){k=this.nonColliders[j];l.x=k.x;l.y=k.y;k.trigger("relocate-entity",l)}},checkGroupCollisions:(function(){var j=function(m,p,n,o,k,r,q,l){c.entity=p;c.myType=n;c.type=o;c.x=k;c.y=r;c.direction=l;c.hitType=q;m.triggerEvent("hit-by-"+o,c);if(p){c.entity=m;c.type=n;c.myType=o;c.x=-k;c.y=-r;c.direction=l.getInverse();c.hitType=q;p.triggerEvent("hit-by-"+n,c)}};return function(){var m=this.groupsLive;for(var k=m.length-1;k>-1;k--){if(m[k].collisionGroup.getSize()>1){e.reset();h(f);f=this.checkSolidEntityCollision(m[k],m[k].collisionGroup,e,f);for(var l=0;l<e.xCount;l++){messageData=e.getXEntry(l);j(messageData.thisShape.owner,messageData.thatShape.owner,messageData.thisShape.collisionType,messageData.thatShape.collisionType,messageData.direction,0,"solid",messageData.vector)}for(l=0;l<e.yCount;l++){messageData=e.getYEntry(l);j(messageData.thisShape.owner,messageData.thatShape.owner,messageData.thisShape.collisionType,messageData.thatShape.collisionType,0,messageData.direction,"solid",messageData.vector)}}}}})(),checkSolidCollisions:(function(){var j=function(m,p,n,o,k,r,q,l){c.entity=p;c.myType=n;c.type=o;c.x=k;c.y=r;c.direction=l;c.hitType=q;m.triggerEvent("hit-by-"+o,c);if(p){c.entity=m;c.type=n;c.myType=o;c.x=-k;c.y=-r;c.direction=l.getInverse();c.hitType=q;p.triggerEvent("hit-by-"+n,c)}};return function(){var m=null,n=this.solidEntitiesLive;for(var k=n.length-1;k>-1;k--){e.reset();h(f);f=this.checkSolidEntityCollision(n[k],n[k],e,f);for(var l=0;l<e.xCount;l++){m=e.getXEntry(l);j(m.thisShape.owner,m.thatShape.owner,m.thisShape.collisionType,m.thatShape.collisionType,m.direction,0,"solid",m.vector)}for(l=0;l<e.yCount;l++){m=e.getYEntry(l);j(m.thisShape.owner,m.thatShape.owner,m.thisShape.collisionType,m.thatShape.collisionType,0,m.direction,"solid",m.vector)}}}})(),checkSolidEntityCollision:function(u,v,r,x){var w=0,n=0,o=x,l=u.x-u.previousX,j=u.y-u.previousY,t=null,q=0,p=0,m=Infinity,z=Infinity,k=v.getCollisionTypes(),y=false;if(v.getSolidEntities){y=v.getSolidEntities()}o.x=u.x;o.y=u.y;if(l||j){if(u.bullet){for(var s in k){t=v.getAABB(k[s]);m=Math.min(m,t.width);z=Math.min(z,t.height)}w=Math.ceil(Math.max(Math.abs(l)/m,Math.abs(j)/z));w=Math.min(w,100);q=l/w;p=j/w}else{w=1;q=l;p=j}for(n=0;n<w;n++){v.prepareCollision(u.previousX+q,u.previousY+p);o.x=u.x;o.y=u.y;o=this.processCollisionStep(u,v,y,r,o,q,p,k);if((o.x===u.previousX)&&(o.y===u.previousY)){v.relocateEntity(o.x,o.y,r);break}else{v.relocateEntity(o.x,o.y,r)}}}return o},processCollisionStep:(function(){var j=new b.AABB(),k=function(m,l,p,r,q){var o=p.getAABB(r);if(p===m){return false}else{if(p.jumpThrough&&(l.bottom>o.top)){return false}else{if(m.jumpThrough&&(o.bottom>l.top)){return false}else{if(q){for(var n=0;n<q.length;n++){if(p===q[n]){return false}}}}}}return true};return function(G,o,F,r,E,I,H,L){var m=false;var l=[];var v=null;var K=null;var A=null;var p=null;var B="";var t=null;var D=this.getWorldEntities();var J=null;var n=this.getWorldTerrain(),w=o.getSolidCollisions();if(!o.jumpThrough||(H>=0)){for(var C=0;C<L.length;C++){l[C]=[];A=L[C];v=o.getPreviousAABB(A);K=o.getAABB(A);j.reset();j.include(K);j.include(v);for(var u=0;u<w[A].length;u++){B=w[A][u];if(D[B]){J=D[B];for(var s=0;s<J.length;s++){p=J[s];if(k(G,v,p,B,F)&&(g(j,p.getAABB(B)))){t=p.getShapes(B);for(var x=0;x<t.length;x++){l[C].push(t[x])}m=true}}}else{if(n&&(B==="tiles")){t=n.getTileShapes(j,v);for(var x=0;x<t.length;x++){l[C].push(t[x]);m=true}}}}}if(m){E=this.resolveCollisionPosition(G,o,E,l,r,L,I,H)}}return E}})(),resolveCollisionPosition:(function(){var j=new b.CollisionData();return function(q,r,n,s,p,l,m,k){if(m!=0){for(var o=0;o<l.length;o++){j.clear();j=this.findMinAxisMovement(q,r,l[o],"x",s[o],j);if(j.occurred){p.tryToAddX(j)}}}if(p.xCount>0){j.copy(p.getXEntry(0));n.x=q.previousX+j.deltaMovement*j.direction}else{n.x=q.x}r.movePreviousX(n.x);if(k!=0){for(var o=0;o<l.length;o++){j.clear();j=this.findMinAxisMovement(q,r,l[o],"y",s[o],j);if(j.occurred){p.tryToAddY(j)}}}if(p.yCount>0){j.copy(p.getYEntry(0));n.y=q.previousY+j.deltaMovement*j.direction}else{n.y=q.y}return n}})(),findMinAxisMovement:(function(){var j=new b.CollisionData();return function(q,r,m,l,s,p){var k=r.getShapes(m);var o=r.getPrevShapes(m);for(var n=0;n<k.length;n++){j.clear();j=this.findMinShapeMovementCollision(o[n],k[n],l,s,j);if(j.occurred&&!p.occurred){p.copy(j)}else{if(j.occurred&&p.occurred&&(j.deltaMovement<p.deltaMovement)){p.copy(j)}}}return p}})(),findMinShapeMovementCollision:(function(){var k=function(r,q,l,n,p,o,m){r.occurred=true;r.direction=q;r.position=l;r.deltaMovement=Math.abs(l-n);r.aABB=o.getAABB();r.thisShape=p;r.thatShape=o;r.vector=m.copy()},j=(function(){var l=new b.Vector2D(),o={position:0,contactVector:l},r=function(t,s){return Math.sqrt(Math.pow(s,2)-Math.pow(t,2))},n=function(u,s,t){var v=u-s;return v-(v/Math.abs(v))*t},p=function(s,t,u){if(s==="x"){return u.halfWidth+t.halfWidth}else{if(s==="y"){return u.halfHeight+t.halfHeight}}},q=function(t,w,u,s,v){var x=0;if(t==="x"){if(w.y>=u.aABB.top&&w.y<=u.aABB.bottom){return u.aABB.halfWidth+w.radius}else{l.y=n(w.y,u.y,u.aABB.halfHeight);x=u.aABB.halfWidth+r(l.y,w.radius);if(s===w){l.x=-n(w.x-v*x,u.x,u.aABB.halfWidth)/2;l.y=-l.y}else{l.x=n(w.x,u.x-v*x,u.aABB.halfWidth)/2}l.normalize();return x}}else{if(t==="y"){if(w.x>=u.aABB.left&&w.x<=u.aABB.right){return u.aABB.halfHeight+w.radius}else{l.x=n(w.x,u.x,u.aABB.halfWidth);x=u.aABB.halfHeight+r(l.x,w.radius);if(s===w){l.x=-l.x;l.y=-n(w.y-v*x,u.y,u.aABB.halfWidth)/2}else{l.y=n(w.y,u.y-v*x,u.aABB.halfWidth)/2}l.normalize();return x}}}},m=function(s,u,t){if(s==="x"){return r(u.y-t.y,u.radius+t.radius)}else{if(s==="y"){return r(u.x-t.x,u.radius+t.radius)}}};return function(s,v,u,t){if(u.type=="rectangle"){if(t.type=="rectangle"){o.position=t[s]-v*p(s,u.getAABB(),t.getAABB());l.x=0;l.y=0;l[s]=v;return o}else{if(t.type=="circle"){l.x=0;l.y=0;l[s]=v;o.position=t[s]-v*q(s,t,u,u,v);return o}}}else{if(u.type=="circle"){if(t.type=="rectangle"){l.x=0;l.y=0;l[s]=v;o.position=t[s]-v*q(s,u,t,u,v);return o}else{if(t.type=="circle"){o.position=t[s]-v*m(s,u,t);l.x=t.x-u.x;l.y=t.y-u.y;l[s]=t[s]-o.position;l.normalize();return o}}}}}})();return function(o,r,n,s,l){var w=o[n];var u=r[n];var m=o;var t=(w<u)?1:-1;var q=u;var v=null;var x=u;if(w!=u){if(n==="x"){m.moveX(u)}else{if(n==="y"){m.moveY(u)}}for(var p=0;p<s.length;p++){q=u;if(g(m.getAABB(),s[p].getAABB())){if(d(m,s[p])){v=j(n,t,m,s[p]);q=v.position;if(t>0){if(q<x){if(q<w){q=w}x=q;k(l,t,x,w,r,s[p],v.contactVector)}}else{if(q>x){if(q>w){q=w}x=q;k(l,t,x,w,r,s[p],v.contactVector)}}}}}}return l}})(),checkSoftCollisions:function(l){var j=0,k=this;for(j=0;j<this.softEntitiesLive.length;j++){this.checkEntityForSoftCollisions(this.softEntitiesLive[j],this.getWorldEntities(),function(m){k.softEntitiesLive[j].trigger("hit-by-"+m.type,m)})}},checkEntityForSoftCollisions:function(t,B,A){var C=undefined,D=c,p=0,o=0,n=0,w=0,v=0,m=g,s=null,r=null,x=null,l=null,u=null,q=false;D.x=0;D.y=0;for(p=0;p<t.collisionTypes.length;p++){s=t.softCollisions[t.collisionTypes[p]];for(w=0;w<s.length;w++){x=s[w];r=B[x];if(r){for(v=0;v<r.length;v++){q=false;C=r[v];if((C!==t)&&(m(t.getAABB(t.collisionTypes[p]),C.getAABB(x)))){l=t.getShapes(t.collisionTypes[p]);u=C.getShapes(x);for(o=0;o<l.length;o++){for(n=0;n<u.length;n++){if(d(l[o],u[n])){D.entity=C;D.type=x;D.myType=t.collisionTypes[p];D.shape=u[n];D.hitType="soft";A(D);q=true}if(q){break}}if(q){break}}}}}}}},destroy:function(){this.allEntities.length=0;this.allEntitiesLive.length=0;this.softEntitiesLive.length=0;this.solidEntitiesLive.length=0;for(var j in this.entitiesByType){this.entitiesByType[j].length=0}}},publicMethods:{getWorldEntities:function(){return this.entitiesByTypeLive},getWorldTerrain:function(){return this.terrain},getEntityCollisions:function(j,l){var k=[];this.checkEntityForSoftCollisions(j,l||this.entitiesByTypeLive,function(o){var m="",n={};for(m in o){n[m]=o[m]}k.push(n)});return k}}})})();(function(){var c=function(d){d.window.viewportTop=d.element.offsetTop;d.window.viewportLeft=d.element.offsetLeft;d.window.viewportWidth=d.element.offsetWidth||d.worldWidth;d.window.viewportHeight=d.element.offsetHeight||d.worldHeight;if(d.scaleWidth){d.world.viewportWidth=d.window.viewportWidth/Math.ceil(d.window.viewportWidth/d.scaleWidth)}if(!d.stretch||d.scaleWidth){d.world.viewportHeight=d.window.viewportHeight*d.world.viewportWidth/d.window.viewportWidth}d.worldPerWindowUnitWidth=d.world.viewportWidth/d.window.viewportWidth;d.worldPerWindowUnitHeight=d.world.viewportHeight/d.window.viewportHeight;d.windowPerWorldUnitWidth=d.window.viewportWidth/d.world.viewportWidth;d.windowPerWorldUnitHeight=d.window.viewportHeight/d.world.viewportHeight;d.viewportUpdate=true};return b.createComponentClass({id:"camera",constructor:function(d){this.entities=[];this.stretch=d.stretch||false;this.transitionX=d.transitionX||d.transition;this.transitionY=d.transitionY||d.transition;if(isNaN(this.transitionX)){this.transitionX=400}if(isNaN(this.transitionY)){this.transitionY=600}this.threshold=d.threshold||1;this.element=null;this.window={viewportTop:0,viewportLeft:0,viewportWidth:0,viewportHeight:0};this.world={viewportWidth:d.width||0,viewportHeight:d.height||0,viewportLeft:d.left||0,viewportTop:d.top||0};this.message={viewportWidth:0,viewportHeight:0,viewportLeft:0,viewportTop:0,scaleX:0,scaleY:0};this.scaleWidth=d.scaleWidth||0;this.worldIsLoaded=false;this.worldWidth=d.worldWidth||0;this.worldHeight=d.worldHeight||0;this.following=undefined;this.state="static";this.bBBorderX=0;this.bBBorderY=0;this.bBInnerWidth=0;this.bBInnerHeight=0;this.setBoundingArea();this.lastLeft=this.world.viewportLeft;this.lastTop=this.world.viewportTop;this.forwardX=0;this.forwardY=0;this.averageOffsetX=0;this.averageOffsetY=0;this.offsetX=0;this.offsetY=0;this.forwardFollower={x:this.lastLeft,y:this.lastTop};this.lastFollow={entity:null,mode:null,offsetX:0,offsetY:0,begin:0};this.shakeOffsetX=0;this.shakeOffsetY=0;this.xMagnitude=0;this.yMagnitude=0;this.xWaveLength=0;this.yWaveLength=0;this.xShakeTime=0;this.yShakeTime=0;this.shakeTime=0;this.shakeIncrementor=0;this.direction=true;this.stationary=false;this.viewportUpdate=false},events:{load:function(){this.element=this.owner.canvas||this.owner.element||this.owner.rootElement;c(this)},"child-entity-added":function(e){var f=e.getMessageIds();for(var d=0;d<f.length;d++){if(f[d]=="camera-update"){this.entities.push(e);this.viewportUpdate=true;if(this.worldIsLoaded){e.trigger("camera-loaded",{width:this.worldWidth,height:this.worldHeight})}break}}},"child-entity-removed":function(e){var d=0;for(d in this.entities){if(this.entities[d]===e){this.entities.splice(d,1);break}}},"world-loaded":function(e){this.worldIsLoaded=true;this.worldWidth=this.owner.worldWidth=e.width;this.worldHeight=this.owner.worldHeight=e.height;if(e.camera){this.follow(e.camera)}for(var d=this.entities.length-1;d>-1;d--){this.entities[d].trigger("camera-loaded",e)}},tick:function(e){switch(this.state){case"following":if(this.followingFunction(this.following,e.delta)){this.viewportUpdate=true}break;case"static":default:break}if(this.viewportUpdate){this.viewportUpdate=false;this.stationary=false;if(this.shakeIncrementor<this.shakeTime){this.viewportUpdate=true;this.shakeIncrementor+=e.delta;this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime);if(this.shakeIncrementor<this.xShakeTime){this.shakeOffsetX=Math.sin((this.shakeIncrementor/this.xWaveLength)*(Math.PI*2))*this.xMagnitude}else{this.shakeOffsetX=0}if(this.shakeIncrementor<this.yShakeTime){this.shakeOffsetY=Math.sin((this.shakeIncrementor/this.yWaveLength)*(Math.PI*2))*this.yMagnitude}else{this.shakeOffsetY=0}}this.message.viewportLeft=this.world.viewportLeft+this.shakeOffsetX;this.message.viewportTop=this.world.viewportTop+this.shakeOffsetY;this.message.viewportWidth=this.world.viewportWidth;this.message.viewportHeight=this.world.viewportHeight;this.message.scaleX=this.windowPerWorldUnitWidth;this.message.scaleY=this.windowPerWorldUnitHeight;this.owner.trigger("camera-update",this.message);for(var d=this.entities.length-1;d>-1;d--){if(!this.entities[d].trigger("camera-update",this.message)){this.entities.splice(d,1)}}}else{if(!this.stationary){this.owner.trigger("camera-stationary",this.message);this.stationary=true}}if(this.lastFollow.begin){if(this.lastFollow.begin<new Date().getTime()){this.follow(this.lastFollow)}}},resize:function(){c(this)},relocate:function(d){if(this.move(d.x,d.y)){this.viewportUpdate=true}},orientationchange:function(){c(this)},follow:function(d){this.follow(d)},shake:function(e){var g=e.xMagnitude||0,d=e.yMagnitude||0,j=e.xFrequency||0,f=e.yFrequency||0,h=e.time||0;this.viewportUpdate=true;this.shakeOffsetX=0;this.shakeOffsetY=0;this.shakeIncrementor=0;this.xMagnitude=g;this.yMagnitude=d;if(j==0){this.xWaveLength=1;this.xShakeTime=0}else{this.xWaveLength=(1000/j);this.xShakeTime=Math.ceil(h/this.xWaveLength)*this.xWaveLength}if(f==0){this.yWaveLength=1;this.yShakeTime=0}else{this.yWaveLength=(1000/f);this.yShakeTime=Math.ceil(h/this.yWaveLength)*this.yWaveLength}this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{follow:function(d){if(d.time){if(!this.lastFollow.begin){this.lastFollow.entity=this.following;this.lastFollow.mode=this.mode;this.lastFollow.offsetX=this.offsetX;this.lastFollow.offsetY=this.offsetY}this.lastFollow.begin=new Date().getTime()+d.time}else{if(this.lastFollow.begin){this.lastFollow.begin=0}}this.mode=d.mode;switch(d.mode){case"locked":this.state="following";this.following=d.entity;this.followingFunction=this.lockedFollow;this.offsetX=d.offsetX||0;this.offsetY=d.offsetY||0;break;case"forward":this.state="following";this.followFocused=false;this.following=d.entity;this.lastLeft=d.entity.x||0;this.lastTop=d.entity.y||0;this.forwardX=d.movementX||(this.transitionX/10);this.forwardY=d.movementY||(this.transitionY/10);this.averageOffsetX=0;this.averageOffsetY=0;this.offsetX=d.offsetX||0;this.offsetY=d.offsetY||0;this.followingFunction=this.forwardFollow;break;case"bounding":this.state="following";this.following=d.entity;this.offsetX=d.offsetX||0;this.offsetY=d.offsetY||0;this.setBoundingArea(d.top,d.left,d.width,d.height);this.followingFunction=this.boundingFollow;break;case"static":default:this.state="static";this.following=undefined;this.followingFunction=undefined;if(d&&(typeof d.top==="number")&&(typeof d.left==="number")){this.move(d.left,d.top);this.viewportUpdate=true}break}if(d.begin){d.begin=0}},move:function(f,d){var e=this.moveLeft(f);e=this.moveTop(d)||e;return e},moveLeft:function(d){if(Math.abs(this.world.viewportLeft-d)>this.threshold){if(this.worldWidth&&this.worldWidth!=0&&this.worldWidth<this.world.viewportWidth){this.world.viewportLeft=(this.worldWidth-this.world.viewportWidth)/2}else{if(this.worldWidth&&this.worldWidth!=0&&(d+this.world.viewportWidth>this.worldWidth)){this.world.viewportLeft=this.worldWidth-this.world.viewportWidth}else{if(this.worldWidth&&this.worldWidth!=0&&(d<0)){this.world.viewportLeft=0}else{this.world.viewportLeft=d}}}return true}return false},moveTop:function(d){if(Math.abs(this.world.viewportTop-d)>this.threshold){if(this.worldHeight&&this.worldHeight!=0&&this.worldHeight<this.world.viewportHeight){this.world.viewportTop=(this.worldHeight-this.world.viewportHeight)/2}else{if(this.worldHeight&&this.worldHeight!=0&&(d+this.world.viewportHeight>this.worldHeight)){this.world.viewportTop=this.worldHeight-this.world.viewportHeight}else{if(this.worldHeight&&this.worldHeight!=0&&(d<0)){this.world.viewportTop=0}else{this.world.viewportTop=d}}}return true}return false},lockedFollow:function(e,d,h){var m=e.x-(this.world.viewportWidth/2),l=e.y-(this.world.viewportHeight/2),k=(this.transitionX?Math.min(d/this.transitionX,1):1),g=1-k,j=(this.transitionY?Math.min(d/this.transitionY,1):1),f=1-j;return this.move(k*m+g*this.world.viewportLeft,j*l+f*this.world.viewportTop)},forwardFollow:function(f,h){var e=this.forwardFollower,j=15/h,g=false,d=f.x+this.offsetX,k=f.y+this.offsetY;if(this.followFocused&&(this.lastLeft===d)&&(this.lastTop===k)){return this.lockedFollow(e,h)}else{this.averageOffsetX*=0.9;this.averageOffsetY*=0.9;this.averageOffsetX+=0.1*(d-this.lastLeft)*j;this.averageOffsetY+=0.1*(k-this.lastTop)*j;if(Math.abs(this.averageOffsetX)>(this.world.viewportWidth/(this.forwardX*2))){this.averageOffsetX=0}if(Math.abs(this.averageOffsetY)>(this.world.viewportHeight/(this.forwardY*2))){this.averageOffsetY=0}e.x=this.averageOffsetX*this.forwardX+d;e.y=this.averageOffsetY*this.forwardY+k;this.lastLeft=d;this.lastTop=k;g=this.lockedFollow(e,h);if(!this.followFocused&&!g){this.followFocused=true}return g}},setBoundingArea:function(g,f,e,d){this.bBBorderY=(typeof g!=="undefined")?g:this.world.viewportHeight*0.25;this.bBBorderX=(typeof f!=="undefined")?f:this.world.viewportWidth*0.4;this.bBInnerWidth=(typeof e!=="undefined")?e:this.world.viewportWidth-(2*this.bBBorderX);this.bBInnerHeight=(typeof d!=="undefined")?d:this.world.viewportHeight-(2*this.bBBorderY)},boundingFollow:function(f,h){var g=null,e=null,d=(this.transitionX?Math.min(h/this.transitionX,1):1),l=1-d,k=(this.transitionY?Math.min(h/this.transitionY,1):1),j=1-k;if(f.x>this.world.viewportLeft+this.bBBorderX+this.bBInnerWidth){g=f.x-(this.bBBorderX+this.bBInnerWidth)}else{if(f.x<this.world.viewportLeft+this.bBBorderX){g=f.x-this.bBBorderX}}if(f.y>this.world.viewportTop+this.bBBorderY+this.bBInnerHeight){e=f.y-(this.bBBorderY+this.bBInnerHeight)}else{if(f.y<this.world.viewportTop+this.bBBorderY){e=f.y-this.bBBorderY}}if(typeof g!=="null"){g=this.moveLeft(d*g+l*this.world.viewportLeft)}if(typeof e!=="null"){e=this.moveTop(k*e+j*this.world.viewportTop)}return g||e},windowToWorld:function(d){var e=[];e[0]=Math.round((d[0]-this.window.viewportLeft)*this.worldPerWindowUnitWidth);e[1]=Math.round((d[1]-this.window.viewportTop)*this.worldPerWindowUnitHeight);return e},worldToWindow:function(e){var d=[];d[0]=Math.round((e[0]*this.windowPerWorldUnitWidth)+this.window.viewportLeft);d[1]=Math.round((e[1]*this.windowPerWorldUnitHeight)+this.window.viewportTop);return d},destroy:function(){this.entities.length=0}}})})();(function(){var c=navigator.userAgent.toLowerCase(),d=(c.indexOf("android 4.1")>-1)||(c.indexOf("android 4.2")>-1)||false,e=window.devicePixelRatio||1;return b.createComponentClass({id:"handler-render-createjs",constructor:function(g){var f=this;this.canvas=this.owner.canvas=document.createElement("canvas");this.canvas.id=g.canvasId||"";this.owner.canvasParent=null;if(this.owner.element){this.owner.canvasParent=this.owner.element;this.owner.element.appendChild(this.canvas)}else{this.owner.canvasParent=this.owner.rootElement;this.owner.rootElement.appendChild(this.canvas);this.owner.element=this.canvas}this.stage=new createjs.Stage(this.canvas);if(g.autoClear!==true){this.stage.autoClear=false}if(g.acceptInput){if(g.acceptInput.click||g.acceptInput.touch){this.setupInput(g.acceptInput.touch,g.acceptInput.movement,g.acceptInput.camera)}}this.camera={left:0,top:0,width:0,height:0,bufferLeft:g.bufferLeft||g.bufferWidth||g.buffer||-1,bufferRight:g.bufferRight||g.bufferWidth||g.buffer||-1,bufferTop:g.bufferTop||g.bufferHeight||g.buffer||-1,bufferBottom:g.bufferBottom||g.bufferHeight||g.buffer||-1};this.timeElapsed={name:"Render",time:0};this.renderMessage={delta:0,stage:this.stage};this.handleChildren=true;this.extraContent=false},events:{load:function(){var f=0,g=null;for(;f<this.owner.components.length;f++){if((this.owner.components[f]===this)||(this.owner.components[f].type.substring(0,14)==="handler-render")){g=this.owner.components[f]}}if(g!==this){this.handleChildren=false}else{this.addEventListener("handle-render-addition",function(h){var j="";if(!this.extraContent){this.extraContent={}}for(j in h){this.extraContent[j]=h[j]}})}},"child-entity-added":function(g){var f=this;g.triggerEvent("handle-render-load",{stage:f.stage,parentElement:f.owner.rootElement})},"pause-render":function(f){if(f&&f.time){this.paused=f.time}else{this.paused=-1}},"unpause-render":function(){this.paused=0},tick:(function(){var f=function(h,g){return h.z-g.z};return function(l){var h="",m=undefined,k=new Date().getTime(),j=this.renderMessage;j.delta=l.delta;if(this.paused>0){this.paused-=l.delta;if(this.paused<0){this.paused=0}}if(this.handleChildren){if(this.extraContent){for(h in this.extraContent){j[h]=this.extraContent[h]}}if(this.owner.triggerEventOnChildren){this.owner.triggerEventOnChildren("handle-render",j)}if(this.extraContent){for(h in this.extraContent){delete this.extraContent[h];delete j[h]}}}else{this.owner.triggerEvent("handle-render-addition",j)}if(this.stage){for(var g=this.stage.children.length-1;g>-1;g--){m=this.stage.children[g];if(m.hidden){if(m.visible){m.visible=false}}else{if(m.name!=="entity-managed"){if((m.x>=this.camera.x-this.camera.bufferLeft)&&(m.x<=this.camera.x+this.camera.width+this.camera.bufferRight)&&(m.y>=this.camera.y-this.camera.bufferTop)&&(m.y<=this.camera.y+this.camera.height+this.camera.bufferBottom)){if(!m.visible){m.visible=true}}else{if(m.visible){m.visible=false}}}}if(m.visible){if(m.paused&&!this.paused){m.paused=false}else{if(this.paused){m.paused=true}}}}if(this.stage.reorder){this.stage.reorder=false;this.stage.sortChildren(f)}this.timeElapsed.name="Render-Prep";this.timeElapsed.time=new Date().getTime()-k;b.game.currentScene.trigger("time-elapsed",this.timeElapsed);k+=this.timeElapsed.time;this.stage.update(l);if(d&&this.stage.autoClear){this.canvas.style.opacity=0.99;setTimeout(function(){this.canvas.style.opacity=1},0)}this.timeElapsed.name="Render";this.timeElapsed.time=new Date().getTime()-k;b.game.currentScene.trigger("time-elapsed",this.timeElapsed)}}})(),"camera-update":function(f){this.camera.x=f.viewportLeft;this.camera.y=f.viewportTop;this.camera.width=f.viewportWidth;this.camera.height=f.viewportHeight;if(this.camera.bufferLeft==-1){this.camera.bufferLeft=this.camera.width/12}if(this.camera.bufferRight==-1){this.camera.bufferRight=this.camera.width/12}if(this.camera.bufferTop==-1){this.camera.bufferTop=this.camera.width/12}if(this.camera.bufferBottom==-1){this.camera.bufferBottom=this.camera.width/12}this.canvas.width=this.canvas.offsetWidth*e;this.canvas.height=this.canvas.offsetHeight*e;this.stage.setTransform(-f.viewportLeft*f.scaleX*e,-f.viewportTop*f.scaleY*e,f.scaleX*e,f.scaleY*e);if(this.moveMouse){this.moveMouse(f)}}},methods:{setupInput:(function(){return function(p,k,o){var q=this,f=null,n=0,m=0,j=function(r){f=r;n=(r.stageX/e)/q.stage.scaleX+q.camera.x;m=(r.stageY/e)/q.stage.scaleY+q.camera.y},g=function(r){j(r);q.owner.trigger("mousedown",{event:r.nativeEvent,x:n,y:m,entity:q.owner});if(o){q.moveMouse=function(){j(f);q.owner.trigger("mousemove",{event:r.nativeEvent,x:n,y:m,entity:q.owner})}}},h=function(r){j(r);q.owner.trigger("mouseup",{event:r.nativeEvent,x:n,y:m,entity:q.owner});if(o){q.moveMouse=null}},l=function(r){j(r);if(k||r.nativeEvent.which||r.nativeEvent.touches){q.owner.trigger("mousemove",{event:r.nativeEvent,x:n,y:m,entity:q.owner})}};if(p&&!this.stage.__touch){createjs.Touch.enable(this.stage)}this.stage.addEventListener("stagemousedown",g);this.stage.addEventListener("stagemouseup",h);this.stage.addEventListener("stagemousemove",l);this.removeStageListeners=function(){this.stage.removeEventListener("stagemousedown",g);this.stage.removeEventListener("stagemouseup",h);this.stage.removeEventListener("stagemousemove",l)}}})(),destroy:function(){if(this.removeStageListeners){this.removeStageListeners()}this.stage=undefined;this.owner.canvasParent.removeChild(this.canvas);this.owner.canvasParent=null;this.owner.element=null;this.canvas=undefined}},publicMethods:{getWorldPointFromScreen:function(f){return{x:(f.x*e)/this.stage.scaleX+this.camera.x,y:(f.y*e)/this.stage.scaleY+this.camera.y}}}})})();(function(){var k=2;var f=7;var s={mangrove:{mangrove:{"mangrove-trees":0.8,goanna:0.2,monkey:0.2},mudskipper:{"mangrove-trees":0.4},goanna:{mudskipper:1.7},monkey:{"mangrove-trees":1}},forest:{forest:{"forest-trees":0.8,orangutan:0.2},bat:{"durian-tree":0.5,"forest-trees":0.5},"durian-tree":{bat:0.5},orangutan:{"durian-fruit":0.8,"forest-trees":0.5}},lake:{lake:{crocodile:0.2,stork:0.2},crocodile:{fish:1.7},stork:{fish:1.7}}},t=true,c={"forest-trees":{forest:true},fish:{lake:true},"mangrove-trees":{mangrove:true},goanna:{mangrove:true,shoreline:true,forest:true},forest:{mangrove:true,shoreline:true,lake:true,empty:true},mangrove:{forest:true,shoreline:true,lake:true,empty:true},"orangutan-female":{mangrove:true,shoreline:true,forest:true},crocodile:{mangrove:true,shoreline:true,forest:true,lake:true},stork:{mangrove:true,shoreline:true,forest:true,lake:true},mudskipper:{mangrove:true,shoreline:true,forest:true},lake:{mangrove:true,forest:true,shoreline:true,empty:true},bat:{mangrove:true,shoreline:true,forest:true,lake:true},"durian-tree":{forest:true},monkey:{mangrove:true,shoreline:true,forest:true},"orangutan-male":{mangrove:true,shoreline:true,forest:true}},n={small:{lake:0},medium:{forest:0,lake:0},large:{forest:0,lake:0,mangrove:0}},o=function(x){for(var w=x.length-1;w>0;w--){var v=Math.floor(Math.random()*(w+1));var u=x[w];x[w]=x[v];x[v]=u}return x},j=["Hacker removes ","Disease removes","Buzz and Delete removes","Fire removes","Hurricane removes","Cyclone removes","Hacker flips","Earthquake changes"],h=["hacker","disease","buzz-and-delete","fire","d","cyclone","terrain-hacker","earthquake"],q=[],m=["orangutan","bat","stork","crocodile","fish","goanna","mudskipper","monkey","forest-trees","mangrove-trees","durian-tree"],p=[],r=function(){var v=this,u=null,w=null;this.fishUsed=true;this.cursor.state.valid=false;this.cursor.state.invalid=false;this.paused=true;this.showTimer=false;this.currentStepTime=0;v.owner.triggerEvent("el-hide-timer");v.owner.triggerEventOnChildren("pause");v.owner.triggerEventOnChildren("quiet");v.owner.triggerEvent("disable-nav");v.inez.triggerEvent("begin-script",{getScript:function(){var x={script:"",delay:-1};var z=[];var y="";if(v.mapSize=="small"){z=[0,1,2]}else{if(v.mapSize=="medium"){if(v.score==3){p=["bat","forest-trees"]}if(v.score<5){z=[0,1,2,5]}else{z=[0,1,2,5,6]}}else{if(v.score<8){z=[0,1,2,5,6]}else{z=[0,1,2,5,6,7]}}}v.disasterPause=true;v.inezActive=true;v.disasterActive=true;if(!q.length){q=o(z.slice())}u=q.splice(0,1)[0];while(!w){switch(u){case 0:if(v.score<=4){y=v.pickTargetOrganism(p,["orangutan","bat","stork","crocodile","goanna","monkey"])}else{y=v.pickTargetOrganism(p,["orangutan","bat","stork","crocodile","goanna","mudskipper","monkey"],2)}if(y){w=v.createHacker(y)}break;case 1:if(v.score<=6){y=v.pickTargetOrganism(p,["orangutan","bat","stork","crocodile","goanna","monkey"])}else{y=v.pickTargetOrganism(p,["orangutan","bat","stork","crocodile","fish","goanna","mudskipper","monkey"],2)}if(y){x.delay=3000;w=v.createDisease(h[u],y)}break;case 2:x.delay=2000;w=v.createBuzzAndDelete();break;case 3:case 4:case 5:if(v.score<=7){y=v.pickTargetOrganism(p,["mangrove-trees","forest-trees"])}else{y=v.pickTargetOrganism(p,["durian-tree","mangrove-trees","forest-trees"])}if(y){w=v.createCyclone(y)}break;case 6:w=v.createTerrainHacker();break;case 7:x.delay=2000;w=v.createEarthquake();v.disasterActive=false;break}if(!w){u+=1;if(u>z[z.length-1]){u=0}}}console.log("Pain #"+u+": "+j[u]+" "+w.plural);v.disasterOrganism=w.singular;x.script=h[u]+"-"+w.plural;return x},onFinished:function(){v.inezActive=false}})},l=0,e=[],g=function(x){var w=null;if(this.tutStage>=0){l+=x.delta}switch(this.tutStage){case 0:if(l>10000){if(!e.length){var u=[this.organisms.fish[0],this.organisms.stork[0],this.organisms.crocodile[0]];for(var v=0;v<u.length;v++){if(!u[v].tutorialized){w={};w[u[v].type]=true;e.push(this.owner.addEntity(new b.Entity(b.game.settings.entities.circle,{properties:{x:u[v].x,y:u[v].y,z:u[v].z+0.01,orientation:u[v].orientation,state:w}})))}}}}else{if(e.length){for(var v=0;v<e.length;v++){e[v].triggerEvent("pop")}e.length=0}}break;case 1:this.tutStage=2;break;case 2:if(e.length){for(var v=0;v<e.length;v++){e[v].triggerEvent("pop")}e.length=0}break}},d=function(){var u=this;this.cursor.state.valid=false;this.cursor.state.invalid=false;this.paused=true;this.showTimer=false;this.currentStepTime=0;u.owner.triggerEvent("el-hide-timer");u.owner.triggerEventOnChildren("pause",{tutorial:true});u.owner.triggerEvent("disable-nav");u.tutorialInez.triggerEvent("tutorial-one");for(i=0;i<this.organisms.fish.length;i++){this.organisms.fish[i].state.loop=true}this.createDisaster=r};return b.createComponentClass({id:"mother-nature",constructor:function(u){this.topLeftTile={x:0,y:0};this.camera=null;this.cursor=null;this.disasterTime=120000;this.organisms={};this.rebalance=true;this.data=null;this.paused=false;this.helps={forest:[],lake:[],mangrove:[]};this.popupMajorZOffset=0;this.bubbles=false;this.worldWidth=0;this.worldHeight=0;this.disasterOrganism="";this.disasterPause=false;this.inezActive=false;this.disasterActive=false;this.mapSize="small";this.currentStepTime=0;this.nextStepTime=10000;this.stepLength=8200;this.deal=false;this.showTimer=false;this.bestMap="small";this.score=0;this.playTutorial=1;this.safetyCount=-6000;this.recycleTime=10000;this.recycleCount=0;this.isCardInPlay=false;this.kkTrees=0;this.kkFish=0;this.kkEnviro=false;this.wasEarthquake=false;this.removefromNode=null;this.removeInTicks=0;this.preDisaster=true;this.isBalanced=true},events:{load:function(){this.cursor=this.owner.addEntity(new b.Entity(b.game.settings.entities.cursor,{}));q=[]},"world-loaded":function(u){this.worldWidth=u.width;this.worldHeight=u.height},"scene-loaded":function(x){var v=0,u=x.size||"large",w=localStorage.getItem("cyberchase-re");if(w){w=JSON.parse(w)}if(w){this.bestMap=w.size||"small";if(x.keepPlaying){if(w.size){u=w.size}this.score=w.score||0;this.playTutorial=0;this.owner.triggerEvent("update-score","Rescues: "+this.score)}if(w.tutorial){if(w.score===k+1){this.playTutorial=2}else{if(w.score===f+1){this.playTutorial=3}else{this.playTutorial=0}}}}this.health=n[u];this.data=x||{};this.data.size=u;this.data.score=0;this.mapSize=u;if((this.playTutorial===1)&&(u==="small")){this.tutorialInez=this.owner.addEntity(new b.Entity(b.game.settings.entities["vo-inez"],{properties:{x:1150,y:677,z:2000,scaleX:0.75,scaleY:0.75}}));this.safetyCount=1000;this.createDisaster=d;this.tutStage=-1;this.tutorialTick=g;this.bubbles=true;this.owner.triggerEvent("show-skip-button")}else{this.createDisaster=r}},"scene-live":function(){if(!this.bubbles){this.owner.triggerEvent("set-up-bubbles")}if(this.playTutorial===2){this.playTutorial=0;this.inez.triggerEvent("tutorial-two");this.safetyCount=-20000;this.currentStepTime=-20000}else{if(this.playTutorial===3){this.playTutorial=0;this.inez.triggerEvent("tutorial-three");this.safetyCount=-24500;this.currentStepTime=-24500}}},"log-need":function(u){if(this.inez){this.inez.triggerEvent("log-need",u)}},"pause-environment":function(){this.forcePaused=true;this.owner.triggerEvent("pause-logic");this.owner.triggerEvent("pause-render")},"unpause-environment":function(){this.forcePaused=false;this.owner.triggerEvent("unpause-logic");this.owner.triggerEvent("unpause-render")},tick:function(u){if(this.forcePaused){return}if(!this.paused){if(this.isNextStep(u.delta)){this.handleStep()}if(!this.showTimer){if((this.disasterTime-this.currentStepTime)<60000){this.showTimer=true;this.owner.triggerEvent("el-show-timer",2);this.inez.triggerEvent("timer-prompt")}}else{this.owner.triggerEvent("el-update-time",(this.disasterTime-this.currentStepTime)/60000);if(this.disasterTime<this.currentStepTime){if(this.isBalanced){this.startDisasterRecycle()}else{this.owner.triggerEvent("play-times-up");this.paused=true;this.owner.triggerEvent("save-level",{score:this.score,lost:true});this.data.winning=false;b.game.loadScene("results","fade-to-black",this.data)}}}}else{if(this.disasterPause){if(this.removeFromNode&&this.removeInTicks>0){this.removeInTicks--;if(this.removeInTicks<=0){this.owner.triggerEvent("remove-organisms-in-radius",this.removeFromNode);this.removeFromNode=null}}if(!this.disasterActive&&!this.inezActive){if(this.wasEarthquake){this.wasEarthquake=false;this.owner.triggerEvent("el-stop-following")}this.disasterPause=false;this.currentStepTime=0;this.nextStepTime=0;this.paused=false;this.owner.triggerEventOnChildren("unpause");this.disasterOrganism=""}}}if(this.tutorialTick){this.tutorialTick(u)}if(this.rebalance&&!this.paused&&!this.preDisaster){this.rebalance=false;this.isBalanced=this.checkBalance();if(!this.isBalanced){this.safetyCount=0}}else{if(!this.paused&&this.isBalanced){if(this.inez&&!this.inez.blockEnding){this.safetyCount+=u.delta}if(!this.isCardInPlay&&(this.safetyCount>2000)){this.startDisasterRecycle()}}}if(this.recycleCount>0){this.recycleCount-=u.delta;if(this.recycleCount<=0){this.recycleCount=0;this.finishDisasterRecycle()}}},"disaster-finished":function(){this.disasterActive=false;if(this.handleTutorialDisasterEnd){this.handleTutorialDisasterEnd=false;this.inez.triggerEvent("tutorial-resource");this.owner.triggerEvent("deal",{force:["fish","stork","fish"]});this.owner.triggerEvent("enable-nav")}},"add-organism":(function(){var v=0,u=function(w){return Math.max(0,Math.min(1,Math.floor(w*2)/2))};return function(B){var x=null,C=null,E=null,I=null,D=false,y=null;if(!B.nodeId){I=this.owner.getWorldPointFromScreen(B);I.x=Math.floor(I.x/225);I.y=Math.floor(I.y/225);B.nodeId="node-("+I.x+","+I.y+")";D=true;y={};for(var F in this.health){y[F]=u(this.health[F])}if(b.game.kartKingdom){if((B.type==="forest-trees")||(B.type==="durian-tree")||(B.type==="mangrove-trees")){this.kkTrees+=1;if(this.kkTrees===20){b.game.kartKingdom.event("57f60eb3-498d-4043-8ea9-36382eb78567")}}else{if((B.type==="fish")||(B.type==="mudskipper")){this.kkFish+=1;if(this.kkFish===20){b.game.kartKingdom.event("adf948bf-a83d-4adc-a6cb-35614ad3e323")}}}}}x=this.owner.getNode(B.nodeId);if((B.type==="forest")||(B.type==="mangrove")||(B.type==="lake")){this.owner.triggerEvent("flip-tile",{type:B.type,node:x});if(b.game.kartKingdom&&!this.kkEnviro){var H=false,w=this.owner.components[10].map;for(var A=0;A<w.length;A++){if(w[A].biotope==="empty"){H=true;break}}if(!H){this.kkEnviro=true;b.game.kartKingdom.event("97243fed-a67e-4cd1-92b1-2164436402f3")}}}else{if((x&&x.positions&&x.positions[B.type])){C=x.isSpaceAvailable(B.type);if(!C){return}}var z=false;if((this.mapSize==="small")&&(B.type==="stork")){z=true}E=this.owner.addEntity(new b.Entity(b.game.settings.entities[B.type],{properties:{nodeId:B.nodeId,nodeOffset:C,noHomeStork:z}}));this.owner.triggerEvent("entity-created",E);if(B.fromCard){E.triggerEvent("sfx")}if(D){this.rebalance=false;this.isBalanced=this.checkBalance();if(!this.isBalanced){this.safetyCount=0}var G=false;for(var F in this.health){if(y[F]>u(this.health[F])){G=true;break}}if(G){console.log("warn-"+B.type+"-"+v);this.inez.triggerEvent("warn-"+B.type+"-"+v);v=(v+1)%3}}else{this.rebalance=true}if(B.type==="fish"){this.fishUsed=true}}}})(),"remove-organism":function(x){var u=this,v=0,w="bubble";if(!this.paused){if((x.organism.type!=="durian-fruit")&&(x.organism.type!=="durian-flower")&&(x.organism.type!=="stork-eggs")&&(x.organism.type!=="crocodile-eggs")){if(this.organisms[x.organism.type].length==1){this.warnOfExtinction(x.organism,true)}}}switch(x.disaster){case"cyclone":v=200;w="bubble";break;case"hacker":v=1000;w="abduct";break;case"buzz-and-delete":v=1;w="bubble";break;case"disease":v=3000;w="bubble";break;case"fire":v=3000;w="bubble";break;default:v=1000;w="bubble";break}if(x.organism.state.scared){v=1}if((x.organism.type==="mangrove-trees")||(x.organism.type==="forest-trees")){this.removeClimbers(x.organism.node)}else{if(x.organism.type==="durian-tree"){this.removeBats(x.organism.node)}}x.organism.triggerEvent("unload",{delay:v,animation:w,onBubbleOut:function(){u.rebalance=true}})},"child-entity-removed":function(w){var v=0,u=null;if(this.organisms[w.type]){u=this.organisms[w.type];for(v=0;v<u.length;v++){if(u[v]===w){u.splice(v,1);break}}}},"child-entity-added":function(u){if(u.type==="inez"){this.inez=u}else{if(!this.organisms[u.type]){this.organisms[u.type]=[]}this.organisms[u.type].push(u)}},"placed-card":function(u){this.isCardInPlay=false},undeal:function(){this.isCardInPlay=false;this.cursor.state.valid=false;this.cursor.state.invalid=false;this.cursor.triggerEvent("logical-state",this.cursor.state)},"check-organism-on-tile":function(u){if(c[u.organism.type]&&!c[u.organism.type][u.tile.biotope]){this.owner.triggerEvent("remove-organism",{organism:u.organism})}},"check-organisms-on-tile":function(v){var u=0,w=null;for(u=0;u<v.contains.length;u++){w=v.contains[u];if(c[w.type]&&!c[w.type][v.biotope]){this.owner.triggerEvent("remove-organism",{organism:w})}}},"check-spot":function(x){var v=false,u=null,w=null;if(!this.isCardInPlay){this.isCardInPlay=true}if(x){w=this.owner.getWorldPointFromScreen(x);w.x=Math.floor(w.x/225);w.y=Math.floor(w.y/225);if((w.x>=this.topLeftTile.x)&&(w.x<=this.topLeftTile.x+3)&&(w.y>=this.topLeftTile.y)&&(w.y<=this.topLeftTile.y+1)){u=this.owner.getNode("node-("+w.x+","+w.y+")");v=c[x.type][u.biotope]&&((x.type==="forest")||(x.type==="mangrove")||(x.type==="lake")||!!u.isSpaceAvailable(x.type));this.cursor.state.valid=!!v;this.cursor.state.invalid=!v;this.cursor.x=(w.x+0.5)*225;this.cursor.y=(w.y+1)*225;this.owner.triggerEvent("valid-tile",v)}else{this.cursor.state.valid=false;this.cursor.state.invalid=false}}else{this.cursor.state.valid=false;this.cursor.state.invalid=false}this.cursor.triggerEvent("logical-state",this.cursor.state)},"camera-stationary":function(u){this.topLeftTile.x=Math.ceil(u.viewportLeft/225);this.topLeftTile.y=Math.ceil(u.viewportTop/225);this.camera=u},help:function(u){var w=this.helps[u],v=null;if(w.length){v=w.splice(0,1)[0];this.inez.triggerEvent(v.stage+"-"+v.organism+"-"+v.against);console.log("Help triggered: "+v.stage+"-"+v.organism+"-"+v.against);w.push(v)}else{this.inez.triggerEvent("healthy-"+u)}},"begin-tutorial-stage-1":function(){this.removeTutorialInez();this.tutStage=0;for(var u=0;u<this.organisms.fish.length;u++){if(u%3){this.organisms.fish[u].state.loop=false}}},"tutorial-action-occurred":(function(){var u=0;return function(v){l=0;if((this.tutStage===0)&&!v.tutorialized){u+=1;v.tutorialized=true;if(u>=3){u=0;console.log("Tutorial #1 complete.");this.owner.triggerEvent("tutorial-need-complete");this.owner.triggerEvent("hide-skip-button")}}}})(),"tutorial-need-complete":function(){var u=this;l=0;console.log("Tutorial #2 complete.");this.tutStage=2;for(var v=0;v<this.organisms.fish.length;v++){this.organisms.fish[v].state.loop=false}u.inez.triggerEvent("begin-tutorial",{voBegins:function(){u.owner.triggerEvent("set-up-bubbles")},getScript:function(){u.createDisease(h[1],["fish"]);this.playTutorial=0;return"tutorial-fish"},onFinished:function(){u.handleTutorialDisasterEnd=true},onTutorialFinished:function(){this.currentStepTime=0;this.nextStepTime=this.stepLength;u.paused=false;u.owner.triggerEventOnChildren("unpause")}})},"skip-tutorial":function(){this.removeTutorialInez();this.createDisaster=r;this.tutStage=2;if(e.length){for(var u=0;u<e.length;u++){e[u].triggerEvent("pop")}e.length=0}for(u=0;u<this.organisms.fish.length;u++){this.organisms.fish[u].state.loop=false}this.owner.triggerEvent("set-up-bubbles");this.score=0;this.paused=false;this.preDisaster=true},"tutorial-durian-need":function(){var u=this,v=this.organisms.stork;v[0].triggerEvent("set-up-tutorial",{need:function(){if(!u.fishUsed){u.inez.triggerEvent("tutorial-durian-delay");return true}return false},met:function(){}})},"remove-organisms-in-radius":function(H){var K=false,v=this.owner.components[10].map,D=null,z=null,w=null,E=[],I="",C=90000,u=25000,A=false;var J=["orangutan","goanna","mudskipper","monkey","stork","crocodile","fish","bat"];for(var G=0;G<J.length;G++){orgList=this.organisms[J[G]]?this.organisms[J[G]]:[];for(var F=0;F<orgList.length;F++){E.push(orgList[F])}}while(!K||!A){D=[];z=[];w=[];if(K){A=true}for(var G=0;G<E.length;G++){dist=Math.pow(E[G].x-H.x,2)+Math.pow(E[G].y-H.y-112,2);if(dist<=C){D.push(E[G])}}for(L in this.organisms){z[L]=this.organisms[L].length}for(var B=0;B<v.length;B++){I=v[B].biotope;if(I){if(!z[I]){z[I]=0}z[I]+=1}}for(var L in z){w[L]=z[L]}for(var G=0;G<D.length;G++){if(w[D[G].type]){w[D[G].type]-=1}}for(bio in this.health){K=K||this.checkForImbalance(s[bio],w)}C+=u;if(!K&&C>=3900000){return}}for(var G=0;G<D.length;G++){this.owner.triggerEvent("remove-organism",{organism:D[G],disaster:"buzz-and-delete"})}},"extinction-warning-pan":function(u){if(!this.paused){this.owner.triggerEvent("el-move-to-closest-grid",{x:u.x,y:u.y})}},"add-all-fish":function(){var v=0,u=0,z=this.owner.components[10].map,w=null,y=null,x=0;for(v=0;v<z.length;v++){y=z[v];if(y.biotope==="lake"){x=3;w=y.contains;for(u=0;u<w.length;u++){if(w[u].type==="fish"){x-=1}}for(u=0;u<x;u++){this.owner.triggerEvent("add-organism",{type:"fish",nodeId:y.nodeId})}if(x>0){this.owner.addEntity(new b.Entity(b.game.settings.entities["wall-fish"],{properties:{x:y.x,y:y.y,z:y.z}}))}}}},"add-all-trees":function(){var w=0,v=0,A=this.owner.components[10].map,x=null,y=null,z=false,u=false;for(w=0;w<A.length;w++){y=A[w];if(y.biotope==="forest"){x=y.contains;z=false;u=false;for(v=0;v<x.length;v++){if(x[v].type==="durian-tree"){z=true}else{if(x[v].type==="forest-trees"){u=true}}}if(!z){this.owner.triggerEvent("add-organism",{type:"durian-tree",nodeId:y.nodeId})}if(!u){this.owner.triggerEvent("add-organism",{type:"forest-trees",nodeId:y.nodeId})}if(!u||!z){this.owner.addEntity(new b.Entity(b.game.settings.entities["wall-trees"],{properties:{x:y.x,y:y.y,z:y.z}}))}}else{if(y.biotope==="mangrove"){z=false;x=y.contains;for(v=0;v<x.length;v++){if(x[v].type==="mangrove-trees"){z=true;break}}if(!z){this.owner.triggerEvent("add-organism",{type:"mangrove-trees",nodeId:y.nodeId});this.owner.addEntity(new b.Entity(b.game.settings.entities["wall-trees"],{properties:{x:y.x,y:y.y,z:y.z}}))}}}}},"re-deal":function(){this.currentStepTime=this.nextStepTime+1},"delayed-remove-organisms-in-radius":function(u){this.removeFromNode=u;this.removeInTicks=3}},methods:{removeTutorialInez:function(){var u=this,v=this.tutorialInez;if(v){u.tutorialInez=null;v.orientation=Math.PI;v.triggerEvent("audio-stop");createjs.Tween.get(v).to({x:1300,y:700},500).call(function(){if(u.owner&&u.owner.removeEntity){u.owner.removeEntity(v)}})}},startDisasterRecycle:function(){this.paused=true;this.owner.trigger("undeal",true);this.owner.triggerEventOnChildren("pause");this.safetyCount=0;this.recycleCount=1;if(this.preDisaster){this.preDisaster=false;this.score-=1}else{if(this.mapSize=="small"&&this.score==k){this.recycleCount=5000}else{if(this.mapSize=="medium"&&this.score==f){this.recycleCount=5000}else{this.recycleCount=this.recycleTime}}this.owner.triggerEvent("play-biotopes-balanced");if(this.currentStepTime<(this.disasterTime/4)){this.owner.triggerEvent("play-sound-disaster-resolved")}else{this.owner.triggerEvent("play-sound-disaster-resolved"+(this.score%2+2))}this.owner.triggerEvent("update-score","Rescues: "+(this.score+1));if(b.game.kartKingdom){if(this.score===4){b.game.kartKingdom.event("4b707bde-5eac-44bb-9d75-73beec5b8df5")}else{if(this.score===9){b.game.kartKingdom.event("d505a4be-e31d-437f-a581-c01899d2a5f3")}else{if(this.score===19){b.game.kartKingdom.event("0ee31995-946a-439f-876f-39eb7bff5dc7")}}}}}},finishDisasterRecycle:function(){this.causePain()},removeClimbers:function(v){var u=0,w=null;for(u=0;u<v.contains.length;u++){w=v.contains[u];if(w.state.treed||w.state.detreed||(w.type==="stork-eggs")){this.owner.triggerEvent("remove-organism",{organism:w})}}},removeBats:function(v){var u=0,w=null;for(u=0;u<v.contains.length;u++){w=v.contains[u];if(w.state.pollinating){this.owner.triggerEvent("remove-organism",{organism:w})}}},isNextStep:function(u){this.currentStepTime+=u;if(!this.isCardInPlay&&(this.currentStepTime>this.nextStepTime)){this.currentStepTime=this.nextStepTime;this.nextStepTime+=this.stepLength;return true}else{return false}},handleStep:function(){this.owner.triggerEvent("undeal");this.owner.triggerEvent("deal",{organism:this.disasterOrganism,suggestions:this.helps,severe:(!this.organisms[this.disasterOrganism])||(this.organisms[this.disasterOrganism].length<2)});this.owner.triggerEvent("enable-nav")},warnOfExtinction:function(x,w,v){var u=null;if(v){u={living:true,target:x,targetType:x.type,state:{critical:w||false},inez:this.inez,z:b.game.settings.entities["popup-major"].properties.z+this.popupMajorZOffset}}else{u={living:false,target:{x:x.x,y:x.y},targetType:x.type,state:{critical:w||false},inez:this.inez,z:b.game.settings.entities["popup-major"].properties.z+this.popupMajorZOffset}}this.popupMajorZOffset+=0.5;this.owner.triggerEvent("entity-created",this.owner.addEntity(new b.Entity(b.game.settings.entities["popup-major"],{properties:u})))},causePain:function(){this.score+=1;this.data.score=this.score;if(((this.bestMap==="small")&&(this.score===k+1))||((this.bestMap==="medium")&&(this.score===f+1))){this.owner.triggerEvent("save-level",{score:this.score,reboot:true});this.paused=true;this.data.winning=this.score;b.game.loadScene("results","fade-to-black",this.data)}else{this.owner.triggerEvent("save-level",{score:this.score,reboot:false});this.createDisaster()}},pickTargetOrganism:function(w,C,A){var B=[];var z=false;var v="";if(!A){A=1}while(true){for(var u=w.length-1;u>=0;u--){if(!this.organisms[w[u]]||this.organisms[w[u]].length==0){w.splice(u,1)}}for(var u=0;u<C.length;u++){for(var D=0;D<w.length;D++){if(C[u]==w[D]){B.push(C[u]);break}}}if(B.length>0){if(B.length<A){A=B.length}o(B);v=B.splice(0,A);for(var D=0;D<v.length;D++){for(var u=0;u<w.length;u++){if(w[u]==v[D]){w.splice(u,1);break}}}return v}else{if(z){return null}else{z=true;w.splice(0,w.length);for(var u=0;u<m.length;u++){w.push(m[u])}}}}},createDisease:function(v,J){var D=false,E=0.25,F=0.15,w=[],L="",A={},y={},u=this.owner.components[10].map,H=null,I=false,K="",z=[],B=[];for(L in this.organisms){A[L]=this.organisms[L].length}for(var C=0;C<u.length;C++){H=u[C].biotope;if(H){if(!A[H]){A[H]=0}A[H]+=1}}while(!I&&E<1){E+=F;if(E>1){E=1}for(var G=0;G<J.length;G++){w[G]=Math.ceil(this.organisms[J[G]].length*E)}for(var L in A){y[L]=A[L]}for(var G=0;G<J.length;G++){y[J[G]]-=w[G]}for(K in this.health){I=I||this.checkForImbalance(s[K],y)}}if(!I){return null}for(var G=0;G<J.length;G++){B=[];for(C=0;C<this.organisms[J[G]].length;C++){B[C]=C}for(C=0;C<w[G];C++){index=B.splice(Math.floor(Math.random()*B.length),1)[0];z.push(this.organisms[J[G]][index])}}this.owner.addEntity(new b.Entity(b.game.settings.entities["disease-ship"],{properties:{toRemove:z,x:-300,y:-300}}));if(J.length>1){return{plural:"animals",singular:"animal"}}else{if(z.length>1){return{plural:J+"s",singular:J}}else{return{plural:J,singular:J}}}},createHacker:function(u){return this.findTargets("hacker",u)},createCyclone:function(u){return this.findTargets("cyclone",u,{x:this.worldWidth/2,y:this.worldHeight/2})},findTargets:function(F,L,C){var v=this.owner.components[10].map,z=null,B=null,G=[],K=0.5,w=0,E=0,A=null,J=[],D=[],M=[];for(var I=0;I<L.length;I++){G[I]=[];for(var H=0;H<this.organisms[L[I]].length;H++){G[I].push(this.organisms[L[I]][H])}}if(G.length==0){return null}for(var I=0;I<G.length;I++){D[I]=this.howManyOrganismsToRemove(G[I][0].type)}var u=false;for(var I=0;I<D.length;I++){if(D[I]>0){u=true}}if(!u){return null}for(var H=0;H<G.length;H++){w=G[H].length-D[H];for(var I=0;I<w;I++){E=Math.floor(Math.random()*G[H].length);G[H].splice(E,1)}}for(var I=0;I<G.length;I++){for(var H=0;H<G[I].length;H++){M.push(G[I][H])}}if(C){this.owner.addEntity(new b.Entity(b.game.settings.entities[F],{properties:{targets:M,x:C.x,y:C.y}}))}else{this.owner.addEntity(new b.Entity(b.game.settings.entities[F],{properties:{targets:M,x:Math.floor(Math.random()*2)?this.worldWidth+200:-200,y:this.worldHeight/2}}))}if(G.length>1){return{plural:"animals",singular:"animal"}}else{if(G[0].length>1){return{plural:L[0]+"s",singular:L[0]}}else{return{plural:L[0],singular:L[0]}}}},createBuzzAndDelete:function(){var T=this.owner.components[10].map,M=null,P=null,v=[],S=[],w=[],Q=0,T=this.owner.components[10].map,L=0,I=Infinity,z=0,E=112,C=225,J=225,W=225,H={},V={},A={},U="",R=false,K="",G=null,B=0,N=0;var O=["orangutan","goanna","mudskipper","monkey","stork","crocodile","fish","bat"];for(var F=0;F<O.length;F++){G=this.organisms[O[F]]?this.organisms[O[F]]:[];for(var D=0;D<G.length;D++){v.push(G[D])}}for(var F=0;F<v.length;F++){Q+=v[F].y}Q/=v.length;z=Math.round(Q/C);z+=(Math.floor(Math.random()*3)-1);if(z<=1){z=2}else{if(this.mapSize=="small"&&z>5){z=5}else{if(z>9){z=9}}}N=(z*C)-E;while(!R){S=[];w=[];H=[];A=[];for(var F=0;F<v.length;F++){L=Math.abs(v[F].y-N);if(L<=J){S.push(v[F]);if((B%2)==0){w.push(v[F])}B++;if(B>2){B=0}}}for(u in this.organisms){H[u]=this.organisms[u].length}for(i=0;i<T.length;i++){U=T[i].biotope;if(U){if(!H[U]){H[U]=0}H[U]+=1}}for(var u in H){V[u]=H[u];A[u]=H[u]}for(var F=0;F<w.length;F++){if(V[w[F].type]){V[w[F].type]-=1}}for(K in this.health){R=R||this.checkForImbalance(s[K],V)}if(R){S=w;break}for(var F=0;F<S.length;F++){if(A[S[F].type]){A[S[F].type]-=1}}for(K in this.health){R=R||this.checkForImbalance(s[K],A)}J+=W;if(J>7*C){return null}}this.owner.addEntity(new b.Entity(b.game.settings.entities["buzz-and-delete"],{properties:{toRemove:S,x:Math.floor(Math.random()*2)?this.worldWidth+400:-400,y:N-100,z:T[(z-1)*10].z}}));if(v.length>1){return{plural:"orangutans",singular:"orangutan"}}else{return{plural:"orangutan",singular:"orangutan"}}},createEarthquake:function(){var w=this.owner.components[10].map,v=null,u="";v=this.findFlippableTile();this.owner.triggerEvent("flip-tile",v);this.owner.triggerEvent("delayed-remove-organisms-in-radius",v.node);var x={xMagnitude:5,yMagnitude:5,xFrequency:10,yFrequency:5,time:3000};this.owner.triggerEvent("play-earthquake");this.owner.triggerEvent("shake",x);this.owner.triggerEvent("el-follow-entity",{x:w[v.index].x,y:w[v.index].y});this.wasEarthquake=true;u=w[v.index].biotope;if(u=="shoreline"){u="lake"}return{plural:u,singular:u}},createTerrainHacker:function(){var u=null;u=this.findFlippableTile();this.owner.addEntity(new b.Entity(b.game.settings.entities["terrain-hacker"],{properties:{target:u,x:Math.floor(Math.random()*2)?this.worldWidth+200:-200,y:this.worldHeight/2}}));return{plural:u.node.biotope,singular:u.node.biotope}},findFlippableTile:function(){var F=null,v=this.owner.components[10].map,A=null,w="",E=[],B=[1,-1,10,-10],u=0,z=0;if(this.mapSize=="medium"){F=["forest","lake"]}else{if(this.mapSize=="large"){F=["forest","lake","mangrove"]}}F=o(F);while(E.length==0){w=F.splice(0,1)[0];for(var D=0;D<v.length;D++){A=v[D];if(A.biotope==w){for(var C=0;C<B.length;C++){u=D+B[C];if(v[u].biotope&&v[u].biotope!="empty"&&v[u].biotope!=w){E.push(u)}}}}}z=E[Math.floor(Math.random()*E.length)];return{node:v[z],type:w,index:z}},howManyOrganismsToRemove:function(w){var z=true,v={},B=0,A=0,C="",u=this.owner.components[10].map,y=true;for(org in this.organisms){v[org]=this.organisms[org].length}for(var x=0;x<u.length;x++){C=u[x].biotope;if(C){if(!v[C]){v[C]=0}v[C]+=1}}A=v[w];while(v[w]>0){if(y){B+=2;y=false}else{B+=1}v[w]=A-B;if(v[w]<0){v[w]=0;B=A}for(bio in this.health){if(this.checkForImbalance(s[bio],v)){return B}}}return 0},checkForImbalance:function(u,y){var z="",w="",v=0,x=false;for(z in u){if(y[z]){for(w in u[z]){v=(y[w]||0)/(y[z]*u[z][w]);if(v<1){if(v>0.5&&this.mapSize!="large"){x=true;break}else{if(v<=0.5){x=true;break}}}}}else{x=true}if(x){break}}return x},checkBalance:(function(){return function(){var B="",v=0,u="",A={},y={},x=0,w=0,z=this.owner.components[10].map;for(B in this.organisms){A[B]=this.organisms[B].length}for(v=0;v<z.length;v++){u=z[v].biotope;if(u){if(!A[u]){A[u]=0}A[u]+=1}}if(!this.data.biotopes){this.data.biotopes={}}for(B in this.health){w=this.health[B];x=this.health[B]=this.checkBiotopeBalance(B,s[B],A);if(x>=1){y[B+"-healthy"]=true;y[B+"-unhealthy"]=false;y[B+"-sick"]=false;this.data.biotopes[B]="healthy";if(w<1){this.owner.triggerEvent("play-biotope-healthier")}}else{if(x>=0.5){y[B+"-healthy"]=false;y[B+"-unhealthy"]=true;y[B+"-sick"]=false;this.data.biotopes[B]="unhealthy";if(w>=1){this.owner.triggerEvent("play-biotope-sicker")}else{if(w<0.5){this.owner.triggerEvent("play-biotope-healthier")}}}else{y[B+"-healthy"]=false;y[B+"-unhealthy"]=false;y[B+"-sick"]=true;this.data.biotopes[B]="sick";if(w>=0.5){this.owner.triggerEvent("play-biotope-sicker")}}}}this.owner.triggerEvent("update-health",y);return !(this.helps.forest.length+this.helps.lake.length+this.helps.mangrove.length)}})(),checkBiotopeBalance:(function(){var v=function(y,x){return y.rating-x.rating},w=function(z,A){var y=0,x=0;for(y=0;y<A.length;y++){for(x=0;x<z.length;x++){if((z[x].organism===A[y].organism)&&(z[x].against===A[y].against)){z.push(z.splice(x,1)[0]);break}}}},u=function(A){var z=0,y=0,x=false;if(A.length>1){for(z=0;z<A.length;z++){for(y=0;y<A.length;y++){if((A[y]!==A[z])&&(((A[y].organism===A[z].organism)&&(A[y].against===A[z].against))||((A[y].against===A[z].organism)&&(A[y].organism===A[z].against)))){if(A[y].rating>A[z].rating){A.splice(y,1)}else{A.splice(z,1)}x=true;u(A);break}}if(x){break}}}};return function(y,E,D){var B="",A="",C=0,z=1,x=this.helps[y],F=x.slice();x.length=0;for(B in E){if(D[B]){for(A in E[B]){C=(D[A]||0)/(D[B]*E[B][A]);if(C<1){z=Math.min(z,C);if(C>0.5){x.push({stage:"bad",organism:B,against:A,rating:C})}else{x.push({stage:"worse",organism:B,against:A,rating:C})}}}}else{x.push({stage:"none",organism:B,against:y,rating:0});z=0}}u(x);if(x.length>1){if(F.length>1){w(x,F)}else{x.sort(v)}}return z}})()},publicMethods:{}})})();(function(){var c=function(d){return function(f,e){this.triggerOnChildren(d,f,e)}};return b.createComponentClass({id:"entity-container",constructor:function(e){var d=this;this.entities=[];this.definedEntities=null;if(e.entities&&this.owner.entities){this.definedEntities=e.entities.concat(this.owner.entities)}else{this.definedEntities=e.entities||this.owner.entities||null}this.owner.entities=d.entities;this.childEvents=[];if(e.childEvents){for(var f in e.childEvents){this.addNewPublicEvent(e.childEvents[f])}}this.addNewPrivateEvent("peer-entity-added");this.addNewPrivateEvent("peer-entity-removed")},events:{load:function(){var g=0,e=0,d=0,h=this.definedEntities,f=null;this.definedEntities=false;if(h){for(g=0;g<h.length;g++){f={properties:{parent:this.owner}};for(e in h[g]){if(e==="properties"){for(d in h[g].properties){f.properties[d]=h[g].properties[d]}}else{f[e]=h[g][e]}}this.owner.triggerEvent("entity-created",this.addEntity(new b.Entity(h[g].id?h[g]:b.game.settings.entities[h[g].type],f)))}}},"add-entity":function(d){this.addEntity(d)},"remove-entity":function(d){this.removeEntity(d)},"child-entity-updated":function(d){this.updateChildEventListeners(d)}},methods:{addNewPublicEvent:function(e){this.addNewPrivateEvent(e);for(var d=0;d<this.childEvents.length;d++){if(this.childEvents[d]===e){return false}}this.childEvents.push(e);this.addEventListener(e,c(e))},addNewPrivateEvent:function(e){if(this.messages[e]){return false}this.messages[e]=[];for(var d=0;d<this.entities.length;d++){if(this.entities[d].messages[e]){for(var f=0;f<this.entities[d].messages[e].length;f++){this.addChildEventListener(this.entities[d],e,this.entities[d].messages[e][f].callback,this.entities[d].messages[e][f].scope)}}}},updateChildEventListeners:function(d){this.removeChildEventListeners(d);this.addChildEventListeners(d)},addChildEventListeners:function(d){var e="";for(e in this.messages){if(d.messages[e]){for(var f=0;f<d.messages[e].length;f++){this.addChildEventListener(d,e,d.messages[e][f].callback,d.messages[e][f].scope)}}}},removeChildEventListeners:function(d){var f=null,h=null,g=null;if(d.containerListener){f=d.containerListener.events;h=d.containerListener.messages;g=d.containerListener.scopes;for(var e=0;e<f.length;e++){this.removeChildEventListener(d,f[e],h[e],g[e])}d.containerListener=null}},addChildEventListener:function(d,f,g,e){if(!d.containerListener){d.containerListener={events:[],messages:[],scopes:[]}}d.containerListener.events.push(f);d.containerListener.messages.push(g);d.containerListener.scopes.push(e);this.bind(f,g,e)},removeChildEventListener:function(d,k,l,g){var f=d.containerListener.events,j=d.containerListener.messages,h=d.containerListener.scopes;for(var e=0;e<f.length;e++){if((f[e]===k)&&(!l||(j[e]===l))&&(!g||(h[e]===g))){this.unbind(k,j[e],h[e])}}},destroy:function(){for(var d in this.entities){this.removeChildEventListeners(this.entities[d]);this.entities[d].destroy()}this.entities.length=0}},publicMethods:{getEntityById:function(f){var d=0,e=null;for(;d<this.entities.length;d++){if(this.entities[d].id===f){return this.entities[d]}if(this.entities[d].getEntityById){e=this.entities[d].getEntityById(f);if(e){return e}}}return undefined},getEntitiesByType:function(f){var d=0,e=null,g=[];for(;d<this.entities.length;d++){if(this.entities[d].type===f){g.push(this.entities[d])}if(this.entities[d].getEntitiesByType){e=this.entities[d].getEntitiesByType(f);if(e){g=g.concat(e)}}}return g},addEntity:function(e){e.parent=this.owner;e.trigger("adopted");for(var d=0;d<this.entities.length;d++){if(!e.triggerEvent("peer-entity-added",this.entities[d])){break}}this.triggerEventOnChildren("peer-entity-added",e);this.addChildEventListeners(e);this.entities.push(e);this.owner.trigger("child-entity-added",e);return e},removeEntity:function(e){for(var d=0;d<this.entities.length;d++){if(this.entities[d]===e){this.removeChildEventListeners(e);this.entities.splice(d,1);this.triggerEventOnChildren("peer-entity-removed",e);this.owner.trigger("child-entity-removed",e);e.destroy();e.parent=null;return e}}return false},triggerEventOnChildren:function(f,e,d){if(!this.messages[f]){this.addNewPrivateEvent(f)}return this.triggerEvent(f,e,d)},triggerOnChildren:function(f,e,d){if(!this.messages[f]){this.addNewPrivateEvent(f)}return this.trigger(f,e,d)}}},b.Messenger)})();(function(){var h=[null,"mangrove","forest","lake","shoreline","empty"],j={small:{width:6,height:4,maps:[[0,3221225489,3221225489,3221225489,1073741842,0,2684354577,1,1,1,2,1610612755,2684354577,1,5,2684354562,6,1610612755,0,21,22,23,23,0]]},medium:{width:6,height:6,maps:[[0,3221225489,3221225489,3221225489,3221225489,0,2684354577,1,1,1,1,1610612753,2684354578,2684354562,2684354562,2684354562,2684354562,536870930,2684354579,3,3,3,3,1610612755,2684354579,3,3,3,3,1610612755,0,23,23,23,23,0]]},large:{width:10,height:6,maps:[[0,3221225491,3221225491,3221225490,3221225489,3221225489,3221225489,3221225487,3221225487,0,2684354579,3,3,3221225474,1,1,1,12,12,1610612751,2684354579,3,3,2684354566,2684354562,2684354562,2684354562,12,12,1610612751,2684354579,3,3,7,2684354564,2684354564,2684354564,12,12,1610612751,2684354579,3,3,4,8,8,8,12,12,1610612751,0,23,23,24,24,24,24,16,16,0]]}},k=[null,[["mangrove-trees","goanna"],["mangrove-trees","monkey"],["mangrove-trees","monkey","mudskipper","mudskipper"],["mangrove-trees","mudskipper"]],[["forest-trees","durian-tree","durian-fruit","durian-fruit","durian-fruit","durian-fruit","orangutan-female"],["forest-trees","orangutan-female"],["forest-trees","orangutan-male"],["forest-trees","durian-tree","durian-fruit","durian-fruit","bat"]],[["fish","fish","fish"],["fish","fish","fish"],["fish","fish","fish"],["fish","fish","fish"]],[["crocodile"],[],["stork"],[]],null],c=[0,3,4,2,1,4,4,1,1,0,1,1,5,0,1,0,0,0,0,0,0,0,0,0,0],e={mangrove:{"1.1.1.1.":{biotope:"mangrove",tile:8,borders:[1610612756,3221225492,2684354580,24]},"0.1.1.1.":{biotope:"mangrove",tile:3221225476,borders:[1610612755,3221225492,2684354580,24]},"1.0.1.1.":{biotope:"mangrove",tile:1610612740,borders:[1610612756,3221225492,2684354580,23]},"1.1.0.1.":{biotope:"mangrove",tile:4,borders:[1610612756,3221225492,2684354579,24]},"1.1.1.0.":{biotope:"mangrove",tile:2684354564,borders:[1610612756,3221225491,2684354580,24]},"0.0.1.1.":{biotope:"mangrove",tile:3221225479,borders:[1610612755,3221225492,2684354580,23]},"1.0.0.1.":{biotope:"mangrove",tile:1610612743,borders:[1610612756,3221225492,2684354579,23]},"1.1.0.0.":{biotope:"mangrove",tile:7,borders:[1610612756,3221225491,2684354579,24]},"0.1.1.0.":{biotope:"mangrove",tile:2684354567,borders:[1610612755,3221225491,2684354580,24]},"0.1.0.0.":{biotope:"mangrove",tile:10,borders:[1610612755,3221225491,2684354579,24]},"0.0.1.0.":{biotope:"mangrove",tile:2684354570,borders:[1610612755,3221225491,2684354580,23]},"0.0.0.1.":{biotope:"mangrove",tile:3221225482,borders:[1610612755,3221225492,2684354579,23]},"1.0.0.0.":{biotope:"mangrove",tile:1610612746,borders:[1610612756,3221225491,2684354579,23]},"1.0.1.0.":{biotope:"mangrove",tile:2684354571,borders:[1610612756,3221225491,2684354580,23]},"0.1.0.1.":{biotope:"mangrove",tile:11,borders:[1610612755,3221225492,2684354579,24]},"0.0.0.0.":{biotope:"mangrove",tile:14,borders:[1610612755,3221225491,2684354579,23]}},forest:{"........":{biotope:"forest",tile:3,borders:[1610612755,3221225491,2684354579,23]}},lake:{"11111111":{biotope:"lake",tile:1,borders:[1610612753,3221225489,2684354577,21]},"0.11111.":{biotope:"shoreline",tile:2,borders:[1610612755,1073741842,2684354577,22]},"10111111":{biotope:"shoreline",tile:5,borders:[536870930,3221225489,2684354577,22]},"1.0.1111":{biotope:"shoreline",tile:2684354562,borders:[536870930,3221225489,2684354578,23]},"11101111":{biotope:"shoreline",tile:2684354565,borders:[1610612753,3221225489,2684354578,2147483670]},"111.0.11":{biotope:"shoreline",tile:3221225474,borders:[1610612753,3221225490,2684354579,2147483670]},"11111011":{biotope:"shoreline",tile:3221225477,borders:[1610612753,3221225490,3758096402,21]},"11111.0.":{biotope:"shoreline",tile:1610612738,borders:[1610612754,3221225491,3758096402,21]},"11111110":{biotope:"shoreline",tile:1610612741,borders:[1610612754,1073741842,2684354577,21]},"000.111.":{biotope:"shoreline",tile:6,borders:[1610612755,1073741842,2684354578,23]},"1.000.11":{biotope:"shoreline",tile:2684354566,borders:[536870930,3221225490,2684354579,23]},"111.000.":{biotope:"shoreline",tile:3221225478,borders:[1610612754,3221225491,2684354579,2147483670]},"0.111.00":{biotope:"shoreline",tile:1610612742,borders:[1610612755,3221225491,3758096402,22]}}},l=true,f=-1000,d=function(s,p){var m=s.width,z=s.height,w=s.tileheight||225,r=s.tilewidth||225,o=0,n={},q=[],t=0,v=0,u=0;f-=0.001;o=(p[p.length-1].imagewidth/r)*(p[p.length-1].imageheight/w)+p[p.length-1].firstgid;for(v=-1;v<o;v++){n["tile"+v]=v}for(v=0;v<m;v++){q[v]=[];for(u=0;u<z;u++){t=+s.data[v+u*m]-1;q[v][u]="tile"+t}}return{id:"render-layer",components:[{type:"render-tiles",spriteSheet:{images:[b.assets.tiles],frames:{width:r,height:w},animations:n},imageMap:q},{type:"fade-out"}],properties:{width:r*m,height:w*z,columns:m,rows:z,tileWidth:r,tileHeight:w,scaleX:1,scaleY:1,layerZ:f,z:f}}},g=function(p){for(var o=p.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));var m=p[o];p[o]=p[n];p[n]=m}return p};return b.createComponentClass({id:"level-maker",constructor:function(m){this.level=null;this.size=""},events:{"scene-loaded":function(w){var u=0,s=0,B=0,A=0,r=null,q="",E=w.size||"small",p=j[E],z=p.maps,m=z[Math.floor(z.length*Math.random())].slice(),t=[],o=0,v=[-99,4,4,4,4,-99],C=[null,null,null,null,null,null],n={height:p.height,orientation:"orthogonal",tileheight:225,tilewidth:225,version:1,width:p.width,properties:{},layers:[{data:m,height:p.height,name:"background",opacity:1,type:"tilelayer",visible:true,width:p.width,x:0,y:0},{height:p.height,name:"entities",objects:t,opacity:1,type:"objectgroup",visible:true,width:p.width,x:0,y:0}],tilesets:[{firstgid:1,image:"../images/tiles.png",imageheight:1350,imagewidth:900,margin:0,name:"tiles",properties:{},spacing:0,tileheight:225,tilewidth:225}]},D=null;if(w.keepPlaying){D=localStorage.getItem("cyberchase-re");if(D){D=JSON.parse(D);if(D.size){this.size=E=D.size}if(D.level){this.level=D.level;m=this.level.layers[0].data;for(u=0;u<m.length;u++){o=c[m[u]&31];B=+u%this.level.width;A=Math.floor(+u/this.level.width);q="node-("+B+","+A+")";r=this.owner.getNode(q);r.biotope=h[o]}this.owner.triggerEvent("load-level",{level:D.level,persistentData:w});return}}}this.level=n;this.size=E;if(l){l=false}for(u=0;u<m.length;u++){o=c[m[u]&31];B=+u%p.width;A=Math.floor(+u/p.width);q="node-("+B+","+A+")";if((o>0)&&(o<5)){if(v[o]>=3){C[o]=g(k[o]);v[o]=0;if((E==="small")&&(o===2)){C[o]=[["forest-trees"]]}}else{v[o]+=1}for(s=0;s<C[o][v[o]].length;s++){t.push({height:0,name:"",properties:{nodeId:q},type:C[o][v[o]][s],visible:true,width:0,x:0,y:0})}}r=this.owner.getNode(q);r.biotope=h[o]}this.owner.triggerEvent("load-level",{level:n,persistentData:w})},"set-up-bubbles":function(){var m=this.owner,o=this.size,q=function(r){m.triggerEvent("help","forest");r.preventDefault()},p=function(r){m.triggerEvent("help","lake");r.preventDefault()},n=function(r){m.triggerEvent("help","mangrove");r.preventDefault()};switch(o){case"small":this.owner.triggerEvent("set-biotope-list","<div id='lake'><div></div></div>");document.getElementById("lake").addEventListener("click",p,false);document.getElementById("lake").addEventListener("touchstart",p,false);break;case"medium":this.owner.triggerEvent("set-biotope-list","<div id='forest'><div></div></div><div id='lake'><div></div></div>");document.getElementById("forest").addEventListener("click",q,false);document.getElementById("forest").addEventListener("touchstart",q,false);document.getElementById("lake").addEventListener("click",p,false);document.getElementById("lake").addEventListener("touchstart",p,false);break;case"large":this.owner.triggerEvent("set-biotope-list","<div id='forest'><div></div></div><div id='lake'><div></div></div><div id='mangrove'><div></div></div>");document.getElementById("forest").addEventListener("click",q,false);document.getElementById("forest").addEventListener("touchstart",q,false);document.getElementById("lake").addEventListener("click",p,false);document.getElementById("lake").addEventListener("touchstart",p,false);document.getElementById("mangrove").addEventListener("click",n,false);document.getElementById("mangrove").addEventListener("touchstart",n,false);break}},"flip-tile":(function(){var m={lake:{mangrove:true,forest:true},forest:{mangrove:true,lake:true,shoreline:true},mangrove:{lake:true,shoreline:true,forest:true}},s={lake:e.lake["11111111"],forest:e.forest["........"],mangrove:e.mangrove["1.1.1.1."]},u=[],q=[],p=function(A,z){var w=Math.floor(A.x/225),B=Math.floor(A.y/225)-1;return w+B*z},v=function(B,C,x,A){var D=B.getNorth(),z=B.getEast(),y=B.getSouth(),w=B.getWest();if(!D.biotope){x[p(D,A)]=C[1]}if(!z.biotope){x[p(z,A)]=C[0]}if(!y.biotope){x[p(y,A)]=C[3]}if(!w.biotope){x[p(w,A)]=C[2]}},o=function(x,A){var w="",z=null,y=e[x];for(w in y){if((new RegExp(w)).test(A)){z=y[w];break}}return z},r=function(C,y,D,w,z,x){var A=p(y,w),B=n(C,y),E=o(C,B);if(!E){if(z){E=o(z,n(z,y));if(!E){E=s[z]}}else{E=s[C]}if(E===s.lake){u.push(y.getEast());u.push(y.getSoutheast());u.push(y.getSouth());u.push(y.getSouthwest());u.push(y.getWest());u.push(y.getNorthwest());u.push(y.getNorth());u.push(y.getNortheast())}else{q.push(y)}y.biotope=E.biotope;return E}if(x){u.push(y.getEast());u.push(y.getSoutheast());u.push(y.getSouth());u.push(y.getSouthwest());u.push(y.getWest());u.push(y.getNorthwest());u.push(y.getNorth());u.push(y.getNortheast())}y.biotope=E.biotope;if(D[A]===E.tile){return false}else{D[A]=E.tile;v(y,E.borders,D,w);return E}},t=function(G,z,H,w,A,E,y,x){var C=0,B=0,D="",I=false,F=null;A=A||[];A.push(z);if(r(G,z,H,w,E,y)){F=[z.getEast(),z.getSouth(),z.getWest(),z.getNorth()];for(C=0;C<F.length;C++){if(!F[C].biotope||(F[C].biotope==="empty")){continue}I=false;for(B=0;B<A.length;B++){if(F[C]===A[B]){I=true;break}}if(!I){if(F[C].biotope==="shoreline"){D="lake"}else{D=F[C].biotope}t(D,F[C],H,w,A,E||G,false,x)}}x.triggerEvent("check-organisms-on-tile",z);x.addEntity(new b.Entity(b.game.settings.entities["terrain-wall"],{properties:{x:z.x,y:z.y,z:z.z}}))}},n=function(x,y){var w=0,B="",A=m[x],z=[y.getEast(),y.getSoutheast(),y.getSouth(),y.getSouthwest(),y.getWest(),y.getNorthwest(),y.getNorth(),y.getNortheast()];for(w=0;w<z.length;w++){if(A[z[w].biotope]){B+="0"}else{B+="1"}}return B};return function(C){var E=this,B=this.level.layers[0],D=B.data,w=B.width,y=C.node,A=[],z=0,x=false;u.length=0;q.length=0;E.owner.triggerEvent("play-terrain-transform");if((C.type==="lake")&&(y.biotope==="shoreline")){x=true}t(C.type,y,D,w,null,null,x,this.owner);while(u.length){q.length=0;for(z=0;z<u.length;z++){if(u[z].biotope&&(u[z].biotope!=="empty")&&(u[z].biotope!=="lake")){u[z].biotope="lake";A.push(u[z])}}u.length=0;for(z=0;z<A.length;z++){if(A[z].biotope==="shoreline"){A[z].biotope="lake"}t(A[z].biotope,A[z],D,w,null,null,null,this.owner)}}while(q.length){A=q.slice();q.length=0;for(z=0;z<A.length;z++){if(A[z].biotope==="shoreline"){A[z].biotope="lake"}t(A[z].biotope,A[z],D,w,[],null,x,this.owner)}}if(!this.renderLayer){this.owner.getEntitiesByType("render-layer")[0].triggerEvent("fade-out")}else{this.renderLayer.triggerEvent("fade-out")}this.renderLayer=this.owner.addEntity(new b.Entity(d(B,this.level.tilesets),{properties:{}}))}})(),"save-level":function(n){var p=this.level,o=p.layers[1].objects,m=localStorage.getItem("cyberchase-re");if(m){m=JSON.parse(m)}else{m={}}if(n&&(n.reboot||n.lost)){delete m.level}else{o.length=0;this.owner.triggerEventOnChildren("get-save-state",function(q){o.push(q)});m.level=p}if(n){m.score=n.score}if(n.reboot){m.tutorial=true;if(this.size==="small"){m.size="medium"}else{if(this.size==="medium"){m.size="large"}else{m.size=this.size}}}else{if(m.tutorial&&((n.score!==0)||(n.score!==3)||(n.score!==8))){m.tutorial=false}m.size=this.size}localStorage.setItem("cyberchase-re",JSON.stringify(m));b.setOnline(JSON.stringify(m))}},methods:{},publicMethods:{}})})();(function(){var c=function(d){return function(g,e){var f=0;for(;f<this.links.length;f++){this.links[f].trigger(d,g,e)}}};return b.createComponentClass({id:"entity-linker",constructor:function(f){var e=this;if(f.events){for(var g in f.events){this.addEventListener(g,c(f.events[g]))}}this.linkId=f.linkId||this.owner.linkId||"linked";if(!this.owner.linkId){this.owner.linkId=this.linkId}this.addEventListener("to-"+this.linkId+"-entities",c("from-"+this.linkId+"-entities"));this.addEventListener("from-"+this.linkId+"-entities",function(h){e.owner.trigger(h.message,h.value,h.debug)});this.links=[];if(this.owner.linkEntities){for(var d in this.owner.linkEntities){this.links.push(this.owner.linkEntities[d])}}this.message={message:"",value:null};this.linkMessage={entity:this.owner,linkId:this.linkId,reciprocate:false};if(this.owner.parent){this.resolveAdoption()}},events:{adopted:function(d){this.resolveAdoption(d)},"link-entity":function(f){var d=0,e=false;if((f.linkId===this.linkId)&&(f.entity!==this.owner)){for(;d<this.links.length;d++){if(this.links[d]===f.entity){e=true;break}}if(!e){this.links.push(f.entity);if(f.reciprocate){this.linkMessage.reciprocate=false;f.entity.trigger("link-entity",this.linkMessage)}}}},"unlink-entity":function(e){var d=0;for(;d<this.links.length;d++){if(e.entity===this.links[d]){this.links.splice(d,1);break}}}},methods:{resolveAdoption:function(d){var e=this.owner.parent;while(e.parent){e=e.parent}this.linkMessage.reciprocate=true;e.trigger("link-entity",this.linkMessage,true)},destroy:function(){var d=0;for(;d<this.links.length;d++){this.links[d].trigger("unlink-entity",this.linkMessage)}this.links.length=0}}})})();(function(){var c=function(e,f){if(e.nodeId){if(typeof e.nodeId==="string"){this.nodeId=e.nodeId}else{if(Array.isArray(e.nodeId)){this.nodeId=e.nodeId.join("|")}else{this.nodeId=""+Math.random()}}}else{this.nodeId=""+Math.random()}this.isNode=true;this.map=f;this.contains=[];this.type=e.type||"";this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.neighbors=e.neighbors||{}},d=c.prototype;d.getNode=function(f){var e=null;if(this.neighbors[f]){e=this.neighbors[f];if(e.isNode){return e}else{if(typeof e==="string"){e=this.map.getNode(e);if(e){this.neighbors[f]=e;return e}}else{if(Array.isArray(e)){e=this.map.getNode(e.join("|"));if(e){this.neighbors[f]=e;return e}}}}return null}else{return null}};d.addToNode=function(e){for(var f=0;f<this.contains.length;f++){if(this.contains[f]===e){return false}}this.contains.push(e);return e};d.removeFromNode=function(e){for(var f=0;f<this.contains.length;f++){if(this.contains[f]===e){return this.contains.splice(f,1)[0]}}return false};return b.createComponentClass({id:"node-map",constructor:function(e){this.map=null;this.nodeEntity=null;if(e.node){this.nodeEntity=b.game.settings.entities[e.node]}this.setupMap=e.map||null},events:{load:(function(){var e=function(j,g){var h=0,f=[];for(;h<j.length;h++){f.push(g.createNode(j[h]))}return f};return function(g){var f=0,h=null;if(this.setupMap){h=this.setupMap;this.setupMap=null;if(Array.isArray(h)){this.map=e(h,this)}else{this.map=[];switch(h.type){case"line":h=e(this.generateLineMap(h.nodes||2,h.originX||0,h.originY||0,h.destinationX||0,h.destinationY||0),this);break;case"grid":h=e(this.generateCartesianMap(h.rows||1,h.columns||1,h.width||1,h.height||1,h.connections||["n","e","s","w"]),this);break;case"hexagon":h=e(this.generateHexagonMap(h.radius,h.width,h.height,h.vertical),this);break}if(!this.nodeEntity){this.map=h}}}}})(),"add-node":function(e){if(e.isNode){e.map=this;this.map.push(e)}else{this.map.push(this.createNode(e))}},"child-entity-added":function(e){if(e.isNode){this.owner.triggerEvent("add-node",e)}else{if(e.nodeId){e.node=this.getNode(e.nodeId);e.trigger("on-node",e.node)}}},rotate:(function(){var e=function(j,g,h){var f=j.x||0,k=j.y||0;j.x=f*h-k*g;j.y=f*g+k*h};return function(k){var l=0,h=0,n=this.map,g=k.rotation||0,f=Math.sin(g),m=Math.cos(g);if(g){for(;l<n.length;l++){e(n[l],f,m);if(n[l].contains.length){for(h=0;h<n[l].contains.length;h++){e(n[l].contains[h],f,m)}}}}}})()},methods:{createNode:function(e){if(this.nodeEntity){e.map=this;return this.owner.addEntity(new b.Entity(this.nodeEntity,{properties:e}))}else{return new c(e,this)}},generateLineMap:function(f,p,o,l,k){var m=0,j=null,h="",g=0,e=[],r=p,q=o,t=0,s=0,n=null;if(Array.isArray(f)){g=f.length;n=true}else{g=f}t=(l-p)/((g-1)||1);s=(k-o)/((g-1)||1);if(n){for(;m<g;m++){j=f[m];h=j.nodeId||("node-"+m);j={nodeId:h,type:j.type,x:r,y:q,neighbors:{}};if(e[m-1]){j.neighbors.left=e[m-1].nodeId;e[m-1].neighbors.right=j.nodeId}e.push(j);r+=t;q+=s}}else{for(;m<g;m++){j={nodeId:"node-"+m,type:"",x:r,y:q,neighbors:{}};if(e[m-1]){j.neighbors.left=e[m-1].nodeId;e[m-1].neighbors.right=j.nodeId}e.push(j);r+=t;q+=s}}return e},generateCartesianMap:(function(){var e={n:function(h,j,g,f){if(j[g-f]){h.neighbors.north=j[g-f].nodeId}},ne:function(h,j,g,f){if(j[g-f+1]&&((g+1)%f)){h.neighbors.northeast=j[g-f+1].nodeId}},e:function(h,j,g,f){if(j[g-1]&&(g%f)){j[g-1].neighbors.east=h.nodeId}},se:function(h,j,g,f){if(j[g-f-1]&&(g%f)){j[g-f-1].neighbors.southeast=h.nodeId}},s:function(h,j,g,f){if(j[g-f]){j[g-f].neighbors.south=h.nodeId}},sw:function(h,j,g,f){if(j[g-f+1]&&((g+1)%f)){j[g-f+1].neighbors.southwest=h.nodeId}},w:function(h,j,g,f){if(j[g-1]&&(g%f)){h.neighbors.west=j[g-1].nodeId}},nw:function(h,j,g,f){if(j[g-f-1]&&(g%f)){h.neighbors.northwest=j[g-f-1].nodeId}}};return function(p,j,g,o,q){var k=0,n=0,m=0,l=0,h=null,f=[];g=g||1;o=o||1;for(m=0;m<p;m++){for(n=0;n<j;n++){h={nodeId:"node-("+n+","+m+")",x:n*g,y:m*o,neighbors:{}};for(l=0;l<q.length;l++){e[q[l]](h,f,k,j)}f.push(h);k+=1}}return f}})(),generateHexagonMap:(function(){var j=[[+1,-1],[0,-1],[-1,0],[-1,+1],[0,+1],[+1,0]],l=["k","m","n","h","u","i"],g=function(o,m,n){return(j[o][0]*m+j[(o+2)%6][0]*n)},f=function(o,m,n){return(j[o][1]*m+j[(o+2)%6][1]*n)},e=function(m,n){return -(m+n)},k=function(m,q,p,o,n){if(n){return m*o*0.75}else{return(m-q)*o*0.5}},h=function(n,q,p,m,o){if(o){return(p-q)*m*0.5}else{return p*m*0.75}};return function(u,w,v,m){var C=0,r=0,q=0,p=0,F=0,E=0,D=0,K=0,I=0,G=0,t=null,A=null,s="",J=[],B={};w=w||1;v=v||1;if(m){K=w*0.75;I=-v*0.5;G=v*0.5}else{K=w*0.5;I=-w*0.5;G=v*0.75}A={nodeId:"node-(0,0,0)",x:k(r,q,p,w,m),y:h(r,q,p,v,m),z:h(r,q,p,v,m),neighbors:{}};J.push(A);for(var H=0;H<6;H++){for(var n=1;n<u;n++){for(var o=0;o<n;o++){r=g(H,n,o);q=f(H,n,o);p=e(r,q);s="node-("+r+","+q+","+p+")";A={nodeId:s,x:k(r,q,p,w,m),y:h(r,q,p,v,m),z:h(r,q,p,v,m),neighbors:{}};for(C=0;C<6;C++){F=r+j[C][0];E=q+j[C][1];D=e(F,E);t=B["node-("+F+","+E+","+D+")"];if(t){A.neighbors[l[C]]=t.nodeId;t.neighbors[l[(+C+3)%6]]=A.nodeId}}B[s]=A;J.push(A);C+=1}}}return J}})()},publicMethods:{getNode:function(){var f=0,h="",g="",e=arguments;if(e.length===1){if(typeof e[0]!=="string"){if(e[0].isNode){return e[0]}else{if(e[0].length){e=e[0]}}}}for(f=0;f<e.length;f++){h+=g+e[f];g="|"}for(f=0;f<this.map.length;f++){if(this.map[f].nodeId===h){return this.map[f]}}return null},getClosestNode:(function(){var e=function(f,h,g){return f*f+h*h+g*g};return function(q,p,o){var k=0,n=q||0,m=p||0,l=o||0,h=null,g=null,f=Infinity,j=0;for(;k<this.map.length;k++){h=this.map[k];j=e(n-(h.x||0),m-(h.y||0),l-(h.z||0));if((j<f)&&(!h.contains.length)){f=j;g=h}}return g}})()}})})();(function(){var c=function(f){var e=!!(536870912&f),d=!!(1073741824&f),g=!!(2147483648&f);if(e&&g){return -3}else{if(e){return -5}else{if(d){return -4}else{return -2}}}};return b.createComponentClass({id:"tiled-loader",constructor:function(d){this.entities=[];this.layerZ=0;this.followEntity=false;this.manuallyLoad=d.manuallyLoad||false;this.level=this.owner.level||d.level||null;this.unitsPerPixel=this.owner.unitsPerPixel||d.unitsPerPixel||1;this.images=this.owner.images||d.images||false;this.imagesScale=this.owner.imagesScale||d.imagesScale||this.unitsPerPixel;this.layerZStep=this.owner.zStep||d.zStep||1000;this.separateTiles=this.owner.separateTiles||d.separateTiles||false;this.entityPositionX=this.owner.entityPositionX||d.entityPositionX||"center";this.entityPositionY=this.owner.entityPositionY||d.entityPositionY||"bottom"},events:{"scene-loaded":function(d){if(!this.manuallyLoad){this.loadLevel({level:this.level||d.level,persistentData:d})}},"load-level":function(d){this.loadLevel(d)}},methods:{loadLevel:function(f){var g=f.level,e=0,d=false;if(typeof g==="string"){g=b.game.settings.levels[g]}for(;e<g.layers.length;e++){d=this.setupLayer(g.layers[e],g,d);if(this.separateTiles){d=false}}this.owner.trigger("world-loaded",{width:g.width*g.tilewidth*this.unitsPerPixel,height:g.height*g.tileheight*this.unitsPerPixel,camera:this.followEntity});this.owner.removeComponent(this)},setupLayer:function(D,f,m){var w=this,q=w.images||[],A=f.tilesets,d=f.tilewidth,n=f.tileheight,h=0,t=0,p=0,o=0,s=0,r=null,j=null,z="",v=null,k=null,g=true,u=false,C=function(e){var x={data:[1],image:"",height:1,name:e.name,type:"tilelayer",width:1,tileheight:n,tilewidth:d,x:e.x,y:e.y,properties:e.properties||{}};if(b.assets[e.name]){x.image=b.assets[e.name];x.tileheight=x.image.height;x.tilewidth=x.image.width}else{console.warn('Component tiled-loader: Cannot find the "'+e.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+e.name+'".');x.image=e.image}return x},l=function(R,T){var Q=T.width,N=T.height,L=T.tileheight||n,e=T.tilewidth||d,S=0,J=null,K=null,G=null,U=null,O=false,M=null,P=null,E=0,I=0,H=0;J=JSON.parse(JSON.stringify(b.game.settings.entities[R]));K={};G=[];U=[];if(R==="collision-layer"){P=[];for(I=0;I<A.length;I++){M=A[I];if(M.tileproperties){for(H in M.tileproperties){if(M.tileproperties[H].jumpThrough){P.push(M.firstgid+ +H-1)}}}}}J.properties=J.properties||{};J.properties.width=e*Q*w.unitsPerPixel;J.properties.height=L*N*w.unitsPerPixel;J.properties.columns=Q;J.properties.rows=N;J.properties.tileWidth=e*w.unitsPerPixel;J.properties.tileHeight=L*w.unitsPerPixel;J.properties.scaleX=w.imagesScale;J.properties.scaleY=w.imagesScale;J.properties.layerZ=w.layerZ;J.properties.z=J.properties.z||w.layerZ;if(T.image){S=(T.image.width/e)*(T.image.height/L)}else{S=(A[A.length-1].imagewidth/e)*(A[A.length-1].imageheight/L)+A[A.length-1].firstgid}for(I=-1;I<S;I++){K["tile"+I]=I}for(I=0;I<Q;I++){G[I]=[];U[I]=[];for(H=0;H<N;H++){E=+T.data[I+H*Q]-1;U[I][H]="tile"+E;if(P){for(var F=0;F<P.length;F++){if(P[F]===(268435455&E)){E=c(E)}break}}G[I][H]=E}}for(I=0;I<J.components.length;I++){if(J.components[I].type==="render-tiles"){O=J.components[I]}if(J.components[I].spriteSheet=="import"){J.components[I].spriteSheet={images:(T.image?[T.image]:q),frames:{width:e*w.unitsPerPixel/w.imagesScale,height:L*w.unitsPerPixel/w.imagesScale},animations:K}}if(J.components[I].collisionMap=="import"){J.components[I].collisionMap=G}if(J.components[I].imageMap=="import"){J.components[I].imageMap=U}}w.layerZ+=w.layerZStep;if((R==="render-layer")&&m&&(m.tileHeight===L)&&(m.tileWidth===e)){m.trigger("add-tiles",O);return m}else{return w.owner.addEntity(new b.Entity(J,{properties:{}}))}};if(q.length==0){for(p=0;p<A.length;p++){if(b.assets[A[p].name]){q.push(b.assets[A[p].name])}else{console.warn('Component tiled-loader: Cannot find the "'+A[p].name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+A[p].name+'".');q.push(A[p].image)}}}else{q=q.slice();for(p=0;p<q.length;p++){if(b.assets[q[p]]){q[p]=b.assets[q[p]]}}}if(D.type=="tilelayer"){r="render-layer";if(D.properties&&D.properties.entity){r=D.properties.entity}else{switch(D.name){case"collision":r="collision-layer";break;case"action":r="tile-layer";for(p=0;p<f.layers.length;p++){if(f.layers[p].name==="collision"||(f.layers[p].properties&&f.layers[p].properties.entity==="collision-layer")){g=false}}if(!g){r="render-layer"}break}}if(r==="tile-layer"){l("collision-layer",D);return l("render-layer",D)}else{if(r==="collision-layer"){l(r,D)}else{return l(r,D)}}}else{if(D.type=="imagelayer"){return l("render-layer",C(D))}else{if(D.type=="objectgroup"){for(s=0;s<D.objects.length;s++){r=D.objects[s];for(p=0;p<A.length;p++){if(A[p].firstgid>r.gid){break}else{v=A[p]}}z="";if(r.type!==""){z=r.type}else{if(r.name!==""){z=r.name}else{if(v.tileproperties[r.gid-v.firstgid]){if(v.tileproperties[r.gid-v.firstgid].entity){z=v.tileproperties[r.gid-v.firstgid].entity}else{if(v.tileproperties[r.gid-v.firstgid].type){z=v.tileproperties[r.gid-v.firstgid].type}}}}}if(z!==""){k={};if(v.tileproperties&&v.tileproperties[r.gid-v.firstgid]){for(p in v.tileproperties[r.gid-v.firstgid]){u=parseFloat(v.tileproperties[r.gid-v.firstgid][p]);if(u==0||(!!u)){k[p]=u}else{if(v.tileproperties[r.gid-v.firstgid][p]=="true"){k[p]=true}else{if(v.tileproperties[r.gid-v.firstgid][p]=="false"){k[p]=false}else{k[p]=v.tileproperties[r.gid-v.firstgid][p]}}}}}for(p in r.properties){j=r.properties[p];if(typeof j==="string"){u=parseFloat(j);if(u==0||(!!u)){k[p]=u}else{if(j=="true"){k[p]=true}else{if(j=="false"){k[p]=false}else{if((j.length>2)&&(((j[0]==="{")&&(j[j.length-1]==="}"))||((j[0]==="[")&&(j[j.length-1]==="]")))){try{k[p]=JSON.parse(j)}catch(B){k[p]=j}}else{k[p]=j}}}}}else{k[p]=j}}h=k.width=(r.width||d)*this.unitsPerPixel;t=k.height=(r.height||n)*this.unitsPerPixel;if(z&&b.game.settings.entities[z]&&b.game.settings.entities[z].properties){k.width=b.game.settings.entities[z].properties.width||k.width;k.height=b.game.settings.entities[z].properties.height||k.height}k.x=r.x*this.unitsPerPixel;if(this.entityPositionX==="left"){k.regX=0}else{if(this.entityPositionX==="center"){k.regX=k.width/2;k.x+=h/2}else{if(this.entityPositionX==="right"){k.regX=k.width;k.x+=h}}}k.y=r.y*this.unitsPerPixel;if(typeof r.gid==="undefined"){k.y+=k.height}if(this.entityPositionY==="bottom"){k.regY=k.height}else{if(this.entityPositionY==="center"){k.regY=k.height/2;k.y-=t/2}else{if(this.entityPositionY==="top"){k.regY=0;k.y-=t}}}k.scaleX=this.imagesScale;k.scaleY=this.imagesScale;k.layerZ=this.layerZ;if(k.z){k.z+=this.layerZ}else{if(z&&b.game.settings.entities[z]&&b.game.settings.entities[z].properties&&b.game.settings.entities[z].properties.z){k.z=this.layerZ+b.game.settings.entities[z].properties.z}else{k.z=this.layerZ}}k.parent=this.owner;r=this.owner.addEntity(new b.Entity(b.game.settings.entities[z],{properties:k}));if(r){if(r.camera){this.followEntity={entity:r,mode:r.camera}}this.owner.triggerEvent("entity-created",r)}}}this.layerZ+=this.layerZStep;return false}}}},destroy:function(){this.entities.length=0}}})})();(function(){var c={},j=false,h={interrupt:createjs.Sound.INTERRUPT_ANY,delay:0,offset:0,loop:0,volume:1,pan:0,length:0,next:false,events:false},g={stop:true,playthrough:true},f=function(m){var n=c[m];if(!n||!n.length){return false}for(var l in n){if(n[l].priorityTrack){return n[l].priorityTrack}}return false},e=function(m,l){return m.time-l.time},k=function(s){var r="",m=undefined,l=null,p=b.game.settings.assets;if(typeof s==="string"){r=s;m={}}else{if(Array.isArray(s)){if(typeof s[0]==="string"){r=s[0];m={next:[]}}else{r=s[0].sound;m={};for(var q in s[0]){m[q]=s[0][q]}if(m.next){m.next=m.next.slice()}else{m.next=[]}}for(var n=1;n<s.length;n++){m.next.push(s[n])}}else{r=s.sound;m={interrupt:s.interrupt,delay:s.delay,offset:s.offset,loop:s.loop,volume:s.volume,pan:s.pan,length:s.length,next:s.next,events:s.events}}}if(p[r]){if(p[r].data){for(var o in p[r].data){m[o]=m[o]||p[r].data[o]}}if(p[r].assetId){r=p[r].assetId}return function(E){var G=this,y=undefined,B=false,F=false,u=h.offset,t=0,C=f(this.channel);if((this.preventOverlaps!=="ignore")&&C){if(this.priority>=C.priority){C.component.stopAudio()}else{if(this.preventOverlaps==="append"){C.next.push(s);return}else{return}}}E=E||m;if(E&&E.stop){if(l){if(E.playthrough){l.remainingLoops=0}else{l.stop();G.removeClip(l)}}}else{if(E){var x=E.interrupt||m.interrupt||h.interrupt,w=E.delay||m.delay||h.delay,A=E.loop||m.loop||h.loop,z=(typeof E.volume!=="undefined")?E.volume:((typeof m.volume!=="undefined")?m.volume:h.volume),D=E.pan||m.pan||h.pan;t=E.length||m.length||h.length;u=E.offset||m.offset||h.offset;B=E.next||m.next||h.next;F=E.events||m.events||h.events;y=l=createjs.Sound.play(r,x,w,u,A,z,D)}else{y=l=createjs.Sound.play(r,h.interrupt,h.delay,h.offset,h.loop,h.volume,h.pan)}if(this.preventOverlaps&&(this.preventOverlaps!=="ignore")){this.priorityTrack={audio:y,component:this,priority:this.priority,next:B||[]}}if(F){y.sequenceEvents=[];for(var v=0;v<F.length;v++){y.sequenceEvents.push({event:F[v].event,time:+F[v].time+u,message:F[v].message})}y.sequenceEvents.sort(e)}y.addEventListener("complete",function(){G.onComplete(y,B)});if(y.playState==="playFailed"){if(this.owner.debug){console.warn('Unable to play "'+r+'".',y)}this.onComplete(y,B)}else{if(t){this.timedAudioClips.push({length:t,progress:0,audio:y,next:B,offset:u})}this.activeAudioClips.push(y)}}}}else{console.warn('Audio clip "'+r+'" needs to be added to config.js.');return function(){}}},d=function(m,n){var l=m.replace(/ /g,"").split(",");if(m==="default"){return function(o){return m}}else{return function(p){for(var o=0;o<l.length;o++){if(!p[l[o]]){return false}}return m}}};return b.createComponentClass({id:"audio",constructor:function(m){this.timedAudioClips=[];this.activeAudioClips=[];this.state={};this.stateChange=false;this.currentState=false;this.forcePlaythrough=this.owner.forcePlaythrough||m.forcePlaythrough;if(typeof this.forcePlaythrough!=="boolean"){this.forcePlaythrough=true}if(m.audioMap){this.checkStates=[];for(var l in m.audioMap){this.addEventListener(l,k(m.audioMap[l]));this.checkStates.push(d(l,m.audioMap[l]))}}if(m.preventOverlaps){this.preventOverlaps=m.preventOverlaps;if(this.preventOverlaps!=="ignore"){this.channel=m.channel||"default";if(!c[this.channel]){c[this.channel]=[]}c[this.channel].push(this)}}this.priority=m.priority||0;this.priorityTrack=null;this.owner.state.muted=createjs.Sound.getMute();this.globallyPaused=false;this.useAudioPosition=b.settings.supports.ie},events:{"handle-render":function(o){var n=0,m=undefined,l=undefined;if(this.globallyPaused){if(!j){this.globallyPaused=false;for(n=0;n<this.activeAudioClips.length;n++){this.activeAudioClips[n].resume()}}else{return}}else{if(j){this.globallyPaused=true;for(n=0;n<this.activeAudioClips.length;n++){this.activeAudioClips[n].pause()}return}}if(this.timedAudioClips.length){l=this.timedAudioClips;this.timedAudioClips=[];for(n in l){m=l[n];if(this.useAudioPosition){m.progress=m.audio.getPosition()-m.offset}else{m.progress+=o.delta}if(m.progress>=m.length){m.audio.stop();this.onComplete(m.audio,m.next)}else{this.timedAudioClips.push(m)}}}for(n=0;n<this.activeAudioClips.length;n++){this.checkTimeEvents(this.activeAudioClips[n])}},"logical-state":function(m){for(var l in m){if(this.state[l]!==m[l]){this.stateChange=true;this.state[l]=m[l]}}},"audio-mute-toggle":function(){var l=!createjs.Sound.getMute();this.owner.state.muted=l;createjs.Sound.setMute(l)},"audio-stop":function(){this.stopAudio()},"audio-mute":function(){createjs.Sound.setMute(true);this.owner.state.muted=true},"audio-unmute":function(){createjs.Sound.setMute(false);this.owner.state.muted=false},"audio-pause":function(l){if(!createjs.Sound.getMute()){this.pauseMutedAudio=true;createjs.Sound.setMute(true)}if(l&&l.global&&!j){j=true}},"audio-unpause":function(l){if(this.pauseMutedAudio){this.pauseMutedAudio=false;createjs.Sound.setMute(false)}if(l&&l.global&&j){j=false}},"set-volume-global":function(l){createjs.Sound.setVolume(l)},"set-volume-component-wide":function(m){for(var l=0;l<this.activeAudioClips.length;l++){this.activeAudioClips[l].setVolume(m)}}},methods:{stopAudio:function(){for(var l in this.activeAudioClips){this.activeAudioClips[l].stop()}this.activeAudioClips.length=0;this.timedAudioClips.length=0;this.priorityTrack=null},checkTimeEvents:function(l,o){var n=0;if(l.sequenceEvents&&l.sequenceEvents.length){n=l.getPosition();if(this.timedAudioClips.length&&!this.useAudioPosition){for(var m in this.timedAudioClips){if(l===this.timedAudioClips[m].audio){n=this.timedAudioClips[m].offset+this.timedAudioClips[m].progress;break}}}while(l.sequenceEvents.length&&(o||(l.sequenceEvents[0].time<=n))){this.owner.trigger(l.sequenceEvents[0].event,l.sequenceEvents[0].message);l.sequenceEvents.splice(0,1)}}},onComplete:function(m,n){this.removeClip(m);this.checkTimeEvents(m,true);this.owner.triggerEvent("clip-complete");if(this.priorityTrack&&(m===this.priorityTrack.audio)){n=this.priorityTrack.next;this.priorityTrack=null}if(n&&n.length){if(typeof n==="string"){(k(n)).call(this)}else{var l=n.slice();l.splice(0,1);if(l.length>0){(k(n[0])).call(this,{next:l})}else{(k(n[0])).call(this)}}}else{this.owner.triggerEvent("sequence-complete")}},removeClip:function(l){for(var m in this.activeAudioClips){if(this.activeAudioClips[m]===l){this.activeAudioClips.splice(m,1);break}}},destroy:function(){this.stopAudio();if(this.preventOverlaps){for(var l in c[this.channel]){if(c[this.channel][l]===this){c[this.channel].splice(l,1);break}}}}}})})();(function(){return b.createComponentClass({id:"handler-render-dom",constructor:function(e){this.element=this.owner.element=document.createElement("div");this.owner.rootElement.appendChild(this.element);this.owner.element=this.element;for(var d in e){if(d==="style"){for(var c in e[d]){this.element.style[c]=e[d][c]}}else{if(d!=="type"){if(d.indexOf("on")===0){this.element[d]=createFunction(e[d],this.owner)}else{this.element[d]=e[d]}}}}this.handleChildren=true;this.extraContent=false},events:{load:function(){var c=0,d=null;for(;c<this.owner.components.length;c++){if((this.owner.components[c]===this)||(this.owner.components[c].type.substring(0,14)==="handler-render")){d=this.owner.components[c]}}if(d!==this){this.handleChildren=false}else{this.addEventListener("handle-render-addition",function(e){var f="";if(!this.extraContent){this.extraContent={}}for(f in e){this.extraContent[f]=e[f]}})}},"child-entity-added":function(d){var c=this;d.trigger("handle-render-load",{element:c.element})},tick:function(e){var c="",d={};if(this.handleChildren){for(c in e){d[c]=e[c]}if(this.extraContent){for(c in this.extraContent){d[c]=this.extraContent[c]}}if(this.owner.triggerEventOnChildren){this.owner.triggerEventOnChildren("handle-render",d)}if(this.extraContent){for(c in this.extraContent){delete this.extraContent[c];delete d[c]}}}else{this.owner.triggerEvent("handle-render-addition",d)}}},methods:{destroy:function(){this.owner.rootElement.removeChild(this.element);this.owner.element=null;this.element=undefined}},publicMethods:{getElementById:function(e){var c=0,d=this.element.getElementsByTagName("*");for(;c<d.length;c++){if(d[c].getAttribute("id")===e){return d[c]}}return document.getElementById(e)}}})})();(function(){var f={small:["stork","crocodile","fish"],medium:["forest","lake","forest-trees","orangutan-male","orangutan-female","bat","durian-tree","stork","crocodile","fish"],large:["forest","lake","mangrove","forest-trees","orangutan-male","orangutan-female","bat","durian-tree","stork","crocodile","fish","goanna","mudskipper","mangrove-trees","monkey"]},d={"forest-trees":["forest-trees","forest-trees","forest"],fish:["fish","fish","lake"],mangrove:["mangrove"],"mangrove-trees":["mangrove-trees","mangrove-trees","mangrove"],goanna:["goanna","goanna","mudskipper"],forest:["forest"],orangutan:["orangutan-female","forest-trees","durian-tree","orangutan-male","bat"],crocodile:["crocodile","crocodile","fish"],stork:["stork","forest-trees","stork","fish"],mudskipper:["mudskipper","mudskipper","mangrove-trees"],lake:["lake"],bat:["bat","durian-tree","bat","forest-trees"],"durian-tree":["durian-tree","durian-tree","bat"],"durian-fruit":["durian-tree","bat"],monkey:["monkey","monkey","mangrove-trees"]},e={small:true,medium:false,large:false},c=function(l){for(var k=l.length-1;k>0;k--){var h=Math.floor(Math.random()*(k+1));var g=l[k];l[k]=l[h];l[h]=g}return l};return b.createComponentClass({id:"dealer",constructor:function(h){this.sourceDeck=null;this.deck=[];this.cards=[];this.puShowing=false;this.puTrees=false;this.puFish=false;var g=this.owner;this.onBlur=function(){g.triggerEventOnChildren("pause",{global:true});g.triggerEventOnChildren("cancel-drop")};window.addEventListener("blur",this.onBlur,false)},events:{"scene-loaded":function(h){var g=null;this.size=h.size||"small";if(h.keepPlaying){g=localStorage.getItem("cyberchase-re");if(g){g=JSON.parse(g);if(g.size){this.size=g.size}}}this.sourceDeck=f[this.size]},undeal:function(j){var g=0;for(g=0;g<this.cards.length;g++){this.owner.removeEntity(this.cards[g])}this.cards.length=0;if(j){var h={};h["show-saplings"]=false;h["show-flood"]=false;h["show-wildlife-upgrade"]=false;this.owner.triggerEvent("handle-power-ups",h);this.puShowing=false}},deal:function(g){var j=[];if(g.force){j=g.force}else{j.push(this.getSuggestedCard(g.suggestions,j));j.push(this.getSuggestedCard(g.suggestions,j));j.push(this.getWildCard(j));if(this.enableWildCard){j.push(this.getWildCard(j))}j=c(j)}for(var h=0;h<j.length;h++){this.createCard(j[h],h)}if(!this.puShowing){this.showPowerUps();this.puShowing=true}},"use-tree-saplings":function(){var g=this;if((b.settings.debug||((b.cheats&2)===2))){g.owner.triggerEvent("tree-boom");g.showPowerUps()}else{if(b.game.kartKingdom&&b.game.kartKingdom.usePowerUps){b.game.kartKingdom.usePowerUps({TreeSaplings:1},function(){g.owner.triggerEvent("tree-boom");g.showPowerUps()})}}},"use-fish-flood":function(){var g=this;if((b.settings.debug||((b.cheats&4)===4))){g.owner.triggerEvent("fish-boom");g.showPowerUps()}else{if(b.game.kartKingdom&&b.game.kartKingdom.usePowerUps){b.game.kartKingdom.usePowerUps({FishBoost:1},function(){g.owner.triggerEvent("fish-boom");g.showPowerUps()})}}},"use-wildlife-upgrade":function(){var g=this;if((b.settings.debug||((b.cheats&1)===1))){g.enableWildCard=true;g.owner.triggerEvent("using-wc");g.showPowerUps()}else{if(b.game.kartKingdom&&b.game.kartKingdom.usePowerUps){b.game.kartKingdom.usePowerUps({WildlifeUpgrade:1},function(){g.enableWildCard=true;g.owner.triggerEvent("using-wc");g.showPowerUps()})}}}},methods:{destroy:function(){window.removeEventListener("blur",this.onBlur)},showPowerUps:function(){var k={},j=0,h=0,g=0;if(b.settings.debug||(b.cheats&7)||(b.game.kartKingdom&&b.game.kartKingdom.hasPowerUp)){j=(b.settings.debug||((b.cheats&2)===2))?1:b.game.kartKingdom.hasPowerUp("TreeSaplings");h=(b.settings.debug||((b.cheats&4)===4))?1:b.game.kartKingdom.hasPowerUp("FishBoost");g=(b.settings.debug||((b.cheats&1)===1))?1:b.game.kartKingdom.hasPowerUp("WildlifeUpgrade");if(j){k["show-saplings"]=true;this.owner.triggerEvent("set-sapling-count",{text:"<div>"+j+"</div>"})}else{k["show-saplings"]=false}if(h){k["show-flood"]=true;this.owner.triggerEvent("set-flood-count",{text:"<div>"+h+"</div>"})}else{k["show-flood"]=false}if(g&&!this.enableWildCard){k["show-wildlife-upgrade"]=true;this.owner.triggerEvent("set-upgrade-count",{text:"<div>"+g+"</div>"})}else{k["show-wildlife-upgrade"]=false}this.owner.triggerEvent("handle-power-ups",k)}},createCard:function(j,h){var k={},g=null;k[j]=true;k["placement-"+h]=true;k.add=true;g=this.owner.addEntity(new b.Entity(b.game.settings.entities.card,{properties:{state:k,card:j}}));this.owner.triggerEvent("entity-created",g);this.cards.push(g)},getHelpCard:function(h){var j=0,g=d[h],k="";k=g.splice(0,1)[0];g.push(k);for(j=0;j<this.sourceDeck.length;j++){if(this.sourceDeck[j]===k){return k}}return this.getHelpCard(h)},getSuggestedCard:function(g,l){var j=[],k=null,h="";j=j.concat(g.forest);j=j.concat(g.lake);j=j.concat(g.mangrove);if(j.length){k=j[Math.floor(j.length*Math.random())];if(k.stage==="none"){h=k.organism}else{h=k.against}return this.getHelpCard(h)}else{return this.getWildCard(l)}},getWildCard:function(l){var j=0,h="",k=true,g=false;while(k){if(!this.deck.length){this.deck=c(this.sourceDeck.slice());if(!g){g=true}else{h=this.deck.splice(0,1)[0];break}}h=this.deck.splice(0,1)[0];k=false;for(j=0;j<l.length;j++){if(h===l[j]){k=true;break}}}return h}},publicMethods:{}})})();(function(){var c=function(e,d){if(typeof e==="string"){return function(f){d.trigger(e,f);f.preventDefault()}}else{if(Array.isArray(e)){return function(g){for(var f=0;f<e.length;f++){d.trigger(e[f],g)}g.preventDefault()}}else{return function(f){d.trigger(e.event,e.message);f.preventDefault()}}}};return b.createComponentClass({id:"dom-element",constructor:function(g){var d=g.element||"div";this.updateClassName=g.updateClassName||false;this.className="";this.states={};this.stateChange=false;this.potentialParent=g.parent;this.handleRenderLoadMessage=null;this.element=document.createElement(d);if(!this.owner.element){this.owner.element=this.element}this.element.ondragstart=function(){return false};for(var f in g){if(f==="style"){for(var e in g[f]){this.element.style[e]=g[f][e]}}else{if(((f!=="type")||(d==="input"))&&(f!=="element")&&(f!=="parent")&&(f!=="updateClassName")&&(f!=="attributes")&&(f!=="messageMap")){if(f.indexOf("on")===0){this.element[f]=c(g[f],this.owner)}else{this.element[f]=g[f];if(f=="className"){this.className=g[f]}}}}}if(this.owner.className){this.className=this.element.className=this.owner.className}if(this.owner.innerHTML){this.element.innerHTML=this.owner.innerHTML}},events:{"handle-render-load":(function(){var d=function(e,h){var f=0,g=e.getElementsByTagName("*");for(;f<g.length;f++){if(g[f].getAttribute("id")===h){return g[f]}}return document.getElementById(h)};return function(g){if(g.element){if(!this.parentElement){if(this.potentialParent){this.parentElement=d(g.element,this.potentialParent);this.parentElement.appendChild(this.element)}else{this.parentElement=g.element;this.parentElement.appendChild(this.element)}}if(this.owner.triggerEventOnChildren){var f=this.handleRenderLoadMessage={};for(var e in g){f[e]=g[e]}f.element=this.element;this.owner.triggerEventOnChildren("handle-render-load",f)}}}})(),"child-entity-added":function(d){if(this.handleRenderLoadMessage){d.trigger("handle-render-load",this.handleRenderLoadMessage)}},"set-parent":function(d){if(this.parentElement){this.parentElement.removeChild(this.element)}this.parentElement=d;this.parentElement.appendChild(this.element)},"handle-logic":function(d){},"handle-render":function(f){var d=0,e=this.className;if(this.stateChange&&this.updateClassName){for(d in this.states){if(this.states[d]){e+=" "+d}}this.element.className=e;this.stateChange=false}},"set-attribute":function(e){var d=null;if(e.attribute){this.element.setAttribute(e.attribute,e.value)}else{for(d in e){this.element.setAttribute(d,e[d])}}},"set-style":function(e){var d=null;if(e.attribute){this.element.style[e.attribute]=e.value}else{for(d in e){this.element.style[d]=e[d]}}},"update-content":function(e){var d=e;if(d&&(typeof d.text==="string")){d=d.text}if((typeof d==="string")&&(d!==this.element.innerHTML)){this.element.innerHTML=d}},"logical-state":function(e){for(var d in e){if(this.states[d]!==e[d]){this.stateChange=true;this.states[d]=e[d]}}}},methods:{destroy:function(){if(this.parentElement){this.parentElement.removeChild(this.element);this.parentElement=undefined}if(this.owner.element===this.element){this.owner.element=undefined}this.element=undefined}}})})();(function(){return b.createComponentClass({id:"show-hide-dialog",constructor:function(c){},events:{"show-dialog":function(){this.owner.state["show-yes-no"]=true},"hide-dialog":function(){this.owner.state["show-yes-no"]=false}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"change-scene",constructor:function(c){this.scene=this.owner.scene||c.scene;this.transition=this.owner.transition||c.transition||"instant";this.persistentData=c.persistentData||{};this.preload=c.preload||false;if(c.message){console.warn('"'+this.type+'" components no longer accept "message": "'+c.message+'" as a definition parameter. Use "aliases": {"'+c.message+'": "new-scene"} instead.')}},events:{"scene-live":function(){if(this.preload){b.game.loadScene(this.scene,this.transition,this.persistentData,true)}},"new-scene":function(c){var f=c||this,d=f.scene||this.scene,e=f.transition||this.transition;data=f.persistentData||this.persistentData;b.game.loadScene(d,e,data)},"set-scene":function(c){this.scene=c},"set-persistent-scene-data":function(d){for(var c in d){this.persistentData[c]=d[c]}}}})})();(function(){var f=function(g,h){return function(k){var j=null;for(j in g){h[j]=g[j]}}},c=function(h,g){return function(j){g[h]=true}},d=function(m,g,o,h,j,p,l){var k=0,n=false,q=h.message||(h.message===0)||(h.message===false);if(j){if(typeof h==="string"){p.trigger(h);n=true}else{if(Array.isArray(h)){for(k=0;k<h.length;k++){d(m,g,o,h[k],j,p,l)}n=true}else{if(h.event&&(q||h.delay)){if(h.delay){l.push(h)}else{p.trigger(h.event,h.message)}n=true}else{if(h["true"]){d(m,g,o,h["true"],j,p,l)}}}}}if(!n){for(k in h){if(k!=="true"){e(k,g,o,h[k],j,p,l)}}}},e=function(m,g,o,h,j,p,k){var l=j,n=false;if(m.charAt(0)==="!"){n=(g[m.substring(1)]===false);if((m!=="outputs")&&(o[m.substring(1)]!==g[m.substring(1)])){l=true}}else{n=(g[m]===true);if((m!=="outputs")&&(o[m]!==g[m])){l=true}}if(n||(m==="outputs")){d(m,g,o,h,l,p,k)}};return b.createComponentClass({id:"logic-state-machine",constructor:function(h){var g=null;this.state=this.owner.state;if(h.inputs){for(g in h.inputs){this.addEventListener(g,f(h.inputs[g],this.state))}}this.sustainedState={};if(h["sustained-inputs"]){for(g in h["sustained-inputs"]){this.addEventListener(g,c(h["sustained-inputs"][g],this.sustainedState));this.sustainedState[h["sustained-inputs"][g]]=false}}this.snapshot={};this.last={};this.tempQueue=[];this.queueTimes=[];this.queue=[];this.outputs=h.outputs||null},events:{"handle-logic":function(h){var g=null;for(g in this.sustainedState){if(this.owner.state[g]!==this.sustainedState[g]){this.owner.state[g]=this.sustainedState[g]}this.sustainedState[g]=false}for(g=this.queue.length-1;g>-1;g--){this.queueTimes[g]-=h.delta;if(this.queueTimes[g]<=0){this.owner.trigger(this.queue[g].event,this.queue[g].message);this.queueTimes.splice(g,1);this.queue.splice(g,1)}}},"update-state":function(h){var g=null;for(g in h){this.state[g]=h[g]}},"logical-state":function(h){var g=null;if(this.outputs){for(g in h){if(h[g]!==this.snapshot[g]){this.snapshot[g]=h[g]}}this.tempQueue.length=0;e("outputs",this.snapshot,this.last,this.outputs,false,this.owner,this.tempQueue);for(g=0;g<this.tempQueue.length;g++){this.queue.push(this.tempQueue[g]);this.queueTimes.push(this.tempQueue[g].delay)}for(g in this.snapshot){if(this.snapshot[g]!==this.last[g]){this.last[g]=this.snapshot[g]}}}}}})})();(function(){var e=function(h){var f=[document.createElement("canvas"),document.createElement("canvas")],g=0;if(!h.___cache){h.___cache=h.cache;h.cache=function(k,n,l,j,m){g=1-g;this.cacheCanvas=f[g];this.___cache(k,n,l,j,m)}}return h},d={x:1,y:1,t:-1,r:0},c=function(j){var h=+(j.substring(4)),k=d,g=!!(536870912&h),f=!!(1073741824&h),l=!!(2147483648&h);k.t=268435455&h;k.x=1;k.y=1;k.r=0;if(g||f||l){if(g&&f&&l){k.x=-1;k.r=90}else{if(g&&l){k.r=90}else{if(f&&l){k.r=180}else{if(g&&f){k.r=270}else{if(g){k.y=-1;k.r=90}else{if(f){k.y=-1}else{if(l){k.x=-1}}}}}}}}return k};return b.createComponentClass({id:"render-tiles",constructor:function(m){var g=0,f=m.spriteSheet.images.slice(),k=null,l=1,j=1;if(f[0]&&(typeof f[0]==="string")){f=f.slice();for(g=0;g<f.length;g++){if(b.assets[f[g]]){f[g]=b.assets[f[g]]}}}k={images:f,frames:m.spriteSheet.frames,animations:m.spriteSheet.animations};l=k.images[0].scaleX||1;j=k.images[0].scaleY||1;if((l!==1)||(j!==1)){k.frames={width:k.frames.width*l,height:k.frames.height*j,regX:k.frames.regX*l,regY:k.frames.regY*j}}this.controllerEvents=undefined;this.spriteSheet=new createjs.SpriteSheet(k);this.imageMap=m.imageMap||[];this.doMap=null;this.tiles={};this.tilesToRender=undefined;this.scaleX=((m.scaleX||1)*(this.owner.scaleX||1))/l;this.scaleY=((m.scaleY||1)*(this.owner.scaleY||1))/j;this.tileWidth=m.tileWidth||(this.owner.tileWidth/this.scaleX)||10;this.tileHeight=m.tileHeight||(this.owner.tileHeight/this.scaleY)||10;this.entityCache=m.entityCache||false;this.worldWidth=this.tilesWidth=this.tileWidth;this.worldHeight=this.tilesHeight=this.tileHeight;var h=(m.buffer||(this.tileWidth*3/4))*this.scaleX;this.camera={x:-h-1,y:-h-1,buffer:h};this.cache={minX:-1,minY:-1,maxX:-1,maxY:-1};this.doubleBuffer=[null,null];this.currentBuffer=0;this.reorderedStage=false},events:{"handle-render-load":function(l){var f=0,m=0,j=null,h="",g=this.imageMap,k=[];if(l&&l.stage){j=this.stage=l.stage;if(j&&!this.reorderedStage){j.reorder=true;this.reorderedStage=true}this.tilesToRender=e(new createjs.Container());this.tilesToRender.name="entity-managed";for(f=0;f<g.length;f++){k[f]=[];for(m=0;m<g[f].length;m++){k[f][m]=h=g[f][m];if(!this.tiles[h]){this.tiles[h]=this.createTile(h)}}}this.imageMap=k;this.tilesWidth=f*this.tileWidth;this.tilesHeight=m*this.tileHeight;this.tilesToRender.scaleX=this.scaleX;this.tilesToRender.scaleY=this.scaleY;this.tilesToRender.z=this.owner.z;j.addChild(this.tilesToRender)}},"peer-entity-added":function(k){var n=0,l=0,p=this.imageMap,j=k.cacheRender,f=null,m=0,g=0,o=0,h=0;if(this.entityCache&&j){if(!this.doMap){this.doMap=[]}f=j.getBounds();m=Math.max(0,Math.floor((k.y-j.y)/this.tileHeight));g=Math.min(p[0].length,Math.ceil((k.y-f.y+f.height)/this.tileHeight));h=Math.max(0,Math.floor((k.x-j.x)/this.tileWidth));o=Math.min(p.length,Math.ceil((k.x-f.x+f.width)/this.tileWidth));for(n=h;n<o;n++){if(!this.doMap[n]){this.doMap[n]=[]}for(l=m;l<g;l++){if(!this.doMap[n][l]){this.doMap[n][l]=[]}this.doMap[n][l].push(j)}}k.removeComponent("render-sprite")}},"add-tiles":function(j){var f=0,l=0,k=j.imageMap,g="",h=0;if(k){for(f=0;f<this.imageMap.length;f++){for(l=0;l<this.imageMap[f].length;l++){h=k[f][l];g=this.imageMap[f][l];if(this.tiles[g]){delete this.tiles[g]}g=this.imageMap[f][l]+=" "+h;if(!this.tiles[g]){this.tiles[g]=this.createTile(g)}}}}},"camera-loaded":function(f){this.worldWidth=f.width;this.worldHeight=f.height},"camera-update":function(s){var k=0,j=0,h=0,r=this.camera.buffer,l=this.cache,f=null,g=null,p=0,n=0,w=0,u=0,A=0,v=0,B=this.convertCamera(s.viewportLeft,this.worldWidth,this.tilesWidth,s.viewportWidth),q=this.convertCamera(s.viewportTop,this.worldHeight,this.tilesHeight,s.viewportHeight),t=Math.floor(B/this.tileWidth)*this.tileWidth,o=Math.floor(q/this.tileHeight)*this.tileHeight,D=null,C=[],m=null;this.tilesToRender.x=s.viewportLeft-B;this.tilesToRender.y=s.viewportTop-q;if(((Math.abs(this.camera.x-t)>r)||(Math.abs(this.camera.y-o)>r))&&(this.imageMap.length>0)){this.camera.x=t;this.camera.y=o;w=Math.min(Math.ceil((t+s.viewportWidth+r)/(this.tileWidth*this.scaleX)),this.imageMap.length)-1;A=Math.max(Math.floor((t-r)/(this.tileWidth*this.scaleX)),0);u=Math.min(Math.ceil((o+s.viewportHeight+r)/(this.tileHeight*this.scaleY)),this.imageMap[0].length)-1;v=Math.max(Math.floor((o-r)/(this.tileHeight*this.scaleY)),0);if((u>l.maxY)||(v<l.minY)||(w>l.maxX)||(A<l.minX)){if(this.tilesToRender.cacheCanvas){g=this.tilesToRender.cacheCanvas;this.tilesToRender.uncache()}this.tilesToRender.removeChildAt(0);this.tilesToRender.cache(A*this.tileWidth,v*this.tileHeight,(w-A+1)*this.tileWidth,(u-v+1)*this.tileHeight,1);for(k=A;k<=w;k++){for(j=v;j<=u;j++){if((j>l.maxY)||(j<l.minY)||(k>l.maxX)||(k<l.minX)){D=this.tiles[this.imageMap[k][j]];this.tilesToRender.removeChildAt(0);this.tilesToRender.addChild(D);D.x=(k+0.5)*this.tileWidth;D.y=(j+0.5)*this.tileHeight;this.tilesToRender.updateCache("source-over");if(this.doMap&&this.doMap[k]&&this.doMap[k][j]){m=this.doMap[k][j];for(h=0;h<m.length;h++){if(!m[h].drawn){m[h].drawn=true;C.push(m[h])}}}}}}if(C.length){for(h=0;h<C.length;h++){delete C[h].drawn;this.tilesToRender.removeChildAt(0);this.tilesToRender.addChild(C[h]);this.tilesToRender.updateCache("source-over")}}if(g){f=this.tilesToRender.cacheCanvas.getContext("2d");p=(l.maxX-l.minX+1)*this.tileWidth;n=(l.maxY-l.minY+1)*this.tileHeight;f.drawImage(g,0,0,p,n,(l.minX-A)*this.tileWidth,(l.minY-v)*this.tileHeight,p,n);l.minX=A;l.minY=v;l.maxX=w;l.maxY=u}}}}},methods:{convertCamera:function(j,g,h,f){if(((g/this.scaleX)===h)||((g/this.scaleX)===f)){return j}else{return j*(h-f)/((g/this.scaleX)-f)}},createTile:function(k){var h=1,l=k.split(" "),f=null,j=new createjs.Sprite(this.spriteSheet,0),g=null;j.x=0;j.y=0;j.regX=this.tileWidth/2;j.regY=this.tileHeight/2;if(l[0]!=="tile-1"){g=c(l[0]);j.scaleX=g.x;j.scaleY=g.y;j.rotation=g.r;j.gotoAndStop("tile"+g.t)}else{j.gotoAndStop("tile-1")}for(;h<l.length;h++){if(l[h]!=="tile-1"){if(!f){f=new createjs.Container();f.addChild(j);f.cache(-this.tileWidth/2,-this.tileHeight/2,this.tileWidth,this.tileHeight,1)}g=c(l[h]);j.scaleX=g.x;j.scaleY=g.y;j.rotation=g.r;j.gotoAndStop("tile"+g.t);f.updateCache("source-over")}}if(f){return f}else{j.cache(0,0,this.tileWidth,this.tileHeight,1);return j}},destroy:function(){this.tilesToRender.removeAllChildren();this.stage.removeChild(this.tilesToRender);this.imageMap.length=0;this.tiles=undefined;this.camera=undefined;this.stage=undefined;this.tilesToRender=undefined}}})})();(function(){var c=[],e=0,d=[];return b.createComponentClass({id:"collision-tiles",constructor:function(f){this.collisionMap=f.collisionMap||[];this.tileWidth=f.tileWidth||this.owner.tileWidth||10;this.tileHeight=f.tileHeight||this.owner.tileHeight||10;this.tileHalfWidth=this.tileWidth/2;this.tileHalfHeight=this.tileHeight/2},methods:{getShape:function(h,f,j){var g=null;if(e<c.length){g=c[e];e+=1;g.update(f*this.tileWidth+this.tileHalfWidth,j*this.tileHeight+this.tileHalfHeight)}else{c.push(new b.CollisionShape(null,{x:f*this.tileWidth+this.tileHalfWidth,y:j*this.tileHeight+this.tileHalfHeight,type:"rectangle",width:this.tileWidth,height:this.tileHeight},"tiles"));g=c[e]}return g},addShape:function(g,h,f,j){if(this.collisionMap[f][j]>-1){g.push(this.getShape(h,f,j))}else{if(this.collisionMap[f][j]<-1){switch(this.collisionMap[f][j]){case -2:if(h.bottom<=j*this.tileHeight){g.push(this.getShape(h,f,j))}break;case -3:if(h.left>=(f+1)*this.tileWidth){g.push(this.getShape(h,f,j))}break;case -4:if(h.top>=(j+1)*this.tileHeight){g.push(this.getShape(h,f,j))}break;case -5:if(h.right<=f*this.tileWidth){g.push(this.getShape(h,f,j))}break}}}return g}},publicMethods:{getAABB:function(){return{left:0,top:0,right:this.tileWidth*this.collisionMap.length,bottom:this.tileHeight*this.collisionMap.length[0]}},isTile:function(f,g){return !((f<0)||(g<0)||(f>=this.collisionMap.length)||(g>=this.collisionMap[0].length)||(this.collisionMap[f][g]===-1))},getTileShapes:function(j,n){var h=Math.max(Math.floor(j.left/this.tileWidth),0),l=Math.max(Math.floor(j.top/this.tileHeight),0),o=Math.min(Math.ceil(j.right/this.tileWidth),this.collisionMap.length),f=Math.min(Math.ceil(j.bottom/this.tileHeight),this.collisionMap[0].length),m=0,k=0,g=d;d.length=0;e=0;for(m=h;m<o;m++){for(k=l;k<f;k++){this.addShape(g,n,m,k)}}return g}}})})();(function(){var c=0;return b.createComponentClass({id:"fade-out",constructor:function(d){this.time=this.total=d.time||2000;this.fading=false},events:{load:function(){c-=0.001;this.owner.z=c},"handle-logic":function(e){var d=0;if(this.fading){this.time-=e.delta;if(this.time<0){this.owner.parent.removeEntity(this.owner)}else{d=this.time/this.total;this.owner.components[0].tilesToRender.alpha=d}}},"fade-out":function(){this.fading=true}},methods:{},publicMethods:{}})})();(function(){var d=false,e=null,c=function(){d=false;e.className=e.className.replace(/ full-screen/g,"");b.game.bindings.resize.callback()},f=function(){if(d){if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.exitFullscreen){document.exitFullscreen()}}}c()}else{d=true;e.className+=" full-screen";if(e.webkitRequestFullscreen){if(!b.game.settings.supports.safari||b.game.settings.supports.chrome){e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}else{if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else{if(e.requestFullscreen){e.requestFullscreen()}}}b.game.bindings.resize.callback()}};document.addEventListener("fullscreenchange",function(g){if(!document.fullscreenElement){c()}});document.addEventListener("webkitfullscreenchange",function(g){if(!document.webkitFullscreenElement){c()}});document.addEventListener("mozfullscreenchange",function(g){if(!document.mozFullScreenElement){c()}});return b.createComponentClass({id:"fullscreen",constructor:function(g){if(!e){e=b.game.containerElement}},events:{"toggle-fullscreen":f}})})();(function(){return b.createComponentClass({id:"logic-button",constructor:function(c){this.state=this.owner.state;this.state.released=true;this.state.pressed=false;this.stateChange="";this.toggle=!!c.toggle;if(c.state==="pressed"){this.stateChange="pressed"}},events:{mousedown:function(){if(!this.toggle){this.stateChange="pressed"}},pressed:function(){this.stateChange="pressed"},pressup:function(){if(this.toggle){if(this.state.pressed){this.owner.triggerEvent("released")}else{this.owner.triggerEvent("pressed")}}else{this.owner.triggerEvent("released")}},mouseup:function(){if(this.toggle){if(this.state.pressed){this.owner.triggerEvent("released")}else{this.owner.triggerEvent("pressed")}}else{this.owner.triggerEvent("released")}},released:function(){this.stateChange="released"},"handle-logic":function(c){if(this.state.released&&(this.stateChange==="pressed")){this.stateChange="";this.state.pressed=true;this.state.released=false}if(this.state.pressed&&(this.stateChange==="released")){this.stateChange="";this.state.pressed=false;this.state.released=true}}}})})();(function(){return b.createComponentClass({id:"asset-loader",constructor:function(c){this.useXHR=true;if(c.useXHR===false){this.useXHR=false}this.assets=c.assets||b.game.settings.assets;this.progressBar=c.progressBar||false;this.message={complete:false,total:0,progress:0,fraction:0}},events:{load:function(){var m=this,c=function(n,p){var j=0,o=false;for(j in p){if(p[j].id===n.id){o=true;break}}if(!o){p.push(n)}};if(b.settings.supports.ie){var k=new createjs.LoadQueue(this.useXHR,"","")}else{var k=new createjs.LoadQueue(this.useXHR,"",true)}var h=[],l=b.game.settings.global.nativeAssetResolution||0,e=b.game.settings.scale=l?Math.min(1,Math.max(window.screen.width,window.screen.height)*(window.devicePixelRatio||1)/l):1,d=function(p,n,v){var j=v||1,q=n||1,s=Math.ceil((p.width/q)*e)*q,t=Math.ceil((p.height/j)*e)*j,o=document.createElement("canvas"),u=o.getContext("2d");o.width=s;o.height=t;o.scaleX=s/p.width;o.scaleY=t/p.height;u.drawImage(p,0,0,p.width,p.height,0,0,s,t);return o};k.addEventListener("fileload",function(o){var n=o.item,p=n.data,j=n.tag;if(o.item.type=="image"){if(l&&(e!==1)){if(p){j=d(j,p.columns,p.rows)}else{j=d(j)}}}b.assets[o.item.id]=j;m.message.progress+=1;m.message.fraction=m.message.progress/m.message.total;if(m.message.progress===m.message.total){m.message.complete=true}m.owner.trigger("fileload",m.message)});k.addEventListener("complete",function(j){setTimeout(function(){m.owner.trigger("complete")},10)});for(var g in this.assets){if(typeof this.assets[g].src==="string"){c(this.assets[g],h)}else{for(var f in this.assets[g].src){if(b.game.settings.aspects[f]&&this.assets[g].src[f]){if(typeof this.assets[g].src[f]==="string"){this.assets[g].src=this.assets[g].src[f];c(this.assets[g],h)}else{this.assets[g].data=this.assets[g].src[f].data||this.assets[g].data;this.assets[g].assetId=this.assets[g].src[f].assetId;this.assets[g].src=this.assets[g].src[f].src;c({id:this.assets[g].assetId||this.assets[g].id,src:this.assets[g].src,data:this.assets[g].data},h)}break}}if(typeof this.assets[g].src!=="string"){if(this.assets[g].src["default"]){if(typeof this.assets[g].src["default"]==="string"){this.assets[g].src=this.assets[g].src["default"];c(this.assets[g],h)}else{this.assets[g].data=this.assets[g].src["default"].data||this.assets[g].data;this.assets[g].assetId=this.assets[g].src["default"].assetId;this.assets[g].src=this.assets[g].src["default"].src;c({id:this.assets[g].assetId||this.assets[g].id,src:this.assets[g].src,data:this.assets[g].data},h)}}else{console.warn("Asset has no valid source for this browser.",this.assets[g])}}}}if(createjs.Sound){k.installPlugin(createjs.Sound)}m.message.total=h.length;k.loadManifest(h);b.assets=[]},fileload:function(d){var c=null;if(this.progressBar){c=document.getElementById(this.progressBar);if(c){c=c.style;c.width=(d.fraction*100)+"%";c.backgroundSize=((1/d.fraction)*100)+"%"}}}}})})();(function(){return b.createComponentClass({id:"logic-portal",constructor:function(c){this.destination=this.owner.destination||c.destination;this.activated=false;this.used=false},events:{"handle-logic":function(){if(!this.used&&this.activated){this.owner.trigger("new-scene",{scene:this.destination});this.used=true}},"occupied-portal":function(d){var c=d.entity;c.trigger("portal-waiting",this.owner)},"activate-portal":function(){this.activated=true}}})})();(function(){var c=function(g,e,f){if(typeof g==="string"){return function(h){if(h.myType===f){if(h.hitType===e){this.owner.triggerEvent(g,h)}}}}else{if(Array.isArray(g)){return function(h){if(h.myType===f){if(h.hitType===e){for(var j in g){this.owner.triggerEvent(g[j],h)}}}}}else{return function(k){var j=k.x,h=k.y;if(k.entity&&!(j||h)){j=k.entity.x-this.owner.x;h=k.entity.y-this.owner.y}if(k.myType===f){if(k.hitType===e){if((h>0)&&g.bottom){this.owner.trigger(g.bottom,k)}if((h<0)&&g.top){this.owner.trigger(g.top,k)}if((j>0)&&g.right){this.owner.trigger(g.right,k)}if((j<0)&&g.left){this.owner.trigger(g.left,k)}if(g.all){this.owner.trigger(g.all,k)}}}}}}},d=function(f,e){if(!e.collisionFunctions){e.collisionFunctions={};e.getAABB=function(j){if(!j){var g=e.aabb=e.aabb||new b.AABB();g.reset();for(var h in e.collisionFunctions){g.include(e.collisionFunctions[h].getAABB())}return g}else{if(e.collisionFunctions[j]){return e.collisionFunctions[j].getAABB()}else{return null}}};e.getPreviousAABB=function(g){if(e.collisionFunctions[g]){return e.collisionFunctions[g].getPreviousAABB()}else{return null}};e.getShapes=function(g){if(e.collisionFunctions[g]){return e.collisionFunctions[g].getShapes()}else{return null}};e.getPrevShapes=function(g){if(e.collisionFunctions[g]){return e.collisionFunctions[g].getPrevShapes()}else{return null}};e.prepareCollision=function(g,j){for(var h in e.collisionFunctions){e.collisionFunctions[h].prepareCollision(g,j)}};e.relocateEntity=function(g,h){e.triggerEvent("relocate-entity",{x:g,y:h})};e.movePreviousX=function(g){for(var h in e.collisionFunctions){e.collisionFunctions[h].movePreviousX(g)}};e.getCollisionTypes=function(){return e.collisionTypes};e.getSolidCollisions=function(){return e.solidCollisions}}e.collisionFunctions[f.collisionType]={getAABB:function(){return f.getAABB()},getPreviousAABB:function(){return f.getPreviousAABB()},getShapes:function(){return f.getShapes()},getPrevShapes:function(){return f.getPrevShapes()},prepareCollision:function(g,h){f.prepareCollision(g,h)},movePreviousX:function(g){f.movePreviousX(g)}}};return b.createComponentClass({id:"collision-basic",constructor:function(h){var r=0,g=null,p=h.regX,o=h.regY,f=h.width,s=h.height,q=h.radius,k=h.margin||0,j=h.marginLeft||k,n=h.marginRight||k,e=h.marginTop||k,l=h.marginBottom||k;if(isNaN(f)){f=this.owner.width;if(isNaN(p)){p=this.owner.regX}}if(isNaN(s)){s=this.owner.height;if(isNaN(o)){o=this.owner.regY}}if(isNaN(q)){q=this.owner.radius;if(isNaN(p)){p=this.owner.regX}if(isNaN(o)){o=this.owner.regY}}this.immobile=this.owner.immobile=this.owner.immobile||h.immobile||false;this.owner.previousX=this.owner.previousX||this.owner.x;this.owner.previousY=this.owner.previousY||this.owner.y;this.aabb=new b.AABB();this.prevAABB=new b.AABB();this.owner.bullet=this.owner.bullet||h.bullet;if(h.shapes){g=h.shapes}else{if(h.shape){g=[h.shape]}else{if(h.shapeType==="circle"){q=q||(((f||0)+(s||0))/4);g=[{regX:(isNaN(p)?q:p)-(n-j)/2,regY:(isNaN(o)?q:o)-(l-e)/2,radius:q,width:q*2,height:q*2,type:h.shapeType}]}else{g=[{regX:(isNaN(p)?(f||0)/2:p)-(n-j)/2,regY:(isNaN(o)?(s||0)/2:o)-(l-e)/2,points:h.points,width:(f||0)+j+n,height:(s||0)+e+l,type:h.shapeType}]}}}this.collisionType=h.collisionType||"none";this.owner.collisionTypes=this.owner.collisionTypes||[];this.owner.collisionTypes.push(this.collisionType);this.shapes=[];this.prevShapes=[];this.entities=undefined;for(r in g){this.shapes.push(new b.CollisionShape(this.owner,g[r],this.collisionType));this.prevShapes.push(new b.CollisionShape(this.owner,g[r],this.collisionType));this.prevAABB.include(this.prevShapes[r].getAABB());this.aabb.include(this.shapes[r].getAABB())}if(h.jumpThrough){this.owner.jumpThrough=true}d(this,this.owner);this.owner.solidCollisions=this.owner.solidCollisions||{};this.owner.solidCollisions[this.collisionType]=[];if(h.solidCollisions){for(var m in h.solidCollisions){this.owner.solidCollisions[this.collisionType].push(m);this.owner.collides=true;if(h.solidCollisions[m]){this.addEventListener("hit-by-"+m,c(h.solidCollisions[m],"solid",this.collisionType))}}}this.owner.softCollisions=this.owner.softCollisions||{};this.owner.softCollisions[this.collisionType]=[];if(h.softCollisions){for(var m in h.softCollisions){this.owner.softCollisions[this.collisionType].push(m);if(h.softCollisions[m]){this.addEventListener("hit-by-"+m,c(h.softCollisions[m],"soft",this.collisionType))}}}},events:{"collide-on":function(){this.owner.parent.trigger("add-collision-entity",this.owner)},"collide-off":function(){this.owner.parent.trigger("remove-collision-entity",this.owner)},"handle-logic":function(){if(this.owner.movementAbsorbed){this.owner.movementAbsorbed=false}},"prepare-for-collision":function(f){var e=this.owner.x,g=this.owner.y;if(!this.owner.movementAbsorbed&&f){this.owner.movementAbsorbed=true;if(this.owner.dx){e+=this.owner.dx*(f.delta||0)}if(this.owner.dy){g+=this.owner.dy*(f.delta||0)}}this.owner.x=e;this.owner.y=g},"relocate-entity":function(f){if(f.relative){this.owner.x=this.owner.previousX+f.x;this.owner.y=this.owner.previousY+f.y}else{this.owner.x=f.x;this.owner.y=f.y}this.aabb.reset();for(var e in this.shapes){this.shapes[e].update(this.owner.x,this.owner.y);this.aabb.include(this.shapes[e].getAABB())}this.owner.previousX=this.owner.x;this.owner.previousY=this.owner.y}},methods:{getAABB:function(){return this.aabb},getPreviousAABB:function(){return this.prevAABB},getShapes:function(){return this.shapes},getPrevShapes:function(){return this.prevShapes},prepareCollision:function(e,g){var f=this.prevShapes;this.owner.x=e;this.owner.y=g;this.prevShapes=this.shapes;this.shapes=f;this.prevAABB.set(this.aabb);this.aabb.reset();for(var e=0;e<this.shapes.length;e++){this.shapes[e].update(this.owner.x,this.owner.y);this.aabb.include(this.shapes[e].getAABB())}},movePreviousX:function(e){this.prevAABB.moveX(e);for(var f=0;f<this.prevShapes.length;f++){this.prevShapes[f].setXWithEntityX(e)}}}})})();(function(){var g=window.devicePixelRatio||1,d={},f=function(h){return function(j){if(this.animationFinished||(this.lastState>=-1)){this.currentAnimation=h;this.lastState=-1;this.animationFinished=false;this.sprite.gotoAndPlay(h)}else{this.waitingAnimation=h;this.waitingState=-1}}},c=function(j,k){var h=j.replace(/ /g,"").split(",");if(j==="default"){return function(l){return k}}else{return function(m){for(var l=0;l<h.length;l++){if(!m[h[l]]){return false}}return k}}},e=(function(){var h=function(j,n){var l=n.indexOf("("),m=n.substring(0,l),k=n.substring(l+1,n.indexOf(")"));if(k.length){j[m].apply(j,k.split(","))}else{j[m]()}};return function(k,m){var l=0,j=m.split(".");for(;l<j.length;l++){h(k,j[l])}}})();return b.createComponentClass({id:"render-sprite",constructor:(function(){var j={"default":0},h=function(n,r){var s=0,t=null,p=null,v=1,u=1,q=false,o=n.spritesheet||n.spriteSheet,w={framerate:0,images:null,frames:null,animations:null},m={definition:w,spritesheet:null};if(!o&&(typeof n.image==="string")){if(d[n.image]){return d[n.image]}else{if(b.game.settings.assets[n.image]&&b.game.settings.assets[n.image].data&&b.game.settings.assets[n.image].data.spritesheet){d[n.image]=m;o=b.game.settings.assets[n.image].data.spritesheet}}}if(o&&!isNaN(o.framerate)){w.framerate=o.framerate}else{if(!isNaN(n.framerate)){w.framerate=n.framerate}else{if(!isNaN(r.framerate)){w.framerate=r.framerate}}}if(o&&Array.isArray(o.images)){w.images=o.images.slice()}else{if(o&&o.image){w.images=[o.image]}else{if(n.images){w.images=n.images.slice()}else{if(n.image){w.images=[n.image]}else{if(r.images){w.images=r.images.slice()}else{if(r.image){w.images=[r.image]}else{console.warn('"'+r.type+'" render component: No source image defined.')}}}}}}for(s=0;s<w.images.length;s++){if(typeof w.images[s]==="string"){if(b.assets[w.images[s]]){w.images[s]=b.assets[w.images[s]];if(!q&&((w.images[s].scaleX&&(w.images[s].scaleX!==1))||(w.images[s].scaleY&&(w.images[s].scaleY!==1)))){q=true}}else{if(b.settings.supports.iOS){console.warn('"'+r.type+'" render component: "'+w.images[s]+'" is not a loaded asset. Make sure the image is not too large for iOS Safari.')}else{console.warn('"'+r.type+'" render component: "'+w.images[s]+'" is not a loaded asset.')}}}}if(o&&o.frames){w.frames=o.frames}else{if(n.frames){w.frames=n.frames}else{if(r.frames){w.frames=r.frames}else{if(n.source){w.frames=[[n.source.x||n.x||0,n.source.y||n.y||0,n.source.width||n.width||w.images[0].width||r.width,n.source.height||n.height||w.images[0].height||r.height,0,n.regX||r.regX||0,n.regY||r.regY||0]];console.warn('"'+r.type+'" render component: The original render-image "source" parameter will soon be deprecated in favor of placing source information as individual parameters directly on the render component.')}else{p=w.images[0];if(p){w.frames=[[n.x||0,n.y||0,n.width||w.images[0].width||r.width,n.height||w.images[0].height||r.height,0,n.regX||r.regX||0,n.regY||r.regY||0]]}}}}}if(q){if(Array.isArray(w.frames)){t=w.frames;w.frames=[];for(s=0;s<t.length;s++){v=w.images[t[s][4]].scaleX||1;u=w.images[t[s][4]].scaleY||1;w.frames.push([t[s][0]*v,t[s][1]*u,t[s][2]*v,t[s][3]*u,t[s][4],t[s][5]*v,t[s][6]*u])}}else{v=w.images[0].scaleX||1;u=w.images[0].scaleY||1;w.frames={width:w.frames.width*v,height:w.frames.height*u,regX:w.frames.regX*v,regY:w.frames.regY*u}}}if(o&&o.animations){w.animations=o.animations}else{if(n.animations){w.animations=n.animations}else{if(r.animations){w.animations=r.animations}else{w.animations=j}}}m.spritesheet=new createjs.SpriteSheet(m.definition);return m},l=function(o,m){var p=null,n="";if(o.animationMap){return o.animationMap}else{if(Array.isArray(m.frames)&&(m.frames.length===1)){return null}else{p={};for(n in m.animations){p[n]=n}return p}}},k=function(m,p){var o="",n="";m.followThroughs={};m.checkStates=[];for(o in p){n=p[o];if(n[n.length-1]==="!"){n=n.substring(0,n.length-1);m.followThroughs[n]=true}else{m.followThroughs[n]=false}if(m.eventBased){m.addEventListener(o,f(n))}if(m.stateBased){m.checkStates.push(c(o,n))}}};return function(o){var m=this,n=h(o,this.owner),p=l(o,n.definition);this.sprite=null;this.stage=null;this.rotate=o.rotate||false;this.mirror=o.mirror||false;this.flip=o.flip||false;this.stateBased=p&&(o.stateBased!==false);this.eventBased=p&&(o.eventBased!==false);this.hover=false;this.click=false;this.touch=false;this.forcePlaythrough=this.owner.forcePlaythrough||o.forcePlaythrough||false;this.initialScaleX=o.scaleX||1;this.initialScaleY=o.scaleY||1;this.imageScaleX=n.definition.images[0].scaleX||1;this.imageScaleY=n.definition.images[0].scaleY||1;this.lastOwnerScaleX=this.owner.scaleX=this.owner.scaleX||1;this.lastOwnerScaleY=this.owner.scaleY=this.owner.scaleY||1;if(o.acceptInput){this.hover=o.acceptInput.hover||false;this.click=o.acceptInput.click||false;this.touch=o.acceptInput.touch||false;this.camera={x:0,y:0};this.addEventListener("camera-update",function(q){m.camera.x=q.viewportLeft;m.camera.y=q.viewportTop})}if(this.eventBased||this.stateBased){k(this,p);this.currentAnimation=p["default"]||""}this.sprite=new createjs.Sprite(n.spritesheet,this.currentAnimation||0);this.sprite.addEventListener("animationend",function(t,s,q,r){m.owner.trigger("animation-ended",q);if(m.waitingAnimation){m.currentAnimation=m.waitingAnimation;m.waitingAnimation=false;m.lastState=m.waitingState;m.animationFinished=false;m.sprite.gotoAndPlay(m.currentAnimation)}else{m.animationFinished=true}});if(o.pins){this.container=new createjs.Container();this.container.addChild(this.sprite);this.sprite.z=0;this.addPins(o.pins,n.definition.frames)}else{this.container=this.sprite}if(o.acceptInput&&o.acceptInput.hitArea){if(typeof o.acceptInput.hitArea==="string"){this.container.hitArea=this.setHitArea(o.acceptInput.hitArea)}else{this.container.hitArea=this.setHitArea("r("+(this.owner.x||0)+","+(this.owner.y||0)+","+(this.owner.width||0)+","+(this.owner.height||0)+")")}}if(o.mask){this.container.mask=this.setMask(o.mask)}this.pinTo=o.pinTo||false;if(this.pinTo){this.owner.triggerEvent("pin-me",this.pinTo)}this.container.scaleX=this.initialScaleX*this.owner.scaleX;this.container.scaleY=this.initialScaleY*this.owner.scaleY;this.sprite.scaleX/=this.imageScaleX;this.sprite.scaleY/=this.imageScaleY;this.scaleX=this.container.scaleX;this.scaleY=this.container.scaleY;this.skewX=this.owner.skewX||o.skewX;this.skewY=this.owner.skewY||o.skewY;this.offsetZ=o.offsetZ||0;this.container.hidden=o.hidden||false;this.state=this.owner.state;this.stateChange=false;this.lastState=-1;this.waitingAnimation=false;this.waitingState=0;this.playWaiting=false;this.animationFinished=false;this.stateChange=true;if(o.cache){this.updateSprite();this.owner.cacheRender=this.container}}})(),events:{"handle-render-load":function(h){if(h&&h.stage){this.addStage(h.stage)}},"handle-render":function(h){if(!this.stage){if(!this.pinTo){if(!this.addStage(h.stage)){console.warn('No CreateJS Stage, removing render component from "'+this.owner.type+'".');this.owner.removeComponent(this);return}}else{return}}this.updateSprite()},"logical-state":function(h){this.stateChange=true},"hide-sprite":function(){this.container.hidden=true},"show-sprite":function(){this.container.hidden=false},"pin-me":function(h){if(this.pins&&this.pins[h]){this.owner.trigger("attach-pin",this.pins[h])}},"attach-pin":function(h){if(h.pinId===this.pinTo){this.stage=h.container;this.stage.addChild(this.container);this.addInputs();this.pinnedTo=h}},"remove-pin":function(h){if(h.pinId===this.pinTo){this.stage.removeChild(this.container);this.stage=null;this.pinnedTo=null}},"dispatch-event":function(h){this.sprite.dispatchEvent(h)}},methods:{addStage:function(h){if(h&&!this.pinTo){this.stage=h;this.stage.addChild(this.container);this.addInputs();return h}else{return null}},updateSprite:(function(){var h=function(k,j){return k.z-j.z};return function(m){var j=false,k=0,l=null;if(this.pinnedTo){if(this.pinnedTo.frames&&this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame]){this.container.x=this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame].x;this.container.y=this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame].y;if(this.container.z!==this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame].z){if(this.stage){this.stage.reorder=true}this.container.z=this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame].z}this.container.rotation=this.pinnedTo.frames[this.pinnedTo.sprite.currentFrame].angle||0;this.container.visible=true}else{if(this.pinnedTo.defaultPin){this.container.x=this.pinnedTo.defaultPin.x;this.container.y=this.pinnedTo.defaultPin.y;if(this.container.z!==this.pinnedTo.defaultPin.z){if(this.stage){this.stage.reorder=true}this.container.z=this.pinnedTo.defaultPin.z}this.container.rotation=this.pinnedTo.defaultPin.angle||0;this.container.visible=true}else{this.container.visible=false}}}else{this.container.x=this.owner.x;this.container.y=this.owner.y;if(this.container.z!==(this.owner.z+this.offsetZ)){if(this.stage){this.stage.reorder=true}this.container.z=(this.owner.z+this.offsetZ)}if(this.owner.opacity||(this.owner.opacity===0)){this.container.alpha=this.owner.opacity}}if(this.container.reorder){this.container.reorder=false;this.container.sortChildren(h)}if(this.skewX){this.container.skewX=this.skewX}if(this.skewY){this.container.skewY=this.skewY}if(this.owner.scaleX!=this.lastOwnerScaleX||this.owner.scaleY!=this.lastOwnerScaleY){this.container.scaleX=this.initialScaleX*this.owner.scaleX;this.container.scaleY=this.initialScaleY*this.owner.scaleY;this.sprite.scaleX/=this.imageScaleX;this.sprite.scaleY/=this.imageScaleY;this.scaleX=this.container.scaleX;this.scaleY=this.container.scaleY;this.lastOwnerScaleX=this.owner.scaleX;this.lastOwnerScaleY=this.owner.scaleY}if(this.rotate||this.mirror||this.flip){l=((this.owner.orientation*180)/Math.PI+360)%360;if(this.rotate){this.container.rotation=l}if(this.mirror){if((l>90)&&(l<270)){this.container.scaleX=-this.scaleX}else{this.container.scaleX=this.scaleX}}if(this.flip){if(l>180){this.container.scaleY=this.scaleY}else{this.container.scaleY=-this.scaleY}}}if(this.stateBased&&this.stateChange){if(this.state.hidden!==undefined){this.container.hidden=this.state.hidden}if(this.checkStates){for(;k<this.checkStates.length;k++){j=this.checkStates[k](this.state);if(j){if(this.currentAnimation!==j){if(!this.followThroughs[this.currentAnimation]&&(!this.forcePlaythrough||(this.animationFinished||(this.lastState>=+k)))){this.currentAnimation=j;this.lastState=+k;this.animationFinished=false;this.sprite.gotoAndPlay(j)}else{this.waitingAnimation=j;this.waitingState=+k}}else{if(this.waitingAnimation&&!this.followThroughs[this.currentAnimation]){this.waitingAnimation=false}}break}}}this.stateChange=false}}})(),addInputs:(function(){var h=function(k,j){return function(l){k.owner.trigger(j,{event:l.nativeEvent,cjsEvent:l,x:(l.stageX*g)/k.stage.scaleX+k.camera.x,y:(l.stageY*g)/k.stage.scaleY+k.camera.y,entity:k.owner})}};return function(){var r=this,j=null,p=null,n=null,s=null,o=null,k=null,l=null,q=null,m=null;if(this.click||this.touch){if(this.touch&&!this.stage.__touch){createjs.Touch.enable(this.stage)}j=h(this,"mousedown");k=h(this,"pressmove");l=h(this,"pressup");q=h(this,"click");m=h(this,"dblclick");this.sprite.addEventListener("mousedown",j);this.sprite.addEventListener("pressmove",k);this.sprite.addEventListener("pressup",l);this.sprite.addEventListener("click",q);this.sprite.addEventListener("dblclick",m)}if(this.hover){this.stage.enableMouseOver();p=h(this,"mouseover");n=h(this,"mouseout");s=h(this,"rollover");o=h(this,"rollout");this.sprite.addEventListener("mouseover",p);this.sprite.addEventListener("mouseout",n);this.container.addEventListener("rollover",s);this.container.addEventListener("rollout",o)}this.removeInputListeners=function(){if(this.click||this.touch){this.sprite.removeEventListener("mousedown",j);this.sprite.removeEventListener("pressmove",k);this.sprite.removeEventListener("pressup",l);this.sprite.removeEventListener("click",q);this.sprite.removeEventListener("dblclick",m)}if(this.hover){this.sprite.removeEventListener("mouseover",p);this.sprite.removeEventListener("mouseout",n);this.container.removeEventListener("rollover",s);this.container.removeEventListener("rollout",o)}}}})(),addPins:function(o,q){var m=0,l=0,k=null,p=q.regX||0,n=q.regY||0,h=Array.isArray(q);this.pinsToRemove=this.pinsToRemove||[];this.pins={};for(;m<o.length;m++){this.pinsToRemove.push(o[m].pinId);if(h){p=(q[0][5]||0)/this.imageScaleX;n=(q[0][6]||0)/this.imageScaleY}this.pins[o[m].pinId]=k={pinId:o[m].pinId,sprite:this.sprite,container:this.container};if((typeof o[m].x==="number")&&(typeof o[m].y==="number")){k.defaultPin={x:(o[m].x-p),y:(o[m].y-n),z:o[m].z||1e-8,angle:(o[m].angle||0)}}if(o[m].frames){k.frames=[];for(l=0;l<o[m].frames.length;l++){if(o[m].frames[l]){if(h){p=(q[l][5]||0)/this.imageScaleX;n=(q[l][6]||0)/this.imageScaleY}if((typeof o[m].frames[l].x==="number")&&(typeof o[m].frames[l].y==="number")){k.frames.push({x:(o[m].frames[l].x-p),y:(o[m].frames[l].y-n),z:o[m].frames[l].z||(k.defaultPin?k.defaultPin.z:1e-8),angle:o[m].frames[l].angle||(k.defaultPin?k.defaultPin.angle:0)})}else{if(k.defaultPin){if(typeof o[m].frames[l].x==="number"){k.frames.push({x:(o[m].frames[l].x-p),y:k.defaultPin.y,z:o[m].frames[l].z||k.defaultPin.z,angle:o[m].frames[l].angle||k.defaultPin.angle})}else{if(typeof o[m].frames[l].y==="number"){k.frames.push({x:k.defaultPin.x,y:(o[m].frames[l].y-n),z:o[m].frames[l].z||k.defaultPin.z,angle:o[m].frames[l].angle||k.defaultPin.angle})}else{k.frames.push(null)}}}else{k.frames.push(null)}}}else{k.frames.push(null)}}}this.owner.trigger("attach-pin",k)}},removePins:function(){var h=0;if(this.pins&&this.pinsToRemove){for(;h<this.pinsToRemove.length;h++){this.owner.trigger("remove-pin",this.pins[this.pinsToRemove[h]].pinId);delete this.pins[this.pinsToRemove[h]]}this.pinsToRemove.length=0}},setMask:function(k){var j=new createjs.Shape(),h=j.graphics;j.x=0;j.y=0;if(typeof k==="string"){e(h,k)}else{if(k.radius){h.dc(k.x||0,k.y||0,k.radius)}else{h.r(k.x||0,k.y||0,k.width||this.owner.width||0,k.height||this.owner.height||0)}}return j},setHitArea:(function(){var h={};return function(m){var k=null,l=null,j="";if(typeof m==="string"){j=m}else{j=JSON.stringify(m)}k=h[j];if(!k){k=new createjs.Shape();l=k.graphics;k.x=0;k.y=0;l.beginFill("#000");if(typeof m==="string"){e(l,m)}else{if(m.radius){l.dc(m.x||0,m.y||0,m.radius)}else{l.r(m.x||0,m.y||0,m.width||this.owner.width||0,m.height||this.owner.height||0)}}h[j]=k}return k}})(),destroy:function(){if(this.removeInputListeners){this.removeInputListeners()}if(this.stage){this.stage.removeChild(this.container);this.stage=undefined}this.removePins();this.followThroughs=null;this.sprite=undefined;this.container=undefined}}})})();(function(){return b.createComponentClass({id:"logic-title-screen-title",constructor:function(c){this.owner.orientation=0;this.rotationRate=0.0005;this.goalOrientation=Math.PI/16;this.lean=false;this.shakeOffsetX=0;this.shakeOffsetY=0;this.xMagnitude=0;this.yMagnitude=0;this.xWaveLength=0;this.yWaveLength=0;this.xShakeTime=0;this.yShakeTime=0;this.shakeTime=0;this.shakeIncrementor=0;this.leanedOnce=false;this.originalX=this.owner.x;this.originalY=this.owner.y},events:{"handle-logic":function(c){if(this.lean){if(this.owner.orientation<this.goalOrientation){this.owner.orientation+=(this.rotationRate*c.delta);if(this.owner.orientation>=this.goalOrientation){this.owner.orientation=this.goalOrientation;this.lean=false}}if(this.owner.orientation>this.goalOrientation){this.owner.orientation-=(this.rotationRate*c.delta);if(this.owner.orientation<=this.goalOrientation){this.owner.orientation=this.goalOrientation;this.lean=false}}}if(this.shakeIncrementor<this.shakeTime){this.shakeIncrementor+=c.delta;this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime);if(this.shakeIncrementor<this.xShakeTime){this.shakeOffsetX=Math.sin((this.shakeIncrementor/this.xWaveLength)*(Math.PI*2))*this.xMagnitude}else{this.shakeOffsetX=0}if(this.shakeIncrementor<this.yShakeTime){this.shakeOffsetY=Math.sin((this.shakeIncrementor/this.yWaveLength)*(Math.PI*2))*this.yMagnitude}else{this.shakeOffsetY=0}if(this.shakeIncrementor>=this.shakeTime){this.owner.x=this.originalX;this.owner.y=this.originalY}}this.owner.x+=this.shakeOffsetX;this.owner.y+=this.shakeOffsetY},"lean-left":function(){this.lean=true;this.goalOrientation=-this.goalOrientation;if(!this.leanedOnce){this.leanedOnce=true;this.owner.triggerEvent("play-title-creak")}},"lean-right":function(){this.lean=true;this.goalOrientation=-this.goalOrientation;if(!this.leanedOnce){this.leanedOnce=true;this.owner.triggerEvent("play-title-creak")}},shake:function(d){var f=d.xMagnitude||0,c=d.yMagnitude||0,h=d.xFrequency||0,e=d.yFrequency||0,g=d.time||0;this.viewportUpdate=true;this.shakeOffsetX=0;this.shakeOffsetY=0;this.shakeIncrementor=0;this.xMagnitude=f;this.yMagnitude=c;if(h==0){this.xWaveLength=1;this.xShakeTime=0}else{this.xWaveLength=(1000/h);this.xShakeTime=Math.ceil(g/this.xWaveLength)*this.xWaveLength}if(e==0){this.yWaveLength=1;this.yShakeTime=0}else{this.yWaveLength=(1000/e);this.yShakeTime=Math.ceil(g/this.yWaveLength)*this.yWaveLength}this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-title-screen-hacker",constructor:function(c){this.owner.state.wait=false;this.owner.state.laugh=false;this.owner.state.look=false;this.owner.state.button=false;this.times={};this.times.wait=1;this.times.laugh=5000;this.times.look=2500;this.times.button=7000;this.times.earthquake=1500;this.times.lean=4500;this.times.hacker=1700;this.stateTime=this.times.wait+1000;this.stateProgression=["wait","look","wait","laugh","wait","button"];this.stateIndex=0;this.shakeDefinition={xMagnitude:3,yMagnitude:3,xFrequency:10,yFrequency:5,time:3000};this.earthquakeTimer=0;this.leanTimer=0;this.leanRight=true;this.hackerTimer=0;this.owner.opacity=0.01;this.setupState=true;this.startHacking=false},events:{"scene-live":function(){this.startHacking=true},"handle-logic":function(c){if(this.startHacking){switch(this.stateProgression[this.stateIndex]){case"wait":if(this.setupState){this.setupState=false;this.owner.opacity=0.01}break;case"laugh":if(this.setupState){this.setupState=false;this.owner.opacity=1;this.owner.z=3;this.owner.x=70;this.owner.y=500;this.hackerTimer=this.times.hacker}if(this.hackerTimer>0){this.hackerTimer-=c.delta;if(this.hackerTimer<=0){this.owner.triggerEvent("play-title-laugh")}}break;case"look":if(this.setupState){this.setupState=false;this.owner.opacity=1;this.owner.z=1;this.owner.x=850;this.owner.y=480}break;case"button":if(this.setupState){this.setupState=false;this.owner.opacity=1;this.owner.z=5;this.owner.x=880;this.owner.y=580;this.earthquakeTimer=this.times.earthquake;this.leanTimer=this.times.lean}if(this.earthquakeTimer>0){this.earthquakeTimer-=c.delta;if(this.earthquakeTimer<=0){this.owner.triggerEvent("play-earthquake");this.owner.triggerEvent("el-shake",this.shakeDefinition)}}if(this.leanTimer>0){this.leanTimer-=c.delta;if(this.leanTimer<=0){if(this.leanRight){this.owner.triggerEvent("el-lean-right");this.leanRight=!this.leanRight}}}break}if(this.stateTime>0){this.stateTime-=c.delta;if(this.stateTime<=0){this.owner.state[this.stateProgression[this.stateIndex]]=false;this.stateIndex+=1;if(this.stateIndex>=this.stateProgression.length){this.stateIndex=0}this.owner.state[this.stateProgression[this.stateIndex]]=true;this.stateTime=this.times[this.stateProgression[this.stateIndex]];this.setupState=true}}}}},methods:{},publicMethods:{}})})();(function(){var c=0,d=["play-tick","play-tock"];return b.createComponentClass({id:"logic-disaster-timer",constructor:function(e){this.timerSlices=16;this.time=15;this.updateTime=false;this.owner.state["tick-0"]=false;this.owner.state["tick-1"]=false;this.owner.state["tick-2"]=false;this.owner.state["tick-3"]=false;this.owner.state["tick-4"]=false;this.owner.state["tick-5"]=false;this.owner.state["tick-6"]=false;this.owner.state["tick-7"]=false;this.owner.state["tick-8"]=false;this.owner.state["tick-9"]=false;this.owner.state["tick-10"]=false;this.owner.state["tick-11"]=false;this.owner.state["tick-12"]=false;this.owner.state["tick-13"]=false;this.owner.state["tick-14"]=false;this.owner.state["tick-15"]=false;this.owner.state["tick-opacity-4"]=false;this.owner.state["tick-opacity-3"]=false;this.owner.state["tick-opacity-2"]=false;this.owner.state["tick-opacity-1"]=false;this.newClass={"class":""};this.bp={};this.bm={}},events:{"update-time":function(g){var f=g,e=0;g*=this.timerSlices*4;g=e=Math.round(g);g/=4;if(g!=this.time){this.time=g;timeCurrent=Math.ceil(this.time);timeNext=timeCurrent-1;slicePortion=(this.time%1)*4;this.newClass["class"]="timer-time ";this.newClass["class"]+="tick-"+(this.timerSlices-timeCurrent)+" ";this.newClass["class"]+="tick-opacity-"+slicePortion;this.owner.triggerEvent("update-class-time-current",this.newClass);if(timeNext>-1){this.newClass["class"]="timer-time ";this.newClass["class"]+="tick-"+(this.timerSlices-timeNext);this.owner.triggerEvent("update-class-time-next",this.newClass)}if((f<=0.25)||(e%2)){this.owner.triggerEvent(d[c]);c=1-c}}},"peer-entity-added":function(e){if(e.type==="button-pause"){this.bp=e.state}else{if(e.type==="button-mute"){this.bm=e.state}}},"hide-timer":function(){this.newClass["class"]="timer";this.owner.triggerEvent("update-class-timer",this.newClass);this.bp.show=false;this.bm.show=false},"show-timer":function(e){this.newClass["class"]="timer show";this.owner.triggerEvent("update-class-timer",this.newClass);this.newClass["class"]="timer-message";if(e>0){this.newClass["class"]+=" timer-warning"}else{this.newClass["class"]+=" timer-final"}this.owner.triggerEvent("update-class-timer-message",this.newClass);this.bp.show=true;this.bm.show=true}},methods:{destroy:function(){}},publicMethods:{}})})();(function(){var d=false,c=function(e){var f=curtop=0;if(e.offsetParent){do{f+=e.offsetLeft;curtop+=e.offsetTop}while(e=e.offsetParent)}return[f,curtop]};return b.createComponentClass({id:"dom-drag-drop",constructor:function(e){this.x=-1;this.y=-1;this.goodSpot=false;this.up=false;this.wasUp=false;this.moved=false;this.cancel=false;this.tutorial="";this.locked=false;this.usedRecently=7500},events:{load:function(){d=false},"handle-logic":function(h){var f=this,e=this.x,j=this.y,g=true;if(!d){this.usedRecently-=h.delta;if(this.usedRecently<0){d=true;this.owner.triggerEvent("prompt-player")}}if(this.up){this.goodSpot=false;if(g){this.owner.triggerEvent("check-this-spot",{x:e,y:j,type:this.owner.card})}else{this.owner.triggerEvent("check-this-spot",null)}this.wasUp=true}if(!this.up&&this.wasUp){if(this.moved){if(!this.cancel&&g&&this.goodSpot){this.owner.triggerEvent("check-this-spot",null);this.owner.triggerEvent("place-card",{x:e,y:j,type:this.owner.card,fromCard:true});if(this.tutorial){if(this.tutorial==="glow-orangutan"){f.owner.triggerEvent("durian-tree-need-unmet")}else{if(this.tutorial==="glow-bat"){f.owner.triggerEvent("durian-tree-need-met")}}this.tutorial=""}this.owner.triggerEvent("released-card");d=true;this.owner.parent.removeEntity(this.owner)}else{this.cancel=false;this.owner.triggerEvent("check-this-spot",null);this.owner.triggerEvent("set-style",{top:"",left:""})}}if(this.tutorial){this.owner.state[this.tutorial]=true}this.moved=false;this.goodSpot=false;this.wasUp=false;this.x=-1;this.y=-1;this.owner.triggerEvent("released-card")}},"valid-tile":function(e){if(this.up){this.goodSpot=e}},"pick-up":function(){if(!this.locked){this.up=true}},"cancel-drop":function(){this.up=false;this.cancel=true},drop:function(){this.up=false},move:function(f){var e=null;if(this.up){if(f.event&&(f.event.pageX||f.event.pageY||f.event.touches)){f=f.event}e=c(this.owner.parent.element);if(f.touches&&f.touches.length){this.x=f.touches[0].pageX-e[0];this.y=f.touches[0].pageY-e[1]}else{this.x=f.pageX-e[0];this.y=f.pageY-e[1]}this.owner.triggerEvent("set-style",{top:(this.y-(this.owner.element.offsetHeight/2))+"px",left:(this.x-(this.owner.element.offsetWidth/2))+"px"});this.moved=true}},"glow-orangutan":function(e){if(this.owner.state["orangutan-female"]){this.owner.state["glow-orangutan"]=true;this.tutorial="glow-orangutan";this.locked=false}},lock:function(e){},unlock:function(e){this.locked=false},"glow-bat":function(e){if(this.owner.state.bat){this.owner.state["glow-bat"]=true;this.tutorial="glow-bat";this.locked=false}d=true}},methods:{},publicMethods:{}})})();(function(){var c=225;return b.createComponentClass({id:"map-navigator",constructor:function(d){this.width=4;this.height=2;this.dx=0;this.dy=0;this.position={x:0,y:0}},events:{load:function(){this.handleArrows(0,0)},"world-loaded":function(d){this.width=d.width/c-2-4;this.height=d.height/c-2-2;this.handleArrows(this.position.x,this.position.y)},"handle-logic":function(d){if(this.dx!=0||this.dy!=0){this.position.x+=this.dx;this.position.y+=this.dy;if(this.position.x<0){this.position.x=0}else{if(this.position.x>this.width){this.position.x=this.width}}if(this.position.y<0){this.position.y=0}else{if(this.position.y>this.height){this.position.y=this.height}}this.handleArrows(this.position.x,this.position.y);this.owner.triggerEvent("el-go-to-grid-position",this.position);this.dx=0;this.dy=0}},"go-north":function(){this.dy=-1},"go-east":function(){this.dx=1},"go-south":function(){this.dy=1},"go-west":function(){this.dx=-1},"jump-to-position":function(d){this.position.x=d.x;this.position.y=d.y;this.handleArrows(this.position.x,this.position.y)},"disable-arrows":function(){this.owner.state["all-hidden"]=true},"enable-arrows":function(){this.owner.state["all-hidden"]=false}},methods:{handleArrows:function(d,f){var e=this.owner.state;if(d===0){e["west-hidden"]=true}else{e["west-hidden"]=false}if(d===this.width){e["east-hidden"]=true}else{e["east-hidden"]=false}if(f===0){e["north-hidden"]=true}else{e["north-hidden"]=false}if(f===this.height){e["south-hidden"]=true}else{e["south-hidden"]=false}}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"tap-me",constructor:function(c){this.taps=c.taps||[null];this.tutorial=false},events:{pressup:function(){var c=null;if(!this.paused){c=this.taps.splice(0,1)[0];this.owner.trigger(c);if((c==="need")&&this.owner.needer){this.owner.needer.trigger(["announce-need","drop-shield"])}this.taps.push(c)}if(this.tutorial){if(this.tutorial===2){this.owner.parent.triggerEvent("tutorial-need-complete");this.tutorial=false}else{this.owner.parent.triggerEvent("tutorial-action-occurred",this.owner)}}},pause:function(c){if(c&&c.tutorial){this.tutorial=c.tutorial}else{this.tutorial=false}},unpause:function(){this.tutorial=false;this.paused=false},quiet:function(){this.paused=true}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"bubble-in",constructor:function(c){this.owner.scaleX=0.01;this.owner.scaleY=0.01},events:{load:function(d){var c=this;createjs.Tween.get(this.owner).to({scaleX:1.1,scaleY:1.1},500).to({scaleX:0.9,scaleY:0.9},100).to({scaleX:1,scaleY:1},50).call(function(){if(c.owner&&c.owner.triggerEvent){c.owner.triggerEvent("bubbled-in")}})},unload:function(f){var e=(f&&f.delay)?f.delay:1000;var d=this;this.owner.triggerEvent("drop-shield");this.owner.triggerEvent("leave-node");if(f&&f.animation=="abduct"){var c=this.owner.y-100;createjs.Tween.get(this.owner).wait(e).to({scaleX:0.9,scaleY:0.9},50).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:0.1,scaleY:0.1,y:c},500).call(function(){if(d.owner&&d.owner.triggerEvent){d.owner.triggerEvent("bubbled-out");if(d.owner.parent&&d.owner.parent.removeEntity){d.owner.parent.removeEntity(d.owner)}}if(f&&f.onBubbleOut){f.onBubbleOut()}})}else{createjs.Tween.get(this.owner).wait(e).to({scaleX:0.9,scaleY:0.9},50).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:0.1,scaleY:0.1},50).call(function(){if(d.owner&&d.owner.triggerEvent){d.owner.triggerEvent("bubbled-out");if(d.owner.parent&&d.owner.parent.removeEntity){d.owner.parent.removeEntity(d.owner)}}if(f&&f.onBubbleOut){f.onBubbleOut()}})}}},methods:{},publicMethods:{}})})();(function(){var g=70,e=140,h=75,c=100,d=5000,f=0;return b.createComponentClass({id:"logic-popup-major",constructor:function(j){this.time=0;this.cLeft=0;this.cTop=0;this.cWidth=0;this.cHeight=0;this.orgOffset={fish:{x:0,y:-80},goanna:{x:0,y:-100},crocodile:{x:0,y:-90},monkey:{x:0,y:-130},mudskipper:{x:0,y:-100},orangutan:{x:0,y:-130},stork:{x:0,y:-130},bat:{x:20,y:-100},"durian-tree":{x:25,y:-225},"forest-trees":{x:0,y:-225},"mangrove-trees":{x:0,y:-225}}},events:{load:function(){this.owner.triggerEvent(this.owner.targetType);this.owner.z+=f;f+=1},"handle-logic":function(j){if(this.owner.living){this.updatePosition()}if(this.time<d){this.time+=j.delta;if(this.time>=d){this.owner.triggerEvent("unload")}}},mousedown:function(){this.owner.triggerEvent("el-extinction-warning-pan",{x:this.owner.target.x,y:this.owner.target.y})},"camera-update":function(j){this.cLeft=j.viewportLeft;this.cTop=j.viewportTop;this.cWidth=j.viewportWidth;this.cHeight=j.viewportHeight;this.updatePosition()},pressup:function(){var k=this.owner.inez,l="popup-";if(this.owner.state.critical){l+="no-"}else{l+="low-"}for(var j in this.owner.state){if(j!=="critical"){k.triggerEvent(l+j)}}}},methods:{updatePosition:function(){var l=0,k=0,j=false;if(this.cLeft+h>this.owner.target.x){this.owner.x=this.cLeft+h;j=true}else{if(this.cLeft+this.cWidth-h<this.owner.target.x+this.orgOffset[this.owner.targetType].x){this.owner.x=this.cLeft+this.cWidth-h;j=true}else{this.owner.x=this.owner.target.x}}if(this.cTop+g>this.owner.target.y){this.owner.y=this.cTop+g;j=true}else{if(this.cTop+this.cHeight-e<this.owner.target.y+this.orgOffset[this.owner.targetType].y){this.owner.y=this.cTop+this.cHeight-e;j=true}else{this.owner.y=this.owner.target.y}}if(j){l=this.owner.target.x-this.owner.x;k=this.owner.target.y-this.owner.y;this.owner.orientation=Math.atan2(k,l)-(Math.PI/2)}else{if(this.owner.living&&this.orgOffset[this.owner.targetType]){this.owner.y-=(c+this.orgOffset[this.owner.targetType])}else{this.owner.y+=this.orgOffset[this.owner.targetType].y;this.owner.x+=this.orgOffset[this.owner.targetType].x}this.owner.orientation=0}},destroy:function(){this.owner.target=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-background",constructor:function(c){},events:{"camera-update":function(c){this.owner.x=c.viewportLeft+c.viewportWidth/2;this.owner.y=c.viewportTop+c.viewportHeight/2},"handle-logic":function(c){}},methods:{},publicMethods:{}})})();(function(){var d=function(e){var f=function(h,g){if(g&&!h.message){return{event:h.event,message:g,delay:h.delay,repeat:h.repeat}}else{return h}};if(e.singleInstance){return function(h){var g=0,j=true;for(;g<this.queue.length;g++){if(this.queue[g].event===e.event){j=false}}if(j){this.queue.push(f(e,h));this.queueTimes.push(e.delay)}}}else{return function(g){this.queue.push(f(e,g));this.queueTimes.push(e.delay)}}},c=function(e){return function(){var f=this.queue.length-1;for(;f>-1;f--){if(this.queue[f]===e){this.queueTimes.splice(f,1);this.queue.splice(f,1)}}}};return b.createComponentClass({id:"logic-delay-message",constructor:function(e){this.queueTimes=[];this.queue=[];if(e.events){for(var f in e.events){this.addEventListener(f,d(e.events[f]));if(e.events[f].cancelEvent){this.addEventListener(e.events[f].cancelEvent,c(e.events[f]))}}}},events:{"handle-logic":function(f){var e=this.queue.length-1;for(;e>-1;e--){this.queueTimes[e]-=f.delta;if(this.queueTimes[e]<=0){this.owner.trigger(this.queue[e].event,this.queue[e].message);if(this.queue[e].repeat){this.queueTimes[e]+=this.queue[e].delay}else{this.queueTimes.splice(e,1);this.queue.splice(e,1)}}}}},methods:{destroy:function(){this.queueTimes.length=0;this.queue.length=0}}})})();(function(){var d=225,c=225;return b.createComponentClass({id:"logic-camera-man",constructor:function(e){this.gridWidth=0;this.gridHeight=0;this.cameraState="grid";this.gridPosition={x:0,y:0};this.targetEntity=null;this.bounds={minX:0,maxX:0,minY:0,maxY:0};this.originOffset={x:d*3,y:c*2}},events:{"world-loaded":function(e){var f=null;this.gridWidth=e.width/d-2-4;this.gridHeight=e.height/c-2-2;this.bounds.minX=3*d;this.bounds.maxX=(3+this.gridWidth)*d;this.bounds.minY=2*c;this.bounds.maxY=(2+this.gridHeight)*c;this.gridPosition.x=this.gridWidth/2;this.gridPosition.y=this.gridHeight/2;this.owner.x=this.gridPosition.x*d+this.originOffset.x;this.owner.y=this.gridPosition.y*d+this.originOffset.y;followDef={mode:"locked",entity:this.owner};this.owner.triggerEvent("el-follow",followDef);this.owner.triggerEvent("el-jump-to-position",{x:this.gridPosition.x,y:this.gridPosition.y})},"handle-logic":function(e){if(this.cameraState=="grid"){this.owner.x=this.gridPosition.x*d+this.originOffset.x;this.owner.y=this.gridPosition.y*d+this.originOffset.y}else{if(this.cameraState=="following"){if(this.targetEntity){this.owner.x=this.targetEntity.x;this.owner.y=this.targetEntity.y;this.owner.x=Math.max(this.owner.x,this.bounds.minX);this.owner.x=Math.min(this.owner.x,this.bounds.maxX);this.owner.y=Math.max(this.owner.y,this.bounds.minY);this.owner.y=Math.min(this.owner.y,this.bounds.maxY)}}}},"follow-entity":function(e){this.cameraState="following";this.targetEntity=e},"stop-following":function(){this.targetEntity=null;this.owner.triggerEvent("move-to-closest-grid")},"move-to-closest-grid":function(e){var f=null;if(!e){e={x:this.owner.x,y:this.owner.y}}f=this.coordsToGrid(e.x,e.y);f.x=Math.round(f.x);f.y=Math.round(f.y);this.setGridPosition(f.x,f.y);this.owner.triggerEvent("el-jump-to-position",{x:this.gridPosition.x,y:this.gridPosition.y})},"go-to-grid-position":function(e){this.setGridPosition(e.x,e.y)}},methods:{setGridPosition:function(e,f){this.cameraState="grid";this.gridPosition.x=e;if(this.gridPosition.x<0){this.gridPosition.x=0}else{if(this.gridPosition.x>this.gridWidth){this.gridPosition.x=this.gridWidth}}this.gridPosition.y=f;if(f<0){this.gridPosition.y=0}else{if(f>this.gridHeight){this.gridPosition.y=this.gridHeight}}},coordsToGrid:function(e,g){var f={x:0,y:0};f.x=(e-this.originOffset.x)/d;f.y=(g-this.originOffset.y)/c;return f},gridToCoords:function(e,g){var f={x:0,y:0};f.x=e*d+this.originOffset.x;f.y=g*c+this.originOffset.y;return f},destroy:function(){gridPosition=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-fade-up",constructor:function(c){this.popped=false;this.moveFrom=null;this.moveBy=c.move||{z:0,y:-100,x:0};this.opacitySwitch=c.fadeThreshold||0.1;this.deathTimerStart=this.deathTimer=c.time||1200},events:{"handle-logic":function(d){var e=d.delta;var c=0;if(this.popped){if(!this.moveFrom){this.moveFrom={x:this.owner.x,y:this.owner.y,z:this.owner.z||0}}this.deathTimer-=e;if(this.deathTimer<=0){this.owner.parent.removeEntity(this.owner)}else{c=this.deathTimer/this.deathTimerStart;this.owner.x=this.moveFrom.x+((1-c)*this.moveBy.x);this.owner.y=this.moveFrom.y+((1-c)*this.moveBy.y);this.owner.z=this.moveFrom.z+((1-c)*this.moveBy.z);if(c<=this.opacitySwitch){this.owner.opacity=c/this.opacitySwitch}}}},pop:function(c){if(!this.popped){this.popped=true;this.owner.triggerEvent("popped")}}}})})();(function(){var c=function(f,h,g,e){return function(){f.trigger(h,g,e)}},d=function(e){return function(g){var j=0,k=e,l=null,f=null,h=createjs.Tween.get(this.owner);if(Array.isArray(g)){k=g}else{if(!Array.isArray(k)){return}}for(;j<k.length;j++){l=k[j];if(typeof l==="string"){h.call(c(this.owner,l))}else{if(Array.isArray(l)){if(l[0]==="call"&&typeof l[1]==="string"){h.call(c(this.owner,l[1]))}else{f=l.slice();f.splice(0,1);h[l[0]].apply(h,f)}}else{if(l.method==="call"&&typeof l.arguments==="string"){h.call(c(this.owner,l.arguments))}else{h[l.method].apply(h,l.arguments)}}}}}};return b.createComponentClass({id:"tween",constructor:function(e){if(e.events){for(var f in e.events){this.addEventListener(f,d(e.events[f]))}}}})})();(function(){return b.createComponentClass({id:"disaster-audio-logic",constructor:function(c){this.totalFadeTime=1;this.fadeTime=0},events:{"handle-logic":function(c){if(this.fadeTime>0){this.fadeTime-=c.delta;if(this.fadeTime<=0){this.fadeTime=0;this.owner.triggerEvent("audio-stop");this.owner.triggerEvent("set-volume-component-wide",1)}else{this.owner.triggerEvent("set-volume-component-wide",this.fadeTime/this.totalFadeTime)}}},"fade-out":function(c){if(!c){c=1000}this.totalFadeTime=c;this.fadeTime=this.totalFadeTime}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"particle-emitter",constructor:function(c){this.particles=[];this.particleCount=c.particleCount||5;this.particleType=c.particleType;this.offsetX=c.offsetX||0;this.offsetY=c.offsetY||0;this.interval=1000/(c.frequency||10);this.timeToNext=0;this.rotate=c.rotate||false;this.mirror=c.mirror||false;this.flip=c.flip||false;this.behavior={translation:"static",rotation:"static",velocityX:0,velocityY:0,velocityA:0,visual:"static",scale:"static",scaleM:1,scaleB:0,lifetime:1000};if(c.behavior){for(var d in c.behavior){this.behavior[d]=c.behavior[d]}}if(!this.owner.orientation){this.owner.orientation=0}this.on=false;this.particleIndex=0;this.zOffset=c.zOffset||0},events:{adopted:function(){for(var c=0;c<this.particleCount;c++){this.particles[c]=this.owner.parent.addEntity(new b.Entity(b.game.settings.entities[this.particleType],{}))}},"handle-logic":function(d){var e=d.delta;if(this.on){this.timeToNext-=e;if(this.timeToNext<=0){this.timeToNext=this.interval;if(!this.particles[this.particleIndex].active){this.emit(this.particles[this.particleIndex]);this.particleIndex++;if(this.particleIndex>=this.particleCount){this.particleIndex=0}}else{console.log("it is active")}}}for(var c=0;c<this.particles.length;c++){if(this.particles[c].active){this.update(this.particles[c],e)}}},"emitter-on":function(){this.on=true},"emitter-off":function(){this.on=false;this.timeToNext=this.interval}},methods:{emit:function(c){if(this.rotate){c.x=this.owner.x+(Math.cos(this.owner.orientation)*this.offsetX-Math.sin(this.owner.orientation)*this.offsetY);c.y=this.owner.y+(Math.sin(this.owner.orientation)*this.offsetX+Math.cos(this.owner.orientation)*this.offsetY);c.orientation=this.owner.orientation}else{if(this.flip&&this.owner.orientation>Math.PI){c.x=this.owner.x+this.offsetX;c.y=this.owner.y-this.offsetY;c.orientation=this.owner.orientation}else{if(this.mirror&&this.owner.orientation>Math.PI/2&&this.owner.orientation<(3*Math.PI)/2){c.x=this.owner.x-this.offsetX;c.y=this.owner.y+this.offsetY;c.orientation=this.owner.orientation}else{c.x=this.owner.x+this.offsetX;c.y=this.owner.y+this.offsetY;c.orientation=this.owner.orientation}}}c.z=this.owner.z+this.zOffset;c.vX=this.behavior.velocityX;c.vY=this.behavior.velocityY;c.vA=this.behavior.velocityA;c.opacity=1;c.scaleX=1;c.scaleY=1;c.lifetime=this.behavior.lifetime;c.active=true;this.zOffset+=0.0001},update:function(d,c){d.lifetime-=c;if(d.lifetime<=0){d.active=false;d.opacity=0;return}this.translate(d,c);this.orient(d,c);this.visualize(d,c);this.scale(d,c)},translate:function(d,c){switch(this.behavior.translation){case"constant":d.x+=d.vX*c;d.y+=d.vY*c;break;case"static":default:break}},orient:function(d,c){switch(this.behavior.rotation){case"constant":d.orientation+=d.vA*c;break;case"static":default:break}},visualize:function(d,c){switch(this.behavior.visual){case"lifetime-fade":d.opacity=d.lifetime/this.behavior.lifetime;break;case"static":default:break}},scale:function(d,c){switch(this.behavior.scale){case"linear":d.scaleX=(this.behavior.lifetime-d.lifetime)*this.behavior.scaleM+this.behavior.scaleB;d.scaleY=(this.behavior.lifetime-d.lifetime)*this.behavior.scaleM+this.behavior.scaleB;break;case"static":default:break}},destroy:function(){for(var c=0;c<this.particles.length;c++){this.particles[c].parent.removeEntity(this.particles[c])}this.particles=null}},publicMethods:{}})})();(function(){var d=0.5,c=500;return b.createComponentClass({id:"logic-disease-ship",constructor:function(e){this.cLeft=0;this.cTop=0;this.cWidth=0;this.cHeight=0;this.worldWidth=null;this.timeToNext=1000;this.goingRight=Math.floor(Math.random()*2)?true:false;this.passes=0;this.phase="relocate";this.preDeathPause=1000},events:{"handle-logic":function(f){var e=false;var g=0;switch(this.phase){case"relocate":if(this.timeToNext>0){this.timeToNext-=f.delta;if(this.timeToNext<=0){this.phase="fly-setup"}}break;case"fly-setup":if(this.passes>1){this.phase="end"}else{if(this.passes==1){this.owner.triggerEvent("play-disease-pass-1");this.startDisease();this.owner.triggerEvent("pass-1")}else{this.owner.triggerEvent("play-disease-pass-0");this.owner.triggerEvent("pass-0")}if(this.goingRight){this.owner.x=this.cLeft-c;this.owner.y=this.cTop+(this.cHeight/4);this.owner.orientation=0}else{this.owner.x=this.cLeft+this.cWidth+c;this.owner.y=this.cTop+(this.cHeight/3);this.owner.orientation=Math.PI}this.phase="fly"}break;case"fly":this.owner.triggerEvent("emitter-on");if(this.goingRight){this.owner.x+=d*f.delta;if(this.owner.x>this.cLeft+this.cWidth+c){this.passes++;this.goingRight=false;this.phase="fly-setup"}}else{this.owner.x-=d*f.delta;if(this.owner.x<this.cLeft-c){this.passes++;this.goingRight=true;this.phase="fly-setup"}}break;case"end":if(this.preDeathPause>0){this.preDeathPause-=f.delta;if(this.preDeathPause<=0){this.owner.triggerEvent("emitter-off");this.owner.triggerEvent("el-disaster-finished");this.owner.parent.removeEntity(this.owner)}}break}},"camera-update":function(e){this.cLeft=e.viewportLeft;this.cTop=e.viewportTop;this.cWidth=e.viewportWidth;this.cHeight=e.viewportHeight},"camera-loaded":function(h){var g=0,f=0,j=null,l=0,k=Infinity;for(var e=0;e<this.owner.toRemove.length;e++){g+=this.owner.toRemove[e].x;f+=this.owner.toRemove[e].y}g/=this.owner.toRemove.length;f/=this.owner.toRemove.length;for(var e=0;e<this.owner.toRemove.length;e++){l=Math.pow((this.owner.toRemove[e].x-g),2)+Math.pow((this.owner.toRemove[e].y-f),2);if(l<k){k=l;j=this.owner.toRemove[e]}}this.worldWidth=h.width;this.owner.triggerEvent("el-move-to-closest-grid",j)}},methods:{startDisease:function(){var f=0;for(var e=0;e<this.owner.toRemove.length;e++){if(this.owner.toRemove[e].type==="fish"){f=40;this.owner.triggerEvent("el-entity-created",this.owner.parent.addEntity(new b.Entity(b.game.settings.entities.disease,{properties:{x:this.owner.toRemove[e].x,y:this.owner.toRemove[e].y+f,z:this.owner.toRemove[e].z+1}})))}else{f=-30;this.owner.triggerEvent("el-entity-created",this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["disease-land"],{properties:{x:this.owner.toRemove[e].x,y:this.owner.toRemove[e].y+f,z:this.owner.toRemove[e].z+1}})))}this.owner.trigger("el-remove-organism",{organism:this.owner.toRemove[e],disaster:"disease"})}},destroy:function(){this.owner.toRemove=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"ai-cyclone",constructor:function(c){this.target=null;this.finalTarget=false;this.targetDistance=50;this.worldWidth=0;this.playedSound=false;this.state="frozen";this.genericPosition={x:0,y:0,z:0};this.genericProperties={properties:this.genericPosition};this.done=false;this.growSpan=3000;this.oneFourthGrow=this.growSpan/4;this.threeFourthsGrow=this.growSpan*3/4;this.growTime=this.growSpan;this.owner.scaleX=0;this.owner.scaleY=0;this.owner.opacity=1;this.livingDeadTime=500;this.scriptCalled=false},events:{"handle-ai":function(f){var e=0,g=null,d=null;if(this.state=="living-dead"){if(this.livingDeadTime>0){this.livingDeadTime-=f.delta;if(this.livingDeadTime<=0){this.owner.parent.removeEntity(this.owner)}}}else{if(this.state=="frozen"){if(!this.done){this.done=true;this.owner.triggerEvent("el-follow-entity",{x:this.owner.x,y:this.owner.y-100});this.genericPosition.x=-320;this.genericPosition.y=-300;this.genericPosition.z=this.owner.z+1;this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["cyclone-hacker"],this.genericProperties));this.genericPosition.x=this.owner.x;this.genericPosition.y=this.owner.y;this.genericPosition.z=this.owner.z+1;this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["cyclone-clouds"],this.genericProperties));this.genericPosition.x=this.owner.x;this.genericPosition.y=this.owner.y;this.genericPosition.z=this.owner.z+1;this.genericPosition.target=this.owner;this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["cyclone-mini"],this.genericProperties));this.genericPosition.orbitPosition=Math.PI;this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["cyclone-mini"],this.genericProperties))}}else{if(this.state=="grow"){this.growTime-=f.delta;if(!this.playedSound){this.playedSound=true;this.owner.triggerEvent("play-cyclone-winds")}if(this.growTime<=0){this.state="active";this.owner.triggerEvent("el-follow-entity",this.owner);this.opacity=1;this.owner.scaleX=1;this.owner.scaleY=1}else{this.owner.scaleX=((this.growSpan-this.growTime)/this.growSpan);this.owner.scaleY=this.owner.scaleX}}else{if(!this.target){this.getTarget()}if(this.target){e=Math.sqrt(Math.pow(this.target.x-this.owner.x,2)+Math.pow(this.target.y-this.owner.y,2));if(e<=this.targetDistance){if(!this.scriptCalled){this.scriptCalled=true;this.owner.triggerEvent("el-trigger-script")}if(!this.finalTarget){d=this.target.node;if(d){for(var c=d.contains.length-1;c>-1;c--){g=d.contains[c];if(((g.type=="orangutan"||g.type=="monkey")&&(g.state.treed||g.state.detreed))||(g.type=="bat"&&g.state.pollinating)){this.owner.triggerEvent("el-remove-organism",{organism:g,disaster:"cyclone"})}}for(var c=d.contains.length-1;c>-1;c--){g=d.contains[c];if(g.type=="mangrove-trees"||g.type=="forest-trees"||g.type=="durian-fruit"||g.type=="durian-flower"){this.owner.triggerEvent("el-remove-organism",{organism:g,disaster:"cyclone"})}}for(var c=d.contains.length-1;c>-1;c--){g=d.contains[c];if(g.type=="durian-tree"){this.owner.triggerEvent("el-remove-organism",{organism:g,disaster:"cyclone"})}}}}this.getTarget()}}}}}},"camera-update":function(c){},"camera-loaded":function(c){this.worldWidth=c.width},grow:function(){this.state="grow"}},methods:{getTarget:function(){var e=Infinity,f=0,d=0;if(this.owner.targets.length>0){for(var c=0;c<this.owner.targets.length;c++){f=Math.sqrt(Math.pow(this.owner.x-this.owner.targets[c].x,2)+Math.pow(this.owner.y-this.owner.targets[c].y,2));if(f<e){e=f;d=c}}this.target=this.owner.targets.splice(d,1)[0];this.owner.trigger("set-target",this.target)}else{if(this.finalTarget){this.owner.triggerEvent("el-disaster-finished");this.owner.triggerEvent("el-stop-following");this.owner.opacity=0;this.state="living-dead";this.owner.triggerEvent("fade-out-disaster")}else{this.finalTarget=true;if(this.owner.x>this.worldWidth/2){this.target={x:this.worldWidth+300,y:this.owner.y}}else{this.target={x:-300,y:this.owner.y}}this.owner.trigger("set-target",this.target)}}},destroy:function(){this.target=null;this.owner.targets=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"ai-chaser",constructor:function(c){this.target=null;this.piOverTwo=Math.PI/2;this.prevAngle=0;this.chasing=true;this.offset={x:0,y:0}},events:{"handle-ai":function(){if(this.target&&this.chasing){this.owner.trigger("move");var e=0;var d=this.target.x+this.offset.x-this.owner.x;var c=this.target.y+this.offset.y-this.owner.y;if(d==0){if(c>0){e=this.piOverTwo}else{if(c<0){e=-this.piOverTwo}else{e=this.prevAngle;this.owner.trigger("stop")}}}else{e=Math.atan(c/d);if(d<0){e=Math.PI+e}}this.owner.trigger("set-angle",e);this.prevAngle=e}else{this.owner.trigger("stop")}},"set-target":function(c){this.target=c;this.offset.x=0;this.offset.y=0},"set-target-offset":function(c){this.offset.x=c.x;this.offset.y=c.y},"start-chasing":function(){this.chasing=true},"stop-chasing":function(){this.chasing=false}},methods:{destroy:function(){this.target=null}}})})();(function(){return b.createComponentClass({id:"logic-angular-movement",constructor:function(c){this.angle=0;this.v=[0,0];this.maxV=this.owner.maxVelocity||c.maxVelocity||3;this.a=this.owner.acceleration||c.acceleration||0.01;this.moving=false;this.piOverTwo=Math.PI/2;this.visualOffset=c.visualOrientationOffset||0;this.owner.orientation=this.owner.orientation||this.visualOffset},events:{"handle-logic":function(e){var d=e.delta;var c=0;if(this.moving){this.v[0]+=this.a*Math.cos(this.angle)*d;this.v[1]+=this.a*Math.sin(this.angle)*d;if(this.v[0]==0){if(this.v[1]>0){c=this.piOverTwo}else{if(this.v[1]<0){c=-this.piOverTwo}else{c=this.angle}}}else{c=Math.atan(this.v[1]/this.v[0]);if(this.v[0]<0){c=Math.PI+c}}if(this.v[0]>=0){this.v[0]=Math.min(this.v[0],this.maxV*Math.cos(c))}else{this.v[0]=Math.max(this.v[0],this.maxV*Math.cos(c))}if(this.v[1]>=0){this.v[1]=Math.min(this.v[1],this.maxV*Math.sin(c))}else{this.v[1]=Math.max(this.v[1],this.maxV*Math.sin(c))}this.owner.x+=this.v[0];this.owner.y+=this.v[1];this.owner.orientation=c+this.visualOffset}},"set-angle":function(c){this.angle=c},move:function(){this.moving=true},stop:function(){this.moving=false},"set-max-velocity":function(c){this.maxV=c}}})})();(function(){var c=0.4,f=Math.PI/750,e=100,d=4000;return b.createComponentClass({id:"logic-cyclone-mini",constructor:function(g){this.owner.scaleX=0;this.owner.scaleY=0;this.owner.opacity=1;this.orbitPosition=this.owner.orbitPosition||0;this.grow=false;this.growTime=0},events:{"handle-logic":function(g){if(this.grow){if(this.growTime<d){this.growTime+=g.delta;if(this.growTime>=d){this.growTime=d}}if(this.owner.scaleX<c){this.owner.scaleX=(this.growTime/d)*c;this.owner.scaleY=this.owner.scaleX}}this.orbitPosition-=f*g.delta;this.orbitPosition=this.orbitPosition%(2*Math.PI);this.owner.x=this.owner.target.x+(this.owner.scaleX*e)*Math.cos(this.orbitPosition);this.owner.y=this.owner.target.y+((this.owner.scaleX*e)*Math.sin(this.orbitPosition)/2)},grow:function(){this.grow=true}},methods:{destroy:function(){this.owner.target=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-cyclone-hacker",constructor:function(c){this.cLeft=0;this.cTop=0;this.cWidth=0;this.cHeight=0;this.lowerOffset=0;this.lowerOffsetMax=190;this.lowerTime=1000;this.hangTime=3000;this.beforeTalk=500;this.beforeGrow=1000;this.remainingTime=0;this.state="lowering";this.cameraUpdated=false;this.windFromFan=null},events:{"camera-update":function(c){this.cLeft=c.viewportLeft;this.cTop=c.viewportTop;this.cWidth=c.viewportWidth;this.cHeight=c.viewportHeight;this.cameraUpdated=true},"handle-logic":function(c){if(this.state=="lowering"){if(this.lowerOffset<this.lowerOffsetMax){this.lowerOffset+=(c.delta/this.lowerTime)*this.lowerOffsetMax;if(this.lowerOffset>=this.lowerOffsetMax){this.lowerOffset=this.lowerOffsetMax;this.state="hanging";this.remainingTime=this.hangTime;this.owner.triggerEvent("fan-out")}}}else{if(this.state=="hanging"){this.remainingTime-=c.delta;if(this.remainingTime<=0){this.state="raising"}if(this.beforeGrow>0){this.beforeGrow-=c.delta;if(this.beforeGrow<=0){this.windFromFan=this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["cyclone-from-fan"],{properties:{x:this.owner.x+60,y:this.owner.y-50,z:this.owner.z+0.001}}));this.owner.triggerEvent("el-grow")}}}else{if(this.state=="raising"){if(this.lowerOffset>0){this.lowerOffset-=(c.delta/this.lowerTime)*this.lowerOffsetMax;if(this.lowerOffset<=0){this.lowerOffset=0;this.windFromFan=null;this.owner.parent.removeEntity(this.owner)}}if(this.beforeTalk>0){this.beforeTalk-=c.delta;if(this.beforeTalk<=0){this.owner.triggerEvent("play-cyclone-hacker-talk")}}}}}this.updatePosition()}},methods:{updatePosition:function(){if(this.cameraUpdated){this.owner.y=this.cTop+this.lowerOffset;this.owner.x=this.cLeft+(3*this.cWidth/7)}},destroy:function(){}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-cyclone-clouds",constructor:function(c){this.owner.opacity=0;this.grow=false;this.lifespan=3000;this.quarterSpan=this.lifespan/4;this.life=this.lifespan},events:{"handle-logic":function(c){if(this.grow){this.life-=c.delta;if(this.life<=0){this.owner.parent.removeEntity(this.owner)}else{if(this.life>=this.lifespan-this.quarterSpan){this.owner.opacity=1-((this.life-(this.lifespan-this.quarterSpan))/this.quarterSpan)}else{if(this.life<=this.quarterSpan){this.owner.opacity=this.life/this.quarterSpan}else{this.owner.opacity=1}}}}},grow:function(){this.grow=true}},methods:{destroy:function(){}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-cyclone-from-fan",constructor:function(c){this.owner.opacity=0;this.grow=false;this.lifespan=2500;this.quarterSpan=this.lifespan/4;this.life=this.lifespan},events:{"handle-logic":function(c){if(this.grow){this.life-=c.delta;if(this.life<=0){this.owner.parent.removeEntity(this.owner)}else{if(this.life>=this.lifespan-this.quarterSpan){this.owner.opacity=1-((this.life-(this.lifespan-this.quarterSpan))/this.quarterSpan)}else{if(this.life<=this.quarterSpan){this.owner.opacity=this.life/this.quarterSpan}else{this.owner.opacity=1}}}}},grow:function(){this.grow=true}},methods:{destroy:function(){}},publicMethods:{}})})();(function(){PiOverTwo=Math.PI/2;TwoPi=Math.PI*2;ThreePiOverTwo=3*Math.PI/2;return b.createComponentClass({id:"ai-hacker",constructor:function(c){this.target=null;this.finalTarget=false;this.targetDistance=5;this.worldWidth=0;this.timeToNewTarget=0;this.targetDelay=2000;this.calledFollow=false;this.orgOffset={exit:{x:0,y:0},fish:{x:0,y:-70},goanna:{x:0,y:-130},crocodile:{x:15,y:-150},monkey:{x:0,y:-150},mudskipper:{x:0,y:-120},orangutan:{x:0,y:-140},stork:{x:0,y:-140},bat:{x:15,y:-120}};this.maxV=5;this.scaleDist=12;this.wooshed=false},events:{"handle-ai":function(g){var f=0,d=0,e=-100,h=null;if(!this.wooshed&&((Math.abs(this.owner.x)<=50)||(Math.abs(this.worldWidth-this.owner.x)<=50))){this.wooshed=true;this.owner.triggerEvent("play-wreaker-woosh")}var c=Math.abs(this.owner.orientation%TwoPi);if(c>PiOverTwo&&c<ThreePiOverTwo){this.owner.state.left=true;this.owner.state.right=false}else{this.owner.state.left=false;this.owner.state.right=true}if(!this.calledFollow){this.calledFollow=true;this.owner.triggerEvent("el-follow-entity",this.owner)}if(!this.target){this.timeToNewTarget-=g.delta;if(this.timeToNewTarget<=0||this.finalTarget){this.getTarget();this.owner.triggerEvent("start-chasing");this.owner.triggerEvent("drop-shield")}}if(this.target){f=Math.sqrt(Math.pow(this.target.x+this.orgOffset[this.target.type].x-this.owner.x,2)+Math.pow(this.target.y+this.orgOffset[this.target.type].y-this.owner.y,2));if(f<=this.targetDistance){this.owner.x=this.target.x+this.orgOffset[this.target.type].x;this.owner.y=this.target.y+this.orgOffset[this.target.type].y;if(!this.scriptCalled){this.scriptCalled=true;this.owner.triggerEvent("el-trigger-script")}if(!this.finalTarget){this.owner.triggerEvent("el-remove-organism",{organism:this.target,disaster:"hacker"});this.owner.triggerEvent("wield-shield");this.owner.triggerEvent("play-tractor-beam")}this.target=null;this.timeToNewTarget=this.targetDelay;this.owner.triggerEvent("stop-chasing")}else{if(f<=this.scaleDist*this.targetDistance){this.owner.triggerEvent("set-max-velocity",(f/(this.scaleDist*this.targetDistance))*this.maxV)}else{this.owner.triggerEvent("set-max-velocity",this.maxV)}}}},"camera-update":function(c){},"camera-loaded":function(c){this.worldWidth=c.width}},methods:{getTarget:function(){var e=Infinity,h=0,d=0,g=null,f=null;if(this.owner.targets.length>0){for(var c=0;c<this.owner.targets.length;c++){h=Math.sqrt(Math.pow(this.owner.x-this.owner.targets[c].x,2)+Math.pow(this.owner.y-this.owner.targets[c].y,2));if(h<e){e=h;d=c}}f=this.owner.targets[d];this.target=f;this.owner.targets.splice(d,1)[0];this.owner.triggerEvent("set-target",this.target);this.owner.triggerEvent("set-target-offset",this.orgOffset[this.target.type])}else{if(this.finalTarget){this.owner.triggerEvent("el-disaster-finished");this.owner.triggerEvent("el-stop-following");this.owner.parent.removeEntity(this.owner)}else{this.finalTarget=true;if(this.owner.x>this.worldWidth/2){this.target={x:this.worldWidth+200,y:this.owner.y,type:"exit"}}else{this.target={x:-200,y:this.owner.y,type:"exit"}}this.owner.trigger("set-target",this.target)}}},destroy:function(){this.target=null;this.owner.targets=null}},publicMethods:{}})})();(function(){var c=0;return b.createComponentClass({id:"logic-shield",constructor:function(d){this.state=this.owner.state;this.stateName=d.state||"shielded";this.entityClass=b.game.settings.entities[d.shield];if(!this.owner.linkId){this.owner.linkId="shield-link-"+c++}this.state[this.stateName]=false;this.shieldPosition={x:0,y:0,z:0,dx:0,dy:0,linkId:this.owner.linkId};this.shieldProperties={properties:this.shieldPosition};this.onShield=null;this.offsetX=d.offsetX||0;this.offsetY=d.offsetY||0;this.offsetZ=d.offsetZ||0;this.shield=null;this.wieldShield=false;if(d.message){console.warn('"'+this.type+'" components no longer accept "message": "'+d.message+'" as a definition parameter. Use "aliases": {"'+d.message+'": "wield-shield"} instead.')}if(d.message){console.warn('"'+this.type+'" components no longer accept "stopMessage": "'+d.stopMessage+'" as a definition parameter. Use "aliases": {"'+d.stopMessage+'": "drop-shield"} instead.')}},events:{"handle-logic":function(){var e=0,d=this.state;if(this.wieldShield){if(!this.shield){this.shieldPosition.x=this.owner.x;this.shieldPosition.y=this.owner.y;this.shieldPosition.z=this.owner.z;this.shield=this.owner.parent.addEntity(new b.Entity(this.entityClass,this.shieldProperties));this.owner.triggerEvent("entity-created",this.shield);if(this.onShield){this.onShield(this.shield);this.onShield=null}}this.shield.x=this.owner.x;e=this.offsetX;if(d.left){e*=-1;this.shield.orientation=Math.PI}else{if(d.right){this.shield.orientation=0}}this.shield.x+=e;this.shield.y=this.owner.y;e=this.offsetY;if(d.top){e*=-1;this.shield.orientation=Math.PI/2}else{if(d.bottom){this.shield.orientation=-Math.PI/2}}this.shield.y+=e;this.shield.z=this.owner.z;this.shield.z+=this.offsetZ}else{if(this.shield){this.owner.parent.removeEntity(this.shield);this.shield=null}}if(d[this.stateName]!==this.wieldShield){d[this.stateName]=this.wieldShield}},"wield-shield":function(d){this.wieldShield=!d||(d.pressed!==false);if(d&&d.onShield){this.onShield=d.onShield}},"drop-shield":function(){this.wieldShield=false}},methods:{destroy:function(){this.state[this.stateName]=false;if(this.shield){this.owner.parent.removeEntity(this.shield);this.shield=null}}}})})();(function(){return b.createComponentClass({id:"ai-terrain-hacker",constructor:function(c){this.target=null;this.finalTarget=false;this.targetDistance=5;this.worldWidth=0;this.timeToNewTarget=0;this.targetDelay=2000;this.calledFollow=false;this.foundNode=false;this.prepFireWait=1000;this.fireWait=3000;this.fired=false;this.flipWait=1000;this.phase="";this.maxV=5;this.scaleDist=12;this.wooshed=false},events:{"handle-ai":function(d){var c=0,e=null;if(!this.wooshed&&((Math.abs(this.owner.x)<=50)||(Math.abs(this.worldWidth-this.owner.x)<=50))){this.wooshed=true;this.owner.triggerEvent("play-wreaker-woosh")}if(this.phase=="prep"){if(this.prepFireWait>0){this.prepFireWait-=d.delta;if(this.prepFireWait<=0){this.phase="fire"}}}else{if(this.phase=="fire"){if(!this.fired){this.fired=true;this.foundNode=true;this.owner.triggerEvent("wield-shield");this.owner.triggerEvent("play-terrain-hacking");this.owner.triggerEvent("el-trigger-script");this.owner.triggerEvent("el-follow-entity",{x:this.owner.x,y:this.owner.y+140});this.owner.triggerEvent("el-entity-created",this.owner.parent.addEntity(new b.Entity(b.game.settings.entities["terrain-splash"],{properties:{x:this.owner.x,y:this.owner.y+140,z:1}})))}if(this.flipWait>0){this.flipWait-=d.delta;if(this.flipWait<=0){this.owner.triggerEvent("el-flip-tile",this.owner.target);this.owner.triggerEvent("el-delayed-remove-organisms-in-radius",this.owner.target.node)}}if(this.fireWait>0){this.fireWait-=d.delta;if(this.fireWait<=0){this.owner.triggerEvent("drop-shield");this.phase=""}}}else{if(!this.calledFollow){this.calledFollow=true;this.owner.triggerEvent("el-follow-entity",this.owner)}if(!this.target){this.timeToNewTarget-=d.delta;if(this.timeToNewTarget<=0||this.finalTarget){this.getTarget();this.owner.triggerEvent("start-chasing")}}if(this.target){c=Math.sqrt(Math.pow(this.target.x-this.owner.x,2)+Math.pow(this.target.y-this.owner.y,2));if(c<=this.targetDistance){this.owner.x=this.target.x;this.owner.y=this.target.y;if(!this.finalTarget){this.phase="prep";this.owner.state.opening=true;this.owner.triggerEvent("logical-state")}this.target=null;this.timeToNewTarget=0;this.owner.triggerEvent("stop-chasing")}else{if(c<=this.scaleDist*this.targetDistance){this.owner.triggerEvent("set-max-velocity",(c/(this.scaleDist*this.targetDistance))*this.maxV)}else{this.owner.triggerEvent("set-max-velocity",this.maxV)}}}}}},"camera-update":function(c){},"camera-loaded":function(c){this.worldWidth=c.width}},methods:{getTarget:function(){var c=0,d=-262;if(!this.foundNode){this.target={x:this.owner.target.node.x+c,y:this.owner.target.node.y+d};this.owner.trigger("set-target",this.target)}else{if(this.finalTarget){this.owner.triggerEvent("el-disaster-finished");this.owner.triggerEvent("el-stop-following");this.owner.parent.removeEntity(this.owner)}else{this.finalTarget=true;if(this.owner.x>this.worldWidth/2){this.target={x:this.worldWidth+250,y:this.owner.y}}else{this.target={x:-250,y:this.owner.y}}this.owner.trigger("set-target",this.target)}}},destroy:function(){this.target=null;this.owner.target=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-fade",constructor:function(c){this.inTime=c.inTime||0;this.fullTime=c.fullTime||0;this.outTime=c.outTime||0;this.lifetime=0;this.owner.opacity=0},events:{"handle-logic":function(c){delta=c.delta;this.lifetime+=delta;if(this.lifetime>this.inTime+this.fullTime+this.outTime){this.owner.parent.removeEntity(this.owner)}else{if(this.lifetime>this.inTime+this.fullTime){this.owner.opacity=1-((this.lifetime-(this.inTime+this.fullTime))/this.outTime)}else{if(this.lifetime>this.inTime){this.owner.opacity=1}else{this.owner.opacity=this.lifetime/this.inTime}}}}},methods:{},publicMethods:{}})})();(function(){var d=0.3,c=500;return b.createComponentClass({id:"logic-buzz-and-delete-ship",constructor:function(e){this.cLeft=0;this.cTop=0;this.cWidth=0;this.cHeight=0;this.worldWidth=null;this.timeToNext=1000;this.goingRight=(this.owner.x<0)?true:false;if(!this.goingRight){this.owner.orientation=Math.PI}this.phase="flying";this.preDeathPause=1000;this.introWait=500;this.startAudio=false},events:{"handle-logic":function(e){switch(this.phase){case"flying":if(!this.startAudio&&((Math.abs(this.owner.x)<=50)||(Math.abs(this.cLeft+this.cWidth-this.owner.x)<=50))){this.startAudio=true;this.owner.triggerEvent("play-buzz-delete-party")}if(this.introWait>0){this.introWait-=e.delta}else{if(this.goingRight){this.owner.x+=d*e.delta;if(this.owner.x>this.cLeft+this.cWidth+c){this.phase="end";this.owner.triggerEvent("fade-out-disaster")}}else{this.owner.x-=d*e.delta;if(this.owner.x<this.cLeft-c){this.phase="end";this.owner.triggerEvent("fade-out-disaster")}}}this.scareOrganisms();break;case"end":if(this.preDeathPause>0){this.preDeathPause-=e.delta;if(this.preDeathPause<=0){this.owner.triggerEvent("el-disaster-finished");this.owner.triggerEvent("el-stop-following");this.owner.parent.removeEntity(this.owner)}}break}},"camera-update":function(e){this.cLeft=e.viewportLeft;this.cTop=e.viewportTop;this.cWidth=e.viewportWidth;this.cHeight=e.viewportHeight},"camera-loaded":function(e){this.owner.triggerEvent("el-follow-entity",this.owner)}},methods:{scareOrganisms:function(){var j=0;var h=null;var e=false;var f=200;for(var g=this.owner.toRemove.length-1;g>=0;g--){h=this.owner.toRemove[g];e=false;if((this.goingRight&&h.x<this.owner.x+f)||(!this.goingRight&&h.x>this.owner.x-f)){e=true}if(e){if(h.type=="fish"){this.owner.trigger("el-remove-organism",{organism:h,disaster:"buzz-and-delete"})}else{if(h.y<=this.owner.y+100){if(this.goingRight){h.triggerEvent("scare","northeast")}else{h.triggerEvent("scare","northwest")}}else{if(this.goingRight){h.triggerEvent("scare","southeast")}else{h.triggerEvent("scare","southwest")}}}this.owner.toRemove.splice(g,1)}}},destroy:function(){this.owner.toRemove=null}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"node",constructor:function(c){this.nodeId=c.nodeId||this.owner.nodeId||this.owner.id||""+Math.random();if((typeof this.nodeId!=="string")&&(this.nodeId.length)){this.nodeId=c.nodeId.join("|")}this.owner.nodeId=this.nodeId;this.owner.isNode=true;this.map=this.owner.map=this.owner.map||null;this.contains=this.owner.contains=[];this.edgesContain=this.owner.edgesContain=[];this.owner.x=this.owner.x||0;this.owner.y=this.owner.y||0;this.owner.z=this.owner.z||0;this.neighbors=this.owner.neighbors=c.neighbors||this.owner.neighbors||{}},events:{"add-neighbors":function(d){var c=0,e=null;for(e in d){this.neighbors[e]=d[e]}for(;c<this.contains.length;c++){this.contains[c].triggerEvent("set-directions")}},"remove-neighbor":function(c){var d=null,e=c;if(typeof e!=="string"){e=e.nodeId}for(d in this.neighbors){if(typeof this.neighbors[d]==="string"){if(this.neighbors[d]===e){delete this.neighbors[d];break}}else{if(this.neighbors[d].nodeId===e){delete this.neighbors[d];break}}}}},publicMethods:{getNeighborNodes:function(){var d="",c={};for(d in this.neighbors){c[d]=this.getNode(d)}return c},getNode:function(d){var c=null;if(!this.map&&this.owner.map){this.map=this.owner.map}if(this.neighbors[d]){c=this.neighbors[d];if(c.isNode){return c}else{if(typeof c==="string"){c=this.map.getNode(c);if(c){this.neighbors[d]=c;return c}}else{if(c.length){c=this.map.getNode(c.join("|"));if(c){this.neighbors[d]=c;return c}}}}return null}else{return null}},addToNode:function(c){for(var d=0;d<this.contains.length;d++){if(this.contains[d]===c){return false}}this.contains.push(c);return c},removeFromNode:function(c){for(var d=0;d<this.contains.length;d++){if(this.contains[d]===c){return this.contains.splice(d,1)[0]}}return false},addToEdge:function(c){for(var d=0;d<this.edgesContain.length;d++){if(this.edgesContain[d]===c){return false}}this.edgesContain.push(c);return c},removeFromEdge:function(c){for(var d=0;d<this.edgesContain.length;d++){if(this.edgesContain[d]===c){return this.edgesContain.splice(d,1)[0]}}return false}}})})();(function(){var d=[{x:40,y:-80,z:-30},{x:-40,y:-80,z:-30},{x:80,y:-75,z:-25}],c={bat:[{x:-50,y:-180,z:1.2},{x:25,y:-190,z:1.1},{x:-25,y:-200,z:1}],"durian-fruit":[{x:-6,y:-148,z:-39.9},{x:16,y:-172,z:-39.8},{x:54,y:-147,z:-39.7},{x:-9,y:-191,z:-39.6},{x:43,y:-209,z:-39.5}],"durian-flower":[{x:-6,y:-148,z:-39.9},{x:16,y:-172,z:-39.8},{x:54,y:-147,z:-39.7},{x:-9,y:-191,z:-39.6},{x:43,y:-209,z:-39.5}],crocodile:[{x:40,y:-65,z:-15},{x:-40,y:-60,z:-10},{x:-80,y:-60,z:-20}],fish:[{x:0,y:-150,z:-100},{x:-30,y:-180,z:-130},{x:30,y:-190,z:-140}],nest:[{x:80,y:-103,z:-93,inTree:{x:80,y:-190,z:-93,}},{x:-80,y:-103,z:-93,inTree:{x:-80,y:-190,z:-93,}}],"forest-trees":[{x:0,y:-100,z:-100}],"mangrove-trees":[{x:0,y:-95,z:-95}],"durian-tree":[{x:0,y:-50,z:-40}],mudskipper:[{x:40,y:-59,z:-9},{x:-40,y:-62,z:-12},{x:80,y:-70,z:-20}],goanna:[{x:-80,y:-65,z:-15},{x:80,y:-62,z:-12},{x:0,y:-58,z:-8}],monkey:[{x:0,y:-75,z:-25},{x:80,y:-80,z:-30},{x:-80,y:-80,z:-30}],orangutan:d,"orangutan-male":d,"orangutan-female":d,stork:[{x:-55,y:-90,z:-40},{x:0,y:-95,z:-45},{x:55,y:-85,z:-35}],"stork-eggs":[{x:-80,y:-270,z:-94}],"crocodile-eggs":[{x:0,y:-70,z:-20}]};return b.createComponentClass({id:"terrain-tile",constructor:function(h){var g="",f=0,e="";this.owner.trees=0;this.owner.hasTrees=false;this.owner.biotope=null;this.owner.positions={};for(g in c){this.owner.positions[g]=[];for(f=0;f<c[g].length;f++){this.owner.positions[g][f]={};for(e in c[g][f]){this.owner.positions[g][f][e]=c[g][f][e]}}}this.owner.x+=112;this.owner.y+=225;this.owner.z=this.owner.y+(this.owner.x/225)},events:{"handle-logic":function(){}},methods:{},publicMethods:{isSpaceAvailable:function(g){var f=0,h=this.owner,e=null;if(h.positions[g]){e=h.positions[g];for(f=0;f<e.length;f++){if(!e[f].organism){return e[f]}}}return false},getPositions:function(e){if(e){return this.owner.positions[e]}else{return this.owner.positions}},getNeighbor:function(e){return this.owner.parent.getNode(this.owner.neighbors[e])},getEast:function(){return this.getNeighbor("east")},getSoutheast:function(){return this.getNeighbor("southeast")},getSouth:function(){return this.getEast().getSouthwest()},getSouthwest:function(){return this.getNeighbor("southwest")},getWest:function(){return this.getNeighbor("west")},getNorthwest:function(){return this.getNeighbor("northwest")},getNorth:function(){return this.getEast().getNorthwest()},getNortheast:function(){return this.getNeighbor("northeast")}}})})();(function(){var d=["tutorial-wonder",0,0,"need-prompt-generic",0,0],e=0,c=true;return b.createComponentClass({id:"logic-inez",constructor:function(f){this.finFunc=null;this.tutorial=false;this.needsList=[];this.promptsOn=true;this.scriptInfo=null;this.waitingScript=false;this.scriptTriggered=false},events:{"handle-logic":function(g){var f=0;for(f=this.needsList.length-1;f>=0;f--){this.needsList[f].time-=g.delta;if(this.needsList[f].time<0){this.needsList.splice(f,1)}}if(this.waitingScript){if(this.scriptInfo.delay==-1&&this.scriptTriggered){this.owner.trigger(this.scriptInfo.script);this.waitingScript=false;this.scriptTriggered=false}else{if(this.scriptInfo.delay>=0){this.scriptInfo.delay-=g.delta;if(this.scriptInfo.delay<=0){this.owner.trigger(this.scriptInfo.script);this.waitingScript=false}}}}},"log-need":function(f){this.needsList.splice(0,0,{organism:f,time:3000})},"prompt-the-player":function(){if(this.promptsOn){if(this.needsList.length){if(this.needsList.length===1){this.owner.triggerEvent("prompt-"+this.needsList[0].organism)}else{if(this.needsList[0].organism===this.needsList[1].organism){this.owner.triggerEvent("prompt-"+this.needsList[0].organism+"s")}else{if(this.needsList.length<4){if(c){this.owner.triggerEvent("help-prompt-3")}else{this.owner.triggerEvent("prompt-"+this.needsList[0].organism)}c=!c}else{if(this.needsList.length<7){this.owner.triggerEvent("help-prompt-1")}else{this.owner.triggerEvent("help-prompt-2")}}}}}else{e=(e+1)%6;if(d[e]){this.owner.triggerEvent(d[e])}}}},pause:function(){this.promptsOn=false},unpause:function(){this.promptsOn=true},"begin-script":function(f){this.owner.state.showing=true;this.scriptInfo=f.getScript();this.waitingScript=true;this.finFunc=f.onFinished||null;this.owner.triggerEvent("play-disaster-start")},"trigger-script":function(f){this.scriptTriggered=true},"begin-tutorial":function(g){var f=this;this.owner.state.showing=true;setTimeout(function(){if(!f.destroyed){g.voBegins();f.owner.triggerEvent("tutorial-button-green");setTimeout(function(){if(!f.destroyed){f.owner.trigger(g.getScript())}},7000)}},7000);this.finFunc=g.onFinished||null;this.tutFunc=g.onTutorialFinished||null;this.tutorial=true},"show-resources":function(){if(this.finFunc){this.finFunc();this.finFunc=null}},"camera-update":function(f){this.owner.x=f.viewportLeft+850;this.owner.y=f.viewportTop+300},"end-script":function(){this.owner.x=1100;this.owner.state.showing=false},"end-tutorial":function(){this.owner.x=1100;this.owner.state.showing=false;if(this.tutFunc){this.tutFunc();this.tutFunc=null}this.tutorial=false},"highlight-circuit-board":function(){this.owner.triggerEvent("focus-here",{x:7*225,y:3*225});this.owner.triggerEvent("entity-created",this.owner.parent.addEntity(new b.Entity(b.game.settings.entities.circuitboarder,{})))},"tutorial-resource":function(){this.owner.blockEnding=true},"allow-ending":function(){this.owner.blockEnding=false}},methods:{destroy:function(){this.destroyed=true}},publicMethods:{}})})();(function(){var e=function(g,f){if(f===" "){return g+"default"}else{return g+f}},d=function(l,h,k,m){var g="",j=[],f=null;if(!h[" "]){h[" "]=h["default"]}if(Array.isArray(l)){for(g in l){j.push(c(l[g],h,k,m))}f=j.splice(0,1)[0];f.next=j;return f}else{return c(l,h,k,m)}},c=function(n,o,p,k){var j=0,g={},h=0,f="",l="",m=n.voice;if(typeof n.sound==="string"){g.sound=n.sound;g.events=[]}else{for(j in n.sound){g[j]=n.sound[j]}if(g.events){g.events=g.events.slice()}else{g.events=[]}}if(m){m+=" ";for(j=0;j<m.length;j++){l=m[j];if(l!==f){f=l;g.events.push({time:h,event:e(p,l)})}h+=k}}return g};return b.createComponentClass({id:"voice-over",constructor:function(h){var g="",f={audioMap:{},preventOverlaps:h.preventOverlaps,channel:h.channel,priority:h.priority,aliases:h.aliases},j={spriteSheet:h.spriteSheet,acceptInput:h.acceptInput,scaleX:h.scaleX,scaleY:h.scaleY,rotate:h.rotate,mirror:h.mirror,flip:h.flip,hidden:h.hidden,animationMap:{},pins:h.pins,pinTo:h.pinTo,aliases:h.aliases};this.message=(h.messagePrefix||"voice-over")+"-";for(g in h.animationMap){j.animationMap[e(this.message,g)]=h.animationMap[g]}j.animationMap["default"]=h.animationMap["default"];this.owner.addComponent(new b.components["render-sprite"](this.owner,j));for(g in h.voiceoverMap){f.audioMap[g]=d(h.voiceoverMap[g],h.animationMap,this.message,h.frameLength||100)}this.owner.addComponent(new b.components.audio(this.owner,f))},events:{load:function(f){this.owner.removeComponent(this)}}})})();(function(){var f=function(h,k,j){return function(m){var l=k.getNode(h);if(this.isPassable(l)){this.destinationNodes.length=0;this.destinationNodes.push(l);if(this.node){this.onEdge(l)}else{this.distance=0}this.progress=0;this.setState("going-"+j);return true}return false}},g=function(k,j){var h=j.x-k.x,m=j.y-k.y,l=j.z-k.z;return Math.sqrt(h*h+m*m+l*l)},e=function(l,j,n){var h=j.x-l.x,m=j.y-l.y,k=0;if(!n){return k}k=Math.acos(h/n);if(m<0){k=(Math.PI*2)-k}return k},d=function(h,k,j){return k*(1-h)+j*h},c=function(l,j){var h=0,m=0,k=false;if(!j){return false}for(;h<l.length;h++){for(m=0;m<j.length;m++){if(l[h].type===j[m]){k=true}}if(!k){return false}else{k=false}}return true};return b.createComponentClass({id:"node-resident2",constructor:function(h){var j=h.offset||this.owner.nodeOffset||{};this.nodeId=this.owner.nodeId=h.nodeId||this.owner.nodeId||null;this.neighbors={};this.friendlyNodes=h.nodes||null;this.friendlyEntities=h.shares||null;this.speed=this.owner.speed=h.speed||0;this.updateOrientation=h.updateOrientation||false;this.distance=0;this.buffer=h.buffer||0;this.progress=0;this.offset={x:j.x||0,y:j.y||0,z:j.z||0};this.destinationNodes=[];this.algorithm=h.algorithm||g;this.state=this.owner.state;this.currentState="";this.goal={x:j.x||0,y:j.y||0,z:j.z||0};this.origin={x:0,y:0,z:0};this.paused=false},events:{unload:function(){this.paused=true},"set-algorithm":function(h){this.algorithm=h||g},"handle-logic":function(m){var j=0,k=0,h=0,l=null;if(this.paused){return}if(typeof this.owner.speed==="number"){this.speed=this.owner.speed}h=this.speed*m.delta;if(this.blocked){this.blocked=false;if(this.goingToNode){this.owner.triggerEvent("goto-closest-node",this.goingToNode)}}if(this.destinationNodes.length||!this.isAtGoal()){if(!this.speed){if(this.destinationNodes.length){this.owner.triggerEvent("on-node",this.destinationNodes[this.destinationNodes.length-1]);this.destinationNodes.length=0}else{this.owner.x=this.origin.x=this.goal.x;this.owner.y=this.origin.y=this.goal.y;this.owner.z=this.origin.z=this.goal.z}return}this.state.moving=true;if(this.destinationNodes.length&&this.node){this.onEdge(this.destinationNodes[0])}else{if(this.destinationNodes.length&&!this.lastNode){this.owner.triggerEvent("on-node",this.destinationNodes[0]);this.destinationNodes.splice(0,1);if(!this.destinationNodes.length){this.state.moving=false;return}}else{this.distance=g(this.origin,this.goal)}}while((this.destinationNodes.length||!this.isAtGoal())&&h){if((this.progress+h)>=this.distance){h-=(this.distance-this.progress);this.progress=0;if(this.destinationNodes.length){l=this.destinationNodes[0];this.destinationNodes.splice(0,1);this.owner.triggerEvent("on-node",l);if(this.destinationNodes.length&&h){this.onEdge(this.destinationNodes[0])}}else{this.owner.x=this.origin.x=this.goal.x;this.owner.y=this.origin.y=this.goal.y;this.owner.z=this.origin.z=this.goal.z}}else{this.progress+=h;k=this.progress/this.distance;this.owner.x=d(k,this.origin.x,this.goal.x);this.owner.y=d(k,this.origin.y,this.goal.y);this.owner.z=d(k,this.origin.z,this.goal.z);if(this.updateOrientation){this.owner.orientation=e(this.origin,this.goal,this.distance)}if((k>0.5)&&this.destinationNodes.length){this.checkForWatering(this.destinationNodes[0])}h=0}}}else{this.checkForWatering(this.node);this.state.moving=false}},"update-origin":function(){this.owner.x=this.origin.x=this.node.x+this.offset.x;this.owner.y=this.origin.y=this.node.y+this.offset.y;this.owner.z=this.origin.z=this.node.z+this.offset.z},"on-node":function(l){var k="",h=0,m=null;this.owner.node=this.node=l;if(this.node.removeFromEdge){this.node.removeFromEdge(this.owner)}if(this.lastNode&&this.lastNode.removeFromEdge){this.lastNode.removeFromEdge(this.owner)}this.node.addToNode(this.owner);this.setState("on-node");this.owner.x=this.origin.x=this.node.x+this.offset.x;this.owner.y=this.origin.y=this.node.y+this.offset.y;this.owner.z=this.origin.z=this.node.z+this.offset.z;if(this.updateOrientation&&this.node.orientation){this.owner.orientation=this.node.orientation}this.setGoal(this.node,this.offset);this.owner.triggerEvent("set-directions");if(this.friendlyNodes&&this.friendlyNodes[l.type]){this.owner.trigger(this.friendlyNodes[l.type],l)}m=l.contains;for(h=0;h<m.length;h++){if(this.owner!==m[h]){m[h].triggerEvent("with-"+this.owner.type,this.owner);this.owner.triggerEvent("with-"+m[h].type,m[h])}}this.owner.parent.triggerEvent("check-organism-on-tile",{organism:this.owner,tile:l})},"leave-node":function(){var h=0,k=null;if(this.node){if(this.node.removeFromNode){this.node.removeFromNode(this.owner)}this.owner.triggerEvent("left-node",this.node);this.owner.triggerEvent("remove-directions");k=this.node.contains;for(h=0;h<k.length;h++){if(this.owner!==k[h]){k[h].triggerEvent(this.owner.type+"-left",this.owner)}}}this.lastNode=this.node;this.node=null},"goto-node":function(h){this.gotoNode(h)},"goto-closest-node":(function(){var k=function(m,n){var l=0;for(;l<n.length;l++){if(n[l]===m){return true}}return false},h=function(l,m){return(l.type===m)},j=function(l,m){return(l.type===m.type)};return function(l){var p=null,q=20,o=this.node||this.lastNode,s=null,m=0;if(!l){if(!this.owner.nodeId){var r=this.owner.parent.getClosestNode(this.owner.x,this.owner.y,this.owner.z);if(r){this.destinationNodes.push(r);return true}}return false}else{if(typeof l==="string"){s=h}else{if(typeof l.type==="string"){s=j}else{s=k}}}m=l.steps||0;this.goingToNode=l;if(o&&l&&!s(o,l)){p=this.traverseNode({depth:q,origin:o,position:o,test:s,destination:l,nodes:[],shortestPath:Infinity,distance:0,found:false,algorithm:this.algorithm,blocked:false});p.distance-=this.progress;if(p.found){return this.setPath(p,m)}else{if(p.blocked){this.blocked=true;return false}}}return false}})(),"set-directions":function(){var l="",k=0,n=null,m=this.node,h=null;this.owner.triggerEvent("remove-directions");for(l in m.neighbors){this.neighbors[l]=f(m.neighbors[l],m.map,l);this.addEventListener(l,this.neighbors[l]);h=m.map.getNode(m.neighbors[l]);if(h){n=h.contains;for(k=0;k<n.length;k++){n[k].triggerEvent("next-to-"+this.owner.type,this.owner);this.owner.triggerEvent("next-to-"+n[k].type,n[k])}}}},"remove-directions":function(){for(var h in this.neighbors){this.removeEventListener(h,this.neighbors[h]);delete this.neighbors[h]}},"set-node-offset":function(h){if(h){if(!isNaN(h.x)){this.offset.x=h.x}if(!isNaN(h.y)){this.offset.y=h.y}if(!isNaN(h.z)){this.offset.z=h.z}}this.setGoal(this.node||this.destinationNodes[0],this.offset)}},methods:{destroy:function(){this.owner.triggerEvent("leave-node")},isAtGoal:function(){return((this.goal.x===this.owner.x)&&(this.goal.y===this.owner.y)&&(this.goal.z===this.owner.z))},setGoal:function(h,j){if(h){this.goal.x=h.x+j.x;this.goal.y=h.y+j.y;this.goal.z=h.z+j.z}},checkForWatering:function(h){if(h){if(!h.biotope||(h.biotope==="empty")){this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}else{if(h.biotope==="lake"){if(this.owner.type!=="stork"&&this.owner.type!=="fish"&&this.owner.type!=="bat"&&this.owner.type!=="crocodile"){this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}else{this.owner.state.watered=true}}else{this.owner.state.watered=false;if(this.owner.type==="fish"){this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}}}},gotoNode:(function(){var h=function(j,k){return(j===k)};return function(l){var k=null,m=2,j=this.node||this.lastNode;if(j&&l&&(this.node!==l)){k=this.traverseNode({depth:m,origin:j,position:j,test:h,destination:l,nodes:[],shortestPath:Infinity,distance:0,found:false,algorithm:this.algorithm,blocked:false});k.distance-=this.progress;if(k.found){return this.setPath(k)}else{if(k.blocked){this.blocked=true;return false}}}return false}})(),isPassable:function(h){return h&&(this.node!==h)&&(!this.friendlyNodes||(typeof this.friendlyNodes[h.type]!=="undefined"))&&(!h.contains.length||c(h.contains,this.friendlyEntities))},traverseNode:function(r){var p=1,n="",h=r.position.map,u=null,k=null,l=null,m=null,s=r.algorithm||g,o={shortestPath:Infinity,found:false,blocked:false},q=true,t=false;if((r.depth===0)||(r.distance>r.shortestPath)){return r}else{if(r.test(r.position,r.destination)){r.found=true;r.shortestPath=r.distance;return r}else{l=r.nodes;for(;p<l.length-1;p++){if(l[p]===r.position){return r}}u=r.position.neighbors;for(n in u){k=h.getNode(u[n]);t=true;if(this.isPassable(k)){l=r.nodes.slice();l.push(k);m=this.traverseNode({depth:r.depth-1,origin:r.origin,position:k,destination:r.destination,test:r.test,algorithm:s,nodes:l,shortestPath:r.shortestPath,distance:r.distance+s(r.position,k),gateway:r.gateway||n,found:false,blocked:false});if(m.found&&(o.shortestPath>m.shortestPath)){o=m}q=false}}o.blocked=(t&&q);return o}}},setPath:function(j,h){if(j.nodes[0]===this.node){j.nodes.splice(0,1)}this.destinationNodes=j.nodes;if(h){this.destinationNodes.length=Math.min(h,this.destinationNodes.length)}},setState:function(h){if(h==="on-node"){this.state["on-node"]=true}else{this.state["on-node"]=false;if(this.currentState){this.state[this.currentState]=false}this.currentState=h;this.state[h]=true}},onEdge:function(h){this.setGoal(h,this.offset);this.distance=g(this.origin,this.goal);if(this.updateOrientation){this.owner.orientation=e(this.origin,this.goal,this.distance)}this.node.addToEdge(this.owner);h.addToEdge(this.owner);this.owner.triggerEvent("leave-node")}},publicMethods:{getNeighbors:function(){var m=0,h="",l=this.node||this.lastNode,o=l.map,n=null,k=[];for(h in l.neighbors){n=o.getNode(l.neighbors[h]);for(m=0;m<n.contains.length;m++){k.push(n.contains[m])}}return k}}})})();(function(){var k=function(){return true},j=function(){var r=this.owner.node;if(this.hunger>this.hungerTime){if(this.dies&&(this.hunger>(this.hungerTime*3))){this.removeOrganism(this.owner)}if(this.checkNodeForFood(r)===1){this.eat(r.contains)}return false}else{return true}},c=function(t){var s="",u=this.owner.node,r=null,w=false,v=false;if(this.hunger>this.hungerTime){if(this.dies&&(this.hunger>(this.hungerTime*3))){this.removeOrganism(this.owner);return false}w=this.checkNodeForFood(u);if(w===1){this.eat(u.contains)}else{if(this.dies&&(this.hunger>(this.hungerTime*1.4))){this.logNeed(this.foods[0])}for(s in t){v=this.checkNodeForFood(t[s]);if(v&&(!w||(v<w))&&this.checkNodeForBioLiberal(t[s])){w=v;r=t[s]}}if(r){this.move(r)}else{if(w){this.eat(u.contains)}else{this.wander(t)}}}return false}else{return true}},e=function(){var r=this.owner.node;if(this.home>this.homeTime){if(this.dies&&(this.home>(this.homeTime*3))){this.removeOrganism(this.owner);return false}if(this.checkNodeForHome(r)){this.home=0;this.metNeed(this.shelter,true)}else{if(this.dies&&(this.home>(this.homeTime*1.6))){this.logNeed(this.shelter)}}return false}else{return true}},p=function(t){var s="",u=this.owner.node,r=null;if(this.home>this.homeTime){if(this.dies&&(this.home>(this.homeTime*3))){this.removeOrganism(this.owner);return false}if(this.checkNodeForHome(u)){this.home=0;this.metNeed(this.shelter,true)}else{if(this.dies&&(this.home>(this.homeTime*1.6))){this.logNeed(this.shelter)}for(s in t){if(this.checkNodeForHome(t[s])){r=t[s];break}}if(r){this.move(r)}else{this.wander(t)}}return false}else{return true}},l=function(u,w){var s=this,t="",v=this.owner.node,r=null;if(this.procreate===-1){if(!this.checkNodeForNest(v)){if(this.mobile){for(t in u){if(this.checkNodeForNest(u[t])){r=u[t];break}}if(r){this.move(r)}else{this.logNeed(this.nestOrganism||this.nestBiotope);this.wander(u)}}else{this.stationaryNeedCounter+=1;if(this.stationaryNeedCounter===8){this.logNeed(this.nestOrganism||this.nestBiotope);this.stationaryNeedCounter=0;if(this.playTutorial){if(this.playTutorial()){this.owner.state.glow=true;setTimeout(function(){if(s.owner&&s.owner.state&&s.owner.state.glow){s.owner.state.glow=false}},9000)}this.playTutorial=null}}}return false}else{if(!this.checkNodeForNestCrowding(v)){this.addOrganism(this.creates,v);this.metNeed(this.nestOrganism||this.nestBiotope,true);if(this.hatches){if(b.game.kartKingdom){if(this.owner.type==="crocodile-eggs"){b.game.kartKingdom.event("136e3efc-cded-4211-9470-bd3d85f4cc74")}else{if(this.owner.type==="stork-eggs"){b.game.kartKingdom.event("41489423-73db-4284-8eec-77e5742cc810")}}}this.removeOrganism(this.owner)}if(!this.playTutorial){this.stationaryNeedCounter=0}return false}else{this.procreate=0;this.stationaryNeedCounter=0;return true}}}else{this.procreate+=w;if(this.procreate>this.procreateTime){this.procreate=-1}return true}},n=function(){var r=this.owner.node;if(!this.checkNodeForBio(r)){console.log("Wander - Cannot stay here! "+this.owner.type+" in "+r.biotope);this.removeOrganism(this.owner);return false}else{return true}},f=function(t){var s="",u=this.owner.node,r=null;if(!this.checkNodeForBio(u)){this.logNeed(this.biotopes[0]);for(s in t){if(this.checkNodeForBio(t[s])){r=t[s];break}}if(r){this.move(r)}else{this.wander(t)}return false}else{return true}},g=function(r){var s=false;if(r.positions&&r.positions[this.owner.type]){s=r.isSpaceAvailable(this.owner.type);if(s){s.organism=this.owner;this.owner.triggerEvent("set-node-offset",s)}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}},h=function(t){var s=0,u=false,r=null;if(t.positions&&t.positions[this.owner.type]){r=t.positions[this.owner.type];for(s=0;s<r.length;s++){if(!r[s].organism){if(!r[s].pollinate){u=r[s];break}else{if(r[s].pollinate.organism&&(r[s].pollinate.organism.type==="durian-flower")&&!r[s].pollinate.organism.pollinated){u=r[s];u.pollinate.organism.pollinated=true;this.flower=u.pollinate.organism;this.owner.state.pollinating=true;break}}}}if(u){u.organism=this.owner;this.owner.triggerEvent("set-node-offset",u)}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}},q=function(t){var s=0,u=false,r=null;if(t.positions&&t.positions[this.owner.type]){r=t.positions[this.owner.type];for(s=0;s<r.length;s++){if(!r[s].organism){if(!r[s].inTree){u=r[s];this.myTree=null;break}else{u=r[s];this.myTree=u;break}}}if(u){u.organism=this.owner;if(this.startInTree){this.startInTree=false;if(this.myTree){this.owner.state.treed=true;this.owner.triggerEvent("set-node-offset",this.myTree.inTree);this.owner.triggerEvent("update-origin")}else{this.owner.triggerEvent("set-node-offset",u)}}else{this.owner.triggerEvent("set-node-offset",u)}}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}},o=function(s){var r=0,t=false,u=null},m=function(u){for(var t=u.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1));var r=u[t];u[t]=u[s];u[s]=r}return u},d=function(u){var t="",s=0,v=[],r={};for(t in u){v.push(t)}v=m(v);for(s=0;s<v.length;s++){r[v[s]]=u[v[s]]}return r};return b.createComponentClass({id:"wander",constructor:function(r){this.mobile=(r.mobile!==false);this.climber=r.climber||false;this.biotopesAll=r.acceptBiotopes||["forest","shoreline","lake","mangrove"];this.scared=false;this.biotopes=r.biotopes||[];if(this.biotopes.length){if(this.mobile){this.handleBiotope=f}else{this.handleBiotope=n}}else{this.handleBiotope=k}this.foods=r.foods||false;if(this.foods){this.hungerTime=r.hungerTime||30000;if(!isNaN(this.owner.hunger)){this.hunger=this.owner.hunger}else{this.hunger=this.hungerTime-(Math.random()*this.hungerTime/4)}this.consumes=(r.consumes!==false);if(this.mobile){this.handleHunger=c}else{this.handleHunger=j}}else{this.handleHunger=k}this.shelter=r.shelter||false;if(this.shelter){this.homeTime=r.homeTime||30000;if(!isNaN(this.owner.home)){this.home=this.owner.home}else{this.home=this.homeTime-(Math.random()*this.homeTime/4)}if(this.mobile){this.handleHome=p}else{this.handleHome=e}}else{this.handleHome=k}this.dies=(r.dies!==false);this.creates=r.creates||null;if(this.owner.noHomeStork){this.creates=null}if(this.creates){this.procreateTime=r.procreateTime||60000;if(!isNaN(this.owner.procreate)){this.procreate=this.owner.procreate}else{this.procreate=0}this.createLimit=r.createLimit||1;this.nestBiotope=r.nestBiotope||this.biotopes[0];this.nestOrganism=r.nestOrganism||null;this.hatches=r.hatches||false;this.handleProcreation=l}else{this.handleProcreation=k}if(r.pollinator){this.handlePosition=h}else{if(r.climber){this.needsTree=true;this.startInTree=true;this.handlePosition=q}else{this.handlePosition=g}}this.crowdLimit=r.crowdLimit||1;this.crowded=false;this.contentStationary=r.contentStationary||8000;this.stationaryTime=5000;if(!isNaN(this.owner.stationary)){this.stationary=this.owner.stationary}else{this.stationary=0}this.needingTime=3000;this.needing=0;this.need="";this.hadNeed=false;this.stationaryNeedCounter=0;this.healthySit=0;this.healthySitTime=5000;if((this.owner.type==="orangutan-male")||(this.owner.type==="orangutan-female")){this.healthySitTime=8000;this.owner.subtype=this.owner.type;this.owner.type="orangutan"}},events:{load:function(){},"handle-logic":function(u){var s=0,t=this.owner.node,r=null;if(this.scared){if(this.paused){if(!this.owner.state.moving&&t){this.runningScared(t)}return}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner});return}}if(this.paused){return}if(this.foods){this.hunger+=u.delta}if(this.shelter){this.home+=u.delta}if(!this.owner.state.moving){if(this.stationary){this.stationary-=u.delta;if(this.creates&&!this.crowded){this.procreate+=u.delta}if(this.stationary<0){this.stationary=0}if(this.needsTree&&!this.owner.state.treed){this.wander(r)}}else{if(t){if(this.climber&&this.myTree&&(!this.owner.state.treed)&&(!this.owner.state.detreed)){this.owner.state.treed=true;this.owner.triggerEvent("set-node-offset",this.myTree.inTree)}else{r=d(t.getNeighborNodes());if(this.handleHunger(r)&&this.handleHome(r)&&this.handleCrowding(r)&&this.handleProcreation(r,u.delta)&&this.handleBiotope(r)){if(this.mobile){this.healthySit+=u.delta;if(((this.owner.state.eating||this.owner.state.pollinating)&&this.healthySit>this.healthySitTime)||(this.healthySit>this.healthySitTime*6)||(this.needsTree&&!this.owner.state.treed)){if(this.owner.state.eating&&this.owner.state.treed){this.owner.state.eating=false}else{if(!this.owner.state.treed){this.healthySit=0}this.wander(r)}}}}}}}}this.updateNeed(u)},scare:function(r){if(this.mobile){this.scared=r;this.owner.state.scared=true;this.handlePosition=o;this.owner.speed*=3}},"on-node":function(r){this.handlePosition(r);if(r.biotope==="lake"){this.owner.state.watered=true}else{this.owner.state.watered=false}this.node=r},"leave-node":function(){var s=0,r=null,t=this.node;if(t&&t.positions&&t.positions[this.owner.type]){r=t.positions[this.owner.type];for(s=0;s<r.length;s++){if(r[s].organism===this.owner){r[s].organism=null;break}}}},pause:function(){this.paused=true},unload:function(){this.paused=true},unpause:function(){this.paused=false},"set-up-tutorial":function(r){this.stationaryNeedCounter=4;this.playTutorial=r.need;this.playTutorialMet=r.met},"announce-need":function(){if(this.myNeed){this.owner.triggerEvent("need-"+this.myNeed)}},"show-need-popup":function(r){this.owner.triggerEvent("drop-shield");this.myNeed=r.need;this.needing=r.time||this.needingTime;this.hadNeed=!r.satisfied;this.owner.triggerEvent("wield-shield",{onShield:function(s){s.state[r.need]=true;if(r.satisfied){s.state.satisfied=true}s.needer=this.owner}})},"force-need":function(r){this.owner.triggerEvent("drop-shield");this.myNeed=r.need;this.needing=r.time||this.needingTime;this.hadNeed=!r.satisfied;this.owner.triggerEvent("wield-shield",{onShield:function(s){s.state[r.need]=true;if(r.satisfied){s.state.satisfied=true}s.triggerEvent("pause",{tutorial:2});s.needer=this.owner}})},"get-save-state":function(r){var t=this.owner.node||this.node,s={x:this.owner.x,y:this.owner.y,z:this.owner.z,nodeId:t.nodeId,stationary:this.stationary,procreate:this.procreate,hunger:this.hunger,home:this.home},u={height:0,name:"",properties:s,type:this.owner.subtype||this.owner.type,visible:true,width:0,x:this.owner.x,y:this.owner.y};r(u)}},methods:{eat:function(t){var s=0,r=0;for(s=0;s<this.foods.length;s++){for(r=0;r<t.length;r++){if((t[r].type===this.foods[s])&&!(t[r].treeDweller&&this.checkForProtection(t))){if(this.consumes){this.removeOrganism(t[r])}this.owner.state.eating=true;this.hunger=0;this.stationary=this.stationaryTime;this.metNeed(this.foods[s],s==0);return}}}},move:function(r){var s=false;if(this.owner.state.treed){this.owner.state.treed=false;this.owner.state.detreed=true;this.owner.triggerEvent("set-node-offset",this.myTree);return}else{if(this.owner.state.detreed){this.owner.state.detreed=false}}if(r.positions&&r.positions[this.owner.type]){s=r.isSpaceAvailable(this.owner.type);if(s){this.owner.triggerEvent("set-node-offset",s)}}this.owner.state.eating=false;if(this.owner.state.pollinating){this.owner.state.pollinating=false;this.flower.triggerEvent("fruitify")}this.owner.triggerEvent("goto-node",r)},wander:function(s){var r="";for(r in s){if(s[r].biotope&&this.checkNodeForBio(s[r])){this.move(s[r]);return}}for(r in s){if(s[r].biotope&&this.checkNodeForBioLiberal(s[r])){this.move(s[r]);return}}},runningScared:function(r){var s=r.getNeighborNodes()[this.scared];this.move(s)},checkForProtection:function(s){var r=0;for(r=0;r<s.length;r++){if((s[r].type==="forest-trees")||(s[r].type==="mangrove-trees")){return true}}return false},checkNodeForFood:function(t){var s=0,r=0;for(s=0;s<this.foods.length;s++){for(r=0;r<t.contains.length;r++){if((t.contains[r].type===this.foods[s])&&!(t.contains[r].treeDweller&&this.checkForProtection(t.contains))){if(this.foods.length===1){if(this.checkNodeForBio(t)){return 1}else{return false}}return +s+1}}}return false},checkNodeForHome:function(s){var r=0;for(r=0;r<s.contains.length;r++){if(s.contains[r].type===this.shelter){return this.checkNodeForBio(s)}}return false},checkNodeForBio:function(s){var r=0;for(r=0;r<this.biotopes.length;r++){if(s.biotope===this.biotopes[r]){return true}}return false},checkNodeForBioLiberal:function(s){var r=0;if(s.biotope){for(r=0;r<this.biotopesAll.length;r++){if(s.biotope===this.biotopesAll[r]){return true}}}return false},checkNodeForCrowding:function(t){var r=0,s=0;for(r=0;r<t.contains.length;r++){if(t.contains[r].type===this.owner.type){s+=1}}return(s>this.crowdLimit)},handleCrowding:function(t){var s="",u=this.owner.node,r=null;if(this.checkNodeForCrowding(u)){if(this.crowded&&this.mobile){for(s in t){if(!this.checkNodeForCrowding(t[s])&&this.checkNodeForBio(t[s])){r=t[s];break}}if(r){this.move(r);this.crowded=false;return}else{this.removeOrganism(this.owner);return}}else{if(this.mobile){this.stationary=Math.random()*10000;this.crowded=true}else{this.removeOrganism(this.owner)}}return false}else{this.crowded=false;return true}},checkNodeForNestCrowding:function(u){var s=0,r=0,t=0;if(Array.isArray(this.creates)){for(s=0;s<this.creates.length;s++){for(r=0;r<u.contains.length;r++){if(u.contains[r].type===this.creates[s]){t+=1}}if(this.owner.type===this.creates[s]){t-=1}}}else{for(r=0;r<u.contains.length;r++){if(u.contains[r].type===this.creates){t+=1}}if(this.owner.type===this.creates){t-=1}}return(t>=this.createLimit)},checkNodeForNest:function(s){var r=0,t=0;if(this.nestOrganism){if(this.nestOrganism===(this.owner.subtype||this.owner.type)){t=-1}for(r=0;r<s.contains.length;r++){if((s.contains[r].subtype||s.contains[r].type)===this.nestOrganism){if(!t){return(s.biotope===this.nestBiotope)}t+=1}}return false}else{return(s.biotope===this.nestBiotope)}},logNeed:function(r,s){if(!this.needing){this.myNeed=r;this.needing=this.needingTime;this.hadNeed=!s;if(this.hadNeed){this.owner.parent.triggerEvent("log-need",this.owner)}this.owner.triggerEvent("wield-shield",{onShield:function(t){t.state[r]=true;if(s){t.state.satisfied=true}t.needer=this.owner}})}},updateNeed:function(r){if(this.needing){if(r){this.needing-=r.delta;if(this.needing<=0){this.needing=0;this.owner.triggerEvent("drop-shield")}}else{this.needing=0;this.owner.triggerEvent("drop-shield")}}},metNeed:function(r,s){this.owner.parent.triggerEvent("award-points",{entity:this.owner,points:s?20:10});if(this.hadNeed){this.updateNeed(0);this.logNeed(r,true)}},addOrganism:function(s,r){this.procreate=0;this.stationary=this.stationaryTime;if(Array.isArray(s)){s=s[Math.floor(Math.random()*s.length)]}this.owner.parent.triggerEvent("add-organism",{type:s,nodeId:r.nodeId})},removeOrganism:function(r){this.owner.parent.triggerEvent("remove-organism",{organism:r})},destroy:function(){this.owner.node.trees=0;this.owner.node.hasTrees=false}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"logic-flower",constructor:function(c){this.pollinated=false;this.fruitification=0;this.fruitificationThreshold=500;this.paused=false},events:{"handle-logic":function(e){var c=this.owner.parent,d=this.owner.node.nodeId;if(!this.paused&&this.pollinated){this.fruitification+=e.delta;if(this.fruitification>=this.fruitificationThreshold){c.triggerEvent("remove-organism",{organism:this.owner});c.triggerEvent("add-organism",{type:"durian-fruit",nodeId:d})}}},fruitify:function(){this.pollinated=true},pause:function(){this.paused=true},unload:function(){this.paused=true},unpause:function(){this.paused=false}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"position-saver",constructor:function(c){this.positionType=c.positionType||this.owner.type},events:{"on-node":function(c){var d=false;if(c.positions&&c.positions[this.positionType]){d=c.isSpaceAvailable(this.positionType);if(d){d.organism=this.owner;this.owner.triggerEvent("set-node-offset",d)}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}this.node=c},"leave-node":function(){var d=0,c=null,e=this.node;if(e&&e.positions&&e.positions[this.positionType]){c=e.positions[this.positionType];for(d=0;d<c.length;d++){if(c[d].organism===this.owner){c[d].organism=null;break}}}},unload:function(){var d=0,c=null,e=this.node;if(e&&e.positions&&e.positions[this.positionType]){c=e.positions[this.positionType];for(d=0;d<c.length;d++){if(c[d].organism===this.owner){c[d].organism=null;break}}}this.paused=true},"handle-logic":function(c){},"get-save-state":function(c){var e=this.owner.node||this.node,d={x:this.owner.x,y:this.owner.y,z:this.owner.z,nodeId:e.nodeId},f={height:0,name:"",properties:d,type:this.owner.type,visible:true,width:0,x:this.owner.x,y:this.owner.y};c(f)}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"remove-residents",constructor:function(c){this.residents=c.residents},events:{unload:function(){var d=0,c=0,e=null;if(this.residents&&this.owner.node&&this.owner.node.contains){e=this.owner.node.contains.slice();for(d=0;d<this.residents.length;d++){for(c=0;c<e.length;c++){if(this.residents[d]===e[c].type){this.owner.parent.triggerEvent("remove-organism",{organism:e[c]})}}}}}},methods:{},publicMethods:{}})})();(function(){return b.createComponentClass({id:"pollen",constructor:function(c){this.paused=false;this.bats=null;this.flowers=null},events:{load:function(){this.addFlower(5)},"on-node":function(d){this.bats=d.getPositions("bat");this.flowers=d.getPositions("durian-fruit");for(var c=0;c<this.flowers.length;c++){this.bats.splice(0,0,{pollinate:this.flowers[c],x:this.flowers[c].x,y:this.flowers[c].y,z:this.flowers[c].z+5})}},"durian-fruit-left":function(){this.addFlower(1)},unload:function(){this.paused=true}},methods:{addFlower:function(d){var c=this;setTimeout(function(){if(!c.paused){for(var e=0;e<d;e++){c.owner.parent.triggerEvent("add-organism",{type:"durian-flower",nodeId:c.owner.node.nodeId})}}},3000)},destroy:function(){for(var c=this.bats.length-1;c>=0;c--){if(this.bats[c].pollinate){this.bats.splice(c,1)}}this.paused=true}},publicMethods:{}})})();(function(){var c={mangrove:{tally:12000000,entity:"mangrove-trees"},forest:{tally:12000000,entity:"forest-trees"},lake:{tally:30000,entity:"fish"}};return b.createComponentClass({id:"tree-producer",constructor:function(d){this.neighbors=null;this.paused=false},events:{load:(function(){var d=0;return function(){d=1-d;this.owner.state["variant-"+d]=true}})(),"on-node":function(e){var d=this,f=false;if(e.positions&&e.positions[this.owner.type]){f=e.isSpaceAvailable(this.owner.type);if(f){f.organism=this.owner;this.owner.triggerEvent("set-node-offset",f)}else{this.owner.parent.triggerEvent("remove-organism",{organism:this.owner})}}this.node=e;this.setupNests()},"leave-node":function(){var e=0,d=null,f=this.node;if(f&&f.positions&&f.positions[this.owner.type]){d=f.positions[this.owner.type];for(e=0;e<d.length;e++){if(d[e].organism===this.owner){d[e].organism=null;break}}}},unload:function(){var e=0,d=null,f=this.node;if(f&&f.positions&&f.positions[this.owner.type]){d=f.positions[this.owner.type];for(e=0;e<d.length;e++){if(d[e].organism===this.owner){d[e].organism=null;break}}}this.paused=true;this.node.nested-=1;if(!this.node.nested){for(var e=this.orgM.length-1;e>=0;e--){if(this.orgM[e].inTree){if(this.orgM[e].organism){this.owner.parent.triggerEvent("remove-organism",{organism:this.orgM[e].organism})}this.orgM.splice(e,1)}}for(var e=this.monk.length-1;e>=0;e--){if(this.monk[e].inTree){if(this.monk[e].organism){this.owner.parent.triggerEvent("remove-organism",{organism:this.monk[e].organism})}this.monk.splice(e,1)}}}},"handle-logic":function(e){var d=this.owner.node;if(this.paused){return}if(this.owner.type!=="fish"){d.trees=0}d.hasTrees=true;if(!this.neighbors){this.neighbors=[d.getEast(),d.getSouth(),d.getWest(),d.getNorth()]}if(this.owner.type==="mangrove-trees"){this.grow("mangrove",e.delta)}else{if(this.owner.type==="forest-trees"){this.grow("forest",e.delta)}else{if(this.owner.type==="fish"){this.grow("lake",e.delta)}}}},"get-save-state":function(d){var f=this.owner.node||this.node,e={x:this.owner.x,y:this.owner.y,z:this.owner.z,nodeId:f.nodeId},g={height:0,name:"",properties:e,type:this.owner.type,visible:true,width:0,x:this.owner.x,y:this.owner.y};d(g)},pause:function(){this.paused=true},unpause:function(){this.paused=false}},methods:{grow:function(f,g){var e=0,d=this;if((this.owner.node.biotope===f)&&(!this.owner.slime)){for(e=0;e<this.neighbors.length;e++){if(this.neighbors[e].biotope===f){if(!this.neighbors[e].hasTrees){this.neighbors[e].trees+=g;this.checkGrowth(f,this.neighbors[e])}else{if(f==="lake"){this.neighbors[e].trees+=g;this.checkGrowth(f,this.neighbors[e])}}}}}else{if(!this.killingMe){this.killingMe=true;setTimeout(function(){if(!d.paused){d.owner.parent.triggerEvent("remove-organism",{organism:d.owner})}else{d.killingMe=false}},3000)}}},checkGrowth:function(d,f){var e=c[d];if(f.trees>=e.tally){f.trees=0;this.addOrganism(e.entity,f)}},addOrganism:function(e,d){d.hasTrees=true;this.owner.parent.triggerEvent("add-organism",{type:e,nodeId:d.nodeId})},setupNests:function(){var g=this.node,d=g.getPositions("nest"),f=null,h=null;this.orgM=g.getPositions("orangutan");this.monk=g.getPositions("monkey");if(!g.nested){for(var e=0;e<d.length;e++){f=d[e];h={inTree:f.inTree,x:f.x,y:f.y,z:f.z+0.001};this.orgM.splice(0,0,h);this.monk.splice(0,0,h)}}g.nested=g.nested||0;g.nested+=1},destroy:function(){this.owner.node.trees=0;this.owner.node.hasTrees=false}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"audio-muter",constructor:function(c){this.handle=!createjs.Sound.getMute()},events:{"window-focused":function(){if(this.handle){this.owner.triggerEventOnChildren("audio-unpause",{global:true})}},"window-blurred":function(){if(this.handle){this.owner.triggerEventOnChildren("audio-pause",{global:true})}}},methods:{destroy:function(){if(this.handle){this.owner.triggerEventOnChildren("audio-unpause",{global:true})}}},publicMethods:{}})})();(function(){return b.createComponentClass({id:"check-saved-game",constructor:function(c){this.remove=c.remove||false},events:{"scene-live":function(){var c=this,d=localStorage.getItem("cyberchase-re");if(d){d=JSON.parse(d);if(d.score||(d.size==="medium")||(d.size==="large")){if(this.remove){setTimeout(function(){c.owner.state.visible=true},1)}return}}if(!this.remove){setTimeout(function(){c.owner.state.visible=true},1)}}},methods:{},publicMethods:{}})})();(function(){var e=5,c=10,d=20;return b.createComponentClass({id:"map-lock",constructor:function(f){},events:{"scene-loaded":function(h){var g=localStorage.getItem("cyberchase-re"),f="small";if(g){g=JSON.parse(g);if(g.size){f=g.size}}this.owner.triggerEvent("set-persistent-scene-data",{size:f})},"clear-then-new-scene":function(){var f=localStorage.getItem("cyberchase-re");if(f){f=JSON.parse(f)}else{f={}}delete f.score;delete f.level;delete f.tutorial;delete f.size;localStorage.setItem("cyberchase-re",JSON.stringify(f));b.setOnline(JSON.stringify(f));this.owner.triggerEvent("set-persistent-scene-data",{size:"small"});this.owner.triggerEvent("new-scene")},"show-dialog":function(){this.owner.state["show-yes-no"]=true},"hide-dialog":function(){this.owner.state["show-yes-no"]=false}},methods:{},publicMethods:{}})})();(function(){var h=false,d=false,e=false,g=null,f=function(l,m){var j=null,n=null,o=function(){var r=[],t=0,s=0;if(!j&&m.tag){j=m.tag;if(j.src!==j.id){j.id=j.src}}if(j){r=j.buffered;for(var q=0,p=r.length;q<p;q++){t+=(r.end(q)-r.start(q))}s=(Math.floor((t*100)/j.duration)||0);l.innerHTML="Loading Audio: "+s+"%";if(s>=99){clearInterval(k);e=true;if(d&&g){g()}}else{if(!n){n=function(){j.removeEventListener("play",n);m.pause()};j.addEventListener("play",n)}}}},k=setInterval(o,500);l.innerHTML="Loading Audio...";l.className="loading-audio"},c=function(m,j){var n=null,l="",k=document.createElement("div");k.style.width="100%";k.style.height="100%";k.style.position="absolute";k.style.zIndex="100";m.appendChild(k);n=function(o){k.removeEventListener("touchstart",n,false);if(d){if(g){g()}}else{l=createjs.Sound.createInstance(j).src;if(l){createjs.Sound.removeSound(j);createjs.Sound.registerSound(l,j,1);f(k,createjs.Sound.play(j))}else{console.warn('Component "enable-ios-audio": Invalid audio path.');if(g){g()}}}};k.addEventListener("touchstart",n,false);return k};createjs.HTMLAudioPlugin.enableIOS=true;if(b.settings.supports.iPhone4||b.settings.supports.iPad2){createjs.Sound.registerPlugins([createjs.HTMLAudioPlugin]);delete b.settings.aspects.m4a;b.settings.aspects.m4aCombined=true;if(b.game){b.game.settings.aspects=b.settings.aspects}}else{if(b.settings.supports.ie){createjs.FlashPlugin.swfPath="./";createjs.Sound.registerPlugins([createjs.FlashPlugin,createjs.HTMLAudioPlugin])}else{createjs.Sound.initializeDefaultPlugins()}}createjs.Sound.addEventListener("fileload",function(){d=true;if(e&&g){g()}});return b.createComponentClass({id:"enable-ios-audio",constructor:function(k){var j=this;if(!h){h=true;this.touchOverlay=c(this.owner.rootElement,k.audioId);g=function(){g=null;j.owner.triggerEvent("ios-audio-ready");j.removeComponent()}}else{this.removeComponent()}},methods:{removeComponent:function(){this.owner.removeComponent(this)},destroy:function(){if(this.touchOverlay){this.owner.rootElement.removeChild(this.touchOverlay)}delete this.touchOverlay}}})})();(function(){var d=3,c=8;return b.createComponentClass({id:"results",constructor:function(e){this.worstBalance="healthy";this.highScore=false;this.unlockMediumScore=e.unlockMediumScore||0;this.unlockLargeScore=e.unlockLargeScore||0;this.unlock=false},events:{"scene-loaded":function(j){var g="",f=j.size,h=localStorage.getItem("cyberchase-re"),e=false;this.winning=j.winning;if(h){h=JSON.parse(h)}else{h={}}if(!h.score){h.score=0}if(!h.hiscore){h.hiscore=0}if(h.hiscore<j.score){if(h.hiscore!=0){this.highScore=true;if(b.game.kartKingdom){b.game.kartKingdom.event("80339480-880b-41c5-a92e-91bed814521b")}}h.hiscore=j.score;e=true}if(h.score<j.score){h.score=j.score;e=true;if(j.score>=this.unlockMediumScore||j.score>=this.unlockLargeScore){this.unlock=true;this.owner.triggerEvent("el-check-map-buttons")}}this.score=j.score;if((this.winning===d)||(this.winning===c)){g+="<div class='title-desc'>You saved Ecotopia from</div>"}else{g+="<div class='title-desc'><br />You saved Ecotopia from</div>"}if(j.score===1){g+="<div class='score'><div>"+j.score+"</div> Hacker Disaster</div>"}else{g+="<div class='score'><div>"+j.score+"</div> Hacker Disasters</div>"}g+="<div class='best'><div class='label'>High Score: </div><div class='value'>"+h.hiscore+"</div></div>";if(this.winning){if(this.winning===d){g+="<div class='balance'><div class='label'>New biotope unlocked! </div><div class='value'><div class='forest "+j.biotopes.forest+"'><div></div></div></div></div>"}else{if(this.winning===c){g+="<div class='balance'><div class='label'>New biotope unlocked! </div><div class='value'><div class='mangrove "+j.biotopes.mangrove+"'><div></div></div></div></div>"}}}else{delete h.level;delete h.score;e=true}if(e){localStorage.setItem("cyberchase-re",JSON.stringify(h));b.setOnline(JSON.stringify(h))}this.owner.triggerEvent("update-content",g)},"peer-entity-added":function(e){if(e.type==="vo-inez"){this.inez=e;this.inez.state["inez-says-sad"]=false}else{if(e.type==="button-play-game"){this.bpg=e}else{if(e.type==="button-saved-game"){this.bsg=e}}}},"play-results-audio":function(){if(this.winning){if(this.score===d){this.inez.triggerEvent("results-5")}else{if(this.score===c){this.inez.triggerEvent("results-10")}}}else{if(this.highScore){this.inez.triggerEvent("results-high")}else{if(this.score===0){this.inez.triggerEvent("follow-up")}else{if(this.score<=5){this.inez.triggerEvent("results-a")}else{if(this.score<=10){this.inez.triggerEvent("results-b")}else{this.inez.triggerEvent("results-c")}}}}}},"finished-talking":function(){var e=this;if(b.game.kartKingdom){setTimeout(function(){if(!e.destroyed){b.game.kartKingdom.levelComplete()}},3000)}}},methods:{destroy:function(){this.destroyed=true}},publicMethods:{}})})()})();