!function(e,n){function t(e,n){var t={frames:1,time:.6,direction:"x",startPaused:!1,playOnce:!1,onComplete:null,reverse:!1};for(var a in n)t[a]=n[a];var o=t.time/t.frames;e.setAttribute("data-animated","true");for(var i=t.startPaused,s=0,r="x"==t.direction?e.naturalWidth/t.frames:e.naturalHeight/t.frames,m=[],u=0;u<t.frames;u++)m[u]={sx:"x"==t.direction?r*u:0,sy:"x"==t.direction?0:r*u,sw:"x"==t.direction?r:e.naturalWidth,sh:"x"==t.direction?e.naturalHeight:r};var l=(new Date).getTime()/1e3;e.animDetails={pause:function(e){i=e,l=(new Date).getTime()/1e3},reset:function(){s=0},reverse:function(e){t.reverse=e},update:function(){if(i)l=(new Date).getTime()/1e3;else for(var e=(new Date).getTime()/1e3;e-l>o;)if(l+=o,s++,s>=t.frames){if(null!=t.onComplete&&(t.onComplete(),s--),t.playOnce)return void(i=!0);s=0}},draw:function(n,a,o,i,r,u){var l=t.reverse?t.frames-s-1:s,c=u||!1,d=i,g=r,p=0,y=0;if(c){var I=m[l].sw/m[l].sh,f=i/r,A=I>f?i/m[l].sw:r/m[l].sh;d=m[l].sw*A,g=m[l].sh*A,p=i>d?(i-d)/2:0,y=r>g?(r-g)/2:0}n.drawImage(e,m[l].sx,m[l].sy,m[l].sw,m[l].sh,a+p,o+y,d,g)}}}function a(e,n,t,a,o,i,s,r,m,u){var l=o/i,c=m/u,d=l>c?m/o:u/i,g=o*d,p=i*d,y=m>g?(m-g)/2:0,I=u>p?(u-p)/2:0;e.drawImage(n,t,a,o,i,s+y,r+I,g,p)}function o(){function e(){console.log("Audio error...")}if(!MemoryGame.support.webAudio)return i();window.AudioContext=window.AudioContext||window.webkitAudioContext;var n=null,t={},a={},o={},s={init:function(){n=new AudioContext,n.createGain=n.createGain||n.createGainNode,n.createDelay=n.createDelay||n.createDelayNode,n.createScriptProcessor=n.createScriptProcessor||n.createJavaScriptNode,n.setTargetAtTime=n.setTargetAtTime||n.setTargetValueAtTime,o.gain=n.createGain(),o.gain.connect(n.destination)},loadSound:function(i,s,r,m,u,l){var c="./Sounds/";if(c+=MemoryGame.support.ogg?"OGG/"+s+".ogg":"WAV/"+s+".wav",console.log("Loading sound: - "+c),void 0!=t[i])return console.log("sound with this name already exists"),void u();t[i]={name:i,ready:!1,buffer:null,volume:n.createGain(),group:l,type:r},void 0!=l&&(void 0==a[l]&&(a[l]=[]),a[l].push(t[i])),void 0!=m&&null!=m&&(t[i].volume.gain.value=m);var d=new XMLHttpRequest;d.open("GET",c,!0),d.responseType="arraybuffer",d.onload=function(){200==d.status?n.decodeAudioData(d.response,function(e){t[i].buffer=e,t[i].ready=!0,t[i].volume.connect(o.gain),void 0!=u&&null!=u&&u()},e):e()},d.send()},playSound:function(e,o,i){if(void 0==t[e]||null==t[e])return void console.log("playSound-> sound doesn't exist");if(!t[e].ready)return void console.log("playSound-> sound not ready");if(void 0!=t[e].group&&void 0!=a[t[e].group])for(var s=0;s<a[t[e].group].length;s++)MemoryGame.audio.stopSound(a[t[e].group][s].name);t[e].source=n.createBufferSource(),t[e].source.start=t[e].source.start||t[e].source.noteOn,t[e].source.stop=t[e].source.stop||t[e].source.noteOff,t[e].source.loop=o||!1,t[e].source.buffer=t[e].buffer,t[e].source.connect(t[e].volume),t[e].source.onended=i,t[e].source.start(0)},stopSound:function(e){return void 0==t[e]||null==t[e]?void console.log("playSound-> sound doesn't exist"):t[e].ready?void(void 0!=t[e].source&&null!=t[e].source&&t[e].source.stop(0)):void console.log("playSound-> sound not ready")},stopSoundsOfType:function(e){for(var n in t)t[n].type==e&&MemoryGame.audio.stopSound(n)},stopAllNonLoopSounds:function(){for(var e in t)t[e].looping||MemoryGame.audio.stopSound(e)},stopAllSounds:function(){for(var e in t)MemoryGame.audio.stopSound(e)},setSoundVolume:function(e,n){return void 0==t[e]||null==t[e]?void console.log("setSoundVolume-> sound doesn't exist"):void(t[e].volume.gain.value=n)},setMasterVolume:function(e){o.gain.gain.value=e}};return s.init(),s}function i(){var e=document.getElementById("GameSounds"),n={},t={},a=1,o={init:function(){},loadSound:function(a,o,i,s,r,m){var u="./Sounds/OGG/"+o+".ogg",l="./Sounds/WAV/"+o+".wav",c="./Sounds/MP3/"+o+".mp3";console.log("Loading sound: - "+o);var d=document.createElement("audio"),g=document.createElement("source"),p=document.createElement("source"),y=document.createElement("source");g.setAttribute("type","audio/ogg"),p.setAttribute("type","audio/wav"),y.setAttribute("type","audio/mp3"),g.src=u,p.src=l,y.src=c,d.appendChild(g),d.appendChild(p),d.appendChild(y),e.appendChild(d),d.load(),n[a]={name:a,elem:d,volume:s,group:m,type:i},void 0!=m&&(void 0==t[m]&&(t[m]=[]),t[m].push(n[a])),r()},playSound:function(e,o,i){if(n[e].elem.ended||MemoryGame.audio.stopSound(e),n[e].elem.loop=o||!1,void 0!=n[e].group&&void 0!=t[n[e].group])for(var s=0;s<t[n[e].group].length;s++)MemoryGame.audio.stopSound(t[n[e].group][s].name);n[e].elem.volume=MemoryGame.MathFunctions.clamp(n[e].volume*a,0,1),n[e].elem.onended=i,n[e].elem.play()},stopSound:function(e){n[e].elem.pause(),n[e].elem.currentTime=0},stopSoundsOfType:function(e){for(var t in n)n[t].type==e&&MemoryGame.audio.stopSound(t)},stopAllNonLoopSounds:function(){for(var e in n)n[e].looping||MemoryGame.audio.stopSound(e)},stopAllSounds:function(){for(var e in n)MemoryGame.audio.stopSound(e)},setSoundVolume:function(e,t){n[e].volume=t,n[e].elem.volume=MemoryGame.MathFunctions.clamp(n[e].volume*a,0,1)},setMasterVolume:function(e){a=e;for(var t in soudns)n[t].elem.volume=MemoryGame.MathFunctions.clamp(n[name].volume*a,0,1)},setSoundSpeed:function(){}};return o.init(),o}function s(){var e=navigator.userAgent.toLowerCase(),n={canvas:!1,touch:!!("ontouchstart"in window),iPod:e.search("ipod")>-1,iPhone:e.search("iphone")>-1,iPad:e.search("ipad")>-1,safari:e.search("safari")>-1,ie:e.search("msie")>-1,firefox:e.search("firefox")>-1,android:e.search("android")>-1,chrome:e.search("chrome")>-1,silk:e.search("silk")>-1,iOS:!1,mobile:!1,desktop:!1,multitouch:!1,ogg:!0,m4a:!0,mp3:!0,webAudio:!1};n.iOS=n.iPod||n.iPhone||n.iPad,n.mobile=n.iOS||n.android||n.silk,n.desktop=!n.mobile,n.touch&&(n.android?parseInt(e.slice(e.indexOf("android")+8))>2&&(n.multitouch=!0):n.multitouch=!0);var t=document.createElement("audio");!t.canPlayType||t.canPlayType&&""!=t.canPlayType('audio/ogg; codecs="vorbis"')||(n.ogg=!1,(n.ie||!t.canPlayType||""==t.canPlayType("audio/mp4"))&&(n.m4a=!1)),delete t;try{var a=void 0!=window.AudioContext?new AudioContext:new window.webkitAudioContext;a.createBufferSource(),delete a,n.webAudio=!0}catch(o){console.log("No support for HTML5 Web Audio API, use Audio tag instead.")}var i=document.createElement("canvas");try{n.canvas=!!i.getContext("2d")}catch(o){n.canvas=!!i.getContext}return delete i,n}function r(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function m(){document.body.onkeydown=function(e){b[e.keyCode]=!0,G.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())},document.body.onkeyup=function(e){b[e.keyCode]=!1,G.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())}}function u(){var e=document.getElementById("play_screen_svg"),n={name:"playScene",getPreloadItems:function(){var e=null,n=[];switch(MemoryGame.currentSceneIndex){case MemoryGame.AvailableLevels.NorthAmerica:e=E,n=k;break;case MemoryGame.AvailableLevels.SouthAmerica:e=C,n=P;break;case MemoryGame.AvailableLevels.Africa:e=w,n=N;break;case MemoryGame.AvailableLevels.Tortuga:default:e=x,n=B}var t=Math.floor(Math.random()*e.length);fn=e[t];for(var a={images:[{name:"cardFlip",src:ln},{name:fn,src:fn}],sounds:[{name:"bonus_inst",path:"VO_BonusInstruction",type:"voice"},{name:"pick_card_inst",path:"VO_Instruction1",type:"voice"},{name:"find_pair_inst",path:"VO_Instruction2",type:"voice"},{name:"end_game",path:"VO_EndGame",type:"voice"},{name:"play_again_inst",path:"VO_PlayAgain",type:"voice"},{name:"match",path:"match",type:"effect"}]},o=[],i=0;i<n.length;i++){var s=n[i],r=s.match(/([\w|\s]*).png$/)[1];o.indexOf(r)>-1||(o.push(r),a.images.push({name:r,src:s}))}return a},init:function(){e.setAttribute("style",""),c(e),Sn=0,In=0,An=!1,Mn=!1,bn=!1,l(hn,!1,e),l(_n,!1,e),MemoryGame.audio.playSound(MemoryGame.currentSceneIndex==MemoryGame.AvailableLevels.Tortuga?"bonus_inst":"pick_card_inst"),MemoryGame.audio.setSoundVolume("match",R)},uninit:function(){e.setAttribute("style","display:none");for(var n=0;n<pn.length;n++)null!=pn[n]&&(e.removeChild(pn[n]),pn[n]=null);MemoryGame.disableCardButtons=!1},update:function(){if(An)yn.animDetails.update();else if(In>0)In-=MemoryGame.dt;else if(1==Mn)Mn=!1,MemoryGame.disableCardButtons=!1,l(hn,!0,e),MemoryGame.audio.playSound("play_again_inst");else if(null!=gn.image1&&null!=gn.image2){var n=gn.button1.cardImage==gn.button2.cardImage;if(MemoryGame.currentSceneIndex==MemoryGame.AvailableLevels.Tortuga)if(gn.button1.cardImage.indexOf(T)>-1){var t=gn.button2.cardImage.substring(gn.button2.cardImage.lastIndexOf("/")+1,gn.button2.cardImage.lastIndexOf("."));gn.button1.cardImage.indexOf(t)>-1&&(n=!0)}else if(gn.button2.cardImage.indexOf(T)>-1){var t=gn.button1.cardImage.substring(gn.button1.cardImage.lastIndexOf("/")+1,gn.button1.cardImage.lastIndexOf("."));gn.button2.cardImage.indexOf(t)>-1&&(n=!0)}n&&(e.removeChild(pn[gn.button1.buttonIndex]),e.removeChild(pn[gn.button2.buttonIndex]),pn[gn.button1.buttonIndex]=null,pn[gn.button2.buttonIndex]=null,Sn++,1==Sn?MemoryGame.audio.playSound("find_pair_inst"):Sn>=mn*un/2&&(Mn=!0,In=rn,1!=MemoryGame.completedLevel[MemoryGame.currentSceneIndex]&&(MemoryGame.completedLevel[MemoryGame.currentSceneIndex]=1,MemoryGame.saveData()),MemoryGame.audio.playSound("end_game"))),e.removeChild(gn.image1),e.removeChild(gn.image2),gn.image1=null,gn.image2=null,MemoryGame.disableCardButtons=Mn}},draw:function(e){e.setTransform(1,0,0,1,0,0),e.fillStyle="black",e.fillRect(0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y),e.globalAlpha=Mn?1:D,e.drawImage(document.getElementById("image_"+fn),0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y),e.globalAlpha=1,An&&yn.animDetails.draw(e,vn[0],vn[1],U,J)}};return _(V[0],V[1],V[2],V[3],e,{sound:"click",up:V[4],down:V[5],event:function(){0==bn&&l(_n,!0,e)}}),_(H[0],H[1],H[2],H[3],e,{sound:"click",up:H[4],down:H[5],event:function(){0==bn&&$("#help_screen_svg").show()}}),hn[0]=M(Z[0],Z[1],Z[2],Z[3],e,{image:Z[4]}),hn[1]=_(Q[0],Q[1],Q[2],Q[3],e,{sound:"click",up:Q[4],down:Q[5],event:function(){MemoryGame.sceneManager.changeScene("playScene")}}),hn[2]=_(Y[0],Y[1],Y[2],Y[3],e,{sound:"click",up:Y[4],down:Y[5],event:function(){MemoryGame.sceneManager.changeScene("setupScene")}}),l(hn,!1,e),_n[0]=document.createElementNS(svgns,"rect"),_n[0].setAttribute("x",0),_n[0].setAttribute("y",0),_n[0].setAttribute("width",MemoryGame.SCREEN_SIZE_X),_n[0].setAttribute("height",MemoryGame.SCREEN_SIZE_Y),_n[0].setAttribute("fill","rgba(0,0,0,0)"),_n[1]=M(X[0],X[1],X[2],X[3],e,{image:X[4]}),_n[2]=_(W[0],W[1],W[2],W[3],e,{sound:"click",up:W[4],down:W[5],event:function(){MemoryGame.sceneManager.changeScene("setupScene")}}),_n[3]=_(F[0],F[1],F[2],F[3],e,{sound:"click",up:F[4],down:F[5],event:function(){l(_n,!1,e)}}),l(_n,!1,e),h({item:$("#help_close"),up:function(){In=on,MemoryGame.audio.playSound("click"),$("#help_screen_svg").hide()}}),n}function l(e,n,t){bn=n;for(var a=0;a<e.length;a++)null!=e[a]&&(1==n?(e[a].setAttribute("style",""),t.appendChild(e[a])):e[a].setAttribute("style","display:none"))}function c(e){yn=document.getElementById("image_cardFlip"),t(yn,{frames:cn,direction:"x",time:dn,startPaused:!1,playOnce:!0,onComplete:function(){if(An=!1,null!=gn.image2){gn.image2.setAttribute("style",""),pn[gn.button2.buttonIndex].setAttribute("style",""),In=sn;var e=gn.button1.cardImage==gn.button2.cardImage;if(MemoryGame.currentSceneIndex==MemoryGame.AvailableLevels.Tortuga)if(gn.button1.cardImage.indexOf(T)>-1){var n=gn.button2.cardImage.substring(gn.button2.cardImage.lastIndexOf("/")+1,gn.button2.cardImage.lastIndexOf("."));gn.button1.cardImage.indexOf(n)>-1&&(e=!0)}else if(gn.button2.cardImage.indexOf(T)>-1){var n=gn.button1.cardImage.substring(gn.button1.cardImage.lastIndexOf("/")+1,gn.button1.cardImage.lastIndexOf("."));gn.button2.cardImage.indexOf(n)>-1&&(e=!0)}e&&MemoryGame.audio.playSound("match")}else gn.image1.setAttribute("style",""),pn[gn.button1.buttonIndex].setAttribute("style",""),MemoryGame.disableCardButtons=!1}});var n=null;switch(MemoryGame.currentSceneIndex){case MemoryGame.AvailableLevels.NorthAmerica:n=k;break;case MemoryGame.AvailableLevels.SouthAmerica:n=P;break;case MemoryGame.AvailableLevels.Africa:n=N;break;case MemoryGame.AvailableLevels.Tortuga:default:n=B}d(n);for(var a=0;mn>a;a++)for(var o=0;un>o;o++){var i=a*un+o,s=j+a*q,r=K+o*z;pn[i]=_(s,r,U,J,e,{sound:"click",up:O,down:L,xPosition:s,yPosition:r,cardImage:n[i],buttonIndex:i,event:function(){if(!An&&0>=In&&(null==gn.image1||null==gn.image2)){MemoryGame.disableCardButtons=!0,yn.animDetails.reset(),yn.animDetails.pause(!1),An=!0,vn=[this.xPosition,this.yPosition];var n=null;null==gn.image1?(n=M(this.xPosition+en,this.yPosition+nn,tn,an,e,{image:this.cardImage}),gn.image1=n,gn.button1=this,n.setAttribute("style","display:none")):(n=M(this.xPosition+en,this.yPosition+nn,tn,an,e,{image:this.cardImage}),gn.image2=n,gn.button2=this),n.setAttribute("style","display:none"),pn[this.buttonIndex].setAttribute("style","display:none")}}})}}function d(e){for(var n,t,a=e.length;0!==a;)t=Math.floor(Math.random()*a),a-=1,n=e[a],e[a]=e[t],e[t]=n;return e}function g(){var e=[-10,-10,1008,576],n=[450,200,360,240],t={},o=null,i=0,s="idle",r=0,m=0;this.addScene=function(e){t[e.name]=e},this.reset=function(){if(null!=o){var e=o.name;o.uninit(),this.changeScene(e)}},this.changeScene=function(e){function n(){s="delay",r=wn,m=r}if($("#svgCanvas").hide(),s="loading",i=0,this.draw(MemoryGame.frontContext),null!=o&&o.uninit(),o=t[e],void 0!=o.getPreloadItems){var a=o.getPreloadItems();MemoryGame.PreLoadFromList(a.images,a.sounds,function(){n()},function(e){i=e})}else void 0!=o.preloadItems&&null!=o.preloadItems?MemoryGame.PreLoadFromList(o.preloadItems.images,o.preloadItems.sounds,function(){n()},function(e){i=e}):n()},this.update=function(){"idle"==s?o.update():("delay"==s&&(r-=MemoryGame.dt,0>r&&(o.init(),s="idle",$("#svgCanvas").show())),document.getElementById("image_loadinganimation").animDetails.update())},this.draw=function(t){"loading"==s||"delay"==s?(MemoryGame.frontContext.setTransform(1,0,0,1,0,0),MemoryGame.frontContext.fillStyle="black",MemoryGame.frontContext.fillRect(0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y),a(t,document.getElementById("image_loadingbackground"),0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y,e[0],e[1],e[2],e[3]),document.getElementById("image_loadinganimation").animDetails.draw(t,n[0],n[1],n[2],n[3]),"delay"==s&&(t.globalAlpha=r/m),MemoryGame.frontContext.fillStyle="#222222",t.strokeStyle="black",t.lineWidth=2,MemoryGame.frontContext.fillRect(Gn[0],Gn[1],Gn[2],Gn[3]),MemoryGame.frontContext.strokeRect(Gn[0],Gn[1],Gn[2],Gn[3]),MemoryGame.frontContext.fillStyle="lightblue",MemoryGame.frontContext.fillRect(Gn[0],Gn[1],Gn[2]*i,Gn[3]),MemoryGame.frontContext.fillStyle="#005500",MemoryGame.frontContext.textAlign="center",MemoryGame.frontContext.font="20pt Calibri",MemoryGame.frontContext.fillStyle="white",MemoryGame.frontContext.fillText("Loading...",494,90),t.save(),t.beginPath(),t.moveTo(Gn[0],Gn[1]),t.lineTo(Gn[0]+Gn[2]*i,Gn[1]),t.lineTo(Gn[0]+Gn[2]*i,Gn[1]+Gn[3]),t.lineTo(Gn[0],Gn[1]+Gn[3]),t.closePath(),t.clip(),t.restore(),t.globalAlpha=1):"idle"==s&&o.draw(t)}}function p(){var e=document.getElementById("setup_screen_svg"),n={name:"setupScene",preloadItems:{images:[{name:"map",src:En}],sounds:[{group:"vo_once",name:"choose_habitat",path:"VO_Habitat",type:"voice"},{group:"vo_once",name:"win_all_inst",path:"VO_Instruction4",type:"voice"},{group:"vo_once",name:"intro_tortuga",path:"VO_TortugaHQ",type:"voice"},{group:"vo_once",name:"intro_africa",path:"VO_TravelAfrica",type:"voice"},{group:"vo_once",name:"intro_north_america",path:"VO_TravelNorthAmerica",type:"voice"},{group:"vo_once",name:"intro_south_america",path:"VO_TravelSouthAmerica",type:"voice"}]},init:function(){e.setAttribute("style","");for(var n=!0,t=!1,a=0;a<MemoryGame.completedLevel.length-1;a++)t=t||0==MemoryGame.completedLevel[a],1==MemoryGame.completedLevel[a]&&(n=!1);0==t?(Wn.setAttribute("style","display:none"),Fn.setAttribute("style","")):(MemoryGame.audio.playSound(n?"choose_habitat":"win_all_inst"),Fn.setAttribute("style","display:none"),Wn.setAttribute("style","")),f(),I()},uninit:function(){e.setAttribute("style","display:none")},update:function(){},draw:function(e){e.setTransform(1,0,0,1,0,0),e.fillStyle="black",e.fillRect(0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y),e.drawImage(document.getElementById("image_map"),0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y)}};return jn=M(Bn[0],Bn[1],Bn[2],Bn[3],e,{image:Bn[4]}),Un=M(Tn[0],Tn[1],Tn[2],Tn[3],e,{image:Tn[4]}),Jn=M(On[0],On[1],On[2],On[3],e,{image:On[4]}),Kn=M(Ln[0],Ln[1],Ln[2],Ln[3],e,{image:Ln[4]}),qn=_(Rn[0],Rn[1],Rn[2],Rn[3],e,{sound:"click",up:Rn[4],down:Rn[5],event:function(){MemoryGame.audio.stopSoundsOfType("voice"),MemoryGame.sceneManager.changeScene("playScene")}}),I(),y(Dn,Vn,MemoryGame.AvailableLevels.NorthAmerica,Un,"intro_north_america"),y(Hn,Zn,MemoryGame.AvailableLevels.SouthAmerica,Jn,"intro_south_america"),y(Qn,$n,MemoryGame.AvailableLevels.Africa,jn,"intro_africa"),Wn=M(Nn[0],Nn[1],Nn[2],Nn[3],e,{image:Cn}),Fn=_(Nn[0],Nn[1],Nn[2],Nn[3],e,{sound:"click",up:Nn[4],down:Nn[5],event:function(){I(),MemoryGame.currentSceneIndex=MemoryGame.AvailableLevels.Tortuga,Kn.setAttribute("style",""),qn.setAttribute("style",""),MemoryGame.audio.playSound("intro_tortuga")}}),_(kn[0],kn[1],kn[2],kn[3],e,{sound:"click",up:kn[4],down:kn[5],event:function(){MemoryGame.audio.stopSoundsOfType("voice"),MemoryGame.sceneManager.changeScene("startScene")}}),_(Pn[0],Pn[1],Pn[2],Pn[3],e,{sound:"click",up:Pn[4],down:Pn[5],event:function(){$("#help_screen_svg").show()}}),h({item:$("#help_close"),up:function(){MemoryGame.audio.playSound("click"),$("#help_screen_svg").hide()}}),n}function y(e,n,t,a,o){var i=document.getElementById("setup_screen_svg"),s=_(e,n,xn[2],xn[3],i,{sound:"click",up:xn[4],down:xn[5],event:function(){I(),MemoryGame.currentSceneIndex=t,a.setAttribute("style",""),qn.setAttribute("style",""),MemoryGame.audio.playSound(o)}});s.className.baseVal="AreaButton",s.sceneIndex=t;var r=s.checkMark=document.createElementNS(svgns,"path");s.appendChild(r),r.setAttribute("d",Yn),r.setAttribute("fill",Xn),r.setAttribute("class","completionCheck"),r.setAttribute("style","display:none;")}function I(){jn.setAttribute("style","display:none"),Un.setAttribute("style","display:none"),Jn.setAttribute("style","display:none"),Kn.setAttribute("style","display:none"),qn.setAttribute("style","display:none")}function f(){$(".AreaButton").each(function(e,n){MemoryGame.completedLevel[n.sceneIndex]>0?n.checkMark.setAttribute("style",""):n.checkMark.setAttribute("style","display:none;")})}function A(){var e=document.getElementById("start_screen_svg"),n={name:"startScene",preloadItems:{images:[{name:"wide_bg",src:et}],sounds:[{name:"intro",path:"VO_Title",type:"voice"}]},init:function(){e.setAttribute("style",""),MemoryGame.audio.playSound("intro")},uninit:function(){e.setAttribute("style","display:none")},update:function(){},draw:function(e){e.setTransform(1,0,0,1,0,0),e.fillStyle="black",e.fillRect(0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y),e.drawImage(document.getElementById("image_wide_bg"),0,0,MemoryGame.SCREEN_SIZE_X,MemoryGame.SCREEN_SIZE_Y)}};return _(zn[0],zn[1],zn[2],zn[3],e,{sound:"click",up:zn[4],down:zn[5],event:function(){MemoryGame.sceneManager.changeScene("setupScene")}}),n}function v(e,n){function t(){a=setTimeout(t,e),n()}if(!isNaN(e)&&void 0!=n&&null!=n){var a=0;return{start:function(){t()},stop:function(){clearTimeout(a)}}}}function S(){MemoryGame.support.iOS&&(document.ontouchstart=function(e){e.preventDefault()},document.ontouchmove=function(e){e.preventDefault()})}function h(e){var n={item:null,down:function(){},up:function(){},move:function(){},stopEvent:!0,allowMultiple:!1};for(var t in e)n[t]=e[t];if(void 0!=n.item&&null!=n.item){var a=!1,o=!1,i=null;$(n.item).on("contextmenu",function(){return!1}),MemoryGame.support.desktop&&($(n.item).on("mousedown",function(e){(!o||n.allowMultiple)&&(!a||n.allowMultiple)&&(o=!0,n.down(e,this),n.stopEvent&&e.stopPropagation())}),$(n.item).on("mouseup",function(e){o=!1,n.up(e,this),n.stopEvent&&e.stopPropagation()}),$(n.item).on("mouseleave",function(e){o&&(o=!1,n.up(e,this),n.stopEvent&&e.stopPropagation())}),$(n.item).on("mousemove",function(e){if(null!=i){var t=e.pageX-i.pageX,a=e.pageY-i.pageY;(0!=t||0!=a)&&n.move(e,t,a,this)}i=e,n.stopEvent&&e.stopPropagation()})),MemoryGame.support.mobile&&($(n.item).on("click",function(e){e.preventDefault()}),$(n.item).on("touchstart",function(e){e.preventDefault(),o&&!n.allowMultiple||a&&!n.allowMultiple||(a=!0,n.down(e,this),previousTouch=null,n.stopEvent&&e.stopPropagation())}),$(n.item).on("touchend",function(e){e.preventDefault(),a=!1,n.up(e,this),n.stopEvent&&e.stopPropagation()}))}}function _(e,n,t,a,o,i){var s={up:"",down:"",event:function(){},sound:null,text:null,xPosition:0,yPosition:0,cardImage:"",buttonIndex:0};for(var r in i)s[r]=i[r];var m=document.createElementNS(svgns,"g");m.className.baseVal="gameButton";var u=document.createElementNS(svgns,"image"),l=document.createElementNS(svgns,"image");u.setAttributeNS(xlinkns,"href",s.up),l.setAttributeNS(xlinkns,"href",s.down),u.setAttribute("preserveAspectRatio","none"),l.setAttribute("preserveAspectRatio","none"),m.setAttribute("transform","translate("+e+","+n+")"),u.setAttribute("x",0),u.setAttribute("y",0),u.setAttribute("width",t),u.setAttribute("height",a),l.setAttribute("x",0),l.setAttribute("y",0),l.setAttribute("width",t),l.setAttribute("height",a);var c=null;return null!=s.text&&(c=document.createElementNS(svgns,"text"),c.setAttribute("x",t/2),c.setAttribute("y",40),c.setAttribute("font-size",30),c.setAttribute("fill","white"),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",2),c.setAttribute("text-anchor","middle"),c.textContent=s.text),h({item:m,down:function(){0==MemoryGame.disableCardButtons&&(u.setAttribute("style","display:none;"),l.setAttribute("style",""))},up:function(){0==MemoryGame.disableCardButtons&&(l.setAttribute("style","display:none;"),u.setAttribute("style",""),null!=s.sound&&MemoryGame.audio.playSound(s.sound),s.event())}}),o.appendChild(m),m.appendChild(l),m.appendChild(u),c&&m.appendChild(c),m.setText=function(e){c.textContent=e},m}function M(e,n,t,a,o,i){var s={image:""};for(var r in i)s[r]=i[r];var m=document.createElementNS(svgns,"g"),u=document.createElementNS(svgns,"image");return u.setAttributeNS(xlinkns,"href",s.image),u.setAttribute("preserveAspectRatio","none"),m.setAttribute("transform","translate("+e+","+n+")"),u.setAttribute("x",0),u.setAttribute("y",0),u.setAttribute("width",t),u.setAttribute("height",a),o.appendChild(m),m.appendChild(u),m}n.MemGameWrap=e,MemoryGame={SCREEN_SIZE_X:988,SCREEN_SIZE_Y:566,LOADING_SCREEN_IMAGE:"./Images/Screens/Loading.png",LOADING_SCREEN_ANIMATION_IMAGE:"./Images/Icons/Tortuga Animation.png",LOADING_ANIMATION_DETAILS:{frames:5,direction:"x",time:"0.7"},AvailableLevels:{NorthAmerica:0,SouthAmerica:1,Africa:2,Tortuga:3},InitialSettings:{MasterVolume:1,BackgroundMusicVolume:0},time:new Date,dt:0,clearColor:"#000000",currentSceneIndex:0,disableCardButtons:!1,completedLevel:[0,0,0,0]},svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",function(){function e(){function e(){setTimeout(function(){var e=$("#gameView")[0].getClientRects(),n=e[0].width/e[0].height,t=MemoryGame.SCREEN_SIZE_X/MemoryGame.SCREEN_SIZE_Y,a=n>t?e[0].height/MemoryGame.SCREEN_SIZE_Y:e[0].width/MemoryGame.SCREEN_SIZE_X;$("#GameCenter")[0].setAttribute("style","transform: scale("+a+"); -webkit-transform: scale("+a+")")},500)}if(!window.console){var n=window.console={};n.log=n.warn=n.error=function(){}}window.Array&&!window.Array.isArray&&(window.Array.isArray=function(e){return e instanceof Array});var t=r();if(!t)return void(location.href="./svg_not_supported.html");MemoryGame.restoreData(),MemoryGame.support=s(),MemoryGame.audio=o(),S(),document.body.onorientationchange=e,window.onresize=e,e(),MemoryGame.frontCanvas=document.getElementById("GameCanvas"),MemoryGame.frontContext=MemoryGame.frontCanvas.getContext("2d"),MemoryGame.sceneManager=new g,MemoryGame.sceneManager.addScene(A()),MemoryGame.sceneManager.addScene(p()),MemoryGame.sceneManager.addScene(u()),MemoryGame.timer=v(33,function(){var e=new Date;MemoryGame.dt=(e-MemoryGame.time)/1e3,MemoryGame.time=e,MemoryGame.sceneManager.update(),MemoryGame.sceneManager.draw(MemoryGame.frontContext),MemoryGame.support.iOS&&window.scrollTo(0,0)});var a={images:[{name:"loadingbackground",src:MemoryGame.LOADING_SCREEN_IMAGE},{name:"loadinganimation",src:MemoryGame.LOADING_SCREEN_ANIMATION_IMAGE,anim:MemoryGame.LOADING_ANIMATION_DETAILS},{name:"svg_00",src:"./Images/Icons/Play Button_Pressed.png"},{name:"svg_01",src:"./Images/Icons/Play Button.png"},{name:"svg_02",src:"./Images/Icons/Map_Africa Bubble.png"},{name:"svg_03",src:"./Images/Icons/Map_North America Bubble.png"},{name:"svg_04",src:"./Images/Icons/Map_South America Bubble.png"},{name:"svg_05",src:"./Images/Icons/Map_Tortuga Bubble.png"},{name:"svg_06",src:"./Images/Icons/Paw_Pressed.png"},{name:"svg_07",src:"./Images/Icons/Paw.png"},{name:"svg_08",src:"./Images/Icons/Map_Tortua_Lock.png"},{name:"svg_09",src:"./Images/Icons/Map_Tortuga_Unlocked.png"},{name:"svg_10",src:"./Images/Icons/Quit Button_Pressed.png"},{name:"svg_11",src:"./Images/Icons/Quit Button.png"},{name:"svg_12",src:"./Images/Icons/Info_Pressed.png"},{name:"svg_13",src:"./Images/Icons/Info.png"},{name:"svg_14",src:"./Images/Icons/Home_Pressed.png"},{name:"svg_15",src:"./Images/Icons/Home.png"},{name:"svg_16",src:"./Images/Screens/Game Over.png"},{name:"svg_17",src:"./Images/Icons/Play Again Button_Pressed.png"},{name:"svg_18",src:"./Images/Icons/Play Again Button.png"},{name:"svg_19",src:"./Images/Icons/New Habitat Button_Pressed.png"},{name:"svg_20",src:"./Images/Icons/New Habitat Button.png"},{name:"svg_21",src:"./Images/Icons/Tile_Pressed.png"},{name:"svg_22",src:"./Images/Icons/Tile.png"},{name:"svg_23",src:"./Images/Quit Menu/Quit Pop Up.png"},{name:"svg_24",src:"./Images/Quit Menu/Quit_Yes Button_Pressed.png"},{name:"svg_25",src:"./Images/Quit Menu/Quit_Yes Button.png"},{name:"svg_26",src:"./Images/Quit Menu/Quit_No Button_Pressed.png"},{name:"svg_27",src:"./Images/Quit Menu/Quit_No Button.png"},{name:"svg_28",src:"./Images/Screens/Info Pop Up.png"}],sounds:[{name:"click",path:"click",type:"effect"}]};MemoryGame.PreLoadFromList(a.images,a.sounds,function(){MemoryGame.sceneManager.changeScene("startScene"),m(),MemoryGame.timer.start()})}window.onload=e,MemoryGame.saveData=function(){jaaulde.utils.cookies.set("WK_MEM_GAME",encodeURI(MemoryGame.completedLevel.join(",")))},MemoryGame.restoreData=function(){var e=jaaulde.utils.cookies.get("WK_MEM_GAME");null!=e&&(MemoryGame.completedLevel=decodeURI(e).split(","))},MemoryGame.PreLoadFromList=function(e,n,a,o){function i(){m++,r()}function s(){u++,r()}function r(){if(void 0!=o&&null!=o){var t=(m+u)/(e.length+n.length);o(t)}m==e.length&&u==n.length&&a()}var m=0,u=0;if(e.length+n.length==0)return void a();for(var l=document.getElementById("GameImages"),c=0;c<e.length;c++){var d="image_"+e[c].name;if(null!=document.getElementById(d))i();else{var g=new Image;g.onload=function(){void 0!=this.anim&&t(this,this.anim),i()},g.src=e[c].src,l.appendChild(g),g.setAttribute("id",d),g.anim=e[c].anim}}for(var p=0;p<n.length;p++)MemoryGame.audio.loadSound(n[p].name,n[p].path,n[p].type,1,s,n[p].group)},MemoryGame.MathFunctions={clamp:function(e,n,t){return Math.min(Math.max(e,n),t)}},MemoryGame.requestJson=function(e,n,t){var a=new XMLHttpRequest,o=n||!1;return a.open("GET",e+"?timer="+(new Date).getMilliseconds(),o),o&&(a.onload=function(){if(200===a.status){var e=JSON.parse(a.responseText);t(e)}},a.onerror=function(){console.error(a.statusText)}),a.send(),o?void 0:200==a.status?JSON.parse(a.responseText):null}}();var b=[],G=[37,38,39,40],w=["./Images/Backgrounds/Africa 1.png","./Images/Backgrounds/Africa 2.png","./Images/Backgrounds/Africa 3.png"],E=["./Images/Backgrounds/North America 1.png","./Images/Backgrounds/North America 2.png","./Images/Backgrounds/North America 3.png"],C=["./Images/Backgrounds/South America 1.png","./Images/Backgrounds/South America 2.png","./Images/Backgrounds/South America 3.png"],x=["./Images/Backgrounds/Tortuga 1.png","./Images/Backgrounds/Tortuga 2.png","./Images/Backgrounds/Tortuga 3.png"],N=["./Images/Animals and Suits/Africa/Caracal.png","./Images/Animals and Suits/Africa/Caracal.png","./Images/Animals and Suits/Africa/Cheetah.png","./Images/Animals and Suits/Africa/Cheetah.png","./Images/Animals and Suits/Africa/Crocodile.png","./Images/Animals and Suits/Africa/Crocodile.png","./Images/Animals and Suits/Africa/Elephant.png","./Images/Animals and Suits/Africa/Elephant.png","./Images/Animals and Suits/Africa/Hippo.png","./Images/Animals and Suits/Africa/Hippo.png","./Images/Animals and Suits/Africa/Honey Badger.png","./Images/Animals and Suits/Africa/Honey Badger.png","./Images/Animals and Suits/Africa/Hyena.png","./Images/Animals and Suits/Africa/Hyena.png","./Images/Animals and Suits/Africa/Lion.png","./Images/Animals and Suits/Africa/Lion.png","./Images/Animals and Suits/Africa/Rhino.png","./Images/Animals and Suits/Africa/Rhino.png","./Images/Animals and Suits/Africa/Zebra.png","./Images/Animals and Suits/Africa/Zebra.png"],k=["./Images/Animals and Suits/North America/Bat.png","./Images/Animals and Suits/North America/Bat.png","./Images/Animals and Suits/North America/Bear.png","./Images/Animals and Suits/North America/Bear.png","./Images/Animals and Suits/North America/Bee.png","./Images/Animals and Suits/North America/Bee.png","./Images/Animals and Suits/North America/Bison.png","./Images/Animals and Suits/North America/Bison.png","./Images/Animals and Suits/North America/Bobcat.png","./Images/Animals and Suits/North America/Bobcat.png","./Images/Animals and Suits/North America/Goshawk.png","./Images/Animals and Suits/North America/Goshawk.png","./Images/Animals and Suits/North America/Raccoon.png","./Images/Animals and Suits/North America/Raccoon.png","./Images/Animals and Suits/North America/Turkey.png","./Images/Animals and Suits/North America/Turkey.png","./Images/Animals and Suits/North America/Wolf.png","./Images/Animals and Suits/North America/Wolf.png","./Images/Animals and Suits/North America/Woodpecker.png","./Images/Animals and Suits/North America/Woodpecker.png"],P=["./Images/Animals and Suits/South America/Basilisk.png","./Images/Animals and Suits/South America/Basilisk.png","./Images/Animals and Suits/South America/EyelashViper.png","./Images/Animals and Suits/South America/EyelashViper.png","./Images/Animals and Suits/South America/Falcon.png","./Images/Animals and Suits/South America/Falcon.png","./Images/Animals and Suits/South America/HarpyEagle.png","./Images/Animals and Suits/South America/HarpyEagle.png","./Images/Animals and Suits/South America/Hummingbird.png","./Images/Animals and Suits/South America/Hummingbird.png","./Images/Animals and Suits/South America/Jaguar.png","./Images/Animals and Suits/South America/Jaguar.png","./Images/Animals and Suits/South America/Kinkajou.png","./Images/Animals and Suits/South America/Kinkajou.png","./Images/Animals and Suits/South America/Sloth.png","./Images/Animals and Suits/South America/Sloth.png","./Images/Animals and Suits/South America/Spider.png","./Images/Animals and Suits/South America/Spider.png","./Images/Animals and Suits/South America/SpiderMonkey.png","./Images/Animals and Suits/South America/SpiderMonkey.png"],B=["./Images/Animals and Suits/North America/Bison.png","./Images/Animals and Suits/Tortuga/CPS_Bison_Martin.png","./Images/Animals and Suits/Africa/Cheetah.png","./Images/Animals and Suits/Tortuga/CPS_Cheetah_Martin.png","./Images/Animals and Suits/South America/EyelashViper.png","./Images/Animals and Suits/Tortuga/CPS_EyelashViper_Chris.png","./Images/Animals and Suits/Africa/Hippo.png","./Images/Animals and Suits/Tortuga/CPS_Hippo_Martin.png","./Images/Animals and Suits/South America/Hummingbird.png","./Images/Animals and Suits/Tortuga/CPS_Hummingbird_Martin.png","./Images/Animals and Suits/North America/Raccoon.png","./Images/Animals and Suits/Tortuga/CPS_Raccoon_Chris.png","./Images/Animals and Suits/Africa/Rhino.png","./Images/Animals and Suits/Tortuga/CPS_Rhino_Chris.png","./Images/Animals and Suits/South America/Sloth.png","./Images/Animals and Suits/Tortuga/CPS_Sloth_Chris.png","./Images/Animals and Suits/South America/Spider.png","./Images/Animals and Suits/Tortuga/CPS_Spider_Chris.png","./Images/Animals and Suits/North America/Turkey.png","./Images/Animals and Suits/Tortuga/CPS_Turkey_Martin.png"],T="CPS",O="./Images/Icons/Tile.png",L="./Images/Icons/Tile_Pressed.png",R=.5,D=.2,V=[920,495,68,71,"./Images/Icons/Home.png","./Images/Icons/Home_Pressed.png"],H=[872,5,100,100,"./Images/Icons/Info.png","./Images/Icons/Info_Pressed.png"],Z=[0,0,988,566,"./Images/Screens/Game Over.png"],Q=[220,435,218,115,"./Images/Icons/Play Again Button.png","./Images/Icons/Play Again Button_Pressed.png"],Y=[520,435,218,115,"./Images/Icons/New Habitat Button.png","./Images/Icons/New Habitat Button_Pressed.png"],X=[99,33,800,500,"./Images/Quit Menu/Quit Pop Up.png"],W=[350,255,108,105,"./Images/Quit Menu/Quit_Yes Button.png","./Images/Quit Menu/Quit_Yes Button_Pressed.png"],F=[560,255,108,105,"./Images/Quit Menu/Quit_No Button.png","./Images/Quit Menu/Quit_No Button_Pressed.png"],U=161,J=162,j=30,K=-5,q=170,z=140,en=0,nn=0,tn=161,an=162,on=.25,sn=1,rn=3,mn=5,un=4,ln="./Images/Icons/Tile_Animation.png",cn=7,dn=.4,gn={image1:null,image2:null,button1:null,button2:null},pn=new Array(mn*un),yn=null,In=0,fn="",An=!1,vn=[0,0],Sn=0,hn=[null,null,null],_n=[null,null,null],Mn=!1,bn=!1,Gn=[265,60,450,40],wn=1,En="./Images/Screens/Map.png",Cn="./Images/Icons/Map_Tortua_Lock.png",xn=[0,0,96,86,"./Images/Icons/Paw.png","./Images/Icons/Paw_Pressed.png"],Nn=[695,165,249,162,"./Images/Icons/Map_Tortuga_Unlocked.png","./Images/Icons/Map_Tortuga_Unlocked.png"],kn=[825,428,150,145,"./Images/Icons/Quit Button.png","./Images/Icons/Quit Button_Pressed.png"],Pn=[872,5,100,100,"./Images/Icons/Info.png","./Images/Icons/Info_Pressed.png"],Bn=[50,320,208,210,"./Images/Icons/Map_Africa Bubble.png"],Tn=[50,320,208,210,"./Images/Icons/Map_North America Bubble.png"],On=[50,320,208,210,"./Images/Icons/Map_South America Bubble.png"],Ln=[50,320,208,210,"./Images/Icons/Map_Tortuga Bubble.png"],Rn=[420,450,154,120,"./Images/Icons/Play Button.png","./Images/Icons/Play Button_Pressed.png"],Dn=163,Vn=159,Hn=254,Zn=292,Qn=404,$n=229,Yn="m38,52 8,3 9,-13 -7,19z",Xn="green",Wn=null,Fn=null,Un=null,Jn=null,jn=null,Kn=null,qn=null,zn=[665,359,147,87,"./Images/Icons/Play Button.png","./Images/Icons/Play Button_Pressed.png"],et="./Images/Screens/Main Screen.png"
}({},function(){return this}());