var DEFAULT_STATS={Run:0,Snow:-.2,Swim:-.2,Mud:-.1,Offroad:-.4},AnimalPowers={movement:{cheetah:{displayName:"Cheetah",images:{animation:"cheetah_run512x256.png",icon:"slot_icon_cheetah.png",animationDetails:{direction:"y",frames:10},racer:"cheetah.png"},stats:{Weight:{value:.2,display:!0},Run:{value:.5,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:.1,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:5,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"Cheetah2",height:0,onSetActive:function(){},onComplete:function(){},onCollision:function(){}}},hare:{displayName:"Snowshoe Hare",images:{animation:"snowshoehare_run512x256.png",icon:"slot_icon_snowhare.png",animationDetails:{direction:"y",frames:8},racer:"hare.png"},stats:{Weight:{value:.1,display:!0},Run:{value:.1,display:!1},Snow:{value:.1,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.1,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:.4,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:-2,onSetActive:function(){},onComplete:function(){},onCollision:function(){"use strict";playerCamera.Jump()}}},otter:{displayName:"Otter",images:{animation:"otter_swim512x188.png",icon:"slot_icon_otter.png",animationDetails:{direction:"y",frames:10},racer:"otter.png"},stats:{Weight:{value:.2,display:!0},Run:{value:0,display:!1},Snow:{value:-.1,display:!1},Swim:{value:.1,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:2,display:!0},Duration:{value:10,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"otter",height:-2,onSetActive:function(){},onComplete:function(){},onCollision:function(){}}},hummingbird:{displayName:"Hummingbird",images:{animation:"hummingbird_fly512x256.png",icon:"slot_icon_hummingbird.png",animationDetails:{direction:"y",frames:6},racer:"hummingbird.png"},stats:{Weight:{value:.1,display:!0},Run:{value:-.1,display:!1},Snow:{value:-.1,display:!1},Swim:{value:-.1,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:.3,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{height:15,activateSound:"hummingbird",onSetActive:function(){},onComplete:function(){},onCollision:function(){}}},falcon:{displayName:"Falcon",images:{animation:"falcon_glide512x256.png",icon:"slot_icon_falcon.png",animationDetails:{direction:"y",frames:6},racer:"falcon.png"},stats:{Weight:{value:.2,display:!0},Run:{value:0,display:!1},Snow:{value:0,display:!1},Swim:{value:0,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:.5,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:4,display:!0},Duration:{value:10,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{activateSound:"falcon2",height:40,onSetActive:function(){},onComplete:function(){},onCollision:function(){}}},antelope:{displayName:"Pronghorn Antelope",images:{animation:"pronghorn_run512x256.png",icon:"slot_icon_pronghorn.png",animationDetails:{direction:"y",frames:7},racer:"pronghorn.png"},stats:{Weight:{value:.3,display:!0},Run:{value:.4,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:4,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:3,onSetActive:function(){},onComplete:function(){},onCollision:function(){}}},roadrunner:{displayName:"Roadrunner",images:{animation:"roadrunner_run512x200.png",icon:"slot_icon_roadrunner.png",animationDetails:{direction:"y",frames:8},racer:"roadrunner.png"},stats:{Weight:{value:.2,display:!0},Run:{value:.3,display:!1},Snow:{value:-.3,display:!1},Swim:{value:-.3,display:!1},Mud:{value:0,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:15,display:!0},Special:{value:0,display:!1},Classification:"bird"},effect:{height:-2,onSetActive:function(){},onComplete:function(){},onCollision:function(){"use strict";playerCamera.Jump()}}},dolphin:{displayName:"Dolphin",images:{animation:"dolphin_swim512x235.png",icon:"slot_icon_dolphin.png",animationDetails:{direction:"y",frames:6},racer:"dolphin.png"},stats:{Weight:{value:.3,display:!0},Run:{value:-.5,display:!1},Snow:{value:-.4,display:!1},Swim:{value:.3,display:!1},Mud:{value:-.4,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:0,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"dolphin",height:-4,onSetActive:function(){},onComplete:function(){},onCollision:function(){}}}},special:{skunk:{displayName:"Skunk",images:{animation:"skunk_spray512x195.png",icon:"slot_icon_skunk.png",animationDetails:{direction:"y",frames:12},racer:"skunk.png"},stats:{Weight:{value:.1,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.3,display:!1},Cost:{value:2,display:!0},Duration:{value:0,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{activateSound:"skunk",height:-1,onSetActive:function(){"use strict";racingZach.onSkunkAttack()},onComplete:function(){},onCollision:function(){}}},tortoise:{displayName:"Tortoise",images:{animation:"tortoise_walk512x256.png",icon:"slot_icon_tortoise.png",animationDetails:{direction:"y",frames:10},racer:"tortoise.png"},stats:{Weight:{value:.3,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.5,display:!1},Cost:{value:4,display:!0},Duration:{value:30,display:!0},Special:{value:0,display:!1},Classification:"reptile"},effect:{height:0,onSetActive:function(){},onComplete:function(){},onCollision:function(e){"use strict";"zachbot"===e&&CreatureGame.playEffect("botsplode")}}},bison:{displayName:"Bison",images:{animation:"bison_toss_512x256.png",icon:"slot_icon_bison.png",animationDetails:{direction:"y",frames:7},racer:"bison.png"},stats:{Weight:{value:.4,display:!0},Run:{value:0,display:!1},Snow:{value:-.2,display:!1},Swim:{value:-.2,display:!1},Mud:{value:-.2,display:!1},Offroad:{value:-.4,display:!1},Fly:{value:0,display:!1},Jump:{value:0,display:!1},Defense:{value:.4,display:!1},Cost:{value:3,display:!0},Duration:{value:20,display:!0},Special:{value:0,display:!1},Classification:"mammal"},effect:{height:6,activateSound:"bison",onSetActive:function(){},onComplete:function(){},onCollision:function(e){"use strict";switch(e){case"rock":CreatureGame.playEffect("rocksplode");break;case"log":CreatureGame.playEffect("logsplode");break;case"zachbot":CreatureGame.playEffect("botsplode")}}}}}};function setupAnimation(e,a){"use strict";var t,r,n,i,o,s={frames:1,time:.6,direction:"x",startPaused:!1,playOnce:!1,onComplete:null,reverse:!1,preventEffectReplace:!1},l=0,u=[],c=(new Date).getTime()/1e3;for(t in a)a.hasOwnProperty(t)&&(s[t]=a[t]);for(r=s.time/s.frames,n=s.startPaused,i="x"===s.direction?e.naturalWidth/s.frames:e.naturalHeight/s.frames,e.setAttribute("data-animated","true"),o=0;o<s.frames;o+=1)u[o]={sx:"x"===s.direction?i*o:0,sy:"x"===s.direction?0:i*o,sw:"x"===s.direction?i:e.naturalWidth,sh:"x"===s.direction?e.naturalHeight:i};e.animDetails={preventEffectReplace:s.preventEffectReplace,pause:function(e){n=e,c=(new Date).getTime()/1e3},reset:function(){l=0},setFrame:function(e){l=e},reverse:function(e){s.reverse=e},update:function(){var a=(new Date).getTime()/1e3;if(n)c=a;else for(;a-c>r;)if(c+=r,(l+=1)>=s.frames){if(null!==s.onComplete&&(s.onComplete(e),c=a),s.playOnce)return void(n=!0);l=0}},draw:function(a,t,r,n,i,o){var c,m=s.reverse?s.frames-l-1:l,p=n,g=i,d=0,h=0;(o||!1)&&(c=u[m].sw/u[m].sh>n/i?n/u[m].sw:i/u[m].sh,d=(p=u[m].sw*c)<n?(n-p)/2:0,h=(g=u[m].sh*c)<i?(i-g)/2:0),a.drawImage(e,u[m].sx,u[m].sy,u[m].sw,u[m].sh,t+d,r+h,p,g)}}}function drawFitImage(e,a,t,r,n,i,o,s,l,u){"use strict";var c=n/i>l/u?l/n:u/i,m=n*c,p=i*c,g=m<l?(l-m)/2:0,d=p<u?(u-p)/2:0;e.drawImage(a,t,r,n,i,o+g,s+d,m,p)}function AlternateAudio(){"use strict";var e=document.getElementById("GameSounds"),a={},t={},r=1,n=!1,i={init:function(){},loadSound:function(t,r,n,i,o){var s="./assets/sound/vo/"+r+".ogg",l="./assets/sound/vo/"+r+".mp3",u=document.createElement("audio"),c=document.createElement("source"),m=document.createElement("source");m.setAttribute("type","audio/mpeg"),c.setAttribute("type","audio/ogg"),m.src=l,c.src=s,u.appendChild(m),u.appendChild(c),e.appendChild(u),u.setAttribute("preload","metadata"),u.load(),a[t]={elem:u,volume:i,looping:!1,type:n},null!=o&&o()},playSound:function(e,t,n){if(void 0!==a[e]&&null!==a[e])if(!CreatureGame.support.android||CreatureGame.support.chrome||"dialog"===a[e].type){a[e].callback=n,a[e].isPlaying=!0;var i=function(){void 0!==a[e].callback&&null!==a[e].callback&&a[e].callback(),a[e].isPlaying=!1};a[e].looping=a[e].elem.loop=t||!1,a[e].elem.volume=CreatureGame.MathFunctions.clamp(a[e].volume*r,0,1),void 0!==a[e].elem.onended?a[e].elem.onended=i:($(a[e].elem).unbind("ended"),a[e].elem.addEventListener("ended",i)),a[e].elem.play()}else null!=n&&n()},stopSound:function(e){if(void 0!==a[e]&&null!==a[e])try{a[e].elem.pause(),a[e].elem.currentTime=0}catch(e){}},stopAllNonLoopSounds:function(){var e;for(e in a)a.hasOwnProperty(e)&&(a[e].looping||CreatureGame.audio.stopSound(e))},stopAllSounds:function(){var e;for(e in a)a.hasOwnProperty(e)&&CreatureGame.audio.stopSound(e)},setSoundVolume:function(e,t){void 0!==a[e]&&null!==a[e]&&(a[e].volume=t,a[e].elem.volume=CreatureGame.MathFunctions.clamp(a[e].volume*r,0,1))},setMasterVolume:function(e){var t;for(t in r=e,a)a.hasOwnProperty(t)&&(a[t].elem.volume=CreatureGame.MathFunctions.clamp(a[t].volume*(n?0:r),0,1))},setSoundSpeed:function(e,a){},mute:function(){var e;for(e in n=!0,a)a.hasOwnProperty(e)&&(a[e].elem.volume=0)},unmute:function(){var e;for(e in n=!1,a)a.hasOwnProperty(e)&&(a[e].elem.volume=CreatureGame.MathFunctions.clamp(a[e].volume*r,0,1))},pause:function(){var e;for(e in a)a.hasOwnProperty(e)&&a[e].isPlaying&&(this.stopSound(e),"music"!==a[e].type&&"effect"!==a[e].type||(t[e]=a[e]))},resume:function(){var e;for(e in t)t.hasOwnProperty(e)&&this.playSound(e,a[e].looping,a[e].callback);t=[]}};return i.init(),i}function initAudio(){"use strict";if(!CreatureGame.support.webAudio)return new AlternateAudio;window.AudioContext=window.AudioContext||window.webkitAudioContext;var e,a=null,t={},r={},n={},i=1,o=!1;function s(){}return(e={init:function(){(a=new AudioContext).createGain=a.createGain||a.createGainNode,a.createDelay=a.createDelay||a.createDelayNode,a.createScriptProcessor=a.createScriptProcessor||a.createJavaScriptNode,a.setTargetAtTime=a.setTargetAtTime||a.setTargetValueAtTime,n.gain=a.createGain(),n.gain.connect(a.destination)},loadSound:function(e,r,i,o,l){var u,c="./assets/sound/";if(CreatureGame.support.ogg?c+="vo/"+r+".ogg":c+="vo/"+r+".mp3",void 0===t[e])if(t[e]={ready:!0,buffer:null,volume:a.createGain(),type:i},void 0===t[e]){null!=o&&(t[e].volume.gain.value=o);var m=createjs.RequestUtils.isCrossDomain(c),p={};window.XMLHttpRequest&&(u=new XMLHttpRequest,m&&void 0===u.withCredentials&&window.XDomainRequest&&(u=new XDomainRequest)),m&&null instanceof XMLHttpRequest&&1==this._xhrLevel&&(p.Origin="Access-Control-Allow-Origin: *"),m||p["X-Requested-With"]||(p["X-Requested-With"]="XMLHttpRequest"),null===c.mimeType&&createjs.RequestUtils.isText(c.type)&&(c.mimeType="text/plain; charset=utf-8"),m?u.open(createjs.AbstractLoader.GET,c,!0):(u.open("GET",c,!0),u.responseType="arraybuffer",u.onload=function(){200===u.status&&a.decodeAudioData(u.response,(function(a){t[e].buffer=a,t[e].ready=!0,t[e].looping=!1,t[e].volume.connect(n.gain),null!=l&&l()}),s)}),u.send()}else l();else l()},playSound:function(e,r,n){if(void 0!==t[e]&&null!==t[e]&&t[e].ready){t[e].callback=n,t[e].isPlaying=!0;var i=function(){void 0!==t[e].callback&&t[e].callback(),t[e].isPlaying=!1};t[e].source=a.createBufferSource(),t[e].source.start=t[e].source.start||t[e].source.noteOn,t[e].source.stop=t[e].source.stop||t[e].source.noteOff,t[e].source.loop=r||!1,t[e].looping=t[e].source.loop,t[e].source.buffer=t[e].buffer,t[e].source.connect(t[e].volume),void 0!==t[e].source.onended?t[e].source.onended=i:t[e].timeout=setTimeout(i,1e3*t[e].buffer.duration),t[e].source.start(0)}},playAudio:function(e,a){if(void 0!==t[e]&&null!==t[e]&&t[e].ready){t[e].callback=a,t[e].isPlaying=!0;app.voPlayer.stop(),app.voPlayer.play(e,(function(){void 0!==t[e].callback&&t[e].callback(),t[e].isPlaying=!1,tutorialManager.ready=!0}))}},playDialog:function(e,a){if(void 0!==t[e]&&null!==t[e]&&t[e].ready){t[e].callback=a,t[e].isPlaying=!0;app.sound.play(e,(function(){void 0!==t[e].callback&&t[e].callback(),t[e].isPlaying=!1,tutorialManager.ready=!0}))}},stopSound:function(e){if(void 0!==t[e]&&null!==t[e]&&t[e].ready&&void 0!==t[e].source&&null!==t[e].source)try{t[e].source.stop(0),void 0!==t[e].timeout&&null!==t[e].timeout&&clearTimeout(t[e].timeout)}catch(e){}},stopAllNonLoopSounds:function(){var e;for(e in t)t.hasOwnProperty(e)&&(t[e].looping||CreatureGame.audio.stopSound(e))},stopAllSounds:function(){var e;for(e in app.sound.stopAll(),app.voPlayer.stop(),t)t.hasOwnProperty(e)&&CreatureGame.audio.stopSound(e)},setSoundVolume:function(e,a){void 0!==t[e]&&null!==t[e]&&(t[e].volume.gain.value=a)},setMasterVolume:function(e){i=e,n.gain.gain.value=o?0:e},setSoundSpeed:function(e,a){a!==t[e].source.playbackRate.value&&(t[e].source.playbackRate.value=a)},mute:function(){o=!0,n.gain.gain.value=0},unmute:function(){o=!1,n.gain.gain.value=i},pause:function(){var e;for(e in t)t.hasOwnProperty(e)&&t[e].isPlaying&&(this.stopSound(e),"music"!==t[e].type&&"effect"!==t[e].type||(r[e]=t[e]))},resume:function(){var e;for(e in r)r.hasOwnProperty(e)&&this.playSound(e,t[e].looping,t[e].callback);r=[]}}).init(),e}var CookieJar={write:function(e,a){"use strict";document.cookie=e+"="+a},read:function(e){"use strict";try{return document.cookie.match(new RegExp(e+"=([^;]+)"))[1]}catch(e){return null}},remove:function(e){"use strict";document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}};function detectPlatform(){"use strict";var e,a,t=navigator.userAgent.toLowerCase(),r={performanceMode:"normal",canvas:!1,touch:!!window.hasOwnProperty("ontouchstart"),iPod:t.search("ipod")>-1,iPhone:t.search("iphone")>-1,iPad:t.search("ipad")>-1,safari:t.search("safari")>-1,ie:t.search("msie")>-1,firefox:t.search("firefox")>-1,android:t.search("android")>-1,chrome:t.search("chrome")>-1,silk:t.search("silk")>-1,iOS:!1,mobile:!1,desktop:!1,multitouch:!1,ogg:!0,m4a:!0,mp3:!0,webAudio:!1};r.iOS=r.iPod||r.iPhone||r.iPad,r.mobile=r.iOS||r.android||r.silk,r.desktop=!r.mobile,(r.iOS||r.mobile)&&(r.performanceMode="low"),r.touch&&(r.android?parseInt(t.slice(t.indexOf("android")+8),10)>2&&(r.multitouch=!0):r.multitouch=!0),!(e=document.createElement("audio")).canPlayType||e.canPlayType&&""!==e.canPlayType('audio/ogg; codecs="vorbis"')||(r.ogg=!1,!r.ie&&e.canPlayType&&""!==e.canPlayType("audio/mp4")||(r.m4a=!1));try{(void 0!==window.AudioContext?new AudioContext:new window.webkitAudioContext).createBufferSource(),r.webAudio=!0}catch(e){}a=document.createElement("canvas");try{r.canvas=!!a.getContext("2d")}catch(e){r.canvas=!!a.getContext}return r}function supportsSvg(){"use strict";return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function getPerformanceValues(e){"use strict";return"low"===e?{svgClass:"performanceMode",floorClass:"perspective",drawDistance:300,drawMaxAngle:.85,drawGradient:!1,drawAllProps:!1,maxRenderProps:70,horizon:262,frameTime:50}:"high"===e?{svgClass:"superMode",floorClass:"perspective",drawDistance:800,drawMaxAngle:1.4,drawGradient:!0,drawAllProps:!0,maxRenderProps:999,horizon:250,frameTime:26}:{svgClass:"",floorClass:"perspective",drawDistance:800,drawMaxAngle:1,drawGradient:!0,drawAllProps:!1,maxRenderProps:500,horizon:250,frameTime:33}}var CreatureGame={MAIN_ELEMENT:"gameView",GUID_GAME:"198080c8-4fab-4b22-9770-9019a75e4c4f",GUID_BEAT_ZACK_FIRST_TIME:"f68fd647-3a17-40f6-acdd-2f6a824010e6",GUID_BEAT_ZACK_EVERY_LEVEL:"10f1d871-36d4-4e98-999c-e617cf462c53",GUID_USED_ALL_CREATURE_PARTS_FIRST_TIME:"bac3c6e5-54aa-442b-a4cc-08d312f71cc4",GUID_BEAT_ZACK:"9998f5c5-6782-4f48-ae0a-ca58638ca830",GUID_DODGE_ALL_ZACK_BOTS:"2ad1ca67-ba33-4a92-bfb0-6aaf859c1629",GUID_REMAINING_ENERGY:"677f3050-98ca-43dd-9a22-20892c202dad",GUID_WIN_WITH_ONLY_MAMMAL_PARTS:"39723a0d-6509-40ca-9d77-71d0d64a817c",GUID_REACH_HALF_WAY_MARK:"3bf7d865-ae4a-40e8-8545-36d60fae2de6",InitialSettings:{MasterVolume:1,BackgroundMusicVolume:.4,disableLocalAudio:!1},FrameSize:{x:988,y:556},pauseElement:{},isPaused:!1,CurrentLevel:"testlevel",time:new Date,dt:0,clearColor:"#000000",averageFps:0,levelInfo:null,temp_path:null,currlevel:null},svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",calltime=1,loopTime=1;function elemToFront(e){"use strict";e.parentNode.appendChild(e)}function debugInit(){"use strict";CreatureGame.support.mobile&&$("#debugBox").remove(),CreatureGame.debugWatch=[{name:"Race Leader",value:"CreatureGame.raceStatus.leader"},{name:"ZachProgress",value:"racingZach.getProgress();"},{name:"Racer Weight",value:"CreatureGame.RacerWeight"},{name:"DT",value:"CreatureGame.dt"},{name:"difference",value:"debugDifficultyValue"},{name:"Prop Count",value:"debugDrawCount"},{name:"UpdateCount",value:'debugUpdateCount + "/" + CreatureGame.levelInfo.PropLocations.length'}]}function debugUpdate(){}CreatureGame.event=function(e){"use strict";void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame&&CreatureGame.minigame.event(e)},CreatureGame.hasPowerUp=function(e){"use strict";return void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame&&CreatureGame.minigame.hasPowerUp(e)},CreatureGame.usePowerUp=function(e,a,t){"use strict";if(void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame){var r={};r[e]=1,CreatureGame.minigame.usePowerUps(r,a,t)}},CreatureGame.levelComplete=function(){"use strict";void 0!==CreatureGame.minigame&&null!==CreatureGame.minigame&&CreatureGame.minigame.levelComplete()};var currentView,prevMode=null;function orientationChange(){return 180===window.orientation||0===window.orientation?"portrait":"landscape"}function resizeContent(){currentView===prevMode&&null!==prevMode||(CreatureGame.support.iPhone?$("#gamepage").css("width","91%").css("height","91%"):$("#gamepage").css("width","95%").css("height","95%"))}var oreintation=null,stageWidth=null,autoresize=!1;function gameResize(){currentView=orientationChange(),setTimeout((function(){var e=$("#"+CreatureGame.MAIN_ELEMENT)[0].getClientRects(),a=e[0].width/e[0].height>CreatureGame.FrameSize.x/CreatureGame.FrameSize.y?e[0].height/CreatureGame.FrameSize.y:e[0].width/CreatureGame.FrameSize.x;$("#GameCenter")[0].setAttribute("style","transform: scale("+a+"); -webkit-transform: scale("+a+")"),stageWidth=window.innerWidth,currentView===prevMode&&null!==prevMode||(!CreatureGame.support.iOS||180!==window.orientation&&0!==window.orientation||null===oreintation?$("#gamepage").css("width","100%").css("height","100%"):(oreintation=window.orientation,CreatureGame.support.iPhone?$("#gamepage").css("width","91%").css("height","91%"):$("#gamepage").css("width","95%").css("height","95%"))),null===oreintation&&(oreintation=window.orientation),prevMode=currentView}),500)}function GameInit(){var e;if(supportsSvg()){window.console,window.Array&&!window.Array.isArray&&(window.Array.isArray=function(e){return e instanceof Array});try{CreatureGame.minigame=new PBS.KIDS.KartKingdom.minigame(CreatureGame.GUID_GAME,CreatureGame.MAIN_ELEMENT,CreatureGame.pause,CreatureGame.resume)}catch(e){CreatureGame.minigame=null}CreatureGame.support=detectPlatform(),CreatureGame.performance=getPerformanceValues(CreatureGame.support.performanceMode),CreatureGame.audio=initAudio(),CreatureGame.help=initHelp(),CreatureGame.powerUpScreen=initPowerUpScreen(),CreatureGame.currentPowerUp=new PowerUp(PowerUpInfo.PowerUpTypes.None),touchInit(),debugInit(),$("#svgCanvas")[0].setAttribute("class",CreatureGame.performance.svgClass),$("#FloorCanvas")[0].setAttribute("class",CreatureGame.performance.floorClass),document.body.onorientationchange=a,window.onresize=a,a(),setTimeout((function(){a()}),500),CreatureGame.pauseElement=document.createElementNS(svgns,"rect"),CreatureGame.pauseElement.setAttribute("x","0"),CreatureGame.pauseElement.setAttribute("y","0"),CreatureGame.pauseElement.setAttribute("width",CreatureGame.FrameSize.x.toString()),CreatureGame.pauseElement.setAttribute("height",CreatureGame.FrameSize.y.toString()),CreatureGame.pauseElement.setAttribute("fill","rgba(0,0,0,0)"),CreatureGame.pauseElement.setAttribute("style","display:none"),CreatureGame.frontCanvas=document.getElementById("GameCanvas"),CreatureGame.frontContext=CreatureGame.frontCanvas.getContext("2d"),CreatureGame.floorCanvas=document.getElementById("FloorCanvas"),CreatureGame.floorContext=CreatureGame.floorCanvas.getContext("2d"),CreatureGame.sceneManager=new SceneManager,CreatureGame.sceneManager.addScene(createRacingScene()),CreatureGame.sceneManager.addScene(createLabScene()),CreatureGame.sceneManager.addScene(createSplashScene()),CreatureGame.timer=createGameTimer(CreatureGame.performance.frameTime,(function(){var e=new Date,a=e-CreatureGame.time;CreatureGame.dt=a/1e3,CreatureGame.time=e,app.gamePaused?CreatureGame.isPaused=!0:CreatureGame.isPaused=!1,CreatureGame.isPaused?CreatureGame.audio.pause():(CreatureGame.audio.resume(),CreatureGame.sceneManager.update(),CreatureGame.sceneManager.draw(CreatureGame.frontContext)),debugUpdate(),CreatureGame.support.iOS&&window.scrollTo(0,0)})),e={images:[{name:"help_close",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_press",src:"./assets/images/LabAssets/help_close_press.png"},{name:"help",src:"./assets/images/LabAssets/help.png"},{name:"loadingBackground",src:"./assets/images/AvivaLoading2.png"},{name:"loadingAvivaAnim",src:"./assets/images/Animations/Aviva_loading_285x500.png",anim:{frames:4,direction:"x",time:.4,startPaused:!0}},{name:"staticAnim",src:"./assets/images/Animations/channel_change248x144.png",anim:{frames:2,direction:"y",time:.2,startPaused:!0}},{name:"loading_racer_cheetah",src:"./assets/images/Racers/cheetah.png"},{name:"loading_racer_falcon",src:"./assets/images/Racers/falcon.png"},{name:"loading_racer_pronghorn",src:"./assets/images/Racers/pronghorn.png"},{name:"loading_racer_skunk",src:"./assets/images/Racers/skunk.png"},{name:"loading_racer_tortoise",src:"./assets/images/Racers/tortoise.png"}],sounds:[{name:"click",path:"click",type:"effect"}]},CreatureGame.PreLoadFromList(e.images,e.sounds,(function(){app.sound.preload("click",CreatureGame.sceneManager.changeScene("splashScene")),setupKeys(),CreatureGame.timer.start(),app.start=!0}))}else location.href="./svg_not_supported.html";function a(){setTimeout((function(){var e=$("#"+CreatureGame.MAIN_ELEMENT)[0].getClientRects(),a=e[0].width/e[0].height>CreatureGame.FrameSize.x/CreatureGame.FrameSize.y?e[0].height/CreatureGame.FrameSize.y:e[0].width/CreatureGame.FrameSize.x;$("#GameCenter")[0].setAttribute("style","transform: scale("+a+"); -webkit-transform: scale("+a+")")}),500)}}function gameUpdate(){setTimeout((function(){CreatureGame.sceneManager.update(),++loopTime<calltime&&gameUpdate()}),1e3)}function onVisibilityChange(){if(void 0!==CreatureGame.audio||null!==CreatureGame.audio)document.visibilityState}function preparePauseMenu(e){"use strict";createButton(20,450,171,100,e,{text:"",sound:"click",up:"./assets/images/Menu UI/quit_off.png",down:"./assets/images/Menu UI/quit_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close(),app.sound.stopAll(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,(function(){CreatureGame.sceneManager.changeScene("labScene")}))}}),createButton(220,450,171,100,e,{text:"",sound:"click",up:"./assets/images/Menu UI/restart_off.png",down:"./assets/images/Menu UI/restart_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close(),CreatureGame.sceneManager.reset()}}),createButton(420,450,171,100,e,{text:"",sound:"click",up:"./assets/images/Menu UI/resume_off.png",down:"./assets/images/Menu UI/resume_on.png",event:function(){app.sound.play("click"),CreatureGame.help.close()}})}function initHelp(){"use strict";var e=!1,a=0,t=[],r={screen:$("#lab_help_screen_svg")[0],helpToggle:$("#help_toggle_button")[0],openButton:$("#help_button_open")[0],closeButton:$("#help_button_close")[0],contentId:"#lab_help"},n=$("#helpPageButtons")[0];return r.currentButtonGroup=r.openButton,r.open=function(){e||goStart||(elemToFront(r.screen),$("#help_content").children().hide(),$(r.contentId).show(),t=$(r.contentId).children(".helpPage"),a=0,t.length>1?(r.showPage(a),$(n).show()):$(n).hide(),$(r.screen).show(),e=!0,r.currentButtonGroup=r.closeButton,elemToFront(r.helpToggle),elemToFront(r.currentButtonGroup))},r.showPage=function(e){$(t).hide(),$(t[e]).show(),$("#pageCountText")[0].textContent="Page "+(e+1)+"/"+t.length},r.nextPage=function(){a<t.length-1&&(a+=1,r.showPage(a))},r.previousPage=function(){a>0&&(a-=1,r.showPage(a))},r.close=function(){$(r.screen).hide(),e=!1,r.currentButtonGroup=r.openButton,elemToFront(r.helpToggle),elemToFront(r.currentButtonGroup)},touchEvents({item:r.helpToggle,down:function(){$(r.currentButtonGroup).children("image")[1].setAttribute("style","")},up:function(){$(r.currentButtonGroup).children("image")[1].setAttribute("style","display:none;"),e?r.close():r.open()}}),createButton(770,488,62,61,n,{text:"",sound:"click",up:"./assets/images/Menu UI/left_off.png",down:"./assets/images/Menu UI/left_on.png",event:r.previousPage}),createButton(845,488,62,61,n,{text:"",sound:"click",up:"./assets/images/Menu UI/right_off.png",down:"./assets/images/Menu UI/right_on.png",event:r.nextPage}),preparePauseMenu($("#race_pause")[0]),r}document.addEventListener("visibilitychange",onVisibilityChange,!1),CreatureGame.PreLoadFromList=function(e,a,t,r){var n,i,o,s,l,u,c,m=0,p=0;if(null==e&&(e=[]),null!=a&&CreatureGame.support.webAudio||(a=[]),e.length+a.length!==0){for(n=document.getElementById("GameImages"),l=function(){void 0!==this.anim&&setupAnimation(this,this.anim),d()},u=function(e){d()},i=0;i<e.length;i+=1)o="image_"+e[i].name,null!==document.getElementById(o)?d():((s=new Image).onload=l,s.onerror=u,s.src=e[i].src,n.appendChild(s),s.setAttribute("id",o),s.anim=e[i].anim);for(c=0;c<a.length;c+=1)CreatureGame.audio.loadSound(a[c].name,a[c].path,a[c].type,1,h)}else t();function g(){if(null!=r){var n=(m+p)/(e.length+a.length);r(n)}m===e.length&&p===a.length&&t()}function d(){m+=1,g()}function h(){p+=1,g()}},CreatureGame.pause=function(){CreatureGame.audio.pause(),CreatureGame.isPaused=!0,document.getElementById("svgCanvas").appendChild(CreatureGame.pauseElement)},CreatureGame.resume=function(){var e=document.getElementById("svgCanvas");CreatureGame.pauseElement.parentNode===e&&e.removeChild(CreatureGame.pauseElement),CreatureGame.isPaused=!1,CreatureGame.audio.resume()},CreatureGame.createProjectionMatrix=function(){var e=1/Math.tan(Math.PI/180*30);return[e,0,0,0,0,e,0,0,0,0,-500/499,-500/499,0,0,-1,0]},CreatureGame.MathFunctions={TransformPoint:function(e,a,t,r,n){var i=e*n[0]+a*n[1]+t*n[2]+r*n[3],o=e*n[4]+a*n[5]+t*n[6]+r*n[7],s=e*n[8]+a*n[9]+t*n[10]+r*n[11],l=e*n[12]+a*n[13]+t*n[14]+r*n[15];return[i/=l,o/=l,s/=l]},TransformMatrix:function(e,a){var t,r,n=[];for(t=0;t<4;t+=1)for(r=0;r<4;r+=1)n[r+4*t]=e[4*t]*a[r]+e[4*t+1]*a[4+r]+e[4*t+2]*a[8+r]+e[4*t+3]*a[12+r];return n},clamp:function(e,a,t){return Math.min(Math.max(e,a),t)},rotationDifference:function(e,a){for(;e>a+Math.PI;)e-=2*Math.PI;for(;e<a-Math.PI;)e+=2*Math.PI;return a-e},lerp:function(e,a,t){return a+e*(t-a)},randomInt:function(e,a){return Math.floor(Math.random()*(a-e+1))+e}},CreatureGame.hexToRGBA=function(e,a,t){var r=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),i=parseInt(e.substr(5,2),16),o=a||1,s=t||1;return"rgba("+Math.round(r*s)+","+Math.round(n*s)+","+Math.round(i*s)+","+o+")"},CreatureGame.requestJson=function(e,a,t){var r=new XMLHttpRequest,n=a||!1;if(r.open("GET",e+"?timer="+(new Date).getMilliseconds(),n),n&&(r.onload=function(e){if(200===r.status){var a=JSON.parse(r.responseText);t(a)}},r.onerror=function(e){}),r.send(),!n)return 200===r.status?JSON.parse(r.responseText):null};var keyStates=[],BlockDefaultKeys=[37,38,39,40];function setupKeys(){"use strict";document.body.onkeydown=function(e){keyStates[e.keyCode]=!0,192===e.keyCode&&$("#debugBox").toggle(),BlockDefaultKeys.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())},document.body.onkeyup=function(e){keyStates[e.keyCode]=!1,BlockDefaultKeys.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())}}function isKeyDown(e){"use strict";return void 0!==keyStates[e]&&null!==keyStates[e]&&keyStates[e]}function leftControl(){"use strict";return RacingPlayer.controls.left||isKeyDown(37)||isKeyDown(65)}function rightControl(){"use strict";return RacingPlayer.controls.right||isKeyDown(39)||isKeyDown(68)}var isAvivaTalking,ITEM_INFO_MAX={Weight:.5,Cost:5,Duration:30},LEVEL_DIFFICULTY_MAX=6,BestTimes={},PAN_MIN=0,PAN_MAX=439,PAN_MAX_60=263.4,PAN_MAX_40=439*.4,PAN_SPEED=1e3,COMPARABLE_INFO=["Run","Swim","Snow","Mud"],goStart=!1,labsceneImages=[{name:"wide_bg",src:"./assets/images/LabAssets/wide_background.jpg"},{name:"start_race_button_off",src:"./assets/images/LabAssets/button_off.png"},{name:"start_race_button_on",src:"./assets/images/LabAssets/button_on.png"},{name:"help_button_off",src:"./assets/images/LabAssets/help.png"},{name:"help_button_on",src:"./assets/images/LabAssets/help_press.png"},{name:"help_close_button_off",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_button_on",src:"./assets/images/LabAssets/help_close_press.png"},{name:"left_arrow_off",src:"./assets/images/LabAssets/arrow_left.png"},{name:"left_arrow_on",src:"./assets/images/LabAssets/arrow_left_press.png"},{name:"right_arrow_off",src:"./assets/images/LabAssets/arrow_right.png"},{name:"right_arrow_on",src:"./assets/images/LabAssets/arrow_right_press.png"},{name:"addbutton",src:"./assets/images/LabAssets/icon_add.png"},{name:"removebutton",src:"./assets/images/LabAssets/icon_remove.png"},{name:"level_info",src:"./assets/images/LabAssets/level_info.png"},{name:"racer_base",src:"./assets/images/Racers/base_racer.png"}];function getRaceTimes(e){"use strict";var a,t;for(a in e)e.hasOwnProperty(a)&&(BestTimes[a]=0,null!==(t=CookieJar.read(a+"_best_time"))&&(BestTimes[a]=parseInt(t,10)))}function saveRaceTime(e,a){"use strict";BestTimes[e]=a,CookieJar.write(e+"_best_time",a)}function createLabScene(){"use strict";var e,a,t,r,n,i,o,s,l,u,c,m,p,g,d,h,f=!1,y=app.levels.levels,_=null,C=0,v=0,w=document.getElementById("lab_screen_svg"),P=null,b=null,A=null,G="ADD ABILITY",M=null,x=!1,S=0,R=[],I=[],T=[];function E(){var e=4===$(".powerSlot[data-speedpower]").length;G=e?"":"ADD ABILITY",A=e?null:document.getElementById("image_addbutton")}function D(){var e=$(".powerSlot");CreatureGame.RacerWeight=0,CreatureGame.CurrentPowers=[],e.each((function(e,a){if(a.hasAttribute("data-speedpower")){var t=a.getAttribute("data-speedpower");m=AnimalPowers.movement[t]||AnimalPowers.special[t],CreatureGame.CurrentPowers.push(t),CreatureGame.RacerWeight+=m.stats.Weight.value}})),CreatureGame.RacerWeight=CreatureGame.MathFunctions.clamp(CreatureGame.RacerWeight,.01,1),CreatureGame.RacerWeight>.8&&tutorialManager.trigger("racer_overweight"),e.each((function(e,a){var t,r=$(a).children(".slotfg")[0];null!=r&&(a.hasAttribute("data-speedpower")?(t=a.getAttribute("data-speedpower"),(AnimalPowers.movement[t]||AnimalPowers.special[t]).effect.height>10&&CreatureGame.RacerWeight>.8?r.setAttribute("style","fill:red"):r.setAttribute("style","")):r.setAttribute("style",""))}))}function k(){v===PAN_MAX&&!1===f?(f=!0,tutorialManager.markTutorialFlashComplete("go"),tutorialManager.stopAllSounds(),goStart=!0,app.sound.stopAll(),app.voPlayer.stop(),app.voPlayer.play("lets_race",(function(){D(),CreatureGame.CurrentLevelInfo=y[_],CreatureGame.CurrentLevelName=_,CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.raceAudio,(function(){CreatureGame.sceneManager.changeScene("racingScene")})),setTimeout((function(){goStart=!1}),500),$(l).hide(),$(a).show(),$(t).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_off.png"),app.sound.unload(app.labAudio)}))):!1===goStart&&(tutorialManager.trigger("levels_next"),tutorialManager.trigger("powers_intro"),C=PAN_MAX,$(r).show(),$(l).show(),$(a).hide(),$(t).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_go.png"),$("#powerSlots").fadeIn(),tutorialManager.markTutorialFlashComplete("next"))}function L(){!1===goStart&&(C=PAN_MIN,$(r).hide(),$(l).hide(),$(a).show(),$(t).children(".upimg")[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/right_off.png"))}for(h in e={name:"labScene",preloadItems:{images:[{name:"wide_bg",src:"./assets/images/LabAssets/wide_background.jpg"},{name:"start_race_button_off",src:"./assets/images/LabAssets/button_off.png"},{name:"start_race_button_on",src:"./assets/images/LabAssets/button_on.png"},{name:"help_button_off",src:"./assets/images/LabAssets/help.png"},{name:"help_button_on",src:"./assets/images/LabAssets/help_press.png"},{name:"help_close_button_off",src:"./assets/images/LabAssets/help_close.png"},{name:"help_close_button_on",src:"./assets/images/LabAssets/help_close_press.png"},{name:"left_arrow_off",src:"./assets/images/LabAssets/arrow_left.png"},{name:"left_arrow_on",src:"./assets/images/LabAssets/arrow_left_press.png"},{name:"right_arrow_off",src:"./assets/images/LabAssets/arrow_right.png"},{name:"right_arrow_on",src:"./assets/images/LabAssets/arrow_right_press.png"},{name:"racer_screen",src:"./assets/images/LabAssets/racer_screen.png"},{name:"addbutton",src:"./assets/images/LabAssets/icon_add.png"},{name:"removebutton",src:"./assets/images/LabAssets/icon_remove.png"},{name:"level_info",src:"./assets/images/LabAssets/level_info.png"},{name:"racer_base",src:"./assets/images/Racers/base_racer.png"},{name:"avivaTalkLeft",src:"./assets/images/Animations/Aviva_TalkLeft_233x500.png",anim:{frames:3,direction:"x",time:.3}},{name:"avivaTalkRight",src:"./assets/images/Animations/Aviva_TalkRight_233x500.png",anim:{frames:3,direction:"x",time:.3}},{name:"avivaTurnHead",src:"./assets/images/Animations/Aviva_TurnHead_233x500.png"},{name:"avivaReactLeft",src:"./assets/images/Animations/Aviva_Laugh_Left233x510.png"},{name:"avivaReactRight",src:"./assets/images/Animations/Aviva_Laugh_Right233x510.png"}],sounds:[{name:"labintro",path:"labintro",type:"dialog"},{name:"powersintro",path:"powersintro",type:"dialog"},{name:"lab_tuts_levelconditions",path:"lab_tuts_levelconditions",type:"dialog"},{name:"lab_tuts_hitnext",path:"lab_tuts_hitnext",type:"dialog"},{name:"lab_tuts_powers",path:"lab_tuts_powers",type:"dialog"},{name:"lab_tuts_remove",path:"lab_tuts_remove",type:"dialog"},{name:"lab_tuts_begin",path:"lab_tuts_begin",type:"dialog"},{name:"lab_tuts_powerstats",path:"lab_tuts_powerstats",type:"dialog"},{name:"lab_description_weight",path:"lab_description_weight",type:"dialog"},{name:"lab_description_cost",path:"lab_description_cost",type:"dialog"},{name:"lab_description_duration",path:"lab_description_duration",type:"dialog"},{name:"lab_tuts_movement_attachments",path:"lab_tuts_movement_attachments",type:"dialog"},{name:"lab_tuts_defensive_attachments",path:"lab_tuts_defensive_attachments",type:"dialog"},{name:"lab_tuts_emptyslot",path:"lab_tuts_emptyslot",type:"dialog"},{name:"racer_too_heavy",path:"racer_too_heavy",type:"dialog"},{name:"attachment_removed",path:"attachment_removed",type:"dialog"},{name:"lets_race",path:"lets_race",type:"dialog"},{name:"add_1",path:"add_1",type:"dialog"},{name:"add_2",path:"add_2",type:"dialog"},{name:"add_3",path:"add_3",type:"dialog"},{name:"aviva_react_1",path:"aviva_react_1",type:"effect"},{name:"aviva_react_2",path:"aviva_react_2",type:"effect"},{name:"aviva_react_3",path:"aviva_react_3",type:"effect"},{name:"aviva_react_4",path:"aviva_react_4",type:"effect"},{name:"activate_Cheetah2",path:"activate_Cheetah2",type:"effect"},{name:"activate_otter",path:"activate_otter",type:"effect"},{name:"activate_hummingbird",path:"activate_hummingbird",type:"effect"},{name:"activate_falcon2",path:"activate_falcon2",type:"effect"},{name:"activate_dolphin",path:"activate_dolphin",type:"effect"},{name:"activate_skunk",path:"activate_bison",type:"effect"},{name:"activate_bison",path:"activate_bison",type:"effect"},{name:"setup_intro",path:"setup_intro",type:"dialog"}]},init:function(){var e,a=$("#help_button_open > image");for(e in getRaceTimes(y),a[0].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/help.png"),a[1].setAttributeNS(xlinkns,"href","./assets/images/LabAssets/help_press.png"),CreatureGame.help.contentId="#lab_help",w.setAttribute("style",""),app.sound.play("music_loop_menu01",{loop:!0}),AnimalPowers.movement)AnimalPowers.movement.hasOwnProperty(e)&&null===P&&(P=document.getElementById("image_"+e));f=!1,C=0,v=0,M=CreatureGame.labAviva=function(){var e,a=C,t=!0,r=null,n=!1,i=!1,o=document.getElementById("image_avivaTalkLeft"),s=document.getElementById("image_avivaTalkRight"),l=document.getElementById("image_avivaTurnHead"),u=document.getElementById("image_avivaReactLeft"),c=document.getElementById("image_avivaReactRight"),m={x:430,y:220,w:149.12,h:320};function p(){e=r,o.animDetails.reset(),s.animDetails.reset(),n=!1}return o.animDetails.pause(!0),s.animDetails.pause(!0),e=o,setupAnimation(l,{frames:6,direction:"x",time:.7,startPaused:!1,playOnce:!0,onComplete:p}),setupAnimation(u,{frames:8,direction:"x",time:1,startPaused:!0,playOnce:!0,onComplete:p}),setupAnimation(c,{frames:8,direction:"x",time:1,startPaused:!0,playOnce:!0,onComplete:p}),isAvivaTalking=function(){return i},{update:function(){a===C||v!==C||n||(0!==C||t?0!==C&&t&&(r=s,(e=l).animDetails.reset(),e.animDetails.reverse(!1),e.animDetails.pause(!1),t=!1):(r=o,(e=l).animDetails.reset(),e.animDetails.reverse(!0),e.animDetails.pause(!1),t=!0),a=C),void 0!==e.animDetails&&e.animDetails.update()},draw:function(a){void 0!==e.animDetails?e.animDetails.draw(a,m.x,m.y,m.w,m.h):a.drawImage(e,m.x,m.y,m.w,m.h)},talk:function(e){o.animDetails.pause(!e),s.animDetails.pause(!e),i=e},react:function(){n||(r=e,(e=e===s?c:u).animDetails.reset(),e.animDetails.pause(!1),n=!0)}}}(),$(r).hide(),app.onresize=!0,tutorialManager.trigger("setup_intro"),tutorialManager.trigger("levels_intro")},uninit:function(){w.setAttribute("style","display:none"),app.sound.stop("music_loop_menu01"),tutorialManager.stopAllSounds();for(var e=$("#GameImages").children().length;e--;)for(var a=0;a<labsceneImages.length-1;a++)if($("#GameImages").children()[e].id&&$("#GameImages").children()[e].id==="image_"+labsceneImages[a].name){$("#image_"+labsceneImages[a].name).remove();break}},update:function(){v<C?v+=CreatureGame.dt*PAN_SPEED:v>C&&(v-=CreatureGame.dt*PAN_SPEED),v=CreatureGame.MathFunctions.clamp(v,PAN_MIN,PAN_MAX),x||0===S||(S*=.8,Math.abs(S)<1&&(S=0)),null!==P&&P.animDetails.update(),M.update(),tutorialManager.updateTutorialFlash(C===PAN_MIN?"left":"right")},draw:function(e){var a,t,r,l,u,c,m,p,g,d,h=CreatureGame.MathFunctions.clamp(v-S/2,PAN_MIN,PAN_MAX),f=!1;for(document.getElementById("lab_screen_svg").transform.baseVal.getItem(0).matrix.e=-h,e.setTransform(1,0,0,1,0,0),e.fillStyle="black",e.fillRect(0,0,988,556),e.setTransform(1,0,0,1,-h,0),e.drawImage(document.getElementById("image_wide_bg"),0,0,1427,556),e.fillStyle="#1B1B27",e.fillRect(710,330,197,20),e.fillStyle=CreatureGame.RacerWeight<=.8?"#4870B6":"red",e.fillRect(710,330,197*CreatureGame.RacerWeight,20),e.fillStyle="white",e.font="24px DINE",e.fillText("Weight",640,348),e.drawImage(document.getElementById("image_terrain_"+_),80,169,287,155),e.drawImage(document.getElementById("image_level_info"),70,359,312,116),e.textAlign="start",e.fillStyle="#75F8E6",e.font="28px DINE",e.fillText("DIFFICULTY",100,420),e.fillText("BEST TIME",100,450),a=BestTimes[_],t=parseInt(a/60,10),l=(r=parseInt(a-60*t,10))<10?":0":":",e.fillText(t+l+r,230,450),CreatureGame.frontContext.beginPath(),n=0;n<LEVEL_DIFFICULTY_MAX;n+=1)CreatureGame.frontContext.moveTo(237+20*n,410),y[_].difficulty>n?canvasCircle(230+20*n,410,7,"#75F8E6","#75F8E6",2):(!1===f&&(f=!0,CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath()),canvasCircle(230+20*n,410,7,"#001225","#75F8E6",2));for(g in CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),null===A&&E(),null!==A&&e.drawImage(A,1120,295,33,33),e.textAlign="start",e.fillStyle="white",e.strokeStyle="black",e.font="28px DINE",e.fillText(G,1170,320),null!==P&&P.animDetails.draw(e,1058,151,275,145,!0),v>PAN_MAX_60?(i=$(".powerSlot.selected")[0],drawFitImage(e,null!==(o=i.getAttribute("data-speedpower"))?document.getElementById("image_racer_"+o):document.getElementById("image_racer_base"),0,0,450,260,488,35,495,246)):v<PAN_MAX_40&&(s=document.getElementById("image_terrain_large_"+_),drawFitImage(e,document.getElementById("image_terrain_large_"+_),0,0,s.naturalWidth,s.naturalHeight,468,35,495,286)),M.draw(e),1055,u=425,c=null!==b?b:{Weight:{value:0,display:!0},Cost:{value:0,display:!0},Duration:{value:0,display:!0}})c.hasOwnProperty(g)&&c[g].display&&(e.textAlign="start",e.fillStyle="white",e.strokeStyle="black",e.font="24px DINE",e.fillText(g,1055,u),u+=28,e.fillStyle="black",e.fillRect(1180,u-45,180,15),e.fillStyle="#4870B6",e.fillRect(1180,u-45,c[g].value/ITEM_INFO_MAX[g]*180,15));for(g in p=0,c)if(c.hasOwnProperty(g))for(m in COMPARABLE_INFO)if(COMPARABLE_INFO[m]===g){p=(d=50*c[g].value)>p?d:p;break}e.fillStyle="white",e.fillText("Top Speed",1055,380),e.fillStyle="#4870B6",e.fillText(p+DEFAULT_VELOCITY+"mph",1180,380)}},touchEvents({item:$("#desc_weight")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_weight")}}),touchEvents({item:$("#desc_cost")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_cost")}}),touchEvents({item:$("#desc_duration")[0],down:function(){isAvivaTalking()||tutorialManager.trigger("description_duration")}}),(l=document.createElementNS(svgns,"image")).setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_go.png"),l.setAttribute("x","17"),l.setAttribute("y","26"),l.setAttribute("width","50"),l.setAttribute("height","50"),(u=l.cloneNode(!0)).setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_terrain.png"),u.setAttribute("x","35"),(a=l.cloneNode(!0)).setAttributeNS(xlinkns,"href","./assets/images/LabAssets/icon_powers.png"),t=createButton(860,463,100,100,w,{text:"",sound:"click",up:"./assets/images/LabAssets/right_off.png",down:"./assets/images/LabAssets/right_press.png",event:k}),r=createButton(753,463,100,100,w,{text:"",sound:"click",up:"./assets/images/LabAssets/left_off.png",down:"./assets/images/LabAssets/left_press.png",event:L}),t.appendChild(l),t.appendChild(a),r.appendChild(u),$(l).hide(),y)y.hasOwnProperty(h)&&(R.push(h),e.preloadItems.images.push({name:"terrain_"+h,src:"./assets/images/LabAssets/MapImages/"+y[h].image}),e.preloadItems.images.push({name:"terrain_large_"+h,src:"./assets/images/LabAssets/MapImages/"+y[h].image_large}));for(h in createSelectionBox(98,100,250,70,w,{entries:R,title:"Terrain",titleAlign:"right",onchange:function(e){_=e,CreatureGame.CurrentLevel=y[e].levelfile}}),AnimalPowers.movement)AnimalPowers.movement.hasOwnProperty(h)&&(m=AnimalPowers.movement[h],I.push(h),e.preloadItems.images.push({name:h,src:"./assets/images/Animations/"+m.images.animation,anim:m.images.animationDetails}),e.preloadItems.images.push({name:"icon_"+h,src:"./assets/images/LabAssets/AnimalIcons/"+m.images.icon}),e.preloadItems.images.push({name:"racer_"+h,src:"./assets/images/Racers/"+m.images.racer}));for(h in AnimalPowers.special)AnimalPowers.special.hasOwnProperty(h)&&(m=AnimalPowers.special[h],T.push(h),e.preloadItems.images.push({name:h,src:"./assets/images/Animations/"+m.images.animation,anim:m.images.animationDetails}),e.preloadItems.images.push({name:"icon_"+h,src:"./assets/images/LabAssets/AnimalIcons/"+m.images.icon}),e.preloadItems.images.push({name:"racer_"+h,src:"./assets/images/Racers/"+m.images.racer}));function B(e,a){if(!1===goStart){app.sound.play("click"),$(p).attr("class","powerSlot"),$(a).attr("class","powerSlot selected");var t,r=a.getAttribute("data-speedpower");null!==r?(c.changeTo(r,!1),E()):(null!==P&&(t=P.id.substr(6),c.changeTo(t),E()),isAvivaTalking()||tutorialManager.trigger("select_empty"))}}function N(e,a){}function O(e,a){!1===goStart&&(m=a.parentNode.getAttribute("data-speedpower"),a.parentNode.removeAttribute("data-speedpower"),$(a.parentNode).children(".slotIcon")[0].setAttribute("style","display: none;"),$(a.parentNode).children(".slotempty")[0].setAttribute("style",""),isAvivaTalking()||tutorialManager.trigger("powers_remove"),a.parentNode.TouchEventInfo.down(e,a.parentNode),c.changeTo(m),D())}for(c=createSelectionBox(1072,71,250,70,w,{entries:I,page2Entries:T,title:"",onchange:function(e,a){if(!1===goStart){try{P=document.getElementById("image_"+e),b=a?AnimalPowers.special[e].stats:AnimalPowers.movement[e].stats}catch(e){b=null}E()}},tabs:["Movement","Special"],swipeAreaCallback:function(){if(!1===goStart){var e,a=$(".powerSlot:not([data-speedpower])"),t=a[0],r=t;if(app.sound.play("click"),tutorialManager.markTutorialFlashComplete("addButton"),null===r||null===P||void 0===r||void 0===P)return;e=P.id.substr(6),r.setAttribute("data-speedpower",e),$(r).children(".slotIcon")[0].setAttributeNS(xlinkns,"href",document.getElementById("image_icon_"+e).src),$(r).children(".slotIcon")[0].setAttribute("style",""),$(r).children(".slotempty")[0].setAttribute("style","display:none;"),isAvivaTalking()||tutorialManager.trigger("powers_add"),4===a.length&&tutorialManager.trigger("powers_full"),t.TouchEventInfo.down(null,t),E(),D()}}}),E(),p=$(".powerSlot"),n=0;n<p.length;n+=1)touchEvents({item:p[n],down:B,up:N}),touchEvents({item:$(p[n]).children(".removeButton")[0],down:O});return touchEvents({item:$("#avivaButton")[0],down:function(){!1===goStart&&M.react()}}),(g=$("#lab_tutorial_highlights")[0]).parentNode.appendChild(g),(d=document.createElementNS(svgns,"path")).setAttribute("d","m239,0 775,0 0,370 -430,0 0,-162 -120,0 0,337 121,0 0,-73 172,0 0,75 -733,0 0,-194 378,0 0,-245"),d.setAttribute("fill","rgba(0,255,255,0.0)"),w.appendChild(d),touchEvents({item:d,down:function(e,a){x=!0},move:function(e,a,t,r){x&&(S+=a,-200===(S=CreatureGame.MathFunctions.clamp(S,-200,200))&&C===PAN_MIN?(k(),x=!1):200===S&&(L(),x=!1))},up:function(e,a){x=!1}}),e}function PathAnimation(e,a,t,r){"use strict";var n,i,o,s,l=e,u=l[0],c=0,m=t||function(){},p={avgTotalLength:0,avgLengthByIndex:[],lengthsByIndex:[]};for(n=0;n<l.length;n+=1)c=l[n].index>c?l[n].index:c,void 0===p.lengthsByIndex[l[n].index]&&(p.lengthsByIndex[l[n].index]=[]),l[n].segmentLength=l[n].path.getTotalLength(),p.lengthsByIndex[l[n].index].push(l[n].segmentLength);for(n=0;n<p.lengthsByIndex.length;n+=1){for(o=0,i=0;i<p.lengthsByIndex[n].length;i+=1)o+=p.lengthsByIndex[n][i];p.avgLengthByIndex[n]=o/p.lengthsByIndex[n].length,p.avgTotalLength+=p.avgLengthByIndex[n]}this.getPointAtTime=function(e){if(void 0===u)return{x:0,y:0};if("racing"!==CreatureGame.raceStatus.state&&(e=CreatureGame.MathFunctions.clamp(e,0,1)),e>1&&(e-=1,u.index===c?(CreatureGame.EndGame(r),m()):u=this.changeToPath(u.index+1)),void 0===u)return{x:0,y:0};if(e<0&&(e+=1,u=this.changeToPath(u.index-1)),void 0===u)return{x:0,y:0};var a=u.segmentLength;return u.path.getPointAtLength(a*e)},this.getLookAheadPointAtTime=function(e){"racing"!==CreatureGame.raceStatus.state&&(e=CreatureGame.MathFunctions.clamp(e,0,1));var a=u;return e>1&&(e-=1,a=this.changeToPath(u.index+1)),e<0&&(e+=1,a=this.changeToPath(u.index-1)),void 0===a?{x:0,y:0}:(s=a.segmentLength,a.path.getPointAtLength(s*e))},this.getMaxTime=function(){return void 0===u?0:u.segmentLength},this.changeToPath=function(e){e=CreatureGame.MathFunctions.clamp(e,0,c);var t=0,r=[];for(n=0;n<l.length;n+=1)l[n].index===e&&r.push(l[n]);return r.length>1?t=null==a?Math.floor(Math.random()*r.length):a(r):r.length>0&&(t=0),r[t]},this.getRaceLength=function(){return p.avgTotalLength},this.getRaceProgress=function(e){var a,t=0,r=0;for(a=0;a<=c;a+=1)a===u.index?(t+=e,r+=u.segmentLength):(a<u.index&&(t+=p.avgLengthByIndex[a]),r+=p.avgLengthByIndex[a]);return t/r}}var GO_ICON={x:17,y:26,width:50,height:50,image:"./assets/images/LabAssets/icon_go.png"},GO_BUTTON={x:790,y:390,width:100,height:100,upimg:"./assets/images/LabAssets/right_go.png",downimg:"./assets/images/LabAssets/right_press.png"},SELECTOR_BUTTON={x:0,y:0,width:150,height:150,image:"./assets/images/PowerUps/power_up_selector.png"},ENERGY_BUTTON_INFO={x:149,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/energy_bonus_power_up.png",imageDisabled:"./assets/images/PowerUps/energy_bonus_power_up_disabled.png"},TURBO_BUTTON_INFO={x:329,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/turbo_boost_power_up.png",imageDisabled:"./assets/images/PowerUps/turbo_boost_power_up_disabled.png"},FALCON_BUTTON_INFO={x:509,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/falcon_distractor_power_up.png",imageDisabled:"./assets/images/PowerUps/falcon_distractor_power_up_disabled.png"},RHINO_BUTTON_INFO={x:689,y:230,width:150,height:150,imageEnabled:"./assets/images/PowerUps/rhino_protector_power_up.png",imageDisabled:"./assets/images/PowerUps/rhino_protector_power_up_disabled.png"},anyPowerUpAvailable=!1,energyBonusButton=null,turboBoostButton=null,falconDistractorButton=null,rhinoProtectorButton=null,powerUpSelector=null,PowerUpInfo={PowerUpTypes:{None:"None",EnergyBonus:"wk_energy_bonus",TurboBoost:"wk_turbo_boost",FalconDistractor:"wk_falcon_distractor",RhinoProtector:"wk_rhino_protector"},EnergyBonusAmount:5,TurboBoostSpeedIncrement:10,TurboBoostDuration:8,FalconDistractorPasses:4,FalconDistractorDuration:0,RhinoProtectorDuration:15};function preparePowerUpButtons(e){"use strict";anyPowerUpAvailable=!1,CreatureGame.currentPowerUp.type=PowerUpInfo.PowerUpTypes.None}function initPowerUpScreen(){"use strict";var e,a=!1,t=$("#racing_power_up_screen")[0],r=$("#power_up_page_buttons")[0],n=null;return t.open=function(e){preparePowerUpButtons(r),!a&&anyPowerUpAvailable&&(elemToFront(t),$(t).show(),n=e,CreatureGame.pause(),a=!0)},t.close=function(){a&&($(t).hide(),null!=n&&n(),CreatureGame.resume(),a=!1)},(e=document.createElementNS(svgns,"image")).setAttributeNS(xlinkns,"href",GO_ICON.image),e.setAttribute("x",GO_ICON.x.toString()),e.setAttribute("y",GO_ICON.y.toString()),e.setAttribute("width",GO_ICON.width.toString()),e.setAttribute("height",GO_ICON.height.toString()),createButton(GO_BUTTON.x,GO_BUTTON.y,GO_BUTTON.width,GO_BUTTON.height,r,{text:"",sound:"click",up:GO_BUTTON.upimg,down:GO_BUTTON.downimg,event:t.close}).appendChild(e),t}function PowerUp(e,a,t){"use strict";this.type=void 0!==e?e:PowerUpInfo.PowerUpTypes.None,this.onUse=void 0!==a?a:function(){},this.onComplete=void 0!==t?t:function(){};var r=!1,n=0;switch(e){case PowerUpInfo.PowerUpTypes.TurboBoost:n=PowerUpInfo.TurboBoostDuration;break;case PowerUpInfo.PowerUpTypes.FalconDistractor:n=PowerUpInfo.FalconDistractorDuration;break;case PowerUpInfo.PowerUpTypes.RhinoProtector:n=PowerUpInfo.RhinoProtectorDuration;break;default:n=0}this.use=function(){this.onUse(),r=!0},this.complete=function(){this.onComplete(),this.type=PowerUpInfo.PowerUpTypes.None,r=!1},this.update=function(){r&&n>=0&&this.type!==PowerUpInfo.PowerUpTypes.FalconDistractor&&0===(n=Math.max(0,n-CreatureGame.dt))&&this.complete()}}var DEFAULT_VELOCITY=35,MIN_VELOCITY=10,VELOCITY_RANGE=50,MAX_WEIGHT_EFFECT=10;function NumberQueue(e){"use strict";var a=[],t=e;this.addValue=function(e){a.push(e),a.length>t&&a.shift()},this.getAverage=function(){var e,t=0;for(e=0;e<a.length;e+=1)t+=a[e];return a.length>0&&(t/=a.length),t},this.clear=function(){a=[]}}var r,g,b,a,mult,direction,xIndex,yIndex,rewardSlot,currentAnim,RacingPlayer={position:{x:0,y:0,rotation:0,rotationTarget:0},controls:{up:!1,down:!1,left:!1,right:!1},Fuel:{total:20,available:20},elapsedTime:0,currentTime:0,maxTime:1e3,maxVelocity:30,currentVelocity:0,initialVelocity:0,animation:{},currentStrafingDistance:0,maxStrafingDistance:45,strafeSpeed:1.5,strafingVelocity:60,rotationQueue:{},freeCam:!1,hazards:{},hazardInfo:{},currentHazard:{},colliding:!1,hitZackBot:!1,reachedHalfway:!1,protectorActive:!1,winEvent:function(){"use strict";CreatureGame.raceStatus.state="playerWin",app.sound.stop("carsound"),app.sound.stop("offroad"),app.sound.play("winsound")},toggleFreeCam:function(){"use strict";RacingPlayer.freeCam=!RacingPlayer.freeCam},reset:function(e){"use strict";RacingPlayer.currentTime=0,RacingPlayer.controls.up=!1,RacingPlayer.controls.down=!1,RacingPlayer.controls.left=!1,RacingPlayer.controls.right=!1,RacingPlayer.Fuel.available=20,RacingPlayer.currentVelocity=0,RacingPlayer.resetTime(),RacingPlayer.currentStrafingDistance=0,RacingPlayer.hitZackBot=!1,RacingPlayer.reachedHalfway=!1;var a,t,r=[{path:document.getElementById("motionPath"),index:0}];void 0!==e.PathBranches?RacingPlayer.animation=new PathAnimation(e.PathBranches,this.pathSelectCallback,RacingPlayer.winEvent,!0):RacingPlayer.animation=new PathAnimation(r,this.pathSelectCallback),RacingPlayer.rotationQueue=new NumberQueue(5),a=RacingPlayer.animation.getPointAtTime(0),t=RacingPlayer.animation.getPointAtTime(RacingPlayer.maxVelocity/RacingPlayer.animation.getMaxTime()),RacingPlayer.position.x=4*a.x,RacingPlayer.position.y=4*a.y,RacingPlayer.position.rotation=-Math.atan2(t.x-a.x,t.y-a.y),RacingPlayer.updateMiniMap(),RacingPlayer.hazards=app.levels.hazarddefs,RacingPlayer.currentHazard=RacingPlayer.hazards.none},resetTime:function(){"use strict";RacingPlayer.elapsedTime=0,RacingPlayer.initialVelocity=RacingPlayer.currentVelocity},update:function(){"use strict";RacingPlayer.elapsedTime+=CreatureGame.dt;var e,a,t,r,n,i,o,s,l,u,c,m,p,g=RacingPlayer.elapsedTime,d=RacingPlayer.currentHazard.acceleration*(g*g)/2,h=RacingPlayer.initialVelocity+d,f=DEFAULT_VELOCITY+powerManager.getSpeedBoost(RacingPlayer.currentHazard);h<=f?RacingPlayer.currentVelocity=h:RacingPlayer.currentVelocity>f&&RacingPlayer.currentVelocity>MIN_VELOCITY&&(RacingPlayer.currentVelocity-=RacingPlayer.currentVelocity*CreatureGame.dt/2),leftControl()&&(RacingPlayer.freeCam?RacingPlayer.position.rotation-=.1:RacingPlayer.currentStrafingDistance<RacingPlayer.maxStrafingDistance&&(RacingPlayer.currentStrafingDistance+=RacingPlayer.strafingVelocity*CreatureGame.dt*RacingPlayer.strafeSpeed)),isKeyDown(38)||RacingPlayer.controls.up?RacingPlayer.freeCam&&(e=0,a=1,0!==RacingPlayer.position.rotation&&(e=Math.cos(RacingPlayer.position.rotation+Math.PI/2),a=Math.sin(RacingPlayer.position.rotation+Math.PI/2)),RacingPlayer.position.x+=e*CreatureGame.dt*200,RacingPlayer.position.y+=a*CreatureGame.dt*200):RacingPlayer.rotationQueue.clear(),rightControl()&&(RacingPlayer.freeCam?RacingPlayer.position.rotation+=.1:RacingPlayer.currentStrafingDistance>-RacingPlayer.maxStrafingDistance&&(RacingPlayer.currentStrafingDistance-=RacingPlayer.strafingVelocity*CreatureGame.dt*RacingPlayer.strafeSpeed)),isKeyDown(40)||RacingPlayer.controls.down||RacingPlayer.rotationQueue.clear(),u=RacingPlayer.animation.getMaxTime(),c=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/u),"racing"===CreatureGame.raceStatus.state&&(RacingPlayer.currentTime>u&&(RacingPlayer.currentTime-=u,u=RacingPlayer.animation.getMaxTime(),c=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/u)),RacingPlayer.currentTime<0&&(u=RacingPlayer.animation.getMaxTime(),RacingPlayer.currentTime+=u,c=RacingPlayer.animation.getPointAtTime(RacingPlayer.currentTime/u)),RacingPlayer.freeCam||(m=CreatureGame.MathFunctions.clamp((RacingPlayer.currentTime+RacingPlayer.maxVelocity)/u,0,1),e=(p=RacingPlayer.animation.getLookAheadPointAtTime(m)).x-c.x,a=p.y-c.y,e/=t=Math.sqrt(e*e+a*a),a/=t,0!==t&&(RacingPlayer.position.rotationTarget=-Math.atan2(e,a),r=-Math.atan2(e,a)-RacingPlayer.position.rotation,r=CreatureGame.MathFunctions.clamp(r,-.1,.1),RacingPlayer.rotationQueue.addValue(r),RacingPlayer.currentStrafingDistance+=RacingPlayer.rotationQueue.getAverage()*RacingPlayer.maxStrafingDistance*2,RacingPlayer.currentStrafingDistance=CreatureGame.MathFunctions.clamp(RacingPlayer.currentStrafingDistance,-RacingPlayer.maxStrafingDistance,RacingPlayer.maxStrafingDistance)),n=CreatureGame.MathFunctions.rotationDifference(RacingPlayer.position.rotation,RacingPlayer.position.rotationTarget),Math.abs(n)<.1?RacingPlayer.position.rotation=RacingPlayer.position.rotationTarget:n>0?RacingPlayer.position.rotation+=CreatureGame.dt:RacingPlayer.position.rotation-=CreatureGame.dt,RacingPlayer.position.x=4*c.x,RacingPlayer.position.y=4*c.y,i=-Math.cos(RacingPlayer.position.rotation+Math.PI),o=-Math.sin(RacingPlayer.position.rotation+Math.PI),RacingPlayer.position.x+=i*RacingPlayer.currentStrafingDistance,RacingPlayer.position.y+=o*RacingPlayer.currentStrafingDistance,RacingPlayer.colliding?(s=RacingPlayer.hazardInfo[2]-RacingPlayer.position.x,l=RacingPlayer.hazardInfo[3]-RacingPlayer.position.y,Math.sqrt(s*s+l*l)>4*RacingPlayer.hazardInfo[1]&&(RacingPlayer.colliding=!1,RacingPlayer.currentHazard=RacingPlayer.hazards.none,RacingPlayer.hazardInfo=null,RacingPlayer.resetTime())):Math.abs(RacingPlayer.currentStrafingDistance)>=RacingPlayer.maxStrafingDistance?"offroad"!==RacingPlayer.currentHazard.name&&(tutorialManager.trigger("offroad"),app.sound.play("offroad",{loop:!0}),RacingPlayer.currentHazard=RacingPlayer.hazards.offroad,RacingPlayer.resetTime()):(app.sound.stop("offroad"),"none"!==RacingPlayer.currentHazard.name&&(RacingPlayer.currentHazard=RacingPlayer.hazards.none,RacingPlayer.resetTime())),RacingPlayer.currentTime+=RacingPlayer.currentVelocity*CreatureGame.dt),RacingPlayer.updateMiniMap(),playerCamera.update(),powerManager.update())},updateMiniMap:function(){"use strict";document.getElementById("playerRepresentation").setAttribute("transform","translate("+RacingPlayer.position.x/4+","+RacingPlayer.position.y/4+") rotate("+RacingPlayer.position.rotation*(180/Math.PI)+")")},pathSelectCallback:function(e){"use strict";var a,t,r,n,i,o,s,l,u,c,m,p=e[0].path.getPointAtLength(e[0].path.getTotalLength()/10),g=e[1].path.getPointAtLength(e[1].path.getTotalLength()/10),d=RacingPlayer.position.rotation;return rightControl()&&(d+=.35),leftControl()&&(d-=.35),a=Math.cos(d+Math.PI/2)-Math.cos(d+Math.PI)*RacingPlayer.currentStrafingDistance,t=Math.sin(d+Math.PI/2)-Math.sin(d+Math.PI)*RacingPlayer.currentStrafingDistance,s=a*(r=p.x-RacingPlayer.position.x)+t*(n=p.y-RacingPlayer.position.y),l=a*(i=g.x-RacingPlayer.position.x)+t*(o=g.y-RacingPlayer.position.y),u=Math.sqrt(a*a+t*t),c=Math.sqrt(r*r+n*n),m=Math.sqrt(i*i+o*o),Math.acos(s/(u*c))<Math.acos(l/(u*m))?0:1},onCollision:function(e){"use strict";var a,t=powerManager.isFlying(),r=!1;if(RacingPlayer.currentVelocity>10&&!t)switch(RacingPlayer.hazards[e[0]].name){case"water":case"mud":case"snow":CreatureGame.playEffect(RacingPlayer.hazards[e[0]].name)}if(!RacingPlayer.colliding||"impact"===RacingPlayer.hazards[e[0]].type){for(a in RacingPlayer.currentHazard=RacingPlayer.hazards[e[0]],RacingPlayer.hazardInfo=e,RacingPlayer.currentHazard.immunities)if(RacingPlayer.currentHazard.immunities.hasOwnProperty(a)&&null!==powerManager.currentPower&&powerManager.currentPower.name===RacingPlayer.currentHazard.immunities[a]){"impact"===RacingPlayer.currentHazard.type&&playerCamera.Shake(.3,{frequency:4,amplitude:12}),powerManager.onCollision(RacingPlayer.currentHazard.name),RacingPlayer.currentHazard=RacingPlayer.hazards.none,r=!0;break}if(t&&(r=!0),!r)if(RacingPlayer.protectorActive)switch(RacingPlayer.currentHazard.name){case"rock":CreatureGame.playEffect("rocksplode");break;case"log":CreatureGame.playEffect("logsplode");break;case"zachbot":CreatureGame.playEffect("botsplode")}else"impact"===RacingPlayer.currentHazard.type?(tutorialManager.trigger("defense"),RacingPlayer.currentVelocity>0&&(RacingPlayer.currentVelocity=Math.max(RacingPlayer.currentVelocity-10,0)),"zachbot"!==RacingPlayer.currentHazard.name?app.sound.play("oddwoosh"):RacingPlayer.hitZackBot=!0,playerCamera.Shake(.3,{frequency:7,amplitude:30}),raceFlash("red",.3)):tutorialManager.trigger("terrain"),RacingPlayer.resetTime(),RacingPlayer.colliding=!0;return!0}return!1}},powerManager={fuelBurnEffectCount:0,currentPower:null,elapsedTime:0,turbo:0,getCurrentRacerName:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?powerManager.currentPower.name:"base"},setActivePower:function(e){"use strict";if(void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&powerManager.currentPower.effect.onComplete(),powerManager.currentPower=AnimalPowers.movement[e]||AnimalPowers.special[e],powerManager.currentPower.name=e,void 0!==powerManager.currentPower&&null!==powerManager.currentPower){if(RacingPlayer.Fuel.available>=powerManager.currentPower.stats.Cost.value){if(powerManager.fuelBurnEffectCount=RacingPlayer.Fuel.available,RacingPlayer.Fuel.available-=powerManager.currentPower.stats.Cost.value,powerManager.currentPower.effect.onSetActive(),powerManager.elapsedTime=0,RacingPlayer.resetTime(),void 0!==powerManager.currentPower.effect.activateSound&&null!==powerManager.currentPower.effect.activateSound){var a="activate_"+powerManager.currentPower.effect.activateSound;app.sound.play("click",(function(){app.sound.play(a)}))}else app.sound.play("click");return!0}powerManager.currentPower=null}return!1},onCollision:function(e){"use strict";void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&powerManager.currentPower.effect.onCollision(e)},getSpeedBoost:function(e){"use strict";var a=Math.pow(CreatureGame.RacerWeight,2)*-MAX_WEIGHT_EFFECT;return null!==powerManager.currentPower&&powerManager.currentPower.effect.height>=MAX_WEIGHT_EFFECT?a+powerManager.turbo:void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&null!==e?powerManager.currentPower.stats[e.boost||"Run"].value*VELOCITY_RANGE+a+powerManager.turbo:DEFAULT_STATS[e.boost||"Run"]*VELOCITY_RANGE+a+powerManager.turbo},getCurrentHeight:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?powerManager.currentPower.effect.height:0},update:function(){"use strict";void 0!==powerManager.currentPower&&null!==powerManager.currentPower&&(powerManager.elapsedTime+=CreatureGame.dt,powerManager.elapsedTime>=powerManager.currentPower.stats.Duration.value&&-1!==powerManager.currentPower.stats.Duration.value&&(powerManager.currentPower.effect.onComplete(),powerManager.currentPower=null,RacingPlayer.resetTime())),powerManager.fuelBurnEffectCount>0&&(powerManager.fuelBurnEffectCount-=2*CreatureGame.dt)},getProgress:function(){"use strict";return void 0!==powerManager.currentPower&&null!==powerManager.currentPower?-1===powerManager.currentPower.stats.Duration.value?1:1-powerManager.elapsedTime/powerManager.currentPower.stats.Duration.value:0},isFlying:function(){"use strict";return null!==powerManager.currentPower&&powerManager.currentPower.effect.height>=10&&CreatureGame.RacerWeight<=.8},reset:function(){"use strict";powerManager.currentPower=null,powerManager.elapsedTime=0}},playerCamera={angle:0,lookY:0,posY:0,amplitude:10,maxAmplitude:50,frequency:2,animationStarted:!1,currentHazard:{},duration:0,elapsedTime:0,jumping:!1,jumpHeight:0,maxJumpHeight:15,defaultGroundRotation:85,rotationMultiplier:6,Shake:function(e,a){"use strict";playerCamera.animationStarted||(playerCamera.angle=0,playerCamera.animationStarted=!0,playerCamera.duration=e,playerCamera.currentHazard=a)},Jump:function(){"use strict";playerCamera.jumping=!0,playerCamera.jumpHeight=0},update:function(){"use strict";playerCamera.amplitude<.1&&(playerCamera.amplitude=0),playerCamera.animationStarted?playerCamera.duration>0?(playerCamera.amplitude=playerCamera.currentHazard.amplitude,playerCamera.frequency=playerCamera.currentHazard.frequency,playerCamera.duration-=CreatureGame.dt):(playerCamera.animationStarted=!1,playerCamera.amplitude=0,playerCamera.frequency=0):"none"===RacingPlayer.currentHazard.name&&null!==powerManager.currentPower&&"hare"===powerManager.currentPower.name?(playerCamera.amplitude=7.5,playerCamera.frequency=2.5):(playerCamera.amplitude=(RacingPlayer.currentHazard.amplitude-playerCamera.amplitude)*CreatureGame.dt*4,playerCamera.frequency=RacingPlayer.currentHazard.frequency),playerCamera.angle+=CreatureGame.dt*Math.PI*2*playerCamera.frequency,playerCamera.angle>2*Math.PI&&(playerCamera.angle-=2*Math.PI),playerCamera.amplitude=Math.min(playerCamera.amplitude,playerCamera.maxAmplitude),playerCamera.lookY=Math.floor(playerCamera.amplitude*Math.sin(playerCamera.angle)),playerCamera.jumping?(playerCamera.jumpHeight<playerCamera.maxJumpHeight?playerCamera.jumpHeight+=playerCamera.maxJumpHeight*CreatureGame.dt*8:playerCamera.jumping=!1,playerCamera.jumpHeight=CreatureGame.MathFunctions.clamp(playerCamera.jumpHeight,0,playerCamera.maxJumpHeight),playerCamera.posY=powerManager.getCurrentHeight()+playerCamera.jumpHeight):playerCamera.jumpHeight>0?(playerCamera.jumpHeight-=playerCamera.maxJumpHeight*CreatureGame.dt*8,playerCamera.jumpHeight=CreatureGame.MathFunctions.clamp(playerCamera.jumpHeight,0,playerCamera.maxJumpHeight),playerCamera.posY=powerManager.getCurrentHeight()+playerCamera.jumpHeight):CreatureGame.RacerWeight<=.8&&(playerCamera.posY+=(powerManager.getCurrentHeight()-playerCamera.posY)*CreatureGame.dt*2),Math.abs(playerCamera.posY)<1e-4&&(playerCamera.posY=0);var e=playerCamera.defaultGroundRotation+playerCamera.rotationMultiplier*playerCamera.lookY/playerCamera.maxAmplitude-playerCamera.posY/30,a=playerCamera.lookY+2*playerCamera.posY;CreatureGame.floorCanvas.style.webkitTransform="perspective(500px) translate(0px,"+a+"px) rotateX("+e+"deg) scale(1.8, 1.8)",CreatureGame.floorCanvas.style.transform="perspective(500px) translate(0px,"+a+"px) rotateX("+e+"deg) scale(1.8, 1.8)"}},HALF_SCREEN={x:494,y:278},PI2=2*Math.PI,DISTRACTOR_MIN_Y=-150,DISTRACTOR_MAX_Y=139,DISTRACTOR_AMPLITUDE=DISTRACTOR_MAX_Y-DISTRACTOR_MIN_Y,DISTRACTOR_MAX_DISTANCE=1288,HORN_RANGE_X=25,HORN_FREQUENCY=2,HORN_AMPLITUDE=30,HORN_POSITION_X=393,PI_ON_TWO=Math.PI/2,raceFlash=null,showControlsReminder=null,racingZach=null,MaxCreaturePowers=4,mapDivisionSize=300,mapDivisionCount=Math.ceil(4096/mapDivisionSize),i=0,j=0,x=0,y=0,floorStamp=null,currentImage=null,backgroundRotate=null,sampleCount=null,currentTime=null,sampledColor=null,grd=null,drawAllProps=null,toProp=null,distance=null,angle=null,newVector=null,propAlpha=null,zOffset=0,scale=null,propWidth=null,drawDistance=null,transformedPoint=null,transformedPoint2=null,DrawList=null,currentProp=null,propTestPoints=null,minx=null,miny=null,maxx=null,maxy=null,currentPropLocation=null,racerImageName=null,gradStep=null,currentStep=null,colorOffset=null,colorFill=null,minutes=null,seconds=null,timeSeparator=null,button=null,bg=null,fg=null,power=null,progress=null,startAngle=null,endAngle=null,index=null,grad=null,currentPowerPos=null,horizonLookY=null,needUpdate=!0,gradRadius=null,avg=null,leader=null,time=null,hazard=null,sqr_dist=null,comp=null,npcDef=null,npc=null,reachedEnd=null,distractorWave=null,hornWaveY=null;function prepareLevelGroups(e,a){"use strict";for(i=0;i<mapDivisionCount;i+=1)for(e.push([]),j=0;j<mapDivisionCount;j+=1)e[i].push([]);for(i=0;i<a.length;i+=1)xIndex=CreatureGame.MathFunctions.clamp(Math.floor(a[i][1]/mapDivisionSize),0,mapDivisionCount-1),yIndex=CreatureGame.MathFunctions.clamp(Math.floor(a[i][2]/mapDivisionSize),0,mapDivisionCount-1),e[xIndex][yIndex].push(i)}function updateMiniMap(){"use strict";void 0===CreatureGame.miniMap&&(CreatureGame.miniMap=$("#path_svg")[0],CreatureGame.miniMap.mapZoom=1),CreatureGame.miniMap.zachPos=$("#zachRepresentation")[0].transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.playerPos=$("#playerRepresentation")[0].transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.scale=CreatureGame.miniMap.transform.baseVal.getItem(0).matrix,CreatureGame.miniMap.translate=CreatureGame.miniMap.transform.baseVal.getItem(1).matrix,direction=[CreatureGame.miniMap.zachPos.e-CreatureGame.miniMap.playerPos.e,CreatureGame.miniMap.zachPos.f-CreatureGame.miniMap.playerPos.f],distance=Math.sqrt(Math.pow(direction[0],2)+Math.pow(direction[1],2))||1,CreatureGame.miniMap.mapZoom=CreatureGame.MathFunctions.clamp(75/Math.abs(distance),.001,.6),CreatureGame.miniMap.scale.a=CreatureGame.miniMap.mapZoom,CreatureGame.miniMap.scale.d=CreatureGame.miniMap.mapZoom,CreatureGame.miniMap.translate.e=-CreatureGame.miniMap.zachPos.e+direction[0]/2,CreatureGame.miniMap.translate.f=-CreatureGame.miniMap.zachPos.f+direction[1]/2}function clearRewardSlot(){"use strict";null!==(rewardSlot=$("#rewardSlot .button")[0]).fg&&void 0!==rewardSlot.fg&&rewardSlot.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_powerup_empty").getAttribute("src"))}function createGradColor(e,t,n){"use strict";return r=e[0],g=e[1],b=e[2],a=t,mult=n||1,"rgba("+Math.round(r*mult)+","+Math.round(g*mult)+","+Math.round(b*mult)+","+a+")"}function createRacingScene(){"use strict";var e,a=[],t=[],r="white",n=0,o=null,s=[],l=[],u=new Date,c=null,m=null,p=null,g=[],d=260,h=[Math.ceil(665.6),Math.ceil(291.85)],f=["music_loop_race01","music_loop_race02","music_loop_race03"],_=[[828,496],[928,436],[828,376],[928,316]],C=[[1,0],[2,0],[2,1],[3,2],[3,1]],v={state:"idle",countdown:4,countSounds:3,lastPassSound:new Date,playerProgress:0,zachProgress:0,leader:"zach"},w=0,P=0,b=1.5,A=0,G=[],M={x:0,y:0},S={x:0,y:0},R=!1,I={x:-300,y:-150,width:300,height:150,moveRight:!0,passes:0},T=[],E=[{name:"chris_cheer1_128x225",animName:"npc_chrisCheer",aspect:.5688,found:!1,active:!1,callback:function(){tutorialManager.trigger("move")}},{name:"flag",animName:"npc_flag",aspect:1.209,found:!0,active:!0,callback:function(){}}];return CreatureGame.raceStatus=v,racingZach=new ZachEnemyPlayer,raceFlash=function(e,a){n=a,r=e},showControlsReminder=function(){b=1.5},touchEvents({item:document.getElementById("controlLeft"),down:function(e,a){e.stopPropagation(),RacingPlayer.controls.left=!0,a.setAttribute("fill","url(#leftButtonGrad)")},up:function(e,a){e.stopPropagation(),RacingPlayer.controls.left=!1,a.setAttribute("fill","none")}}),touchEvents({item:document.getElementById("controlRight"),down:function(e,a){e.stopPropagation(),RacingPlayer.controls.right=!0,a.setAttribute("fill","url(#rightButtonGrad)")},up:function(e,a){e.stopPropagation(),RacingPlayer.controls.right=!1,a.setAttribute("fill","none")}}),CreatureGame.playEffect=function(e){if(currentAnim=document.getElementById("image_effect_"+e),g.indexOf(currentAnim)<0)g.push(currentAnim);else if(void 0!==currentAnim.animDetails.preventEffectReplace&&currentAnim.animDetails.preventEffectReplace)return;currentAnim.animDetails.reset(),currentAnim.animDetails.pause(!1),currentAnim.AnimMode="show"},createButton(514,410,171,100,$("#endgame")[0],{text:"",sound:"click",up:"./assets/images/EndGame/button_back.png",down:"./assets/images/EndGame/button_back_press.png",event:function(){app.sound.stopAll(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,(function(){CreatureGame.sceneManager.changeScene("labScene")}))}}),createButton(303,410,171,100,$("#endgame")[0],{text:"",sound:"click",up:"./assets/images/EndGame/button_again.png",down:"./assets/images/EndGame/button_again_press.png",event:function(){CreatureGame.sceneManager.reset()}}),CreatureGame.PowerUpSelected=function(){if(CreatureGame.currentPowerUp.type!==PowerUpInfo.PowerUpTypes.None)switch((e=$("#rewardSlot .button")[0]).fg=$("#rewardSlot image")[0],CreatureGame.currentPowerUp.type){case PowerUpInfo.PowerUpTypes.EnergyBonus:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,(function(){RacingPlayer.Fuel.available=Math.min(RacingPlayer.Fuel.total,RacingPlayer.Fuel.available+PowerUpInfo.EnergyBonusAmount)}),(function(){clearRewardSlot()})),e.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_energy_button_off").getAttribute("src")),e.pressedImage="image_energy_button_on";break;case PowerUpInfo.PowerUpTypes.TurboBoost:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,(function(){powerManager.turbo=PowerUpInfo.TurboBoostSpeedIncrement,RacingPlayer.resetTime()}),(function(){powerManager.turbo=0,clearRewardSlot()})),e.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_boost_button_off").getAttribute("src")),e.pressedImage="image_boost_button_on";break;case PowerUpInfo.PowerUpTypes.FalconDistractor:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,(function(){CreatureGame.audio.playAudio("falcon_dive"),R=!0,I.x=-I.width,I.y=-I.height,I.moveRight=!0,I.passes=0}),(function(){R=!1,clearRewardSlot()})),e.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_falcon_button_off").getAttribute("src")),e.pressedImage="image_falcon_button_on";break;case PowerUpInfo.PowerUpTypes.RhinoProtector:CreatureGame.currentPowerUp=new PowerUp(CreatureGame.currentPowerUp.type,(function(){M={x:0,y:0},S={x:0,y:0},RacingPlayer.protectorActive=!0}),(function(){RacingPlayer.protectorActive=!1,clearRewardSlot()})),e.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_rhino_button_off").getAttribute("src")),e.pressedImage="image_rhino_button_on"}function a(){CreatureGame.currentPowerUp.use()}function t(){}touchEvents({item:e,down:function(r,n){if(CreatureGame.currentPowerUp.type!==PowerUpInfo.PowerUpTypes.None&&"racing"===v.state){if(CreatureGame.currentPowerUp.type===PowerUpInfo.PowerUpTypes.EnergyBonus&&RacingPlayer.Fuel.available===RacingPlayer.Fuel.total)return;CreatureGame.usePowerUp(CreatureGame.currentPowerUp.type,a,t),e.fg.setAttributeNS(xlinkns,"href",document.getElementById(e.pressedImage).getAttribute("src"))}}})},CreatureGame.EndGame=function(e){var t,r,n,o=!1,s=!0,l=!0;if(v.state=e?"playerWin":"zachWin",e){for((void 0===BestTimes[CreatureGame.CurrentLevelName]||0===parseInt(BestTimes[CreatureGame.CurrentLevelName],10)||w<BestTimes[CreatureGame.CurrentLevelName])&&saveRaceTime(CreatureGame.CurrentLevelName,w),i=0;i<CreatureGame.CurrentPowers.length;i+=1)power=AnimalPowers.special[CreatureGame.CurrentPowers[i]]||AnimalPowers.movement[CreatureGame.CurrentPowers[i]],RacingPlayer.Fuel.available>=power.stats.Cost.value&&(o=!0),"mammal"!==power.stats.Classification&&(s=!1);for(r in o&&CreatureGame.event(CreatureGame.GUID_REMAINING_ENERGY),s&&CreatureGame.CurrentPowers.length>=MaxCreaturePowers&&CreatureGame.event(CreatureGame.GUID_WIN_WITH_ONLY_MAMMAL_PARTS),RacingPlayer.hitZackBot||CreatureGame.event(CreatureGame.GUID_DODGE_ALL_ZACK_BOTS),BestTimes)if(BestTimes.hasOwnProperty(r)&&(void 0===BestTimes[r]||0===BestTimes[r])){l=!1;break}n=CookieJar.read("firstTimeBeatZachEveryLevel"),l&&null===n&&(CookieJar.write("firstTimeBeatZachEveryLevel",!0),CreatureGame.event(CreatureGame.GUID_BEAT_ZACK_EVERY_LEVEL)),null===CookieJar.read("firstTimeBeatZach")?(CookieJar.write("firstTimeBeatZach",!0),CreatureGame.event(CreatureGame.GUID_BEAT_ZACK_FIRST_TIME)):CreatureGame.event(CreatureGame.GUID_BEAT_ZACK)}for(t=0,i=0;i<a.length;i+=1)t+=a[i];(t/=a.length)<20&&CookieJar.write("shouldUseLowQuality","1"),$(e?"#loseBanner":"#winBanner").hide(),$(e?"#endgame, #winBanner":"#endgame, #loseBanner").show(),CreatureGame.levelComplete()},{name:"racingScene",getPreloadItems:function(){var e,a,t={images:[{name:"prototype_sky",src:"./assets/images/prototype_sky.jpg"},{name:"mountain_sky",src:"./assets/images/mountain_sky.jpg"},{name:"snowy_sky",src:"./assets/images/snowy_sky.jpg"},{name:"controls",src:"./assets/images/controls-01.png"},{name:"consolebg",src:"./assets/images/CockpitUI/console_bg.png"},{name:"minimap",src:"./assets/images/CockpitUI/minimap.png"},{name:"joystick",src:"./assets/images/CockpitUI/joystick.png"},{name:"horn",src:"./assets/images/PowerUps/horn.png"},{name:"rhino_protector",src:"./assets/images/PowerUps/rhino.png"},{name:"falcon_distractor",src:"./assets/images/PowerUps/falcon.png"},{name:"anim_moveLeft",src:"./assets/images/CockpitUI/left_key256x198.png",anim:{frames:9,direction:"y",time:.76}},{name:"anim_moveRight",src:"./assets/images/CockpitUI/right_key.png",anim:{frames:9,direction:"y",time:.76}},{name:"anim_energyIcon",src:"./assets/images/CockpitUI/energy_icon.png",anim:{frames:4,direction:"y",time:.5}},{name:"npc_chrisCheer",src:"./assets/images/Animations/chris_cheer1_128x225.png",anim:{frames:10,direction:"x",time:.7}},{name:"effect_go",src:"./assets/images/Animations/go_animation.png",anim:{frames:5,direction:"y",time:.56,playOnce:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_skunk",src:"./assets/images/Animations/skunk_effect.png",anim:{frames:6,direction:"y",time:.45,playOnce:!0,onComplete:function(e){e.AnimMode="fadeout"}}},{name:"effect_rocksplode",src:"./assets/images/Animations/rock_explode450x250.png",anim:{frames:6,direction:"y",time:.42,playOnce:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_botsplode",src:"./assets/images/Animations/zachbot_explode450x250.png",anim:{frames:4,direction:"y",time:.3,playOnce:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_logsplode",src:"./assets/images/Animations/log_explode450x250.png",anim:{frames:7,direction:"y",time:.49,playOnce:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_water",src:"./assets/images/Animations/particles_water.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_mud",src:"./assets/images/Animations/particles_mud.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"effect_snow",src:"./assets/images/Animations/particles_snow.png",anim:{frames:8,direction:"y",time:.5,playOnce:!0,preventEffectReplace:!0,onComplete:function(e){e.AnimMode="remove"}}},{name:"banner_lose",src:"./assets/images/EndGame/Lose_988x556.png"},{name:"banner_win",src:"./assets/images/EndGame/Win_988x556.png"},{name:"npc_flag",src:"./assets/images/Animations/flag_animation.png",anim:{frames:3,direction:"x",time:.4}}],sounds:[{name:"race_bg",path:"badracingmusic",type:"music"},{name:"playerpass",path:"pass2",type:"effect"},{name:"zachpass",path:"pass1",type:"effect"},{name:"cool",path:"thisiscool",type:"dialog"},{name:"carsound",path:"carsound",type:"effect"},{name:"offroad",path:"offroad",type:"effect"},{name:"smart",path:"smart",type:"dialog"},{name:"winsound",path:"winsound",type:"dialog"},{name:"losesound",path:"losesound",type:"dialog"},{name:"take_lead_1",path:"take_lead_1",type:"dialog"},{name:"take_lead_2",path:"take_lead_2",type:"dialog"},{name:"take_lead_3",path:"take_lead_3",type:"dialog"},{name:"lose_lead",path:"lose_lead",type:"dialog"},{name:"tutorial_move",path:"tutorial_move",type:"dialog"},{name:"tutorial_power",path:"tutorial_power",type:"dialog"},{name:"tutorial_power_reminder",path:"tutorial_power_reminder",type:"dialog"},{name:"tutorial_region",path:"tutorial_region",type:"dialog"},{name:"tutorial_defense",path:"tutorial_defense",type:"dialog"},{name:"tutorial_offroad",path:"tutorial_offroad",type:"dialog"},{name:"did_you_pick_321GO",path:"did_you_pick_321GO",type:"dialog"},{name:"3",path:"3",type:"dialog"},{name:"2",path:"2",type:"dialog"},{name:"1",path:"1",type:"dialog"},{name:"GO",path:"GO",type:"dialog"},{name:"watch_out_bots",path:"watch_out_bots",type:"dialog"},{name:"falcon_dive",path:"activate_falcon2",type:"effect"},{name:"bot_hit",path:"oddwoosh"}]};for(e in app.unload(app.levels),app.load("./assets/config/config.json",(function(e){app.levels=e.levels})),CreatureGame.currlevel=CreatureGame.CurrentLevel.slice(0,7),CreatureGame.levelInfo=o=app.levels[CreatureGame.currlevel],prepareLevelGroups(s=[],o.PropLocations),o.Props)o.Props.hasOwnProperty(e)&&t.images.push({name:o.Props[e].Image,src:"./assets/images/Props/"+o.Props[e].ImageSource});for(i=0;i<o.StampPreload.length;i+=1)t.images.push({name:o.StampPreload[i].match(/.*(?=\.)/gi)[0],src:"./assets/images/FloorStamps/"+o.StampPreload[i]});for(i=0;i<o.FloorStamps.length;i+=1)o.FloorStamps[j].width>256&&o.FloorStamps[j].height===o.FloorStamps[j].width&&(o.FloorStamps[j].width=256,o.FloorStamps[j].height=256);return a=racingZach.getPreloadItems(),t.images=t.images.concat(a.images),t},init:function(){clearRewardSlot(),CreatureGame.powerUpScreen.open(CreatureGame.PowerUpSelected),raceFlash("white",1);var e,t,r,n,s,l,u,g=$("#help_button_open > image");if(g[0].setAttributeNS(xlinkns,"href","./assets/images/CockpitUI/pause_off.png"),g[1].setAttributeNS(xlinkns,"href","./assets/images/CockpitUI/pause_press.png"),a=[],CreatureGame.help.contentId="#race_pause",v.state="init",v.countdown=3.5,w=0,P=0,A=0,G=[],RacingPlayer.maxStrafingDistance=o.MapDetails.strafeDistance,CreatureGame.clearColor=o.MapDetails.clearColor,void 0!==(o=CreatureGame.levelInfo).PathBranches){for(t=document.getElementById("levelPaths");void 0!==t.childNodes&&t.childNodes.length>0;)t.removeChild(t.childNodes[0]);for(i=0;i<o.PathBranches.length;i+=1)("string"==typeof o.PathBranches[i].index||o.PathBranches[i].index instanceof String)&&(o.PathBranches[i].index=parseInt(o.PathBranches[i].index,10)),e=document.createElementNS(svgns,"path"),"string"!=typeof o.PathBranches[i].path?e.setAttribute("d",CreatureGame.temp_path):(CreatureGame.temp_path=o.PathBranches[i].path,e.setAttribute("d",o.PathBranches[i].path)),e.setAttribute("class","motionPath"),e.setAttribute("stroke","#22325B"),e.setAttribute("stroke-width",(2*RacingPlayer.maxStrafingDistance/4+20).toString()),e.setAttribute("fill","none"),e.setAttribute("style","pointer-events:none;"),t.appendChild(e),o.PathBranches[i].path=e}for(i=0;i<o.PropLocations.length;i+=1)for(r=o.PropLocations[i][0],j=0;j<E.length;j+=1)r===E[j].name&&(o.Props[r].Image=E[j].animName,o.Props[r].Aspect=E[j].aspect,E[j].found=!0,T.push({x:o.PropLocations[i][1],y:o.PropLocations[i][2],def:E[j]}));function d(e,a){var t;tutorialManager.timeSincePower=0,"racing"===CreatureGame.raceStatus.state&&(powerManager.getProgress()<=0||a!==c)&&(u=a.getAttribute("data-index"),t=powerManager.setActivePower(CreatureGame.CurrentPowers[u]),$(".powerBg").each((function(e,a){var t=AnimalPowers.special[CreatureGame.CurrentPowers[e]]||AnimalPowers.movement[CreatureGame.CurrentPowers[e]]||null;a.isDisabled=null!==t&&RacingPlayer.Fuel.available<t.stats.Cost.value,a.setAttribute("fill",a.isDisabled?"#775555":"#555555"),$(a.parentNode).children("image")[0].setAttribute("opacity",a.isDisabled?"0.2":"1")})),t?(raceFlash("rgb(100,255,255)",.5),c=a,tutorialManager.powerNotificationRequired=!1,a.bg.setAttribute("style","stroke: #55BBBB;"),a.fg.setAttribute("opacity","1"),G.indexOf(u)<0&&G.push(u),G.length>=4&&null===CookieJar.read("firstTimeUsedEveryPower")&&(CookieJar.write("firstTimeUsedEveryPower",!0),CreatureGame.event(CreatureGame.GUID_USED_ALL_CREATURE_PARTS_FIRST_TIME))):(a.bg.setAttribute("style","stroke: #995555;"),a.fg.setAttribute("opacity","0.2")))}function h(e,a){a.bg.setAttribute("style","")}function y(e,a){var t=AnimalPowers.special[CreatureGame.CurrentPowers[e]]||AnimalPowers.movement[CreatureGame.CurrentPowers[e]]||null;a.isDisabled=null!==t&&RacingPlayer.Fuel.available<t.stats.Cost.value,a.setAttribute("fill",a.isDisabled?"#775555":"#555555")}for(i=0;i<MaxCreaturePowers;i+=1)n=document.getElementById("powerButton"+i),i<CreatureGame.CurrentPowers.length?(n.setAttribute("style",""),(s=$("#powerButton"+i+" .button")[0]).setAttribute("data-index",i),s.bg=$(n).children(".powerBg")[0],s.bg.isDisabled=!1,s.fg=$("#powerButton"+i+" image")[0],s.fg.setAttributeNS(xlinkns,"href",document.getElementById("image_icon_"+CreatureGame.CurrentPowers[i]).getAttribute("src")),$(".powerBg").each(y),touchEvents({item:s,down:d,up:h})):n.setAttribute("style","display:none;");CreatureGame.MathFunctions.projection=CreatureGame.createProjectionMatrix(),RacingPlayer.reset(o),racingZach.reset(o),powerManager.reset(),v.countSounds=3,document.getElementById("racing_screen_svg").setAttribute("style",""),app.bgMusic=f[CreatureGame.MathFunctions.randomInt(0,f.length-1)],void 0!==app.bgMusic&&null!==app.bgMusic&&app.sound.play(app.bgMusic,{loop:!0}),app.sound.play("carsound",{loop:!0,volume:.45}),$(CreatureGame.frontCanvas).hide(),CreatureGame.frontContext.setTransform(1,0,0,1,0,0),m=document.getElementById("image_"+CreatureGame.CurrentLevelInfo.sky+"_sky"),CreatureGame.frontContext.drawImage(m,0,0),l=CreatureGame.frontContext.getImageData(0,0,988,556),u=4e3,p="rgba("+l.data[u]+","+l.data[u+1]+","+l.data[u+2]+",1)",CreatureGame.frontContext.clearRect(0,0,988,556),$(CreatureGame.frontCanvas).show(),$("#endgame, #winBanner, #loseBanner").hide(),CreatureGame.help.close(),CreatureGame.audio.playAudio("did_you_pick_321GO",(function(){v.state="countdown"}))},uninit:function(){document.getElementById("racing_screen_svg").setAttribute("style","display:none;"),app.sound.stop(app.bgMusic),app.sound.stop("carsound"),app.sound.stop("offroad")},update:function(){if("none"===$("#lab_help_screen_svg")[0].style.display&&!CreatureGame.isPaused){for(CreatureGame.currentPowerUp.update(),n=Math.max(n-CreatureGame.dt,0),updateMiniMap(),i=0;i<g.length;i+=1)if(void 0!==g[i]||null!==g[i])switch(g[i].animDetails.update(),g[i].AnimMode){case"show":g[i].alpha=1;break;case"fadeout":g[i].alpha-=.8*CreatureGame.dt,g[i].alpha<0&&(g[i]=null);break;case"remove":g[i]=null}for(;g.indexOf(null)>-1;)g.splice(g.indexOf(null),1);switch(v.state){case"init":break;case"countdown":v.countdown-=CreatureGame.dt,v.countdown<=0&&(v.countdown=1,v.showGo=!0,v.state="racing",CreatureGame.playEffect("go"),CreatureGame.audio.playAudio("GO"),tutorialManager.timeSinceMovement=0,tutorialManager.timeSincePower=0),v.countdown<v.countSounds&&(v.countSounds=v.countSounds-1,v.countSounds<3&&CreatureGame.audio.playAudio(Math.round(v.countdown).toString()));break;case"racing":if(tutorialManager.update(),RacingPlayer.update(),racingZach.update(),v.playerProgress=RacingPlayer.animation.getRaceProgress(RacingPlayer.currentTime),v.zachProgress=racingZach.getProgress(),w+=CreatureGame.dt,t.push(Math.round(1/CreatureGame.dt)),v.playerProgress>=.5&&!RacingPlayer.reachedHalfway&&(RacingPlayer.reachedHalfway=!0,CreatureGame.event(CreatureGame.GUID_REACH_HALF_WAY_MARK)),t.length>20){for(avg=0,i=0;i<t.length;i+=1)avg+=t[i];a.push(avg/t.length),t=[]}leader=v.playerProgress>v.zachProgress?"player":"zach","playerWin"===CreatureGame.raceStatus.state||"zachWin"===CreatureGame.raceStatus.state||leader!==v.leader&&(v.leader=leader,(time=new Date)-v.lastPassSound>2e3&&(v.lastPassSound=time,"player"===leader?app.sound.play("take_lead_"+Math.ceil(3*Math.random())):app.sound.play("lose_lead"))),v.countdown>0&&(v.countdown-=CreatureGame.dt,v.countdown<0&&(v.showGo=!1)),b>0&&(b=CreatureGame.MathFunctions.clamp(b-.5*CreatureGame.dt,0,2))}for(i=0;i<o.Hazards.length;i+=1)hazard=o.Hazards[i],sqr_dist=Math.pow(hazard[2]-RacingPlayer.position.x,2)+Math.pow(hazard[3]-RacingPlayer.position.y,2),comp=o.Hazards[i][1]*o.Hazards[i][1]*16,sqr_dist<comp&&RacingPlayer.onCollision(hazard)&&"impact"===RacingPlayer.hazards[hazard[0]].type&&o.Hazards.splice(i,1);for(i=0;i<E.length;i+=1)(npcDef=E[i]).found&&npcDef.active&&document.getElementById("image_"+npcDef.animName).animDetails.update();for(i=0;i<T.length;i+=1)(npc=T[i]).def.active||Math.pow(npc.x-RacingPlayer.position.x,2)+Math.pow(npc.y-RacingPlayer.position.y,2)<4e4&&(T[i].def.active=!0,T[i].def.callback());document.getElementById("image_anim_moveLeft").animDetails.update(),document.getElementById("image_anim_moveRight").animDetails.update(),document.getElementById("powerConsole").setAttribute("transform","translate(0,"+P+")"),RacingPlayer.Fuel.available<4?document.getElementById("image_anim_energyIcon").animDetails.update():document.getElementById("image_anim_energyIcon").animDetails.reset(),R&&(reachedEnd=!1,I.moveRight?(I.x+=HALF_SCREEN.x*CreatureGame.dt,I.x>=CreatureGame.FrameSize.x&&(I.moveRight=!1,I.passes=I.passes+1,reachedEnd=!0)):(I.x-=HALF_SCREEN.x*CreatureGame.dt,I.x<=-I.width&&(I.moveRight=!0,I.passes=I.passes+1,reachedEnd=!0)),I.passes>=PowerUpInfo.FalconDistractorPasses?CreatureGame.currentPowerUp.complete():reachedEnd&&(racingZach.onFalconDistractor(),CreatureGame.audio.playAudio("falcon_dive")),I.x=CreatureGame.MathFunctions.clamp(I.x,-I.width,CreatureGame.FrameSize.x),distractorWave=Math.sin((I.x+I.width)/DISTRACTOR_MAX_DISTANCE*Math.PI),I.y=DISTRACTOR_MIN_Y+distractorWave*DISTRACTOR_AMPLITUDE),RacingPlayer.protectorActive&&(M.y+=PI2*HORN_FREQUENCY*CreatureGame.dt,M.y>PI2&&(M.y-=PI2),M.x+=Math.PI*HORN_FREQUENCY*CreatureGame.dt,M.x>PI2&&(M.x-=PI2),hornWaveY=1+Math.sin(M.y)/2,S.y=HORN_AMPLITUDE*hornWaveY,S.x=HORN_POSITION_X+HORN_RANGE_X*Math.cos(M.x))}},draw:function(e){for(drawAllProps=CreatureGame.performance.drawAllProps,zOffset=0,DrawList=[],needUpdate=!0,d=CreatureGame.performance.horizon+.7*playerCamera.posY,horizonLookY=d+playerCamera.lookY,e.setTransform(1,0,0,1,0,0),e.clearRect(0,horizonLookY,988,556-horizonLookY),CreatureGame.floorContext.setTransform(1,0,0,1,0,0),CreatureGame.floorContext.fillStyle=CreatureGame.clearColor,CreatureGame.floorContext.fillRect(0,0,988,556),j=0;j<o.FloorStamps.length;j+=1)floorStamp=o.FloorStamps[j],CreatureGame.floorContext.setTransform(1,0,0,1,0,0),CreatureGame.floorContext.translate(CreatureGame.floorCanvas.width/2,CreatureGame.floorCanvas.height),CreatureGame.floorContext.rotate(-RacingPlayer.position.rotation+Math.PI),CreatureGame.floorContext.translate(-RacingPlayer.position.x+floorStamp.x,-RacingPlayer.position.y+floorStamp.y),CreatureGame.floorContext.rotate(floorStamp.rotation*(Math.PI/180)),CreatureGame.floorContext.translate(-floorStamp.width/2,-floorStamp.height/2),currentImage=document.getElementById("image_"+floorStamp.imageId),CreatureGame.floorContext.drawImage(currentImage,0,0,Math.floor(floorStamp.width),Math.floor(floorStamp.height));for(backgroundRotate=300*-RacingPlayer.position.rotation;backgroundRotate>h[0]/2;)backgroundRotate-=h[0];for(;backgroundRotate<-h[0]/2;)backgroundRotate+=h[0];if(e.fillStyle=p,e.fillRect(0,0,988,horizonLookY),e.setTransform(1,0,0,1,backgroundRotate,d-h[1]),e.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(h[0]+1),Math.floor(h[1])),e.setTransform(1,0,0,1,backgroundRotate+h[0],d-h[1]),e.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(h[0]+1),Math.floor(h[1])),e.setTransform(1,0,0,1,backgroundRotate-h[0],d-h[1]),e.drawImage(m,0,Math.floor(playerCamera.lookY),Math.floor(h[0]+1),Math.floor(h[1])),e.setTransform(1,0,0,1,0,0),CreatureGame.performance.drawGradient){for(sampleCount=15,(currentTime=new Date)-u>500&&(u=currentTime,l.length>=sampleCount&&l.shift(),l.push(CreatureGame.floorContext.getImageData(494,80,1,1).data)),sampledColor=[0,0,0],i=0;i<sampleCount;i+=1)i<l.length&&(sampledColor[0]+=l[i][0],sampledColor[1]+=l[i][1],sampledColor[2]+=l[i][2]);sampledColor[0]/=l.length,sampledColor[1]/=l.length,sampledColor[2]/=l.length,(grd=e.createLinearGradient(0,d+playerCamera.lookY,0,d+playerCamera.lookY+40)).addColorStop(0,createGradColor(sampledColor,1,1)),grd.addColorStop(.3,createGradColor(sampledColor,1,1)),grd.addColorStop(1,createGradColor(sampledColor,0,1)),e.fillStyle=grd,e.fillRect(0,d+playerCamera.lookY-5,988,556-(d+playerCamera.lookY-5))}function a(e,a,t,r,n,i){return i.visible=!1,i.x=0,i.y=0,i.w=0,i.h=0,i.a=0,i.sortvalue=0,toProp=[e-RacingPlayer.position.x,a-RacingPlayer.position.y],(distance=Math.sqrt(Math.pow(toProp[0],2)+Math.pow(toProp[1],2)))>CreatureGame.performance.drawDistance&&!drawAllProps?i:(toProp[0]/=distance,toProp[1]/=distance,angle=Math.atan2(toProp[0],toProp[1]),Math.abs(CreatureGame.MathFunctions.rotationDifference(-angle,RacingPlayer.position.rotation))>CreatureGame.performance.drawMaxAngle?i:(angle+=RacingPlayer.position.rotation,newVector=[-Math.sin(angle)*distance,-Math.cos(angle)*distance],propAlpha=drawAllProps?1:CreatureGame.performance.drawDistance/800*4.6- -newVector[1]/170,(propAlpha=CreatureGame.MathFunctions.clamp(propAlpha,0,1))<.01?i:(zOffset=n||0,transformedPoint=CreatureGame.MathFunctions.TransformPoint(newVector[0],20+playerCamera.posY,newVector[1],1,CreatureGame.MathFunctions.projection),transformedPoint2=CreatureGame.MathFunctions.TransformPoint(newVector[0],20+playerCamera.posY+t,newVector[1],1,CreatureGame.MathFunctions.projection),transformedPoint[1]<0||(transformedPoint[0]*=290,transformedPoint[0]+=494,transformedPoint[1]*=373,drawDistance=Math.abs(transformedPoint[1]-transformedPoint2[1])/(20+playerCamera.posY),transformedPoint[1]+=-15,propWidth=(scale=drawDistance*t*20)*r,transformedPoint[1]+=250,i.visible=!0,i.img=null,i.x=transformedPoint[0]-propWidth/2,i.y=transformedPoint[1]-scale-zOffset*Math.abs(500+newVector[1]),i.w=propWidth,i.h=scale,i.a=propAlpha,i.sortvalue=newVector[1]),i)))}for(propTestPoints=[[RacingPlayer.position.x,RacingPlayer.position.y],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO)*CreatureGame.performance.drawDistance],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO+CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO+CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance],[RacingPlayer.position.x+Math.cos(RacingPlayer.position.rotation+PI_ON_TWO-CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance,RacingPlayer.position.y+Math.sin(RacingPlayer.position.rotation+PI_ON_TWO-CreatureGame.performance.drawMaxAngle)*CreatureGame.performance.drawDistance]],minx=propTestPoints[0][0],miny=propTestPoints[0][1],maxx=propTestPoints[0][0],maxy=propTestPoints[0][1],i=1;i<propTestPoints.length;i+=1)minx=Math.min(propTestPoints[i][0],minx),miny=Math.min(propTestPoints[i][1],miny),maxx=Math.max(propTestPoints[i][0],maxx),maxy=Math.max(propTestPoints[i][1],maxy);for(minx=CreatureGame.MathFunctions.clamp(Math.floor(minx/mapDivisionSize),0,mapDivisionCount-1),miny=CreatureGame.MathFunctions.clamp(Math.floor(miny/mapDivisionSize),0,mapDivisionCount-1),maxx=CreatureGame.MathFunctions.clamp(Math.floor(maxx/mapDivisionSize),0,mapDivisionCount-1),maxy=CreatureGame.MathFunctions.clamp(Math.floor(maxy/mapDivisionSize),0,mapDivisionCount-1),x=minx;x<maxx+1;x+=1)for(y=miny;y<maxy+1;y+=1)for(i=0;i<s[x][y].length;i+=1)void 0!==(currentPropLocation=o.PropLocations[s[x][y][i]]).drawResult&&null!==currentPropLocation.drawResult||(currentPropLocation.drawResult={visible:!1,x:0,y:0,w:0,h:0,a:0,sortvalue:0}),currentProp=o.Props[currentPropLocation[0]],a(currentPropLocation[1],currentPropLocation[2],currentProp.HeightScale,currentProp.Aspect,0,currentPropLocation.drawResult),currentPropLocation.drawResult.visible&&(currentPropLocation.drawResult.img=document.getElementById("image_"+currentProp.Image),currentPropLocation.drawResult.x=Math.floor(currentPropLocation.drawResult.x),currentPropLocation.drawResult.y=Math.floor(currentPropLocation.drawResult.y),currentPropLocation.drawResult.h=Math.floor(currentPropLocation.drawResult.h),currentPropLocation.drawResult.w=Math.floor(currentPropLocation.drawResult.w),DrawList.push(currentPropLocation.drawResult));for(racingZach.draw(e,a,DrawList),DrawList.sort((function(e,a){return e.sortvalue>a.sortvalue?1:-1})),i=CreatureGame.performance.maxRenderProps>DrawList.length?0:DrawList.length-CreatureGame.performance.maxRenderProps;i<DrawList.length;i+=1)e.globalAlpha=DrawList[i].a,void 0!==DrawList[i].flipH&&!0===DrawList[i].flipH?(e.setTransform(-1,0,0,1,DrawList[i].x+DrawList[i].w,DrawList[i].y+playerCamera.lookY),void 0!==DrawList[i].img.animDetails?DrawList[i].img.animDetails.draw(e,0,0,DrawList[i].w,DrawList[i].h):e.drawImage(DrawList[i].img,0,0,DrawList[i].w,DrawList[i].h)):void 0!==DrawList[i].img.animDetails?DrawList[i].img.animDetails.draw(e,DrawList[i].x,DrawList[i].y+playerCamera.lookY,DrawList[i].w,DrawList[i].h):e.drawImage(DrawList[i].img,DrawList[i].x,DrawList[i].y+playerCamera.lookY,DrawList[i].w,DrawList[i].h),e.setTransform(1,0,0,1,0,0);for(e.globalAlpha=1,R&&(!1===I.moveRight?(e.setTransform(-1,0,0,1,I.x+I.width,I.y+playerCamera.lookY),document.getElementById("image_falcon").animDetails.draw(e,0,0,I.width,I.height),e.setTransform(1,0,0,1,0,0)):document.getElementById("image_falcon").animDetails.draw(e,I.x,I.y,I.width,I.height,!1)),i=0;i<g.length;i+=1)e.globalAlpha=g[i].alpha,g[i].animDetails.draw(e,0,0,988,556);for(e.globalAlpha=1,n>0&&(e.fillStyle=r,e.globalAlpha=n,e.fillRect(0,0,988,556),e.globalAlpha=1),RacingPlayer.protectorActive&&e.drawImage(document.getElementById("image_horn"),Math.floor(S.x),Math.floor(S.y)),e.drawImage(document.getElementById("image_consolebg"),47,447),document.getElementById("image_anim_energyIcon").animDetails.draw(e,74,507,50,50),racerImageName="image_racer_"+powerManager.getCurrentRacerName(),R?racerImageName="image_falcon_distractor":RacingPlayer.protectorActive&&(racerImageName="image_rhino_protector"),drawFitImage(e,document.getElementById(racerImageName),0,0,450,250,583,462,158,76),e.globalAlpha=b,e.fillStyle="rgba(181,271,267,0.2)",e.strokeStyle="#5BABA7",e.lineWidth=5,e.fillRect(244,40,500,300),e.strokeRect(244,40,500,300),document.getElementById("image_anim_moveLeft").animDetails.draw(e,244,150,99,128,!1),document.getElementById("image_anim_moveRight").animDetails.draw(e,645,150,99,128,!1),e.globalAlpha=1,e.font="120pt DINE",e.fillStyle="white",e.textAlign="center",e.strokeStyle="black",e.lineWidth=5,v.showGo?(e.fillStyle="#84db9d",e.fillText("GO",494,250),e.strokeText("GO",494,250)):v.countdown>0&&v.countdown<3&&(e.fillText(Math.ceil(v.countdown).toString(),494,250),e.strokeText(Math.ceil(v.countdown).toString(),494,250)),e.fillStyle="#22325B",e.fillRect(4,155,86,21),e.fillStyle="#0EDB6B",e.fillRect(4,155,86*v.playerProgress,21),e.fillStyle="#912921",e.fillRect(4+86*v.zachProgress-2.5,155,5,21),e.drawImage(document.getElementById("image_minimap"),0,0),gradStep=PI2/RacingPlayer.Fuel.total,(A+=PI2*CreatureGame.dt)>PI2&&(A-=PI2),CreatureGame.frontContext.beginPath(),i=0;i<RacingPlayer.Fuel.total;i+=1)currentStep=A+gradStep*i,colorOffset=(Math.sin(currentStep)+1)/2*75,colorFill="rgba("+Math.round(135+colorOffset)+","+Math.round(217+colorOffset)+",255, 1)",CreatureGame.frontContext.moveTo(148+20.5*i,536),i<RacingPlayer.Fuel.available?canvasCircle(138+20.5*i,536,10,colorFill,"#D6D6D6",2):(needUpdate&&(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath(),needUpdate=!1),canvasCircle(138+20.5*i,536,10,"#001226","#D6D6D6",2));for(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),CreatureGame.frontContext.beginPath(),i=0;i<powerManager.fuelBurnEffectCount;i+=1)i>=RacingPlayer.Fuel.available&&(CreatureGame.frontContext.moveTo(148+20.5*i,536),canvasCircle(138+20.5*i,536,10,"rgba("+Math.floor(255*(powerManager.fuelBurnEffectCount-i))+",18,38,1)","#D6D6D6",2));if(CreatureGame.frontContext.fill(),CreatureGame.frontContext.stroke(),e.textAlign="end",e.fillStyle="#001226",e.font="26px badaboom",e.fillText(parseInt(RacingPlayer.currentVelocity,10).toString(),465,505),minutes=parseInt(w/60,10),seconds=parseInt(w-60*minutes,10),timeSeparator=seconds<10?":0":":",e.fillText(minutes+timeSeparator+seconds,385,505),e.font="20px badaboom",e.fillText("MPH",495,505),e.textAlign="start",CreatureGame.CurrentPowers.length>0){for(e.strokeStyle="#22325B",e.lineWidth=40,e.beginPath(),e.arc(838,556+P,50,Math.PI,1.5*Math.PI),e.stroke(),i=0;i<C.length;i+=1)C[i][0]<CreatureGame.CurrentPowers.length&&(e.beginPath(),e.moveTo(_[C[i][0]][0],_[C[i][0]][1]+P),e.lineTo(_[C[i][1]][0],_[C[i][1]][1]+P),e.stroke());for(i=0;i<CreatureGame.CurrentPowers.length;i+=1)button=$("#powerButton"+i)[0],bg=$(button).children(".powerBg")[0],fg=$(button).children("image")[0],power=AnimalPowers.special[CreatureGame.CurrentPowers[i]]||AnimalPowers.movement[CreatureGame.CurrentPowers[i]],RacingPlayer.Fuel.available<power.stats.Cost.value?bg.isDisabled||(bg.isDisabled=!0,bg.setAttribute("fill","#775555"),fg.setAttribute("opacity","0.2")):bg.isDisabled&&(bg.isDisabled=!1,bg.setAttribute("fill","#555555"),fg.setAttribute("opacity","1"));null!==c&&(progress=powerManager.getProgress(),startAngle=Math.PI+PI_ON_TWO,endAngle=startAngle+PI2*progress,index=c.getAttribute("data-index"),bg=$("#powerButton"+index+" .powerBg")[0],null!=(grad=document.getElementById("activeGradient"))&&(gradRadius=0,1-progress<.5?(gradRadius=CreatureGame.MathFunctions.lerp(2*(1-progress),100,0),document.getElementById("activeGradStop1").setAttribute("stop-color","#00edff")):(gradRadius=CreatureGame.MathFunctions.lerp(2*(1-progress-.5),0,100),document.getElementById("activeGradStop1").setAttribute("stop-color","#dd2222")),grad.setAttribute("r",gradRadius+"%")),null!=bg&&(progress>0?bg.setAttribute("fill","url(#activeGradient)"):(bg.setAttribute("fill",bg.isDisabled?"#775555":"#555555"),c.fg.setAttribute("opacity",bg.isDisabled?"0.2":"1"))),currentPowerPos=c.parentNode.transform.baseVal.getItem(0).matrix,e.strokeStyle=progress<.25?"rgba(200, 20, 20, 0.8)":"rgba(0, 195, 255, 0.8)",e.lineWidth=15,e.beginPath(),e.arc(currentPowerPos.e,currentPowerPos.f,parseInt(c.getAttribute("r"),10),startAngle,endAngle),e.stroke())}}}}var SPEED_DECREASE_MULTIPLIER=.5,DIFFICULTY_DISTANCE_1=65,DIFFICULTY_DISTANCE_2=120,SPEED_VARIATION_LENGTH=5,BOT_SPEED=90,BOT_GROUND_OFFSET=.1,BOT_SIZE={h:.7,a:1.11},ZACH_ACCEL=15,MAX_BOT_TIME=3,BOT_SPAWN_SQUARE_DIST=9e4,MIN_ATTACK_DIST=.2,LOOK_DIST=5,BOT_COLL_DIST=20,Position={x:0,y:0,h:0,aspect:0,rotation:0,flipImage:!1};function ZachEnemyPlayer(){"use strict";var e,a,t,r,n,i,o,s,l,u,c,m,p,g,d,h=null,f=null,y={},_=0,C=[],v=0,w=0,P=MAX_BOT_TIME,b=null,A=0,G=0,M=[0,0],x={winEvent:function(){CreatureGame.raceStatus.state="zachWin",app.sound.stop("carsound"),app.sound.stop("offroad"),app.sound.play("losesound")},getProgress:function(){return f.getRaceProgress(_)},reset:function(e){void 0!==e.PathBranches&&(f=new PathAnimation(e.PathBranches,null,x.winEvent,!1));var a=f.getPointAtTime(0);Position={x:4*a.x,y:4*a.y,h:1.5,aspect:400/300,rotation:0,flipImage:!1},x.updateMap(),v=0,_=0,A=0},getPreloadItems:function(){return{images:[{name:"zach_back_straight",src:"./assets/images/Animations/zach_back_straight.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_back_angle1L",src:"./assets/images/Animations/zach_back_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_back_angle2L",src:"./assets/images/Animations/zach_back_moar_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_straight",src:"./assets/images/Animations/zach_straight.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_angle1L",src:"./assets/images/Animations/zach_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_angle2L",src:"./assets/images/Animations/zach_moar_angled.png",anim:{direction:"y",frames:3,time:.2}},{name:"zach_bot",src:"./assets/images/Zach/zachbot.png"}]}},updateMap:function(){null===b&&(b=document.getElementById("zachRepresentation")),b.setAttribute("transform","translate("+Position.x/4+","+Position.y/4+") rotate("+Position.rotation*(180/Math.PI)+")"),document.getElementById("zachCircle").setAttribute("fill","red")},update:function(){for(e=f.getRaceProgress(_),a=RacingPlayer.animation.getRaceProgress(RacingPlayer.currentTime),t=f.getRaceLength(),r=(e-a)*t,P-=CreatureGame.dt,n=!(e>MIN_ATTACK_DIST&&P<.6),P<0&&(P=MAX_BOT_TIME,e>MIN_ATTACK_DIST&&"zach"===CreatureGame.raceStatus.leader&&(i=[RacingPlayer.position.x-Position.x,RacingPlayer.position.y-Position.y],(o=Math.pow(i[0],2)+Math.pow(i[1],2))<BOT_SPAWN_SQUARE_DIST&&(i[0]/=o,i[1]/=o,C.push(function(e){tutorialManager.trigger("zachbot");var a={},t=100,r=e,n=[Position.x,Position.y],i=document.getElementById("image_zach_bot"),o=document.getElementById("zachBotsRepresentation"),s=document.createElementNS(svgns,"circle"),l=null,u=0,c=0;return s.setAttribute("cx","0"),s.setAttribute("cy","0"),s.setAttribute("r","5"),s.setAttribute("fill","yellow"),s.setAttribute("stroke","none"),o.appendChild(s),{update:function(){t<0||(n[0]+=r[0]*BOT_SPEED*CreatureGame.dt,n[1]+=r[1]*BOT_SPEED*CreatureGame.dt,t-=1,l=[n[0]-RacingPlayer.position.x,n[1]-RacingPlayer.position.y],(u=Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2)))<BOT_COLL_DIST&&(l[0]/=u,l[1]/=u,c=-Math.atan2(l[0],l[1]),Math.abs(CreatureGame.MathFunctions.rotationDifference(c,RacingPlayer.position.rotation))<1&&(RacingPlayer.onCollision(["zachbot",0,n[0],n[1]]),app.sound.play("oddwoosh")),t=-1),null!==s&&s.setAttribute("transform","translate("+n[0]/4+","+n[1]/4+")"))},draw:function(e,r,o){t<0||(a=r(n[0],n[1],BOT_SIZE.h,BOT_SIZE.a,BOT_GROUND_OFFSET,a)).visible&&(a.img=i,o.push(a))},isDead:function(){return null!==s&&t<0&&o.removeChild(s),t<0}}}(i))))),s=0;s<C.length;s+=1)C[s].update(),C[s].isDead()&&C.splice(s,1);if(null!==f){if(x.calculateSpeed(r),_+=CreatureGame.dt*v,l=f.getMaxTime(),u=f.getPointAtTime(_/l),Position.x=4*u.x,Position.y=4*u.y,_>l&&(_-=l,l=f.getMaxTime(),u=f.getPointAtTime(_/l),Position.x=4*u.x,Position.y=4*u.y),_+LOOK_DIST<=l){for(c=f.getPointAtTime((_+LOOK_DIST)/l),m=[c.x-u.x,c.y-u.y],p=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),M=[-m[1]/p,m[0]/p],Position.rotation=-Math.atan2(m[0],m[1]),g=RacingPlayer.position.rotation;g>Position.rotation+Math.PI;)g-=2*Math.PI;for(;g<Position.rotation-Math.PI;)g+=2*Math.PI;d=Position.rotation-g,Math.abs(d)<.3?h=document.getElementById(n?"image_zach_back_straight":"image_zach_straight"):Math.abs(d)<.6?d<0?(h=document.getElementById(n?"image_zach_back_angle1L":"image_zach_angle1L"),Position.flipImage=!1):(h=document.getElementById(n?"image_zach_back_angle1L":"image_zach_angle1L"),Position.flipImage=!0):d<0?(h=document.getElementById(n?"image_zach_back_angle2L":"image_zach_angle2L"),Position.flipImage=!1):(h=document.getElementById(n?"image_zach_back_angle2L":"image_zach_angle2L"),Position.flipImage=!0)}A+=v*CreatureGame.dt*.02,G=Math.sin(A)*RacingPlayer.maxStrafingDistance*.4,Position.x+=M[0]*G,Position.y+=M[1]*G,h.animDetails.update(),x.updateMap()}},draw:function(e,a,t){for(null!==h&&(y=a(Position.x,Position.y,Position.h,Position.aspect,0,y)).visible&&(y.img=h,y.flipH=Position.flipImage,t.push(y)),s=0;s<C.length;s+=1)C[s].draw(e,a,t)},onSkunkAttack:function(){i=[RacingPlayer.position.x-Position.x,RacingPlayer.position.y-Position.y],(o=Math.pow(i[0],2)+Math.pow(i[1],2))<BOT_SPAWN_SQUARE_DIST&&(v*=SPEED_DECREASE_MULTIPLIER)},onFalconDistractor:function(){v*=SPEED_DECREASE_MULTIPLIER},calculateSpeed:function(e){var a,t,r=RacingPlayer.hazards.none;for(s=0;s<CreatureGame.levelInfo.Hazards.length;s+=1)"impact"!==RacingPlayer.hazards[CreatureGame.levelInfo.Hazards[s][0]].type&&Math.sqrt(Math.pow(CreatureGame.levelInfo.Hazards[s][2]-Position.x,2)+Math.pow(CreatureGame.levelInfo.Hazards[s][3]-Position.y,2))<4*CreatureGame.levelInfo.Hazards[s][1]&&(r=RacingPlayer.hazards[CreatureGame.levelInfo.Hazards[s][0]]);w=DEFAULT_VELOCITY+DEFAULT_STATS[r.boost||"Run"]*VELOCITY_RANGE,w*=e<0?e>-DIFFICULTY_DISTANCE_1?1:e>-DIFFICULTY_DISTANCE_2?1.03:1.1:e<DIFFICULTY_DISTANCE_1?1:e<DIFFICULTY_DISTANCE_2?.9:.5,a=1,a-=.06*CreatureGame.RacerWeight,t=(w+Math.cos(A)*SPEED_VARIATION_LENGTH)*a,v<t?v+=CreatureGame.dt*ZACH_ACCEL:v>t&&(v-=CreatureGame.dt*ZACH_ACCEL)}};return x}function SceneManager(){"use strict";var e={},a=null,t=0,r="idle",n=1,i=1,o=[50,490,700,45],s=[{duration:2,aviva_frame:0,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:1,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:2,channel_frame:-1,asset_change:!1},{duration:.1,aviva_frame:3,channel_frame:0,asset_change:!1},{duration:.1,aviva_frame:0,channel_frame:1,asset_change:!0}],l=["image_loading_racer_cheetah","image_loading_racer_falcon","image_loading_racer_pronghorn","image_loading_racer_skunk","image_loading_racer_tortoise"],u=0,c=0,m=Math.floor(Math.random()*l.length);this.addScene=function(a){e[a.name]=a},this.reset=function(){if(null!==a){var e=a.name;a.uninit(),this.changeScene(e)}},this.preloadScene=function(){$("#splashImage").hide(),$("#svgCanvas").hide(),r="loading",t=0,this.draw(CreatureGame.frontContext)},this.changeScene=function(o){function s(){r="delay",i=n=1}if(null!==a&&a.uninit(),CreatureGame.audio.stopAllSounds(),void 0!==(a=e[o]).getPreloadItems){var l=a.getPreloadItems();CreatureGame.PreLoadFromList(l.images,l.sounds,(function(){s()}),(function(e){t=e}))}else void 0!==a.preloadItems&&null!==a.preloadItems?CreatureGame.PreLoadFromList(a.preloadItems.images,a.preloadItems.sounds,(function(){s()}),(function(e){t=e})):s()},this.update=function(){if("idle"===r&&a.update(),"delay"===r&&(n-=CreatureGame.dt)<0&&(a.init(),r="idle",$("#svgCanvas").show()),"loading"===r||"delay"===r){if((c+=1.5*CreatureGame.dt)>s[u].duration&&(c=0,(u+=1)>=s.length&&(u=0),s[u].asset_change))for(var e=m;e===m;)m=Math.floor(Math.random()*l.length);document.getElementById("image_loadingAvivaAnim").animDetails.setFrame(s[u].aviva_frame),s[u].channel_frame>-1&&document.getElementById("image_staticAnim").animDetails.setFrame(s[u].channel_frame)}},this.draw=function(e){if("loading"===r||"delay"===r){CreatureGame.frontContext.setTransform(1,0,0,1,0,0),CreatureGame.frontContext.fillStyle="black",CreatureGame.frontContext.fillRect(0,0,988,556),e.drawImage(document.getElementById("image_loadingBackground"),0,0,988,566);var c=document.getElementById(l[m]);drawFitImage(e,c,0,0,c.naturalWidth,c.naturalHeight,160,45,476,268),s[u].channel_frame>-1&&document.getElementById("image_staticAnim").animDetails.draw(e,149,35,496,288),document.getElementById("image_loadingAvivaAnim").animDetails.draw(e,675,75,285,500),"delay"===r&&(e.globalAlpha=n/i),CreatureGame.frontContext.fillStyle="#222222",e.strokeStyle="black",e.lineWidth=2,CreatureGame.frontContext.fillRect(o[0],o[1],o[2],o[3]),CreatureGame.frontContext.strokeRect(o[0],o[1],o[2],o[3]),CreatureGame.frontContext.fillStyle="#005500",CreatureGame.frontContext.textAlign="center",CreatureGame.frontContext.font="26pt Calibri",CreatureGame.frontContext.fillText("Loading...",o[0]+o[2]/2,523),CreatureGame.frontContext.fillStyle="green",CreatureGame.frontContext.fillRect(o[0],o[1],o[2]*t,o[3]),e.save(),e.beginPath(),e.moveTo(o[0],o[1]),e.lineTo(o[0]+o[2]*t,o[1]),e.lineTo(o[0]+o[2]*t,o[1]+o[3]),e.lineTo(o[0],o[1]+o[3]),e.closePath(),e.clip(),CreatureGame.frontContext.fillStyle="white",CreatureGame.frontContext.fillText("Loading...",o[0]+o[2]/2,523),e.restore(),e.globalAlpha=1}else"idle"===r&&a.draw(e);CreatureGame.support.desktop&&$("#debugWatchBox").is(":visible")&&(CreatureGame.frontContext.setTransform(1,0,0,1,0,0),CreatureGame.frontContext.fillStyle="white",CreatureGame.font="10pt badaboom",CreatureGame.frontContext.fillText(Math.round(1/CreatureGame.dt)+"fps",800,40))}}function createSplashScene(){"use strict";var e={x:CreatureGame.FrameSize.x-200,y:0,width:200,height:200,image:"image_logo"},a={x:0,y:0,width:CreatureGame.FrameSize.x,height:CreatureGame.FrameSize.y,image:"image_splash"},t={x:CreatureGame.FrameSize.x-154,y:CreatureGame.FrameSize.y-120,width:154,height:120,imageEnabled:"./assets/images/Play_Button.png",imageDisabled:"./assets/images/Play_Button_Pressed.png"},r={x:350,y:100,fontSize:72,text:"Creature Mobile"},n={name:"splashScene",preloadItems:{images:[{name:"splash",src:"./assets/images/Splash.png"},{name:"logo",src:"./assets/images/Logo.png"}],alternateSounds:[{name:"setup_intro",path:"setup_intro",type:"dialog"},{name:"click",path:"click",type:"effect"},{name:"labintro",path:"labintro",type:"dialog"},{name:"powersintro",path:"powersintro",type:"dialog"},{name:"labtutorial_snow",path:"lab_tuts_levelconditions",type:"dialog"},{name:"labtutorial_next",path:"lab_tuts_hitnext",type:"dialog"},{name:"labtutorial_powers",path:"lab_tuts_powers",type:"dialog"},{name:"labtutorial_remove",path:"lab_tuts_remove",type:"dialog"},{name:"labtutorial_begin",path:"lab_tuts_begin",type:"dialog"},{name:"lab_tuts_powerstats",path:"lab_tuts_powerstats",type:"dialog"},{name:"lab_description_weight",path:"lab_description_weight",type:"dialog"},{name:"lab_description_cost",path:"lab_description_cost",type:"dialog"},{name:"lab_description_duration",path:"lab_description_duration",type:"dialog"},{name:"lab_tuts_movement_attachments",path:"lab_tuts_movement_attachments",type:"dialog"},{name:"lab_tuts_defensive_attachments",path:"lab_tuts_defensive_attachments",type:"dialog"},{name:"lab_tuts_emptyslot",path:"lab_tuts_emptyslot",type:"dialog"},{name:"racer_too_heavy",path:"racer_too_heavy",type:"dialog"},{name:"attachment_removed",path:"attachment_removed",type:"dialog"},{name:"lets_race",path:"lets_race",type:"dialog"},{name:"add_1",path:"added",type:"dialog"},{name:"add_2",path:"you_got_it",type:"dialog"},{name:"add_3",path:"racer_looks_good",type:"dialog"},{name:"aviva_react_1",path:"aviva_react_1",type:"effect"},{name:"aviva_react_2",path:"aviva_react_2",type:"effect"},{name:"aviva_react_3",path:"aviva_react_3",type:"effect"},{name:"aviva_react_4",path:"aviva_react_4",type:"effect"},{name:"race_bg",path:"badracingmusic",type:"music"},{name:"playerpass",path:"pass2",type:"effect"},{name:"zachpass",path:"pass1",type:"effect"},{name:"cool",path:"thisiscool",type:"dialog"},{name:"carsound",path:"carsound",type:"effect"},{name:"offroad",path:"offroad",type:"effect"},{name:"smart",path:"smart",type:"dialog"},{name:"winsound",path:"winsound",type:"dialog"},{name:"losesound",path:"losesound",type:"dialog"},{name:"take_lead_1",path:"see_ya_zach",type:"dialog"},{name:"take_lead_2",path:"youre_winning",type:"dialog"},{name:"take_lead_3",path:"woo",type:"dialog"},{name:"lose_lead",path:"zach_leading",type:"dialog"},{name:"tutorial_move",path:"tutorial_move",type:"dialog"},{name:"tutorial_power",path:"tutorial_power",type:"dialog"},{name:"tutorial_power_reminder",path:"tutorial_power_reminder",type:"dialog"},{name:"tutorial_region",path:"tutorial_region",type:"dialog"},{name:"tutorial_defense",path:"tutorial_defense",type:"dialog"},{name:"tutorial_offroad",path:"tutorial_wall",type:"dialog"},{name:"did_you_pick_321GO",path:"did_you_pick_321GO",type:"dialog"},{name:"3",path:"3",type:"dialog"},{name:"2",path:"2",type:"dialog"},{name:"1",path:"1",type:"dialog"},{name:"GO",path:"GO",type:"dialog"},{name:"watch_out_bots",path:"watch_out_bots",type:"dialog"},{name:"falcon_dive",path:"falcon2",type:"effect"},{name:"bot_hit",path:"oddwoosh"},{name:"activate_Cheetah2",path:"Cheetah2",type:"effect"},{name:"activate_otter",path:"otter",type:"effect"},{name:"activate_hummingbird",path:"hummingbird",type:"effect"},{name:"activate_falcon2",path:"falcon2",type:"effect"},{name:"activate_dolphin",path:"dolphin",type:"effect"},{name:"activate_skunk",path:"skunk",type:"effect"},{name:"activate_bison",path:"bison",type:"effect"}]},init:function(){var e,a=document.getElementById("svgCanvas"),i=document.createElementNS(svgns,"text");i.setAttribute("x",r.x.toString()),i.setAttribute("y",r.y.toString()),i.setAttribute("font-size",r.fontSize+"px"),i.setAttribute("fill","white"),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","2.0"),i.setAttribute("style","font-family: badaboom"),i.textContent=r.text,a.appendChild(i),e=createButton(t.x,t.y,t.width,t.height,a,{sound:"click",up:t.imageEnabled,down:t.imageDisabled,event:function(){app.sound.play("click",(function(){CreatureGame.support.webAudio||function(){var e;for(e=0;e<n.preloadItems.alternateSounds.length;e+=1)CreatureGame.audio.loadSound(n.preloadItems.alternateSounds[e].name,n.preloadItems.alternateSounds[e].path,n.preloadItems.alternateSounds[e].type,1)}(),CreatureGame.sceneManager.preloadScene(),app.sound.preload(app.labAudio,(function(){CreatureGame.sceneManager.changeScene("labScene")})),$(e).hide(),$(i).hide()}))}}),$(document.getElementById("help_toggle_button")).hide()},uninit:function(){$(document.getElementById("help_toggle_button")).show()},update:function(){},draw:function(r){CreatureGame.support.iPhone&&(e={x:CreatureGame.FrameSize.x-200,y:0,width:200,height:200,image:"image_logo"},a={x:0,y:0,width:CreatureGame.FrameSize.x,height:CreatureGame.FrameSize.y,image:"image_splash"},t={x:CreatureGame.FrameSize.x-154,y:CreatureGame.FrameSize.y-120,width:154,height:120,imageEnabled:"./assets/images/Play_Button.png",imageDisabled:"./assets/images/Play_Button_Pressed.png"}),r.drawImage(document.getElementById(a.image),a.x,a.y,a.width,a.height),r.drawImage(document.getElementById(e.image),e.x,e.y,e.width,e.height)}};return n}function createGameTimer(e,a){"use strict";if(!isNaN(e)&&null!=a){var t=null;return{start:function(){r()},stop:function(){clearTimeout(t)}}}function r(){t=setTimeout(r,e),a()}}var tutorialFlashAreas={levelPicker:{completed:!1,pathId:0},next:{completed:!1,pathId:1},animalPicker:{completed:!1,pathId:4},animalTabs:{completed:!1,pathId:2},addButton:{completed:!1,pathId:3},go:{completed:!1,pathId:1,condition:function(){"use strict";return 4===$(".powerSlot[data-speedpower]").length}}},tutorialSequence={left:["levelPicker","next"],right:["addButton","animalPicker","animalTabs","go"],racing:[]},tutorialEvents={move:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_move",tutorialManager.playNext)}},moveReminder:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_move",tutorialManager.playNext),showControlsReminder(),tutorialEvents.moveReminder.triggered=!1}},power:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_power",tutorialManager.playNext)}},powerReminder:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_power_reminder",tutorialManager.playNext),tutorialManager.powerNotificationRequired=!1}},offroad:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_offroad",tutorialManager.playNext)}},defense:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_defense",tutorialManager.playNext)}},terrain:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("tutorial_region",tutorialManager.playNext)}},zachbot:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playDialog("watch_out_bots",tutorialManager.playNext)}},levels_intro:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_hitnext",tutorialManager.playNext)},avivaTalks:!0},levels_oncycle:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_levelconditions",tutorialManager.playNext)},avivaTalks:!0},levels_next:{triggered:!1,trigger:function(){"use strict";setTimeout(tutorialManager.playNext,10)},avivaTalks:!0},powers_intro:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_powers",tutorialManager.playNext)},avivaTalks:!0},powers_cycle:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_powerstats",tutorialManager.playNext)},avivaTalks:!0},powers_full:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_begin",tutorialManager.playNext)},avivaTalks:!0},powers_remove:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("attachment_removed",tutorialManager.playNext)},avivaTalks:!0},powers_add:{first:!1,triggered:!1,trigger:function(){"use strict";tutorialEvents.powers_add.first?CreatureGame.audio.playAudio("add_"+Math.ceil(3*Math.random()),tutorialManager.playNext):CreatureGame.audio.playAudio("lab_tuts_remove",tutorialManager.playNext),tutorialEvents.powers_add.first=!0,tutorialEvents.powers_add.triggered=!1},avivaTalks:!0},description_weight:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_weight",tutorialManager.playNext)},avivaTalks:!0},description_cost:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_cost",tutorialManager.playNext)},avivaTalks:!0},description_duration:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_description_duration",tutorialManager.playNext)},avivaTalks:!0},left_tab:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_movement_attachments",tutorialManager.playNext)},avivaTalks:!0},right_tab:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_defensive_attachments",tutorialManager.playNext)},avivaTalks:!0},select_empty:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("lab_tuts_emptyslot",tutorialManager.playNext)},avivaTalks:!0},racer_overweight:{triggered:!1,trigger:function(){"use strict";CreatureGame.audio.playAudio("racer_too_heavy",tutorialManager.playNext)},avivaTalks:!0},setup_intro:{triggered:!1,trigger:function(){"use strict";app.sound.play("setup_intro",tutorialManager.playNext)},avivaTalks:!1}},tutorialManager={elapsedTime:0,timeSinceMovement:0,timeSincePower:0,timeBeforeNotification:30,moveNotificationRequired:!0,powerNotificationRequired:!0,tutorialQueue:[],ready:!0,flashTimer:0,showFlash:!1,markTutorialFlashComplete:function(e){"use strict";tutorialFlashAreas[e].completed=!0},updateTutorialFlash:function(e){"use strict";var a,t=null;for(tutorialManager.flashTimer+=CreatureGame.dt,tutorialManager.flashTimer>.2&&(tutorialManager.flashTimer=0,tutorialManager.showFlash=!tutorialManager.showFlash),a=0;a<tutorialSequence[e].length;a+=1)if(!tutorialFlashAreas[tutorialSequence[e][a]].completed){t=tutorialFlashAreas[tutorialSequence[e][a]];break}if($("#lab_tutorial_highlights .tutorialVisible").each((function(e,a){null!==t&&a.id==="lab_tutorial_flash_"+t.pathId||(a.className.baseVal="")})),null!==t){if(void 0!==t.condition&&!t.condition())return void(document.getElementById("lab_tutorial_flash_"+t.pathId).className.baseVal="");document.getElementById("lab_tutorial_flash_"+t.pathId).className.baseVal=tutorialManager.showFlash?"tutorialVisible":""}},trigger:function(e){"use strict";if(void 0!==tutorialEvents[e]&&!tutorialEvents[e].triggered)if(tutorialManager.ready)tutorialManager.ready=!1,tutorialEvents[e].triggered=!0,tutorialEvents[e].trigger(),tutorialEvents[e].avivaTalks&&CreatureGame.labAviva.talk(!0);else{var a;for(a=0;a<tutorialManager.tutorialQueue.length;a+=1)if(tutorialManager.tutorialQueue[a]===e)return;tutorialManager.tutorialQueue.push(e)}},update:function(){"use strict";tutorialManager.timeSinceMovement+=CreatureGame.dt,(rightControl()||leftControl())&&(tutorialManager.timeSinceMovement=0),tutorialManager.timeSinceMovement>tutorialManager.timeBeforeNotification&&(tutorialManager.timeSinceMovement=0,tutorialManager.trigger("moveReminder")),tutorialManager.timeSincePower+=CreatureGame.dt,tutorialManager.timeSincePower>tutorialManager.timeBeforeNotification&&(tutorialManager.timeSincePower=0,RacingPlayer.Fuel.available>4&&tutorialManager.trigger("powerReminder"))},playNext:function(){"use strict";CreatureGame.labAviva.talk(!1),tutorialManager.ready=!0,tutorialManager.tutorialQueue.length>0&&(tutorialManager.trigger(tutorialManager.tutorialQueue[0]),tutorialManager.tutorialQueue.splice(0,1))},stopAllSounds:function(){"use strict";tutorialManager.tutorialQueue=[],CreatureGame.audio.stopSound("labtutorial_snow"),CreatureGame.audio.stopSound("labtutorial_next"),CreatureGame.audio.stopSound("labtutorial_powers"),CreatureGame.audio.stopSound("labtutorial_remove"),CreatureGame.audio.stopSound("labtutorial_begin")}};function removeTouchEvents(e){"use strict";$(e).unbind("contextmenu"),$(e).unbind("mousedown"),$(e).unbind("mouseup"),$(e).unbind("mousemove"),$(e).unbind("mouseleave"),$(e).unbind("click"),$(e).unbind("touchstart"),$(e).unbind("touchend"),$(e).unbind("touchmove")}function touchInit(){"use strict";CreatureGame.support.iOS&&(document.ontouchmove=function(e){})}function touchEvents(e){"use strict";var a,t={item:null,down:function(){},up:function(){},move:function(){},stopEvent:!0,allowMultiple:!1,allowUpWithoutDown:!0},r=!1,n=!1,i=null,o=null;for(a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);void 0!==t.item&&null!==t.item&&(removeTouchEvents(e.item),t.item.TouchEventInfo=t,$(t.item).on("contextmenu",(function(){return!1})),CreatureGame.support.desktop&&($(t.item).on("mousedown",(function(e){(!n&&!r||t.allowMultiple)&&(n=!0,t.down(e,this),t.stopEvent&&e.stopPropagation())})),$(t.item).on("mouseup",(function(e){(n||t.allowUpWithoutDown)&&(n=!1,t.up(e,this),t.stopEvent&&e.stopPropagation())})),$(t.item).on("mouseleave",(function(e){n&&(n=!1,t.up(e,this),t.stopEvent&&e.stopPropagation())})),$(t.item).on("mousemove",(function(e){if(null!==i){var a=e.pageX-i.pageX,r=e.pageY-i.pageY;0===a&&0===r||t.move(e,a,r,this)}i=e,t.stopEvent&&e.stopPropagation()}))),CreatureGame.support.mobile&&($(t.item).on("click",(function(e){e.preventDefault()})),$(t.item).on("touchstart",(function(e){e.preventDefault(),(!n&&!r||t.allowMultiple)&&(r=!0,t.down(e,this),o=null,t.stopEvent&&e.stopPropagation())})),$(t.item).on("touchend",(function(e){e.preventDefault(),(r||t.allowUpWithoutDown)&&(r=!1,t.up(e,this),t.stopEvent&&e.stopPropagation())})),$(t.item).on("touchmove",(function(e){var a,r,n=e.originalEvent;n.preventDefault();try{null!==o&&(a=n.touches[0].pageX-o[0],r=n.touches[0].pageY-o[1],0===a&&0===r||t.move(n,a,r,this)),o=[n.touches[0].pageX,n.touches[0].pageY]}catch(e){}t.stopEvent&&n.stopPropagation()}))))}function createButton(e,a,t,r,n,i){"use strict";var o,s,l,u={up:"",down:"",event:function(){},sound:null,text:null,extraRadius:0,allowUpWithoutDown:!0},c=document.createElementNS(svgns,"g"),m=document.createElementNS(svgns,"image"),p=document.createElementNS(svgns,"image");for(o in i)i.hasOwnProperty(o)&&(u[o]=i[o]);return c.className.baseVal="gameButton",m.setAttributeNS(xlinkns,"href",u.up),p.setAttributeNS(xlinkns,"href",u.down),m.setAttribute("preserveAspectRatio","none"),p.setAttribute("preserveAspectRatio","none"),c.setAttribute("transform","translate("+e+","+a+")"),m.setAttribute("x","0"),m.setAttribute("class","upimg"),m.setAttribute("y","0"),m.setAttribute("width",t),m.setAttribute("height",r),p.setAttribute("x","0"),p.setAttribute("class","downimg"),p.setAttribute("y","0"),p.setAttribute("width",t),p.setAttribute("height",r),u.extraRadius>0&&((s=document.createElementNS(svgns,"circle")).setAttribute("fill","rgba(0,0,0,0)"),s.setAttribute("r",u.extraRadius.toString()),s.setAttribute("cx",(t/2).toString()),s.setAttribute("cy",(r/2).toString()),c.appendChild(s)),l=null,null!==u.text&&((l=document.createElementNS(svgns,"text")).setAttribute("x",(t/2).toString()),l.setAttribute("y","40"),l.setAttribute("font-size","30"),l.setAttribute("fill","white"),l.setAttribute("stroke","black"),l.setAttribute("stroke-width","0.5"),l.setAttribute("text-anchor","middle"),l.textContent=u.text),touchEvents({item:c,down:function(){!1===goStart&&(m.setAttribute("style","display:none;"),p.setAttribute("style",""))},up:function(){!1===goStart&&(p.setAttribute("style","display:none;"),m.setAttribute("style",""),null!==u.sound&&app.sound.play(u.sound),u.event())},allowUpWithoutDown:u.allowUpWithoutDown}),n.appendChild(c),c.appendChild(p),c.appendChild(m),l&&c.appendChild(l),c.setText=function(e){l.textContent=e},c}function createSelectionBox(e,a,t,r,n,i){"use strict";var o,s,l,u,c,m,p,g,d,h,f,y={entries:[],title:"",titleAlign:"",onchange:function(){},swipeAreaCallback:function(){}},_=0,C=null,v=!1,w=null,P=0,b=!1;for(o in i)i.hasOwnProperty(o)&&(y[o]=i[o]);function A(){var e,a,t=[],r=$(".powerSlot");for(f=0;f<y.entries.length;f+=1){for(a=!1,e=0;e<r.length&&!a;e+=1)y.entries[f]===r[e].getAttribute("data-speedpower")&&(a=!0);a||t.push(y.entries[f])}return t}function G(){b||goStart||(tutorialManager.markTutorialFlashComplete(v?"animalPicker":"levelPicker"),isAvivaTalking()||(v?tutorialManager.trigger("powers_cycle"):tutorialManager.trigger("levels_oncycle")),app.sound.play("click"),(h=A()).length<1||((_-=1)<0&&(_=h.length-1),v?(d=AnimalPowers.special[h[_]]||AnimalPowers.movement[h[_]],u.textContent=d.displayName):u.textContent=h[_],y.onchange(h[_],y.entries!==i.entries)))}function M(){b||goStart||(tutorialManager.markTutorialFlashComplete(v?"animalPicker":"levelPicker"),isAvivaTalking()||(v?tutorialManager.trigger("powers_cycle"):tutorialManager.trigger("levels_oncycle")),app.sound.play("click"),(h=A()).length<1||((_+=1)>h.length-1&&(_=0),v?(d=AnimalPowers.special[h[_]]||AnimalPowers.movement[h[_]],u.textContent=d.displayName):u.textContent=h[_],y.onchange(h[_],y.entries!==i.entries)))}return s=y.entries,(l=document.createElementNS(svgns,"g")).setAttribute("transform","translate("+e+","+a+")"),(u=document.createElementNS(svgns,"text")).setAttribute("x",(t/2).toString()),u.setAttribute("y",(r/2+14).toString()),u.setAttribute("font-size","24px"),u.setAttribute("text-anchor","middle"),u.setAttribute("fill","black"),u.setAttribute("stroke","none"),u.setAttribute("transform","translate(0,0)"),""!==y.title&&((c=document.createElementNS(svgns,"text")).setAttribute("x","20"),c.setAttribute("y","20"),c.setAttribute("font-size","24px"),c.setAttribute("fill","white"),c.setAttribute("stroke","black"),c.setAttribute("stroke-width","0.5"),c.setAttribute("style","font-family: badaboom"),c.textContent=y.title,"right"===y.titleAlign&&(c.setAttribute("text-anchor","end"),c.setAttribute("x",(t-32).toString())),l.appendChild(c)),void 0!==y.tabs&&y.tabs.length>1&&(C=y.page2Entries,v=!0,w=document.getElementById("power_select_background"),(m=document.createElementNS(svgns,"rect")).setAttribute("x","0"),m.setAttribute("y","-45"),m.setAttribute("width","125"),m.setAttribute("height","64"),m.setAttribute("fill","rgba(0,0,255,0)"),m.setAttribute("stroke","none"),(p=document.createElementNS(svgns,"rect")).setAttribute("x","125"),p.setAttribute("y","-45"),p.setAttribute("width","125"),p.setAttribute("height","64"),p.setAttribute("fill","rgba(255,0,0,0)"),p.setAttribute("stroke","none"),l.appendChild(m),l.appendChild(p),touchEvents({item:m,down:function(e,a){!1===goStart&&(isAvivaTalking()||tutorialManager.trigger("left_tab"),app.sound.play("click"),w.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_move.png"),y.entries=s,l.changeTo(y.entries[0]))}}),touchEvents({item:p,down:function(e,a){!1===goStart&&(isAvivaTalking()||tutorialManager.trigger("right_tab"),tutorialManager.markTutorialFlashComplete("animalTabs"),app.sound.play("click"),w.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_defend.png"),y.entries=C,l.changeTo(y.entries[0]))}})),v?(d=AnimalPowers.special[y.entries[0]]||AnimalPowers.movement[y.entries[0]],u.textContent=d.displayName):u.textContent=y.entries[0],l.appendChild(u),n.appendChild(l),(g=document.createElementNS(svgns,"rect")).setAttribute("x","-20"),g.setAttribute("y","18"),g.setAttribute("width","290"),g.setAttribute("height","260"),g.setAttribute("fill","rgba(0,255,255,0.0)"),l.appendChild(g),touchEvents({item:g,down:function(e,a){P=0,b=!0,u.transform.baseVal.getItem(0).matrix.e=0},move:function(e,a,t,r){b&&(P+=a,P=CreatureGame.MathFunctions.clamp(P,-80,80),u.transform.baseVal.getItem(0).matrix.e=P/3)},up:function(e,a){b=!1,u.transform.baseVal.getItem(0).matrix.e=0,P>15?G():P<-15?M():y.swipeAreaCallback()}}),createButton(-18,13,30,57,l,{up:"./assets/images/LabAssets/arrow_left.png",down:"./assets/images/LabAssets/arrow_left_press.png",event:G,extraRadius:40,allowUpWithoutDown:!1}),createButton(235,13,30,57,l,{up:"./assets/images/LabAssets/arrow_right.png",down:"./assets/images/LabAssets/arrow_right_press.png",event:M,extraRadius:40,allowUpWithoutDown:!1}),y.onchange(y.entries[_],y.entries!==i.entries),l.changeTo=function(e,a){if(a){for(f=0;f<s.length;f+=1)if(s[f]===e)return _=f,y.entries=s,w.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_move.png"),v?(d=AnimalPowers.special[s[_]]||AnimalPowers.movement[s[_]],u.textContent=d.displayName):u.textContent=s[_],void y.onchange(s[_],y.entries!==i.entries);for(f=0;f<C.length;f+=1)if(C[f]===e)return _=f,y.entries=C,w.setAttributeNS(xlinkns,"href","./assets/images/LabAssets/creature_select_defend.png"),v?(d=AnimalPowers.special[C[_]]||AnimalPowers.movement[C[_]],u.textContent=d.displayName):u.textContent=C[_],void y.onchange(C[_],y.entries!==i.entries)}else{var t=A();for(f=0;f<y.entries.length;f+=1)if(t[f]===e)return _=f,v?(d=AnimalPowers.special[t[_]]||AnimalPowers.movement[t[_]],u.textContent=d.displayName):u.textContent=t[_],void y.onchange(t[_],y.entries!==i.entries)}_=0,h=A(),v?(d=AnimalPowers.special[h[_]]||AnimalPowers.movement[h[_]]||{displayName:"None Available"},u.textContent=d.displayName):u.textContent=h[_]||"None Available",y.onchange(h[_],y.entries!==i.entries)},l}function canvasCircle(e,a,t,r,n,i){"use strict";CreatureGame.frontContext.lineWidth=i||1,CreatureGame.frontContext.arc(e,a,t,0,2*Math.PI),void 0!==r&&(CreatureGame.frontContext.fillStyle=r||"#000000"),void 0!==n&&(CreatureGame.frontContext.strokeStyle=n||"#000000")}!function(){var e=include("springroll.Application"),a=include("springroll.Sound"),t=new e({name:"creatureMobile",canvasId:"GameCanvas",configPath:"./assets/config/config.json",display:include("springroll.native.NativeDisplay"),displayOptions:{clearView:!0},preload:[{name:"loadingBackground",src:"./assets/images/AvivaLoading2.png"},{name:"loadingAvivaAnim",src:"./assets/images/Animations/Aviva_loading_285x500.png",anim:{frames:4,direction:"x",time:.4,startPaused:!0}},{name:"staticAnim",src:"./assets/images/Animations/channel_change248x144.png",anim:{frames:2,direction:"y",time:.2,startPaused:!0}},{name:"loading_racer_cheetah",src:"./assets/images/Racers/cheetah.png"},{name:"loading_racer_falcon",src:"./assets/images/Racers/falcon.png"},{name:"loading_racer_pronghorn",src:"./assets/images/Racers/pronghorn.png"},{name:"loading_racer_skunk",src:"./assets/images/Racers/skunk.png"},{name:"loading_racer_tortoise",src:"./assets/images/Racers/tortoise.png"},{name:"splash",src:"./assets/images/Splash.png"},{name:"logo",src:"./assets/images/Logo.png"}]});t.on("init",(function(){t.gamePaused=!1,t.start=!1,t.voPlayer=this.voPlayer,t.sound=a.instance,t.levels=this.config.levels,t.onresize=!1,t.sound.preload("click",GameInit())})),t.on("pause",(function(){t.gamePaused=!0,CreatureGame.isPaused=!0,void 0!==CreatureGame.raceStatus&&"racing"===CreatureGame.raceStatus.state&&t.sound.stop(t.bgMusic)})),t.on("resumed",(function(){t.gamePaused=!1,CreatureGame.isPaused=!1,void 0!==CreatureGame.raceStatus&&"racing"===CreatureGame.raceStatus.state&&t.sound.play(t.bgMusic,{loop:!0})})),t.labAudio=["setup_intro","lab_tuts_hitnext","music_loop_menu01","lets_race","labintro","powersintro","lab_tuts_levelconditions","lab_tuts_powers","lab_tuts_remove","lab_tuts_begin","lab_tuts_powerstats","lab_description_weight","lab_description_cost","lab_description_duration","lab_tuts_movement_attachments","lab_tuts_defensive_attachments","lab_tuts_emptyslot","racer_too_heavy","attachment_removed","add_1","add_2","add_3"],t.raceAudio=["did_you_pick_321GO","music_loop_race01","music_loop_race02","music_loop_race03","1","2","3","GO","lose_lead","losesound","winsound","oddwoosh","smart"],window.app=t}();