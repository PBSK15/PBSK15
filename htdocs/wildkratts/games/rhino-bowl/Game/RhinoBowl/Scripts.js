!function(e,t){function a(e,t,a){var i=t/2,n=a/2;this.animation=null,this.position={x:0,y:0},this.active=!1,this.elapsedTime=0,this.frame=0,this.timePerFrame=0,this.Init=function(t){this.position={x:t.x,y:t.y},this.animation=document.getElementById(e).animDetails,this.animation.Reset(),this.animation.Pause(!1),this.active=!0,this.elapsedTime=0;var a=this.animation.GetTotalDuration(),i=this.animation.GetTotalFrames();i>0&&(this.timePerFrame=a/i)},this.Update=function(){return 0==this.timePerFrame?void(this.active=!1):(this.elapsedTime+=GameManager.dt,void(this.elapsedTime>=this.animation.GetTotalDuration()?this.active=!1:this.frame=GameManager.MathFunctions.Clamp(this.elapsedTime/this.timePerFrame,0,this.animation.GetTotalFrames()-1)))},this.Draw=function(e){this.animation.SetFrame(Math.floor(this.frame)),this.animation.Draw(e,this.position.x-i,this.position.y-n,t,a)}}function i(e,t,i,n){var o=[];this.Trigger=function(e){for(var t=0;t<o.length;t++)if(!o[t].active){o[t].Init(e);break}},this.Init=function(){for(var e=0;e<o.length;e++)o[e].active=!1},this.Update=function(){for(var e=0;e<o.length;e++)o[e].active&&o[e].Update()},this.Draw=function(e){for(var t=0;t<o.length;t++)o[t].active&&o[t].Draw(e)};for(var s=0;e>s;s++){var r=new a(t,i,n);o.push(r)}}function n(e,t){var a={frames:1,duration:1,direction:"x",startPaused:!1,playOnce:!1,onComplete:null,reverse:!1,preventEffectReplace:!1};for(var i in t)a[i]=t[i];var n=a.time/a.frames;e.setAttribute("data-animated","true");for(var o=a.startPaused,s=0,r="x"==a.direction?e.naturalWidth/a.frames:e.naturalHeight/a.frames,h=[],l=0;l<a.frames;l++)h[l]={sx:"x"==a.direction?r*l:0,sy:"x"==a.direction?0:r*l,sw:"x"==a.direction?r:e.naturalWidth,sh:"x"==a.direction?e.naturalHeight:r};e.animDetails={preventEffectReplace:a.preventEffectReplace,elapsedTime:0,Pause:function(e){o=e},IsPaused:function(){return o},GetTotalDuration:function(){return a.time},GetTotalFrames:function(){return a.frames},Reset:function(){o=!1,s=0},SetFrame:function(e){s=e},SetOnComplete:function(e){a.onComplete=e},Reverse:function(e){a.reverse=e},Update:function(){o||(this.elapsedTime+=GameManager.dt,this.elapsedTime>=n&&(s++,this.elapsedTime=0,s>=a.frames&&(null!=a.onComplete&&a.onComplete(e),a.playOnce&&(o=!0),s=0)))},Draw:function(t,i,n,o,r,l){var m=a.reverse?a.frames-s-1:s,u=l||!1,c=o,d=r,g=0,p=0;if(u){var f=h[m].sw/h[m].sh,y=o/r,M=f>y?o/h[m].sw:r/h[m].sh;c=h[m].sw*M,d=h[m].sh*M,g=o>c?(o-c)/2:0,p=r>d?(r-d)/2:0}t.drawImage(e,h[m].sx,h[m].sy,h[m].sw,h[m].sh,i+g,n+p,c,d)}}}function o(){function e(){console.log("Audio error...")}var t=200;if(!GameManager.support.webAudio)return s();window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=null,i={},n={},o={},r=1,h=!1,l={Init:function(){a=new AudioContext,a.createGain=a.createGain||a.createGainNode,a.createDelay=a.createDelay||a.createDelayNode,a.createScriptProcessor=a.createScriptProcessor||a.createJavaScriptNode,a.setTargetAtTime=a.setTargetAtTime||a.setTargetValueAtTime,o.gain=a.createGain(),o.gain.connect(a.destination)},LoadSound:function(n,s,r,h,l,m){var u="";if(u=GameManager.support.ogg?s+"/OGG/"+r+".ogg":s+"/WAV/"+r+".wav",console.log("Loading sound: - "+u),void 0!=i[n])return console.log("sound with this name already exists"),void m();i[n]={ready:!1,buffer:null,volume:a.createGain(),type:h},void 0!=l&&null!=l&&(i[n].volume.gain.value=l);var c=new XMLHttpRequest;c.open("GET",u,!0),c.responseType="arraybuffer",c.onload=function(){c.status==t?a.decodeAudioData(c.response,function(e){i[n].buffer=e,i[n].ready=!0,i[n].looping=!1,i[n].volume.connect(o.gain),void 0!=m&&null!=m&&m()},e):e()},c.send()},PlaySound:function(e,t,n,o){if(void 0==i[e]||null==i[e])return void console.log("playSound-> sound doesn't exist: "+e);if(!i[e].ready)return void console.log("playSound-> sound not ready: "+e);i[e].callback=n,i[e].isPlaying=!0;var s=function(){null!=i[e].timeoutCallback&&void 0!=i[e].timeoutCallback&&(clearTimeout(i[e].timeoutCallback),i[e].timeoutCallback=null,void 0!==i[e].source.onended&&(i[e].source.onended=function(){})),void 0!=i[e].callback&&i[e].callback(),i[e].isPlaying=!1};void 0!=o&&null!=o&&void 0!=n&&null!=n&&(i[e].timeoutCallback=setTimeout(s,o)),i[e].source=a.createBufferSource(),i[e].source.start=i[e].source.start||i[e].source.noteOn,i[e].source.stop=i[e].source.stop||i[e].source.noteOff,i[e].source.loop=t||!1,i[e].looping=i[e].source.loop,i[e].source.buffer=i[e].buffer,i[e].source.connect(i[e].volume),void 0!==i[e].source.onended?i[e].source.onended=s:i[e].timeout=setTimeout(s,1e3*i[e].buffer.duration),i[e].source.start(0)},StopSound:function(e){if(void 0==i[e]||null==i[e])return void console.log("stopSound-> sound doesn't exist "+e);if(!i[e].ready)return void console.log("stopSound-> sound not ready");if(void 0!=i[e].source&&null!=i[e].source)try{i[e].source.stop(0),void 0!==i[e].source.onended&&(i[e].source.onended=function(){}),void 0!=i[e].timeout&&null!=i[e].timeout&&clearTimeout(i[e].timeout)}catch(t){console.log(t.message)}},StopAllNonLoopSounds:function(){for(var e in i)i[e].looping||GameManager.audio.StopSound(e)},StopAllSounds:function(){n=[];for(var e in i)GameManager.audio.StopSound(e)},SetSoundVolume:function(e,t){return void 0==i[e]||null==i[e]?void console.log("setSoundVolume-> sound doesn't exist"):void(i[e].volume.gain.value=t)},SetMasterVolume:function(e){r=e,o.gain.gain.value=h?0:e},SetSoundSpeed:function(e,t){i[e].source.playbackRate.value=t},Mute:function(){h=!0,o.gain.gain.value=0},Unmute:function(){h=!1,o.gain.gain.value=r},Pause:function(){for(var e in i)i[e].isPlaying&&(this.StopSound(e),i[e].type==W.music&&(n[e]=i[e]))},Resume:function(){for(var e in n)this.PlaySound(e,i[e].looping,i[e].callback);n={}}};return l.Init(),l}function s(){var e=document.getElementById("gameSounds"),t={},a={},i=1,n=!1,o={Init:function(){},LoadSound:function(a,i,n,o,s,r){var h=i+"/OGG/"+n+".ogg",l=i+"/WAV/"+n+".wav",m=i+"/MP3/"+n+".mp3";console.log("Loading sound: - "+n);var u=document.createElement("audio"),c=document.createElement("source"),d=document.createElement("source"),g=document.createElement("source");g.setAttribute("type","audio/mpeg"),c.setAttribute("type","audio/ogg"),d.setAttribute("type","audio/wav"),g.src=m,c.src=h,d.src=l,u.appendChild(g),u.appendChild(c),u.appendChild(d),e.appendChild(u),u.setAttribute("preload","metadata"),u.load(),t[a]={elem:u,volume:s,looping:!1,type:o},void 0!=r&&null!=r&&r()},PlaySound:function(e,a,n,o){return void 0==t[e]||null==t[e]?void console.log("playSound-> sound doesn't exist: "+e):GameManager.support.android&&!GameManager.support.chrome&&t[e].type!=W.dialog?void(void 0!=n&&null!=n&&n()):(t[e].callback=n,t[e].isPlaying=!0,t[e].endCallback=function(){void 0!=t[e].callback&&null!=t[e].callback&&(null!=t[e].timeoutCallback&&void 0!=t[e].timeoutCallback&&(clearTimeout(t[e].timeoutCallback),void 0!=t[e].elem.onended?t[e].elem.onended=function(){}:void 0!=t[e].endCallback&&t[e].elem.removeEventListener("ended",t[e].endCallback)),t[e].callback()),t[e].isPlaying=!1},t[e].looping=t[e].elem.loop=a||!1,t[e].elem.volume=GameManager.MathFunctions.Clamp(t[e].volume*i,0,1),void 0!=o&&null!=o&&void 0!=n&&null!=n&&(t[e].timeoutCallback=setTimeout(t[e].endCallback,o)),void 0!=t[e].elem.onended?t[e].elem.onended=t[e].endCallback:(t[e].elem.removeEventListener("ended",t[e].endCallback),t[e].elem.addEventListener("ended",t[e].endCallback)),void t[e].elem.play())},StopSound:function(e){if(void 0==t[e]||null==t[e])return void console.log("stopSound-> sound doesn't exist "+e);try{t[e].elem.pause(),t[e].elem.currentTime=0,void 0!=t[e].elem.onended?t[e].elem.onended=function(){}:void 0!=t[e].endCallback&&t[e].elem.removeEventListener("ended",t[e].endCallback)}catch(a){console.log(a.message)}},StopAllNonLoopSounds:function(){for(var e in t)t[e].looping||GameManager.audio.StopSound(e)},StopAllSounds:function(){a=[];for(var e in t)GameManager.audio.StopSound(e)},SetSoundVolume:function(e,a){return void 0==t[e]||null==t[e]?void console.log("setSoundVolume-> sound doesn't exist "+e):(t[e].volume=a,void(t[e].elem.volume=GameManager.MathFunctions.Clamp(t[e].volume*i,0,1)))},SetMasterVolume:function(e){i=e;for(var a in t)t[a].elem.volume=GameManager.MathFunctions.Clamp(t[a].volume*(n?0:i),0,1)},SetSoundSpeed:function(){},Mute:function(){n=!0;for(var e in t)t[e].elem.volume=GameManager.MathFunctions.Clamp(0,0,1)},Unmute:function(){n=!1;for(var e in t)t[e].elem.volume=GameManager.MathFunctions.Clamp(t[e].volume*i,0,1)},Pause:function(){for(var e in t)t[e].isPlaying&&(this.StopSound(e),(t[e].type==W.music||t[e].type==W.effect)&&(a[e]=t[e]))},Resume:function(){for(var e in a)this.PlaySound(e,t[e].looping,t[e].callback);a={}}};return o.Init(),o}function r(){var e=navigator.userAgent.toLowerCase(),t={performanceMode:"normal",canvas:!1,touch:!!("ontouchstart"in window),iPod:e.search("ipod")>-1,iPhone:e.search("iphone")>-1,iPad:e.search("ipad")>-1,safari:e.search("safari")>-1,ie:e.search("msie")>-1,firefox:e.search("firefox")>-1,android:e.search("android")>-1,chrome:e.search("chrome")>-1,silk:e.search("silk")>-1,iOS:!1,mobile:!1,desktop:!1,multitouch:!1,ogg:!0,m4a:!0,mp3:!0,webAudio:!1};if(t.iOS=t.iPod||t.iPhone||t.iPad,t.mobile=t.iOS||t.android||t.silk,t.desktop=!t.mobile,t.iOS){try{var a=e.match(/(OS|os)\s(\d)_(\d)/);a=parseFloat(a[2].toString()+"."+a[3].toString()),7.1>a&&(t.performanceMode="low")}catch(i){t.performanceMode="low"}var n=CookieJar.Read("shouldUseLowQuality");null!=n&&parseInt(n)>0&&(t.performanceMode="low")}else t.mobile&&(t.performanceMode="low");t.touch&&(t.android?parseInt(e.slice(e.indexOf("android")+8))>2&&(t.multitouch=!0):t.multitouch=!0);var o=document.createElement("audio");!o.canPlayType||o.canPlayType&&""!=o.canPlayType('audio/ogg; codecs="vorbis"')||(t.ogg=!1,(t.ie||!o.canPlayType||""==o.canPlayType("audio/mp4"))&&(t.m4a=!1)),delete o;try{var s=void 0!=window.AudioContext?new AudioContext:new window.webkitAudioContext;s.createBufferSource(),delete s,t.webAudio=!0}catch(i){console.log("No support for HTML5 Web Audio API, use Audio tag instead.")}var r=document.createElement("canvas");try{t.canvas=!!r.getContext("2d")}catch(i){t.canvas=!!r.getContext}return delete r,t}function h(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function l(e){return"low"==e?{svgClass:"performanceMode",floorClass:"perspective",drawDistance:400,drawFloor:!0,drawMaxAngle:.85,drawGradient:!1,drawAllProps:!1,maxRenderProps:100,horizon:262,frameTime:50}:"high"==e?{svgClass:"superMode",floorClass:"perspective",drawDistance:800,drawFloor:!0,drawMaxAngle:1.4,drawGradient:!0,drawAllProps:!0,maxRenderProps:999,horizon:250,frameTime:26}:{svgClass:"",floorClass:"perspective",drawDistance:800,drawFloor:!0,drawMaxAngle:1,drawGradient:!0,drawAllProps:!1,maxRenderProps:500,horizon:250,frameTime:33}}function m(e){e.parentNode.appendChild(e)}function u(){document.body.onkeydown=function(e){K[e.keyCode]=!0,J.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())},document.body.onkeyup=function(e){K[e.keyCode]=!1,J.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())}}function c(){var e=!1,t={screen:$("#pauseScreenSvg")[0],toggle:$("#pauseToggleButton")[0],openButton:$("#pauseButtonOpen")[0],closeButton:$("#pauseButtonClose")[0],continueButton:$("#pauseContinueButton")[0],menuButton:$("#pauseMainMenuButton")[0]};return t.currentButtonGroup=t.openButton,t.Open=function(){e||(m(t.screen),$(t.screen).show(),e=!0,t.currentButtonGroup=t.closeButton,m(t.closeButton),m(t.toggle))},t.Close=function(){$(t.screen).hide(),e=!1,t.currentButtonGroup=t.openButton,m(t.openButton)},M({item:t.toggle,Down:function(){$(t.currentButtonGroup).children("image")[1].setAttribute("style","")},Up:function(){$(t.currentButtonGroup).children("image")[1].setAttribute("style","display:none;"),e?t.Close():t.Open()}}),M({item:t.continueButton,Down:function(){$(t.continueButton).children("image")[1].setAttribute("style","")},Up:function(){$(t.continueButton).children("image")[1].setAttribute("style","display:none;"),t.Close()}}),M({item:t.menuButton,Down:function(){$(t.menuButton).children("image")[1].setAttribute("style","")},Up:function(){$(t.menuButton).children("image")[1].setAttribute("style","display:none;"),GameManager.sceneManager.ChangeScene("menuScene"),t.Close()}}),t}function d(){var e={fillstyle:"white",strokeStyle:"black",font:"30pt badaboom",strokeWidth:1},t=30,a=2,i=25,n=1,o=0,s=1,r=1.5,h=[];this.Init=function(){h=[]},this.Update=function(){for(var e=0;e<h.length;e++)h[e].position.y-=i*GameManager.dt,h[e].scale=GameManager.MathFunctions.Lerp(h[e].elapsedTime/a,s,r),h[e].opacity=GameManager.MathFunctions.Lerp(h[e].elapsedTime/a,n,o),h[e].elapsedTime+=GameManager.dt,h[e].elapsedTime>=a&&h.shift()},this.Draw=function(a){a.fillStyle=e.fillstyle,a.font=e.font,a.strokeStyle=e.strokeStyle,a.lineWidth=e.strokeWidth;for(var i=0;i<h.length;i++)a.save(),a.globalAlpha=h[i].opacity,a.translate(h[i].position.x,h[i].position.y-t/2),a.scale(h[i].scale,h[i].scale),a.fillText(h[i].text,0,0),a.strokeText(h[i].text,0,0),a.restore()},d.Trigger=function(e,t){h.push({text:e,position:t,elapsedTime:0,opacity:1,scale:1})}}function g(){var e={loading:"loading",delay:"delay",idle:"idle"},t=[144,400,700,45],a="Loading...",i=t[1]+32,n={},o=null,s=0,r=e.idle,h=1,l=1,m=!0;this.AddScene=function(e){n[e.name]=e},this.Reset=function(){if(null!=o){var e=o.name;o.UnInit(),this.ChangeScene(e)}},this.ChangeScene=function(t,a,i){function u(){r=e.delay,h=1,l=h}m=void 0!=a?a:!0,$("#"+Z).hide(),r=e.loading,s=0,this.Draw(GameManager.frontContext),null!=o&&o.UnInit(),GameManager.audio.StopAllSounds(),o=n[t],o.args=i,void 0!=o.preloadItems&&null!=o.preloadItems?GameManager.PreLoadFromList(o.preloadItems.images,o.preloadItems.sounds,function(){u()},function(e){s=e}):u()},this.Update=function(){r==e.idle&&o.Update(),r==e.delay&&(h-=GameManager.dt,0>h&&(o.Init(),r=e.idle,$("#"+Z).show()))},this.Draw=function(n){r!=e.loading&&r!=e.delay||!m?r==e.idle&&o.Draw(n):(GameManager.frontContext.setTransform(1,0,0,1,0,0),GameManager.frontContext.fillStyle="black",GameManager.frontContext.fillRect(0,0,988,556),n.drawImage(document.getElementById(GameManager.loadingImage),0,0,988,566),r==e.delay&&(n.globalAlpha=h/l),GameManager.frontContext.fillStyle="#222222",n.strokeStyle="black",n.lineWidth=2,GameManager.frontContext.fillRect(t[0],t[1],t[2],t[3]),GameManager.frontContext.strokeRect(t[0],t[1],t[2],t[3]),GameManager.frontContext.fillStyle="#005500",GameManager.frontContext.textAlign="center",GameManager.frontContext.font="26pt Calibri",GameManager.frontContext.fillText(a,t[0]+t[2]/2,i),GameManager.frontContext.fillStyle="green",GameManager.frontContext.fillRect(t[0],t[1],t[2]*s,t[3]),n.save(),n.beginPath(),n.moveTo(t[0],t[1]),n.lineTo(t[0]+t[2]*s,t[1]),n.lineTo(t[0]+t[2]*s,t[1]+t[3]),n.lineTo(t[0],t[1]+t[3]),n.closePath(),n.clip(),GameManager.frontContext.fillStyle="white",GameManager.frontContext.fillText(a,t[0]+t[2]/2,i),n.restore(),n.globalAlpha=1)}}function p(e,t){function a(){i=setTimeout(a,e),t()}if(!isNaN(e)&&void 0!=t&&null!=t){var i=null;return{Start:function(){a()},Stop:function(){clearTimeout(i)}}}}function f(e){$(e).unbind("contextmenu"),$(e).unbind("mousedown"),$(e).unbind("mouseup"),$(e).unbind("mousemove"),$(e).unbind("mouseleave"),$(e).unbind("click"),$(e).unbind("touchstart"),$(e).unbind("touchend"),$(e).unbind("touchmove")}function y(){GameManager.support.iOS&&(document.ontouchstart=function(e){e.preventDefault()},document.ontouchmove=function(e){e.preventDefault()})}function M(e){var t={item:null,Down:function(){},Up:function(){},Move:function(){},stopEvent:!0,allowMultiple:!1,allowUpWithoutDown:!0};for(var a in e)t[a]=e[a];if(void 0!=t.item&&null!=t.item){f(e.item),t.item.TouchEventInfo=t;var i=!1,n=!1,o=null,s=null;$(t.item).on("contextmenu",function(){return!1}),GameManager.support.desktop&&($(t.item).on("mousedown",function(e){if(!(n&&!t.allowMultiple||i&&!t.allowMultiple)){n=!0;var a=GameManager.screenScale>0?e.pageX/GameManager.screenScale:e.pageX,o=GameManager.screenScale>0?e.pageY/GameManager.screenScale:e.pageY;t.Down(e,a,o,this),t.stopEvent&&e.stopPropagation()}}),$(t.item).on("mouseup",function(e){if(n||t.allowUpWithoutDown){n=!1;var a=GameManager.screenScale>0?e.pageX/GameManager.screenScale:e.pageX,i=GameManager.screenScale>0?e.pageY/GameManager.screenScale:e.pageY;t.Up(e,a,i,this),t.stopEvent&&e.stopPropagation()}}),$(t.item).on("mouseleave",function(e){if(n){n=!1;var a=GameManager.screenScale>0?e.pageX/GameManager.screenScale:e.pageX,i=GameManager.screenScale>0?e.pageY/GameManager.screenScale:e.pageY;t.Up(e,a,i,this),t.stopEvent&&e.stopPropagation()}}),$(t.item).on("mousemove",function(e){if(null!=o){var a=e.pageX-o.pageX,i=e.pageY-o.pageY;a=GameManager.screenScale>0?a/GameManager.screenScale:a,i=GameManager.screenScale>0?i/GameManager.screenScale:i,(0!=a||0!=i)&&t.Move(e,a,i,this)}o=e,t.stopEvent&&e.stopPropagation()})),GameManager.support.mobile&&($(t.item).on("click",function(e){e.preventDefault()}),$(t.item).on("touchstart",function(e){if(e.preventDefault(),!(n&&!t.allowMultiple||i&&!t.allowMultiple)){i=!0;var a=GameManager.screenScale>0?e.originalEvent.touches[0].pageX/GameManager.screenScale:e.originalEvent.touches[0].pageX,o=GameManager.screenScale>0?e.originalEvent.touches[0].pageY/GameManager.screenScale:e.originalEvent.touches[0].pageY;t.Down(e,a,o,this),s=null,t.stopEvent&&e.stopPropagation()}}),$(t.item).on("touchend",function(e){if(e.preventDefault(),i||t.allowUpWithoutDown){i=!1;var a=0,n=0;null!=s&&(a=GameManager.screenScale>0?s[0]/GameManager.screenScale:s[0],n=GameManager.screenScale>0?s[1]/GameManager.screenScale:s[1]),t.Up(e,a,n,this),t.stopEvent&&e.stopPropagation()}}),$(t.item).on("touchmove",function(e){var a=e.originalEvent;a.preventDefault();try{if(null!=s){var i=a.touches[0].pageX-s[0],n=a.touches[0].pageY-s[1];i=GameManager.screenScale>0?i/GameManager.screenScale:i,n=GameManager.screenScale>0?n/GameManager.screenScale:n,(0!=i||0!=n)&&t.Move(a,i,n,this)}s=[a.touches[0].pageX,a.touches[0].pageY]}catch(o){}t.stopEvent&&a.stopPropagation()}))}}function v(e,t,a,i,n,o){var s={up:"",down:"",Event:function(){},sound:null,text:null,extraRadius:0,allowUpWithoutDown:!0};for(var r in o)s[r]=o[r];var h=document.createElementNS(svgns,"g");h.className.baseVal="gameButton";var l=document.createElementNS(svgns,"image"),m=document.createElementNS(svgns,"image");if(l.setAttributeNS(xlinkns,"href",s.up),m.setAttributeNS(xlinkns,"href",s.down),l.setAttribute("preserveAspectRatio","none"),m.setAttribute("preserveAspectRatio","none"),h.setAttribute("transform","translate("+e+","+t+")"),l.setAttribute("x",0),l.setAttribute("class","upimg"),l.setAttribute("y",0),l.setAttribute("width",a),l.setAttribute("height",i),m.setAttribute("x",0),m.setAttribute("class","downimg"),m.setAttribute("y",0),m.setAttribute("width",a),m.setAttribute("height",i),s.extraRadius>0){var u=document.createElementNS(svgns,"circle");u.setAttribute("fill","rgba(0,0,0,0)"),u.setAttribute("r",s.extraRadius),u.setAttribute("cx",a/2),u.setAttribute("cy",i/2),h.appendChild(u)}var c=null;return null!=s.text&&(c=document.createElementNS(svgns,"text"),c.setAttribute("x",a/2),c.setAttribute("y",40),c.setAttribute("font-size",30),c.setAttribute("fill","white"),c.setAttribute("stroke","black"),c.setAttribute("stroke-width",.5),c.setAttribute("text-anchor","middle"),c.textContent=s.text),M({item:h,Down:function(){l.setAttribute("style","display:none;"),m.setAttribute("style","")},Up:function(){m.setAttribute("style","display:none;"),l.setAttribute("style",""),null!=s.sound&&GameManager.audio.PlaySound(s.sound),s.Event()},allowUpWithoutDown:s.allowUpWithoutDown}),n.appendChild(h),h.appendChild(m),h.appendChild(l),c&&h.appendChild(c),h.setText=function(e){c.textContent=e},h}function w(e,t,a,i,n,o){GameManager.frontContext.lineWidth=o||1,GameManager.frontContext.beginPath(),GameManager.frontContext.arc(e,t,a,0,2*Math.PI),void 0!=i&&(GameManager.frontContext.fillStyle=i||"#000000",GameManager.frontContext.fill()),void 0!=n&&(GameManager.frontContext.strokeStyle=n||"#000000",GameManager.frontContext.stroke())}function _(){var e=0,t="end_background",a="lose",i={screen:$("#endGameScreenSvg")[e],endTitle:$("#endTitle")[e],scoreText:$("#endScoreText")[e],playButton:$("#playAgainButton")[e],menuButton:$("#mainMenuButton")[e]};return i.Open=function(){m(i.screen),$(i.screen).show(),0==GameManager.score?(i.endTitle.textContent="TRY AGAIN!",i.scoreText.textContent="You scored "+GameManager.score+" points!"):1==GameManager.score?(i.endTitle.textContent="GREAT JOB!",i.scoreText.textContent="You scored "+GameManager.score+" point!"):(i.endTitle.textContent="GREAT JOB!",i.scoreText.textContent="You scored "+GameManager.score+" points!"),GameManager.Pause(),GameManager.audio.StopAllSounds(),GameManager.audio.PlaySound(a,!1,function(){GameManager.audio.PlaySound(t,!0)})},i.Close=function(){$(i.screen).hide(),GameManager.Resume()},M({item:i.playButton,Down:function(){$(i.playButton).children("image")[1].setAttribute("style",""),$(i.playButton).children("text")[0].setAttribute("fill","black"),$(i.playButton).children("text")[0].setAttribute("stroke","white")},Up:function(){$(i.playButton).children("image")[1].setAttribute("style","display:none;"),$(i.playButton).children("text")[0].setAttribute("fill","white"),$(i.playButton).children("text")[0].setAttribute("stroke","black"),GameManager.sceneManager.ChangeScene("gameScene"),i.Close()}}),M({item:i.menuButton,Down:function(){$(i.menuButton).children("image")[1].setAttribute("style",""),$(i.menuButton).children("text")[0].setAttribute("fill","black"),$(i.menuButton).children("text")[0].setAttribute("stroke","white")},Up:function(){$(i.menuButton).children("image")[1].setAttribute("style","display:none;"),$(i.menuButton).children("text")[0].setAttribute("fill","white"),$(i.menuButton).children("text")[0].setAttribute("stroke","black"),GameManager.sceneManager.ChangeScene("menuScene"),i.Close()}}),i}function G(){GameManager.loadingImage="image_loading_rhinoBowl",GameManager.scoreIncrement=1;var e={image:"image_gameBackground",x:0,y:0,width:GameManager.FrameSize.width,height:GameManager.FrameSize.height},t={image:"image_left_fg_rock",x:0,y:330,width:152,height:90},a={image:"image_left_fg_bush",x:-50,y:360,width:160,height:150},n={image:"image_right_fg",x:788,y:305,width:200,height:190},o={image:"image_explosion",width:200,height:200};GameManager.PATH_BOUNDS={topLeft:{x:350,y:0},bottomLeft:{x:75,y:GameManager.FrameSize.height},topRight:{x:650,y:0},bottomRight:{x:925,y:GameManager.FrameSize.height},slopeLeft:GameManager.FrameSize.height/-275,slopeRight:GameManager.FrameSize.height/275};var s="gameSceneSvg",r="pauseToggleButton",h=10,l=3,m="zach_calf",u="background",c=new N,g=new B,p=new b,f=new x,y=new I,M=new k,v=new U,w=new O(h),_=new d,G=null,T=-1,A=3,R=T,C=document.getElementById("scoreText"),E=[];GameManager.explosionEffectManager=new i(h,o.image,o.width,o.height),GameManager.tutorialManager=new F,GameManager.hitToughBot=!1,GameManager.hitDissapearingBot=!1;var P={name:"gameScene",preloadItems:{images:[{name:"gameBackground",src:"./Images/RhinoBowl/game_background.png"},{name:"left_fg_rock",src:"./Images/RhinoBowl/left_fg_rock.png"},{name:"left_fg_bush",src:"./Images/RhinoBowl/left_fg_bush.png"},{name:"right_fg",src:"./Images/RhinoBowl/right_fg.png"},{name:"chris_cheer",src:"./Images/RhinoBowl/chris_cheer.png"},{name:"martin_cheer",src:"./Images/RhinoBowl/martin_cheer.png"},{name:"zachbot_regular",src:"./Images/RhinoBowl/zachbot_regular.png"},{name:"zachbot_tough",src:"./Images/RhinoBowl/zachbot_tough.png"},{name:"zachbot_dissapearing",src:"./Images/RhinoBowl/zachbot_dissapearing.png"},{name:"shield",src:"./Images/RhinoBowl/shield.png"},{name:"zachbot_body_top",src:"./Images/RhinoBowl/zachbot_body_top.png"},{name:"zachbot_body_middle",src:"./Images/RhinoBowl/zachbot_body_middle.png"},{name:"zachbot_body_bottom",src:"./Images/RhinoBowl/zachbot_body_bottom.png"},{name:"zachbot_arm",src:"./Images/RhinoBowl/zachbot_arm.png"},{name:"zachbot_head",src:"./Images/RhinoBowl/zachbot_head.png"},{name:"rhino",src:"./Images/RhinoBowl/rhino_charge.png",anim:{direction:"x",frames:11,time:1}},{name:"chris_charge",src:"./Images/RhinoBowl/chris_charge.png",anim:{direction:"x",frames:4,time:.5}},{name:"martin_charge",src:"./Images/RhinoBowl/martin_charge.png",anim:{direction:"x",frames:4,time:.4}},{name:"nubs_run",src:"./Images/RhinoBowl/nubs_run.png",anim:{direction:"x",frames:6,time:.5}},{name:"nubs_walk",src:"./Images/RhinoBowl/nubs_walk.png",anim:{direction:"y",frames:9,time:.8}},{name:"nubs_idle",src:"./Images/RhinoBowl/nubs_idle.png",anim:{direction:"y",frames:8,time:.6}},{name:"nubs_yell",src:"./Images/RhinoBowl/nubs_yell.png",anim:{direction:"y",frames:6,time:.8}},{name:"explosion",src:"./Images/RhinoBowl/explosion_fx.png",anim:{direction:"x",frames:5,time:.4,playOnce:!0}},{name:"tutorial_swipe",src:"./Images/RhinoBowl/tutorial_swipe.png",anim:{direction:"y",frames:5,time:1,playOnce:!0}},{name:"zach_jet",src:"./Images/RhinoBowl/zach_jet.png",anim:{direction:"y",frames:18,time:2,playOnce:!0}},{name:"zach_chariot",src:"./Images/RhinoBowl/zach.png",anim:{direction:"y",frames:4,time:.8,playOnce:!0}}],sounds:[{name:"background",path:"./Sounds/Common",file:"background",type:W.music},{name:"end_background",path:"./Sounds/Common",file:"end_background",type:W.music},{name:"varmint",path:"./Sounds/RhinoBowl",file:"varmint",type:W.dialog},{name:"bot_hit",path:"./Sounds/RhinoBowl",file:"bot_hit",type:W.effect},{name:"ship_fly",path:"./Sounds/RhinoBowl",file:"ship_fly",type:W.effect},{name:"zach_hover",path:"./Sounds/RhinoBowl",file:"zach_hover",type:W.effect},{name:"nubs_yelp",path:"./Sounds/RhinoBowl",file:"nubs_yelp",type:W.effect},{name:"rhino_run",path:"./Sounds/RhinoBowl",file:"rhino_run",type:W.effect},{name:"zach_calf",path:"./Sounds/RhinoBowl",file:"zach_calf",type:W.effect},{name:"lose",path:"./Sounds/RhinoBowl",file:"lose",type:W.effect},{name:"chris_intro1",path:"./Sounds/RhinoBowl",file:"chris_intro1",type:W.dialog},{name:"chris_intro2",path:"./Sounds/RhinoBowl",file:"chris_intro2",type:W.dialog},{name:"chris_encouragement1",path:"./Sounds/RhinoBowl",file:"chris_encouragement1",type:W.dialog},{name:"chris_encouragement2",path:"./Sounds/RhinoBowl",file:"chris_encouragement2",type:W.dialog},{name:"chris_encouragement3",path:"./Sounds/RhinoBowl",file:"chris_encouragement3",type:W.dialog},{name:"chris_encouragement4",path:"./Sounds/RhinoBowl",file:"chris_encouragement4",type:W.dialog},{name:"chris_encouragement5",path:"./Sounds/RhinoBowl",file:"chris_encouragement5",type:W.dialog},{name:"chris_encouragement6",path:"./Sounds/RhinoBowl",file:"chris_encouragement6",type:W.dialog},{name:"chris_encouragement7",path:"./Sounds/RhinoBowl",file:"chris_encouragement7",type:W.dialog},{name:"chris_negative1",path:"./Sounds/RhinoBowl",file:"chris_negative1",type:W.dialog},{name:"chris_negative2",path:"./Sounds/RhinoBowl",file:"chris_negative2",type:W.dialog},{name:"chris_negative3",path:"./Sounds/RhinoBowl",file:"chris_negative3",type:W.dialog},{name:"chris_suit1",path:"./Sounds/RhinoBowl",file:"chris_suit1",type:W.dialog},{name:"chris_suit2",path:"./Sounds/RhinoBowl",file:"chris_suit2",type:W.dialog},{name:"chris_tough_bot",path:"./Sounds/RhinoBowl",file:"chris_tough_bot",type:W.dialog},{name:"chris_dissapearing_bot",path:"./Sounds/RhinoBowl",file:"chris_dissapearing_bot",type:W.dialog},{name:"chris_intro_touch",path:"./Sounds/RhinoBowl",file:"chris_intro_touch",type:W.dialog},{name:"chris_intro_mouse",path:"./Sounds/RhinoBowl",file:"chris_intro_mouse",type:W.dialog},{name:"martin_intro1",path:"./Sounds/RhinoBowl",file:"martin_intro1",type:W.dialog},{name:"martin_intro2",path:"./Sounds/RhinoBowl",file:"martin_intro2",type:W.dialog},{name:"martin_encouragement1",path:"./Sounds/RhinoBowl",file:"martin_encouragement1",type:W.dialog},{name:"martin_encouragement2",path:"./Sounds/RhinoBowl",file:"martin_encouragement2",type:W.dialog},{name:"martin_encouragement3",path:"./Sounds/RhinoBowl",file:"martin_encouragement3",type:W.dialog},{name:"martin_encouragement4",path:"./Sounds/RhinoBowl",file:"martin_encouragement4",type:W.dialog},{name:"martin_encouragement5",path:"./Sounds/RhinoBowl",file:"martin_encouragement5",type:W.dialog},{name:"martin_encouragement6",path:"./Sounds/RhinoBowl",file:"martin_encouragement6",type:W.dialog},{name:"martin_encouragement7",path:"./Sounds/RhinoBowl",file:"martin_encouragement7",type:W.dialog},{name:"martin_negative1",path:"./Sounds/RhinoBowl",file:"martin_negative1",type:W.dialog},{name:"martin_negative2",path:"./Sounds/RhinoBowl",file:"martin_negative2",type:W.dialog},{name:"martin_negative3",path:"./Sounds/RhinoBowl",file:"martin_negative3",type:W.dialog},{name:"martin_suit1",path:"./Sounds/RhinoBowl",file:"martin_suit1",type:W.dialog},{name:"martin_suit2",path:"./Sounds/RhinoBowl",file:"martin_suit2",type:W.dialog},{name:"martin_tough_bot",path:"./Sounds/RhinoBowl",file:"martin_tough_bot",type:W.dialog},{name:"martin_dissapearing_bot",path:"./Sounds/RhinoBowl",file:"martin_dissapearing_bot",type:W.dialog},{name:"martin_intro_touch",path:"./Sounds/RhinoBowl",file:"martin_intro_touch",type:W.dialog},{name:"martin_intro_mouse",path:"./Sounds/RhinoBowl",file:"martin_intro_mouse",type:W.dialog}]},Init:function(){GameManager.audio.SetSoundVolume(u,GameManager.InitialSettings.BackgroundMusicVolume),GameManager.audio.PlaySound(u,!0),$(document.getElementById(r)).show(),$(document.getElementById(s)).show(),c.Init(),g.Init(),y.Init(),M.Init(),v.Init(),p.Init(),f.Init(),w.Init(),_.Init(),GameManager.explosionEffectManager.Init(),GameManager.tutorialManager.Init(),GameManager.tutorialManager.Show(F.TUTORIAL_TYPE.intro,function(){y.Activate(),M.Activate(),v.Activate(),R=A,GameManager.audio.PlaySound(m,!1,GameManager.ZachDialogComplete)}),GameManager.ZachDialogComplete=function(){R!=T&&(R=T,p.MoveIn(),f.MoveIn(),v.Start(),M.Leave(),RhinoBowlAudio.PlayRandomBro("intro1",function(){RhinoBowlAudio.PlayRandomBro("intro2",function(){RhinoBowlAudio.PlayRandomBro(GameManager.support.touch?"introTouch":"introMouse",function(){c.Activate(),p.MoveOut(),f.MoveOut()})})}))},GameManager.ZachbotWaveCount=1,GameManager.rhinoIsKratt=!1,GameManager.score=0,C.textContent=GameManager.score,GameManager.ThrowComplete=function(){!RhinoBowlAudio.isPlaying&&GameManager.scoreIncrement>l&&!GameManager.rhinoIsKratt&&(G=RhinoBowlAudio.PlayRandomOfType(RhinoBowlAudio.encouragement,GameManager.encouragementCallback),G==S.CHRIS_NAME?p.MoveIn():f.MoveIn())},GameManager.encouragementCallback=function(){G==S.CHRIS_NAME?p.MoveOut():f.MoveOut()},GameManager.EnemyInstruction=function(e){RhinoBowlAudio.isPlaying||GameManager.rhinoIsKratt||(G=RhinoBowlAudio.PlayRandomBro(e,GameManager.encouragementCallback),G==S.CHRIS_NAME?p.MoveIn():f.MoveIn())}},UnInit:function(){$(document.getElementById(r)).hide(),$(document.getElementById(s)).hide()},Update:function(){if(GameManager.tutorialManager.Update(),R!=T&&(R-=GameManager.dt,0>=R&&GameManager.ZachDialogComplete()),!GameManager.tutorialManager.visible&&(c.Update(),g.Update(),y.Update(),M.Update(),v.Update(),p.Update(),f.Update(),w.Update(),_.Update(),GameManager.explosionEffectManager.Update(),g.canCollide)){for(var e=0;e<c.formations.length;e++)if(c.formations[e].active)for(var t=c.formations[e].GetZachbots(),a=0;a<t.length;a++)if(t[a].IsAlive()){var i=t[a].collisionRadius+g.collisionRadius,n=t[a].position.x-g.position.x,o=t[a].position.y-g.position.y,s=n*n+o*o;i*i>s?t[a].colliding||(t[a].OnCollisionEnter(),GameManager.audio.PlaySound("bot_hit",!1)):t[a].colliding&&t[a].OnCollisionExit()}C.textContent=GameManager.score}},Draw:function(i){i.clearRect(0,0,GameManager.FrameSize.width,GameManager.FrameSize.height),E=[],i.drawImage(document.getElementById(e.image),e.x,e.y,e.width,e.height),c.Draw(i),GameManager.explosionEffectManager.Draw(i),w.Draw(i),E.push({y:p.position.y+p.height/2,callback:function(){p.Draw(i)
}}),E.push({y:f.position.y+f.height/2,callback:function(){f.Draw(i)}}),E.push({y:g.position.y+B.DEFAULT_HEIGHT/2,callback:function(){g.Draw(i)}}),E.push({y:y.position.y+I.HEIGHT/2,callback:function(){y.Draw(i)}}),E.push({y:M.position.y+k.HEIGHT/2,callback:function(){M.Draw(i)}}),E.push({y:v.position.y+U.HEIGHT/2,callback:function(){v.Draw(i)}}),E.push({y:t.y+t.height,callback:function(){i.drawImage(document.getElementById(t.image),t.x,t.y,t.width,t.height)}}),E.push({y:a.y+a.height,callback:function(){i.drawImage(document.getElementById(a.image),a.x,a.y,a.width,a.height)}}),E.push({y:n.y+n.height,callback:function(){i.drawImage(document.getElementById(n.image),n.x,n.y,n.width,n.height)}}),E.sort(function(e,t){return e.y>t.y?1:-1});for(var o=0;o<E.length;o++)E[o].callback();GameManager.debugDraw&&(i.lineWidth=1,i.strokeStyle="#ff0000",i.beginPath(),i.moveTo(GameManager.PATH_BOUNDS.topLeft.x,GameManager.PATH_BOUNDS.topLeft.y),i.lineTo(GameManager.PATH_BOUNDS.bottomLeft.x,GameManager.PATH_BOUNDS.bottomLeft.y),i.stroke(),i.beginPath(),i.moveTo(GameManager.PATH_BOUNDS.topRight.x,GameManager.PATH_BOUNDS.topRight.y),i.lineTo(GameManager.PATH_BOUNDS.bottomRight.x,GameManager.PATH_BOUNDS.bottomRight.y),i.stroke()),_.Draw(i),GameManager.tutorialManager.Draw(i)}};return P}function S(){S.CHRIS_NAME="chris",S.MARTIN_NAME="martin";var e={MOVE_IN:"moveIn",MOVE_OUT:"moveOut",WAIT:"wait"},t=.5,a=.5;this.elapsedTime=0,this.state=null,this.image=null,this.offScreenPosition={x:0,y:0},this.onScreenPosition={x:0,y:0},this.position={x:0,y:0},this.width=0,this.height=0,S.prototype.Init=function(){this.elapsedTime=0,this.SetState(e.WAIT)},S.prototype.Update=function(){switch(this.state){case e.MOVE_IN:this.Move(this.offScreenPosition,this.onScreenPosition,t);break;case e.MOVE_OUT:this.Move(this.onScreenPosition,this.offScreenPosition,a);break;case e.WAIT:}},S.prototype.Draw=function(e){e.drawImage(document.getElementById(this.image),this.position.x-this.width/2,this.position.y-this.height/2,this.width,this.height)},this.Move=function(t,a,i,n){return 0==i?(this.SetState(e.WAIT),void(void 0!=n&&null!=n&&n())):(this.elapsedTime=GameManager.MathFunctions.Clamp(this.elapsedTime+GameManager.dt,0,i),this.position.x=GameManager.MathFunctions.Lerp(this.elapsedTime/i,t.x,a.x),this.position.y=GameManager.MathFunctions.Lerp(this.elapsedTime/i,t.y,a.y),void(this.elapsedTime==i&&(this.SetState(e.WAIT),void 0!=n&&null!=n&&n())))},this.SetState=function(e){this.state!=e&&(this.state=e,this.elapsedTime=0)},this.MoveIn=function(){this.SetState(e.MOVE_IN)},this.MoveOut=function(){this.SetState(e.MOVE_OUT)}}function x(){var e="image_martin_cheer",t=170,a=275,i=250;this.Init=function(){S.prototype.Init.call(this),this.image=e,this.offScreenPosition={x:GameManager.FrameSize.width+t/2,y:i},this.onScreenPosition={x:GameManager.FrameSize.width-t/2,y:i},this.position={x:this.offScreenPosition.x,y:this.offScreenPosition.y},this.width=t,this.height=a}}function b(){var e="image_chris_cheer",t=170,a=275,i=275;this.Init=function(){S.prototype.Init.call(this),this.image=e,this.offScreenPosition={x:-t/2,y:i},this.onScreenPosition={x:t/2,y:i},this.position={x:this.offScreenPosition.x,y:this.offScreenPosition.y},this.width=t,this.height=a}}function T(){function e(){for(var e=0;e<i.preloadItems.alternateSounds.length;e++)GameManager.audio.LoadSound(i.preloadItems.alternateSounds[e].name,i.preloadItems.alternateSounds[e].path,i.preloadItems.alternateSounds[e].file,i.preloadItems.alternateSounds[e].type,1)}var t={x:0,y:0,width:GameManager.FrameSize.width,height:GameManager.FrameSize.height,image:"image_menuBackground"},a={x:GameManager.FrameSize.width-154,y:0,width:154,height:120,imageEnabled:"./Images/Common/UI/play_button_off.png",imageDisabled:"./Images/Common/UI/play_button_press.png"},i={name:"menuScene",preloadItems:{images:[{name:"menuBackground",src:"./Images/RhinoBowl/menu_background.jpg"}],sounds:[{name:"chris_title",path:"./Sounds/RhinoBowl",file:"chris_title",type:W.dialog},{name:"martin_title",path:"./Sounds/RhinoBowl",file:"martin_title",type:W.dialog}],alternateSounds:[{name:"chris_title",path:"./Sounds/RhinoBowl",file:"chris_title",type:W.dialog},{name:"martin_title",path:"./Sounds/RhinoBowl",file:"martin_title",type:W.dialog},{name:"background",path:"./Sounds/Common",file:"background",type:W.music},{name:"end_background",path:"./Sounds/Common",file:"end_background",type:W.music},{name:"varmint",path:"./Sounds/RhinoBowl",file:"varmint",type:W.dialog},{name:"bot_hit",path:"./Sounds/RhinoBowl",file:"bot_hit",type:W.effect},{name:"ship_fly",path:"./Sounds/RhinoBowl",file:"ship_fly",type:W.effect},{name:"zach_hover",path:"./Sounds/RhinoBowl",file:"zach_hover",type:W.effect},{name:"nubs_yelp",path:"./Sounds/RhinoBowl",file:"nubs_yelp",type:W.effect},{name:"rhino_run",path:"./Sounds/RhinoBowl",file:"rhino_run",type:W.effect},{name:"zach_calf",path:"./Sounds/RhinoBowl",file:"zach_calf",type:W.effect},{name:"chris_intro1",path:"./Sounds/RhinoBowl",file:"chris_intro1",type:W.dialog},{name:"chris_intro2",path:"./Sounds/RhinoBowl",file:"chris_intro2",type:W.dialog},{name:"chris_encouragement1",path:"./Sounds/RhinoBowl",file:"chris_encouragement1",type:W.dialog},{name:"chris_encouragement2",path:"./Sounds/RhinoBowl",file:"chris_encouragement2",type:W.dialog},{name:"chris_encouragement3",path:"./Sounds/RhinoBowl",file:"chris_encouragement3",type:W.dialog},{name:"chris_encouragement4",path:"./Sounds/RhinoBowl",file:"chris_encouragement4",type:W.dialog},{name:"chris_encouragement5",path:"./Sounds/RhinoBowl",file:"chris_encouragement5",type:W.dialog},{name:"chris_encouragement6",path:"./Sounds/RhinoBowl",file:"chris_encouragement6",type:W.dialog},{name:"chris_encouragement7",path:"./Sounds/RhinoBowl",file:"chris_encouragement7",type:W.dialog},{name:"chris_negative1",path:"./Sounds/RhinoBowl",file:"chris_negative1",type:W.dialog},{name:"chris_negative2",path:"./Sounds/RhinoBowl",file:"chris_negative2",type:W.dialog},{name:"chris_negative3",path:"./Sounds/RhinoBowl",file:"chris_negative3",type:W.dialog},{name:"chris_suit1",path:"./Sounds/RhinoBowl",file:"chris_suit1",type:W.dialog},{name:"chris_suit2",path:"./Sounds/RhinoBowl",file:"chris_suit2",type:W.dialog},{name:"chris_tough_bot",path:"./Sounds/RhinoBowl",file:"chris_tough_bot",type:W.dialog},{name:"chris_dissapearing_bot",path:"./Sounds/RhinoBowl",file:"chris_dissapearing_bot",type:W.dialog},{name:"chris_intro_touch",path:"./Sounds/RhinoBowl",file:"chris_intro_touch",type:W.dialog},{name:"chris_intro_mouse",path:"./Sounds/RhinoBowl",file:"chris_intro_mouse",type:W.dialog},{name:"martin_intro1",path:"./Sounds/RhinoBowl",file:"martin_intro1",type:W.dialog},{name:"martin_intro2",path:"./Sounds/RhinoBowl",file:"martin_intro2",type:W.dialog},{name:"martin_encouragement1",path:"./Sounds/RhinoBowl",file:"martin_encouragement1",type:W.dialog},{name:"martin_encouragement2",path:"./Sounds/RhinoBowl",file:"martin_encouragement2",type:W.dialog},{name:"martin_encouragement3",path:"./Sounds/RhinoBowl",file:"martin_encouragement3",type:W.dialog},{name:"martin_encouragement4",path:"./Sounds/RhinoBowl",file:"martin_encouragement4",type:W.dialog},{name:"martin_encouragement5",path:"./Sounds/RhinoBowl",file:"martin_encouragement5",type:W.dialog},{name:"martin_encouragement6",path:"./Sounds/RhinoBowl",file:"martin_encouragement6",type:W.dialog},{name:"martin_encouragement7",path:"./Sounds/RhinoBowl",file:"martin_encouragement7",type:W.dialog},{name:"martin_negative1",path:"./Sounds/RhinoBowl",file:"martin_negative1",type:W.dialog},{name:"martin_negative2",path:"./Sounds/RhinoBowl",file:"martin_negative2",type:W.dialog},{name:"martin_negative3",path:"./Sounds/RhinoBowl",file:"martin_negative3",type:W.dialog},{name:"martin_suit1",path:"./Sounds/RhinoBowl",file:"martin_suit1",type:W.dialog},{name:"martin_suit2",path:"./Sounds/RhinoBowl",file:"martin_suit2",type:W.dialog},{name:"martin_tough_bot",path:"./Sounds/RhinoBowl",file:"martin_tough_bot",type:W.dialog},{name:"martin_dissapearing_bot",path:"./Sounds/RhinoBowl",file:"martin_dissapearing_bot",type:W.dialog},{name:"martin_intro_touch",path:"./Sounds/RhinoBowl",file:"martin_intro_touch",type:W.dialog},{name:"martin_intro_mouse",path:"./Sounds/RhinoBowl",file:"martin_intro_mouse",type:W.dialog}]},Init:function(){var t=document.getElementById("svgCanvas"),i=v(a.x,a.y,a.width,a.height,t,{sound:"click",up:a.imageEnabled,down:a.imageDisabled,Event:function(){GameManager.support.webAudio||e(),GameManager.sceneManager.ChangeScene("gameScene"),$(i).hide()}});RhinoBowlAudio.PlayRandomBro("title")},UnInit:function(){},Update:function(){},Draw:function(e){e.drawImage(document.getElementById(t.image),t.x,t.y,t.width,t.height)}};return i}function I(){I.WIDTH=140,I.HEIGHT=160;var e="image_nubs_idle",t="image_nubs_yell",a={x:125,y:425},i=5,n=20,o="nubs_yelp";this.position={x:0,y:0},this.active=!1;var s=null,r=0;this.Init=function(){this.active=!1,this.position={x:a.x,y:a.y},s=document.getElementById(e).animDetails,r=0},this.Update=function(){this.active&&(r-=GameManager.dt,0>=r&&(s=document.getElementById(t).animDetails,s.SetOnComplete(this.YellComplete),r=GameManager.MathFunctions.RandomInt(i,n),GameManager.audio.PlaySound(o,!1)),null!=s&&s.Update())},this.Draw=function(e){this.active&&null!=s&&s.Draw(e,this.position.x-I.WIDTH/2,this.position.y-I.HEIGHT/2,I.WIDTH,I.HEIGHT)},this.Activate=function(){this.active=!0},this.YellComplete=function(){s=document.getElementById(e).animDetails}}function B(){function e(){if(!(c>P)){if(I.values.length>0&&C.values.length>0){E.x=I.getAverage(),E.y=C.getAverage();var e=Math.sqrt(E.x*E.x+E.y*E.y);e>0&&(E.x=E.x/e,E.y=E.y/e);var t=Math.atan2(E.y,E.x);-h>t||t>-r&&0>=t?(t=GameManager.MathFunctions.Clamp(t,-h,-r),E.x=Math.cos(t),E.y=Math.sin(t)):(t>h||r>t&&t>=0)&&(t=GameManager.MathFunctions.Clamp(t,r,h),E.x=Math.cos(t),E.y=Math.sin(t)),v=f.thrown,y.canCollide=!0,GameManager.audio.PlaySound(p,!1)}GameManager.tutorialManager.hasSwiped=!0,GameManager.scoreIncrement=1}}B.ANIMATION="image_rhino",B.DEFAULT_WIDTH=100,B.DEFAULT_HEIGHT=140,B.CHRIS_ANIMATION="image_chris_charge",B.MARTIN_ANIMATION="image_martin_charge",B.KRATT_WIDTH=140,B.KRATT_HEIGHT=225;var t=.8,a=1.5,i=.5,n=100,o=100,s=450,r=GameManager.MathFunctions.DegToRad(20),h=GameManager.MathFunctions.DegToRad(160),l=30,m=50,u=5,c=.5*GameManager.FrameSize.height,d=30,g=40,p="rhino_run",f={spawning:"spawning",aiming:"aiming",thrown:"thrown"},y=this,v=f.spawning,_=1,G=B.DEFAULT_WIDTH,S=G,x=B.DEFAULT_HEIGHT,b=x,T=!1,I=new A(n),C=new A(o),E={x:0,y:0},P=0,D=null,F=0;this.position={x:0,y:0},this.collisionRadius=0,this.canCollide=!1,this.opacity=1,this.Reset=function(e){if(v=f.spawning,_=a,T=!1,this.position={x:GameManager.FrameSize.width/2,y:GameManager.FrameSize.height+b/2},this.canCollide=!1,this.opacity=1,e){var t=0==GameManager.MathFunctions.RandomInt(0,1);D=document.getElementById(t?B.CHRIS_ANIMATION:B.MARTIN_ANIMATION),G=B.KRATT_WIDTH,x=B.KRATT_HEIGHT,F=m*_,GameManager.rhinoIsKratt||(GameManager.rhinoIsKratt=!0,RhinoBowlAudio.isPlaying||RhinoBowlAudio.PlayRandomOfType(RhinoBowlAudio.suit))}else D=document.getElementById(B.ANIMATION),G=B.DEFAULT_WIDTH,x=B.DEFAULT_HEIGHT,F=l*_,GameManager.rhinoIsKratt&&(GameManager.rhinoIsKratt=!1)},this.Init=function(){this.Reset(!1)},this.Update=function(){_=GameManager.MathFunctions.Lerp(this.position.y/GameManager.FrameSize.height,t,a),S=G*_,b=x*_,this.collisionRadius=F*_;var e=b/2,n=S/2;switch(v){case f.spawning:var o=GameManager.FrameSize.height-e,r=GameManager.FrameSize.height+e;this.position.y=i>0?GameManager.MathFunctions.Clamp(this.position.y-b/i*GameManager.dt,o,r):o,this.position.y==o&&(v=f.aiming);break;case f.aiming:break;case f.thrown:D.animDetails.Update(),this.position.x+=E.x*s*GameManager.dt,this.position.y+=E.y*s*GameManager.dt,this.leftBoundX=(this.position.y-GameManager.PATH_BOUNDS.bottomLeft.y)/GameManager.PATH_BOUNDS.slopeLeft+GameManager.PATH_BOUNDS.bottomLeft.x,this.rightBoundX=(this.position.y-GameManager.PATH_BOUNDS.bottomRight.y)/GameManager.PATH_BOUNDS.slopeRight+GameManager.PATH_BOUNDS.bottomRight.x,this.position.x=GameManager.MathFunctions.Clamp(this.position.x,this.leftBoundX+this.collisionRadius,this.rightBoundX-this.collisionRadius),(this.position.x-this.collisionRadius==this.leftBoundX||this.position.x+this.collisionRadius==this.rightBoundX)&&(E.x*=-1);var h={top:this.position.y-e,bottom:this.position.y+e,left:this.position.x-n,right:this.position.x+n};R(h)||this.Reset(GameManager.ZachbotWaveCount%u==0),this.position.y<d&&(this.opacity=GameManager.MathFunctions.Lerp((d-this.position.y)/g,1,0),this.opacity=GameManager.MathFunctions.Clamp(this.opacity,0,1),0==this.opacity&&(this.Reset(GameManager.ZachbotWaveCount%u==0),GameManager.ThrowComplete()))}},this.Draw=function(e){e.globalAlpha=this.opacity,D.animDetails.Draw(e,this.position.x-S/2,this.position.y-b/2,S,b),e.globalAlpha=1,GameManager.debugDraw&&(w(this.position.x,this.position.y,this.collisionRadius,"rgba(0, 0, 255, 0.2)","rgba(255, 255, 255, 1)",1),w(this.leftBoundX,this.position.y,2,"rgba(0, 0, 255, 0.2)","rgba(255, 255, 255, 1)",1),w(this.rightBoundX,this.position.y,2,"rgba(0, 0, 255, 0.2)","rgba(255, 255, 255, 1)",1))},M({item:$("#rhinoZone")[0],Down:function(e,t,a){v==f.aiming&&(I.clear(),C.clear(),y.position.x=t,P=a,T=!0)},Up:function(){v==f.aiming&&(e(),T=!1)},Move:function(e,t,a){v==f.aiming&&(T||(y.position.x=e.pageX),I.addValue(t),C.addValue(a))}})}function A(e){this.values=[],this.max=e,this.addValue=function(e){this.values.push(e),this.values.length>this.max&&this.values.shift()},this.getAverage=function(){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];return this.values.length>0&&(e/=this.values.length),e},this.clear=function(){this.values=[]}}function R(e){return!(e.right<0||e.left>GameManager.FrameSize.width||e.top>GameManager.FrameSize.height||e.bottom<0)}function C(){var e="image_tutorial_swipe",t=200,a=110,i=20+GameManager.FrameSize.width/2,n=GameManager.FrameSize.height-a/2,o=n-200,s=2,r=!1;this.position={x:0,y:0},this.elapsedTime=0,this.complete=!1,this.animation=null,this.Init=function(){this.position={x:i,y:n},this.elapsedTime=0,this.complete=!1,this.animation=document.getElementById(e).animDetails,this.animation.SetOnComplete(function(){r=!0})},this.Update=function(){r&&(this.position.y=GameManager.MathFunctions.Lerp(this.elapsedTime/s,n,o),this.elapsedTime+=GameManager.dt,this.elapsedTime>=s&&(this.complete=!0)),null!=this.animation&&this.animation.Update()},this.Draw=function(e){null!=this.animation&&this.animation.Draw(e,this.position.x-t/2,this.position.y-a/2,t,a,!0)}}function E(){var e="image_zach_jet",t="image_zach_chariot",a=200,i=200,n=150,o=170,s=.5,r=1,h=200,l=50,m="ship_fly",u="zach_hover",c={FLY_IN:"flyIn",CHARIOT_IN:"chariotIn",NONE:"none"},d={x:GameManager.FrameSize.width+a,y:200},g={x:-n,y:125},p={flyIn:{position:{x:GameManager.FrameSize.width/2,y:50},duration:3},chariotIn:{position:{x:200,y:125},duration:2}};this.shipPosition={x:0,y:0},this.chariotPosition={x:0,y:0},this.startPosition={x:0,y:0},this.elapsedTime=0,this.shipScale=1,this.state=c.NONE,this.complete=!1,this.shipAnimation=null,this.chariotAnimation=null,this.Init=function(){this.shipPosition={x:d.x,y:d.y},this.chariotPosition={x:g.x,y:g.y},this.startPosition={x:d.x,y:d.y},this.elapsedTime=0,this.shipScale=1,this.complete=!1,this.shipAnimation=document.getElementById(e).animDetails,this.chariotAnimation=document.getElementById(t).animDetails,this.SetState(c.FLY_IN)},this.Update=function(){switch(this.state){case c.FLY_IN:this.elapsedTime+=GameManager.dt,this.elapsedTime=GameManager.MathFunctions.Clamp(this.elapsedTime,0,p[this.state].duration),this.shipPosition.x=GameManager.MathFunctions.Lerp(this.elapsedTime/p[this.state].duration,this.startPosition.x,p[this.state].position.x),this.shipPosition.y=GameManager.MathFunctions.Lerp(this.elapsedTime/p[this.state].duration,this.startPosition.y,p[this.state].position.y),this.shipScale=GameManager.MathFunctions.Lerp((this.shipPosition.y-l)/(h-l),s,r),this.elapsedTime>=p[this.state].duration&&this.SetState(c.CHARIOT_IN);break;case c.CHARIOT_IN:this.elapsedTime+=GameManager.dt,this.elapsedTime=GameManager.MathFunctions.Clamp(this.elapsedTime,0,p[this.state].duration),this.chariotPosition.x=GameManager.MathFunctions.Lerp(this.elapsedTime/p[this.state].duration,this.startPosition.x,p[this.state].position.x),this.chariotPosition.y=GameManager.MathFunctions.Lerp(this.elapsedTime/p[this.state].duration,this.startPosition.y,p[this.state].position.y),this.elapsedTime>=p[this.state].duration&&(this.complete=!0)}},this.Draw=function(e){e.save(),e.translate(this.shipPosition.x,this.shipPosition.y),e.scale(this.shipScale,this.shipScale),this.shipAnimation.Draw(e,-a/2,-i/2,a,i),e.restore(),e.save(),e.translate(this.chariotPosition.x,this.chariotPosition.y),this.chariotAnimation.Draw(e,-n/2,-o/2,n,o),e.restore()},this.SetState=function(e){switch(this.state=e,this.elapsedTime=0,this.state){case c.FLY_IN:GameManager.audio.PlaySound(m,!1),this.startPosition={x:d.x,y:d.y};break;case c.CHARIOT_IN:GameManager.audio.PlaySound(u,!1),this.startPosition={x:g.x,y:g.y}}}}function P(){var e="image_nubs_run",t="image_nubs_walk",a=120,i=120,n=[{position:{x:GameManager.FrameSize.width/2,y:GameManager.FrameSize.height+i},duration:3,animation:e},{position:{x:GameManager.FrameSize.width+a,y:GameManager.FrameSize.height+i},duration:.1,animation:e},{position:{x:GameManager.FrameSize.width+a,y:425},duration:.1,animation:e},{position:{x:125,y:425},duration:2,animation:t}],o={x:GameManager.FrameSize.width/2,y:-i/2},s=1,r=.5,h=1.5,l=30,m=40;this.position={x:0,y:0},this.startPosition={x:0,y:0},this.destinationIndex=0,this.duration=0,this.scale=1,this.opacity=1,this.elapsedTime=0,this.complete=!1,this.animation=null,this.startDelay=0,this.Init=function(){this.position={x:o.x,y:o.y},this.startPosition={x:o.x,y:o.y},this.destinationIndex=0,this.duration=n.length>0?n[this.destinationIndex].duration:0,this.scale=r,this.opacity=0,this.elapsedTime=0,this.complete=!1,this.animation=document.getElementById(n[this.destinationIndex].animation).animDetails,this.startDelay=s},this.Update=function(){0!=this.duration&&(this.startDelay>0?this.startDelay-=GameManager.dt:(this.animation.Update(),this.complete||(this.position.x=GameManager.MathFunctions.Lerp(this.elapsedTime/this.duration,this.startPosition.x,n[this.destinationIndex].position.x),this.position.y=GameManager.MathFunctions.Lerp(this.elapsedTime/this.duration,this.startPosition.y,n[this.destinationIndex].position.y),this.scale=GameManager.MathFunctions.Lerp(this.position.y/GameManager.FrameSize.height,r,h),this.opacity=GameManager.MathFunctions.Lerp((this.position.y-l)/m,0,1),this.opacity=GameManager.MathFunctions.Clamp(this.opacity,0,1),this.elapsedTime+=GameManager.dt,this.elapsedTime>=n[this.destinationIndex].duration&&(this.destinationIndex++,this.destinationIndex>=n.length?this.complete=!0:(this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.duration=n[this.destinationIndex].duration,this.elapsedTime=0,this.animation=document.getElementById(n[this.destinationIndex].animation).animDetails)))))},this.Draw=function(e){e.save(),e.globalAlpha=this.opacity,e.translate(this.position.x,this.position.y),e.scale(this.scale,this.scale),this.animation.Draw(e,-a/2,-i/2,a,i,!0),e.restore()}}function D(){var e=new P,t=new E;this.complete=!1,this.Init=function(){e.Init(),t.Init()},this.Update=function(){e.Update(),t.Update(),e.complete&&t.complete&&(this.complete=!0)},this.Draw=function(a){e.Draw(a),t.Draw(a)}}function F(){F.ZACHBOT_TUTORIAL_HEIGHT=GameManager.FrameSize.height/2,F.TUTORIAL_TYPE={intro:"intro",swipe:"swipe"};var e={intro:{tutorial:new D,shown:!1},swipe:{tutorial:new C,shown:!1}};this.hasSwiped=!1,this.visible=!1,this.onCompleteCallback=null;var t=null;this.Show=function(a,i){this.onCompleteCallback=i||null,this.visible=!0,t=e[a].tutorial,null!=t&&(t.Init(),e[a].shown=!0)},this.Hide=function(){t=null,this.visible=!1,null!=this.onCompleteCallback&&this.onCompleteCallback()},this.HasShown=function(t){return e[t].shown},this.Init=function(){t=null,this.visible=!1,this.hasSwiped=!1;for(var a in e)e[a].shown=!1},this.Update=function(){null!=t&&(t.Update(),t.complete&&this.Hide())},this.Draw=function(e){null!=t&&t.Draw(e)}}function k(){var e="image_zach_chariot";k.WIDTH=150,k.HEIGHT=170;var t=75,a=85,i=10,n=.5,o=2*Math.PI,s={x:200,y:125},r={x:-150,y:125},h=2;this.animation=null,this.position={x:0,y:0},this.offsetY={x:0,y:0},this.wave=0,this.active=!1,this.complete=!1,this.elapsedLeaveTime=0,this.Init=function(){this.animation=document.getElementById(e).animDetails,this.position={x:s.x,y:s.y},this.offsetY=0,this.wave=0,this.active=!1,this.complete=!1,this.elapsedLeaveTime=0,this.animation.Reset()},this.Update=function(){if(this.active){for(this.animation.Update(),this.wave+=GameManager.dt*o*n;this.wave>o;)this.wave-=o;this.offsetY=Math.sin(this.wave)*i,this.complete&&this.elapsedLeaveTime<h?(this.elapsedLeaveTime+=GameManager.dt,this.position.x=GameManager.MathFunctions.Lerp(this.elapsedLeaveTime/h,s.x,r.x),this.position.y=GameManager.MathFunctions.Lerp(this.elapsedLeaveTime/h,s.y,r.y)):this.complete&&(this.active=!1)}},this.Draw=function(e){this.active&&this.animation.Draw(e,this.position.x-t,this.offsetY+this.position.y-a,k.WIDTH,k.HEIGHT)},this.Activate=function(){this.active=!0},this.Leave=function(){this.complete=!0}}function U(){var e="image_zach_jet";U.WIDTH=100,U.HEIGHT=100;var t=50,a=50,i={x:GameManager.FrameSize.width/2,y:50},n={x:0,y:-U.WIDTH},o=2;this.position={x:0,y:0},this.active=!1,this.started=!1,this.animation=null,this.elapsedTime=0,this.Init=function(){this.position={x:i.x,y:i.y},this.animation=document.getElementById(e).animDetails,this.animation.Reset(),this.active=!1,this.elapsedTime=0,this.started=!1},this.Update=function(){this.active&&this.started&&(this.animation.IsPaused()?(this.elapsedTime+=GameManager.dt,this.elapsedTime=GameManager.MathFunctions.Clamp(this.elapsedTime,0,o),this.position.x=GameManager.MathFunctions.Lerp(this.elapsedTime/o,i.x,n.x),this.position.y=GameManager.MathFunctions.Lerp(this.elapsedTime/o,i.y,n.y),this.elapsedTime>=o&&(this.active=!1)):this.animation.Update())},this.Draw=function(e){this.active&&this.animation.Draw(e,this.position.x-t,this.position.y-a,U.WIDTH,U.HEIGHT)},this.Activate=function(){this.active=!0},this.Start=function(){this.started=!0}}function H(){var e={head:{image:"image_zachbot_head",position:{x:0,y:-40},width:35,height:15},bodyBottom:{image:"image_zachbot_body_bottom",position:{x:0,y:23},width:25,height:30},bodyMiddle:{image:"image_zachbot_body_middle",position:{x:0,y:0},width:50,height:25},bodyTop:{image:"image_zachbot_body_top",position:{x:-5,y:0},width:70,height:65},arm:{image:"image_zachbot_arm",position:{x:30,y:0},width:30,height:70}},t={head:{image:e.head.image,position:{x:e.head.position.x,y:e.head.position.y},width:e.head.width,height:e.head.height,rotationSpeed:0,rotation:0,moveSpeed:0,direction:{x:0,y:0}},bodyBottom:{image:e.bodyBottom.image,position:{x:e.bodyBottom.position.x,y:e.bodyBottom.position.y},width:e.bodyBottom.width,height:e.bodyBottom.height,rotationSpeed:0,rotation:0,moveSpeed:0,direction:{x:0,y:0}},bodyMiddle:{image:e.bodyMiddle.image,position:{x:e.bodyMiddle.position.x,y:e.bodyMiddle.position.y},width:e.bodyMiddle.width,height:e.bodyMiddle.height,rotationSpeed:0,rotation:0,moveSpeed:0,direction:{x:0,y:0}},bodyTop:{image:e.bodyTop.image,position:{x:e.bodyTop.position.x,y:e.bodyTop.position.y},width:e.bodyTop.width,height:e.bodyTop.height,rotationSpeed:0,rotation:0,moveSpeed:0,direction:{x:0,y:0}},arm:{image:e.arm.image,position:{x:e.arm.position.x,y:e.arm.position.y},width:e.arm.width,height:e.arm.height,rotationSpeed:0,rotation:0,moveSpeed:0,direction:{x:0,y:0}}},a=1,i=10,n=5,o=100,s=200,r=Math.PI;this.position={x:0,y:0},this.scale=1,this.opacity=1,this.elapsedTime=0,this.alive=!1,this.Init=function(){this.alive=!0,this.elapsedTime=0;for(var a in t)t[a].position={x:e[a].position.x,y:e[a].position.y},t[a].direction.x=GameManager.MathFunctions.RandomInt(-i,i)/i,t[a].direction.y=GameManager.MathFunctions.RandomInt(-i,i)/i,t[a].rotation=0,t[a].rotationSpeed=GameManager.MathFunctions.RandomInt(-n,n)/n*r,t[a].moveSpeed=GameManager.MathFunctions.RandomInt(o,s);this.opacity=1},this.Update=function(){if(this.alive){for(var e in t){var i=t[e];i.position.x+=i.direction.x*i.moveSpeed*GameManager.dt,i.position.y+=i.direction.y*i.moveSpeed*GameManager.dt,i.rotation+=i.rotationSpeed*GameManager.dt}this.elapsedTime+=GameManager.dt,this.opacity=GameManager.MathFunctions.Lerp(this.elapsedTime/a,1,0),this.opacity=GameManager.MathFunctions.Clamp(this.opacity,0,1),0==this.opacity&&(this.alive=!1)}},this.Draw=function(e){if(this.alive){e.globalAlpha=this.opacity;for(var a in t){var i=t[a];e.save(),e.translate(this.position.x+i.position.x,this.position.y+i.position.y),e.rotate(i.rotation),e.scale(this.scale,this.scale),e.drawImage(document.getElementById(t[a].image),-i.width/2,-i.height/2,i.width,i.height),e.restore()}e.globalAlpha=1}}}function O(e){var t=e,a=[];O.Explode=function(e,t){for(var i=0;i<a.length;i++)if(!a[i].alive){a[i].Init(),a[i].position={x:e.x,y:e.y},a[i].scale=t;break}},this.Init=function(){for(var e=0;e<a.length;e++)a[e].alive=!1},this.Update=function(){for(var e=0;e<a.length;e++)a[e].Update()},this.Draw=function(e){for(var t=0;t<a.length;t++)a[t].Draw(e)};for(var i=0;t>i;i++){var n=new H;a.push(n)}}function L(){L.DEFAULT_WIDTH=100,L.DEFAULT_HEIGHT=100,L.MIN_SCALE=.5,L.MAX_SCALE=1.5,L.IMAGE_REGULAR="image_zachbot_regular",L.IMAGE_TOUGH="image_zachbot_tough",L.IMAGE_GHOST="image_zachbot_dissapearing",L.IMAGE_SHIELD="image_shield";var e={image:"image_shield",width:70,height:70,offsetY:10},t={spawning:"spawning",alive:"alive",hit:"hit",destroyed:"destroyed"};L.ZACHBOT_TYPE={tough:"tough",ghost:"ghost",regular:"regular"};var a=30,i=25,n=.5,o=36,s=2,r=18,h=GameManager.MathFunctions.DegToRad(8),l=2*Math.PI,m=2,u=.2;this.state=null,this.type=null,this.relativePosition={x:0,y:-L.DEFAULT_HEIGHT},this.position={x:0,y:-L.DEFAULT_HEIGHT},this.width=L.DEFAULT_WIDTH,this.height=L.DEFAULT_HEIGHT,this.scale=1,this.opacity=1,this.parent=null,this.collisionRadius=o,this.colliding=!1,this.offsetY=0,this.shieldRotation=0,this.spawningComplete=!1,this.vanishing=!1,this.image=L.IMAGE_REGULAR,this.IsAlive=function(){return this.state==t.alive},this.Update=function(){switch(this.state){case t.spawning:this.UpdateSpawning(),this.UpdateAlive(),this.opacity>=n&&(this.state=t.alive);case t.alive:this.UpdateSpawning(),this.UpdateAlive();break;case t.hit:GameManager.score+=GameManager.scoreIncrement,d.Trigger("+"+GameManager.scoreIncrement,this.position),GameManager.scoreIncrement++,O.Explode(this.position,this.scale),this.state=t.destroyed,this.OnDestroy();break;case t.destroyed:}},this.Draw=function(a){if(this.state!=t.destroyed){var i=this.position.y+this.offsetY;a.save(),a.translate(this.position.x,i),a.scale(this.scale,this.scale),a.globalAlpha=this.opacity,a.drawImage(document.getElementById(this.image),-this.width/2,-this.height/2,this.width,this.height),this.type==L.ZACHBOT_TYPE.tough&&(a.rotate(this.shieldRotation),a.drawImage(document.getElementById(e.image),-e.width/2,e.offsetY-e.height/2,e.width,e.height)),a.restore(),GameManager.debugDraw&&w(this.position.x,i,this.collisionRadius,"rgba(255, 0, 0, 0.2)","rgba(255, 255, 255, 1)",1)}},this.UpdateSpawning=function(){!this.spawningComplete&&this.position.y>a&&this.opacity<1?(this.opacity=GameManager.MathFunctions.Lerp((this.position.y-a)/i,0,1),this.opacity=GameManager.MathFunctions.Clamp(this.opacity,0,1)):this.position.y>a&&this.opacity>=1&&(this.spawningComplete=!0)},this.UpdateAlive=function(){this.position.x=this.relativePosition.x,this.position.y=this.relativePosition.y,void 0!=this.parent&&null!=this.parent&&(this.position.x+=this.parent.position.x,this.position.y+=this.parent.position.y);for(var e=this.position.y/GameManager.FrameSize.height*l*r;e>l;)e-=l;this.offsetY=Math.sin(e)*s,this.shieldRotation=Math.sin(e/2)*h,this.scale=GameManager.MathFunctions.Lerp(this.position.y/GameManager.FrameSize.height,L.MIN_SCALE,L.MAX_SCALE),this.collisionRadius=o*this.scale,this.position.y+this.height/2>GameManager.FrameSize.height&&this.OnEndReached(),this.type==L.ZACHBOT_TYPE.ghost&&this.spawningComplete&&(this.vanishing?(this.opacity=GameManager.MathFunctions.Clamp(this.opacity-GameManager.dt/m,0,1),0==this.opacity&&(this.vanishing=!1)):(this.opacity=GameManager.MathFunctions.Clamp(this.opacity+GameManager.dt/m,0,1),1==this.opacity&&(this.vanishing=!0)))},this.Respawn=function(e){switch(this.state=t.spawning,this.type=e,this.relativePosition={x:0,y:-L.DEFAULT_HEIGHT},this.position={x:0,y:-L.DEFAULT_HEIGHT},this.width=L.DEFAULT_WIDTH,this.height=L.DEFAULT_HEIGHT,this.scale=1,this.opacity=0,this.colliding=!1,this.spawningComplete=!1,this.vanishing=!1,this.type){case L.ZACHBOT_TYPE.regular:this.image=L.IMAGE_REGULAR;break;case L.ZACHBOT_TYPE.tough:this.image=L.IMAGE_TOUGH;break;case L.ZACHBOT_TYPE.ghost:this.image=L.IMAGE_GHOST}},this.OnCollisionEnter=function(){switch(GameManager.explosionEffectManager.Trigger(this.position),this.colliding=!0,this.type){case L.ZACHBOT_TYPE.regular:this.state=t.hit;break;case L.ZACHBOT_TYPE.tough:this.type=L.ZACHBOT_TYPE.regular,GameManager.hitToughBot||RhinoBowlAudio.isPlaying||(GameManager.hitToughBot=!0,GameManager.EnemyInstruction("toughBot"));break;case L.ZACHBOT_TYPE.ghost:this.opacity>u&&(this.state=t.hit),GameManager.hitDissapearingBot||RhinoBowlAudio.isPlaying||(GameManager.hitDissapearingBot=!0,GameManager.EnemyInstruction("dissapearingBot"))}},this.OnCollisionExit=function(){this.colliding=!1},this.OnDestroy=function(){},this.OnEndReached=function(){}}function z(e,t){var a={x:t,y:0},i={x:10,y:23.3},n={x:30,y:70},o=41,s=4,r=10,h=2,l=100,m={x:i.x,y:i.y},u=[],c=0,d=o,g=r,p=0;this.position={x:a.x,y:a.y},this.active=!1,this.endCallback=null,this.GetZachbots=function(){return u},this.Activate=function(e){this.active=!0,this.endCallback=e||null},this.Init=function(){p=0,this.Reset(),this.AdjustFormation()},this.Update=function(){c==u.length&&(p++,this.Reset(),null!=this.endCallback&&this.endCallback()),this.AdjustFormation(),this.position.y+=d*GameManager.dt,m.x=GameManager.MathFunctions.Lerp(this.position.y/GameManager.FrameSize.height,i.x,n.x),m.x=GameManager.MathFunctions.Clamp(m.x,i.x,n.x),m.y=GameManager.MathFunctions.Lerp(this.position.y/GameManager.FrameSize.height,i.y,n.y),m.y=GameManager.MathFunctions.Clamp(m.y,i.y,n.y);for(var e=0;e<u.length;e++)u[e].Update();0==p&&this.position.y>F.ZACHBOT_TUTORIAL_HEIGHT&&(GameManager.tutorialManager.HasShown(F.TUTORIAL_TYPE.swipe)||GameManager.tutorialManager.hasSwiped||GameManager.tutorialManager.Show(F.TUTORIAL_TYPE.swipe))},this.Draw=function(e){for(var t=u.length;t>0;t--)u[t-1].Draw(e)},this.AdjustFormation=function(){for(var e=1,t=0;t<u.length;){for(var a=m.x*(e-1),i=-L.DEFAULT_HEIGHT-m.y*(e-1),n=GameManager.MathFunctions.Lerp((this.position.y+i)/GameManager.FrameSize.height,L.MIN_SCALE,L.MAX_SCALE),o=L.DEFAULT_WIDTH*n,s=o*(e-1)+a,r=0;e>r;r++){var h={x:0,y:0};h.x=-(s/2)+(o+m.x)*r,h.y=i;var l=t+r;l<u.length&&(u[l].relativePosition=h)}t+=e,e++}},this.Reset=function(){c=0,m={x:i.x,y:i.y},d=o+s*p,g=GameManager.MathFunctions.Clamp(r+h*p,0,l),this.position={x:a.x,y:a.y};for(var e=0;e<u.length;e++){var t=L.ZACHBOT_TYPE.regular,n=GameManager.MathFunctions.RandomInt(1,l)<g;if(n){var f=[];for(var y in L.ZACHBOT_TYPE)y!=L.ZACHBOT_TYPE.regular&&f.push(y);t=f[GameManager.MathFunctions.RandomInt(0,f.length-1)]}u[e].Respawn(t)}this.active=!1},this.ZachbotDestroyed=function(){c++},this.EndReached=function(){GameManager.endGame.Open()};for(var f=0;e>f;f++){var y=new L;y.parent=this,y.OnDestroy=this.ZachbotDestroyed,y.OnEndReached=this.EndReached,u.push(y)}}function N(){var e=[{botCount:10,x:GameManager.FrameSize.width/2},{botCount:6,x:GameManager.FrameSize.width/2},{botCount:3,x:GameManager.FrameSize.width/2+100},{botCount:3,x:GameManager.FrameSize.width/2-100}],t=this;
this.formations=[],this.active=!1,this.Init=function(){for(var e=0;e<this.formations.length;e++)this.formations[e].Init();this.StartRandomFormation(),this.active=!1},this.Update=function(){if(this.active)for(var e=0;e<this.formations.length;e++)this.formations[e].active&&this.formations[e].Update()},this.Draw=function(e){if(this.active)for(var t=0;t<this.formations.length;t++)this.formations[t].active&&this.formations[t].Draw(e)},this.StartRandomFormation=function(){GameManager.ZachbotWaveCount++;var e=GameManager.MathFunctions.RandomInt(0,t.formations.length-1);t.formations[e].Activate(t.StartRandomFormation)},this.Activate=function(){this.active=!0};for(var a=0;a<e.length;a++){var i=new z(e[a].botCount,e[a].x);this.formations.push(i)}}t.GameWrap=e;var W={music:"music",dialog:"dialog",effect:"effect"};CookieJar={Write:function(e,t){document.cookie=e+"="+t},Read:function(e){try{return document.cookie.match(new RegExp(e+"=([^;]+)"))[1]}catch(t){return null}},Remove:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}};var Y="gameView",Z="svgCanvas",X="gameImages",V="image_";GameManager={InitialSettings:{MasterVolume:1,BackgroundMusicVolume:.1,disableLocalAudio:!1},FrameSize:{width:988,height:556},debugDraw:!1,pauseElement:{},isPaused:!1,time:new Date,dt:0,clearColor:"#000000",averageFps:0},svgns="http://www.w3.org/2000/svg",xlinkns="http://www.w3.org/1999/xlink",function(){function e(){var e=document.visibilityState;"visible"==e?GameManager.audio.Unmute():"hidden"==e&&GameManager.audio.Mute()}function t(){function e(){setTimeout(function(){var e=$("#"+Y)[0].getClientRects(),t=e[0].width/e[0].height,a=GameManager.FrameSize.width/GameManager.FrameSize.height;GameManager.screenScale=t>a?e[0].height/GameManager.FrameSize.height:e[0].width/GameManager.FrameSize.width,$("#gameCenter")[0].setAttribute("style","transform: scale("+GameManager.screenScale+"); -webkit-transform: scale("+GameManager.screenScale+")")},500)}var t=h();if(!t)return void(location.href="./svg_not_supported.html");if(!window.console){var a=window.console={};a.log=a.warn=a.error=function(){}}window.Array&&!window.Array.isArray&&(window.Array.isArray=function(e){return e instanceof Array}),GameManager.support=r(),GameManager.performance=l(GameManager.support.performanceMode),GameManager.audio=o(),GameManager.help=c(),GameManager.endGame=_(),y(),$("#"+Z)[0].setAttribute("class",GameManager.performance.svgClass),document.body.onorientationchange=e,window.onresize=e,e(),GameManager.pauseElement=document.createElementNS(svgns,"rect"),GameManager.pauseElement.setAttribute("x",0),GameManager.pauseElement.setAttribute("y",0),GameManager.pauseElement.setAttribute("width",GameManager.FrameSize.width),GameManager.pauseElement.setAttribute("height",GameManager.FrameSize.height),GameManager.pauseElement.setAttribute("fill","rgba(0,0,0,0)"),GameManager.pauseElement.setAttribute("style","display:none"),GameManager.frontCanvas=document.getElementById("gameCanvas"),GameManager.frontContext=GameManager.frontCanvas.getContext("2d"),GameManager.sceneManager=new g,GameManager.sceneManager.AddScene(T()),GameManager.sceneManager.AddScene(G()),GameManager.timer=p(GameManager.performance.frameTime,function(){var e=new Date;GameManager.dt=Math.min((e-GameManager.time)/1e3,GameManager.performance.frameTime/1e3),GameManager.time=e,GameManager.isPaused||(GameManager.sceneManager.Update(),GameManager.sceneManager.Draw(GameManager.frontContext)),GameManager.support.iOS&&window.scrollTo(0,0)});var i={images:[{name:"loadingBackground",src:"./Images/Common/loading_background.png"},{name:"loading_rhinoBowl",src:"./Images/Common/rhino_bowl_loading.png"},{name:"loading_powerSuitMaker",src:"./Images/Common/power_suit_loading.png"},{name:"loading_fishMobiles",src:"./Images/Common/fishmobile_loading.png"}],sounds:[{name:"click",path:"./Sounds/Common",file:"click",type:W.effect}]};GameManager.PreLoadFromList(i.images,i.sounds,function(){GameManager.sceneManager.ChangeScene("menuScene",!1),u(),GameManager.timer.Start()})}window.onload=t,document.addEventListener("visibilitychange",e,!1),GameManager.PreLoadFromList=function(e,t,a,i){function o(){h++,r()}function s(){l++,r()}function r(){if(void 0!=i&&null!=i){var n=(h+l)/(e.length+t.length);i(n)}h==e.length&&l==t.length&&a()}var h=0,l=0;if((void 0==e||null==e)&&(e=[]),void 0!=t&&null!=t&&GameManager.support.webAudio||(t=[]),e.length+t.length==0)return void a();for(var m=document.getElementById(X),u=0;u<e.length;u++){var c=V+e[u].name;if(null!=document.getElementById(c))o();else{var d=new Image;d.onload=function(){void 0!=this.anim&&n(this,this.anim),o()},d.onerror=function(e){console.error("Failed to load image: "+e.originalTarget.src),o()},d.src=e[u].src,m.appendChild(d),d.setAttribute("id",c),d.anim=e[u].anim}}for(var g=0;g<t.length;g++)GameManager.audio.LoadSound(t[g].name,t[g].path,t[g].file,t[g].type,1,s)},GameManager.Pause=function(){GameManager.audio.Pause(),GameManager.isPaused=!0,document.getElementById(Z).appendChild(GameManager.pauseElement)},GameManager.Resume=function(){var e=document.getElementById(Z);GameManager.pauseElement.parentNode==e&&e.removeChild(GameManager.pauseElement),GameManager.isPaused=!1,GameManager.audio.Resume()},GameManager.GetWrappedText=function(e,t,a){var i=[],n=t.split(" ");if(0!=n.length){for(var o=n[0]+" ",s=1;s<n.length;s++){var r=o+n[s]+" ",h=e.measureText(r),l=h.width;l>a?(i.push(o),o=n[s]+" "):o=r}return i.push(o),i}},GameManager.WrapText=function(e,t,a,i,n,o){for(var s=GameManager.GetWrappedText(e,t,n),r=0;r<s.length;r++)e.fillText(s[r],a,i),i+=o},GameManager.MathFunctions={Clamp:function(e,t,a){return Math.min(Math.max(e,t),a)},RotationDifference:function(e,t){for(;e>t+Math.PI;)e-=2*Math.PI;for(;e<t-Math.PI;)e+=2*Math.PI;return t-e},Lerp:function(e,t,a){return t+e*(a-t)},DegToRad:function(e){return e*(Math.PI/180)},RadToDeg:function(e){return e*(180/Math.PI)},RandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Curve:function(e,t,a,i,n){var o=1-e,s=e*e,r=o*o,h=r*o,l=s*e,m={x:h*t.x,y:h*t.y};return m={x:m.x+3*r*e*a.x,y:m.y+3*r*e*a.y},m={x:m.x+3*o*s*i.x,y:m.y+3*o*s*i.y},m={x:m.x+l*n.x,y:m.y+l*n.y}}},GameManager.HexToRGBA=function(e,t,a){var i=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),o=parseInt(e.substr(5,2),16),s=t||1,r=a||1;return"rgba("+Math.round(i*r)+","+Math.round(n*r)+","+Math.round(o*r)+","+s+")"},GameManager.RequestJson=function(e,t,a){var i=new XMLHttpRequest,n=t||!1;return i.open("GET",e+"?timer="+(new Date).getMilliseconds(),n),n&&(i.onload=function(){if(200===i.status){var e=JSON.parse(i.responseText);a(e)}},i.onerror=function(){console.error(i.statusText)}),i.send(),n?void 0:200===i.status?JSON.parse(i.responseText):null}}();var K=[],J=[37,38,39,40];x.prototype=new S,x.prototype.constructor=S,b.prototype=new S,b.prototype.constructor=S;var j={title:"chris_title",intro1:"chris_intro1",intro2:"chris_intro2",introTouch:"chris_intro_touch",introMouse:"chris_intro_mouse",encouragement1:"chris_encouragement1",encouragement2:"chris_encouragement2",encouragement3:"chris_encouragement3",encouragement4:"chris_encouragement4",encouragement5:"chris_encouragement5",encouragement6:"chris_encouragement6",encouragement7:"chris_encouragement7",negative1:"chris_negative1",negative2:"chris_negative2",negative3:"chris_negative3",suit1:"chris_suit1",suit2:"chris_suit2",toughBot:"chris_tough_bot",dissapearingBot:"chris_dissapearing_bot"},q={title:"martin_title",intro1:"martin_intro1",intro2:"martin_intro2",introTouch:"martin_intro_touch",introMouse:"martin_intro_mouse",encouragement1:"martin_encouragement1",encouragement2:"martin_encouragement2",encouragement3:"martin_encouragement3",encouragement4:"martin_encouragement4",encouragement5:"martin_encouragement5",encouragement6:"martin_encouragement6",encouragement7:"martin_encouragement7",negative1:"martin_negative1",negative2:"martin_negative2",negative3:"martin_negative3",suit1:"martin_suit1",suit2:"martin_suit2",toughBot:"martin_tough_bot",dissapearingBot:"martin_dissapearing_bot"};RhinoBowlAudio={encouragement:{name:"encouragement",max:5},negative:{name:"negative",max:3},suit:{name:"suit",max:2},isPlaying:!1,PlayRandomBro:function(e,t){var a=function(){RhinoBowlAudio.isPlaying=!1,null!=t&&void 0!=t&&t()},i=GameManager.MathFunctions.RandomInt(0,1);return GameManager.audio.PlaySound(0==i?j[e]:q[e],!1,a),RhinoBowlAudio.isPlaying=!0,0==i?S.CHRIS_NAME:S.MARTIN_NAME},PlayRandomOfType:function(e,t){var a=GameManager.MathFunctions.RandomInt(1,e.max);return RhinoBowlAudio.PlayRandomBro(e.name+a,t)}}}({},function(){return this}());