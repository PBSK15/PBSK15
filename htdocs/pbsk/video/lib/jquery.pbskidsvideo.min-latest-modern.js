/*! PBS KIDS Video Plugin v2.7.8 Copyright (c) 1995-2022 PBSKIDS.org */
!function(){window.org=window.org||{},window.org.pbskids=window.org.pbskids||{},window.org.pbskids.video=window.org.pbskids.video||{},window.org.pbskids.video.version="2.7.8";var a=function(a){return sessionStorage&&"true"===sessionStorage.getItem(a)},b="PBS KIDS Video Plugin",c="2.7.8",d=/^(((?!www(\-tc)?|cms(\-tc)?\.).+)pbskids\.org|pbskids\.localhost)$/.test(window.location.hostname)||a("debugVideo"),e="https://pbskids.org/";"pbskids.localhost"===window.location.hostname?e="/":/^(.+\.)?playground\.pbskids\.org$/.test(window.location.hostname)||a("usePlayground")?e="https://playground.pbskids.org/":(/^(.+\.)?preprod\.pbskids\.org$/.test(window.location.hostname)||"stage.pbskids.org"===window.location.hostname)&&(e="https://preprod.pbskids.org/");var f,g,h,i,j,k,l,m=/(cms\-dev(\-tc)\.preprod?|stage)\.pbskids\.org/.test(window.location.hostname)||a("producerPlayerDev")?"https://producerplayer-dev.services.pbskids.org/":"https://producerplayer.services.pbskids.org/",n=function(a,e,f,g){if((d===!0||g===!0)&&("string"==typeof a||e?a=b+" ver. "+c+" | "+a:(e=a,a=b+" ver. "+c+" | "),void 0===e&&(e=""),"undefined"!=typeof console))if("error"===f&&console.error)console.error(a,e);else{if("error"===f&&window.Error)throw new Error(a);"info"===f&&console.info?console.info(a,e):"warn"===f&&console.warn?console.warn(a,e):"debug"===f&&console.debug?console.debug(a,e):console.log?console.log(a,e):"undefined"!=typeof window.debug&&window.debug.log.apply(a,e)}},o=function(a,b,c){n(a,b,"debug",c)},p=function(a,b,c){n(a,b,"info",c)},q=function(a,b,c){n(a,b,"warn",c)},r=function(a,b,c){n(a,b,"error",c)},s=!1,t=[/^http(s)?:\/\/(.+\.)?pbskids\.org/,/^http(s)?:\/\/(www|dipsy)?(-tc)?\.?pbs\.org/,/^http(s)?:\/\/(www)?(-tc)?\.pbskids\.wested\.org/,/^http(s)?:\/\/(.+\.)?curiousmedia\.com/,/^http(s)?:\/\/tortuga\.dev/,/^http(s)?:\/\/tortuga-docker\.localhost/,/^http(s)?:\/\/pbskids\.local/];if(window.top!==window){l=document.referrer;for(var u=0;u<t.length;u++)if(t[u].test(l)){s=!0,/\.org\/producerplayer/.test(l)&&(l=window.top.location.href);break}if(!s)return void r("This site does not have permission to frame this PBS KIDS video player",{href:l},"error",!0)}else l=window.location.href;p("_href:",l);var v="national",w="UA-4005001-1",x="operations",y="UA-4699355-13",z=function(a,b,c,e,g,h){a="Video - "+f+" - "+a,e=void 0===e||null===e||isNaN(e)?void 0:Math.round(e);for(var i=0;i<g.length;i++){var j=__KIDS_Video_Tracking.getByName(g[i]);j?(d&&h&&o("_trackEvent()",{accountName:g[i],accountID:j.get("trackingId"),category:a,action:b,label:c,value:e}),__KIDS_Video_Tracking(g[i]+".send","event",a,b,c,e)):q("No tracker for, '"+g[i]+"' ",null,"warn")}},A=function(a,b,c){z(a,b,c||"",null,[x],!0)},B=function(a,b){z("Controls",a,b,null,[v])};org.pbskids.video.PlayerEvent=function(){var a="org_pbskids_video_PlayerEvent";return{debug:!1,PLAYER_READY:a+"_PlayerReady"}}(),org.pbskids.video.VideoEvent=function(){var a="org_pbskids_video_VideoEvent";return{debug:!1,CAN_PLAY_STATE_CHANGE:a+"_CanPlayStateChange",CAN_SEEK_STATE_CHANGE:a+"_CanSeekStateChange",CAPTIONS_STATE_CHANGE:a+"_CaptionsStateChange",CURRENT_TIME_CHANGE:a+"_CurrentTimeChange",DURATION_CHANGE:a+"_DurationChange",LOAD_STATE_CHANGE:a+"_LoadStateChange",MUTE_CHANGE:a+"_MuteChange",PLAY_STATE_CHANGE:a+"_PlayStateChange",SEEKING_CHANGE:a+"_SeekingChange",VIDEO_START:a+"_VideoStart",VIDEO_END:a+"_VideoEnd",VIDEO_VIEWED:a+"_VideoViewed",VIDEO_UNLOAD:a+"_VideoUnload",VOLUME_CHANGE:a+"_VolumeChange",AD_START:a+"_AdStart",AD_END:a+"_AdEnd"}}(),org.pbskids.video.VideoErrorEvent=function(){var a="org_pbskids_video_VideoErrorEvent";return{debug:!1,GEO_RESTRICTED:a+"_GeoRestricted",VIDEO_NOT_FOUND:a+"_VideoNotFound",VIDEO_EXPIRED:a+"_VideoExpired",NO_RESPONSE:a+"_NoResponse"}}(),org.pbskids.video.PlaylistEvent=function(){var a="org_pbskids_video_PlaylistEvent";return{debug:!1,REFRESH_START:a+"_RefreshStart",REFRESH_COMPLETE:a+"_RefreshComplete",APPEND_START:a+"_AppendStart",APPEND_COMPLETE:a+"_AppendComplete",COPY_START:a+"_CopyStart",COPY_COMPLETE:a+"_CopyComplete",RELEASE_SELECTED:a+"_ReleaseSelected"}}(),function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,function(){function a(a,b){return a.href=b}function b(a){ga.set(a)}function c(a){if(100!=a.get(Dc)&&u(Wa(a,rc))%1e4>=100*Xa(a,Dc))throw"abort"}function d(a){if(Ca(Wa(a,tc)))throw"abort"}function e(){var a=Aa[S][U];if("http:"!=a&&"https:"!=a)throw"abort"}function f(a){try{za[X][A]?b(42):za.XMLHttpRequest&&"withCredentials"in new za.XMLHttpRequest&&b(40)}catch(c){}a.set(_b,ia(a),!0),a.set(pb,Xa(a,pb)+1);var d=[];Ua.map(function(b,c){if(c.F){var e=a.get(b);void 0!=e&&e!=c[N]&&("boolean"==typeof e&&(e*=1),d[R](c.F+"="+ra(""+e)))}}),d[R]("z="+Ra()),a.set(mb,d[C]("&"),!0)}function g(a){var b=Wa(a,Gc)||Ia()+"/collect",c=Wa(a,ob);if(!c&&a.get(nb)&&(c="beacon"),c){var d=Wa(a,mb),e=a.get(lb),e=e||qa;"image"==c?La(b,d,e):"xhr"==c&&Ma(b,d,e)||"beacon"==c&&Na(b,d,e)||Ka(b,d,e)}else Ka(b,Wa(a,mb),a.get(lb));a.set(lb,qa,!0)}function h(a){var b=za.gaData;b&&(b.expId&&a.set(Tb,b.expId),b.expVar&&a.set(Ub,b.expVar))}function i(){if(za[X]&&"preview"==za[X].loadPurpose)throw"abort"}function j(a){var b=za.gaDevIds;la(b)&&0!=b[$]&&a.set("&did",b[C](","),!0)}function k(a){if(!a.get(tc))throw"abort"}function l(a){var c=Xa(a,Yb);500<=c&&b(15);var d=Wa(a,kb);if("transaction"!=d&&"item"!=d){var d=Xa(a,$b),e=(new Date)[da](),f=Xa(a,Zb);if(0==f&&a.set(Zb,e),f=v.round(2*(e-f)/1e3),0<f&&(d=v.min(d+f,20),a.set(Zb,e)),0>=d)throw"abort";a.set($b,--d)}a.set(Yb,++c)}function m(a,c,d,e){c[a]=function(){try{return e&&b(e),d[W](this,arguments)}catch(c){throw Oa("exc",a,c&&c[F]),c}}}function n(){var a,b,c;if((c=(c=za[X])?c.plugins:null)&&c[$])for(var d=0;d<c[$]&&!b;d++){var e=c[d];-1<e[F][K]("Shockwave Flash")&&(b=e.description)}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a.GetVariable("$version")}catch(f){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b="WIN 6,0,21,0",a.AllowScriptAccess="always",b=a.GetVariable("$version")}catch(g){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a.GetVariable("$version")}catch(h){}return b&&(a=b[y](/[\d]+/g))&&3<=a[$]&&(b=a[0]+"."+a[1]+" r"+a[2]),b||void 0}function o(a,b,c){"none"==b&&(b="");var d=[],e=Da(a);a="__utma"==a?6:2;for(var f=0;f<e[$];f++){var g=(""+e[f])[B](".");g[$]>=a&&d[R]({hash:g[0],R:e[f],O:g})}return 0==d[$]?void 0:1==d[$]?d[0]:p(b,d)||p(c,d)||p(null,d)||d[0]}function p(a,b){var c,d;null==a?c=d=1:(c=u(a),d=u(na(a,".")?a[P](1):"."+a));for(var e=0;e<b[$];e++)if(b[e][ba]==c||b[e][ba]==d)return b[e]}function q(a){a=a.get(rc);var b=r(a,0);return"_ga=1."+ra(b+"."+a)}function r(a,b){for(var c=new Date,d=za[X],e=d.plugins||[],c=[a,d.userAgent,c.getTimezoneOffset(),c.getYear(),c.getDate(),c.getHours(),c.getMinutes()+b],d=0;d<e[$];++d)c[R](e[d].description);return u(c[C]("."))}function s(a,b){if(b==Aa[S][O])return!1;for(var c=0;c<a[$];c++)if(a[c]instanceof RegExp){if(a[c][_](b))return!0}else if(0<=b[K](a[c]))return!0;return!1}function t(a){return 0<=a[K](".")||0<=a[K](":")}function u(a){var b,c=1,d=0;if(a)for(c=0,b=a[$]-1;0<=b;b--)d=a.charCodeAt(b),c=(c<<6&268435455)+d+(d<<14),d=266338304&c,c=0!=d?c^d>>21:c;return c}var v=Math,w=window,x=encodeURIComponent,y="match",z="href",A="sendBeacon",B="split",C="join",D="slice",E="target",F="name",G="call",H="clientHeight",I="prototype",J="port",K="indexOf",L="action",M="replace",N="defaultValue",O="hostname",P="substring",Q="data",R="push",S="location",T="search",U="protocol",V="hasOwnProperty",W="apply",X="navigator",Y="clientWidth",Z="cookie",$="length",_="test",aa="toLowerCase",ba="hash",ca="setAttribute",da="getTime",ea="createElement",fa=function(a){this.w=a||[]};fa[I].set=function(a){this.w[a]=!0},fa[I].encode=function(){for(var a=[],b=0;b<this.w[$];b++)this.w[b]&&(a[v.floor(b/6)]=a[v.floor(b/6)]^1<<b%6);for(b=0;b<a[$];b++)a[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a[b]||0);return a[C]("")+"~"};var ga=new fa,ha=function(a,b){var c=new fa(ja(a));c.set(b),a.set(ac,c.w)},ia=function(a){a=ja(a),a=new fa(a);for(var b=ga.w[D](),c=0;c<a.w[$];c++)b[c]=b[c]||a.w[c];return new fa(b).encode()},ja=function(a){return a=a.get(ac),la(a)||(a=[]),a},ka=function(a){return"function"==typeof a},la=function(a){return"[object Array]"==Object[I].toString[G](Object(a))},ma=function(a){return void 0!=a&&-1<(a.constructor+"")[K]("String")},na=function(a,b){return 0==a[K](b)},oa=function(a){return a?a[M](/^[\s\xa0]+|[\s\xa0]+$/g,""):""},pa=function(a){var b=Aa[ea]("img");return b.width=1,b.height=1,b.src=a,b},qa=function(){},ra=function(a){return x instanceof Function?x(a):(b(28),a)},sa=function(a,c,d,e){try{a.addEventListener?a.addEventListener(c,d,!!e):a.attachEvent&&a.attachEvent("on"+c,d)}catch(f){b(27)}},ta=function(a,b){if(a){var c=Aa[ea]("script");c.type="text/javascript",c.async=!0,c.src=a,b&&(c.id=b);var d=Aa.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}},ua=function(){return"https:"==Aa[S][U]},va=function(){var a=""+Aa[S][O];return 0==a[K]("www.")?a[P](4):a},wa=function(a){var b=Aa.referrer;if(/^https?:\/\//i[_](b)){if(a)return b;a="//"+Aa[S][O];var c=b[K](a);if((5==c||6==c)&&(a=b.charAt(c+a[$]),"/"==a||"?"==a||""==a||":"==a))return;return b}},xa=function(a,b){if(1==b[$]&&null!=b[0]&&"object"==typeof b[0])return b[0];for(var c={},d=v.min(a[$]+1,b[$]),e=0;e<d;e++){if("object"==typeof b[e]){for(var f in b[e])b[e][V](f)&&(c[f]=b[e][f]);break}e<a[$]&&(c[a[e]]=b[e])}return c},ya=function(){this.keys=[],this.values={},this.m={}};ya[I].set=function(a,b,c){this.keys[R](a),c?this.m[":"+a]=b:this.values[":"+a]=b},ya[I].get=function(a){return this.m[V](":"+a)?this.m[":"+a]:this.values[":"+a]},ya[I].map=function(a){for(var b=0;b<this.keys[$];b++){var c=this.keys[b],d=this.get(c);d&&a(c,d)}};var za=w,Aa=document,Ba=function(){for(var a=za[X].userAgent+(Aa[Z]?Aa[Z]:"")+(Aa.referrer?Aa.referrer:""),b=a[$],c=za.history[$];0<c;)a+=c--^b++;return u(a)},Ca=function(a){var b=za._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===za["ga-disable-"+a])return!0;try{var c=za.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(d){}return!1},Da=function(a){var b=[],c=Aa[Z][B](";");a=new RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c[$];d++){var e=c[d][y](a);e&&b[R](e[1])}return b},Ea=function(a,c,d,e,f,g){if(f=!Ca(f)&&!(Ha[_](Aa[S][O])||"/"==d&&Ga[_](e)),!f)return!1;if(c&&1200<c[$]&&(c=c[P](0,1200),b(24)),d=a+"="+c+"; path="+d+"; ",g&&(d+="expires="+new Date((new Date)[da]()+g).toGMTString()+"; "),e&&"none"!=e&&(d+="domain="+e+";"),e=Aa[Z],Aa.cookie=d,!(e=e!=Aa[Z]))a:{for(a=Da(a),e=0;e<a[$];e++)if(c==a[e]){e=!0;break a}e=!1}return e},Fa=function(a){return ra(a)[M](/\(/g,"%28")[M](/\)/g,"%29")},Ga=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,Ha=/(^|\.)doubleclick\.net$/i,Ia=function(){return(fb||ua()?"https:":"http:")+"//www.google-analytics.com"},Ja=function(a){this.name="len",this.message=a+"-8192"},Ka=function(a,b,c){if(c=c||qa,2036>=b[$])La(a,b,c);else{if(!(8192>=b[$]))throw Oa("len",b[$]),new Ja(b[$]);Na(a,b,c)||Ma(a,b,c)||La(a,b,c)}},La=function(a,b,c){var d=pa(a+"?"+b);d.onload=d.onerror=function(){d.onload=null,d.onerror=null,c()}},Ma=function(a,b,c){var d=za.XMLHttpRequest;if(!d)return!1;var e=new d;return"withCredentials"in e&&(e.open("POST",a,!0),e.withCredentials=!0,e.setRequestHeader("Content-Type","text/plain"),e.onreadystatechange=function(){4==e.readyState&&(c(),e=null)},e.send(b),!0)},Na=function(a,b,c){return!!za[X][A]&&(!!za[X][A](a,b)&&(c(),!0))},Oa=function(a,b,c){1<=100*v.random()||Ca("?")||(a=["t=error","_e="+a,"_v=j38","sr=1"],b&&a[R]("_f="+b),c&&a[R]("_m="+ra(c[P](0,100))),a[R]("aip=1"),a[R]("z="+Sa()),La(Ia()+"/collect",a[C]("&"),qa))},Pa=function(){this.M=[]};Pa[I].add=function(a){this.M[R](a)},Pa[I].D=function(a){try{for(var b=0;b<this.M[$];b++){var c=a.get(this.M[b]);c&&ka(c)&&c[G](za,a)}}catch(d){}b=a.get(lb),b!=qa&&ka(b)&&(a.set(lb,qa,!0),setTimeout(b,10))};var Qa=function(){return v.round(2147483647*v.random())},Ra=function(){try{var a=new Uint32Array(1);return za.crypto.getRandomValues(a),2147483647&a[0]}catch(b){return Qa()}},Sa=Qa,Ta=function(){this.data=new ya},Ua=new ya,Va=[];Ta[I].get=function(a){var b=$a(a),c=this[Q].get(a);return b&&void 0==c&&(c=ka(b[N])?b[N]():b[N]),b&&b.Z?b.Z(this,a,c):c};var Wa=function(a,b){var c=a.get(b);return void 0==c?"":""+c},Xa=function(a,b){var c=a.get(b);return void 0==c||""===c?0:1*c};Ta[I].set=function(a,b,c){if(a)if("object"==typeof a)for(var d in a)a[V](d)&&Ya(this,d,a[d],c);else Ya(this,a,b,c)};var Ya=function(a,b,c,d){if(void 0!=c)switch(b){case tc:pd[_](c)}var e=$a(b);e&&e.o?e.o(a,b,c,d):a[Q].set(b,c,d)},Za=function(a,b,c,d,e){this.name=a,this.F=b,this.Z=d,this.o=e,this.defaultValue=c},$a=function(a){var b=Ua.get(a);if(!b)for(var c=0;c<Va[$];c++){var d=Va[c],e=d[0].exec(a);if(e){b=d[1](e),Ua.set(b[F],b);break}}return b},_a=function(a){var b;return Ua.map(function(c,d){d.F==a&&(b=d)}),b&&b[F]},ab=function(a,b,c,d,e){return a=new Za(a,b,c,d,e),Ua.set(a[F],a),a[F]},bb=function(a,b){Va[R]([new RegExp("^"+a+"$"),b])},cb=function(a,b,c){return ab(a,b,c,void 0,db)},db=function(){},eb=ma(w.GoogleAnalyticsObject)&&oa(w.GoogleAnalyticsObject)||"ga",fb=!1,gb=ab("_br"),hb=cb("apiVersion","v"),ib=cb("clientVersion","_v");ab("anonymizeIp","aip");var jb=ab("adSenseId","a"),kb=ab("hitType","t"),lb=ab("hitCallback"),mb=ab("hitPayload");ab("nonInteraction","ni"),ab("currencyCode","cu"),ab("dataSource","ds");var nb=ab("useBeacon",void 0,!1),ob=ab("transport");ab("sessionControl","sc",""),ab("sessionGroup","sg"),ab("queueTime","qt");var pb=ab("_s","_s");ab("screenName","cd");var qb=ab("location","dl",""),rb=ab("referrer","dr"),sb=ab("page","dp","");ab("hostname","dh");var tb=ab("language","ul"),ub=ab("encoding","de");ab("title","dt",function(){return Aa.title||void 0}),bb("contentGroup([0-9]+)",function(a){return new Za(a[0],"cg"+a[1])});var vb=ab("screenColors","sd"),wb=ab("screenResolution","sr"),xb=ab("viewportSize","vp"),yb=ab("javaEnabled","je"),zb=ab("flashVersion","fl");ab("campaignId","ci"),ab("campaignName","cn"),ab("campaignSource","cs"),ab("campaignMedium","cm"),ab("campaignKeyword","ck"),ab("campaignContent","cc");var Ab=ab("eventCategory","ec"),Bb=ab("eventAction","ea"),Cb=ab("eventLabel","el"),Db=ab("eventValue","ev"),Eb=ab("socialNetwork","sn"),Fb=ab("socialAction","sa"),Gb=ab("socialTarget","st"),Hb=ab("l1","plt"),Ib=ab("l2","pdt"),Jb=ab("l3","dns"),Kb=ab("l4","rrt"),Lb=ab("l5","srt"),Mb=ab("l6","tcp"),Nb=ab("l7","dit"),Ob=ab("l8","clt"),Pb=ab("timingCategory","utc"),Qb=ab("timingVar","utv"),Rb=ab("timingLabel","utl"),Sb=ab("timingValue","utt");ab("appName","an"),ab("appVersion","av",""),ab("appId","aid",""),ab("appInstallerId","aiid",""),ab("exDescription","exd"),ab("exFatal","exf");var Tb=ab("expId","xid"),Ub=ab("expVar","xvar"),Vb=ab("_utma","_utma"),Wb=ab("_utmz","_utmz"),Xb=ab("_utmht","_utmht"),Yb=ab("_hc",void 0,0),Zb=ab("_ti",void 0,0),$b=ab("_to",void 0,20);bb("dimension([0-9]+)",function(a){return new Za(a[0],"cd"+a[1])}),bb("metric([0-9]+)",function(a){return new Za(a[0],"cm"+a[1])}),ab("linkerParam",void 0,void 0,q,db);var _b=ab("usage","_u"),ac=ab("_um");ab("forceSSL",void 0,void 0,function(){return fb},function(a,c,d){b(34),fb=!!d});var bc=ab("_j1","jid");bb("\\&(.*)",function(a){var b=new Za(a[0],a[1]),c=_a(a[0][P](1));return c&&(b.Z=function(a){return a.get(c)},b.o=function(a,b,d,e){a.set(c,d,e)},b.F=void 0),b});var cc=cb("_oot"),dc=ab("previewTask"),ec=ab("checkProtocolTask"),fc=ab("validationTask"),gc=ab("checkStorageTask"),hc=ab("historyImportTask"),ic=ab("samplerTask"),jc=ab("_rlt"),kc=ab("buildHitTask"),lc=ab("sendHitTask"),mc=ab("ceTask"),nc=ab("devIdTask"),oc=ab("timingTask"),pc=ab("displayFeaturesTask"),qc=cb("name"),rc=cb("clientId","cid"),sc=ab("userId","uid"),tc=cb("trackingId","tid"),uc=cb("cookieName",void 0,"_ga"),vc=cb("cookieDomain"),wc=cb("cookiePath",void 0,"/"),xc=cb("cookieExpires",void 0,63072e3),yc=cb("legacyCookieDomain"),zc=cb("legacyHistoryImport",void 0,!0),Ac=cb("storage",void 0,"cookie"),Bc=cb("allowLinker",void 0,!1),Cc=cb("allowAnchor",void 0,!0),Dc=cb("sampleRate","sf",100),Ec=cb("siteSpeedSampleRate",void 0,1),Fc=cb("alwaysSendReferrer",void 0,!1),Gc=ab("transportUrl"),Hc=ab("_r","_r"),Ic=function(a,b,c){this.V=1e4,this.fa=a,this.$=!1,this.B=b,this.ea=c||1},Jc=function(a,b){var c;if(a.fa&&a.$)return 0;if(a.$=!0,b){if(a.B&&Xa(b,a.B))return Xa(b,a.B);if(0==b.get(Ec))return 0}return 0==a.V?0:(void 0===c&&(c=Ra()),0==c%a.V?v.floor(c/a.V)%a.ea+1:0)},Kc=new Ic((!0),gb,7),Lc=function(a){if(!ua()&&!fb){var b=Jc(Kc,a);if(b&&!(!za[X][A]&&4<=b&&6>=b)){var c=(new Date).getHours(),d=[Ra(),Ra(),Ra()][C](".");a=(3==b||5==b?"https:":"http:")+"//www.google-analytics.com/collect?z=br.",a+=[b,"A",c,d][C](".");var e=1!=b%3?"https:":"http:",e=e+"//www.google-analytics.com/collect?z=br.",e=e+[b,"B",c,d][C](".");7==b&&(e=e[M]("//www.","//ssl.")),c=function(){4<=b&&6>=b?za[X][A](e,""):pa(e)},Ra()%2?(pa(a),c()):(c(),pa(a))}}},Mc=function(a,b){var c=v.min(Xa(a,Ec),100);if(!(u(Wa(a,rc))%100>=c)&&(c={},Nc(c)||Oc(c))){var d=c[Hb];void 0==d||1/0==d||isNaN(d)||(0<d?(Pc(c,Jb),Pc(c,Mb),Pc(c,Lb),Pc(c,Ib),Pc(c,Kb),Pc(c,Nb),Pc(c,Ob),b(c)):sa(za,"load",function(){Mc(a,b)},!1))}},Nc=function(a){var b=za.performance||za.webkitPerformance,b=b&&b.timing;if(!b)return!1;var c=b.navigationStart;return 0!=c&&(a[Hb]=b.loadEventStart-c,a[Jb]=b.domainLookupEnd-b.domainLookupStart,a[Mb]=b.connectEnd-b.connectStart,a[Lb]=b.responseStart-b.requestStart,a[Ib]=b.responseEnd-b.responseStart,a[Kb]=b.fetchStart-c,a[Nb]=b.domInteractive-c,a[Ob]=b.domContentLoadedEventStart-c,!0)},Oc=function(a){if(za.top!=za)return!1;var b=za.external,c=b&&b.onloadT;return b&&!b.isValidLoadTime&&(c=void 0),2147483648<c&&(c=void 0),0<c&&b.setPageReadyTime(),void 0!=c&&(a[Hb]=c,!0)},Pc=function(a,b){var c=a[b];(isNaN(c)||1/0==c||0>c)&&(a[b]=void 0)},Qc=function(a){return function(b){"pageview"!=b.get(kb)||a.I||(a.I=!0,Mc(b,function(b){a.send("timing",b)}))}},Rc=!1,Sc=function(a){if("cookie"==Wa(a,Ac)){var c=Wa(a,uc),d=Vc(a),e=Zc(Wa(a,wc)),f=Xc(Wa(a,vc)),g=1e3*Xa(a,xc),h=Wa(a,tc);if("auto"!=f)Ea(c,d,e,f,h,g)&&(Rc=!0);else{b(32);var i;if(d=[],f=va()[B]("."),4!=f[$]||(i=f[f[$]-1],parseInt(i,10)!=i)){for(i=f[$]-2;0<=i;i--)d[R](f[D](i)[C]("."));d[R]("none"),i=d}else i=["none"];for(var j=0;j<i[$];j++)if(f=i[j],a[Q].set(vc,f),d=Vc(a),Ea(c,d,e,f,h,g))return void(Rc=!0);a[Q].set(vc,"auto")}}},Tc=function(a){if("cookie"==Wa(a,Ac)&&!Rc&&(Sc(a),!Rc))throw"abort"},Uc=function(a){if(a.get(zc)){var c=Wa(a,vc),d=Wa(a,yc)||va(),e=o("__utma",d,c);e&&(b(19),a.set(Xb,(new Date)[da](),!0),a.set(Vb,e.R),(c=o("__utmz",d,c))&&e[ba]==c[ba]&&a.set(Wb,c.R))}},Vc=function(a){var b=Fa(Wa(a,rc)),c=Yc(Wa(a,vc));return a=$c(Wa(a,wc)),1<a&&(c+="-"+a),["GA1",c,b][C](".")},Wc=function(a,b,c){for(var d,e=[],f=[],g=0;g<a[$];g++){var h=a[g];h.H[c]==b?e[R](h):void 0==d||h.H[c]<d?(f=[h],d=h.H[c]):h.H[c]==d&&f[R](h)}return 0<e[$]?e:f},Xc=function(a){return 0==a[K](".")?a.substr(1):a},Yc=function(a){return Xc(a)[B](".")[$]},Zc=function(a){return a?(1<a[$]&&a.lastIndexOf("/")==a[$]-1&&(a=a.substr(0,a[$]-1)),0!=a[K]("/")&&(a="/"+a),a):"/"},$c=function(a){return a=Zc(a),"/"==a?1:a[B]("/")[$]},_c=new RegExp(/^https?:\/\/([^\/:]+)/),ad=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,bd=function(a){b(48),this.target=a,this.T=!1};bd[I].ca=function(b,c){if(b.tagName){if("a"==b.tagName[aa]())return void(b[z]&&a(b,cd(this,b[z],c)));if("form"==b.tagName[aa]())return dd(this,b)}if("string"==typeof b)return cd(this,b,c)};var cd=function(a,b,c){var d=ad.exec(b);d&&3<=d[$]&&(b=d[1]+(d[3]?d[2]+d[3]:"")),a=a[E].get("linkerParam");var e=b[K]("?"),d=b[K]("#");return c?b+=(-1==d?"#":"&")+a:(c=-1==e?"?":"&",b=-1==d?b+(c+a):b[P](0,d)+c+a+b[P](d)),b},dd=function(a,b){if(b&&b[L]){var c=a[E].get("linkerParam")[B]("=")[1];if("get"==b.method[aa]()){for(var d=b.childNodes||[],e=0;e<d[$];e++)if("_ga"==d[e][F])return void d[e][ca]("value",c);d=Aa[ea]("input"),d[ca]("type","hidden"),d[ca]("name","_ga"),d[ca]("value",c),b.appendChild(d)}else"post"==b.method[aa]()&&(b.action=cd(a,b[L]))}};bd[I].S=function(c,d,e){function f(e){try{e=e||za.event;var f;a:{var h=e[E]||e.srcElement;for(e=100;h&&0<e;){if(h[z]&&h.nodeName[y](/^a(?:rea)?$/i)){f=h;break a}h=h.parentNode,e--}f={}}("http:"==f[U]||"https:"==f[U])&&s(c,f[O]||"")&&f[z]&&a(f,cd(g,f[z],d))}catch(i){b(26)}}var g=this;if(this.T||(this.T=!0,sa(Aa,"mousedown",f,!1),sa(Aa,"keyup",f,!1)),e){e=function(a){if(a=a||za.event,(a=a[E]||a.srcElement)&&a[L]){var b=a[L][y](_c);b&&s(c,b[1])&&dd(g,a)}};for(var h=0;h<Aa.forms[$];h++)sa(Aa.forms[h],"submit",e)}};var ed,fd=function(a,b,c){this.U=bc,this.aa=b,(b=c)||(b=(b=Wa(a,qc))&&"t0"!=b?kd[_](b)?"_gat_"+Fa(Wa(a,tc)):"_gat_"+Fa(b):"_gat"),this.Y=b},gd=function(a,b){var c=b.get(kc);b.set(kc,function(b){hd(a,b);var d=c(b);return id(a,b),d});var d=b.get(lc);b.set(lc,function(b){var c=d(b);return jd(a,b),c})},hd=function(a,b){b.get(a.U)||("1"==Da(a.Y)[0]?b.set(a.U,"",!0):b.set(a.U,""+Sa(),!0))},id=function(a,b){b.get(a.U)&&Ea(a.Y,"1",b.get(wc),b.get(vc),b.get(tc),6e5)},jd=function(a,b){if(b.get(a.U)){var c=new ya,d=function(a){$a(a).F&&c.set($a(a).F,b.get(a))};d(hb),d(ib),d(tc),d(rc),d(a.U),c.set($a(_b).F,ia(b));var e=a.aa;c.map(function(a,b){e+=ra(a)+"=",e+=ra(""+b)+"&"}),e+="z="+Sa(),pa(e),b.set(a.U,"",!0)}},kd=/^gtm\d+$/,ld=function(a,b){var c=a.b;if(!c.get("dcLoaded")){ha(c,29),b=b||{};var d;b[uc]&&(d=Fa(b[uc])),d=new fd(c,"https://stats.g.doubleclick.net/r/collect?t=dc&aip=1&_r=3&",d),gd(d,c),c.set("dcLoaded",!0)}},md=function(a){var b;b=!a.get("dcLoaded")&&"cookie"==a.get(Ac),b&&(ha(a,51),b=new fd(a),hd(b,a),id(b,a),a.get(b.U)&&(a.set(Hc,1,!0),a.set(Gc,Ia()+"/r/collect",!0)))},nd=function(){var a=za.gaGlobal=za.gaGlobal||{};return a.hid=a.hid||Sa()},od=function(a,b,c){if(!ed){var d;d=Aa[S][ba];var e=za[F],f=/^#?gaso=([^&]*)/;(e=(d=(d=d&&d[y](f)||e&&e[y](f))?d[1]:Da("GASO")[0]||"")&&d[y](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))&&(Ea("GASO",""+d,c,b,a,0),w._udo||(w._udo=b),w._utcp||(w._utcp=c),a=e[1],ta("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+Sa(),"_gasojs")),ed=!0}},pd=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,qd=function(a){function b(a,b){n.b[Q].set(a,b)}function m(a,c){b(a,c),n.filters.add(a)}var n=this;this.b=new Ta,this.filters=new Pa,b(qc,a[qc]),b(tc,oa(a[tc])),b(uc,a[uc]),b(vc,a[vc]||va()),b(wc,a[wc]),b(xc,a[xc]),b(yc,a[yc]),b(zc,a[zc]),b(Bc,a[Bc]),b(Cc,a[Cc]),b(Dc,a[Dc]),b(Ec,a[Ec]),b(Fc,a[Fc]),b(Ac,a[Ac]),b(sc,a[sc]),b(hb,1),b(ib,"j38"),m(cc,d),m(dc,i),m(ec,e),m(fc,k),m(gc,Tc),m(hc,Uc),m(ic,c),m(jc,l),m(mc,h),m(nc,j),m(pc,md),m(kc,f),m(lc,g),m(oc,Qc(this)),rd(this.b,a[rc]),sd(this.b),this.b.set(jb,nd()),od(this.b.get(tc),this.b.get(vc),this.b.get(wc))},rd=function(a,c){if("cookie"==Wa(a,Ac)){Rc=!1;var d;a:{var e=Da(Wa(a,uc));if(e&&!(1>e[$])){d=[];for(var f=0;f<e[$];f++){var g;g=e[f][B](".");var h=g.shift();("GA1"==h||"1"==h)&&1<g[$]?(h=g.shift()[B]("-"),1==h[$]&&(h[1]="1"),h[0]*=1,h[1]*=1,g={H:h,s:g[C](".")}):g=void 0,g&&d[R](g)}if(1==d[$]){b(13),d=d[0].s;break a}if(0!=d[$]){if(b(14),e=Yc(Wa(a,vc)),d=Wc(d,e,0),1==d[$]){d=d[0].s;break a}e=$c(Wa(a,wc)),d=Wc(d,e,1),d=d[0]&&d[0].s;break a}b(12)}d=void 0}d||(d=Wa(a,vc),e=Wa(a,yc)||va(),d=o("__utma",e,d),void 0!=d?(b(10),d=d.O[1]+"."+d.O[2]):d=void 0),d&&(a[Q].set(rc,d),Rc=!0)}d=a.get(Cc),(f=(d=Aa[S][d?"href":"search"][y]("(?:&|#|\\?)"+ra("_ga")[M](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==d[$]?d[1]:"")&&(a.get(Bc)?(d=f[K]("."),-1==d?b(22):(e=f[P](d+1),"1"!=f[P](0,d)?b(22):(d=e[K]("."),-1==d?b(22):(f=e[P](0,d),d=e[P](d+1),f!=r(d,0)&&f!=r(d,-1)&&f!=r(d,-2)?b(23):(b(11),a[Q].set(rc,d)))))):b(21)),c&&(b(9),a[Q].set(rc,ra(c))),a.get(rc)||((d=(d=za.gaGlobal&&za.gaGlobal.vid)&&-1!=d[T](/^(?:utma\.)?\d+\.\d+$/)?d:void 0)?(b(17),a[Q].set(rc,d)):(b(8),a[Q].set(rc,[Sa()^2147483647&Ba(),v.round((new Date)[da]()/1e3)][C](".")))),Sc(a)},sd=function(a){var c=za[X],d=za.screen,e=Aa[S];if(a.set(rb,wa(a.get(Fc))),e){var f=e.pathname||"";"/"!=f.charAt(0)&&(b(31),f="/"+f),a.set(qb,e[U]+"//"+e[O]+f+e[T])}d&&a.set(wb,d.width+"x"+d.height),d&&a.set(vb,d.colorDepth+"-bit");var d=Aa.documentElement,g=(f=Aa.body)&&f[Y]&&f[H],h=[];if(d&&d[Y]&&d[H]&&("CSS1Compat"===Aa.compatMode||!g)?h=[d[Y],d[H]]:g&&(h=[f[Y],f[H]]),d=0>=h[0]||0>=h[1]?"":h[C]("x"),a.set(xb,d),a.set(zb,n()),a.set(ub,Aa.characterSet||Aa.charset),a.set(yb,c&&"function"==typeof c.javaEnabled&&c.javaEnabled()||!1),a.set(tb,(c&&(c.language||c.browserLanguage)||"")[aa]()),e&&a.get(Cc)&&(c=Aa[S][ba])){for(c=c[B](/[?&#]+/),e=[],d=0;d<c[$];++d)(na(c[d],"utm_id")||na(c[d],"utm_campaign")||na(c[d],"utm_source")||na(c[d],"utm_medium")||na(c[d],"utm_term")||na(c[d],"utm_content")||na(c[d],"gclid")||na(c[d],"dclid")||na(c[d],"gclsrc"))&&e[R](c[d]);0<e[$]&&(c="#"+e[C]("&"),a.set(qb,a.get(qb)+c))}};qd[I].get=function(a){return this.b.get(a)},qd[I].set=function(a,b){this.b.set(a,b)};var td={pageview:[sb],event:[Ab,Bb,Cb,Db],social:[Eb,Fb,Gb],timing:[Pb,Qb,Sb,Rb]};qd[I].send=function(a){if(!(1>arguments[$])){var b,c;"string"==typeof arguments[0]?(b=arguments[0],c=[][D][G](arguments,1)):(b=arguments[0]&&arguments[0][kb],c=arguments),b&&(c=xa(td[b]||[],c),c[kb]=b,this.b.set(c,void 0,!0),this.filters.D(this.b),this.b[Q].m={},Lc(this.b))}};var ud,vd,wd,xd=function(a){return"prerender"!=Aa.visibilityState&&(a(),!0)},yd=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,zd=function(a){if(ka(a[0]))this.u=a[0];else{var b=yd.exec(a[0]);if(null!=b&&4==b[$]&&(this.c=b[1]||"t0",this.K=b[2]||"",this.C=b[3],this.a=[][D][G](a,1),this.K||(this.A="create"==this.C,this.i="require"==this.C,this.g="provide"==this.C,this.ba="remove"==this.C),this.i&&(3<=this.a[$]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(ma(this.a[1])?this.X=this.a[1]:this.W=this.a[1]))),b=a[1],a=a[2],!this.C)throw"abort";if(this.i&&(!ma(b)||""==b))throw"abort";if(this.g&&(!ma(b)||""==b||!ka(a)))throw"abort";if(t(this.c)||t(this.K))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}};ud=new ya,wd=new ya,vd={ec:45,ecommerce:46,linkid:47};var Ad=function(b){function c(a){var b=(a[O]||"")[B](":")[0][aa](),c=(a[U]||"")[aa](),c=1*a[J]||("http:"==c?80:"https:"==c?443:"");return a=a.pathname||"",na(a,"/")||(a="/"+a),[b,""+c,a]}var d=Aa[ea]("a");a(d,Aa[S][z]);var e=(d[U]||"")[aa](),f=c(d),g=d[T]||"",h=e+"//"+f[0]+(f[1]?":"+f[1]:"");return na(b,"//")?b=e+b:na(b,"/")?b=h+b:!b||na(b,"?")?b=h+f[2]+(b||g):0>b[B]("/")[0][K](":")&&(b=h+f[2][P](0,f[2].lastIndexOf("/"))+"/"+b),a(d,b),e=c(d),{protocol:(d[U]||"")[aa](),host:e[0],port:e[1],path:e[2],G:d[T]||"",url:b||""}},Bd={ga:function(){Bd.f=[]}};Bd.ga(),Bd.D=function(a){var b=Bd.J[W](Bd,arguments),b=Bd.f.concat(b);for(Bd.f=[];0<b[$]&&!Bd.v(b[0])&&(b.shift(),!(0<Bd.f[$])););Bd.f=Bd.f.concat(b)},Bd.J=function(a){for(var c=[],d=0;d<arguments[$];d++)try{var e=new zd(arguments[d]);if(e.g)ud.set(e.a[0],e.a[1]);else{if(e.i){var f=e,g=f.a[0];if(!ka(ud.get(g))&&!wd.get(g)){vd[V](g)&&b(vd[g]);var h=f.X;if(!h&&vd[V](g)?(b(39),h=g+".js"):b(43),h){h&&0<=h[K]("/")||(h=(fb||ua()?"https:":"http:")+"//www.google-analytics.com/plugins/ua/"+h);var i,j=Ad(h),f=void 0,k=j[U],l=Aa[S][U],f="https:"==k||k==l||"http:"==k&&"http:"==l;if(i=f){var f=j,m=Ad(Aa[S][z]);if(f.G||0<=f.url[K]("?")||0<=f.path[K]("://"))i=!1;else if(f.host==m.host&&f[J]==m[J])i=!0;else{var n="http:"==f[U]?80:443;i=!("www.google-analytics.com"!=f.host||(f[J]||n)!=n||!na(f.path,"/plugins/"))}}i&&(ta(j.url),wd.set(g,!0))}}}c[R](e)}}catch(o){}return c},Bd.v=function(a){try{if(a.u)a.u[G](za,Cd.j("t0"));else{var b=a.c==eb?Cd:Cd.j(a.c);if(a.A)"t0"==a.c&&Cd.create[W](Cd,a.a);else if(a.ba)Cd.remove(a.c);else if(b)if(a.i){var c,d=a.a[0],e=a.W;b==Cd||b.get(qc);var f=ud.get(d);if(ka(f)?(b.plugins_=b.plugins_||new ya,b.plugins_.get(d)||b.plugins_.set(d,new f(b,e||{})),c=!0):c=!1,!c)return!0}else if(a.K){var g=a.C,h=a.a,i=b.plugins_.get(a.K);i[g][W](i,h)}else b[a.C][W](b,a.a)}}catch(j){}};var Cd=function(a){b(1),Bd.D[W](Bd,[arguments])};Cd.h={},Cd.P=[],Cd.L=0,Cd.answer=42;var Dd=[tc,vc,qc];Cd.create=function(a){var b=xa(Dd,[][D][G](arguments));b[qc]||(b[qc]="t0");var c=""+b[qc];return Cd.h[c]?Cd.h[c]:(b=new qd(b),Cd.h[c]=b,Cd.P[R](b),b)},Cd.remove=function(a){for(var b=0;b<Cd.P[$];b++)if(Cd.P[b].get(qc)==a){Cd.P.splice(b,1),Cd.h[a]=null;break}},Cd.j=function(a){return Cd.h[a]},Cd.getAll=function(){return Cd.P[D](0)},Cd.N=function(){"ga"!=eb&&b(49);var a=za[eb];if(!a||42!=a.answer){Cd.L=a&&a.l,Cd.loaded=!0;var c=za[eb]=Cd;if(m("create",c,c.create),m("remove",c,c.remove),m("getByName",c,c.j,5),m("getAll",c,c.getAll,6),c=qd[I],m("get",c,c.get,7),m("set",c,c.set,4),m("send",c,c.send),c=Ta[I],m("get",c,c.get),m("set",c,c.set),!ua()&&!fb){a:{for(var c=Aa.getElementsByTagName("script"),d=0;d<c[$]&&100>d;d++){var e=c[d].src;if(e&&0==e[K]("https://www.google-analytics.com/analytics")){b(33),c=!0;break a}}c=!1}c&&(fb=!0)}ua()||fb||!Jc(new Ic)||(b(36),fb=!0),(za.gaplugins=za.gaplugins||{}).Linker=bd,c=bd[I],ud.set("linker",bd),m("decorate",c,c.ca,20),m("autoLink",c,c.S,25),ud.set("displayfeatures",ld),ud.set("adfeatures",ld),a=a&&a.q,la(a)?Bd.D[W](Cd,a):b(50)}},Cd.da=function(){for(var a=Cd.getAll(),b=0;b<a[$];b++)a[b].get(qc)},function(){var a=Cd.N;if(!xd(a)){b(16);var c=!1,d=function(){if(!c&&xd(a)){c=!0;var b=d,e=Aa;e.removeEventListener?e.removeEventListener("visibilitychange",b,!1):e.detachEvent&&e.detachEvent("onvisibilitychange",b)}};sa(Aa,"visibilitychange",d)}}()}(window)}(window,document,"script","//www.google-analytics.com/analytics.js","__KIDS_Video_Tracking"),function(a){!function(b,c){"function"==typeof a&&a.amd?a([],function(){return b.ns_=c(b.ns_)}):"object"==typeof module&&module.exports?module.exports=c():b.ns_=c(b.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;d<c;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},parseBoolean:function(a,b){return b=b||!1,a?"0"!=a&&void 0:b},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;f<g;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(b<0||d<0||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"!=typeof a&&("string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a)},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;a<b;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;
var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document||"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;d<c;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return(b=c.indexOf("Opera"))!=-1||(b=c.indexOf("OPR/"))!=-1?d="Opera":(b=c.indexOf("Android"))!=-1?d="Android":(b=c.indexOf("Chrome"))!=-1?d="Chrome":(b=c.indexOf("Safari"))!=-1?d="Safari":(b=c.indexOf("Firefox"))!=-1?d="Firefox":(b=c.indexOf("IEMobile"))!=-1?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return(b=e.indexOf("Opera"))!=-1?(g=e.substring(b+6),(b=e.indexOf("Version"))!=-1&&(g=e.substring(b+8))):(b=e.indexOf("OPR/"))!=-1?g=e.substring(b+4):(b=e.indexOf("Android"))!=-1?g=e.substring(b+11):(b=e.indexOf("Chrome"))!=-1?g=e.substring(b+7):(b=e.indexOf("Safari"))!=-1?(g=e.substring(b+7),(b=e.indexOf("Version"))!=-1&&(g=e.substring(b+8))):(b=e.indexOf("Firefox"))!=-1?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),(c=g.indexOf(";"))!=-1&&(g=g.substring(0,c)),(c=g.indexOf(" "))!=-1&&(g=g.substring(0,c)),(c=g.indexOf(")"))!=-1&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"==typeof window||(null!==window.ActiveXObject,!0)},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"==typeof Image)return void("function"==typeof setTimeout?b&&setTimeout(b,0):b&&b());var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a},e=function(a,b,c){"function"==typeof setTimeout?c&&setTimeout(function(){c(200)},0):c&&c(200)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,onDataFetch:function(a){a()},getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getDisplayResolution:function(){return h.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return h.UNKNOWN_RESOLUTION},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=b+"",b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.2.0.160629",MODEL_VERSION:"5.3",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},m=function(){function a(){function a(){I={},I.ns_st_pt="0",I.ns_st_bt="0",I.ns_st_bc="0",I.ns_st_pc="0",I.ns_st_cl="0",I.ns_st_pn="1",I.ns_st_tp="1",I.ns_st_skc="0",I.ns_st_et="0",I.ns_st_cn="1",I.ns_st_sc="0",I.ns_st_ska="0",I.ns_st_skd="0",I.ns_st_skt="0",I.ns_st_upc="0",I.ns_st_lpc="0",I.ns_st_upa="0",I.ns_st_lpa="0",I.ns_st_ub="0",I.ns_st_br="0",f=!1,e=!1,d=h.UNKNOWN_VALUE,g=NaN,m=0,j=0,i=NaN,n=NaN,p=0,o=0,k=0,s=NaN,q=[],r=[],t=0,u=0,v=0,w=0,x=0,y=0,z=NaN,A=0,B=!1,C=NaN,F=!1,E=0,H=0,D=0,G=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0}function c(){var a,b,c=0;for(a=0;a<q.length;a++)c+=Math.abs(q[a].end-q[a].start);Q.setUniquePlaybackInterval(c);var d=0;for(a=0;a<q.length;a++)b=Math.abs(q[a].end-q[a].start),b>d&&(d=b);Q.setLongestPlaybackInterval(d);var e=0;for(a=0;a<r.length;a++)e+=Math.abs(r[a].end-r[a].start);Q.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<r.length;a++)b=Math.abs(r[a].end-r[a].start),b>f&&(f=b);Q.setAssetLongestPlaybackInterval(f)}var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=this,R=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return d},setHash:function(a){d=a},setPlaybackIntervalMergeTolerance:function(a){R=a},getPlaybackIntervalMergeTolerance:function(){return R},setLabels:function(a){null!=a&&b.extend(I,a)},getLabels:function(){return I},setLabel:function(a,b){var c={};c[a]=b,Q.setLabels(c)},getLabel:function(a){return I[a]},getClipNumber:function(){return parseInt(Q.getLabel("ns_st_cn"))},setClipNumber:function(a){Q.setLabel("ns_st_cn",a+"")},getPartNumber:function(){return parseInt(Q.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=Q.getBufferingTime()-A+"",A=Q.getBufferingTime(),c.ns_st_det=Q.getElapsedTime()-o+"",o=Q.getElapsedTime(),c.ns_st_dupc=Q.getUniquePlaybackInterval()-t+"",t=Q.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):Q.getUniquePlaybackInterval(),c.ns_st_iupc=d-u+"",u=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=Q.getAssetUniquePlaybackInterval()-v+"",v=Q.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var e;e=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):Q.getAssetUniquePlaybackInterval(),c.ns_st_iupa=e-w+"",w=e,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=Q.getLongestPlaybackInterval()-x+"",x=Q.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=Q.getAssetLongestPlaybackInterval()-y+"",y=Q.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):Q.getPlaybackTime(),c.ns_st_ipt=g-k+"",k=g,c.ns_st_dpt=Q.getPlaybackTime()-j+"",j=Q.getPlaybackTime(),c.ns_st_dpc=Q.getPauses()-J+"",J=Q.getPauses(),c.ns_st_dskc=Q.getSeeks()-K+"",K=Q.getSeeks(),c.ns_st_dbc=Q.getBuffers()-L+"",L=Q.getBuffers(),c.ns_st_dskt=Q.getSeekingTime()-D+"",D=Q.getSeekingTime(),c.ns_st_dska=Q.getSeekingAmount()-G+"",G=Q.getSeekingAmount(),b.extend(c,Q.getLabels()),Q.setSeekingDirection(0),f&&(c.ns_st_spc=M+"",c.ns_st_apc=N+"",c.ns_st_sq=O+"",c.ns_st_asq=P+""),f||b.parseBoolean(c.ns_st_sc)||(c.ns_st_sc="1"),c},getVideoTrack:function(){return Q.getLabel("ns_st_vt")},setVideoTrack:function(a){Q.setLabel("ns_st_vt",a+"")},getAudioTrack:function(){return Q.getLabel("ns_st_at")},setAudioTrack:function(a){Q.setLabel("ns_st_at",a+"")},getSubtitleTrack:function(){return Q.getLabel("ns_st_tt")},setSubtitleTrack:function(a){Q.setLabel("ns_st_tt",a+"")},getCDN:function(){return Q.getLabel("ns_st_cdn")},setCDN:function(a){Q.setLabel("ns_st_cdn",a+"")},getClipPlaybackIntervals:function(){return q},setClipPlaybackIntervals:function(a){q=a},getAssetPlaybackIntervals:function(){return r},getUniquePlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){Q.setLabel("ns_st_upa",a+"")},setUniquePlaybackInterval:function(a){Q.setLabel("ns_st_upc",a+"")},getLongestPlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){Q.setLabel("ns_st_lpc",a+"")},getAssetLongestPlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){Q.setLabel("ns_st_lpa",a+"")},incrementPauses:function(){Q.setLabel("ns_st_pc",Q.getPauses()+1+"")},incrementSeeks:function(){Q.setLabel("ns_st_skc",Q.getSeeks()+1+"")},incrementPlayCounter:function(){O++},getPlayCounter:function(){return O},getBufferingTime:function(){return parseInt(Q.getLabel("ns_st_bt"))},setBufferingTime:function(a){Q.setLabel("ns_st_bt",a+"")},addBufferingTime:function(a){if(!isNaN(z)){var b=Q.getBufferingTime();b+=a-z,Q.setBufferingTime(b),z=NaN}},setPlaybackStartPosition:function(a){s=parseInt(a)},getPlaybackStartPosition:function(){return s},addInterval:function(a){isNaN(s)||isNaN(a)||(q=b.addNewPlaybackInterval(q,s,a,R),r=b.addNewPlaybackInterval(r,s,a,R),c(),s=NaN)},getElapsedTime:function(){return parseInt(Q.getLabel("ns_st_et"))},setElapsedTime:function(a){Q.setLabel("ns_st_et",a+"")},addElapsedTime:function(a){if(!isNaN(n)){var b=Q.getElapsedTime();b+=a-n,Q.setElapsedTime(b),n=NaN}},getElapsedTimestamp:function(){return n},setElapsedTimestamp:function(a){n=a},addPlaybackTime:function(a){if(!isNaN(g)){var b=Q.getPlaybackTime();b+=a-g,Q.setPlaybackTime(b),g=NaN}},getPlaybackTime:function(){return parseInt(Q.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return isNaN(g)||(m+=a-g),m},setPlaybackTimeOffset:function(a){m=a},getPlaybackTimeOffset:function(){return m},setPlaybackTime:function(a){Q.setLabel("ns_st_pt",a+"")},getPlaybackTimestamp:function(){return g},setPlaybackTimestamp:function(a){g=a},setPreviousPlaybackTime:function(a){j=a},setPreviousPlaybackTimestamp:function(a){i=a},getBufferingTimestamp:function(){return z},setBufferingTimestamp:function(a){z=a},getPauses:function(){return parseInt(Q.getLabel("ns_st_pc"))},setPauses:function(a){Q.setLabel("ns_st_pc",a+"")},getSeeks:function(){return parseInt(Q.getLabel("ns_st_skc"))},setSeeks:function(a){Q.setLabel("ns_st_skc",a+"")},setSeeking:function(a){B=a},isSeeking:function(){return B},setCollectingSeekingTime:function(a){F=a},isCollectingSeekingTime:function(){return F},setClipStarted:function(a){e=a},isClipStarted:function(){return e},setPlaybackStarted:function(a){f=a},isPlaybackStarted:function(){return f},setSeekingTimestamp:function(a){C=a},getSeekingTimestamp:function(){return C},addSeekingTime:function(a){if(!isNaN(C)){var b=Q.getSeekingTime();b+=a-C,Q.setSeekingTime(b),C=NaN}},getSeekingTime:function(){return parseInt(Q.getLabel("ns_st_skt"))},setSeekingTime:function(a){Q.setLabel("ns_st_skt",a+"")},setSeekingTimeBeforeEnd:function(a){H=a},getSeekingTimeBeforeEnd:function(){return H},setSeekStartPosition:function(a){E=a},getSeekStartPosition:function(){return E},setSeekingAmount:function(a){Q.setLabel("ns_st_ska",a+"")},getSeekingAmount:function(){return parseInt(Q.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=Q.getSeekingAmount();b+=Math.abs(a-E),Q.setSeekingAmount(b);var c;E==a?c=0:E>a?c=-1:E<a&&(c=1),Q.setSeekingDirection(c),E=0},getSeekingDirection:function(){return parseInt(Q.getLabel("ns_st_skd"))},setSeekingDirection:function(a){Q.setLabel("ns_st_skd",a+"")},resetClipLifecycleLabels:function(){I.ns_st_pt="0",j=0,k=0,I.ns_st_bt="0",A=0,I.ns_st_bc="0",L=0,I.ns_st_pc="0",J=0,O=0,I.ns_st_upa="0",v=0,w=0,I.ns_st_et="0",o=0,I.ns_st_lpa="0",y=0,I.ns_st_skt="0",D=0,I.ns_st_ska="0",G=0,I.ns_st_skc="0",K=0},incrementSegmentPlaybackCounter:function(){M++},incrementClipLoadCounter:function(){Q.setLabel("ns_st_sc",Q.getClipLoadCounter()+1+"")},incrementAssetPlaybackCounter:function(){N++},setPreviousUniquePlaybackInterval:function(a){t=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){u=a},setPreviousLongestPlaybackInterval:function(a){x=a},resetAssetPlaybackCounters:function(){r=[],Q.setAssetUniquePlaybackInterval(0),v=0,w=0,Q.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(a){M=a},setClipLoadCounter:function(a){Q.setLabel("ns_st_sc",a+"")},setAssetPlaybackCounter:function(a){N=a},setLowestPartNumberPlayed:function(a){p=a},getSegmentPlaybackCounter:function(){return M},getClipLoadCounter:function(){return parseInt(Q.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return N},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return parseInt(Q.getLabel("ns_st_bc"))},incrementBufferCount:function(){Q.setLabel("ns_st_bc",Q.getBuffers()+1+"")},getPreviousBufferingTime:function(){return A},setPlaySequenceCounter:function(a){P=a},incrementPlaySequenceCounter:function(){P++},getPlaySequenceCounter:function(){return P}}),a()}return a.resetClip=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(){function a(){c=new m,f={},f.ns_st_bp="0",f.ns_st_pa="0",f.ns_st_pp="0",f.ns_st_sp="1",f.ns_st_id=+new Date+"",d=NaN,e=NaN,h={},i=0,g=!1,j=!1,k=0,l=0}var c,d,e,f,g,h,i,j,k,l,n=this;b.extend(this,{resetClip:function(){var a=c;c=new m,m.resetClip(a,c)},hashExists:function(a){return null!=h[a]},storeHash:function(a){h[a]={}},removeHash:function(a){delete h[a]},storeClipPlaybackCounters:function(){for(var a in h)if(h.hasOwnProperty(a)&&h[a].clipNumber===c.getClipNumber()){b.extend(h[a],{segmentPlaybackCounter:c.getSegmentPlaybackCounter(),clipLoadCounter:c.getClipLoadCounter(),assetPlaybackCounter:c.getAssetPlaybackCounter(),lowestPartNumberPlayed:c.getLowestPartNumberPlayed(),seeking:c.isSeeking(),seekingTimeBeforeEnd:c.getSeekingTimeBeforeEnd(),seekingStartPosition:c.getSeekStartPosition(),clipPlaybackIntervals:c.getClipPlaybackIntervals(),uniquePlaybackInterval:c.getUniquePlaybackInterval(),longestPlaybackInterval:c.getLongestPlaybackInterval(),playSequenceCounter:c.getPlaySequenceCounter(),videoTrack:c.getVideoTrack(),audioTrack:c.getAudioTrack(),subtitleTrack:c.getSubtitleTrack(),cdn:c.getCDN()});break}},getStoredClipRegisters:function(a){return h[a]},getClipNumber:function(a){return h[a].clipNumber},getMaxClipNumber:function(){return i},storeClipNumber:function(a,b){h[a].clipNumber=b,b>i&&(i=b)},setLabels:function(a){null!=a&&b.extend(f,a)},getLabels:function(){return f},setLabel:function(a,b){var c={};c[a]=b,n.setLabels(c)},getLabel:function(a){return f[a]},getClip:function(){return c},createLabels:function(a){var d=a||{};return j||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1"),b.extend(d,n.getLabels()),c.isPlaybackStarted()&&(d.ns_st_ppc=k+"",d.ns_st_psq=l+""),d},incrementPlayCounter:function(){n.setLabel("ns_st_sp",parseInt(n.getLabel("ns_st_sp"))+1+"")},incrementPauses:function(){n.setLabel("ns_st_pp",n.getPauses()+1+"")},addPlaybackTime:function(a){if(!isNaN(e)){var b=n.getPlaybackTime();b+=a-e,n.setPlaybackTime(b),e=NaN}},addBufferingTime:function(a){if(!isNaN(d)){var b=n.getBufferingTime();b+=a-d,n.setBufferingTime(b),d=NaN}},getBufferingTime:function(){return parseInt(n.getLabel("ns_st_bp"))},setBufferingTime:function(a){n.setLabel("ns_st_bp",a+"")},getPlaybackTime:function(){return parseInt(n.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){d=a},getBufferingTimestamp:function(){return d},setPlaybackTime:function(a){n.setLabel("ns_st_pa",a+"")},setPlaybackTimestamp:function(a){e=a},getPlaybackTimestamp:function(){return e},getPauses:function(){return parseInt(n.getLabel("ns_st_pp"))},setPauses:function(a){n.setLabel("ns_st_pp",a+"")},isPlaylistStarted:function(){return g},setPlaylistStarted:function(a){g=a},getPlaybackCounter:function(){return k},incrementPlaybackCounter:function(){k++},setFirstEventSent:function(a){j=a},setPlaySequenceCounter:function(a){l=a},incrementPlaySequenceCounter:function(){l++}}),a()}return a.resetPlaylist=function(b,c,d){for(var e=b.getClip(),f=b.getLabels(),g={},h=0;d&&h<d.length;h++)f.hasOwnProperty(d[h])&&(g[d[h]]=f[d[h]]);c=new a,c.setLabels(g),m.resetClip(e,c.getClip(),d)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getSSECore().getPixelURL();if(a.getAppCore()){if(a.getSSECore().isProperlyInitialized()){var e=a.getSSECore().getExports().et;if("function"==typeof a.getAppCore().getMeasurementDispatcher){var g=a.getAppCore().getMeasurementDispatcher();g.send(e.HIDDEN,c,d)}else{var h=a.getSSECore().getExports().am,i=h.newApplicationMeasurement(a.getAppCore(),e.HIDDEN,c,d);a.getAppCore().getQueue().offer(i)}}}else d&&a.getSSECore().getPlatformAPI().httpGet(a.getSSECore().prepareUrl(d,c))}var e,f,g=this;b.extend(this,{newEvent:function(a){d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=a.getPlaylist().getClip().getPlaybackTimeOffset()+d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",c.ns_st_pa=a.getPlaylist().getPlaybackTime()+d-a.getPlaylist().getPlaybackTimestamp()+"",c.ns_st_pt=a.getPlaylist().getClip().getPlaybackTime()+d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",c.ns_st_dpt=d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=a.getPlaylist().getBufferingTime()+d-a.getPlaylist().getBufferingTimestamp()+"",c.ns_st_bt=a.getPlaylist().getClip().getBufferingTime()+d-a.getPlaylist().getClip().getBufferingTimestamp()+"",c.ns_st_dbt=d-a.getPlaylist().getClip().getBufferingTimestamp()+""):c.ns_st_dbt=a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()+"",c.ns_st_et=a.getPlaylist().getClip().getElapsedTime()+d-a.getPlaylist().getClip().getElapsedTimestamp()+"",c.ns_st_det=d-a.getPlaylist().getClip().getElapsedTimestamp()+"";var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),f=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),f=b.addNewPlaybackInterval(f,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=n+"",c.ns_st_dupc=n-a.getPlaylist().getClip().getUniquePlaybackInterval()+"";var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=o+"",c.ns_st_dlpc=o-a.getPlaylist().getClip().getLongestPlaybackInterval()+"";var p=0;for(l=0;l<f.length;l++)p+=Math.abs(f[l].end-f[l].start);c.ns_st_upa=p+"",c.ns_st_dupa=p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval()+"";var q=0;for(l=0;l<f.length;l++)m=Math.abs(f[l].end-f[l].start),m>q&&(q=m);c.ns_st_lpa=q+"",c.ns_st_dlpa=q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()+"",c.ns_st_hc=a.getHeartbeat().getCount()+"";var r=a.getSSECore().createLabels(i.HEARTBEAT,c,d);a.getEventManager().newEvent(r),g=0,k.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||a<e){b=d.interval;break}}return b},getIntervals:function(){return m},resume:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getSSECore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));g=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);c.ns_st_po=a.getPlaylist().getClip().getExpectedPlaybackPosition(d)+"",a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po));var e=a.getSSECore().createLabels(i.KEEPALIVE,c,d);a.getEventManager().newEvent(e),g.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{resume:function(){e(),f=a.getSSECore().getPlatformAPI().setTimeout(d,h)},pause:function(){e()},setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(a){function c(){f=j.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(f==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(f==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(f==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(f==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED;
}else if(f==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(f==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(f==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(f==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b),a.getPlaylist().getClip().setPlaybackTimeOffset(d)},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPlay:function(b,c){a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(b):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBuffer:function(b,c){a.getSSECore().isPauseOnBufferingEnabled()&&a.getSSECore().startPausedOnBufferingTimer(b,c),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po),a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),F=function(){return function(){function a(){m=new G(ba),b.getNamespace().comScore?(ca=b.getNamespace().comScore.exports,m.setAppCore(ca.c())):m.setAppCore(null),m.setKeepAlive(new q(m)),m.setHeartbeat(new p(m)),m.setEventManager(new o(m)),m.setStateMachine(new r),m.setPlaylist(new n),_={},F=new x(m),H=new y(m),I=new A(m),J=new B(m),K=new t(m),L=new v(m),M=new w(m),N=new u(m),O=new z(m),P=new C(m),Q=new D(m),R=new E(m),S=new s(m),T=!1,U=0,V=+new Date,W=!0,Y=!1,$=[]}function c(a){var b=m.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){
if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function d(a,b,d){var e=m.getStateMachine().getCurrentState();a==i.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&c(a)?d.ns_st_ui="skip":a==i.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&c(a)&&(d.ns_st_ui="seek"),e==j.IDLE?a==i.BUFFER?F.onBuffer(b,d):a==i.SEEK_START?F.onSeekStart(b,d):a==i.PLAY&&F.onPlay(b,d):e==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,d):a==i.SEEK_START?I.onSeekStart(b,d):a==i.PLAY?I.onPlay(b,d):a==i.BUFFER&&S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.PLAYING?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,d):a==i.BUFFER?J.onBuffer(b,d):a==i.SEEK_START?J.onSeekStart(b,d):a==i.PAUSE&&J.onPause(b,d):e==j.PAUSED?a==i.END||a==i.AD_SKIP?H.onEndOrAdSkip(b,d):a==i.PLAY?H.onPlay(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.SEEK_START&&S.onSeekStartWhenPausedOrBufferingDuringPause(b,d):e==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?K.onBufferStop(b,d):a==i.SEEK_START?K.onSeekStart(b,d):a==i.PAUSE?K.onPause(b,d):a==i.PLAY&&K.onPlay(b,d):e==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?L.onPauseOnBuffering(b,d):a==i.BUFFER_STOP?L.onBufferStop(b,d):a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,d):a==i.SEEK_START?L.onSeekStart(b,d):a==i.PAUSE?L.onPause(b,d):a==i.PLAY&&L.onPlay(b,d):e==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?M.onEndOrAdSkip(b,d):a==i.PAUSE?M.onPause(b,d):a==i.PLAY?M.onPlay(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?N.onEndAndSkip(b,d):a==i.PAUSE?N.onPause(b,d):a==i.PLAY?N.onPlay(b,d):a==i.SEEK_START?S.onSeekStartWhenPausedOrBufferingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?P.onEndOrAdSkip(b,d):a==i.PAUSE?P.onPause(b,d):a==i.PLAY?P.onPlay(b,d):a==i.BUFFER&&S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?R.onEndOrAdSkip(b,d):a==i.PLAY?R.onPlay(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PAUSE&&S.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):e==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?Q.onPause(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?S.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?S.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):e==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?O.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?O.onBufferStop(b,d):a==i.SEEK_START?O.onSeekStart(b,d):a==i.PAUSE?O.onPause(b,d):a==i.PLAY&&O.onPlay(b,d):e==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?S.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.PAUSE?S.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?S.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d)),c(a)&&m.getPlaylist().setFirstEventSent(!0)}function e(a,c){var d=a||"",e="undefined",f=fa.comScore||fa.sitestat||function(a){var c,d,f,g,h,i="comScore=",j=ga.cookie,k="",m="indexOf",n="substring",o="length",p=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT,q="&ns_",r="&",s=fa.encodeURIComponent||escape;if(j[m](i)+1)for(g=0,f=j.split(";"),h=f[o];g<h;g++)d=f[g][m](i),d+1&&(k=r+unescape(f[g][n](d+i[o])));a+=q+"_t="+ +new Date+q+"c="+(ga.characterSet||ga.defaultCharset||"")+k,a.length>p&&a.indexOf(r)>0&&(c=a.substr(0,p-8).lastIndexOf(r),a=(a.substring(0,c)+q+"cut="+s(a.substring(c+1))).substr(0,p)),ba.getPlatformAPI().httpGet(a),typeof ns_p===e&&(ns_p={src:a}),ns_p.lastMeasurement=a};if(typeof c!==e){var g=[],h=fa.encodeURIComponent||escape;for(var i in c)c.hasOwnProperty(i)&&g.push(h(i)+"="+h(c[i]));/[\?\&]$/.test(d)||(d+="&"),d+=g.join("&")}return f(d)}function f(a,c){for(var d,e=fa.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;m<n;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;s<t;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(ga.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(ga.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(ga.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var m,F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba=this,ca={},da=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,ea=l.THROTTLING_DELAY;b.extend(ba,{createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var f=document;e.c7=f.URL,e.c8=f.title,e.c9=f.referrer}return null!=c&&b.extend(e,c),e.ns_ts=null!=e.ns_ts?e.ns_ts:+new Date+"",e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(a),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:l.DEFAULT_PLAYERNAME,e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:l.STREAMSENSE_VERSION,e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_st_smv=null!=e.ns_st_smv?e.ns_st_smv:l.MODEL_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:m.getEventManager().getEventCounter()+"",e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:m.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(d)+"",e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:m.getKeepAlive().getInterval()+"",m.getPlaylist().createLabels(e),m.getPlaylist().getClip().createLabels(e),b.extend(e,ba.getLabels()),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,b,c,e){ba.stopDelayedTransitionTimer();var f=m.getStateMachine().getCurrentState(),g=m.getStateMachine().eventTypeToState(a);if(null!=g&&g!=f)if(!ba.isThrottlingEnabled()||f!=j.PLAYING&&f!=j.PAUSED||g!=j.PLAYING&&g!=j.PAUSED||e){c.ns_st_po||(m.getStateMachine().getCurrentState()==j.PLAYING&&a==i.BUFFER||m.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&a==i.BUFFER_STOP?c.ns_st_po=m.getPlaylist().getClip().getPlaybackTimeOffset()+(b-m.getPlaylist().getClip().getPlaybackTimestamp())+"":c.ns_st_po=m.getPlaylist().getClip().getExpectedPlaybackPosition(b)+""),d(a,b,c);var h=0;isNaN(m.getStateMachine().getLastStateChangeTimestamp())||(h=b-m.getStateMachine().getLastStateChangeTimestamp()),m.getStateMachine().newEvent(a,b);for(var k=0,l=$.length;k<l;k++)$[k](f,g,c,h)}else Z=m.getPlatformAPI().setTimeout(function(a,c,d){return function(){ba.newEvent(a,b,d,!0)}}(a,g,c),ea)},newPseudoEvent:function(a,b,c){if(a!=i.LOAD&&a!=i.ENGAGE||m.getStateMachine().getCurrentState()==j.IDLE){a!=i.ERROR||c.ns_st_er||(c.ns_st_er=h.UNKNOWN_VALUE),m.getStateMachine().getCurrentState()!=j.IDLE&&m.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&m.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(m.getPlaylist().getClip().addElapsedTime(b),m.getPlaylist().getClip().setElapsedTimestamp(b));var d,e,f,g=!0,k=!1;switch(a){case i.BIT_RATE:d="ns_st_br",e="ns_st_pbr",k=!0;break;case i.PLAYBACK_RATE:d="ns_st_rt",e="ns_st_prt",k=!0;break;case i.VOLUME:d="ns_st_vo",e="ns_st_pvo",k=!0;break;case i.WINDOW_STATE:d="ns_st_ws",e="ns_st_pws",k=!0;break;case i.AUDIO:d="ns_st_at",e="ns_st_pat",k=!1;break;case i.VIDEO:d="ns_st_vt",e="ns_st_pvt",k=!1;break;case i.SUBS:d="ns_st_tt",e="ns_st_ptt",k=!1;break;case i.CDN:d="ns_st_cdn",e="ns_st_pcdn",k=!1;break;default:g=!1}if(g&&c.hasOwnProperty(d)&&(k?(ba.getLabels().hasOwnProperty(d)&&(f=ba.getLabels()[d],c[e]=f),ba.setLabel(d,c[d])):(m.getPlaylist().getClip().getLabels().hasOwnProperty(d)&&(f=m.getPlaylist().getClip().getLabels()[d],c[e]=f),m.getPlaylist().getClip().setLabel(d,c[d]))),!g||m.getStateMachine().getCurrentState()==j.PLAYING||m.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK){c.ns_st_po||(c.ns_st_po=m.getPlaylist().getClip().getExpectedPlaybackPosition(b)+""),m.getStateMachine().getCurrentState()!=j.PLAYING&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(m.getPlaylist().addPlaybackTime(b),m.getPlaylist().setPlaybackTimestamp(b),m.getPlaylist().getClip().addPlaybackTime(b),m.getPlaylist().getClip().setPlaybackTimestamp(b),m.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),m.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po))),m.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(m.getPlaylist().addBufferingTime(b),m.getPlaylist().setBufferingTimestamp(b),m.getPlaylist().getClip().addBufferingTime(b),m.getPlaylist().getClip().setBufferingTimestamp(b));var l=ba.createLabels(a,c,b);m.getEventManager().newEvent(l)}}},getState:function(){return m.getStateMachine().getCurrentState()},addListener:function(a){$.push(a)},removeListener:function(a){$.splice(b.indexOf(a,$),1)},getLabel:function(a){return _[a]},getLabels:function(){return _},setLabel:function(a,b){null==b?delete _[a]:_[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&ba.setLabel(b,a[b])},getPlatformAPI:function(){return m.getAppCore()?m.getAppCore().getPlatformAPI():g},getExports:function(){return ca},isProperlyInitialized:function(){var a=m.getAppCore().getAppContext(),b=m.getAppCore().getSalt(),c=m.getAppCore().getPixelURL();return a&&c&&b},setImplementationType:function(a){m.getStateMachine().getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||m.getPlaylist().setLabel("ns_st_it",k.toString(a))},setThrottlingDelay:function(a){ea=a},getThrottlingDelay:function(){return ea},isThrottlingEnabled:function(){return Y},setThrottlingEnabled:function(a){Y=a},isLoadingTimeSent:function(){return T},setLoadingTimeSent:function(a){T=a},getLoadTimeOffset:function(){return U},setLoadTimeOffset:function(a){U=a},getInitTimestamp:function(){return V},setPauseOnBufferingInterval:function(a){da=a},getPauseOnBufferingInterval:function(){return da},isPauseOnBufferingEnabled:function(){return W},setPauseOnBufferingEnabled:function(a){W=a},startPausedOnBufferingTimer:function(a,c){ba.stopPausedOnBufferingTimer(),X=ba.getPlatformAPI().setTimeout(function(){var d={},e=b.fixEventTime(d),f=parseInt(c.ns_st_po);d.ns_st_po=f+e-a+"",ba.newEvent(i.PAUSE_ON_BUFFERING,e,d)},da)},stopPausedOnBufferingTimer:function(){null!=X&&(ba.getPlatformAPI().clearTimeout(X),X=null)},stopDelayedTransitionTimer:function(){Z&&(ba.getPlatformAPI().clearTimeout(Z),Z=null)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;e<f;e++){var g=d[e],h=g.split("=");2==h.length?ba.setLabel(h[0],b(h[1])):1==h.length&&ba.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return aa=a},getPixelURL:function(){return aa?aa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?aa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?aa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getSseSM:function(){return m},resetPlaylist:function(a){var b=m.getPlaylist();m.setPlaylist(new n),n.resetPlaylist(b,m.getPlaylist(),a)},resetHeartbeat:function(){m.getHeartbeat().pause();var a=m.getHeartbeat().getIntervals();m.setHeartbeat(new p(m)),m.getHeartbeat().setIntervals(a)},resetKeepAlive:function(){m.getKeepAlive().pause();var a=m.getKeepAlive().getInterval();m.setKeepAlive(new q(m)),m.getKeepAlive().setInterval(a)}});var fa,ga;b.isBrowser()?(fa=window,ga=document):(fa={},ga={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(ba,{prepareUrl:f,viewNotify:e}),a()}}(),G=function(){return function(a){var c,d,e,f,g,h,i=this;b.extend(i,{getAppCore:function(){return c},getSSECore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaylist:function(){return h},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaylist:function(a){h=a}})}}(),H=function(){return function(a,c){function d(){h=new F,g=!0,a&&k.setLabels(a),c&&k.setPixelURL(c)}function e(a,b){k.notify(i.CUSTOM,a,b)}function f(){g&&h.getSseSM().getStateMachine().getCurrentState()!=j.IDLE&&k.end()}var g,h,k=this,m=l.STANDARD_METADATA_LABELS;b.extend(this,{isProperlyInitialized:function(){return h.isProperlyInitialized()},reset:function(a){var b=h;b.getSseSM().getKeepAlive().pause(),b.getSseSM().getHeartbeat().pause(),h=new F,n.resetPlaylist(b.getSseSM().getPlaylist(),h.getSseSM().getPlaylist(),a)},setPauseOnBufferingInterval:function(a){h.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return h.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){h.getSseSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return h.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){h.getSseSM().getHeartbeat().setIntervals(a)},play:function(a,b){k.notify(i.PLAY,a,b)},pause:function(a,b){k.notify(i.PAUSE,a,b)},end:function(a,b){k.notify(i.END,a,b)},bufferStart:function(a,b){k.notify(i.BUFFER,a,b)},bufferStop:function(a,b){k.notify(i.BUFFER_STOP,a,b)},load:function(a,b){k.notify(i.LOAD,a,b)},engage:function(a,b){k.notify(i.ENGAGE,a,b)},seekStart:function(a,b){k.notify(i.SEEK_START,a,b)},skipAd:function(a,b){k.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){k.notify(i.CTA,a,b)},error:function(a,b){k.notify(i.ERROR,a,b)},transferPlayback:function(a,b){k.notify(i.TRANSFER,a,b)},drmFail:function(a,b){k.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){k.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){k.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=a+"",k.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=a+"",k.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=a+"",k.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=a+"",k.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=a+"",k.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=a+"",k.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=a+"",k.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=a+"",k.notify(i.CDN,d,b)}},notify:function(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.getInteger(d,0)+""),c.ns_st_po&&h.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(c.ns_st_po)),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?h.newEvent(a,e,c):h.newPseudoEvent(a,e,c)}},getLabels:function(){return h.getLabels()},getState:function(){return h.getSseSM().getStateMachine().getCurrentState()},setLabels:function(a){h.setLabels(a)},getLabel:function(a){return h.getLabel(a)},setLabel:function(a,b){h.setLabel(a,b)},getLoadTimeOffset:function(){return h.getLoadTimeOffset()},setLoadTimeOffset:function(a){h.setLoadTimeOffset(a)},setPixelURL:function(a){return h.setPixelURL(a)},getPixelURL:function(){return h.getPixelURL()},setImplementationType:function(a){h.setImplementationType(a)},isPauseOnBufferingEnabled:function(){return h.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){h.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return h.isThrottlingEnabled()},setThrottlingEnabled:function(a){h.setThrottlingEnabled(a)},setThrottlingDelay:function(a){h.setThrottlingDelay(a)},getThrottlingDelay:function(){return h.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){h.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return h.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if(void 0===d&&(d=!0),a=b.jsonObjectToStringDictionary(a),d&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=a.ns_st_cn;else for(var g=0;g<m.length;g++)a[m[g]]&&(e+=m[g]+":"+a[m[g]]+";");var i=h.getSseSM().getPlaylist(),l=i.getClip();l.isClipStarted()?(i.hashExists(l.getHash())||(i.storeHash(l.getHash()),i.storeClipNumber(l.getHash(),l.getClipNumber())),i.storeClipPlaybackCounters(),f=i.hashExists(e)?i.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):i.getMaxClipNumber()+1):f=i.hashExists(e)?i.getClipNumber(e):l.getClipNumber(),i.resetClip(),l=i.getClip(),l.setHash(e),l.setClipNumber(f),l.setLabels(a);var n=i.getStoredClipRegisters(e);return n&&(l.setClipStarted(!0),l.setSegmentPlaybackCounter(n.segmentPlaybackCounter),l.setClipLoadCounter(n.clipLoadCounter),l.setAssetPlaybackCounter(n.assetPlaybackCounter),l.setLowestPartNumberPlayed(n.lowestPartNumberPlayed),l.setSeeking(n.seeking),l.setSeekingTimeBeforeEnd(n.seekingTimeBeforeEnd),l.setSeekStartPosition(n.seekingStartPosition),l.setClipPlaybackIntervals(n.clipPlaybackIntervals),l.setUniquePlaybackInterval(n.uniquePlaybackInterval),l.setLongestPlaybackInterval(n.longestPlaybackInterval),l.setVideoTrack(n.videoTrack),l.setAudioTrack(n.audioTrack),l.setSubtitleTrack(n.subtitleTrack),l.setCDN(n.cdn),l.setPlaySequenceCounter(n.playSequenceCounter),l.setPreviousUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousEventIndependentUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousLongestPlaybackInterval(n.longestPlaybackInterval)),l.incrementClipLoadCounter(),l.isClipStarted()&&c&&(i.incrementPlayCounter(),i.incrementPlaybackCounter()),c&&i.setPlaySequenceCounter(0),!0}return!1},setPlaylist:function(a,c){return void 0===c&&(c=!0),a=b.jsonObjectToStringDictionary(a),c&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE&&(h.getSseSM().getPlaylist().isPlaylistStarted()&&h.resetPlaylist(),h.getSseSM().getPlaylist().setLabels(a),!0)},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){h.addListener(a)},removeListener:function(a){h.removeListener(a)},getClip:function(){return h.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return h.getSseSM().getPlaylist()},setHttpGet:function(a){"function"==typeof a&&(h.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(h.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){g=a},isExitEndEventEnabled:function(){return g},getPlatformAPI:function(){return h.getPlatformAPI()}}),b.extend(k,{customNotify:e,viewNotify:function(a,b){a=a||k.getPixelURL(),a&&h.viewNotify(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d()}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;b<=y;b++)if(x.hasOwnProperty(b+"")){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(c+"")&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=b+""),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"!=typeof a&&(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=b+""),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(H),H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:n+"",ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:n+"",ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a})}(void 0),function(a,b){function c(a){var b=a.length,c=ka.type(a);return!ka.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)))}function d(a){var b=za[a]={};return ka.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ka.acceptData(a)){var f,g,h=ka.expando,i=a.nodeType,j=i?ka.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ba.pop()||ka.guid++:h),j[k]||(j[k]=i?{}:{toJSON:ka.noop}),"object"!=typeof c&&"function"!=typeof c||(e?j[k]=ka.extend(j[k],c):j[k].data=ka.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[ka.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[ka.camelCase(c)])):f=g,f}}function f(a,b,c){if(ka.acceptData(a)){var d,e,f=a.nodeType,g=f?ka.cache:a,i=f?a[ka.expando]:ka.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){ka.isArray(b)?b=b.concat(ka.map(b,ka.camelCase)):b in d?b=[b]:(b=ka.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!ka.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?ka.cleanData([a],!0):ka.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ba,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:Aa.test(d)?ka.parseJSON(d):d)}catch(f){}ka.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ka.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(ka.isFunction(b))return ka.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ka.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qa.test(b))return ka.filter(b,a,c);b=ka.filter(b,a)}return ka.grep(a,function(a){return ka.inArray(a,b)>=0!==c})}function n(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return ka.nodeName(a,"table")&&ka.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==ka.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)ka._data(c,"globalEval",!b||ka._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&ka.hasData(a)){var c,d,e,f=ka._data(a),g=ka._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)ka.event.add(b,c,h[c][d])}g.data&&(g.data=ka.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ka.support.noCloneEvent&&b[ka.expando]){e=ka._data(b);for(d in e.events)ka.removeEvent(b,d,e.handle);b.removeAttribute(ka.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ka.support.html5Clone&&a.innerHTML&&!ka.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ka.nodeName(e,c)?g.push(e):ka.merge(g,u(e,c));return c===b||c&&ka.nodeName(a,c)?ka.merge([a],g):g}function v(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===ka.css(a,"display")||!ka.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ka._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=ka._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&ka._data(d,"olddisplay",e?c:ka.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ka.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ka.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ka.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ka.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ka.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=lb(a,b,f),(e<0||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ka.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=ub[a];return c||(c=D(a,b),"none"!==c&&c||(jb=(jb||ka("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jb.detach()),ub[a]=c),c}function D(a,b){var c=ka(b.createElement(a)).appendTo(b.body),d=ka.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(ka.isArray(b))ka.each(b,function(b,e){c||Ab.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ka.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d);
}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(ka.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,b,c,d){function e(h){var i;return f[h]=!0,ka.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function H(a,c){var d,e,f=ka.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ka.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}if(g)return g!==j[0]&&j.unshift(g),d[g]}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$b=b}),$b=ka.now()}function N(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dc.length,h=ka.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ka.extend({},b),opts:ka.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ka.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);f<g;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return ka.map(k,N,j),ka.isFunction(j.opts.start)&&j.opts.start.call(a,j),ka.fx.timer(ka.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=ka.camelCase(c),e=b[d],f=a[c],ka.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ka.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=ka._data(a,"fxshow");c.queue||(h=ka._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,ka.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===ka.css(a,"display")&&"none"===ka.css(a,"float")&&(ka.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",ka.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||ka.style(a,d)}if(!ka.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=ka._data(a,"fxshow",{}),f&&(n.hidden=!m),m?ka(a).show():j.done(function(){ka(a).hide()}),j.done(function(){var b;ka._removeData(a,"fxshow");for(b in k)ka.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return ka.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,aa={},ba=[],ca="1.10.2",da=ba.concat,ea=ba.push,fa=ba.slice,ga=ba.indexOf,ha=aa.toString,ia=aa.hasOwnProperty,ja=ca.trim,ka=function(a,b){return new ka.fn.init(a,b,V)},la=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qa=/^[\],:{}\s]*$/,ra=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ua=/^-ms-/,va=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()},xa=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(ya(),ka.ready())},ya=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xa,!1),a.removeEventListener("load",xa,!1)):(Y.detachEvent("onreadystatechange",xa),a.detachEvent("onload",xa))};ka.fn=ka.prototype={jquery:ca,constructor:ka,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ka?c[0]:c,ka.merge(this,ka.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pa.test(e[1])&&ka.isPlainObject(c))for(e in c)ka.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ka.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ka.makeArray(a,this))},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a){var b=ka.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ka.each(this,a,b)},ready:function(a){return ka.ready.promise().done(a),this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},map:function(a){return this.pushStack(ka.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ea,sort:[].sort,splice:[].splice},ka.fn.init.prototype=ka.fn,ka.extend=ka.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ka.isFunction(h)||(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ka.isPlainObject(d)||(c=ka.isArray(d)))?(c?(c=!1,g=a&&ka.isArray(a)?a:[]):g=a&&ka.isPlainObject(a)?a:{},h[e]=ka.extend(k,g,d)):d!==b&&(h[e]=d));return h},ka.extend({expando:"jQuery"+(ca+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===ka&&(a.$=_),b&&a.jQuery===ka&&(a.jQuery=$),ka},isReady:!1,readyWait:1,holdReady:function(a){a?ka.readyWait++:ka.ready(!0)},ready:function(a){if(a===!0?!--ka.readyWait:!ka.isReady){if(!Y.body)return setTimeout(ka.ready);ka.isReady=!0,a!==!0&&--ka.readyWait>0||(U.resolveWith(Y,[ka]),ka.fn.trigger&&ka(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ka.type(a)},isArray:Array.isArray||function(a){return"array"===ka.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?aa[ha.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==ka.type(a)||a.nodeType||ka.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(ka.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ka.buildFragment([a],b,e),e&&ka(e).remove(),ka.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ka.trim(b),b&&qa.test(b.replace(sa,"@").replace(ta,"]").replace(ra,"")))?new Function("return "+b)():void ka.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ka.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ka.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(va,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ja&&!ja.call("\ufeffÂ ")?function(a){return null==a?"":ja.call(a)}:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ka.merge(d,"string"==typeof a?[a]:a):ea.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ga)return ga.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return da.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ka.isFunction(a)?(d=fa.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fa.call(arguments)))},e.guid=a.guid=a.guid||ka.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ka.type(d)){f=!0;for(i in d)ka.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ka.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ka(a),c)})),c))for(;i<j;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),ka.ready.promise=function(b){if(!U)if(U=ka.Deferred(),"complete"===Y.readyState)setTimeout(ka.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xa,!1),a.addEventListener("load",xa,!1);else{Y.attachEvent("onreadystatechange",xa),a.attachEvent("onload",xa);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ka.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ya(),ka.ready()}}()}return U.promise(b)},ka.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()}),V=ka(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=ta.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return aa.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return aa.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(ja,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){d&&!(e=la.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ja," ")}),h=h.slice(d.length));for(g in z.filter)!(e=ra[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ca.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):aa.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ca.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];h<e;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ja,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}aa.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ra.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xa,ya),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return aa.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,na.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,aa=Z.push,ba=Z.slice,ca=Z.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ea="[\\x20\\t\\r\\n\\f]",fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ga=fa.replace("w","w#"),ha="\\["+ea+"*("+fa+")"+ea+"*(?:([*^$|!~]?=)"+ea+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ga+")|)|)"+ea+"*\\]",ia=":("+fa+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",ja=new RegExp("^"+ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ea+"+$","g"),la=new RegExp("^"+ea+"*,"+ea+"*"),ma=new RegExp("^"+ea+"*([>+~]|"+ea+")"+ea+"*"),na=new RegExp(ea+"*[+~]"),oa=new RegExp("="+ea+"*([^\\]'\"]*)"+ea+"*\\]","g"),pa=new RegExp(ia),qa=new RegExp("^"+ga+"$"),ra={ID:new RegExp("^#("+fa+")"),CLASS:new RegExp("^\\.("+fa+")"),TAG:new RegExp("^("+fa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ea+"*(even|odd|(([+-]|)(\\d*)n|)"+ea+"*(?:([+-]|)"+ea+"*(\\d+)|))"+ea+"*\\)|)","i"),bool:new RegExp("^(?:"+da+")$","i"),needsContext:new RegExp("^"+ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ea+"*((?:-\\d)?\\d*)"+ea+"*\\)|)(?=[^-]|$)","i")},sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+ea+"?|("+ea+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{aa.apply(Z=ba.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(za){aa={apply:Z.length?function(a,b){_.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},x=c.support={},F=c.setDocument=function(a){var b=a?a.ownerDocument||a:O,c=b.defaultView;return b!==G&&9===b.nodeType&&b.documentElement?(G=b,H=b.documentElement,I=!B(b),c&&c.attachEvent&&c!==c.top&&c.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!b.getElementsByName||!b.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==W)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==W&&I)return b.getElementsByClassName(a)},K=[],J=[],(x.qsa=sa.test(b.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+ea+"*(?:value|"+da+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+ea+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sa.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ia)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),M=sa.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,c){if(a===c)return U=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!x.sortDetached&&c.compareDocumentPosition(a)===d?a===b||M(O,a)?-1:c===b||M(O,c)?1:E?ca.call(E,a)-ca.call(E,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,i=[a],j=[c];if(a===c)return U=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:E?ca.call(E,a)-ca.call(E,c):0;if(f===g)return h(a,c);for(d=a;d=d.parentNode;)i.unshift(d);for(d=c;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},b):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(oa,"='$1']"),x.matchesSelector&&I&&(!K||!K.test(b))&&(!J||!J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ra.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pa.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ea+")"+a+"("+ea+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:!b||(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ca.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ja,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qa.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[c<0?c+b:c]}),even:k(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(da,function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&d.specified?d.value:a[b]===!0?b.toLowerCase():null}),ka.find=c,ka.expr=c.selectors,ka.expr[":"]=ka.expr.pseudos,ka.unique=c.uniqueSort,ka.text=c.getText,ka.isXMLDoc=c.isXML,ka.contains=c.contains}(a);var za={};ka.Callbacks=function(a){a="string"==typeof a?za[a]||d(a):ka.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&h<g;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ka.each(b,function(b,c){var e=ka.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ka.each(arguments,function(a,b){for(var d;(d=ka.inArray(b,j,d))>-1;)j.splice(d,1),c&&(d<=g&&g--,d<=h&&h--)}),this},has:function(a){return a?ka.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ka.extend({Deferred:function(a){var b=[["resolve","done",ka.Callbacks("once memory"),"resolved"],["reject","fail",ka.Callbacks("once memory"),"rejected"],["notify","progress",ka.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ka.Deferred(function(c){ka.each(b,function(b,f){var g=f[0],h=ka.isFunction(a[b])&&a[b];
e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ka.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ka.extend(a,d):d}},e={};return d.pipe=d.then,ka.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fa.call(arguments),g=f.length,h=1!==g||a&&ka.isFunction(a.promise)?g:0,i=1===h?a:ka.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&ka.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ka.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in ka(b))break;return b.ownLast="0"!==k,ka(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ka.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Aa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ba=/([A-Z])/g;ka.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ka.cache[a[ka.expando]]:a[ka.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ka.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ka.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=ka.data(i),1===i.nodeType&&!ka._data(i,"parsedAttrs"))){for(d=i.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=ka.camelCase(e.slice(5)),g(i,e,f[e]));ka._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){ka.data(this,a)}):arguments.length>1?this.each(function(){ka.data(this,a,c)}):i?g(i,a,ka.data(i,a)):null},removeData:function(a){return this.each(function(){ka.removeData(this,a)})}}),ka.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ka._data(a,b),c&&(!d||ka.isArray(c)?d=ka._data(a,b,ka.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ka.queue(a,b),d=c.length,e=c.shift(),f=ka._queueHooks(a,b),g=function(){ka.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ka._data(a,c)||ka._data(a,c,{empty:ka.Callbacks("once memory").add(function(){ka._removeData(a,b+"queue"),ka._removeData(a,c)})})}}),ka.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ka.queue(this[0],a):c===b?this:this.each(function(){var b=ka.queue(this,a,c);ka._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ka.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ka.dequeue(this,a)})},delay:function(a,b){return a=ka.fx?ka.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ka.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ka._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ca,Da,Ea=/[\t\r\n\f]/g,Fa=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,Ha=/^(?:a|area)$/i,Ia=/^(?:checked|selected)$/i,Ja=ka.support.getSetAttribute,Ka=ka.support.input;ka.fn.extend({attr:function(a,b){return ka.access(this,ka.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ka.removeAttr(this,a)})},prop:function(a,b){return ka.access(this,ka.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ka.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ka.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];g<h;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ka.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ka.isFunction(a)?this.each(function(c){ka(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ka(this),f=a.match(ma)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==W&&"boolean"!==c||(this.className&&ka._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ka._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ea," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ka.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,ka(this).val()):a,null==f?f="":"number"==typeof f?f+="":ka.isArray(f)&&(f=ka.map(f,function(a){return null==a?"":a+""})),d=ka.valHooks[this.type]||ka.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ka.valHooks[f.type]||ka.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fa,""):null==c?"":c)}}}),ka.extend({valHooks:{option:{get:function(a){var b=ka.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(ka.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ka.nodeName(c.parentNode,"optgroup"))){if(b=ka(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ka.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ka.inArray(ka(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===W?ka.prop(a,c,d):(1===g&&ka.isXMLDoc(a)||(c=c.toLowerCase(),e=ka.attrHooks[c]||(ka.expr.match.bool.test(c)?Da:Ca)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=ka.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void ka.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=ka.propFix[c]||c,ka.expr.match.bool.test(c)?Ka&&Ja||!Ia.test(c)?a[d]=!1:a[ka.camelCase("default-"+c)]=a[d]=!1:ka.attr(a,c,""),a.removeAttribute(Ja?c:d)},attrHooks:{type:{set:function(a,b){if(!ka.support.radioValue&&"radio"===b&&ka.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ka.isXMLDoc(a),g&&(c=ka.propFix[c]||c,f=ka.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=ka.find.attr(a,"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||Ha.test(a.nodeName)&&a.href?0:-1}}}}),Da={set:function(a,b,c){return b===!1?ka.removeAttr(a,c):Ka&&Ja||!Ia.test(c)?a.setAttribute(!Ja&&ka.propFix[c]||c,c):a[ka.camelCase("default-"+c)]=a[c]=!0,c}},ka.each(ka.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ka.expr.attrHandle[c]||ka.find.attr;ka.expr.attrHandle[c]=Ka&&Ja||!Ia.test(c)?function(a,c,e){var f=ka.expr.attrHandle[c],g=e?b:(ka.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return ka.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[ka.camelCase("default-"+c)]?c.toLowerCase():null}}),Ka&&Ja||(ka.attrHooks.value={set:function(a,b,c){return ka.nodeName(a,"input")?void(a.defaultValue=b):Ca&&Ca.set(a,b,c)}}),Ja||(Ca={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ka.expr.attrHandle.id=ka.expr.attrHandle.name=ka.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},ka.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Ca.set},ka.attrHooks.contenteditable={set:function(a,b,c){Ca.set(a,""!==b&&b,c)}},ka.each(["width","height"],function(a,b){ka.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),ka.support.hrefNormalized||ka.each(["href","src"],function(a,b){ka.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ka.support.style||(ka.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ka.support.optSelected||(ka.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ka.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ka.propFix[this.toLowerCase()]=this}),ka.support.enctype||(ka.propFix.enctype="encoding"),ka.each(["radio","checkbox"],function(){ka.valHooks[this]={set:function(a,b){if(ka.isArray(b))return a.checked=ka.inArray(ka(a).val(),b)>=0}},ka.support.checkOn||(ka.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var La=/^(?:input|select|textarea)$/i,Ma=/^key/,Na=/^(?:mouse|contextmenu)|click/,Oa=/^(?:focusinfocus|focusoutblur)$/,Pa=/^([^.]*)(?:\.(.+)|)$/;ka.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ka._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ka.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ka===W||a&&ka.event.triggered===a.type?b:ka.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ma)||[""],i=c.length;i--;)g=Pa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=ka.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ka.event.special[o]||{},m=ka.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ka.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ka.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ka.hasData(a)&&ka._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Pa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ka.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ka.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ka.event.remove(a,n+b[j],c,d,!0);ka.isEmptyObject(k)&&(delete q.handle,ka._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ia.call(c,"type")?c.type:c,p=ia.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Oa.test(o+ka.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ka.expando]?c:new ka.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ka.makeArray(d,[c]),k=ka.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ka.isWindow(e)){for(j=k.delegateType||o,Oa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ka._data(i,"events")||{})[c.type]&&ka._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ka.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&ka.acceptData(e)&&h&&e[o]&&!ka.isWindow(e)){l=e[h],l&&(e[h]=null),ka.event.triggered=o;try{e[o]()}catch(q){}ka.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ka.event.fix(a);var c,d,e,f,g,h=[],i=fa.call(arguments),j=(ka._data(this,"events")||{})[a.type]||[],k=ka.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ka.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(e.namespace)||(a.handleObj=e,a.data=e.data,d=((ka.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;g<i;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ka(d,this).index(j)>=0:ka.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ka.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ka.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ka.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return ka.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ka.extend(new ka.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ka.event.trigger(e,null,b):ka.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ka.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},ka.Event=function(a,b){return this instanceof ka.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ka.extend(this,b),this.timeStamp=a&&a.timeStamp||ka.now(),void(this[ka.expando]=!0)):new ka.Event(a,b)},ka.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ka.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ka.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ka.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ka.support.submitBubbles||(ka.event.special.submit={setup:function(){return!ka.nodeName(this,"form")&&void ka.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ka.nodeName(c,"input")||ka.nodeName(c,"button")?c.form:b;d&&!ka._data(d,"submitBubbles")&&(ka.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ka._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ka.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!ka.nodeName(this,"form")&&void ka.event.remove(this,"._submit")}}),ka.support.changeBubbles||(ka.event.special.change={setup:function(){return La.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ka.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ka.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ka.event.simulate("change",this,a,!0)})),!1):void ka.event.add(this,"beforeactivate._change",function(a){var b=a.target;La.test(b.nodeName)&&!ka._data(b,"changeBubbles")&&(ka.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ka.event.simulate("change",this.parentNode,a,!0)}),ka._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return ka.event.remove(this,"._change"),!La.test(this.nodeName)}}),ka.support.focusinBubbles||ka.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ka.event.simulate(b,a.target,ka.event.fix(a),!0)};ka.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),ka.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ka().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ka.guid++)),this.each(function(){ka.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ka(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=j),this.each(function(){ka.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){ka.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ka.event.trigger(a,b,c,!0)}});var Qa=/^.[^:#\[\.,]*$/,Ra=/^(?:parents|prev(?:Until|All))/,Sa=ka.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ka.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ka(a).filter(function(){for(b=0;b<e;b++)if(ka.contains(d[b],this))return!0}));for(b=0;b<e;b++)ka.find(a,d[b],c);return c=this.pushStack(e>1?ka.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=ka(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(ka.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sa.test(a)?ka(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ka(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ka.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?ka.unique(f):f)},index:function(a){return a?"string"==typeof a?ka.inArray(this[0],ka(a)):ka.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ka(a,b):ka.makeArray(a&&a.nodeType?[a]:a),d=ka.merge(this.get(),c);return this.pushStack(ka.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ka.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ka.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ka.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return ka.dir(a,"nextSibling")},prevAll:function(a){return ka.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ka.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ka.dir(a,"previousSibling",c)},siblings:function(a){return ka.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ka.sibling(a.firstChild)},contents:function(a){return ka.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ka.merge([],a.childNodes)}},function(a,b){ka.fn[a]=function(c,d){var e=ka.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ka.filter(d,e)),this.length>1&&(Ta[a]||(e=ka.unique(e)),Ra.test(a)&&(e=e.reverse())),this.pushStack(e)}}),ka.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ka.find.matchesSelector(d,a)?[d]:[]:ka.find.matches(a,ka.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ka(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ka.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=n(Y),ib=hb.appendChild(Y.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ka.fn.extend({text:function(a){return ka.access(this,function(a){return a===b?ka.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ka.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ka.cleanData(u(c)),c.parentNode&&(b&&ka.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ka.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ka.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ka.clone(this,a,b)})},html:function(a){return ka.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if("string"==typeof a&&!ab.test(a)&&(ka.support.htmlSerialize||!Wa.test(a))&&(ka.support.leadingWhitespace||!Xa.test(a))&&!gb[(Za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ya,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(ka.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=ka.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),ka(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=da.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=ka.isFunction(n);if(o||!(k<=1||"string"!=typeof n||ka.support.checkClone)&&cb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=ka.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=ka.map(u(i,"script"),p),f=g.length;j<k;j++)e=i,j!==m&&(e=ka.clone(e,!0,!0),f&&ka.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,ka.map(g,q),j=0;j<f;j++)e=g[j],db.test(e.type||"")&&!ka._data(e,"globalEval")&&ka.contains(h,e)&&(e.src?ka._evalUrl(e.src):ka.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fb,"")));i=d=null}return this}}),ka.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ka.fn[a]=function(a){for(var c,d=0,e=[],f=ka(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),ka(f[d])[b](c),ea.apply(e,c.get());return this.pushStack(e)}}),ka.extend({clone:function(a,b,c){var d,e,f,g,h,i=ka.contains(a.ownerDocument,a);if(ka.support.html5Clone||ka.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ka.support.noCloneEvent&&ka.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ka.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);
if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;p<l;p++)if(f=a[p],f||0===f)if("object"===ka.type(f))ka.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ka.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ka.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ka.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ka.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),ka.support.appendChecked||ka.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||ka.inArray(f,d)===-1)&&(g=ka.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ka.expando,i=ka.cache,j=ka.support.deleteExpando,k=ka.event.special;null!=(c=a[g]);g++)if((b||ka.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ka.event.remove(c,d):ka.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,ba.push(e))}},_evalUrl:function(a){return ka.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ka.fn.extend({wrapAll:function(a){if(ka.isFunction(a))return this.each(function(b){ka(this).wrapAll(a.call(this,b))});if(this[0]){var b=ka(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ka.isFunction(a)?this.each(function(b){ka(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ka(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ka.isFunction(a);return this.each(function(c){ka(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ka.nodeName(this,"body")||ka(this).replaceWith(this.childNodes)}).end()}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+la+")(.*)$","i"),sb=new RegExp("^("+la+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+la+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ka.fn.extend({css:function(a,c){return ka.access(this,function(a,c,d){var e,f,g={},h=0;if(ka.isArray(c)){for(f=kb(a),e=c.length;h<e;h++)g[c[h]]=ka.css(a,c[h],!1,f);return g}return d!==b?ka.style(a,c,d):ka.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){x(this)?ka(this).show():ka(this).hide()})}}),ka.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ka.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ka.camelCase(c),j=a.style;if(c=ka.cssProps[i]||(ka.cssProps[i]=w(j,i)),h=ka.cssHooks[c]||ka.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ka.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ka.cssNumber[i]||(d+="px"),ka.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ka.camelCase(c);return c=ka.cssProps[i]||(ka.cssProps[i]=w(a.style,i)),h=ka.cssHooks[c]||ka.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ka.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ka.contains(a.ownerDocument,a)||(i=ka.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ka.each(["height","width"],function(a,b){ka.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&pb.test(ka.css(a,"display"))?ka.swap(a,vb,function(){return B(a,b,d)}):B(a,b,d)},set:function(a,c,d){var e=d&&kb(a);return z(a,c,d?A(a,b,d,ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,e),e):0)}}}),ka.support.opacity||(ka.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ka.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ka.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ka(function(){ka.support.reliableMarginRight||(ka.cssHooks.marginRight={get:function(a,b){if(b)return ka.swap(a,{display:"inline-block"},lb,[a,"marginRight"])}}),!ka.support.pixelPosition&&ka.fn.position&&ka.each(["top","left"],function(a,b){ka.cssHooks[b]={get:function(a,c){if(c)return c=lb(a,b),sb.test(c)?ka(a).position()[b]+"px":c}}})}),ka.expr&&ka.expr.filters&&(ka.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ka.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka.css(a,"display"))},ka.expr.filters.visible=function(a){return!ka.expr.filters.hidden(a)}),ka.each({margin:"",padding:"",border:"Width"},function(a,b){ka.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ka.cssHooks[a+b].set=z)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ka.fn.extend({serialize:function(){return ka.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ka.prop(this,"elements");return a?ka.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ka(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ka(this).val();return null==c?null:ka.isArray(c)?ka.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ka.param=function(a,c){var d,e=[],f=function(a,b){b=ka.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ka.ajaxSettings&&ka.ajaxSettings.traditional),ka.isArray(a)||a.jquery&&!ka.isPlainObject(a))ka.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zb,"+")},ka.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ka.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ka.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb,Fb,Gb=ka.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ka.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=Y.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ka.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ka.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ka.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ka("<div>").append(ka.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ka.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ka.fn[b]=function(a){return this.on(b,a)}}),ka.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ka.parseJSON,"text xml":ka.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,ka.ajaxSettings),b):H(ka.ajaxSettings,a)},ajaxPrefilter:F(Qb),ajaxTransport:F(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&a<300||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ka.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ka.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,!a&&x||(x="error",a<0&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ka.active||ka.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ka.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ka(n):ka.event,p=ka.Deferred(),q=ka.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ka.trim(m.dataType||"*").toLowerCase().match(ma)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Eb[3]||("http:"===Eb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ka.param(m.data,m.traditional)),G(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ka.active++&&ka.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ka.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ka.lastModified[g]),ka.etag[g]&&w.setRequestHeader("If-None-Match",ka.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(u<2))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return ka.get(a,b,c,"json")},getScript:function(a,c){return ka.get(a,b,c,"script")}}),ka.each(["get","post"],function(a,c){ka[c]=function(a,d,e,f){return ka.isFunction(d)&&(f=f||e,e=d,d=b),ka.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ka.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ka.globalEval(a),a}}}),ka.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ka.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||ka("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ka.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ka.expando+"_"+Gb++;return this[a]=!0,a}}),ka.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");if(i||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=ka.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ka.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ka.isFunction(g)&&g(h[0]),h=g=b}),"script"});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ka.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xb=ka.ajaxSettings.xhr(),ka.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ka.support.ajax=!!Xb,Xb&&ka.ajaxTransport(function(c){if(!c.crossDomain||ka.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ka.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ka(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+la+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[Q],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(ka.cssNumber[a]?"":"px"),g=(ka.cssNumber[a]||"px"!==f&&+d)&&bc.exec(ka.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ka.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ka.Animation=ka.extend(O,{tweener:function(a,b){ka.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ka.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ka.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.options.duration?this.pos=b=ka.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ka.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ka.fx.step[a.prop]?ka.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ka.cssProps[a.prop]]||ka.cssHooks[a.prop])?ka.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ka.each(["toggle","show","hide"],function(a,b){var c=ka.fn[b];ka.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),ka.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ka.isEmptyObject(a),f=ka.speed(b,c,d),g=function(){var b=O(this,ka.extend({},a),f);(e||ka._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ka.timers,g=ka._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||ka.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ka._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ka.timers,g=d?d.length:0;for(c.finish=!0,ka.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ka.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ka.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ka.speed=function(a,b,c){var d=a&&"object"==typeof a?ka.extend({},a):{complete:c||!c&&b||ka.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ka.isFunction(b)&&b};return d.duration=ka.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ka.fx.speeds?ka.fx.speeds[d.duration]:ka.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ka.isFunction(d.old)&&d.old.call(this),d.queue&&ka.dequeue(this,d.queue)},d},ka.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ka.timers=[],ka.fx=R.prototype.init,ka.fx.tick=function(){var a,c=ka.timers,d=0;for($b=ka.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ka.fx.stop(),$b=b},ka.fx.timer=function(a){a()&&ka.timers.push(a)&&ka.fx.start()},ka.fx.interval=13,ka.fx.start=function(){_b||(_b=setInterval(ka.fx.tick,ka.fx.interval))},ka.fx.stop=function(){clearInterval(_b),_b=null},ka.fx.speeds={slow:600,fast:200,_default:400},ka.fx.step={},ka.expr&&ka.expr.filters&&(ka.expr.filters.animated=function(a){return ka.grep(ka.timers,function(b){return a===b.elem}).length}),ka.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ka.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ka.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ka.offset={setOffset:function(a,b,c){var d=ka.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ka(a),h=g.offset(),i=ka.css(a,"top"),j=ka.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ka.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ka.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ka.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ka.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ka.nodeName(a[0],"html")||(c=a.offset()),c.top+=ka.css(a[0],"borderTopWidth",!0),c.left+=ka.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ka.css(d,"marginTop",!0),left:b.left-c.left-ka.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!ka.nodeName(a,"html")&&"static"===ka.css(a,"position");)a=a.offsetParent;return a||Z})}}),ka.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ka.fn[a]=function(e){return ka.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ka(g).scrollLeft():f,d?f:ka(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ka.each({Height:"height",Width:"width"},function(a,c){ka.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ka.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ka.access(this,function(c,d,e){var f;return ka.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ka.css(c,d,h):ka.style(c,d,e,h)},c,g?e:b,g,null)}})}),ka.fn.size=function(){return this.length},ka.fn.andSelf=ka.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ka:(org.pbskids.video.jQuery=ka,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ka}))}(window),function(a){"use strict";a(window.jQuery||window.$,window,void 0)}(function(a,b,c){function d(){e=b[h](function(){f.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,j);c===e.w&&d===e.h||b.trigger(i,[e.w=c,e.h=d])}),d()},g[k])}a&&a.fn&&a.fn.jquery&&!(a.fn.jquery.split(".")[1]<7)||(a=org.pbskids.video.jQuery);var e,f=a([]),g=a.resize=a.extend(a.resize,{}),h="setTimeout",i="resize",j=i+"-special-event",k="delay",l="throttleWindow";g[k]=250,g[l]=!0,a.event.special[i]={setup:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.add(b),a.data(this,j,{w:b.width(),h:b.height()}),1===f.length&&d()},teardown:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.not(b),b.removeData(j),f.length||clearTimeout(e)},add:function(b){function d(b,d,f){var g=a(this),h=a.data(this,j);h.w=d!==c?d:g.width(),h.h=f!==c?f:g.height(),e.apply(this,arguments)}if(!g[l]&&this[h])return!1;var e;return a.isFunction(b)?(e=b,d):(e=b.handler,void(b.handler=d))}}}),function(a){"use strict";window.org=window.org||{},window.org.pbskids=org.pbskids||{},window.org.pbskids.iScrollMOD=a()}(function(){var a=Math,b=document,c=b.createElement("div").style,d=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),d=0,e=b.length;d<e;d++)if(a=b[d]+"ransform",a in c)return b[d].substr(0,b[d].length-1);return!1}(),e=d?"-"+d.toLowerCase()+"-":"",f=function(a){return""===d?a:(a=a.charAt(0).toUpperCase()+a.substr(1),d+a)},g=f("transform"),h=f("transitionProperty"),i=f("transitionDuration"),j=f("transformOrigin"),k=f("transitionTimingFunction"),l=f("transitionDelay"),m=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),p=f("perspective")in c,q=Boolean(window.PointerEvent||window.MSPointerEvent)&&!m,r="ontouchstart"in window&&!o,s=!!d,t=f("transition")in c,u="onorientationchange"in window?"orientationchange":"resize",v=window.PointerEvent?"pointerdown":window.MSPointerEvent?"MSPointerDown":r?"touchstart":"mousedown",w=window.PointerEvent?"pointermove":window.MSPointerEvent?"MSPointerMove":r?"touchmove":"mousemove",x=window.PointerEvent?"pointerup":window.MSPointerEvent?"MSPointerUp":r?"touchend":"mouseup",y=window.PointerEvent?"pointerout":window.MSPointerEvent?"MSPointerOut":r?"touchcancel":b.attachEvent?"mouseleave":"mouseout",z="onmousewheel"in window?"mousewheel":"onwheel"in window?"wheel":"DOMMouseScroll",A=function(){if(d===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[d]}(),B=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),C=function(){return window.cancelRequestAnimationFrame||window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),D=p?" translateZ(0)":"",E=function(a,c){var d,f=this;f.wrapper="object"==typeof a?a:b.getElementById(a),f.wrapper.style.overflow="hidden",f.wrapper.style.position="relative",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,dragScrollerWithMouse:!0,scrollBarsOnTouchDevice:!0,dragScrollBars:!1,minBarWidth:8,minBarHeight:8,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:m,hideScrollbar:n,fadeScrollbar:n&&p,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null,onAnimationEnd:null};for(d in c)f.options[d]=c[d];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=s&&f.options.useTransform,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=t&&f.options.useTransition,f.options.zoom&&m&&(D=""),f.scroller.style[h]=f.options.useTransform?e+"transform":"top left",f.scroller.style[i]="0",f.scroller.style[j]="0 0",f.options.useTransition&&(f.scroller.style[k]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[g]="translate("+f.x+"px,"+f.y+"px)"+D:(f.scroller.style.position="relative",f.scroller.style.top=f.y+"px",f.scroller.style.left=f.x+"px"),f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(u,window),r&&!q||"none"===f.options.wheelAction||f._bind(z),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500)),Date.now||(Date.now=function(){return(new Date).valueOf()})};return E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.target=a.srcElement||a.target,a.type){case v:if(b.draggingScrollbar===!0)return;switch(a.target){case b.vScrollbarIndicator:case b.hScrollbarIndicator:case b.vScrollbarWrapper:case b.hScrollbarWrapper:b._dragBarStart(a);break;default:if(!r&&0!==a.button)return;b._start(a)}break;case w:b.draggingScrollbar===!0?b._dragBar(a):b._move(a);break;case y:if(q)break;case x:b.draggingScrollbar===!0?b._dragBarEnd(a):b._end(a);break;case u:b._resize();break;case z:b._wheel(a);break;case A:b._transitionEnd(a)}},events:{},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW===this.scroller.offsetWidth*this.scale&&this.scrollerH===this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(c){var d,f=this;return f.draggingScrollbar&&(f._unbind(w,document),f._unbind(x,document),f.scrollingDirection=null,f.draggingScrollbar=!1),f[c+"Scrollbar"]&&f.options.dragScrollBars||f.dragScrollBars&&(f._unbind(v,f[c+"ScrollbarIndicator"]),f._unbind(v,f[c+"ScrollbarWrapper"])),f.dragScrollBars=f.options.dragScrollBars,f[c+"Scrollbar"]?(f[c+"ScrollbarWrapper"]||(d=b.createElement("div"),f.options.scrollbarClass?d.className=f.options.scrollbarClass+c.toUpperCase():(d.style.position="relative",d.style.zIndex="100","h"===c?(d.style.height="7px",d.style.bottom="1px",d.style.left="2px",d.style.right=(f.vScrollbar?"7":"2")+"px"):(d.style.width="7px",d.style.bottom=(f.hScrollbar?"7":"2")+"px",d.style.top="2px",d.style.right="1px")),d.style.overflow="hidden",f._addCSSText(d,"opacity:"+(f.options.hideScrollbar?"0":"1")),f._addCSSText(d,e+"transition-property:opacity"),f._addCSSText(d,e+"transition-duration:"+(f.options.fadeScrollbar?"350ms":"0")),f.options.dragScrollBars===!1&&f._addCSSText(d,"pointer-events:none"),f.wrapper.appendChild(d),f[c+"ScrollbarWrapper"]=d,d=b.createElement("div"),f.options.scrollbarClass||(d.style.zIndex="100",f._addCSSText(d,"background:rgba(0,0,0,0.5)"),f._addCSSText(d,"border:1px solid rgba(255,255,255,0.9)"),f._addCSSText(d,e+"background-clip:padding-box"),f._addCSSText(d,e+"box-sizing:border-box"),f._addCSSText(d,"h"===c?"height:100%":"width:100%"),f._addCSSText(d,e+"border-radius:3px"),f._addCSSText(d,"border-radius:3px")),f.options.dragScrollBars===!1&&f._addCSSText(d,"pointer-events:none"),d.style.position="relative",f._addCSSText(d,e+"transition-property:"+e+"transform"),f._addCSSText(d,e+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),f._addCSSText(d,e+"transition-duration:0"),f._addCSSText(d,e+"transform: translate(0,0)"+D),f.options.useTransition&&f._addCSSText(d,e+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),f[c+"ScrollbarWrapper"].appendChild(d),f[c+"ScrollbarIndicator"]=d),"h"===c?(f.hScrollbarSize=f.hScrollbarWrapper.clientWidth,f.hScrollbarIndicatorSize=a.max(a.round(f.hScrollbarSize*f.hScrollbarSize/f.scrollerW),f.options.minBarWidth||8),f.hScrollbarIndicator.style.width=f.hScrollbarIndicatorSize+"px",f.hScrollbarMaxScroll=f.hScrollbarSize-f.hScrollbarIndicator.offsetWidth,f.hScrollbarProp=f.hScrollbarMaxScroll/f.maxScrollX,
f.hScrollbarOffset=null):(f.vScrollbarSize=f.vScrollbarWrapper.clientHeight,f.vScrollbarIndicatorSize=a.max(a.round(f.vScrollbarSize*f.vScrollbarSize/f.scrollerH),f.options.minBarHeight||8),f.vScrollbarIndicator.style.height=f.vScrollbarIndicatorSize+"px",f.vScrollbarMaxScroll=f.vScrollbarSize-f.vScrollbarIndicator.offsetHeight,f.vScrollbarProp=f.vScrollbarMaxScroll/f.maxScrollY,f.vScrollbarOffset=null),f.options.dragScrollBars&&(f._bind(v,f[c+"ScrollbarIndicator"]),f._bind(v,f[c+"ScrollbarWrapper"])),void f._scrollbarPos(c,!0)):void(f[c+"ScrollbarWrapper"]&&(s&&(f[c+"ScrollbarIndicator"].style[g]=""),f[c+"ScrollbarWrapper"].parentNode.removeChild(f[c+"ScrollbarWrapper"]),f[c+"ScrollbarWrapper"]=null,f[c+"ScrollbarIndicator"]=null))},_resize:function(){var a=this;setTimeout(function(){a.refresh()},m?200:0)},_dragBarStart:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation();var c=this,d=c.hScrollbarIndicator===a.target||c.hScrollbarWrapper===a.target?"h":"v";c[d+"ScrollbarOffset"]||(c[d+"ScrollbarOffset"]=c._offset(c[d+"ScrollbarWrapper"])["h"===d?"left":"top"]),c.scrollingDirection=d,c._bind(w,b),c._bind(x,b),c.draggingScrollbar=!0,c._dragBar(a)},_dragBar:function(c){var d=this,e="h"===d.scrollingDirection?["h","X","Width"]:["v","Y","Height"],f=b.body,g=b.documentElement,h={X:d.x,Y:d.y};h[e[1]]=a.max(0,a.min(d[e[0]+"ScrollbarMaxScroll"],(c["page"+e[1]]||c["client"+e[1]]+f.scrollTop+g.scrollTop)+d[e[0]+"ScrollbarOffset"]-d[e[0]+"ScrollbarIndicator"]["offset"+e[2]]/2))/d[e[0]+"ScrollbarProp"],d._pos(h.X,h.Y)},_dragBarEnd:function(){var a=this;a.draggingScrollbar=!1,a.scrollingDirection=null,a._unbind(w,b),a._unbind(x,b),a.options.onScrollEnd&&a.options.onScrollEnd.call(a)},_pos:function(b,c){this.zoomed||(b=this.hScroll&&b?b:0,c=this.vScroll&&c?c:0,this.options.useTransform?this.scroller.style[g]="translate("+b+"px,"+c+"px) scale("+this.scale+")"+D:(b=a.round(b),c=a.round(c),this.scroller.style.left=b+"px",this.scroller.style.top=c+"px"),this.x=b,this.y=c,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(b,c){var d,e=this,f="h"===b?e.x:e.y;e[b+"Scrollbar"]&&(f=e[b+"ScrollbarProp"]*f,f<0?(e.options.fixedScrollbar||(d=e[b+"ScrollbarIndicatorSize"]+a.round(3*f),d<8&&(d=8),e[b+"ScrollbarIndicator"].style["h"===b?"width":"height"]=d+"px"),f=0):f>e[b+"ScrollbarMaxScroll"]&&(e.options.fixedScrollbar?f=e[b+"ScrollbarMaxScroll"]:(d=e[b+"ScrollbarIndicatorSize"]-a.round(3*(f-e[b+"ScrollbarMaxScroll"])),d<8&&(d=8),e[b+"ScrollbarIndicator"].style["h"===b?"width":"height"]=d+"px",f=e[b+"ScrollbarMaxScroll"]+(e[b+"ScrollbarIndicatorSize"]-d))),e[b+"ScrollbarWrapper"].style[l]="0",e[b+"ScrollbarWrapper"].style.opacity=c&&e.options.hideScrollbar?"0":"1",e.options.useTransform?e[b+"ScrollbarIndicator"].style[g]="translate("+("h"===b?f+"px,0)":"0,"+f+"px)")+D:e[b+"ScrollbarIndicator"].style["h"===b?"left":"top"]=f+"px")},_start:function(b){var c,d,e,f,h,i=this,j=r?b.touches[0]:b;i.enabled&&(i.options.dragScrollerWithMouse||r||q)&&(i.options.onBeforeScrollStart&&i.options.onBeforeScrollStart.call(i,b),(i.options.useTransition||i.options.zoom)&&i._transitionTime(0),i.moved=!1,i.animating=!1,i.zoomed=!1,i.distX=0,i.distY=0,i.absDistX=0,i.absDistY=0,i.dirX=0,i.dirY=0,i.options.zoom&&r&&b.touches.length>1&&(f=a.abs(b.touches[0].pageX-b.touches[1].pageX),h=a.abs(b.touches[0].pageY-b.touches[1].pageY),i.touchesDistStart=a.sqrt(f*f+h*h),i.originX=a.abs(b.touches[0].pageX+b.touches[1].pageX-2*i.wrapperOffsetLeft)/2-i.x,i.originY=a.abs(b.touches[0].pageY+b.touches[1].pageY-2*i.wrapperOffsetTop)/2-i.y,i.options.onZoomStart&&i.options.onZoomStart.call(i,b)),i.options.momentum&&(i.options.useTransform?(c=getComputedStyle(i.scroller,null)[g].replace(/[^0-9\-.,]/g,"").split(","),d=1*c[4],e=1*c[5]):(d=1*getComputedStyle(i.scroller,null).left.replace(/[^0-9-]/g,""),e=1*getComputedStyle(i.scroller,null).top.replace(/[^0-9-]/g,"")),d===i.x&&e===i.y||(i.options.useTransition?i._unbind(A):C(i.aniTime),i.steps=[],i._pos(d,e))),i.absStartX=i.x,i.absStartY=i.y,i.startX=i.x,i.startY=i.y,i.pointX=j.pageX,i.pointY=j.pageY,i.startTime=b.timeStamp||Date.now(),i.options.onScrollStart&&i.options.onScrollStart.call(i,b),i._bind(w),i._bind(x),i._bind(y))},_move:function(b){var c,d,e,f=this,h=r?b.touches[0]:b,i=h.pageX-f.pointX,j=h.pageY-f.pointY,k=f.x+i,l=f.y+j,m=b.timeStamp||Date.now();return f.options.onBeforeScrollMove&&f.options.onBeforeScrollMove.call(f,b),f.options.zoom&&r&&b.touches.length>1?(c=a.abs(b.touches[0].pageX-b.touches[1].pageX),d=a.abs(b.touches[0].pageY-b.touches[1].pageY),f.touchesDist=a.sqrt(c*c+d*d),f.zoomed=!0,e=1/f.touchesDistStart*f.touchesDist*this.scale,e<f.options.zoomMin?e=.5*f.options.zoomMin*Math.pow(2,e/f.options.zoomMin):e>f.options.zoomMax&&(e=2*f.options.zoomMax*Math.pow(.5,f.options.zoomMax/e)),f.lastScale=e/this.scale,k=this.originX-this.originX*f.lastScale+this.x,l=this.originY-this.originY*f.lastScale+this.y,this.scroller.style[g]="translate("+k+"px,"+l+"px) scale("+e+")"+D,void(f.options.onZoom&&f.options.onZoom.call(f,b))):(f.pointX=h.pageX,f.pointY=h.pageY,(k>0||k<f.maxScrollX)&&(k=f.options.bounce?f.x+i/2:k>=0||f.maxScrollX>=0?0:f.maxScrollX),(l>f.minScrollY||l<f.maxScrollY)&&(l=f.options.bounce?f.y+j/2:l>=f.minScrollY||f.maxScrollY>=0?f.minScrollY:f.maxScrollY),f.distX+=i,f.distY+=j,f.absDistX=a.abs(f.distX),f.absDistY=a.abs(f.distY),void(f.absDistX<6&&f.absDistY<6||(f.options.lockDirection&&(f.absDistX>f.absDistY+5?(l=f.y,j=0):f.absDistY>f.absDistX+5&&(k=f.x,i=0)),f.moved=!0,f._pos(k,l),f.dirX=i>0?-1:i<0?1:0,f.dirY=j>0?-1:j<0?1:0,m-f.startTime>300&&(f.startTime=m,f.startX=f.x,f.startY=f.y),f.options.onScrollMove&&f.options.onScrollMove.call(f,b))))},_end:function(c){if(!r||0===c.touches.length){var d,e,f,h,j,k,l,m=this,n=r?c.changedTouches[0]:c,o={dist:0,time:0},p={dist:0,time:0},q=(c.timeStamp||Date.now())-m.startTime,s=m.x,t=m.y;if(m._unbind(w),m._unbind(x),m._unbind(y),m.options.onBeforeScrollEnd&&m.options.onBeforeScrollEnd.call(m,c),m.zoomed)return l=m.scale*m.lastScale,l=Math.max(m.options.zoomMin,l),l=Math.min(m.options.zoomMax,l),m.lastScale=l/m.scale,m.scale=l,m.x=m.originX-m.originX*m.lastScale+m.x,m.y=m.originY-m.originY*m.lastScale+m.y,m.scroller.style[i]="200ms",m.scroller.style[g]="translate("+m.x+"px,"+m.y+"px) scale("+m.scale+")"+D,m.zoomed=!1,m.refresh(),void(m.options.onZoomEnd&&m.options.onZoomEnd.call(m,c));if(!m.moved)return r&&(m.doubleTapTimer&&m.options.zoom?(clearTimeout(m.doubleTapTimer),m.doubleTapTimer=null,m.options.onZoomStart&&m.options.onZoomStart.call(m,c),m.zoom(m.pointX,m.pointY,1===m.scale?m.options.doubleTapZoom:1),m.options.onZoomEnd&&setTimeout(function(){m.options.onZoomEnd.call(m,c)},200)):this.options.handleClick&&(m.doubleTapTimer=setTimeout(function(){for(m.doubleTapTimer=null,d=n.target;1!==d.nodeType;)d=d.parentNode;"SELECT"!==d.tagName&&"INPUT"!==d.tagName&&"TEXTAREA"!==d.tagName&&(e=b.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,c.view,1,n.screenX,n.screenY,n.clientX,n.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),e._fake=!0,d.dispatchEvent(e))},m.options.zoom?250:0))),m._resetPos(200),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,c));if(q<300&&m.options.momentum&&(o=s?m._momentum(s-m.startX,q,-m.x,m.scrollerW-m.wrapperW+m.x,m.options.bounce?m.wrapperW:0):o,p=t?m._momentum(t-m.startY,q,-m.y,m.maxScrollY<0?m.scrollerH-m.wrapperH+m.y-m.minScrollY:0,m.options.bounce?m.wrapperH:0):p,s=m.x+o.dist,t=m.y+p.dist,(m.x>0&&s>0||m.x<m.maxScrollX&&s<m.maxScrollX)&&(o={dist:0,time:0}),(m.y>m.minScrollY&&t>m.minScrollY||m.y<m.maxScrollY&&t<m.maxScrollY)&&(p={dist:0,time:0})),o.dist||p.dist)return j=a.max(a.max(o.time,p.time),10),m.options.snap&&(f=s-m.absStartX,h=t-m.absStartY,a.abs(f)<m.options.snapThreshold&&a.abs(h)<m.options.snapThreshold?m.scrollTo(m.absStartX,m.absStartY,200):(k=m._snap(s,t),s=k.x,t=k.y,j=a.max(k.time,j))),m.scrollTo(a.round(s),a.round(t),j),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,c));if(m.options.snap)return f=s-m.absStartX,h=t-m.absStartY,a.abs(f)<m.options.snapThreshold&&a.abs(h)<m.options.snapThreshold?m.scrollTo(m.absStartX,m.absStartY,200):(k=m._snap(m.x,m.y),k.x===m.x&&k.y===m.y||m.scrollTo(k.x,k.y,k.time)),void(m.options.onTouchEnd&&m.options.onTouchEnd.call(m,c));m._resetPos(200),m.options.onTouchEnd&&m.options.onTouchEnd.call(m,c)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,e=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;return c===b.x&&e===b.y?(b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"===d&&(b.hScrollbarWrapper.style[l]="300ms"),b.hScrollbarWrapper.style.opacity="0"),void(b.vScrollbar&&b.options.hideScrollbar&&("webkit"===d&&(b.vScrollbarWrapper.style[l]="300ms"),b.vScrollbarWrapper.style.opacity="0"))):void b.scrollTo(c,e,a||0)},_wheel:function(a){var b,c,d,e,f,g=this;if(g.enabled&&"none"!==g.options.wheelAction){if(a.preventDefault?a.preventDefault():a.returnValue=!1,"wheelDeltaX"in a)b=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("deltaX"in a)b=a.deltaX/12,c=a.deltaY/12;else if("wheelDelta"in a)b=c=a.wheelDelta/12;else{if(!("detail"in a))return;b=c=3*-a.detail}if("zoom"===g.options.wheelAction)return f=g.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),f<g.options.zoomMin&&(f=g.options.zoomMin),f>g.options.zoomMax&&(f=g.options.zoomMax),void(f!==g.scale&&(!g.wheelZoomCount&&g.options.onZoomStart&&g.options.onZoomStart.call(g,a),g.wheelZoomCount++,g.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){g.wheelZoomCount--,!g.wheelZoomCount&&g.options.onZoomEnd&&g.options.onZoomEnd.call(g,a)},400)));d=g.x+b,e=g.y+c,d>0?d=0:d<g.maxScrollX&&(d=g.maxScrollX),e>g.minScrollY?e=g.minScrollY:e<g.maxScrollY&&(e=g.maxScrollY),g.maxScrollY<0&&g.scrollTo(d,e,0)}},_transitionEnd:function(a){var b=this;a.target===b.scroller&&(b._unbind(A),b._startAni())},_startAni:function(){var b,c,d,e=this,f=e.x,g=e.y,h=Date.now();if(!e.animating){if(!e.steps.length)return void e._resetPos(400);if(b=e.steps.shift(),b.x===f&&b.y===g&&(b.time=0),e.animating=!0,e.moved=!0,e.options.useTransition)return e._transitionTime(b.time),e._pos(b.x,b.y),e.animating=!1,void(b.time?e._bind(A):e._resetPos(0));d=function(){var i,j,k=Date.now();return k>=h+b.time?(e._pos(b.x,b.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),void e._startAni()):(k=(k-h)/b.time-1,c=a.sqrt(1-k*k),i=(b.x-f)*c+f,j=(b.y-g)*c+g,e._pos(i,j),void(e.animating&&(e.aniTime=B(d))))},d()}},_transitionTime:function(a){a+="ms",this.scroller.style[i]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[i]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[i]=a)},_momentum:function(b,c,d,e,f){var g=6e-4,h=a.abs(b)/c,i=h*h/(2*g),j=0,k=0;return b>0&&i>d?(k=f/(6/(i/h*g)),d+=k,h=h*d/i,i=d):b<0&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=b<0?-1:1,j=h/g,{dist:i,time:a.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!==this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(b,c){var d,e,f,g,h,i,j=this;for(f=j.pagesX.length-1,d=0,e=j.pagesX.length;d<e;d++)if(b>=j.pagesX[d]){f=d;break}for(f===j.currPageX&&f>0&&j.dirX<0&&f--,b=j.pagesX[f],h=a.abs(b-j.pagesX[j.currPageX]),h=h?a.abs(j.x-b)/h*500:0,j.currPageX=f,f=j.pagesY.length-1,d=0;d<f;d++)if(c>=j.pagesY[d]){f=d;break}return f===j.currPageY&&f>0&&j.dirY<0&&f--,c=j.pagesY[f],i=a.abs(c-j.pagesY[j.currPageY]),i=i?a.abs(j.y-c)/i*500:0,j.currPageY=f,g=a.round(a.max(h,i))||200,{x:b,y:c,time:g}},_bind:function(a,b,c,d){var e=this;(b||this.scroller).addEventListener?(b||this.scroller).addEventListener(a,d||this,!!c):(this.events[a]=function(a){e.handleEvent.call(e,a)},(b||this.scroller).attachEvent("on"+a,this.events[a]))},_unbind:function(a,b,c,d){(b||this.scroller).removeEventListener?(b||this.scroller).removeEventListener(a,d||this,!!c):this.events&&this.events[a]&&(b||this.scroller).detachEvent("on"+a,this.events[a])},_hasClass:function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},_addClass:function(a,b){var c=this;c._hasClass(a,b)||(a.className+=" "+b)},_removeClass:function(a,b){var c=this;c._hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/\s+/g," ").replace(/^\s|\s$/,""))},_toggleClass:function(a,b,c){var d=this;void 0===c&&(c=!d._hasClass(a,b)),Boolean(c)?d._addClass(a,b):d._removeClass(a,b)},_hasCSSText:function(a,b){return new RegExp("(;|^)"+b+"(;|$)").test(a.style.cssText)},_addCSSText:function(a,b){var c=this;c._hasCSSText(a,b)||(a.style.cssText=c._cleanCSSText(a.style.cssText+";"+b))},_removeCSSText:function(a,b){var c=this;c._hasClass(a,b)&&(a.style.cssText=c._cleanCSSText(a.style.cssText.replace(new RegExp("(;|^)"+b+"(;|$)"),";")))},_toggleCSSText:function(a,b,c){var d=this;void 0===c&&(c=!d._hasCSSText(a,b)),Boolean(c)?d._addCSSText(a,b):d._removeCSSText(a,b)},_cleanCSSText:function(a){return a.replace(/\s+/g," ").replace(/\s;|;\s/g,";").replace(/;;/g,";").replace(/^\s|\s$/,"").replace(/^;/,"")},_set_MS_Touch:function(a){var b=this,c=window.PointerEvent?"touch-action":"-ms-touch-action";b.wrapper.style[c]=a;var d=b.wrapper.childNodes;for(var e in d)d[e].style&&(d[e].style[c]=a)},destroy:function(){var a=this;a.disable(),a.hScrollbar=!1,a.vScrollbar=!1,a._scrollbar("h"),a._scrollbar("v"),a.scroller.style[g]="",a._removeClass(a.scroller,"noHScrollBar"),a._removeClass(a.scroller,"noVScrollBar"),a._removeClass(a.scroller,"noScrollBars"),a._unbind(u,window),a._unbind(v),r&&!q||a._unbind(z),a.options.useTransition&&a._unbind(A),a.options.checkDOMChanges&&clearInterval(a.checkDOMTime),a.options.onDestroy&&a.options.onDestroy.call(a)},refresh:function(){var c,d,e,f,g=this,h=0,j=0;if(g.options){g.scale<g.options.zoomMin&&(g.scale=g.options.zoomMin),g.wrapperW=g.wrapper.clientWidth||1,g.wrapperH=g.wrapper.clientHeight||1,g.minScrollY=-g.options.topOffset||0,g.scrollerW=a.round(g.scroller.offsetWidth*g.scale),g.scrollerH=a.round((g.scroller.offsetHeight+g.minScrollY)*g.scale),g.maxScrollX=g.wrapperW-g.scrollerW,g.maxScrollY=g.wrapperH-g.scrollerH+g.minScrollY,g.dirX=0,g.dirY=0,g.hScroll=g.options.hScroll&&g.maxScrollX<0,g.vScroll=g.options.vScroll&&(!g.options.bounceLock&&!g.hScroll||g.scrollerH>g.wrapperH),g.hScrollbar=g.hScroll&&g.options.hScrollbar&&(g.options.scrollBarsOnTouchDevice||!r),g.vScrollbar=g.vScroll&&g.options.vScrollbar&&g.scrollerH>g.wrapperH&&(g.options.scrollBarsOnTouchDevice||!r),c=g._offset(g.wrapper),g.wrapperOffsetLeft=-c.left,g.wrapperOffsetTop=-c.top;var k="iscroll_ie7_querySelector_class";if(g.scroller.querySelector||(g.scroller.querySelector=function(a){var c=b.documentElement.firstChild,d=b.createElement("STYLE");c.appendChild(d),b.__qsResult=[],g._addClass(g.scroller,k),d.styleSheet.cssText="."+k+" "+a+"{x:expression(document.__qsResult.push(this))}",window.scrollBy(0,0);var e=b.__qsResult[0]||null;return c.removeChild(d),g._removeClass(g.scroller,k),e}),g.scroller.querySelectorAll||(g.scroller.querySelectorAll=function(a){var c=b.documentElement.firstChild,d=b.createElement("STYLE"),e=[];c.appendChild(d),b.__qsaels=[],g._addClass(g.scroller,k),d.styleSheet.cssText="."+k+" "+a+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0);for(var f in b.__qsaels)e.push(b.__qsaels[f]);return c.removeChild(d),g._removeClass(g.scroller,k),e}),"string"==typeof g.options.snap)for(g.pagesX=[],g.pagesY=[],f=g.scroller.querySelectorAll(g.options.snap),d=0,e=f.length;d<e;d++)h=g._offset(f[d]),h.left+=g.wrapperOffsetLeft,h.top+=g.wrapperOffsetTop,g.pagesX[d]=h.left<g.maxScrollX?g.maxScrollX:h.left*g.scale,g.pagesY[d]=h.top<g.maxScrollY?g.maxScrollY:h.top*g.scale;else if(g.options.snap){for(g.pagesX=[];h>=g.maxScrollX;)g.pagesX[j]=h,h-=g.wrapperW,j++;for(g.maxScrollX%g.wrapperW&&(g.pagesX[g.pagesX.length]=g.maxScrollX-g.pagesX[g.pagesX.length-1]+g.pagesX[g.pagesX.length-1]),h=0,j=0,g.pagesY=[];h>=g.maxScrollY;)g.pagesY[j]=h,h-=g.wrapperH,j++;g.maxScrollY%g.wrapperH&&(g.pagesY[g.pagesY.length]=g.maxScrollY-g.pagesY[g.pagesY.length-1]+g.pagesY[g.pagesY.length-1])}g._scrollbar("h"),g._scrollbar("v"),g.zoomed||(g.scroller.style[i]="0",g._resetPos(200)),g._toggleClass(g.scroller,"noHScrollBar",g.maxScrollX>=0),g._toggleClass(g.scroller,"noVScrollBar",g.maxScrollY>=0),g._toggleClass(g.scroller,"noScrollBars",g.maxScrollX>=0&&g.maxScrollY>=0),q&&g._set_MS_Touch(g.enabled?"none":"auto"),g.options.onRefresh&&g.options.onRefresh.call(g)}},scrollTo:function(a,b,c,d){var e,f,g=this,h=a;for(g.stop(),h.length||(h=[{x:a,y:b,time:c,relative:d}]),e=0,f=h.length;e<f;e++)h[e].relative&&(h[e].x=g.x-h[e].x,h[e].y=g.y-h[e].y),g.steps.push({x:h[e].x,y:h[e].y,time:h[e].time||0});g._startAni()},scrollToElement:function(b,c){var d,e,f=this;b=b.nodeType?b:f.scroller.querySelector(b),b&&(d=f._offset(b),d.left+=f.wrapperOffsetLeft,d.top+=f.wrapperOffsetTop,e=f._offset(f.scroller),d.left-=f.wrapperOffsetLeft+e.left,d.top-=f.wrapperOffsetTop+e.top,d.left=d.left>0?0:d.left<f.maxScrollX?f.maxScrollX:d.left,d.top=d.top>f.minScrollY?f.minScrollY:d.top<f.maxScrollY?f.maxScrollY:d.top,c=void 0===c?a.max(2*a.abs(d.left),2*a.abs(d.top)):c,f.scrollTo(d.left,d.top,c))},scrollToPage:function(a,b,c){var d,e,f=this;c=void 0===c?400:c,f.options.onScrollStart&&f.options.onScrollStart.call(f),f.options.snap?(a="next"===a?f.currPageX+1:"prev"===a?f.currPageX-1:a,b="next"===b?f.currPageY+1:"prev"===b?f.currPageY-1:b,a=a<0?0:a>f.pagesX.length-1?f.pagesX.length-1:a,b=b<0?0:b>f.pagesY.length-1?f.pagesY.length-1:b,f.currPageX=a,f.currPageY=b,d=f.pagesX[a],e=f.pagesY[b]):(d=-f.wrapperW*a,e=-f.wrapperH*b,d<f.maxScrollX&&(d=f.maxScrollX),e<f.maxScrollY&&(e=f.maxScrollY)),f.scrollTo(d,e,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,q&&this._set_MS_Touch("auto"),this._unbind(w),this._unbind(x),this._unbind(y),this.draggingScrollbar&&(this._unbind(w,document),this._unbind(x,document),this.scrollingDirection=null,this.draggingScrollbar=!1)},enable:function(){this.enabled=!0,q&&this._set_MS_Touch("none")},stop:function(){this.options.useTransition?this._unbind(A):C(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[i]=d+"ms",e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+D,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},c=null,E}),function(a){!function(b,c){"object"==typeof exports&&"undefined"!=typeof module?module.exports=c():"function"==typeof a&&a.amd?a(c):(b="undefined"!=typeof globalThis?globalThis:b||self,b.videojs=c())}(this,function(){"use strict";function a(a,b){return b={exports:{}},a(b,b.exports),b.exports}function b(a){var c,d="info",e=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];c("log",d,b)};return c=Lc(a,e),e.createLogger=function(c){return b(a+": "+c)},e.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},e.level=function(a){if("string"==typeof a){if(!e.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');d=a}return d},e.history=function(){return Kc?[].concat(Kc):[]},e.history.filter=function(a){return(Kc||[]).filter(function(b){return new RegExp(".*"+a+".*").test(b[0])})},e.history.clear=function(){Kc&&(Kc.length=0)},e.history.disable=function(){null!==Kc&&(Kc.length=0,Kc=null)},e.history.enable=function(){null===Kc&&(Kc=[])},e.error=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("error",d,b)},e.warn=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("warn",d,b)},e.debug=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("debug",d,b)},e}function c(a,b){Qc(a).forEach(function(c){return b(a[c],c)})}function d(a,b,c){return void 0===c&&(c=0),Qc(a).reduce(function(c,d){return b(c,a[d],d)},c)}function e(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];return Object.assign?Oc.apply(void 0,[a].concat(d)):(d.forEach(function(b){b&&c(b,function(b,c){a[c]=b})}),a)}function f(a){return!!a&&"object"==typeof a}function g(a){return f(a)&&"[object Object]"===Pc.call(a)&&a.constructor===Object}function h(a,b){if(!a||!b)return"";if("function"==typeof uc.getComputedStyle){var c;try{c=uc.getComputedStyle(a)}catch(d){return""}return c?c.getPropertyValue(b)||c[b]:""}return""}function i(a){return"string"==typeof a&&Boolean(a.trim())}function j(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function k(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function l(){return Dc===uc.document}function m(a){return f(a)&&1===a.nodeType}function n(){try{return uc.parent!==uc.self}catch(a){return!0}}function o(a){return function(b,c){if(!i(b))return Dc[a](null);i(c)&&(c=Dc.querySelector(c));var d=m(c)?c:Dc;return d[a]&&d[a](b)}}function p(a,b,c,d){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={});var e=Dc.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];a.indexOf("aria-")!==-1||"role"===a||"type"===a?(Mc.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+a+" to "+c+".")),e.setAttribute(a,c)):"textContent"===a?q(e,c):e[a]===c&&"tabIndex"!==a||(e[a]=c)}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&J(e,d),e}function q(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function r(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function s(a,b){return j(b),a.classList?a.classList.contains(b):k(b).test(a.className)}function t(a,b){return a.classList?a.classList.add(b):s(a,b)||(a.className=(a.className+" "+b).trim()),a}function u(a,b){return a?(a.classList?a.classList.remove(b):(j(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a):(Mc.warn("removeClass was called with an element that doesn't exist"),null)}function v(a,b,c){var d=s(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?t(a,b):u(a,b),a}function w(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||d===!1?a.removeAttribute(c):a.setAttribute(c,d===!0?"":d)})}function x(a){var b={},c=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var d=a.attributes,e=d.length-1;e>=0;e--){var f=d[e].name,g=d[e].value;"boolean"!=typeof a[f]&&c.indexOf(","+f+",")===-1||(g=null!==g),b[f]=g}return b}function y(a,b){return a.getAttribute(b)}function z(a,b,c){a.setAttribute(b,c)}function A(a,b){a.removeAttribute(b)}function B(){Dc.body.focus(),Dc.onselectstart=function(){return!1}}function C(){Dc.onselectstart=function(){return!0}}function D(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(h(a,"height"))),c.width||(c.width=parseFloat(h(a,"width"))),c}}function E(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var b=a.offsetWidth,c=a.offsetHeight,d=0,e=0;a.offsetParent&&a!==Dc[Ec.fullscreenElement];)d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:d,top:e,width:b,height:c}}function F(a,b){var c={x:0,y:0};if(hd)for(var d=a;d&&"html"!==d.nodeName.toLowerCase();){var e=h(d,"transform");if(/^matrix/.test(e)){var f=e.slice(7,-1).split(/,\s/).map(Number);c.x+=f[4],c.y+=f[5]}else if(/^matrix3d/.test(e)){var g=e.slice(9,-1).split(/,\s/).map(Number);c.x+=g[12],c.y+=g[13]}d=d.parentNode}var i={},j=E(b.target),k=E(a),l=k.width,m=k.height,n=b.offsetY-(k.top-j.top),o=b.offsetX-(k.left-j.left);return b.changedTouches&&(o=b.changedTouches[0].pageX-k.left,n=b.changedTouches[0].pageY+k.top,hd&&(o-=c.x,n-=c.y)),i.y=1-Math.max(0,Math.min(1,n/m)),i.x=Math.max(0,Math.min(1,o/l)),i}function G(a){return f(a)&&3===a.nodeType}function H(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function I(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),m(a)||G(a)?a:"string"==typeof a&&/\S/.test(a)?Dc.createTextNode(a):void 0}).filter(function(a){return a})}function J(a,b){return I(b).forEach(function(b){return a.appendChild(b)}),a}function K(a,b){return J(H(a),b)}function L(a){return void 0===a.button&&void 0===a.buttons||(0===a.button&&void 0===a.buttons||("mouseup"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons))}function M(a,b){l()&&(b&&(Jc=b),uc.setTimeout(od,a))}function N(){nd=!0,uc.removeEventListener("load",N)}function O(){return td++}function P(a,b){if(vd.has(a)){var c=vd.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&vd["delete"](a)}}function Q(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function R(a){function b(){return!0}function c(){return!1}if(a.fixed_)return a;if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var d=a||uc.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||Dc),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){var f=Dc.documentElement,g=Dc.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}function S(a,b,c){if(Array.isArray(b))return Q(S,a,b,c);vd.has(a)||vd.set(a,{});var d=vd.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=O()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=R(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(i){Mc.error(i)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;wd()&&xd.indexOf(b)>-1&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function T(a,b,c){if(vd.has(a)){var d=vd.get(a);if(d.handlers){if(Array.isArray(b))return Q(T,a,b,c);var e=function(a,b){d.handlers[b]=[],P(a,b)};if(void 0!==b){var f=d.handlers[b];if(f){if(!c)return void e(a,b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);P(a,b)}}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function U(a,b,c){var d=vd.has(a)?vd.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=R(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&b.bubbles===!0)U.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){vd.has(b.target)||vd.set(b.target,{});var f=vd.get(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function V(a,b,c){if(Array.isArray(b))return Q(V,a,b,c);var d=function e(){T(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||O(),S(a,b,d)}function W(a,b,c){var d=function e(){T(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||O(),S(a,b,d)}function X(a,b){void 0===b&&(b={});var c=b,d=c.eventBusKey;if(d){if(!a[d].nodeName)throw new Error('The eventBusKey "'+d+'" does not refer to an element.');a.eventBusEl_=a[d]}else a.eventBusEl_=p("span",{className:"vjs-event-bus"});return e(a,Od),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(a){a&&vd.has(a)&&vd["delete"](a)}),uc.setTimeout(function(){a.eventBusEl_=null},0)}),a}function Y(a,b){return e(a,Pd),a.state=e({},a.state,b),"function"==typeof a.handleStateChanged&&Gd(a)&&a.on("statechanged",a.handleStateChanged),a}function Z(){for(var a={},b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];return d.forEach(function(b){b&&c(b,function(b,c){return g(b)?(g(a[c])||(a[c]={}),void(a[c]=Z(a[c],b))):void(a[c]=b)})}),a}function $(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function aa(a,b,c){if("number"!=typeof b||b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}function ba(a,b,c,d){return aa(a,d,c.length-1),c[d][b]}function ca(a){var b;return b=void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:ba.bind(null,"start",0,a),end:ba.bind(null,"end",1,a)},uc.Symbol&&uc.Symbol.iterator&&(b[uc.Symbol.iterator]=function(){return(a||[]).values()}),b}function da(a,b){return Array.isArray(a)?ca(a):void 0===a||void 0===b?ca():ca([[a,b]])}function ea(a,b){var c,d,e=0;if(!b)return 0;a&&a.length||(a=da(0,0));for(var f=0;f<a.length;f++)c=a.start(f),d=a.end(f),d>b&&(d=b),e+=d-c;return e/b}function fa(a){return a instanceof fa?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:f(a)&&("number"==typeof a.code&&(this.code=a.code),e(this,a)),void(this.message||(this.message=fa.defaultMessages[this.code]||"")))}function ga(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(e){d=e}return[d,c]}function ha(a){return void 0!==a&&null!==a&&"function"==typeof a.then}function ia(a){ha(a)&&a.then(null,function(a){})}function ja(a){if(!a)return!1;var b=Be.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}function ka(a){return void 0===a&&(a=""),a.toLowerCase().split(";").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return"charset"===d.trim()?e.trim():a},"utf-8")}function la(a,b){for(var c=0;c<a.length;c++)b(a[c])}function ma(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function na(a,b,c){var d=a;return Ae(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=Oc({},b,{uri:a}),d.callback=c,d}function oa(a,b,c){return b=na(a,b,c),pa(b)}function pa(a){function b(){4===h.readyState&&setTimeout(e,0)}function c(){var a=void 0;if(a=h.response?h.response:h.responseText||qa(h),q)try{a=JSON.parse(a)}catch(b){}return a}function d(a){return clearTimeout(k),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),
a.statusCode=0,g(a,r)}function e(){if(!j){var b;clearTimeout(k),b=a.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var d=r,e=null;return 0!==b?(d={body:c(),statusCode:b,method:m,headers:{},url:l,rawRequest:h},h.getAllResponseHeaders&&(d.headers=Ee(h.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),g(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var f=!1,g=function(b,c,d){f||(f=!0,a.callback(b,c,d))},h=a.xhr||null;h||(h=a.cors||a.useXDR?new oa.XDomainRequest:new oa.XMLHttpRequest);var i,j,k,l=h.url=a.uri||a.url,m=h.method=a.method||"GET",n=a.body||a.data,o=h.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:h};if("json"in a&&a.json!==!1&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(a.json===!0?n:a.json))),h.onreadystatechange=b,h.onload=e,h.onerror=d,h.onprogress=function(){},h.onabort=function(){j=!0},h.ontimeout=d,h.open(m,l,!p,a.username,a.password),p||(h.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!j){j=!0,h.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),h.setRequestHeader)for(i in o)o.hasOwnProperty(i)&&h.setRequestHeader(i,o[i]);else if(a.headers&&!ma(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(h.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(h),h.send(n||null),h}function qa(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(c){}return null}function ra(){}function sa(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function ta(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function ua(){this.values=Ue(null)}function va(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function wa(a,b,c){function d(){var b=ta(a);if(null===b)throw new sa(sa.Errors.BadTimeStamp,"Malformed timestamp: "+g);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function e(a,b){var d=new ua;va(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)?d.set("snapToLines",!1):null,d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","center","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");try{b.line=d.get("line","auto")}catch(e){}b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100);try{b.align=d.get("align","center")}catch(e){b.align=d.get("align","middle")}try{b.position=d.get("position","auto")}catch(e){b.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}function f(){a=a.replace(/^\s+/,"")}var g=a;if(f(),b.startTime=d(),f(),"-->"!==a.substr(0,3))throw new sa(sa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+g);a=a.substr(3),f(),b.endTime=d(),f(),e(a,b)}function xa(a,b){function c(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]*>?)?/);return a(c[1]?c[1]:c[2])}function d(a){return Ve.innerHTML=a,a=Ve.textContent,Ve.textContent="",a}function e(a,b){return!Ze[b.localName]||Ze[b.localName]===a.localName}function f(b,c){var d=We[b];if(!d)return null;var e=a.document.createElement(d),f=Ye[b];return f&&c&&(e[f]=c.trim()),e}for(var g,h=a.document.createElement("div"),i=h,j=[];null!==(g=c());)if("<"!==g[0])i.appendChild(a.document.createTextNode(d(g)));else{if("/"===g[1]){j.length&&j[j.length-1]===g.substr(2).replace(">","")&&(j.pop(),i=i.parentNode);continue}var k,l=ta(g.substr(1,g.length-2));if(l){k=a.document.createProcessingInstruction("timestamp",l),i.appendChild(k);continue}var m=g.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m)continue;if(k=f(m[1],m[3]),!k)continue;if(!e(i,k))continue;if(m[2]){var n=m[2].split(".");n.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(Xe.hasOwnProperty(c)){var d=b?"background-color":"color",e=Xe[c];k.style[d]=e}}),k.className=n.join(" ")}j.push(m[1]),i.appendChild(k),i=k}return h}function ya(a){for(var b=0;b<$e.length;b++){var c=$e[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function za(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++)if(d=f.charCodeAt(g),ya(d))return"rtl";return"ltr"}function Aa(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return++d*-1}function Ba(){}function Ca(a,b,c){Ba.call(this),this.cue=b,this.cueDiv=xa(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:za(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Da(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function Ea(a,b,c,d){function e(a,b){for(var e,f=new Da(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new Da(a),g=i),a=new Da(f)}return e||f}var f=new Da(b),g=b.cue,h=Aa(g),i=[];if(g.snapToLines){var j;switch(g.vertical){case"":i=["+y","-y"],j="height";break;case"rl":i=["+x","-x"],j="width";break;case"lr":i=["-x","+x"],j="width"}var k=f.lineHeight,l=k*Math.round(h),m=c[j]+k,n=i[0];Math.abs(l)>m&&(l=l<0?-1:1,l*=Math.ceil(m/k)*k),h<0&&(l+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(n,l)}else{var o=f.lineHeight/c.height*100;switch(g.lineAlign){case"center":h-=o/2;break;case"end":h-=o}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new Da(b)}var p=e(f,i);b.move(p.toCSSCompatValues(c))}function Fa(){}function Ga(a){if("string"!=typeof a)return!1;var b=ef[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ha(a){if("string"!=typeof a)return!1;var b=ff[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ia(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,h=c,i=null,j="",k=!0,l="auto",m="start",n="auto",o="auto",p=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");f=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");g=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return i},set:function(a){i=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return j},set:function(a){var b=Ga(a);if(b===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");j=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return k},set:function(a){k=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(a){if("number"!=typeof a&&a!==df)throw new SyntaxError("Line: an invalid number or illegal string was specified.");l=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(a){var b=Ha(a);b?(m=b,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return n},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");n=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=Ha(a);b?(o=b,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");p=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(a){var b=Ha(a);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=b,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ja(a){if("string"!=typeof a)return!1;var b=hf[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ka(a){return"number"==typeof a&&a>=0&&a<=100}function La(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!Ka(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!Ka(a))throw new Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!Ka(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!Ka(a))throw new Error("ViewportAnchorY must be between 0 and 100.");f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!Ka(a))throw new Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){var b=Ja(a);b===!1?console.warn("Scroll: an invalid or illegal string was specified."):g=b}}})}function Ma(a,b,c,d,e){void 0===e&&(e={});var f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new Te.text.TrackClass(e);return f.addTrack(g),g}function Na(a,b){mf[a]=mf[a]||[],mf[a].push(b)}function Oa(a,b,c){a.setTimeout(function(){return Xa(b,mf[b.type],c,a)},1)}function Pa(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function Qa(a,b,c){return a.reduceRight(Ta(c),b[c]())}function Ra(a,b,c,d){return b[c](a.reduce(Ta(c),d))}function Sa(a,b,c,d){void 0===d&&(d=null);var e="call"+Rd(c),f=a.reduce(Ta(e),d),g=f===of,h=g?null:b[c](f);return Ua(a,c,h,g),h}function Ta(a){return function(b,c){return b===of?of:c[a]?c[a](b):b}}function Ua(a,b,c,d){for(var e=a.length-1;e>=0;e--){var f=a[e];f[b]&&f[b](d,c)}}function Va(a){nf[a.id()]=null}function Wa(a,b){var c=nf[a.id()],d=null;if(void 0===c||null===c)return d=b(a),nf[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1];g===b&&(d=h)}return null===d&&(d=b(a),c.push([b,d])),d}function Xa(a,b,c,d,f,g){void 0===a&&(a={}),void 0===b&&(b=[]),void 0===f&&(f=[]),void 0===g&&(g=!1);var h=b,i=h[0],j=h.slice(1);if("string"==typeof i)Xa(a,mf[i],c,d,f,g);else if(i){var k=Wa(d,i);if(!k.setSource)return f.push(k),Xa(a,j,c,d,f,g);k.setSource(e({},a),function(b,e){return b?Xa(a,j,c,d,f,g):(f.push(k),void Xa(e,a.type===e.type?j:mf[e.type],c,d,f,g))})}else j.length?Xa(a,j,c,d,f,g):g?c(a,f):Xa(a,mf["*"],c,d,f,!0)}function Ya(a){if(!a.type){var b=tf(a.src);b&&(a.type=b)}return a}function Za(a,b){var c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");c=a.slice(1)}return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function $a(a,b,c){try{a.style[b]=c}catch(d){return}}function _a(a){Jf=a}function ab(){Jf=If}function bb(a,b){return void 0===b&&(b=a),Jf(a,b)}function cb(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function db(a,b){var c=a.options[a.options.selectedIndex].value;return cb(c,b)}function eb(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(cb(a.options[d].value,c)===b){a.selectedIndex=d;break}}function fb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function gb(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&qh(a,b)}function hb(a,b,c){var d=hb.getPlayer(a);if(d)return b&&Mc.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"==typeof a?kd("#"+Fh(a)):a;if(!m(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||Mc.warn("The element supplied is not included in the DOM"),b=b||{},wc("beforesetup").forEach(function(a){var c=a(e,Z(b));return!f(c)||Array.isArray(c)?void Mc.error("please return an object in beforesetup hooks"):void(b=Z(b,c))});var g=Xd.getComponent("Player");return d=new g(e,b,c),wc("setup").forEach(function(a){return a(d)}),d}function ib(a){for(var b=Mh(a),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c}function jb(a,b){return void 0===b&&(b=Object),b&&"function"==typeof b.freeze?b.freeze(a):a}function kb(a,b){this.message=a,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,kb)}function lb(){}function mb(a,b,c,d,e){function f(a){if(a>65535){a-=65536;var b=55296+(a>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}function g(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?f(parseInt(b.substr(1).replace("x","0x"))):(e.error("entity not found:"+a),a)}function h(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,g);m&&i(p),d.characters(c,0,b-p),p=b}}function i(b,c){for(;b>=k&&(c=l.exec(a));)j=c.index,k=j+c[0].length,m.lineNumber++;m.columnNumber=b-j+1}for(var j=0,k=0,l=/.*(?:\r\n?|\n)|.*$/g,m=d.locator,n=[{currentNSMap:b}],o={},p=0;;){try{var q=a.indexOf("<",p);if(q<0){if(!a.substr(p).match(/^\s*$/)){var r=d.doc,s=r.createTextNode(a.substr(p));r.appendChild(s),d.currentElement=s}return}switch(q>p&&h(q),a.charAt(q+1)){case"/":var t=a.indexOf(">",q+3),u=a.substring(q+2,t).replace(/[ \t\n\r]+$/g,""),v=n.pop();t<0?(u=a.substring(q+2).replace(/[\s<].*/,""),e.error("end tag name: "+u+" is not complete:"+v.tagName),t=q+1+u.length):u.match(/\s</)&&(u=u.replace(/[\s<].*/,""),e.error("end tag name: "+u+" maybe not complete"),t=q+1+u.length);var w=v.localNSMap,x=v.tagName==u,y=x||v.tagName&&v.tagName.toLowerCase()==u.toLowerCase();if(y){if(d.endElement(v.uri,v.localName,u),w)for(var z in w)d.endPrefixMapping(z);x||e.fatalError("end tag name: "+u+" is not match the current start tagName:"+v.tagName)}else n.push(v);t++;break;case"?":m&&i(q),t=ub(a,q,d);break;case"!":m&&i(q),t=tb(a,q,d,e);break;default:m&&i(q);var A=new vb,B=n[n.length-1].currentNSMap,t=ob(a,q,A,B,g,e),C=A.length;if(!A.closed&&rb(a,t,A.tagName,o)&&(A.closed=!0,c.nbsp||e.warning("unclosed xml attribute")),m&&C){for(var D=nb(m,{}),E=0;E<C;E++){var F=A[E];i(F.offset),F.locator=nb(m,{})}d.locator=D,pb(A,d,B)&&n.push(A),d.locator=m}else pb(A,d,B)&&n.push(A);si.isHTML(A.uri)&&!A.closed?t=qb(a,t,A.tagName,g,d):t++}}catch(G){if(G instanceof kb)throw G;e.error("element parse error: "+G),t=-1}t>p?p=t:h(Math.max(q,p)+1)}}function nb(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function ob(a,b,c,d,e,f){function g(a,b,d){a in c.attributeNames&&f.fatalError("Attribute "+a+" redefined"),c.addValue(a,b,d)}for(var h,i,j=++b,k=wi;;){var l=a.charAt(j);switch(l){case"=":if(k===xi)h=a.slice(b,j),k=zi;else{if(k!==yi)throw new Error("attribute equal must after attrName");k=zi}break;case"'":case'"':if(k===zi||k===xi){if(k===xi&&(f.warning('attribute value must after "="'),h=a.slice(b,j)),b=j+1,j=a.indexOf(l,b),!(j>0))throw new Error("attribute value no end '"+l+"' match");i=a.slice(b,j).replace(/&#?\w+;/g,e),g(h,i,b-1),k=Bi}else{if(k!=Ai)throw new Error('attribute value must after "="');i=a.slice(b,j).replace(/&#?\w+;/g,e),g(h,i,b),f.warning('attribute "'+h+'" missed start quot('+l+")!!"),b=j+1,k=Bi}break;case"/":switch(k){case wi:c.setTagName(a.slice(b,j));case Bi:case Ci:case Di:k=Di,c.closed=!0;case Ai:case xi:case yi:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),k==wi&&c.setTagName(a.slice(b,j)),j;case">":switch(k){case wi:c.setTagName(a.slice(b,j));case Bi:case Ci:case Di:break;case Ai:case xi:i=a.slice(b,j),"/"===i.slice(-1)&&(c.closed=!0,i=i.slice(0,-1));case yi:k===yi&&(i=h),k==Ai?(f.warning('attribute "'+i+'" missed quot(")!'),g(h,i.replace(/&#?\w+;/g,e),b)):(si.isHTML(d[""])&&i.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),g(i,i,b));break;case zi:throw new Error("attribute value missed!!")}return j;case"Â€":l=" ";default:if(l<=" ")switch(k){case wi:c.setTagName(a.slice(b,j)),k=Ci;break;case xi:h=a.slice(b,j),k=yi;break;case Ai:var i=a.slice(b,j).replace(/&#?\w+;/g,e);f.warning('attribute "'+i+'" missed quot(")!!'),g(h,i,b);case Bi:k=Ci}else switch(k){case yi:c.tagName,si.isHTML(d[""])&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),g(h,h,b),b=j,k=xi;break;case Bi:f.warning('attribute space is required"'+h+'"!!');case Ci:k=xi,b=j;break;case zi:k=Ai,b=j;break;case Di:throw new Error("elements closed character '/' and '>' must be connected to")}}j++}}function pb(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,i=g.value,j=h.indexOf(":");if(j>0)var k=g.prefix=h.slice(0,j),l=h.slice(j+1),m="xmlns"===k&&l;else l=h,k=null,m="xmlns"===h&&"";g.localName=l,m!==!1&&(null==e&&(e={},sb(c,c={})),c[m]=e[m]=i,g.uri=si.XMLNS,b.startPrefixMapping(m,i))}for(var f=a.length;f--;){g=a[f];var k=g.prefix;k&&("xml"===k&&(g.uri=si.XML),"xmlns"!==k&&(g.uri=c[k||""]))}var j=d.indexOf(":");j>0?(k=a.prefix=d.slice(0,j),l=a.localName=d.slice(j+1)):(k=null,l=a.localName=d);var n=a.uri=c[k||""];if(b.startElement(n,l,d,a),!a.closed)return a.currentNSMap=c,a.localNSMap=e,!0;if(b.endElement(n,l,d),e)for(k in e)b.endPrefixMapping(k)}function qb(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)?(e.characters(g,0,g.length),f):(g=g.replace(/&#?\w+;/g,d),e.characters(g,0,g.length),f)}return b+1}function rb(a,b,c,d){var e=d[c];return null==e&&(e=a.lastIndexOf("</"+c+">"),e<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}function sb(a,b){for(var c in a)b[c]=a[c]}function tb(a,b,c,d){var e=a.charAt(b+2);switch(e){case"-":if("-"===a.charAt(b+3)){var f=a.indexOf("-->",b+4);return f>b?(c.comment(a,b+4,f-b-4),f+3):(d.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==a.substr(b+3,6)){var f=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,f-b-9),c.endCDATA(),f+3}var g=wb(a,b),h=g.length;if(h>1&&/!doctype/i.test(g[0][0])){var i=g[1][0],j=!1,k=!1;h>3&&(/^public$/i.test(g[2][0])?(j=g[3][0],k=h>4&&g[4][0]):/^system$/i.test(g[2][0])&&(k=g[3][0]));var l=g[h-1];return c.startDTD(i,j,k),c.endDTD(),l.index+l[0].length}}return-1}function ub(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,c.processingInstruction(e[1],e[2]),d+2):-1}return-1}function vb(){this.attributeNames={}}function wb(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}function xb(a){return""!==a}function yb(a){return a?a.split(/[\t\n\f\r ]+/).filter(xb):[]}function zb(a,b){return a.hasOwnProperty(b)||(a[b]=!0),a}function Ab(a){if(!a)return[];var b=yb(a);return Object.keys(b.reduce(zb,{}))}function Bb(a){return function(b){return a&&a.indexOf(b)!==-1}}function Cb(a,b){for(var c in a)b[c]=a[c]}function Db(a,b){var c=a.prototype;if(!(c instanceof b)){var d=function(){};d.prototype=b.prototype,d=new d,Cb(c,d),a.prototype=c=d}c.constructor!=a&&("function"!=typeof a&&console.error("unknow Class:"+a),c.constructor=a)}function Eb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,Wi[a]),this.message=Wi[a],Error.captureStackTrace&&Error.captureStackTrace(this,Eb);return c.code=a,b&&(this.message=this.message+": "+b),c}function Fb(){}function Gb(a,b){this._node=a,this._refresh=b,Hb(this)}function Hb(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);oc(a,"length",c.length),Cb(c,a),a._inc=b}}function Ib(){}function Jb(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Kb(a,b,c,d){if(d?b[Jb(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e=a.ownerDocument;e&&(d&&Sb(e,a,d),Rb(e,a,c))}}function Lb(a,b,c){var d=Jb(b,c);if(!(d>=0))throw Eb(Yi,new Error(a.tagName+"@"+c));for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Sb(f,a,c),c.ownerElement=null)}}function Mb(){}function Nb(){}function Ob(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function Pb(a,b){if(b(a))return!0;if(a=a.firstChild)do if(Pb(a,b))return!0;while(a=a.nextSibling)}function Qb(){}function Rb(a,b,c){a&&a._inc++;var d=c.namespaceURI;d===Hi.XMLNS&&(b._nsMap[c.prefix?c.localName:""]=c.value)}function Sb(a,b,c,d){a&&a._inc++;var e=c.namespaceURI;e===Hi.XMLNS&&delete b._nsMap[c.prefix?c.localName:""]}function Tb(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f}}}function Ub(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,Tb(a.ownerDocument,a),b}function Vb(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===Ti){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;do e.parentNode=a;while(e!==f&&(e=e.nextSibling));return Tb(a.ownerDocument||a,a),b.nodeType==Ti&&(b.firstChild=b.lastChild=null),b}function Wb(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b);var d=a.lastChild}var d=a.lastChild;return b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,Tb(a.ownerDocument,a,b),b}function Xb(){this._nsMap={}}function Yb(){}function Zb(){}function $b(){}function _b(){}function ac(){}function bc(){}function cc(){}function dc(){}function ec(){}function fc(){}function gc(){}function hc(){}function ic(a,b){var c=[],d=9==this.nodeType&&this.documentElement||this,e=d.prefix,f=d.namespaceURI;if(f&&null==e){var e=d.lookupPrefix(f);if(null==e)var g=[{namespace:f,prefix:null}]}return lc(this,c,a,b,g),c.join("")}function jc(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!e)return!1;if("xml"===d&&e===Hi.XML||e===Hi.XMLNS)return!1;for(var f=c.length;f--;){var g=c[f];if(g.prefix===d)return g.namespace!==e}return!0}function kc(a,b,c){a.push(" ",b,'="',c.replace(/[<&"]/g,Ob),'"')}function lc(a,b,c,d,e){if(e||(e=[]),d){if(a=d(a),!a)return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case Ji:var f=a.attributes,g=f.length,h=a.firstChild,i=a.tagName;c=Hi.isHTML(a.namespaceURI)||c;var j=i;if(!c&&!a.prefix&&a.namespaceURI){for(var k,l=0;l<f.length;l++)if("xmlns"===f.item(l).name){k=f.item(l).value;break}if(k!==a.namespaceURI)for(var m=e.length-1;m>=0;m--){var n=e[m];if(n.namespace===a.namespaceURI){n.prefix&&(j=n.prefix+":"+i);break}}}b.push("<",j);for(var o=0;o<g;o++){var p=f.item(o);"xmlns"==p.prefix?e.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&e.push({prefix:"",namespace:p.value})}for(var o=0;o<g;o++){var p=f.item(o);if(jc(p,c,e)){var q=p.prefix||"",r=p.namespaceURI;kc(b,q?"xmlns:"+q:"xmlns",r),e.push({prefix:q,namespace:r})}lc(p,b,c,d,e)}if(i===j&&jc(a,c,e)){var q=a.prefix||"",r=a.namespaceURI;kc(b,q?"xmlns:"+q:"xmlns",r),e.push({prefix:q,namespace:r})}if(h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(i)){if(b.push(">"),c&&/^script$/i.test(i))for(;h;)h.data?b.push(h.data):lc(h,b,c,d,e.slice()),h=h.nextSibling;else for(;h;)lc(h,b,c,d,e.slice()),h=h.nextSibling;b.push("</",j,">")}else b.push("/>");return;case Ri:case Ti:for(var h=a.firstChild;h;)lc(h,b,c,d,e.slice()),h=h.nextSibling;return;case Ki:return kc(b,a.name,a.value);case Li:return b.push(a.data.replace(/[<&]/g,Ob).replace(/]]>/g,"]]&gt;"));case Mi:return b.push("<![CDATA[",a.data,"]]>");case Qi:return b.push("<!--",a.data,"-->");case Si:var s=a.publicId,t=a.systemId;if(b.push("<!DOCTYPE ",a.name),s)b.push(" PUBLIC ",s),t&&"."!=t&&b.push(" ",t),b.push(">");else if(t&&"."!=t)b.push(" SYSTEM ",t,">");else{var u=a.internalSubset;u&&b.push(" [",u,"]"),b.push(">")}return;case Pi:return b.push("<?",a.target," ",a.data,"?>");case Ni:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function mc(a,b,c){var d;switch(b.nodeType){case Ji:d=b.cloneNode(!1),d.ownerDocument=a;case Ti:break;case Ki:c=!0}if(d||(d=b.cloneNode(!1)),d.ownerDocument=a,d.parentNode=null,c)for(var e=b.firstChild;e;)d.appendChild(mc(a,e,c)),e=e.nextSibling;return d}function nc(a,b,c){var d=new b.constructor;for(var e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}switch(b.childNodes&&(d.childNodes=new Fb),d.ownerDocument=a,d.nodeType){case Ji:var g=b.attributes,h=d.attributes=new Ib,i=g.length;h._ownerElement=d;for(var j=0;j<i;j++)d.setAttributeNode(nc(a,g.item(j),!0));break;case Ki:c=!0}if(c)for(var k=b.firstChild;k;)d.appendChild(nc(a,k,c)),k=k.nextSibling;return d}function oc(a,b,c){a[b]=c}function pc(){}var qc,rc="7.15.4",sc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};qc="undefined"!=typeof window?window:"undefined"!=typeof sc?sc:"undefined"!=typeof self?self:{};var tc,uc=qc,vc={},wc=function(a,b){return vc[a]=vc[a]||[],b&&(vc[a]=vc[a].concat(b)),vc[a]},xc=function(a,b){wc(a,b)},yc=function(a,b){var c=wc(a).indexOf(b);return!(c<=-1)&&(vc[a]=vc[a].slice(),vc[a].splice(c,1),!0)},zc=function(a,b){wc(a,[].concat(b).map(function(b){var c=function d(){return yc(a,d),b.apply(void 0,arguments)};return c}))},Ac={},Bc="undefined"!=typeof sc?sc:"undefined"!=typeof window?window:{};"undefined"!=typeof document?tc=document:(tc=Bc["__GLOBAL_DOCUMENT_CACHE@4"],tc||(tc=Bc["__GLOBAL_DOCUMENT_CACHE@4"]=Ac));for(var Cc,Dc=tc,Ec={prefixed:!0},Fc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Gc=Fc[0],Hc=0;Hc<Fc.length;Hc++)if(Fc[Hc][1]in Dc){Cc=Fc[Hc];break}if(Cc){for(var Ic=0;Ic<Cc.length;Ic++)Ec[Gc[Ic]]=Cc[Ic];Ec.prefixed=Cc[0]!==Gc[0]}var Jc,Kc=[],Lc=function(a,b){return function(c,d,e){var f=b.levels[d],g=new RegExp("^("+f+")$");if("log"!==c&&e.unshift(c.toUpperCase()+":"),e.unshift(a+":"),Kc){Kc.push([].concat(e));var h=Kc.length-1e3;Kc.splice(0,h>0?h:0)}if(uc.console){var i=uc.console[c];i||"debug"!==c||(i=uc.console.info||uc.console.log),i&&f&&g.test(c)&&i[Array.isArray(e)?"apply":"call"](uc.console,e)}}},Mc=b("VIDEOJS"),Nc=Mc.createLogger,Oc=a(function(a){function b(){return a.exports=b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.apply(this,arguments)}a.exports=b}),Pc=Object.prototype.toString,Qc=function(a){return f(a)?Object.keys(a):[]},Rc=uc.navigator&&uc.navigator.userAgent||"",Sc=/AppleWebKit\/([\d.]+)/i.exec(Rc),Tc=Sc?parseFloat(Sc.pop()):null,Uc=/iPod/i.test(Rc),Vc=function(){var a=Rc.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Wc=/Android/i.test(Rc),Xc=function(){var a=Rc.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Yc=Wc&&Xc<5&&Tc<537,Zc=/Firefox/i.test(Rc),$c=/Edg/i.test(Rc),_c=!$c&&(/Chrome/i.test(Rc)||/CriOS/i.test(Rc)),ad=function(){var a=Rc.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),bd=function(){var a=/MSIE\s(\d+)\.\d/.exec(Rc),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(Rc)&&/rv:11.0/.test(Rc)&&(b=11),b}(),cd=/Safari/i.test(Rc)&&!_c&&!Wc&&!$c,dd=/Windows/i.test(Rc),ed=Boolean(l()&&("ontouchstart"in uc||uc.navigator.maxTouchPoints||uc.DocumentTouch&&uc.document instanceof uc.DocumentTouch)),fd=/iPad/i.test(Rc)||cd&&ed&&!/iPhone/i.test(Rc),gd=/iPhone/i.test(Rc)&&!fd,hd=gd||fd||Uc,id=(cd||hd)&&!_c,jd=Object.freeze({__proto__:null,IS_IPOD:Uc,IOS_VERSION:Vc,IS_ANDROID:Wc,ANDROID_VERSION:Xc,IS_NATIVE_ANDROID:Yc,IS_FIREFOX:Zc,IS_EDGE:$c,IS_CHROME:_c,CHROME_VERSION:ad,IE_VERSION:bd,IS_SAFARI:cd,IS_WINDOWS:dd,TOUCH_ENABLED:ed,IS_IPAD:fd,IS_IPHONE:gd,IS_IOS:hd,IS_ANY_SAFARI:id}),kd=o("querySelector"),ld=o("querySelectorAll"),md=Object.freeze({
__proto__:null,isReal:l,isEl:m,isInFrame:n,createEl:p,textContent:q,prependTo:r,hasClass:s,addClass:t,removeClass:u,toggleClass:v,setAttributes:w,getAttributes:x,getAttribute:y,setAttribute:z,removeAttribute:A,blockTextSelection:B,unblockTextSelection:C,getBoundingClientRect:D,findPosition:E,getPointerPosition:F,isTextNode:G,emptyEl:H,normalizeContent:I,appendContent:J,insertContent:K,isSingleLeftClick:L,$:kd,$$:ld}),nd=!1,od=function(){if(Jc.options.autoSetup!==!1){var a=Array.prototype.slice.call(Dc.getElementsByTagName("video")),b=Array.prototype.slice.call(Dc.getElementsByTagName("audio")),c=Array.prototype.slice.call(Dc.getElementsByTagName("video-js")),d=a.concat(b,c);if(d&&d.length>0)for(var e=0,f=d.length;e<f;e++){var g=d[e];if(!g||!g.getAttribute){M(1);break}if(void 0===g.player){var h=g.getAttribute("data-setup");null!==h&&Jc(g)}}else nd||M(1)}};l()&&("complete"===Dc.readyState?N():uc.addEventListener("load",N));var pd,qd=function(a){var b=Dc.createElement("style");return b.className=a,b},rd=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},sd=3,td=sd;uc.WeakMap||(pd=function(){function a(){this.vdata="vdata"+Math.floor(uc.performance&&uc.performance.now()||Date.now()),this.data={}}var b=a.prototype;return b.set=function(a,b){var c=a[this.vdata]||O();return a[this.vdata]||(a[this.vdata]=c),this.data[c]=b,this},b.get=function(a){var b=a[this.vdata];return b?this.data[b]:void Mc("We have no data for this element",a)},b.has=function(a){var b=a[this.vdata];return b in this.data},b["delete"]=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])},a}());var ud,vd=uc.WeakMap?new WeakMap:new pd,wd=function(){if("boolean"!=typeof ud){ud=!1;try{var a=Object.defineProperty({},"passive",{get:function(){ud=!0}});uc.addEventListener("test",null,a),uc.removeEventListener("test",null,a)}catch(b){}}return ud},xd=["touchstart","touchmove"],yd=Object.freeze({__proto__:null,fixEvent:R,on:S,off:T,trigger:U,one:V,any:W}),zd=30,Ad=function(a,b,c){b.guid||(b.guid=O());var d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d},Bd=function(a,b){var c=uc.performance.now(),d=function(){var d=uc.performance.now();d-c>=b&&(a.apply(void 0,arguments),c=d)};return d},Cd=function(a,b,c,d){void 0===d&&(d=uc);var e,f=function(){d.clearTimeout(e),e=null},g=function(){var f=this,g=arguments,h=function(){e=null,h=null,c||a.apply(f,g)};!e&&c&&a.apply(f,g),d.clearTimeout(e),e=d.setTimeout(h,b)};return g.cancel=f,g},Dd=function(){};Dd.prototype.allowedEvents_={},Dd.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},S(this,a,b),this.addEventListener=c},Dd.prototype.addEventListener=Dd.prototype.on,Dd.prototype.off=function(a,b){T(this,a,b)},Dd.prototype.removeEventListener=Dd.prototype.off,Dd.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},V(this,a,b),this.addEventListener=c},Dd.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},W(this,a,b),this.addEventListener=c},Dd.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=R(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),U(this,a)},Dd.prototype.dispatchEvent=Dd.prototype.trigger;var Ed;Dd.prototype.queueTrigger=function(a){var b=this;Ed||(Ed=new Map);var c=a.type||a,d=Ed.get(this);d||(d=new Map,Ed.set(this,d));var e=d.get(c);d["delete"](c),uc.clearTimeout(e);var f=uc.setTimeout(function(){0===d.size&&(d=null,Ed["delete"](b)),b.trigger(a)},0);d.set(c,f)};var Fd=function(a){return"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a},Gd=function(a){return a instanceof Dd||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},Hd=function(a,b){Gd(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},Id=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},Jd=function(a,b,c){if(!a||!a.nodeName&&!Gd(a))throw new Error("Invalid target for "+Fd(b)+"#"+c+"; must be a DOM node or evented object.")},Kd=function(a,b,c){if(!Id(a))throw new Error("Invalid event type for "+Fd(b)+"#"+c+"; must be a non-empty string or array.")},Ld=function(a,b,c){if("function"!=typeof a)throw new Error("Invalid listener for "+Fd(b)+"#"+c+"; must be a function.")},Md=function(a,b,c){var d,e,f,g=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return g?(d=a.eventBusEl_,b.length>=3&&b.shift(),e=b[0],f=b[1]):(d=b[0],e=b[1],f=b[2]),Jd(d,a,c),Kd(e,a,c),Ld(f,a,c),f=Ad(a,f),{isTargetingSelf:g,target:d,type:e,listener:f}},Nd=function(a,b,c,d){Jd(a,a,b),a.nodeName?yd[b](a,c,d):a[b](c,d)},Od={on:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Md(this,c,"on"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(Nd(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,Nd(this,"on","dispose",j),Nd(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Md(this,c,"one"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)Nd(g,"one",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,Nd(g,"one",h,j)}},any:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Md(this,c,"any"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)Nd(g,"any",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,Nd(g,"any",h,j)}},off:function(a,b,c){if(!a||Id(a))T(this.eventBusEl_,a,b);else{var d=a,e=b;Jd(d,this,"off"),Kd(e,this,"off"),Ld(c,this,"off"),c=Ad(this,c),this.off("dispose",c),d.nodeName?(T(d,e,c),T(d,"dispose",c)):Gd(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){Jd(this.eventBusEl_,this,"trigger");var c=a&&"string"!=typeof a?a.type:a;if(!Id(c)){var d="Invalid event type for "+Fd(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!a)throw new Error(d);(this.log||Mc).error(d)}return U(this.eventBusEl_,a,b)}},Pd={state:{},setState:function(a){var b=this;"function"==typeof a&&(a=a());var d;return c(a,function(a,c){b.state[c]!==a&&(d=d||{},d[c]={from:b.state[c],to:a}),b.state[c]=a}),d&&Gd(this)&&this.trigger({changes:d,type:"statechanged"}),d}},Qd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})},Rd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},Sd=function(a,b){return Rd(a)===Rd(b)},Td=function(){function a(){this.map_={}}var b=a.prototype;return b.has=function(a){return a in this.map_},b["delete"]=function(a){var b=this.has(a);return delete this.map_[a],b},b.set=function(a,b){return this.map_[a]=b,this},b.forEach=function(a,b){for(var c in this.map_)a.call(b,this.map_[c],c,this)},a}(),Ud=uc.Map?uc.Map:Td,Vd=function(){function a(){this.set_={}}var b=a.prototype;return b.has=function(a){return a in this.set_},b["delete"]=function(a){var b=this.has(a);return delete this.set_[a],b},b.add=function(a){return this.set_[a]=1,this},b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)},a}(),Wd=uc.Set?uc.Set:Vd,Xd=function(){function a(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Z({},this.options_),b=this.options_=Z(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){var d=a&&a.id&&a.id()||"no_player";this.id_=d+"_component_"+O()}this.name_=b.name||null,b.el?this.el_=b.el:b.createEl!==!1&&(this.el_=this.createEl()),b.evented!==!1&&(X(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Y(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Wd,this.setIntervalIds_=new Wd,this.rafIds_=new Wd,this.namedRafs_=new Ud,this.clearingTimersOnDispose_=!1,b.initChildren!==!1&&this.initChildren(),this.ready(c),b.reportTouchActivity!==!1&&this.enableTouchActivity()}var b=a.prototype;return b.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},b.isDisposed=function(){return Boolean(this.isDisposed_)},b.player=function(){return this.player_},b.options=function(a){return a?(this.options_=Z(this.options_,a),this.options_):this.options_},b.el=function(){return this.el_},b.createEl=function(a,b,c){return p(a,b,c)},b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return"undefined"==typeof d&&(e=a),e})),i},b.handleLanguagechange=function(){},b.contentEl=function(){return this.contentEl_||this.el_},b.id=function(){return this.id_},b.name=function(){return this.name_},b.children=function(){return this.children_},b.getChildById=function(a){return this.childIndex_[a]},b.getChild=function(a){if(a)return this.childNameIndex_[a]},b.getDescendant=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reduce(function(a,b){return a.concat(b)},[]);for(var d=this,e=0;e<b.length;e++)if(d=d.getChild(b[e]),!d||!d.getChild)return;return d},b.addChild=function(b,c,d){void 0===c&&(c={}),void 0===d&&(d=this.children_.length);var e,f;if("string"==typeof b){f=Rd(b);var g=c.componentClass||f;c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(e.parentComponent_&&e.parentComponent_.removeChild(e),this.children_.splice(d,0,e),e.parentComponent_=this,"function"==typeof e.id&&(this.childIndex_[e.id()]=e),f=f||e.name&&Rd(e.name()),f&&(this.childNameIndex_[f]=e,this.childNameIndex_[Qd(f)]=e),"function"==typeof e.el&&e.el()){var i=null;this.children_[d+1]&&(this.children_[d+1].el_?i=this.children_[d+1].el_:m(this.children_[d+1])&&(i=this.children_[d+1])),this.contentEl().insertBefore(e.el(),i)}return e},b.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[Rd(a.name())]=null,this.childNameIndex_[Qd(a.name())]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d,e=this.options_,f=function(a){var c=a.name,d=a.opts;if(void 0!==e[c]&&(d=e[c]),d!==!1){d===!0&&(d={}),d.playerOptions=b.options_.playerOptions;var f=b.addChild(c,d);f&&(b[c]=f)}},g=a.getComponent("Tech");d=Array.isArray(c)?c:Object.keys(c),d.concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d,e;return"string"==typeof a?(d=a,e=c[d]||b.options_[d]||{}):(d=a.name,e=a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||Rd(b.name));return c&&!g.isTech(c)}).forEach(f)}},b.buildCSSClass=function(){return""},b.ready=function(a,b){if(void 0===b&&(b=!1),a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},b.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},b.$=function(a,b){return kd(a,b||this.contentEl())},b.$$=function(a,b){return ld(a,b||this.contentEl())},b.hasClass=function(a){return s(this.el_,a)},b.addClass=function(a){t(this.el_,a)},b.removeClass=function(a){u(this.el_,a)},b.toggleClass=function(a,b){v(this.el_,a,b)},b.show=function(){this.removeClass("vjs-hidden")},b.hide=function(){this.addClass("vjs-hidden")},b.lockShowing=function(){this.addClass("vjs-lock-showing")},b.unlockShowing=function(){this.removeClass("vjs-lock-showing")},b.getAttribute=function(a){return y(this.el_,a)},b.setAttribute=function(a,b){z(this.el_,a,b)},b.removeAttribute=function(a){A(this.el_,a)},b.width=function(a,b){return this.dimension("width",a,b)},b.height=function(a,b){return this.dimension("height",a,b)},b.dimensions=function(a,b){this.width(a,!0),this.height(b)},b.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b===b||(b=0),(""+b).indexOf("%")!==-1||(""+b).indexOf("px")!==-1?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return e!==-1?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+Rd(a)],10)},b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if(b=h(this.el_,a),b=parseFloat(b),0===b||isNaN(b)){var c="offset"+Rd(a);b=this.el_[c]}return b},b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},b.currentWidth=function(){return this.currentDimension("width")},b.currentHeight=function(){return this.currentDimension("height")},b.focus=function(){this.el_.focus()},b.blur=function(){this.el_.blur()},b.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))},b.handleKeyPress=function(a){this.handleKeyDown(a)},b.emitTapEvents=function(){var a,b=0,c=null,d=10,e=200;this.on("touchstart",function(d){1===d.touches.length&&(c={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},b=uc.performance.now(),a=!0)}),this.on("touchmove",function(b){if(b.touches.length>1)a=!1;else if(c){var e=b.touches[0].pageX-c.pageX,f=b.touches[0].pageY-c.pageY,g=Math.sqrt(e*e+f*f);g>d&&(a=!1)}});var f=function(){a=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(d){if(c=null,a===!0){var f=uc.performance.now()-b;f<e&&(d.preventDefault(),this.trigger("tap"))}})},b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a,b=Ad(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});var c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}},b.setTimeout=function(a,b){var c,d=this;return a=Ad(this,a),this.clearTimersOnDispose_(),c=uc.setTimeout(function(){d.setTimeoutIds_.has(c)&&d.setTimeoutIds_["delete"](c),a()},b),this.setTimeoutIds_.add(c),c},b.clearTimeout=function(a){return this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_["delete"](a),uc.clearTimeout(a)),a},b.setInterval=function(a,b){a=Ad(this,a),this.clearTimersOnDispose_();var c=uc.setInterval(a,b);return this.setIntervalIds_.add(c),c},b.clearInterval=function(a){return this.setIntervalIds_.has(a)&&(this.setIntervalIds_["delete"](a),uc.clearInterval(a)),a},b.requestAnimationFrame=function(a){var b=this;if(!this.supportsRaf_)return this.setTimeout(a,1e3/60);this.clearTimersOnDispose_();var c;return a=Ad(this,a),c=uc.requestAnimationFrame(function(){b.rafIds_.has(c)&&b.rafIds_["delete"](c),a()}),this.rafIds_.add(c),c},b.requestNamedAnimationFrame=function(a,b){var c=this;if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_(),b=Ad(this,b);var d=this.requestAnimationFrame(function(){b(),c.namedRafs_.has(a)&&c.namedRafs_["delete"](a)});return this.namedRafs_.set(a,d),a}},b.cancelNamedAnimationFrame=function(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_["delete"](a))},b.cancelAnimationFrame=function(a){return this.supportsRaf_?(this.rafIds_.has(a)&&(this.rafIds_["delete"](a),uc.cancelAnimationFrame(a)),a):this.clearTimeout(a)},b.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var c=b[0],d=b[1];a[c].forEach(function(b,c){return a[d](c)})}),a.clearingTimersOnDispose_=!1}))},a.registerComponent=function(b,c){if("string"!=typeof b||!b)throw new Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d=a.getComponent("Tech"),e=d&&d.isTech(c),f=a===c||a.prototype.isPrototypeOf(c.prototype);if(e||!f){var g;throw g=e?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+b+'"; '+g+".")}b=Rd(b),a.components_||(a.components_={});var h=a.getComponent("Player");if("Player"===b&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&j.length>0&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[b]=c,a.components_[Qd(b)]=c,c},a.getComponent=function(b){if(b&&a.components_)return a.components_[b]},a}();Xd.prototype.supportsRaf_="function"==typeof uc.requestAnimationFrame&&"function"==typeof uc.cancelAnimationFrame,Xd.registerComponent("Component",Xd);var Yd=$,Zd=_;fa.prototype.code=0,fa.prototype.message="",fa.prototype.status=null,fa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],fa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var $d=0;$d<fa.errorTypes.length;$d++)fa[fa.errorTypes[$d]]=$d,fa.prototype[fa.errorTypes[$d]]=$d;var _d=ga,ae=function(a){var b=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})});return b},be=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track}),d=Array.prototype.map.call(b,function(a){var b=ae(a.track);return a.src&&(b.src=a.src),b});return d.concat(Array.prototype.filter.call(a.textTracks(),function(a){return c.indexOf(a)===-1}).map(ae))},ce=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},de={textTracksToJson:be,jsonToTextTracks:ce,trackToJson_:ae},ee=a(function(a,b){function c(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c=String(a),f=d[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];return f?f:1===c.length?c.charCodeAt(0):void 0}c.isEventKey=function(a,b){if(a&&"object"==typeof a){var c=a.which||a.keyCode||a.charCode;if(null===c||void 0===c)return!1;if("string"==typeof b){var f=d[b.toLowerCase()];if(f)return f===c;var f=e[b.toLowerCase()];if(f)return f===c}else if("number"==typeof b)return b===c;return!1}},b=a.exports=c;var d=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"â‡§":16,"âŒ¥":18,"âŒƒ":17,"âŒ˜":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(f=97;f<123;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;f<58;f++)d[f-48]=f;for(f=1;f<13;f++)d["f"+f]=f+111;for(f=0;f<10;f++)d["numpad "+f]=f+96;var g=b.names=b.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]});ee.code,ee.codes,ee.aliases,ee.names,ee.title;var fe="vjs-modal-dialog",ge=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.close_=function(a){return d.close(a)},d.opened_=d.hasBeenOpened_=d.hasBeenFilled_=!1,d.closeable(!d.options_.uncloseable),d.content(d.options_.content),d.contentEl_=p("div",{className:fe+"-content"},{role:"document"}),d.descEl_=p("p",{className:fe+"-description vjs-control-text",id:d.el().getAttribute("aria-describedby")}),q(d.descEl_,d.description()),d.el_.appendChild(d.descEl_),d.el_.appendChild(d.contentEl_),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},c.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return fe+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},c.label=function(){return this.localize(this.options_.label||"Modal Window")},c.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},c.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},c.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},c.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},c.closeable=function d(a){if("boolean"==typeof a){var d=this.closeable_=!!a,b=this.getChild("closeButton");if(d&&!b){var c=this.contentEl_;this.contentEl_=this.el_,b=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=c,this.on(b,"close",this.close_)}!d&&b&&(this.off(b,"close",this.close_),this.removeChild(b),b.dispose())}return this.closeable_},c.fill=function(){this.fillWith(this.content())},c.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),K(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},c.empty=function(){this.trigger("beforemodalempty"),H(this.contentEl()),this.trigger("modalempty")},c.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},c.conditionalFocus_=function(){var a=Dc.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,(b.contains(a)||b===a)&&(this.previouslyActiveEl_=a,this.focus())},c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},c.handleKeyDown=function(a){if(a.stopPropagation(),ee.isEventKey(a,"Escape")&&this.closeable())return a.preventDefault(),void this.close();if(ee.isEventKey(a,"Tab")){for(var b,c=this.focusableEls_(),d=this.el_.querySelector(":focus"),e=0;e<c.length;e++)if(d===c[e]){b=e;break}Dc.activeElement===this.el_&&(b=0),a.shiftKey&&0===b?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||b!==c.length-1||(c[0].focus(),a.preventDefault())}},c.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof uc.HTMLAnchorElement||a instanceof uc.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof uc.HTMLInputElement||a instanceof uc.HTMLSelectElement||a instanceof uc.HTMLTextAreaElement||a instanceof uc.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof uc.HTMLIFrameElement||a instanceof uc.HTMLObjectElement||a instanceof uc.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},b}(Xd);ge.prototype.options_={pauseOnOpen:!0,temporary:!0},Xd.registerComponent("ModalDialog",ge);var he=function(a){function b(b){var c;void 0===b&&(b=[]),c=a.call(this)||this,c.tracks_=[],Object.defineProperty(Yd(c),"length",{get:function(){return this.tracks_.length}});for(var d=0;d<b.length;d++)c.addTrack(b[d]);return c}Zd(b,a);var c=b.prototype;return c.addTrack=function(a){var b=this,c=this.tracks_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.tracks_[c]}}),this.tracks_.indexOf(a)===-1&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this})),a.labelchange_=function(){b.trigger({track:a,type:"labelchange",target:b})},Gd(a)&&a.addEventListener("labelchange",a.labelchange_)},c.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})},c.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(Dd);he.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var ie in he.prototype.allowedEvents_)he.prototype["on"+ie]=null;var je=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},ke=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].enabled){je(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,c}Zd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.enabled&&je(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,je(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)},b}(he),le=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},me=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].selected){le(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,Object.defineProperty(Yd(c),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),c}Zd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.selected&&le(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,le(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)},b}(he),ne=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b),this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")}),b.addEventListener("modechange",this.queueChange_);var d=["metadata","chapters"];d.indexOf(b.kind)===-1&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},b}(he),oe=function(){function a(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;return b.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),this.trackElements_.indexOf(a)===-1&&this.trackElements_.push(a)},b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}},a}(),pe=function(){function a(b){a.prototype.setCues_.call(this,b),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;return b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)},b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),qe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},re={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},se={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},te={disabled:"disabled",hidden:"hidden",showing:"showing"},ue=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d={id:b.id||"vjs_track_"+O(),kind:b.kind||"",language:b.language||""},e=b.label||"",f=function(a){Object.defineProperty(Yd(c),a,{get:function(){return d[a]},set:function(){}})};for(var g in d)f(g);return Object.defineProperty(Yd(c),"label",{get:function(){return e},set:function(a){a!==e&&(e=a,this.trigger("labelchange"))}}),c}return Zd(b,a),b}(Dd),ve=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=Dc.createElement("a");c.href=a;for(var d={},e=0;e<b.length;e++)d[b[e]]=c[b[e]];return"http:"===d.protocol&&(d.host=d.host.replace(/:80$/,"")),"https:"===d.protocol&&(d.host=d.host.replace(/:443$/,"")),d.protocol||(d.protocol=uc.location.protocol),
d.host||(d.host=uc.location.host),d},we=function(a){if(!a.match(/^https?:\/\//)){var b=Dc.createElement("a");b.href=a,a=b.href}return a},xe=function(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,c=b.exec(a);if(c)return c.pop().toLowerCase()}return""},ye=function(a,b){void 0===b&&(b=uc.location);var c=ve(a),d=":"===c.protocol?b.protocol:c.protocol,e=d+c.host!==b.protocol+b.host;return e},ze=Object.freeze({__proto__:null,parseUrl:ve,getAbsoluteURL:we,getFileExtension:xe,isCrossOrigin:ye}),Ae=ja,Be=Object.prototype.toString,Ce=function(a,b){return void 0===b&&(b=!1),function(c,d,e){if(c)return void a(c);if(d.statusCode>=400&&d.statusCode<=599){var f=e;if(b)if(uc.TextDecoder){var g=ka(d.headers&&d.headers["content-type"]);try{f=new TextDecoder(g).decode(e)}catch(h){}}else f=String.fromCharCode.apply(null,new Uint8Array(e));return void a({cause:f})}a(null,e)}},De=Ce;oa.httpHandler=De;var Ee=function(a){var b={};return a?(a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();"undefined"==typeof b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b):b},Fe=oa,Ge=oa;oa.XMLHttpRequest=uc.XMLHttpRequest||ra,oa.XDomainRequest="withCredentials"in new oa.XMLHttpRequest?oa.XMLHttpRequest:uc.XDomainRequest,la(["get","put","post","patch","head","delete"],function(a){oa["delete"===a?"del":a]=function(b,c,d){return c=na(b,c,d),c.method=a.toUpperCase(),pa(c)}}),Fe["default"]=Ge;var He=function(a,b){var c=new uc.WebVTT.Parser(uc,uc.vttjs,uc.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(uc.console&&uc.console.groupCollapsed&&uc.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return Mc.error(a)}),uc.console&&uc.console.groupEnd&&uc.console.groupEnd()),c.flush()},Ie=function(a,b){var c={uri:a},d=ye(a);d&&(c.cors=d);var e="use-credentials"===b.tech_.crossOrigin();e&&(c.withCredentials=e),Fe(c,Ad(this,function(a,c,d){return a?Mc.error(a,c):(b.loaded_=!0,void("function"!=typeof uc.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],function(a){return"vttjserror"===a.type?void Mc.error("vttjs failed to load, stopping trying to process "+b.src):He(d,b)}):He(d,b)))}))},Je=function(a){function b(b){var c;if(void 0===b&&(b={}),!b.tech)throw new Error("A tech was not provided.");var d=Z(b,{kind:se[b.kind]||"subtitles",language:b.language||b.srclang||""}),e=te[d.mode]||"disabled",f=d["default"];"metadata"!==d.kind&&"chapters"!==d.kind||(e="hidden"),c=a.call(this,d)||this,c.tech_=d.tech,c.cues_=[],c.activeCues_=[],c.preload_=c.tech_.preloadTextTracks!==!1;var g=new pe(c.cues_),h=new pe(c.activeCues_),i=!1,j=Ad(Yd(c),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,i&&(this.trigger("cuechange"),i=!1))}),k=function(){c.tech_.off("timeupdate",j)};return c.tech_.one("dispose",k),"disabled"!==e&&c.tech_.on("timeupdate",j),Object.defineProperties(Yd(c),{"default":{get:function(){return f},set:function(){}},mode:{get:function(){return e},set:function(a){te[a]&&e!==a&&(e=a,this.preload_||"disabled"===e||0!==this.cues.length||Ie(this.src,this),this.tech_.off("timeupdate",j),"disabled"!==e&&this.tech_.on("timeupdate",j),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(i=!1,b.length!==this.activeCues_.length)i=!0;else for(var f=0;f<b.length;f++)this.activeCues_.indexOf(b[f])===-1&&(i=!0);return this.activeCues_=b,h.setCues_(this.activeCues_),h},set:function(){}}}),d.src?(c.src=d.src,c.preload_||(c.loaded_=!0),(c.preload_||"subtitles"!==d.kind&&"captions"!==d.kind)&&Ie(c.src,Yd(c))):c.loaded_=!0,c}Zd(b,a);var c=b.prototype;return c.addCue=function(a){var b=a;if(uc.vttjs&&!(a instanceof uc.vttjs.VTTCue)){b=new uc.vttjs.VTTCue(a.startTime,a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}for(var d=this.tech_.textTracks(),e=0;e<d.length;e++)d[e]!==this&&d[e].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)},c.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},b}(ue);Je.prototype.allowedEvents_={cuechange:"cuechange"};var Ke=function(a){function b(b){var c;void 0===b&&(b={});var d=Z(b,{kind:re[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Yd(c),"enabled",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}}),d.enabled&&(c.enabled=d.enabled),c.loaded_=!0,c}return Zd(b,a),b}(ue),Le=function(a){function b(b){var c;void 0===b&&(b={});var d=Z(b,{kind:qe[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty(Yd(c),"selected",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}}),d.selected&&(c.selected=d.selected),c}return Zd(b,a),b}(ue),Me=0,Ne=1,Oe=2,Pe=3,Qe=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d,e=new Je(b);return c.kind=e.kind,c.src=e.src,c.srclang=e.language,c.label=e.label,c["default"]=e["default"],Object.defineProperties(Yd(c),{readyState:{get:function(){return d}},track:{get:function(){return e}}}),d=Me,e.addEventListener("loadeddata",function(){d=Oe,c.trigger({type:"load",target:Yd(c)})}),c}return Zd(b,a),b}(Dd);Qe.prototype.allowedEvents_={load:"load"},Qe.NONE=Me,Qe.LOADING=Ne,Qe.LOADED=Oe,Qe.ERROR=Pe;var Re={audio:{ListClass:ke,TrackClass:Ke,capitalName:"Audio"},video:{ListClass:me,TrackClass:Le,capitalName:"Video"},text:{ListClass:ne,TrackClass:Je,capitalName:"Text"}};Object.keys(Re).forEach(function(a){Re[a].getterName=a+"Tracks",Re[a].privateName=a+"Tracks_"});var Se={remoteText:{ListClass:ne,TrackClass:Je,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:oe,TrackClass:Qe,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Te=Oc({},Re,Se);Se.names=Object.keys(Se),Re.names=Object.keys(Re),Te.names=[].concat(Se.names).concat(Re.names);var Ue=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();sa.prototype=Ue(Error.prototype),sa.prototype.constructor=sa,sa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ua.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return!!(b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b),b>=0&&b<=100))&&(this.set(a,b),!0)}};var Ve=Dc.createElement&&Dc.createElement("textarea"),We={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Xe={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ye={v:"title",lang:"lang"},Ze={rt:"ruby"},$e=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ba.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},Ba.prototype.formatStyle=function(a,b){return 0===a?0:a+b},Ca.prototype=Ue(Ba.prototype),Ca.prototype.constructor=Ca,Da.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},Da.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},Da.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},Da.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},Da.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},Da.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},Da.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},Da.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},Fa.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},Fa.convertCueToDOMTree=function(a,b){return a&&b?xa(a,b):null};var _e=.05,af="sans-serif",bf="1.5%";Fa.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=bf,c.appendChild(e),d(b)){var f=[],g=Da.getSimpleBoxPosition(e),h=Math.round(g.height*_e*100)/100,i={font:h+"px "+af};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new Ca(a,d,i),e.appendChild(c.div),Ea(a,c,g,f),d.displayState=c.div,f.push(Da.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},Fa.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},Fa.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof sa))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,f.buffer=a.substr(b),c}function c(a){var b=new ua;if(va(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new ua;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(f.vttjs.VTTRegion||f.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),f.onregion&&f.onregion(c),f.regionList.push({id:b.get("id"),region:c})}}function d(a){var b=new ua;va(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",ta(c))}},/[^\d]:/,/,/),f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function e(a){a.match(/X-TIMESTAMP-MAP/)?va(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":d(b)}},/=/):va(a,function(a,b){switch(a){case"Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{var g;if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;g=b();var h=g.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new sa(sa.Errors.BadSignature);f.state="HEADER"}for(var i=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;switch(i?i=!1:g=b(),f.state){case"HEADER":/:/.test(g)?e(g):g||(f.state="ID");continue;case"NOTE":g||(f.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new(f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");try{f.cue.align="center"}catch(j){f.cue.align="middle"}if(f.state="CUE",g.indexOf("-->")===-1){f.cue.id=g;continue}case"CUE":try{wa(g,f.cue,f.regionList)}catch(j){f.reportOrThrowError(j),f.cue=null,f.state="BADCUE";continue}f.state="CUETEXT";continue;case"CUETEXT":var k=g.indexOf("-->")!==-1;if(!g||k&&(i=!0)){f.oncue&&f.oncue(f.cue),f.cue=null,f.state="ID";continue}f.cue.text&&(f.cue.text+="\n"),f.cue.text+=g.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":g||(f.state="ID");continue}}}catch(j){f.reportOrThrowError(j),"CUETEXT"===f.state&&f.cue&&f.oncue&&f.oncue(f.cue),f.cue=null,f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new sa(sa.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}};var cf=Fa,df="auto",ef={"":1,lr:1,rl:1},ff={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ia.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var gf=Ia,hf={"":!0,up:!0},jf=La,kf=a(function(a){var b=a.exports={WebVTT:cf,VTTCue:gf,VTTRegion:jf};uc.vttjs=b,uc.WebVTT=b.WebVTT;var c=b.VTTCue,d=b.VTTRegion,e=uc.VTTCue,f=uc.VTTRegion;b.shim=function(){uc.VTTCue=c,uc.VTTRegion=d},b.restore=function(){uc.VTTCue=e,uc.VTTRegion=f},uc.VTTCue||b.shim()});kf.WebVTT,kf.VTTCue,kf.VTTRegion;var lf=function(a){function b(b,c){var d;return void 0===b&&(b={}),void 0===c&&(c=function(){}),b.reportTouchActivity=!1,d=a.call(this,null,b,c)||this,d.onDurationChange_=function(a){return d.onDurationChange(a)},d.trackProgress_=function(a){return d.trackProgress(a)},d.trackCurrentTime_=function(a){return d.trackCurrentTime(a)},d.stopTrackingCurrentTime_=function(a){return d.stopTrackingCurrentTime(a)},d.disposeSourceHandler_=function(a){return d.disposeSourceHandler(a)},d.hasStarted_=!1,d.on("playing",function(){this.hasStarted_=!0}),d.on("loadstart",function(){this.hasStarted_=!1}),Te.names.forEach(function(a){var c=Te[a];b&&b[c.getterName]&&(d[c.privateName]=b[c.getterName])}),d.featuresProgressEvents||d.manualProgressOn(),d.featuresTimeupdateEvents||d.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){b["native"+a+"Tracks"]===!1&&(d["featuresNative"+a+"Tracks"]=!1)}),b.nativeCaptions===!1||b.nativeTextTracks===!1?d.featuresNativeTextTracks=!1:b.nativeCaptions!==!0&&b.nativeTextTracks!==!0||(d.featuresNativeTextTracks=!0),d.featuresNativeTextTracks||d.emulateTextTracks(),d.preloadTextTracks=b.preloadTextTracks!==!1,d.autoRemoteTextTracks_=new Te.text.ListClass,d.initTrackListeners(),b.nativeControlsForTouch||d.emitTapEvents(),d.constructor&&(d.name_=d.constructor.name||"Unknown Tech"),d}Zd(b,a);var c=b.prototype;return c.triggerSourceset=function(a){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)}),this.trigger({src:a,type:"sourceset"})},c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},c.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},c.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ad(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},c.onDurationChange=function(a){this.duration_=this.duration()},c.buffered=function(){return da(0,0)},c.bufferedPercent=function(){return ea(this.buffered(),this.duration_)},c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.dispose=function(){this.clearTracks(Re.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},c.clearTracks=function(a){var b=this;a=[].concat(a),a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},c.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},c.reset=function(){},c.crossOrigin=function(){},c.setCrossOrigin=function(){},c.error=function(a){return void 0!==a&&(this.error_=new fa(a),this.trigger("error")),this.error_},c.played=function(){return this.hasStarted_?da(0,0):da()},c.play=function(){},c.setScrubbing=function(){},c.scrubbing=function(){},c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.initTrackListeners=function(){var a=this;Re.names.forEach(function(b){var c=Re[b],d=function(){a.trigger(b+"trackchange")},e=a[c.getterName]();e.addEventListener("removetrack",d),e.addEventListener("addtrack",d),a.on("dispose",function(){e.removeEventListener("removetrack",d),e.removeEventListener("addtrack",d)})})},c.addWebVttScript_=function(){var a=this;if(!uc.WebVTT)if(Dc.body.contains(this.el())){if(!this.options_["vtt.js"]&&g(kf)&&Object.keys(kf).length>0)return void this.trigger("vttjsloaded");var b=Dc.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){b.onload=null,b.onerror=null}),uc.WebVTT=!0,this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},c.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d),c.on("removetrack",e),this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f),"showing"===c.mode&&c.addEventListener("cuechange",f)}};g(),b.addEventListener("change",g),b.addEventListener("addtrack",g),b.addEventListener("removetrack",g),this.on("dispose",function(){c.off("addtrack",d),c.off("removetrack",e),b.removeEventListener("change",g),b.removeEventListener("addtrack",g),b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++){var h=b[a];h.removeEventListener("cuechange",f)}})},c.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return Ma(this,a,b,c)},c.createRemoteTextTrack=function(a){var b=Z(a,{tech:this});return new Se.remoteTextEl.TrackClass(b)},c.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=this.createRemoteTextTrack(a);return b!==!0&&b!==!1&&(Mc.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),b!==!0&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)}),d},c.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)},c.getVideoPlaybackQuality=function(){return{}},c.requestPictureInPicture=function(){var a=this.options_.Promise||uc.Promise;if(a)return a.reject()},c.disablePictureInPicture=function(){return!0},c.setDisablePictureInPicture=function(){},c.setPoster=function(){},c.playsinline=function(){},c.setPlaysinline=function(){},c.overrideNativeAudioTracks=function(){},c.overrideNativeVideoTracks=function(){},c.canPlayType=function(){return""},b.canPlayType=function(){return""},b.canPlaySource=function(a,c){return b.canPlayType(a.type)},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=Rd(a),b.techs_[a]=c,b.techs_[Qd(a)]=c,"Tech"!==a&&b.defaultTechOrder_.push(a),c},b.getTech=function(a){if(a)return b.techs_&&b.techs_[a]?b.techs_[a]:(a=Rd(a),uc&&uc.videojs&&uc.videojs[a]?(Mc.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),uc.videojs[a]):void 0)},b}(Xd);Te.names.forEach(function(a){var b=Te[a];lf.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),lf.prototype.featuresVolumeControl=!0,lf.prototype.featuresMuteControl=!0,lf.prototype.featuresFullscreenResize=!1,lf.prototype.featuresPlaybackRate=!1,lf.prototype.featuresProgressEvents=!1,lf.prototype.featuresSourceset=!1,lf.prototype.featuresTimeupdateEvents=!1,lf.prototype.featuresNativeTextTracks=!1,lf.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c,d=a.sourceHandlers||[],e=0;e<d.length;e++)if(c=d[e].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){for(var d,e=a.sourceHandlers||[],f=0;f<e.length;f++)if(d=e[f].canHandleSource(b,c))return e[f];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};var b=["seekable","seeking","duration"];b.forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:Mc.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Xd.registerComponent("Tech",lf),lf.registerTech("Tech",lf),lf.defaultTechOrder_=[];var mf={},nf={},of={},pf={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},qf={setCurrentTime:1,setMuted:1,setVolume:1},rf={play:1,pause:1},sf={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},tf=function(a){void 0===a&&(a="");var b=xe(a),c=sf[b.toLowerCase()];return c||""},uf=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;for(var d=a.$$("source"),e=0;e<d.length;e++){var f=d[e];if(f.type&&f.src&&f.src===b)return f.type}return tf(b)},vf=function $p(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=$p(a),Array.isArray(a)?b=b.concat(a):f(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[Ya({src:a})]:f(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[Ya(a)]:[];return a},wf=function(a){function b(b,c,d){var e,f=Z({createEl:!1},c);if(e=a.call(this,b,f,d)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(var g=0,h=c.playerOptions.techOrder;g<h.length;g++){var i=Rd(h[g]),j=lf.getTech(i);if(i||(j=Xd.getComponent(i)),j&&j.isSupported()){b.loadTech_(i);break}}return e}return Zd(b,a),b}(Xd);Xd.registerComponent("MediaLoader",wf);var xf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseOver_=function(a){return d.handleMouseOver(a)},d.handleMouseOut_=function(a){return d.handleMouseOut(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.emitTapEvents(),d.enable(),d}Zd(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={}),b=e({className:this.buildCSSClass(),tabIndex:0},b),"button"===a&&Mc.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead."),c=e({role:"button"},c),this.tabIndex_=b.tabIndex;var d=p(a,b,c);return d.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},c.createControlTextEl=function(a){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},c.controlText=function(a,b){if(void 0===b&&(b=this.el()),void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,q(this.controlTextEl_,c),this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",c)},c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},c.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},c.handleLanguagechange=function(){this.controlText(this.controlText_)},c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},c.handleKeyDown=function(b){ee.isEventKey(b,"Space")||ee.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(Xd);Xd.registerComponent("ClickableComponent",xf);var yf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update(),d.update_=function(a){return d.update(a)},b.on("posterchange",d.update_),d}Zd(b,a);var c=b.prototype;return c.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},c.createEl=function(){var a=p("div",{className:"vjs-poster",tabIndex:-1});return a},c.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},c.setSrc=function(a){var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b},c.handleClick=function(a){if(this.player_.controls()){var b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(bd||$c)&&b||this.player_.tech(!0).focus(),this.player_.paused()?ia(this.player_.play()):this.player_.pause()}},b}(xf);Xd.registerComponent("PosterImage",yf);var zf="#222",Af="#ccc",Bf={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Cf=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=function(a){return e.updateDisplay(a)};return b.on("loadstart",function(a){return e.toggleDisplay(a)}),b.on("texttrackchange",f),b.on("loadedmetadata",function(a){return e.preselectTrack(a)}),b.ready(Ad(Yd(e),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)return void this.hide();b.on("fullscreenchange",f),b.on("playerresize",f),uc.addEventListener("orientationchange",f),b.on("dispose",function(){return uc.removeEventListener("orientationchange",f)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()})),e}Zd(b,a);var c=b.prototype;return c.preselectTrack=function(){for(var a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<e.length;g++){var h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?h.kind===f.kind?c=h:c||(c=h):f&&!f.enabled?(c=null,
a=null,b=null):h["default"]&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")},c.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},c.clearDisplay=function(){"function"==typeof uc.WebVTT&&uc.WebVTT.processCues(uc,[],this.el_)},c.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){for(var c=[],d=0;d<a.length;++d){var e=a[d];"showing"===e.mode&&c.push(e)}return void this.updateForTrack(c)}for(var f=null,g=null,h=a.length;h--;){var i=a[h];"showing"===i.mode&&("descriptions"===i.kind?f=i:g=i)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):f&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))},c.updateDisplayState=function(a){for(var b=this.player_.textTrackSettings.getValues(),c=a.activeCues,d=c.length;d--;){var e=c[d];if(e){var f=e.displayState;if(b.color&&(f.firstChild.style.color=b.color),b.textOpacity&&$a(f.firstChild,"color",Za(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(f.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&$a(f.firstChild,"backgroundColor",Za(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?$a(f,"backgroundColor",Za(b.windowColor,b.windowOpacity)):f.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?f.firstChild.style.textShadow="2px 2px 3px "+zf+", 2px 2px 4px "+zf+", 2px 2px 5px "+zf:"raised"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px "+zf+", 2px 2px "+zf+", 3px 3px "+zf:"depressed"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px "+Af+", 0 1px "+Af+", -1px -1px "+zf+", 0 -1px "+zf:"uniform"===b.edgeStyle&&(f.firstChild.style.textShadow="0 0 4px "+zf+", 0 0 4px "+zf+", 0 0 4px "+zf+", 0 0 4px "+zf)),b.fontPercent&&1!==b.fontPercent){var g=uc.parseFloat(f.style.fontSize);f.style.fontSize=g*b.fontPercent+"px",f.style.height="auto",f.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=Bf[b.fontFamily])}}},c.updateForTrack=function(a){if(Array.isArray(a)||(a=[a]),"function"==typeof uc.WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e]);uc.WebVTT.processCues(uc,b,this.el_);for(var f=0;f<a.length;++f){for(var g=a[f],h=0;h<g.activeCues.length;++h){var i=g.activeCues[h].displayState;t(i,"vjs-text-track-cue"),t(i,"vjs-text-track-cue-"+(g.language?g.language:f))}this.player_.textTrackSettings&&this.updateDisplayState(g)}}},b}(Xd);Xd.registerComponent("TextTrackDisplay",Cf);var Df=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=this.player_.isAudio(),c=this.localize(b?"Audio Player":"Video Player"),d=p("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[c])}),e=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(d),e},b}(Xd);Xd.registerComponent("LoadingSpinner",Df);var Ef=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={}),a="button",b=e({className:this.buildCSSClass()},b),c=e({type:"button"},c);var d=p(a,b,c);return d.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.addChild=function(a,b){void 0===b&&(b={});var c=this.constructor.name;return Mc.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),Xd.prototype.addChild.call(this,a,b)},c.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},c.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},c.handleKeyDown=function(b){return ee.isEventKey(b,"Space")||ee.isEventKey(b,"Enter")?void b.stopPropagation():void a.prototype.handleKeyDown.call(this,b)},b}(xf);Xd.registerComponent("Button",Ef);var Ff=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.mouseused_=!1,d.on("mousedown",function(a){return d.handleMouseDown(a)}),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-big-play-button"},c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY){var c=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return ia(b),void(!this.player_.tech(!0)||(bd||$c)&&c||this.player_.tech(!0).focus())}var d=this.player_.getChild("controlBar"),e=d&&d.getChild("playToggle");if(!e)return void this.player_.tech(!0).focus();var f=function(){return e.focus()};ha(b)?b.then(f,function(){}):this.setTimeout(f,1)},c.handleKeyDown=function(b){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,b)},c.handleMouseDown=function(a){this.mouseused_=!0},b}(Ef);Ff.prototype.controlText_="Play Video",Xd.registerComponent("BigPlayButton",Ff);var Gf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.controlText(c&&c.controlText||d.localize("Close")),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},c.handleKeyDown=function(b){ee.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(Ef);Xd.registerComponent("CloseButton",Gf);var Hf=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,c.replay=void 0===c.replay||c.replay,d.on(b,"play",function(a){return d.handlePlay(a)}),d.on(b,"pause",function(a){return d.handlePause(a)}),c.replay&&d.on(b,"ended",function(a){return d.handleEnded(a)}),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.player_.paused()?ia(this.player_.play()):this.player_.pause()},c.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},c.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},c.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},c.handleEnded=function(a){var b=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return b.handleSeeked(a)})},b}(Ef);Hf.prototype.controlText_="Play",Xd.registerComponent("PlayToggle",Hf);var If=function(a,b){a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c},Jf=If,Kf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["timeupdate","ended"],function(a){return d.updateContent(a)}),d.updateTextNode_(),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control"}),d=p("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"Â "},{role:"presentation"});return c.appendChild(d),this.contentEl_=p("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"}),c.appendChild(this.contentEl_),c},c.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},c.updateTextNode_=function(a){var b=this;void 0===a&&(a=0),a=bb(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(b.contentEl_){var a=b.textNode_;a&&b.contentEl_.firstChild!==a&&(a=null,Mc.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),b.textNode_=Dc.createTextNode(b.formattedTime_),b.textNode_&&(a?b.contentEl_.replaceChild(b.textNode_,a):b.contentEl_.appendChild(b.textNode_))}}))},c.updateContent=function(a){},b}(Xd);Kf.prototype.labelText_="Time",Kf.prototype.controlText_="Time",Xd.registerComponent("TimeDisplay",Kf);var Lf=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-current-time"},c.updateContent=function(a){var b;b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)},b}(Kf);Lf.prototype.labelText_="Current Time",Lf.prototype.controlText_="Current Time",Xd.registerComponent("CurrentTimeDisplay",Lf);var Mf=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=function(a){return d.updateContent(a)};return d.on(b,"durationchange",e),d.on(b,"loadstart",e),d.on(b,"loadedmetadata",e),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-duration"},c.updateContent=function(a){var b=this.player_.duration();this.updateTextNode_(b)},b}(Kf);Mf.prototype.labelText_="Duration",Mf.prototype.controlText_="Duration",Xd.registerComponent("DurationDisplay",Mf);var Nf=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),c=a.prototype.createEl.call(this,"div"),d=a.prototype.createEl.call(this,"span",{textContent:"/"});return c.appendChild(d),b.appendChild(c),b},b}(Xd);Xd.registerComponent("TimeDivider",Nf);var Of=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"durationchange",function(a){return d.updateContent(a)}),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-remaining-time"},c.createEl=function(){var b=a.prototype.createEl.call(this);return b.insertBefore(p("span",{},{"aria-hidden":!0},"-"),this.contentEl_),b},c.updateContent=function(a){if("number"==typeof this.player_.duration()){var b;b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b)}},b}(Kf);Of.prototype.labelText_="Remaining Time",Of.prototype.controlText_="Remaining Time",Xd.registerComponent("RemainingTimeDisplay",Of);var Pf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateShowing(),d.on(d.player(),"durationchange",function(a){return d.updateShowing(a)}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(p("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"Â "})),this.contentEl_.appendChild(Dc.createTextNode(this.localize("LIVE"))),b.appendChild(this.contentEl_),b},c.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},c.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(Xd);Xd.registerComponent("LiveDisplay",Pf);var Qf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateLiveEdgeStatus(),d.player_.liveTracker&&(d.updateLiveEdgeStatusHandler_=function(a){return d.updateLiveEdgeStatus(a)},d.on(d.player_.liveTracker,"liveedgechange",d.updateLiveEdgeStatusHandler_)),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=p("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),b.appendChild(this.textEl_),b},c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},b}(Ef);Qf.prototype.controlText_="Seek to live, currently playing live",Xd.registerComponent("SeekToLive",Qf);var Rf=function(a,b,c){return a=Number(a),Math.min(c,Math.max(b,isNaN(a)?b:a))},Sf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseDown_=function(a){return d.handleMouseDown(a)},d.handleMouseUp_=function(a){return d.handleMouseUp(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleMouseMove_=function(a){return d.handleMouseMove(a)},d.update_=function(a){return d.update(a)},d.bar=d.getChild(d.options_.barName),d.vertical(!!d.options_.vertical),d.enable(),d}Zd(b,a);var c=b.prototype;return c.enabled=function(){return this.enabled_},c.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},c.createEl=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),c.className=c.className+" vjs-slider",c=e({tabIndex:0},c),d=e({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||_c||a.preventDefault(),B(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove_),this.on(b,"mouseup",this.handleMouseUp_),this.on(b,"touchmove",this.handleMouseMove_),this.on(b,"touchend",this.handleMouseUp_),this.handleMouseMove(a)},c.handleMouseMove=function(a){},c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;C(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()},c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();return b===this.progress_?b:(this.progress_=b,this.requestNamedAnimationFrame("Slider#update",function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"}),b)}},c.getProgress=function(){return Number(Rf(this.getPercent(),0,1).toFixed(4))},c.calculateDistance=function(a){var b=F(this.el_,a);return this.vertical()?b.y:b.x},c.handleKeyDown=function(b){ee.isEventKey(b,"Left")||ee.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):ee.isEventKey(b,"Right")||ee.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){a.stopPropagation(),a.preventDefault()},c.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(Xd);Xd.registerComponent("Slider",Sf);var Tf=function(a,b){return Rf(a/b*100,0,100).toFixed(2)+"%"},Uf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.partEls_=[],d.on(b,"progress",function(a){return d.update(a)}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),c=p("span",{className:"vjs-control-text"}),d=p("span",{textContent:this.localize("Loaded")}),e=Dc.createTextNode(": ");return this.percentageEl_=p("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),b.appendChild(c),c.appendChild(d),c.appendChild(e),c.appendChild(this.percentageEl_),b},c.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},c.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=b.player_.liveTracker,c=b.player_.buffered(),d=a&&a.isLive()?a.seekableEnd():b.player_.duration(),e=b.player_.bufferedEnd(),f=b.partEls_,g=Tf(e,d);b.percent_!==g&&(b.el_.style.width=g,q(b.percentageEl_,g),b.percent_=g);for(var h=0;h<c.length;h++){var i=c.start(h),j=c.end(h),k=f[h];k||(k=b.el_.appendChild(p()),f[h]=k),k.dataset.start===i&&k.dataset.end===j||(k.dataset.start=i,k.dataset.end=j,k.style.left=Tf(i,e),k.style.width=Tf(j-i,e))}for(var l=f.length;l>c.length;l--)b.el_.removeChild(f[l-1]);f.length=c.length})},b}(Xd);Xd.registerComponent("LoadProgressBar",Uf);var Vf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Bd(Ad(Yd(d),d.update),zd),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c){var d=E(this.el_),e=D(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),i=Math.round(i),this.el_.style.right="-"+i+"px",this.write(c)}},c.write=function(a){q(this.el_,a)},c.updateTime=function(a,b,c,d){var e=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,g=e.player_.duration();if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){var h=e.player_.liveTracker.liveWindow(),i=h-b*h;f=(i<1?"":"-")+bb(i,h)}else f=bb(c,g);e.update(a,b,f),d&&d()})},b}(Xd);Xd.registerComponent("TimeTooltip",Vf);var Wf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Bd(Ad(Yd(d),d.update),zd),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},c.update=function(a,b){var c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}},b}(Xd);Wf.prototype.options_={children:[]},hd||Wc||Wf.prototype.options_.children.push("timeTooltip"),Xd.registerComponent("PlayProgressBar",Wf);var Xf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Bd(Ad(Yd(d),d.update),zd),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})},b}(Xd);Xf.prototype.options_={children:["timeTooltip"]},Xd.registerComponent("MouseTimeDisplay",Xf);var Yf=5,Zf=12,$f=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.setEventHandlers_(),d}Zd(b,a);var c=b.prototype;return c.setEventHandlers_=function(){var a=this;this.update_=Ad(this,this.update),this.update=Bd(this.update_,zd),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(b){return a.enableInterval_(b)},this.disableIntervalHandler_=function(b){return a.disableInterval_(b)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dc&&"visibilityState"in Dc&&this.on(Dc,"visibilitychange",this.toggleVisibility_)},c.toggleVisibility_=function(a){"hidden"===Dc.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},c.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,zd))},c.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},c.update=function(b){var c=this;if("hidden"!==Dc.visibilityState){var d=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,e=c.player_.duration();b&&b.isLive()&&(e=c.player_.liveTracker.liveCurrentTime()),c.percent_!==d&&(c.el_.setAttribute("aria-valuenow",(100*d).toFixed(2)),c.percent_=d),c.currentTime_===a&&c.duration_===e||(c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime={1} duration={2}",[bb(a,e),bb(e,e)],"{1} of {2}")),c.currentTime_=a,c.duration_=e),c.bar&&c.bar.update(D(c.el()),c.getProgress())}),d}},c.userSeek_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(a)},c.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},c.getPercent=function(){var a,b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a},c.handleMouseDown=function(b){L(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},c.handleMouseMove=function(a){if(L(a)){var b,c=this.calculateDistance(a),d=this.player_.liveTracker;if(d&&d.isLive()){if(c>=.99)return void d.seekToLiveEdge();var e=d.seekableStart(),f=d.liveCurrentTime();if(b=e+c*d.liveWindow(),b>=f&&(b=f),b<=e&&(b=e+.1),b===1/0)return}else b=c*this.player_.duration(),b===this.player_.duration()&&(b-=.1);this.userSeek_(b)}},c.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},c.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},c.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),b&&b.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ia(this.player_.play()):this.update_()},c.stepForward=function(){this.userSeek_(this.player_.currentTime()+Yf)},c.stepBack=function(){this.userSeek_(this.player_.currentTime()-Yf)},c.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleKeyDown=function(b){var c=this.player_.liveTracker;if(ee.isEventKey(b,"Space")||ee.isEventKey(b,"Enter"))b.preventDefault(),b.stopPropagation(),this.handleAction(b);else if(ee.isEventKey(b,"Home"))b.preventDefault(),b.stopPropagation(),this.userSeek_(0);else if(ee.isEventKey(b,"End"))b.preventDefault(),b.stopPropagation(),c&&c.isLive()?this.userSeek_(c.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ee(b))){b.preventDefault(),b.stopPropagation();var d=10*(ee.codes[ee(b)]-ee.codes[0])/100;c&&c.isLive()?this.userSeek_(c.seekableStart()+c.liveWindow()*d):this.userSeek_(this.player_.duration()*d)}else ee.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()-Yf*Zf)):ee.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()+Yf*Zf)):a.prototype.handleKeyDown.call(this,b)},c.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Dc&&"visibilityState"in Dc&&this.off(Dc,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},b}(Sf);$f.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},hd||Wc||$f.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Xd.registerComponent("SeekBar",$f);var _f=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseMove=Bd(Ad(Yd(d),d.handleMouseMove),zd),d.throttledHandleMouseSeek=Bd(Ad(Yd(d),d.handleMouseSeek),zd),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.handleMouseDownHandler_=function(a){return d.handleMouseDown(a)},d.enable(),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),f=E(e),g=F(e,a).x;g=Rf(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}}},c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)},c.enabled=function(){return this.enabled_},c.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var a=this.getChild("seekBar");this.player_.scrubbing(!1),a.videoWasPlaying&&ia(this.player_.play())}},c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},c.removeListenersAddedOnMousedownAndTouchstart=function(){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek),this.off(a,"touchmove",this.throttledHandleMouseSeek),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.getChild("seekBar");b&&b.handleMouseUp(a),this.removeListenersAddedOnMousedownAndTouchstart()},b}(Xd);_f.prototype.options_={children:["seekBar"]},Xd.registerComponent("ProgressControl",_f);var ag=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["enterpictureinpicture","leavepictureinpicture"],function(a){return d.handlePictureInPictureChange(a)}),d.on(b,["disablepictureinpicturechanged","loadedmetadata"],function(a){return d.handlePictureInPictureEnabledChange(a)}),d.disable(),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},c.handlePictureInPictureEnabledChange=function(){Dc.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},c.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},c.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},b}(Ef);ag.prototype.controlText_="Picture-in-Picture",Xd.registerComponent("PictureInPictureToggle",ag);var bg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"fullscreenchange",function(a){return d.handleFullscreenChange(a)}),Dc[b.fsApi_.fullscreenEnabled]===!1&&d.disable(),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},c.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},c.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},b}(Ef);bg.prototype.controlText_="Fullscreen",Xd.registerComponent("FullscreenToggle",bg);var cg=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},dg=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return b.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),b},b}(Xd);Xd.registerComponent("VolumeLevel",dg);var eg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Bd(Ad(Yd(d),d.update),zd),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c,d){if(!c){var e=D(this.el_),f=D(this.player_.el()),g=a.width*b;if(!f||!e)return;var h=a.left-f.left+g,i=a.width-g+(f.right-a.right),j=e.width/2;h<j?j+=j-h:i<j&&(j=i),j<0?j=0:j>e.width&&(j=e.width),this.el_.style.right="-"+j+"px"}this.write(d+"%")},c.write=function(a){q(this.el_,a)},c.updateVolume=function(a,b,c,d,e){var f=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){f.update(a,b,c,d.toFixed(0)),e&&e()})},b}(Xd);Xd.registerComponent("VolumeLevelTooltip",eg);var fg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Bd(Ad(Yd(d),d.update),zd),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b,c){var d=this,e=100*b;this.getChild("volumeLevelTooltip").updateVolume(a,b,c,e,function(){c?d.el_.style.bottom=a.height*b+"px":d.el_.style.left=a.width*b+"px"})},b}(Xd);fg.prototype.options_={children:["volumeLevelTooltip"]},Xd.registerComponent("MouseVolumeLevelDisplay",fg);var gg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on("slideractive",function(a){return d.updateLastVolume_(a)}),d.on(b,"volumechange",function(a){return d.updateARIAAttributes(a)}),b.ready(function(){return d.updateARIAAttributes()}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{
className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},c.handleMouseDown=function(b){L(b)&&a.prototype.handleMouseDown.call(this,b)},c.handleMouseMove=function(a){var b=this.getChild("mouseVolumeLevelDisplay");if(b){var c=this.el(),d=D(c),e=this.vertical(),f=F(c,a);f=e?f.y:f.x,f=Rf(f,0,1),b.update(d,f,e)}L(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},c.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},c.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},c.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(Sf);gg.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},hd||Wc||gg.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),gg.prototype.playerEvent="volumechange",Xd.registerComponent("VolumeBar",gg);var hg=function(a){function b(b,c){var d;return void 0===c&&(c={}),c.vertical=c.vertical||!1,("undefined"==typeof c.volumeBar||g(c.volumeBar))&&(c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical),d=a.call(this,b,c)||this,cg(Yd(d),b),d.throttledHandleMouseMove=Bd(Ad(Yd(d),d.handleMouseMove),zd),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.on("mousedown",function(a){return d.handleMouseDown(a)}),d.on("touchstart",function(a){return d.handleMouseDown(a)}),d.on("mousemove",function(a){return d.handleMouseMove(a)}),d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active"),d.addClass("vjs-slider-active"),d.trigger("slideractive")}),d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active"),d.removeClass("vjs-slider-active"),d.trigger("sliderinactive")}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},c.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUpHandler_),this.off(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(Xd);hg.prototype.options_={children:["volumeBar"]},Xd.registerComponent("VolumeControl",hg);var ig=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},jg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,ig(Yd(d),b),d.on(b,["loadstart","volumechange"],function(a){return d.update(a)}),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},c.update=function(a){this.updateIcon_(),this.updateControlText_()},c.updateIcon_=function(){var a=this.player_.volume(),b=3;hd&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)u(this.el_,"vjs-vol-"+c);t(this.el_,"vjs-vol-"+b)},c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume(),b=a?"Unmute":"Mute";this.controlText()!==b&&this.controlText(b)},b}(Ef);jg.prototype.controlText_="Mute",Xd.registerComponent("MuteToggle",jg);var kg=function(a){function b(b,c){var d;return void 0===c&&(c={}),"undefined"!=typeof c.inline?c.inline=c.inline:c.inline=!0,("undefined"==typeof c.volumeControl||g(c.volumeControl))&&(c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline),d=a.call(this,b,c)||this,d.handleKeyPressHandler_=function(a){return d.handleKeyPress(a)},d.on(b,["loadstart"],function(a){return d.volumePanelState_(a)}),d.on(d.muteToggle,"keyup",function(a){return d.handleKeyPress(a)}),d.on(d.volumeControl,"keyup",function(a){return d.handleVolumeControlKeyUp(a)}),d.on("keydown",function(a){return d.handleKeyPress(a)}),d.on("mouseover",function(a){return d.handleMouseOver(a)}),d.on("mouseout",function(a){return d.handleMouseOut(a)}),d.on(d.volumeControl,["slideractive"],d.sliderActive_),d.on(d.volumeControl,["sliderinactive"],d.sliderInactive_),d}Zd(b,a);var c=b.prototype;return c.sliderActive_=function(){this.addClass("vjs-slider-active")},c.sliderInactive_=function(){this.removeClass("vjs-slider-active")},c.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},c.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},c.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},c.handleVolumeControlKeyUp=function(a){ee.isEventKey(a,"Esc")&&this.muteToggle.focus()},c.handleMouseOver=function(a){this.addClass("vjs-hover"),S(Dc,"keyup",this.handleKeyPressHandler_)},c.handleMouseOut=function(a){this.removeClass("vjs-hover"),T(Dc,"keyup",this.handleKeyPressHandler_)},c.handleKeyPress=function(a){ee.isEventKey(a,"Esc")&&this.handleMouseOut()},b}(Xd);kg.prototype.options_={children:["muteToggle","volumeControl"]},Xd.registerComponent("VolumePanel",kg);var lg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,c&&(d.menuButton_=c.menuButton),d.focusedChild_=-1,d.on("keydown",function(a){return d.handleKeyDown(a)}),d.boundHandleBlur_=function(a){return d.handleBlur(a)},d.boundHandleTapClick_=function(a){return d.handleTapClick(a)},d}Zd(b,a);var c=b.prototype;return c.addEventListenerForItem=function(a){a instanceof Xd&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))},c.removeEventListenerForItem=function(a){a instanceof Xd&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))},c.removeChild=function(b){"string"==typeof b&&(b=this.getChild(b)),this.removeEventListenerForItem(b),a.prototype.removeChild.call(this,b)},c.addItem=function(a){var b=this.addChild(a);b&&this.addEventListenerForItem(b)},c.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=p(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),S(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},c.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},c.handleBlur=function(a){var b=a.relatedTarget||Dc.activeElement;if(!this.children().some(function(a){return a.el()===b})){var c=this.menuButton_;c&&c.buttonPressed_&&b!==c.el().firstChild&&c.unpressButton()}},c.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();if(!Array.isArray(b))return;var c=b.filter(function(b){return b.el()===a.target})[0];if(!c)return;"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}},c.handleKeyDown=function(a){ee.isEventKey(a,"Left")||ee.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(ee.isEventKey(a,"Right")||ee.isEventKey(a,"Up"))&&(a.preventDefault(),a.stopPropagation(),this.stepBack())},c.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},c.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},c.focus=function(a){void 0===a&&(a=0);var b=this.children().slice(),c=b.length&&b[0].hasClass("vjs-menu-title");c&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},b}(Xd);Xd.registerComponent("Menu",lg);var mg=function(a){function b(b,c){var d;void 0===c&&(c={}),d=a.call(this,b,c)||this,d.menuButton_=new Ef(b,c),d.menuButton_.controlText(d.controlText_),d.menuButton_.el_.setAttribute("aria-haspopup","true");var e=Ef.prototype.buildCSSClass();d.menuButton_.el_.className=d.buildCSSClass()+" "+e,d.menuButton_.removeClass("vjs-control"),d.addChild(d.menuButton_),d.update(),d.enabled_=!0;var f=function(a){return d.handleClick(a)};return d.handleMenuKeyUp_=function(a){return d.handleMenuKeyUp(a)},d.on(d.menuButton_,"tap",f),d.on(d.menuButton_,"click",f),d.on(d.menuButton_,"keydown",function(a){return d.handleKeyDown(a)}),d.on(d.menuButton_,"mouseenter",function(){d.addClass("vjs-hover"),d.menu.show(),S(Dc,"keyup",d.handleMenuKeyUp_)}),d.on("mouseleave",function(a){return d.handleMouseLeave(a)}),d.on("keydown",function(a){return d.handleSubmenuKeyDown(a)}),d}Zd(b,a);var c=b.prototype;return c.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},c.createMenu=function(){var a=new lg(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=p("li",{className:"vjs-menu-title",textContent:Rd(this.options_.title),tabIndex:-1}),c=new Xd(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(var d=0;d<this.items.length;d++)a.addItem(this.items[d]);return a},c.createItems=function(){},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},c.buildWrapperCSSClass=function(){var b="vjs-menu-button";b+=this.options_.inline===!0?"-inline":"-popup";var c=Ef.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)},c.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},c.controlText=function(a,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(a,b)},c.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},c.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()},c.handleMouseLeave=function(a){this.removeClass("vjs-hover"),T(Dc,"keyup",this.handleMenuKeyUp_)},c.focus=function(){this.menuButton_.focus()},c.blur=function(){this.menuButton_.blur()},c.handleKeyDown=function(a){ee.isEventKey(a,"Esc")||ee.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),ee.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):(ee.isEventKey(a,"Up")||ee.isEventKey(a,"Down"))&&(this.buttonPressed_||(a.preventDefault(),this.pressButton()))},c.handleMenuKeyUp=function(a){(ee.isEventKey(a,"Esc")||ee.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")},c.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)},c.handleSubmenuKeyDown=function(a){(ee.isEventKey(a,"Esc")||ee.isEventKey(a,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ee.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus()))},c.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),hd&&n())return;this.menu.focus()}},c.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},c.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},c.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},b}(Xd);Xd.registerComponent("MenuButton",mg);var ng=function(a){function b(b,c){var d,e=c.tracks;if(d=a.call(this,b,c)||this,d.items.length<=1&&d.hide(),!e)return Yd(d);var f=Ad(Yd(d),d.update);return e.addEventListener("removetrack",f),e.addEventListener("addtrack",f),e.addEventListener("labelchange",f),d.player_.on("ready",f),d.player_.on("dispose",function(){e.removeEventListener("removetrack",f),e.removeEventListener("addtrack",f),e.removeEventListener("labelchange",f)}),d}return Zd(b,a),b}(mg);Xd.registerComponent("TrackButton",ng);var og=["Tab","Esc","Up","Down","Right","Left"],pg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.selectable=c.selectable,d.isSelected_=c.selected||!1,d.multiSelectable=c.multiSelectable,d.selected(d.isSelected_),d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role","menuitem"),d}Zd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){this.nonIconControl=!0;var f=a.prototype.createEl.call(this,"li",e({className:"vjs-menu-item",tabIndex:-1},c),d);return f.replaceChild(p("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),f.querySelector(".vjs-icon-placeholder")),f},c.handleKeyDown=function(b){og.some(function(a){return ee.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){this.selected(!0)},c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},b}(xf);Xd.registerComponent("MenuItem",pg);var qg=function(a){function b(b,c){var d,e=c.track,f=b.textTracks();c.label=e.label||e.language||"Unknown",c.selected="showing"===e.mode,d=a.call(this,b,c)||this,d.track=e,d.kinds=(c.kinds||[c.kind||d.track.kind]).filter(Boolean);var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply(Yd(d),b)},h=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleSelectedLanguageChange.apply(Yd(d),b)};if(b.on(["loadstart","texttrackchange"],g),f.addEventListener("change",g),f.addEventListener("selectedlanguagechange",h),d.on("dispose",function(){b.off(["loadstart","texttrackchange"],g),f.removeEventListener("change",g),f.removeEventListener("selectedlanguagechange",h)}),void 0===f.onchange){var i;d.on(["tap","click"],function(){if("object"!=typeof uc.Event)try{i=new uc.Event("change")}catch(a){}i||(i=Dc.createEvent("Event"),i.initEvent("change",!0,!0)),f.dispatchEvent(i)})}return d.handleTracksChange(),d}Zd(b,a);var c=b.prototype;return c.handleClick=function(b){var c=this.track,d=this.player_.textTracks();if(a.prototype.handleClick.call(this,b),d)for(var e=0;e<d.length;e++){var f=d[e];this.kinds.indexOf(f.kind)!==-1&&(f===c?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},c.handleTracksChange=function(a){var b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)},c.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},c.dispose=function(){this.track=null,a.prototype.dispose.call(this)},b}(pg);Xd.registerComponent("TextTrackMenuItem",qg);var rg=function(a){function b(b,c){return c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"},c.kinds||(c.kinds=[c.kind]),c.label?c.track.label=c.label:c.track.label=c.kinds.join(" and ")+" off",c.selectable=!0,c.multiSelectable=!1,a.call(this,b,c)||this}Zd(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)},c.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(qg);Xd.registerComponent("OffTextTrackMenuItem",rg);var sg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.textTracks(),a.call(this,b,c)||this}Zd(b,a);var c=b.prototype;return c.createItems=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=qg);var c;this.label_&&(c=this.label_+" off"),a.push(new rg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(this.kinds_.indexOf(f.kind)>-1){var g=new b(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(ng);Xd.registerComponent("TextTrackButton",sg);var tg=function(a){function b(b,c){var d,e=c.track,f=c.cue,g=b.currentTime();return c.selectable=!0,c.multiSelectable=!1,c.label=f.text,c.selected=f.startTime<=g&&g<f.endTime,d=a.call(this,b,c)||this,d.track=e,d.cue=f,e.addEventListener("cuechange",Ad(Yd(d),d.update)),d}Zd(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},c.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(pg);Xd.registerComponent("ChaptersTrackMenuItem",tg);var ug=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},c.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;b>=0;b--){var c=a[b];if(c.kind===this.kind_)return c}},c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Rd(this.kind_))},c.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new tg(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(sg);ug.prototype.kind_="chapters",ug.prototype.controlText_="Chapters",Xd.registerComponent("ChaptersButton",ug);var vg=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=b.textTracks(),g=Ad(Yd(e),e.handleTracksChange);return f.addEventListener("change",g),e.on("dispose",function(){f.removeEventListener("change",g)}),e}Zd(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},c.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(sg);vg.prototype.kind_="descriptions",vg.prototype.controlText_="Descriptions",Xd.registerComponent("DescriptionsButton",vg);var wg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(sg);wg.prototype.kind_="subtitles",wg.prototype.controlText_="Subtitles",Xd.registerComponent("SubtitlesButton",wg);var xg=function(a){function b(b,c){var d;return c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",d=a.call(this,b,c)||this,d.addClass("vjs-texttrack-settings"),d.controlText(", opens "+c.kind+" settings dialog"),d}Zd(b,a);var c=b.prototype;return c.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(qg);Xd.registerComponent("CaptionSettingsMenuItem",xg);var yg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new xg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(sg);yg.prototype.kind_="captions",yg.prototype.controlText_="Captions",Xd.registerComponent("CaptionsButton",yg);var zg=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(f.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(p("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),e},b}(qg);Xd.registerComponent("SubsCapsMenuItem",zg);var Ag=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,d.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(d.player_.language_)>-1&&(d.label_="captions"),d.menuButton_.controlText(Rd(d.label_)),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new xg(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,zg)},b}(sg);Ag.prototype.kinds_=["captions","subtitles"],Ag.prototype.controlText_="Subtitles",Xd.registerComponent("SubsCapsButton",Ag);var Bg=function(a){function b(b,c){var d,e=c.track,f=b.audioTracks();c.label=e.label||e.language||"Unknown",c.selected=e.enabled,d=a.call(this,b,c)||this,d.track=e,d.addClass("vjs-"+e.kind+"-menu-item");var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply(Yd(d),b)};return f.addEventListener("change",g),d.on("dispose",function(){f.removeEventListener("change",g)}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(f.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),e},c.handleClick=function(b){a.prototype.handleClick.call(this,b),this.track.enabled=!0},c.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(pg);Xd.registerComponent("AudioTrackMenuItem",Bg);var Cg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.audioTracks(),a.call(this,b,c)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(a){void 0===a&&(a=[]),this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new Bg(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a},b}(ng);Cg.prototype.controlText_="Audio Track",Xd.registerComponent("AudioTrackButton",Cg);var Dg=function(a){function b(b,c){var d,e=c.rate,f=parseFloat(e,10);return c.label=e,c.selected=f===b.playbackRate(),c.selectable=!0,c.multiSelectable=!1,d=a.call(this,b,c)||this,d.label=e,d.rate=f,d.on(b,"ratechange",function(a){return d.update(a)}),d}Zd(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},c.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(pg);Dg.prototype.contentElType="button",Xd.registerComponent("PlaybackRateMenuItem",Dg);var Eg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.menuButton_.el_.setAttribute("aria-describedby",d.labelElId_),d.updateVisibility(),d.updateLabel(),d.on(b,"loadstart",function(a){return d.updateVisibility(a)}),d.on(b,"ratechange",function(a){return d.updateLabel(a)}),d.on(b,"playbackrateschange",function(a){return d.handlePlaybackRateschange(a)}),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=p("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),b.appendChild(this.labelEl_),b},c.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){for(var a=this.playbackRates(),b=[],c=a.length-1;c>=0;c--)b.push(new Dg(this.player(),{rate:a[c]+"x"}));return b},c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},c.handleClick=function(a){for(var b=this.player().playbackRate(),c=this.playbackRates(),d=c[0],e=0;e<c.length;e++)if(c[e]>b){d=c[e];break}this.player().playbackRate(d)},c.handlePlaybackRateschange=function(a){this.update()},c.playbackRates=function(){var a=this.player();return a.playbackRates&&a.playbackRates()||[]},c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},b}(mg);Eg.prototype.controlText_="Playback Rate",Xd.registerComponent("PlaybackRateMenuButton",Eg);var Fg=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(b,c,d){return void 0===b&&(b="div"),void 0===c&&(c={}),void 0===d&&(d={}),c.className||(c.className=this.buildCSSClass()),a.prototype.createEl.call(this,b,c,d)},b}(Xd);Xd.registerComponent("Spacer",Fg);var Gg=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"Â "})},b}(Fg);Xd.registerComponent("CustomControlSpacer",Gg);var Hg=function(a){function b(){return a.apply(this,arguments)||this}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},b}(Xd);Hg.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Dc&&Hg.prototype.options_.children.splice(Hg.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Xd.registerComponent("ControlBar",Hg);var Ig=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"error",function(a){return d.open(a)}),d}Zd(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},c.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(ge);Ig.prototype.options_=Oc({},ge.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Xd.registerComponent("ErrorDisplay",Ig);var Jg="vjs-text-track-settings",Kg=["#000","Black"],Lg=["#00F","Blue"],Mg=["#0FF","Cyan"],Ng=["#0F0","Green"],Og=["#F0F","Magenta"],Pg=["#F00","Red"],Qg=["#FFF","White"],Rg=["#FF0","Yellow"],Sg=["1","Opaque"],Tg=["0.5","Semi-Transparent"],Ug=["0","Transparent"],Vg={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Kg,Qg,Pg,Ng,Lg,Rg,Og,Mg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Sg,Tg,Ug]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Qg,Kg,Pg,Ng,Lg,Rg,Og,Mg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Sg,Tg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",
id:"captions-window-opacity-%s",label:"Transparency",options:[Ug,Tg,Sg]}};Vg.windowColor.options=Vg.backgroundColor.options;var Wg=function(a){function b(b,d){var e;return d.temporary=!1,e=a.call(this,b,d)||this,e.updateDisplay=e.updateDisplay.bind(Yd(e)),e.fill(),e.hasBeenOpened_=e.hasBeenFilled_=!0,e.endDialog=p("p",{className:"vjs-control-text",textContent:e.localize("End of dialog window.")}),e.el().appendChild(e.endDialog),e.setDefaults(),void 0===d.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings),e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings(),e.close()}),e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults(),e.updateDisplay()}),c(Vg,function(a){e.on(e.$(a.selector),"change",e.updateDisplay)}),e.options_.persistTextTrackSettings&&e.restoreSettings(),e}Zd(b,a);var e=b.prototype;return e.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},e.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c="label");var e=Vg[a],f=e.id.replace("%s",this.id_),g=[b,f].join(" ").trim();return["<"+c+' id="'+f+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(e.label),"</"+c+">",'<select aria-labelledby="'+g+'">'].concat(e.options.map(function(a){var b=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},e.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},e.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},e.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},e.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.createElControls_=function(){var a=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.label=function(){return this.localize("Caption Settings Dialog")},e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.getValues=function(){var a=this;return d(Vg,function(b,c,d){var e=db(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},e.setValues=function(a){var b=this;c(Vg,function(c,d){eb(b.$(c.selector),a[d],c.parser)})},e.setDefaults=function(){var a=this;c(Vg,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})},e.restoreSettings=function(){var a;try{a=JSON.parse(uc.localStorage.getItem(Jg))}catch(b){Mc.warn(b)}a&&this.setValues(a)},e.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?uc.localStorage.setItem(Jg,JSON.stringify(a)):uc.localStorage.removeItem(Jg)}catch(b){Mc.warn(b)}}},e.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},e.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(ge);Xd.registerComponent("TextTrackSettings",Wg);var Xg=function(a){function b(b,c){var d,e=c.ResizeObserver||uc.ResizeObserver;null===c.ResizeObserver&&(e=!1);var f=Z({createEl:!e,reportTouchActivity:!1},c);return d=a.call(this,b,f)||this,d.ResizeObserver=c.ResizeObserver||uc.ResizeObserver,d.loadListener_=null,d.resizeObserver_=null,d.debouncedHandler_=Cd(function(){d.resizeHandler()},100,!1,Yd(d)),e?(d.resizeObserver_=new d.ResizeObserver(d.debouncedHandler_),d.resizeObserver_.observe(b.el())):(d.loadListener_=function(){if(d.el_&&d.el_.contentWindow){var a=d.debouncedHandler_,b=d.unloadListener_=function(){T(this,"resize",a),T(this,"unload",b),b=null};S(d.el_.contentWindow,"unload",b),S(d.el_.contentWindow,"resize",a)}},d.one("load",d.loadListener_)),d}Zd(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},c.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},c.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},b}(Xd);Xd.registerComponent("ResizeManager",Xg);var Yg={trackingThreshold:30,liveTolerance:15},Zg=function(a){function b(b,c){var d,e=Z(Yg,c,{createEl:!1});return d=a.call(this,b,e)||this,d.handleVisibilityChange_=function(a){return d.handleVisibilityChange(a)},d.trackLiveHandler_=function(){return d.trackLive_()},d.handlePlay_=function(a){return d.handlePlay(a)},d.handleFirstTimeupdate_=function(a){return d.handleFirstTimeupdate(a)},d.handleSeeked_=function(a){return d.handleSeeked(a)},d.seekToLiveEdge_=function(a){return d.seekToLiveEdge(a)},d.reset_(),d.on(d.player_,"durationchange",function(a){return d.handleDurationchange(a)}),d.one(d.player_,"canplay",function(){return d.toggleTracking()}),bd&&"hidden"in Dc&&"visibilityState"in Dc&&d.on(Dc,"visibilitychange",d.handleVisibilityChange_),d}Zd(b,a);var c=b.prototype;return c.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Dc.hidden?this.stopTracking():this.startTracking())},c.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){var b=Number(uc.performance.now().toFixed(4)),c=this.lastTime_===-1?0:(b-this.lastTime_)/1e3;this.lastTime_=b,this.pastSeekEnd_=this.pastSeekEnd()+c;var d=this.liveCurrentTime(),e=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(d-e)>this.options_.liveTolerance;this.timeupdateSeen_&&d!==1/0||(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},c.handleDurationchange=function(){this.toggleTracking()},c.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},c.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,zd),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},c.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},c.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&a>2,this.nextSeekedFromUser_=!1,this.trackLive_()},c.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},c.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},c.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},c.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},c.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0},c.seekableStart=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0},c.liveWindow=function(){var a=this.liveCurrentTime();return a===1/0?0:a-this.seekableStart()},c.isLive=function(){return this.isTracking()},c.atLiveEdge=function(){return!this.behindLiveEdge()},c.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},c.pastSeekEnd=function(){var a=this.seekableEnd();return this.lastSeekEnd_!==-1&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_},c.behindLiveEdge=function(){return this.behindLiveEdge_},c.isTracking=function(){return"number"==typeof this.trackingInterval_},c.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},c.dispose=function(){this.off(Dc,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},b}(Xd);Xd.registerComponent("LiveTracker",Zg);var $g=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;var c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var g=c[f].src;g&&d.indexOf(g)===-1&&d.push(g)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)},_g=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=Dc.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(var c=Dc.createDocumentFragment();b.childNodes.length;)c.appendChild(b.childNodes[0]);return this.innerText="",uc.Element.prototype.appendChild.call(this,c),this.innerHTML}}),ah=function(a,b){for(var c={},d=0;d<a.length&&(c=Object.getOwnPropertyDescriptor(a[d],b),!(c&&c.set&&c.get));d++);return c.enumerable=!0,c.configurable=!0,c},bh=function(a){return ah([a.el(),uc.HTMLMediaElement.prototype,uc.Element.prototype,_g],"innerHTML")},ch=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=bh(a),e=function(c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=c.apply(b,e);return $g(a),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",Z(d,{set:e(d.set)})),b.resetSourceWatch_=function(){b.resetSourceWatch_=null,Object.keys(c).forEach(function(a){b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)}},dh=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?we(uc.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){return uc.Element.prototype.setAttribute.call(this,"src",a),a}}),eh=function(a){return ah([a.el(),uc.HTMLMediaElement.prototype,dh],"src")},fh=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=eh(a),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",Z(c,{set:function(d){var e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=function(c,e){var f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=function(){var c=e.call(b);return $g(a)||(a.triggerSourceset(""),ch(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):$g(a)||ch(a),b.resetSourceset_=function(){b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}}}},gh=function(a,b,c,d){void 0===d&&(d=!0);var e=function(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})},f={configurable:!0,enumerable:!0,get:function(){var a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)},hh=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=b.source,f=!1;if(e&&(d.el_.currentSrc!==e.src||b.tag&&3===b.tag.initNetworkState_)?d.setSource(e):d.handleLateInit_(d.el_),b.enableSourceset&&d.setupSourcesetHandling_(),d.isScrubbing_=!1,d.el_.hasChildNodes()){for(var g=d.el_.childNodes,h=g.length,i=[];h--;){var j=g[h],k=j.nodeName.toLowerCase();"track"===k&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(j),d.remoteTextTracks().addTrack(j.track),d.textTracks().addTrack(j.track),f||d.el_.hasAttribute("crossorigin")||!ye(j.src)||(f=!0)):i.push(j))}for(var l=0;l<i.length;l++)d.el_.removeChild(i[l])}return d.proxyNativeTracks_(),d.featuresNativeTextTracks&&f&&Mc.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),d.restoreMetadataTracksInIOSNativePlayer_(),(ed||gd||Yc)&&b.nativeControlsForTouch===!0&&d.setControls(!0),d.proxyWebkitFullscreen_(),d.triggerReady(),d}Zd(b,a);var c=b.prototype;return c.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),b.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},c.setupSourcesetHandling_=function(){fh(this)},c.restoreMetadataTracksInIOSNativePlayer_=function(){var a,b=this.textTracks(),c=function(){a=[];for(var c=0;c<b.length;c++){var d=b[c];"metadata"===d.kind&&a.push({track:d,storedMode:d.mode})}};c(),b.addEventListener("change",c),this.on("dispose",function(){return b.removeEventListener("change",c)});var d=function e(){for(var c=0;c<a.length;c++){var d=a[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}b.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",c),b.removeEventListener("change",d),b.addEventListener("change",d)}),this.on("webkitendfullscreen",function(){b.removeEventListener("change",c),b.addEventListener("change",c),b.removeEventListener("change",d)})},c.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){var b=c.el()[d+"Tracks"];b.removeEventListener(a,c[d+"TracksListeners_"][a])}),this["featuresNative"+a+"Tracks"]=!b,this[d+"TracksListeners_"]=null,this.proxyNativeTracksForType_(d)}},c.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)},c.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)},c.proxyNativeTracksForType_=function(a){var b=this,c=Re[a],d=this.el()[c.getterName],e=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(c){var d={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(d),"text"===a&&b[Se.remoteText.getterName]().trigger(d)},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(a){var c=f[a];d.addEventListener(a,c),b.on("dispose",function(b){return d.removeEventListener(a,c)})}),this.on("loadstart",g),this.on("dispose",function(a){return b.off("loadstart",g)})}},c.proxyNativeTracks_=function(){var a=this;Re.names.forEach(function(b){a.proxyNativeTracksForType_(b)})},c.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=Dc.createElement("video");var d=this.options_.tag&&x(this.options_.tag),f=Z({},d);ed&&this.options_.nativeControlsForTouch===!0||delete f.controls,w(a,e(f,{id:this.options_.techId,"class":"vjs-tech"}))}a.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&z(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var g=["loop","muted","playsinline","autoplay"],h=0;h<g.length;h++){var i=g[h],j=this.options_[i];"undefined"!=typeof j&&(j?z(a,i,i):A(a,i),a[i]=j)}return a},c.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),a.readyState>=2&&e.push("loadeddata"),a.readyState>=3&&e.push("canplay"),a.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},c.setScrubbing=function(a){this.isScrubbing_=a},c.scrubbing=function(){return this.isScrubbing_},c.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&id?this.el_.fastSeek(a):this.el_.currentTime=a}catch(b){Mc(b,"Video is not ready. (Video.js)")}},c.duration=function(){var a=this;if(this.el_.duration===1/0&&Wc&&_c&&0===this.el_.currentTime){var b=function c(){a.el_.currentTime>0&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",c))};return this.on("timeupdate",b),NaN}return this.el_.duration||NaN},c.width=function(){return this.el_.offsetWidth},c.height=function(){return this.el_.offsetHeight},c.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},c.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=uc.navigator&&uc.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},c.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)ia(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},0);else try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},c.exitFullScreen=function(){return this.el_.webkitDisplayingFullscreen?void this.el_.webkitExitFullScreen():void this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},c.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},c.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},c.reset=function(){b.resetMediaElement(this.el_)},c.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},c.setControls=function(a){this.el_.controls=!!a},c.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},c.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=Dc.createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b["default"]&&(c["default"]=b["default"]),b.id&&(c.id=b.id),b.src&&(c.src=b.src),c},c.addRemoteTextTrack=function(b,c){var d=a.prototype.addRemoteTextTrack.call(this,b,c);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},c.removeRemoteTextTrack=function(b){if(a.prototype.removeRemoteTextTrack.call(this,b),this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&b!==c[d].track||this.el().removeChild(c[d])},c.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),uc.performance&&"function"==typeof uc.performance.now?a.creationTime=uc.performance.now():uc.performance&&uc.performance.timing&&"number"==typeof uc.performance.timing.navigationStart&&(a.creationTime=uc.Date.now()-uc.performance.timing.navigationStart),a},b}(lf);gh(hh,"TEST_VID",function(){if(l()){var a=Dc.createElement("video"),b=Dc.createElement("track");return b.kind="captions",b.srclang="en",b.label="English",a.appendChild(b),a}}),hh.isSupported=function(){try{hh.TEST_VID.volume=.5}catch(a){return!1}return!(!hh.TEST_VID||!hh.TEST_VID.canPlayType)},hh.canPlayType=function(a){return hh.TEST_VID.canPlayType(a)},hh.canPlaySource=function(a,b){return hh.canPlayType(a.type)},hh.canControlVolume=function(){try{var a=hh.TEST_VID.volume;return hh.TEST_VID.volume=a/2+.1,a!==hh.TEST_VID.volume}catch(b){return!1}},hh.canMuteVolume=function(){try{var a=hh.TEST_VID.muted;return hh.TEST_VID.muted=!a,hh.TEST_VID.muted?z(hh.TEST_VID,"muted","muted"):A(hh.TEST_VID,"muted","muted"),a!==hh.TEST_VID.muted}catch(b){return!1}},hh.canControlPlaybackRate=function(){if(Wc&&_c&&ad<58)return!1;try{var a=hh.TEST_VID.playbackRate;return hh.TEST_VID.playbackRate=a/2+.1,a!==hh.TEST_VID.playbackRate}catch(b){return!1}},hh.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Dc.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(Dc.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(Dc.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(Dc.createElement("audio"),"innerHTML",{get:a,set:a})}catch(b){return!1}return!0},hh.supportsNativeTextTracks=function(){return id||hd&&_c},hh.supportsNativeVideoTracks=function(){return!(!hh.TEST_VID||!hh.TEST_VID.videoTracks)},hh.supportsNativeAudioTracks=function(){return!(!hh.TEST_VID||!hh.TEST_VID.audioTracks)},hh.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[0],c=a[1];gh(hh.prototype,b,function(){return hh[c]()},!0)}),hh.prototype.movingMediaElementInDOM=!hd,hh.prototype.featuresFullscreenResize=!0,hh.prototype.featuresProgressEvents=!0,hh.prototype.featuresTimeupdateEvents=!0;var ih;hh.patchCanPlayType=function(){Xc>=4&&!Zc&&!_c&&(ih=hh.TEST_VID&&hh.TEST_VID.constructor.prototype.canPlayType,hh.TEST_VID.constructor.prototype.canPlayType=function(a){var b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&b.test(a)?"maybe":ih.call(this,a)})},hh.unpatchCanPlayType=function(){var a=hh.TEST_VID.constructor.prototype.canPlayType;return ih&&(hh.TEST_VID.constructor.prototype.canPlayType=ih),a},hh.patchCanPlayType(),hh.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},hh.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){hh.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){hh.prototype["set"+Rd(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){hh.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){hh.prototype["set"+Rd(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){hh.prototype[a]=function(){return this.el_[a]()}}),lf.withSourceHandlers(hh),hh.nativeSourceHandler={},hh.nativeSourceHandler.canPlayType=function(a){try{return hh.TEST_VID.canPlayType(a)}catch(b){return""}},hh.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return hh.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=xe(a.src);return hh.nativeSourceHandler.canPlayType("video/"+c)}return""},hh.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},hh.nativeSourceHandler.dispose=function(){},hh.registerSourceHandler(hh.nativeSourceHandler),lf.registerTech("Html5",hh);var jh=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],kh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},lh=["tiny","xsmall","small","medium","large","xlarge","huge"],mh={};lh.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;mh[a]="vjs-layout-"+b});var nh={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},oh=function(a){function b(c,d,f){var g;if(c.id=c.id||d.id||"vjs_video_"+O(),d=e(b.getTagSettings(c),d),d.initChildren=!1,d.createEl=!1,d.evented=!1,d.reportTouchActivity=!1,!d.language)if("function"==typeof c.closest){var h=c.closest("[lang]");h&&h.getAttribute&&(d.language=h.getAttribute("lang"))}else for(var i=c;i&&1===i.nodeType;){if(x(i).hasOwnProperty("lang")){d.language=i.getAttribute("lang");break}i=i.parentNode}if(g=a.call(this,null,d,f)||this,g.boundDocumentFullscreenChange_=function(a){return g.documentFullscreenChange_(a)},g.boundFullWindowOnEscKey_=function(a){return g.fullWindowOnEscKey(a)},g.boundUpdateStyleEl_=function(a){return g.updateStyleEl_(a)},g.boundApplyInitTime_=function(a){return g.applyInitTime_(a)},g.boundUpdateCurrentBreakpoint_=function(a){return g.updateCurrentBreakpoint_(a)},g.boundHandleTechClick_=function(a){return g.handleTechClick_(a)},g.boundHandleTechDoubleClick_=function(a){return g.handleTechDoubleClick_(a)},g.boundHandleTechTouchStart_=function(a){return g.handleTechTouchStart_(a)},g.boundHandleTechTouchMove_=function(a){return g.handleTechTouchMove_(a)},g.boundHandleTechTouchEnd_=function(a){return g.handleTechTouchEnd_(a)},g.boundHandleTechTap_=function(a){return g.handleTechTap_(a)},g.isFullscreen_=!1,g.log=Nc(g.id_),g.fsApi_=Ec,g.isPosterFromTech_=!1,g.queuedCallbacks_=[],g.isReady_=!1,g.hasStarted_=!1,g.userActive_=!1,g.debugEnabled_=!1,!g.options_||!g.options_.techOrder||!g.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(g.tag=c,g.tagAttributes=c&&x(c),g.language(g.options_.language),d.languages){var j={};Object.getOwnPropertyNames(d.languages).forEach(function(a){j[a.toLowerCase()]=d.languages[a]}),g.languages_=j}else g.languages_=b.prototype.options_.languages;g.resetCache_(),g.poster_=d.poster||"",g.controls_=!!d.controls,c.controls=!1,c.removeAttribute("controls"),g.changingSrc_=!1,g.playCallbacks_=[],g.playTerminatedQueue_=[],c.hasAttribute("autoplay")?g.autoplay(!0):g.autoplay(g.options_.autoplay),d.plugins&&Object.keys(d.plugins).forEach(function(a){if("function"!=typeof g[a])throw new Error('plugin "'+a+'" does not exist')}),g.scrubbing_=!1,g.el_=g.createEl(),X(Yd(g),{eventBusKey:"el_"}),g.fsApi_.requestFullscreen&&(S(Dc,g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_),g.on(g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_)),g.fluid_&&g.on(["playerreset","resize"],g.boundUpdateStyleEl_);var k=Z(g.options_);d.plugins&&Object.keys(d.plugins).forEach(function(a){g[a](d.plugins[a])}),d.debug&&g.debug(!0),g.options_.playerOptions=k,g.middleware_=[],g.playbackRates(d.playbackRates),g.initChildren(),g.isAudio("audio"===c.nodeName.toLowerCase()),g.controls()?g.addClass("vjs-controls-enabled"):g.addClass("vjs-controls-disabled"),g.el_.setAttribute("role","region"),g.isAudio()?g.el_.setAttribute("aria-label",g.localize("Audio Player")):g.el_.setAttribute("aria-label",g.localize("Video Player")),g.isAudio()&&g.addClass("vjs-audio"),g.flexNotSupported_()&&g.addClass("vjs-no-flex"),ed&&g.addClass("vjs-touch-enabled"),hd||g.addClass("vjs-workinghover"),b.players[g.id_]=Yd(g);var l=rc.split(".")[0];return g.addClass("vjs-v"+l),g.userActive(!0),g.reportUserActivity(),g.one("play",function(a){return g.listenForUserActivity_(a)}),g.on("stageclick",function(a){return g.handleStageClick_(a)}),g.on("keydown",function(a){return g.handleKeyDown(a)}),g.on("languagechange",function(a){return g.handleLanguagechange(a)}),g.breakpoints(g.options_.breakpoints),g.responsive(g.options_.responsive),g}Zd(b,a);var c=b.prototype;return c.dispose=function(){var c=this;this.trigger("dispose"),this.off("dispose"),T(Dc,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),T(Dc,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Va(this),Te.names.forEach(function(a){var b=Te[a],d=c[b.getterName]();d&&d.off&&d.off()}),a.prototype.dispose.call(this)},c.createEl=function(){var b,c=this.tag,d=this.playerElIngest_=c.parentNode&&c.parentNode.hasAttribute&&c.parentNode.hasAttribute("data-vjs-player"),e="video-js"===this.tag.tagName.toLowerCase();d?b=this.el_=c.parentNode:e||(b=this.el_=a.prototype.createEl.call(this,"div"));
var f=x(c);if(e){for(b=this.el_=c,c=this.tag=Dc.createElement("video");b.children.length;)c.appendChild(b.firstChild);s(b,"video-js")||t(b,"video-js"),b.appendChild(c),d=this.playerElIngest_=b,Object.keys(b).forEach(function(a){try{c[a]=b[a]}catch(d){}})}if(c.setAttribute("tabindex","-1"),f.tabindex="-1",(bd||_c&&dd)&&(c.setAttribute("role","application"),f.role="application"),c.removeAttribute("width"),c.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(a){e&&"class"===a||b.setAttribute(a,f[a]),e&&c.setAttribute(a,f[a])}),c.playerId=c.id,c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),uc.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=qd("vjs-styles-dimensions");var g=kd(".vjs-styles-defaults"),h=kd("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var i=c.getElementsByTagName("a"),j=0;j<i.length;j++){var k=i.item(j);t(k,"vjs-hidden"),k.setAttribute("hidden","hidden")}return c.initNetworkState_=c.networkState,c.parentNode&&!d&&c.parentNode.insertBefore(b,c),r(c,b),this.children_.unshift(c),this.el_.setAttribute("lang",this.language_),this.el_=b,b},c.crossOrigin=function(a){return a?"anonymous"!==a&&"use-credentials"!==a?void Mc.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):void this.techCall_("setCrossOrigin",a):this.techGet_("crossOrigin")},c.width=function(a){return this.dimension("width",a)},c.height=function(a){return this.dimension("height",a)},c.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)return this[c]=void 0,void this.updateStyleEl_();var d=parseFloat(b);return isNaN(d)?void Mc.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,void this.updateStyleEl_())},c.fluid=function(a){var b=this;return void 0===a?!!this.fluid_:(this.fluid_=!!a,Gd(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),a?(this.addClass("vjs-fluid"),this.fill(!1),Hd(this,function(){b.on(["playerreset","resize"],b.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},c.fill=function(a){return void 0===a?!!this.fill_:(this.fill_=!!a,void(a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},c.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},c.updateStyleEl_=function(){if(uc.VIDEOJS_NO_DYNAMIC_STYLE===!0){var a="number"==typeof this.width_?this.width_:this.options_.width,b="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();return void(c&&(a>=0&&(c.width=a),b>=0&&(c.height=b)))}var d,e,f,g;f=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var h=f.split(":"),i=h[1]/h[0];d=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:d*i,g=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(g),rd(this.styleEl_,"\n      ."+g+" {\n        width: "+d+"px;\n        height: "+e+"px;\n      }\n\n      ."+g+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")},c.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=Rd(a),f=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(lf.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var g=this.autoplay();("string"==typeof this.autoplay()||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(g=!1);var h={source:b,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+f+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Te.names.forEach(function(a){var b=Te[a];h[b.getterName]=c[b.privateName]}),e(h,this.options_[d]),e(h,this.options_[f]),e(h,this.options_[a.toLowerCase()]),this.tag&&(h.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);var i=lf.getTech(a);if(!i)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new i(h),this.tech_.ready(Ad(this,this.handleTechReady_),!0),de.jsonToTextTracks(this.textTracksJson_||[],this.tech_),jh.forEach(function(a){c.on(c.tech_,a,function(b){return c["handleTech"+Rd(a)+"_"](b)})}),Object.keys(kh).forEach(function(a){c.on(c.tech_,a,function(b){return 0===c.tech_.playbackRate()&&c.tech_.seeking()?void c.queuedCallbacks_.push({callback:c["handleTech"+kh[a]+"_"].bind(c),event:b}):void c["handleTech"+kh[a]+"_"](b)})}),this.on(this.tech_,"loadstart",function(a){return c.handleTechLoadStart_(a)}),this.on(this.tech_,"sourceset",function(a){return c.handleTechSourceset_(a)}),this.on(this.tech_,"waiting",function(a){return c.handleTechWaiting_(a)}),this.on(this.tech_,"ended",function(a){return c.handleTechEnded_(a)}),this.on(this.tech_,"seeking",function(a){return c.handleTechSeeking_(a)}),this.on(this.tech_,"play",function(a){return c.handleTechPlay_(a)}),this.on(this.tech_,"firstplay",function(a){return c.handleTechFirstPlay_(a)}),this.on(this.tech_,"pause",function(a){return c.handleTechPause_(a)}),this.on(this.tech_,"durationchange",function(a){return c.handleTechDurationChange_(a)}),this.on(this.tech_,"fullscreenchange",function(a,b){return c.handleTechFullscreenChange_(a,b)}),this.on(this.tech_,"fullscreenerror",function(a,b){return c.handleTechFullscreenError_(a,b)}),this.on(this.tech_,"enterpictureinpicture",function(a){return c.handleTechEnterPictureInPicture_(a)}),this.on(this.tech_,"leavepictureinpicture",function(a){return c.handleTechLeavePictureInPicture_(a)}),this.on(this.tech_,"error",function(a){return c.handleTechError_(a)}),this.on(this.tech_,"posterchange",function(a){return c.handleTechPosterChange_(a)}),this.on(this.tech_,"textdata",function(a){return c.handleTechTextData_(a)}),this.on(this.tech_,"ratechange",function(a){return c.handleTechRateChange_(a)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||r(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},c.unloadTech_=function(){var a=this;Te.names.forEach(function(b){var c=Te[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=de.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},c.tech=function(a){return void 0===a&&Mc.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},c.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},c.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},c.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},c.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},c.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"==typeof a){var c,d=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(ha(d))return d["catch"](function(a){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(a?a:""))})};if("any"!==a||this.muted()?c="muted"!==a||this.muted()?this.play():d():(c=this.play(),ha(c)&&(c=c["catch"](d))),ha(c))return c.then(function(){b.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(){b.trigger({type:"autoplay-failure",autoplay:a})})}},c.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=uf(this,b)),this.cache_.source=Z({},a,{src:b,type:c});for(var d=this.cache_.sources.filter(function(a){return a.src&&a.src===b}),e=[],f=this.$$("source"),g=[],h=0;h<f.length;h++){var i=x(f[h]);e.push(i),i.src&&i.src===b&&g.push(i.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b},c.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){}),c(e),a.src||this.tech_.any(["sourceset","loadstart"],function(a){if("sourceset"!==a.type){var c=b.techGet("currentSrc");b.lastSource_.tech=c,b.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})},c.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},c.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},c.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},c.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting");var b=this.currentTime(),c=function d(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",d))};this.on("timeupdate",c)},c.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},c.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},c.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},c.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},c.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},c.handleTechFirstPlay_=function(){this.options_.starttime&&(Mc.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},c.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},c.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},c.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},c.handleTechClick_=function(a){this.controls_&&(this.paused()?ia(this.play()):this.pause())},c.handleTechDoubleClick_=function(a){if(this.controls_){var b=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)});b||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&this.options_.userActions.doubleClick===!1||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},c.handleTechTap_=function(){this.userActive(!this.userActive())},c.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},c.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},c.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()},c.handleStageClick_=function(){this.reportUserActivity()},c.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},c.documentFullscreenChange_=function(a){var b=a.target.player;if(!b||b===this){var c=this.el(),d=Dc[this.fsApi_.fullscreenElement]===c;!d&&c.matches?d=c.matches(":"+this.fsApi_.fullscreen):!d&&c.msMatchesSelector&&(d=c.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(d)}},c.handleTechFullscreenChange_=function(a,b){b&&(b.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(b.isFullscreen))},c.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)},c.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},c.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)},c.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)},c.handleTechError_=function(){var a=this.tech_.error();this.error(a)},c.handleTechTextData_=function(){var a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)},c.getCache=function(){return this.cache_},c.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},c.techCall_=function(a,b){this.ready(function(){if(a in qf)return Ra(this.middleware_,this.tech_,a,b);if(a in rf)return Sa(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(c){throw Mc(c),c}},!0)},c.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in pf)return Qa(this.middleware_,this.tech_,a);if(a in rf)return Sa(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw Mc("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw Mc("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw Mc(b),b}}},c.play=function(){var a=this,b=this.options_.Promise||uc.Promise;return b?new b(function(b){a.play_(b)}):this.play_()},c.play_=function(a){var b=this;void 0===a&&(a=ia),this.playCallbacks_.push(a);var c=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!c)return this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(c||!id&&!hd||this.load());var d=this.techGet_("play");null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)},c.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})},c.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})},c.pause=function(){this.techCall_("pause")},c.paused=function(){return this.techGet_("paused")!==!1},c.played=function(){return this.techGet_("played")||da(0,0)},c.scrubbing=function(a){return"undefined"==typeof a?this.scrubbing_:(this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),void(a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},c.currentTime=function(a){return"undefined"!=typeof a?(a<0&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),void(this.cache_.initTime=0)):(this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},c.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},c.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:(a=parseFloat(a),a<0&&(a=1/0),void(a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))))},c.remainingTime=function(){return this.duration()-this.currentTime()},c.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},c.buffered=function d(){var d=this.techGet_("buffered");return d&&d.length||(d=da(0,0)),d},c.bufferedPercent=function(){return ea(this.buffered(),this.duration())},c.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},c.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(b>0&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},c.muted=function(a){return void 0!==a?void this.techCall_("setMuted",a):this.techGet_("muted")||!1},c.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},c.lastVolume_=function(a){return void 0!==a&&0!==a?void(this.cache_.lastVolume=a):this.cache_.lastVolume},c.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},c.isFullscreen=function(a){if(void 0!==a){var b=this.isFullscreen_;return this.isFullscreen_=Boolean(a),this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},c.requestFullscreen=function(a){var b=this.options_.Promise||uc.Promise;if(b){var c=this;return new b(function(b,d){function e(){c.off("fullscreenerror",g),c.off("fullscreenchange",f)}function f(){e(),b()}function g(a,b){e(),d(b)}c.one("fullscreenchange",f),c.one("fullscreenerror",g);var h=c.requestFullscreenHelper_(a);h&&(h.then(e,e),h.then(b,d))})}return this.requestFullscreenHelper_()},c.requestFullscreenHelper_=function(a){var b,c=this;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){var d=this.el_[this.fsApi_.requestFullscreen](b);return d&&d.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),d}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==!0?this.techCall_("enterFullScreen"):this.enterFullWindow()},c.exitFullscreen=function(){var a=this.options_.Promise||uc.Promise;if(a){var b=this;return new a(function(a,c){function d(){b.off("fullscreenerror",f),b.off("fullscreenchange",e)}function e(){d(),a()}function f(a,b){d(),c(b)}b.one("fullscreenchange",e),b.one("fullscreenerror",f);var g=b.exitFullscreenHelper_();g&&(g.then(d,d),g.then(a,c))})}return this.exitFullscreenHelper_()},c.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var b=Dc[this.fsApi_.exitFullscreen]();return b&&ia(b.then(function(){return a.isFullscreen(!1)})),b}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==!0?this.techCall_("exitFullScreen"):this.exitFullWindow()},c.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Dc.documentElement.style.overflow,S(Dc,"keydown",this.boundFullWindowOnEscKey_),Dc.documentElement.style.overflow="hidden",t(Dc.body,"vjs-full-window"),this.trigger("enterFullWindow")},c.fullWindowOnEscKey=function(a){ee.isEventKey(a,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},c.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,T(Dc,"keydown",this.boundFullWindowOnEscKey_),Dc.documentElement.style.overflow=this.docOrigOverflow,u(Dc.body,"vjs-full-window"),this.trigger("exitFullWindow")},c.disablePictureInPicture=function(a){return void 0===a?this.techGet_("disablePictureInPicture"):(this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,void this.trigger("disablepictureinpicturechanged"))},c.isInPictureInPicture=function(a){return void 0!==a?(this.isInPictureInPicture_=!!a,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},c.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Dc&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},c.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Dc)return Dc.exitPictureInPicture()},c.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=function(a){var b=a.tagName.toLowerCase();if(a.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if("input"===b)return c.indexOf(a.type)===-1;var d=["textarea"];return d.indexOf(b)!==-1};c(this.el_.ownerDocument.activeElement)||("function"==typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}},c.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=void 0===c?function(a){return ee.isEventKey(a,"f")}:c,e=b.muteKey,f=void 0===e?function(a){return ee.isEventKey(a,"m")}:e,g=b.playPauseKey,h=void 0===g?function(a){return ee.isEventKey(a,"k")||ee.isEventKey(a,"Space")}:g;if(d.call(this,a)){a.preventDefault(),a.stopPropagation();var i=Xd.getComponent("FullscreenToggle");Dc[this.fsApi_.fullscreenEnabled]!==!1&&i.prototype.handleClick.call(this,a)}else if(f.call(this,a)){a.preventDefault(),a.stopPropagation();var j=Xd.getComponent("MuteToggle");j.prototype.handleClick.call(this,a)}else if(h.call(this,a)){a.preventDefault(),a.stopPropagation();var k=Xd.getComponent("PlayToggle");k.prototype.handleClick.call(this,a)}},c.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=lf.getTech(e);if(f||(f=Xd.getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else Mc.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},c.selectSource=function(a){var b,c=this,d=this.options_.techOrder.map(function(a){return[a,lf.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(Mc.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),e=function(a,b,c){var d;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d},f=function(a){return function(b,c){return a(c,b)}},g=function(a,b){var d=a[0],e=a[1];if(e.canPlaySource(b,c.options_[d.toLowerCase()]))return{source:b,tech:d}};return b=this.options_.sourceOrder?e(a,d,f(g)):e(d,a,g),b||!1},c.handleSrc_=function(a,b){var c=this;if("undefined"==typeof a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var d=vf(a);if(!d.length)return void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);if(this.changingSrc_=!0,b||(this.cache_.sources=d),this.updateSourceCaches_(d[0]),Oa(this,d[0],function(a,e){c.middleware_=e,b||(c.cache_.sources=d),c.updateSourceCaches_(a);var f=c.src_(a);return f?d.length>1?c.handleSrc_(d.slice(1)):(c.changingSrc_=!1,c.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void c.triggerReady()):void Pa(e,c.tech_)}),this.options_.retryOnError&&d.length>1){var e=function(){c.error(null),c.handleSrc_(d.slice(1),!0)},f=function(){c.off("error",e)};this.one("error",e),this.one("playing",f),this.resetRetryOnError_=function(){c.off("error",e),c.off("playing",f)}}},c.src=function(a){return this.handleSrc_(a,!1)},c.src_=function(a){var b=this,c=this.selectSource([a]);return!c||(Sd(c.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1))},c.load=function(){this.techCall_("load")},c.reset=function(){var a=this,b=this.options_.Promise||uc.Promise;if(this.paused()||!b)this.doReset_();else{var c=this.play();ia(c.then(function(){return a.doReset_()}))}},c.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Gd(this)&&this.trigger("playerreset")},c.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},c.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay,c=a.remainingTimeDisplay;b&&b.updateContent(),c&&c.updateContent()},c.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},c.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},c.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},c.currentSource=function(){return this.cache_.source||{}},c.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},c.currentType=function(){return this.currentSource()&&this.currentSource().type||""},c.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},c.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;var b;"string"==typeof a&&/(any|play|muted)/.test(a)||a===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"==typeof a?a:"play"),b=!1):a?this.options_.autoplay=!0:this.options_.autoplay=!1,b="undefined"==typeof b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)},c.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},c.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},c.poster=function(a){return void 0===a?this.poster_:(a||(a=""),void(a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))))},c.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},c.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},c.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},c.error=function(a){var b=this;if(void 0===a)return this.error_||null;if(wc("beforeerror").forEach(function(c){var d=c(b,a);return f(d)&&!Array.isArray(d)||"string"==typeof d||"number"==typeof d||null===d?void(a=d):void b.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&a&&4===a.code){var c=function(){this.error(a)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],c),void this.one("loadstart",function(){this.off(["click","touchstart"],c)})}return null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new fa(a),this.addClass("vjs-error"),Mc.error("(CODE:"+this.error_.code+" "+fa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),void wc("error").forEach(function(a){return a(b,b.error_)}))},c.reportUserActivity=function(a){this.userActivity_=!0},c.userActive=function(a){if(void 0===a)return this.userActive_;if(a=!!a,a!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},c.listenForUserActivity_=function(){var a,b,c,d=Ad(this,this.reportUserActivity),e=function(a){a.screenX===b&&a.screenY===c||(b=a.screenX,c=a.screenY,d())},f=function(){d(),this.clearInterval(a),a=this.setInterval(d,250)},g=function(b){d(),this.clearInterval(a)};this.on("mousedown",f),this.on("mousemove",e),this.on("mouseup",g),this.on("mouseleave",g);var h=this.getChild("controlBar");!h||hd||Wc||(h.on("mouseenter",function(a){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",d),this.on("keyup",d);var i;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i);var a=this.options_.inactivityTimeout;a<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},c.playbackRate=function(a){return void 0!==a?void this.techCall_("setPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},c.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},c.isAudio=function(a){return void 0!==a?void(this.isAudio_=!!a):!!this.isAudio_},c.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},c.addRemoteTextTrack=function(a,b){
if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},c.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a,c=b.track;if(c||(c=a),this.tech_)return this.tech_.removeRemoteTextTrack(c)},c.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},c.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},c.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},c.language=function(a){return void 0===a?this.language_:void(this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),Gd(this)&&this.trigger("languagechange")))},c.languages=function(){return Z(b.prototype.options_.languages,this.languages_)},c.toJSON=function(){var a=Z(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=Z(d),d.player=void 0,a.tracks[c]=d}return a},c.createModal=function(a,b){var c=this;b=b||{},b.content=a||"";var d=new ge(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},c.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<lh.length;c++){var d=lh[c],e=this.breakpoints_[d];if(b<=e){if(a===d)return;a&&this.removeClass(mh[a]),this.addClass(mh[d]),this.breakpoint_=d;break}}},c.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)},c.breakpoints=function(a){return void 0===a?e(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=e({},nh,a),this.updateCurrentBreakpoint_(),e(this.breakpoints_))},c.responsive=function(a){if(void 0===a)return this.responsive_;a=Boolean(a);var b=this.responsive_;if(a!==b)return this.responsive_=a,a?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a},c.currentBreakpoint=function(){return this.breakpoint_},c.currentBreakpointClass=function(){return mh[this.breakpoint_]||""},c.loadMedia=function(a,b){var c=this;if(a&&"object"==typeof a){this.reset(),this.cache_.media=Z(a);var d=this.cache_.media,e=d.artwork,f=d.poster,g=d.src,h=d.textTracks;!e&&f&&(this.cache_.media.artwork=[{src:f,type:tf(f)}]),g&&this.src(g),f&&this.poster(f),Array.isArray(h)&&h.forEach(function(a){return c.addRemoteTextTrack(a,!1)}),this.ready(b)}},c.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}}),d={src:b,textTracks:c};return a&&(d.poster=a,d.artwork=[{src:d.poster,type:tf(d.poster)}]),d}return Z(this.cache_.media)},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=x(a),d=c["data-setup"];if(s(a,"vjs-fill")&&(c.fill=!0),s(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var f=_d(d||"{}"),g=f[0],h=f[1];g&&Mc.error(g),e(c,h)}if(e(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(x(l)):"track"===m&&b.tracks.push(x(l))}return b},c.flexNotSupported_=function(){var a=Dc.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},c.debug=function(a){return void 0===a?this.debugEnabled_:void(a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1))},c.playbackRates=function(a){return void 0===a?this.cache_.playbackRates:void(Array.isArray(a)&&a.every(function(a){return"number"==typeof a})&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange")))},b}(Xd);Te.names.forEach(function(a){var b=Te[a];oh.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),oh.prototype.crossorigin=oh.prototype.crossOrigin,oh.players={};var ph=uc.navigator;oh.prototype.options_={techOrder:lf.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ph&&(ph.languages&&ph.languages[0]||ph.userLanguage||ph.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){oh.prototype[a]=function(){return this.techGet_(a)}}),jh.forEach(function(a){oh.prototype["handleTech"+Rd(a)+"_"]=function(){return this.trigger(a)}}),Xd.registerComponent("Player",oh);var qh=a(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},b(c,d)}a.exports=b}),rh=fb,sh=a(function(a){function b(c,d,e){return rh()?a.exports=b=Reflect.construct:a.exports=b=function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&qh(f,c.prototype),f},b.apply(null,arguments)}a.exports=b}),th="plugin",uh="activePlugins_",vh={},wh=function(a){return vh.hasOwnProperty(a)},xh=function(a){return wh(a)?vh[a]:void 0},yh=function(a,b){a[uh]=a[uh]||{},a[uh][b]=!0},zh=function(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},Ah=function(a,b){var c=function(){zh(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return yh(this,a),zh(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c},Bh=function(a,b){return b.prototype.name=a,function(){zh(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=sh(b,[this].concat(d));return this[a]=function(){return f},zh(this,f.getEventHash()),f}},Ch=function(){function a(b){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,this.log||(this.log=this.player.log.createLogger(this.name)),X(this),delete this.trigger,Y(this,this.constructor.defaultState),yh(b,this.name),this.dispose=this.dispose.bind(this),b.on("dispose",this.dispose)}var b=a.prototype;return b.version=function(){return this.constructor.VERSION},b.getEventHash=function(a){return void 0===a&&(a={}),a.name=this.name,a.plugin=this.constructor,a.instance=this,a},b.trigger=function(a,b){return void 0===b&&(b={}),U(this.eventBusEl_,a,this.getEventHash(b))},b.handleStateChanged=function(a){},b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[uh][a]=!1,this.player=this.state=null,b[a]=Bh(a,vh[a])},a.isBasic=function(b){var c="string"==typeof b?xh(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(wh(b))Mc.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(oh.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+typeof c+".");return vh[b]=c,b!==th&&(a.isBasic(c)?oh.prototype[b]=Ah(b,c):oh.prototype[b]=Bh(b,c)),c},a.deregisterPlugin=function(a){if(a===th)throw new Error("Cannot de-register base plugin.");wh(a)&&(delete vh[a],delete oh.prototype[a])},a.getPlugins=function(a){void 0===a&&(a=Object.keys(vh));var b;return a.forEach(function(a){var c=xh(a);c&&(b=b||{},b[a]=c)}),b},a.getPluginVersion=function(a){var b=xh(a);return b&&b.VERSION||""},a}();Ch.getPlugin=xh,Ch.BASE_PLUGIN_NAME=th,Ch.registerPlugin(th,Ch),oh.prototype.usingPlugin=function(a){return!!this[uh]&&this[uh][a]===!0},oh.prototype.hasPlugin=function(a){return!!wh(a)};var Dh=gb,Eh=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"==typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),Dh(c,a),a&&(c.super_=a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c},Fh=function(a){return 0===a.indexOf("#")?a.slice(1):a};if(hb.hooks_=vc,hb.hooks=wc,hb.hook=xc,hb.hookOnce=zc,hb.removeHook=yc,uc.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&l()){var Gh=kd(".vjs-styles-defaults");if(!Gh){Gh=qd("vjs-styles-defaults");var Hh=kd("head");Hh&&Hh.insertBefore(Gh,Hh.firstChild),rd(Gh,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}M(1,hb),hb.VERSION=rc,hb.options=oh.prototype.options_,hb.getPlayers=function(){return oh.players},hb.getPlayer=function(a){var b,c=oh.players;if("string"==typeof a){var d=Fh(a),e=c[d];if(e)return e;b=kd("#"+d)}else b=a;if(m(b)){var f=b,g=f.player,h=f.playerId;if(g||c[h])return g||c[h]}},hb.getAllPlayers=function(){return Object.keys(oh.players).map(function(a){return oh.players[a]}).filter(Boolean)},hb.players=oh.players,hb.getComponent=Xd.getComponent,hb.registerComponent=function(a,b){lf.isTech(b)&&Mc.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Xd.registerComponent.call(Xd,a,b)},hb.getTech=lf.getTech,hb.registerTech=lf.registerTech,hb.use=Na,Object.defineProperty(hb,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(hb.middleware,"TERMINATOR",{value:of,writeable:!1,enumerable:!0}),hb.browser=jd,hb.TOUCH_ENABLED=ed,hb.extend=Eh,hb.mergeOptions=Z,hb.bind=Ad,hb.registerPlugin=Ch.registerPlugin,hb.deregisterPlugin=Ch.deregisterPlugin,hb.plugin=function(a,b){return Mc.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ch.registerPlugin(a,b)},hb.getPlugins=Ch.getPlugins,hb.getPlugin=Ch.getPlugin,hb.getPluginVersion=Ch.getPluginVersion,hb.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),hb.options.languages=Z(hb.options.languages,(c={},c[a]=b,c)),hb.options.languages[a]},hb.log=Mc,hb.createLogger=Nc,hb.createTimeRange=hb.createTimeRanges=da,hb.formatTime=bb,hb.setFormatTime=_a,hb.resetFormatTime=ab,hb.parseUrl=ve,hb.isCrossOrigin=ye,hb.EventTarget=Dd,hb.on=S,hb.one=V,hb.off=T,hb.trigger=U,hb.xhr=Fe,hb.TextTrack=Je,hb.AudioTrack=Ke,hb.VideoTrack=Le,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){hb[a]=function(){return Mc.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),md[a].apply(null,arguments)}}),hb.computedStyle=h,hb.dom=md,hb.url=ze,hb.defineLazyProperty=gh,hb.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ih=a(function(a,b){!function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,d=/^([^\/?#]*)([^]*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),b=b.trim(),!b){if(!c.alwaysNormalize)return a;var e=g.parseURL(a);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g.normalizePath(e.path),g.buildURLFromParts(e)}var f=g.parseURL(b);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=g.normalizePath(f.path),g.buildURLFromParts(f)):b;var h=g.parseURL(a);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var i=d.exec(h.path);h.netLoc=i[1],h.path=i[2]}h.netLoc&&!h.path&&(h.path="/");var j={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(j.netLoc=h.netLoc,"/"!==f.path[0]))if(f.path){var k=h.path,l=k.substring(0,k.lastIndexOf("/")+1)+f.path;j.path=g.normalizePath(l)}else j.path=h.path,f.params||(j.params=h.params,f.query||(j.query=h.query));return null===j.path&&(j.path=c.alwaysNormalize?g.normalizePath(f.path):f.path),g.buildURLFromParts(j)},parseURL:function(a){var b=c.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g}()}),Jh="http://example.com",Kh=function(a,b){if(/^[a-z]+:/i.test(b))return b;/^data:/.test(a)&&(a=uc.location&&uc.location.href||"");var c="function"==typeof uc.URL,d=/^\/\//.test(a),e=!uc.location&&!/\/\//i.test(a);if(c?a=new uc.URL(a,uc.location||Jh):/\/\//i.test(a)||(a=Ih.buildAbsoluteURL(uc.location&&uc.location.href||"",a)),c){var f=new URL(b,a);return e?f.href.slice(Jh.length):d?f.href.slice(f.protocol.length):f.href}return Ih.buildAbsoluteURL(a,b)},Lh=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),Mh=function(a){return uc.atob?uc.atob(a):Buffer.from(a,"base64").toString("binary")},Nh=function(a){function b(){var b;return b=a.call(this)||this,b.buffer="",b}Zd(b,a);var c=b.prototype;return c.push=function(a){var b;for(this.buffer+=a,b=this.buffer.indexOf("\n");b>-1;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)},b}(Lh),Oh=String.fromCharCode(9),Ph=function(a){var b=/([0-9.]*)?@?([0-9.]*)?/.exec(a||""),c={};return b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),c},Qh=function(){var a="[^=]*",b='"[^"]*"|[^,]*',c="(?:"+a+")=(?:"+b+")";return new RegExp("(?:^|,)("+c+")")},Rh=function(a){for(var b,c=a.split(Qh()),d={},e=c.length;e--;)""!==c[e]&&(b=/([^=]*)=(.*)/.exec(c[e]).slice(1),b[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),d[b[0]]=b[1]);return d},Sh=function(a){function b(){var b;return b=a.call(this)||this,b.customParsers=[],b.tagMappers=[],b}Zd(b,a);var c=b.prototype;return c.push=function(a){var b,c,d=this;if(a=a.trim(),0!==a.length){if("#"!==a[0])return void this.trigger("data",{type:"uri",uri:a});var e=this.tagMappers.reduce(function(b,c){var d=c(a);return d===a?b:b.concat([d])},[a]);e.forEach(function(a){for(var e=0;e<d.customParsers.length;e++)if(d.customParsers[e].call(d,a))return;if(0!==a.indexOf("#EXT"))return void d.trigger("data",{type:"comment",text:a.slice(1)});if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))return void d.trigger("data",{type:"tag",tagType:"m3u"});if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))return c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),void d.trigger("data",c);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))return c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),void d.trigger("data",c);if(b=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(a))return c=Oc(Ph(b[1]),{type:"tag",tagType:"byterange"}),void d.trigger("data",c);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))return c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){var f=Rh(b[1]);f.URI&&(c.uri=f.URI),f.BYTERANGE&&(c.byterange=Ph(f.BYTERANGE))}return void d.trigger("data",c)}if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"stream-inf"},b[1]){if(c.attributes=Rh(b[1]),c.attributes.RESOLUTION){var g=c.attributes.RESOLUTION.split("x"),h={};g[0]&&(h.width=parseInt(g[0],10)),g[1]&&(h.height=parseInt(g[1],10)),c.attributes.RESOLUTION=h}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}return void d.trigger("data",c)}return(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(c={type:"tag",tagType:"media"},b[1]&&(c.attributes=Rh(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-ENDLIST/.exec(a))?void d.trigger("data",{type:"tag",tagType:"endlist"}):(b=/^#EXT-X-DISCONTINUITY/.exec(a))?void d.trigger("data",{type:"tag",tagType:"discontinuity"}):(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-KEY:?(.*)$/.exec(a))?(c={type:"tag",tagType:"key"},b[1]&&(c.attributes=Rh(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void d.trigger("data",c)):(b=/^#EXT-X-START:?(.*)$/.exec(a))?(c={type:"tag",tagType:"start"},b[1]&&(c.attributes=Rh(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-SKIP:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"skip"},c.attributes=Rh(b[1]),c.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(c.attributes["SKIPPED-SEGMENTS"]=parseInt(c.attributes["SKIPPED-SEGMENTS"],10)),c.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(c.attributes["RECENTLY-REMOVED-DATERANGES"]=c.attributes["RECENTLY-REMOVED-DATERANGES"].split(Oh)),void d.trigger("data",c)):(b=/^#EXT-X-PART:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"part"},c.attributes=Rh(b[1]),["DURATION"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),c.attributes.hasOwnProperty("BYTERANGE")&&(c.attributes.byterange=Ph(c.attributes.BYTERANGE)),void d.trigger("data",c)):(b=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"server-control"},c.attributes=Rh(b[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),void d.trigger("data",c)):(b=/^#EXT-X-PART-INF:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"part-inf"},c.attributes=Rh(b[1]),["PART-TARGET"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),void d.trigger("data",c)):(b=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"preload-hint"},c.attributes=Rh(b[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(c.attributes.hasOwnProperty(a)){c.attributes[a]=parseInt(c.attributes[a],10);var b="BYTERANGE-LENGTH"===a?"length":"offset";c.attributes.byterange=c.attributes.byterange||{},c.attributes.byterange[b]=c.attributes[a],delete c.attributes[a]}}),void d.trigger("data",c)):(b=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"rendition-report"},c.attributes=Rh(b[1]),["LAST-MSN","LAST-PART"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseInt(c.attributes[a],10))}),void d.trigger("data",c)):void d.trigger("data",{type:"tag",data:a.slice(4)})))))))})}},c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!=typeof e&&(e=function(a){return a}),this.customParsers.push(function(a){var g=c.exec(a);if(g)return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})},c.addTagMapper=function(a){var b=a.expression,c=a.map,d=function(a){return b.test(a)?c(a):a};this.tagMappers.push(d)},b}(Lh),Th=function(a){return a.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()})},Uh=function(a){var b={};return Object.keys(a).forEach(function(c){b[Th(c)]=a[c]}),b},Vh=function(a){var b=a.serverControl,c=a.targetDuration,d=a.partTargetDuration;if(b){var e="#EXT-X-SERVER-CONTROL",f="holdBack",g="partHoldBack",h=c&&3*c,i=d&&2*d;c&&!b.hasOwnProperty(f)&&(b[f]=h,this.trigger("info",{message:e+" defaulting HOLD-BACK to targetDuration * 3 ("+h+")."})),h&&b[f]<h&&(this.trigger("warn",{message:e+" clamping HOLD-BACK ("+b[f]+") to targetDuration * 3 ("+h+")"}),b[f]=h),d&&!b.hasOwnProperty(g)&&(b[g]=3*d,this.trigger("info",{message:e+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+b[g]+")."})),d&&b[g]<i&&(this.trigger("warn",{message:e+" clamping PART-HOLD-BACK ("+b[g]+") to partTargetDuration * 2 ("+i+")."}),b[g]=i)}},Wh=function(a){function b(){var b;b=a.call(this)||this,b.lineStream=new Nh,b.parseStream=new Sh,b.lineStream.pipe(b.parseStream);var c,d,e=Yd(b),f=[],g={},h=!1,i=function(){},j={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},k="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var m=0,n=0;return b.on("end",function(){g.uri||!g.parts&&!g.preloadHints||(!g.map&&c&&(g.map=c),!g.key&&d&&(g.key=d),g.timeline||"number"!=typeof l||(g.timeline=l),b.manifest.preloadSegment=g)}),b.parseStream.on("data",function(a){var b,o;({tag:function(){(({version:function(){a.version&&(this.manifest.version=a.version)},"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function p(){var p={};"length"in a&&(g.byterange=p,p.length=a.length,"offset"in a||(a.offset=m)),"offset"in a&&(g.byterange=p,p.offset=a.offset),m=p.offset+p.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.duration>0&&(g.duration=a.duration),0===a.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=f},key:function(){if(!a.attributes)return void this.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===a.attributes.METHOD)return void(d=null);if(!a.attributes.URI)return void this.trigger("warn",{message:"ignoring key declaration without URI"});if("com.apple.streamingkeydelivery"===a.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:a.attributes});if(a.attributes.KEYFORMAT===k){var b=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return b.indexOf(a.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:ib(a.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!=typeof a.attributes.IV&&(d.iv=a.attributes.IV)},"media-sequence":function(){return isFinite(a.number)?void(this.manifest.mediaSequence=a.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){return isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,void(l=a.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){return/VOD|EVENT/.test(a.playlistType)?void(this.manifest.playlistType=a.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){c={},a.uri&&(c.uri=a.uri),a.byterange&&(c.byterange=a.byterange),d&&(c.key=d)},"stream-inf":function(){return this.manifest.playlists=f,this.manifest.mediaGroups=this.manifest.mediaGroups||j,a.attributes?(g.attributes||(g.attributes={}),void Oc(g.attributes,a.attributes)):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||j,!(a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{},b=c[a.attributes["GROUP-ID"]],o={"default":/yes/i.test(a.attributes.DEFAULT)},o["default"]?o.autoselect=!0:o.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(o.language=a.attributes.LANGUAGE),a.attributes.URI&&(o.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(o.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(o.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(o.forced=/yes/i.test(a.attributes.FORCED)),b[a.attributes.NAME]=o},discontinuity:function(){l+=1,g.discontinuity=!0,this.manifest.discontinuityStarts.push(f.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),g.dateTimeString=a.dateTimeString,g.dateTimeObject=a.dateTimeObject},targetduration:function(){return!isFinite(a.duration)||a.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):(this.manifest.targetDuration=a.duration,void Vh.call(this,this.manifest))},start:function(){return!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?void this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):void(this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE})},"cue-out":function(){g.cueOut=a.data},"cue-out-cont":function(){g.cueOutCont=a.data},"cue-in":function(){g.cueIn=a.data},skip:function(){this.manifest.skip=Uh(a.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",a.attributes,["SKIPPED-SEGMENTS"])},part:function q(){var b=this;h=!0;var c=this.manifest.segments.length,q=Uh(a.attributes);g.parts=g.parts||[],g.parts.push(q),q.byterange&&(q.byterange.hasOwnProperty("offset")||(q.byterange.offset=n),n=q.byterange.offset+q.byterange.length);var d=g.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+d+" for segment #"+c,a.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(a,c){a.hasOwnProperty("lastPart")||b.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+c+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var b=this.manifest.serverControl=Uh(a.attributes);b.hasOwnProperty("canBlockReload")||(b.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Vh.call(this,this.manifest),b.canSkipDateranges&&!b.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var b=this.manifest.segments.length,c=Uh(a.attributes),d=c.type&&"PART"===c.type;g.preloadHints=g.preloadHints||[],g.preloadHints.push(c),c.byterange&&(c.byterange.hasOwnProperty("offset")||(c.byterange.offset=d?n:0,d&&(n=c.byterange.offset+c.byterange.length)));var e=g.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b,a.attributes,["TYPE","URI"]),c.type)for(var f=0;f<g.preloadHints.length-1;f++){var h=g.preloadHints[f];h.type&&h.type===c.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b+" has the same TYPE "+c.type+" as preload hint #"+f})}},"rendition-report":function(){var b=Uh(a.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(b);var c=this.manifest.renditionReports.length-1,d=["LAST-MSN","URI"];h&&d.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+c,a.attributes,d)},"part-inf":function(){this.manifest.partInf=Uh(a.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",a.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Vh.call(this,this.manifest)}})[a.tagType]||i).call(e)},uri:function(){g.uri=a.uri,f.push(g),!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration),d&&(g.key=d),g.timeline=l,c&&(g.map=c),n=0,g={}},comment:function(){},custom:function(){a.segment?(g.custom=g.custom||{},g.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(e)}),b}Zd(b,a);var c=b.prototype;return c.warnOnMissingAttributes_=function(a,b,c){var d=[];c.forEach(function(a){b.hasOwnProperty(a)||d.push(a)}),d.length&&this.trigger("warn",{message:a+" lacks required attribute(s): "+d.join(", ")})},c.push=function(a){this.lineStream.push(a)},c.end=function(){this.lineStream.push("\n"),this.trigger("end")},c.addParser=function(a){this.parseStream.addParser(a)},c.addTagMapper=function(a){this.parseStream.addTagMapper(a)},b}(Lh),Xh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,
audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Yh=["video","audio","text"],Zh=["Video","Audio","Text"],$h=function(a){return a?a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){var d=("00"+Number(b).toString(16)).slice(-2),e=("00"+Number(c).toString(16)).slice(-2);return"avc1."+d+"00"+e}):a},_h=function(a){void 0===a&&(a="");var b=a.split(","),c=[];return b.forEach(function(a){a=a.trim();var b;Yh.forEach(function(d){var e=Xh[d].exec(a.toLowerCase());if(e&&!(e.length<=1)){b=d;var f=a.substring(0,e[1].length),g=a.replace(f,"");c.push({type:f,details:g,mediaType:d})}}),b||c.push({type:a,details:"",mediaType:"unknown"})}),c},ai=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var e=c[d];if(e["default"]&&e.playlists)return _h(e.playlists[0].attributes.CODECS)}return null},bi=function(a){return void 0===a&&(a=""),Xh.audio.test(a.trim().toLowerCase())},ci=function(a){return void 0===a&&(a=""),Xh.text.test(a.trim().toLowerCase())},di=function(a){if(a&&"string"==typeof a){var b=a.toLowerCase().split(",").map(function(a){return $h(a.trim())}),c="video";1===b.length&&bi(b[0])?c="audio":1===b.length&&ci(b[0])&&(c="application");var d="mp4";return b.every(function(a){return Xh.mp4.test(a)})?d="mp4":b.every(function(a){return Xh.webm.test(a)})?d="webm":b.every(function(a){return Xh.ogg.test(a)})&&(d="ogg"),c+"/"+d+';codecs="'+a+'"'}},ei=function(a){return void 0===a&&(a=""),uc.MediaSource&&uc.MediaSource.isTypeSupported&&uc.MediaSource.isTypeSupported(di(a))||!1},fi=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(a){a=a.trim();for(var b=0;b<Zh.length;b++){var c=Zh[b];if(Xh["muxer"+c].test(a))return!0}return!1})},gi="mp4a.40.2",hi="avc1.4d400d",ii=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ji=/^application\/dash\+xml/i,ki=function(a){return ii.test(a)?"hls":ji.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null},li=jb({HTML:"text/html",isHTML:function(a){return a===li.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),mi=jb({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===mi.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),ni=jb,oi=li,pi=mi,qi={freeze:ni,MIME_TYPE:oi,NAMESPACE:pi},ri=a(function(a,b){var c=qi.freeze;b.XML_ENTITIES=c({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),b.HTML_ENTITIES=c({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"Ã€",Aacute:"Ã",Acirc:"Ã‚",Atilde:"Ãƒ",Auml:"Ã„",Aring:"Ã…",AElig:"Ã†",Ccedil:"Ã‡",Egrave:"Ãˆ",Eacute:"Ã‰",Ecirc:"ÃŠ",Euml:"Ã‹",Igrave:"ÃŒ",Iacute:"Ã",Icirc:"ÃŽ",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã‘",Ograve:"Ã’",Oacute:"Ã“",Ocirc:"Ã”",Otilde:"Ã•",Ouml:"Ã–",Oslash:"Ã˜",Ugrave:"Ã™",Uacute:"Ãš",Ucirc:"Ã›",Uuml:"Ãœ",Yacute:"Ã",THORN:"Ãž",szlig:"ÃŸ",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",times:"Ã—",divide:"Ã·",forall:"âˆ€",part:"âˆ‚",exist:"âˆƒ",empty:"âˆ…",nabla:"âˆ‡",isin:"âˆˆ",notin:"âˆ‰",ni:"âˆ‹",prod:"âˆ",sum:"âˆ‘",minus:"âˆ’",lowast:"âˆ—",radic:"âˆš",prop:"âˆ",infin:"âˆž",ang:"âˆ ",and:"âˆ§",or:"âˆ¨",cap:"âˆ©",cup:"âˆª","int":"âˆ«",there4:"âˆ´",sim:"âˆ¼",cong:"â‰…",asymp:"â‰ˆ",ne:"â‰ ",equiv:"â‰¡",le:"â‰¤",ge:"â‰¥",sub:"âŠ‚",sup:"âŠƒ",nsub:"âŠ„",sube:"âŠ†",supe:"âŠ‡",oplus:"âŠ•",otimes:"âŠ—",perp:"âŠ¥",sdot:"â‹…",Alpha:"Î‘",Beta:"Î’",Gamma:"Î“",Delta:"Î”",Epsilon:"Î•",Zeta:"Î–",Eta:"Î—",Theta:"Î˜",Iota:"Î™",Kappa:"Îš",Lambda:"Î›",Mu:"Îœ",Nu:"Î",Xi:"Îž",Omicron:"ÎŸ",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï€",rho:"Ï",sigmaf:"Ï‚",sigma:"Ïƒ",tau:"Ï„",upsilon:"Ï…",phi:"Ï†",chi:"Ï‡",psi:"Ïˆ",omega:"Ï‰",thetasym:"Ï‘",upsih:"Ï’",piv:"Ï–",OElig:"Å’",oelig:"Å“",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",fnof:"Æ’",circ:"Ë†",tilde:"Ëœ",ensp:"â€‚",emsp:"â€ƒ",thinsp:"â€‰",zwnj:"â€Œ",zwj:"â€",lrm:"â€Ž",rlm:"â€",ndash:"â€“",mdash:"â€”",lsquo:"â€˜",rsquo:"â€™",sbquo:"â€š",ldquo:"â€œ",rdquo:"â€",bdquo:"â€ž",dagger:"â€ ",Dagger:"â€¡",bull:"â€¢",hellip:"â€¦",permil:"â€°",prime:"â€²",Prime:"â€³",lsaquo:"â€¹",rsaquo:"â€º",oline:"â€¾",euro:"â‚¬",trade:"â„¢",larr:"â†",uarr:"â†‘",rarr:"â†’",darr:"â†“",harr:"â†”",crarr:"â†µ",lceil:"âŒˆ",rceil:"âŒ‰",lfloor:"âŒŠ",rfloor:"âŒ‹",loz:"â—Š",spades:"â™ ",clubs:"â™£",hearts:"â™¥",diams:"â™¦"}),b.entityMap=b.HTML_ENTITIES});ri.XML_ENTITIES,ri.HTML_ENTITIES,ri.entityMap;var si=qi.NAMESPACE,ti=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ui=new RegExp("[\\-\\.0-9"+ti.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),vi=new RegExp("^"+ti.source+ui.source+"*(?::"+ti.source+ui.source+"*)?$"),wi=0,xi=1,yi=2,zi=3,Ai=4,Bi=5,Ci=6,Di=7;kb.prototype=new Error,kb.prototype.name=kb.name,lb.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument(),sb(b,b={}),mb(a,b,c,d,this.errorHandler),d.endDocument()}},vb.prototype={setTagName:function(a){if(!vi.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,b,c){if(!vi.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};var Ei=lb,Fi=kb,Gi={XMLReader:Ei,ParseError:Fi},Hi=qi.NAMESPACE,Ii={},Ji=Ii.ELEMENT_NODE=1,Ki=Ii.ATTRIBUTE_NODE=2,Li=Ii.TEXT_NODE=3,Mi=Ii.CDATA_SECTION_NODE=4,Ni=Ii.ENTITY_REFERENCE_NODE=5,Oi=Ii.ENTITY_NODE=6,Pi=Ii.PROCESSING_INSTRUCTION_NODE=7,Qi=Ii.COMMENT_NODE=8,Ri=Ii.DOCUMENT_NODE=9,Si=Ii.DOCUMENT_TYPE_NODE=10,Ti=Ii.DOCUMENT_FRAGMENT_NODE=11,Ui=Ii.NOTATION_NODE=12,Vi={},Wi={};Vi.INDEX_SIZE_ERR=(Wi[1]="Index size error",1),Vi.DOMSTRING_SIZE_ERR=(Wi[2]="DOMString size error",2);var Xi=Vi.HIERARCHY_REQUEST_ERR=(Wi[3]="Hierarchy request error",3);Vi.WRONG_DOCUMENT_ERR=(Wi[4]="Wrong document",4),Vi.INVALID_CHARACTER_ERR=(Wi[5]="Invalid character",5),Vi.NO_DATA_ALLOWED_ERR=(Wi[6]="No data allowed",6),Vi.NO_MODIFICATION_ALLOWED_ERR=(Wi[7]="No modification allowed",7);var Yi=Vi.NOT_FOUND_ERR=(Wi[8]="Not found",8);Vi.NOT_SUPPORTED_ERR=(Wi[9]="Not supported",9);var Zi=Vi.INUSE_ATTRIBUTE_ERR=(Wi[10]="Attribute in use",10);Vi.INVALID_STATE_ERR=(Wi[11]="Invalid state",11),Vi.SYNTAX_ERR=(Wi[12]="Syntax error",12),Vi.INVALID_MODIFICATION_ERR=(Wi[13]="Invalid modification",13),Vi.NAMESPACE_ERR=(Wi[14]="Invalid namespace",14),Vi.INVALID_ACCESS_ERR=(Wi[15]="Invalid access",15),Eb.prototype=Error.prototype,Cb(Vi,Eb),Fb.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)lc(this[d],c,a,b);return c.join("")}},Gb.prototype.item=function(a){return Hb(this),this[a]},Db(Gb,Fb),Ib.prototype={length:0,item:Fb.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Eb(Zi);var c=this.getNamedItem(a.nodeName);return Kb(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new Eb(Zi);return b=this.getNamedItemNS(a.namespaceURI,a.localName),Kb(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return Lb(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return Lb(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},Mb.prototype={hasFeature:function(a,b){return!0},createDocument:function(a,b,c){var d=new Qb;if(d.implementation=this,d.childNodes=new Fb,d.doctype=c||null,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new bc;return d.name=a,d.nodeName=a,d.publicId=b||"",d.systemId=c||"",d}},Nb.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Vb(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return Ub(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return nc(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==Li&&a.nodeType==Li?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==Ki?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==Ki?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){var b=this.lookupPrefix(a);return null==b}},Cb(Ii,Nb),Cb(Ii,Nb.prototype),Qb.prototype={nodeName:"#document",nodeType:Ri,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==Ti){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return null==this.documentElement&&a.nodeType==Ji&&(this.documentElement=a),Vb(this,a,b),a.ownerDocument=this,a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Ub(this,a)},importNode:function(a,b){return mc(this,a,b)},getElementById:function(a){var b=null;return Pb(this.documentElement,function(c){if(c.nodeType==Ji&&c.getAttribute("id")==a)return b=c,!0}),b},getElementsByClassName:function(a){var b=Ab(a);return new Gb(this,function(c){var d=[];return b.length>0&&Pb(c.documentElement,function(e){if(e!==c&&e.nodeType===Ji){var f=e.getAttribute("class");if(f){var g=a===f;if(!g){var h=Ab(f);g=b.every(Bb(h))}g&&d.push(e)}}}),d})},createElement:function(a){var b=new Xb;b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.localName=a,b.childNodes=new Fb;var c=b.attributes=new Ib;return c._ownerElement=b,b},createDocumentFragment:function(){var a=new fc;return a.ownerDocument=this,a.childNodes=new Fb,a},createTextNode:function(a){var b=new $b;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new _b;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new ac;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new gc;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new Yb;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new ec;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new Xb,d=b.split(":"),e=c.attributes=new Ib;return c.childNodes=new Fb,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new Yb,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},Db(Qb,Nb),Xb.prototype={nodeType:Ji,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===Ti?this.insertBefore(a,null):Wb(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new Gb(this,function(b){var c=[];return Pb(b,function(d){d===b||d.nodeType!=Ji||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new Gb(this,function(c){var d=[];return Pb(c,function(e){e===c||e.nodeType!==Ji||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}},Qb.prototype.getElementsByTagName=Xb.prototype.getElementsByTagName,Qb.prototype.getElementsByTagNameNS=Xb.prototype.getElementsByTagNameNS,Db(Xb,Nb),Yb.prototype.nodeType=Ki,Db(Yb,Nb),Zb.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(Wi[Xi])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a),e=this.data.substring(a+b);c=d+c+e,this.nodeValue=this.data=c,this.length=c.length}},Db(Zb,Nb),$b.prototype={nodeName:"#text",nodeType:Li,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},Db($b,Zb),_b.prototype={nodeName:"#comment",nodeType:Qi},Db(_b,Zb),ac.prototype={nodeName:"#cdata-section",nodeType:Mi},Db(ac,Zb),bc.prototype.nodeType=Si,Db(bc,Nb),cc.prototype.nodeType=Ui,Db(cc,Nb),dc.prototype.nodeType=Oi,Db(dc,Nb),ec.prototype.nodeType=Ni,Db(ec,Nb),fc.prototype.nodeName="#document-fragment",fc.prototype.nodeType=Ti,Db(fc,Nb),gc.prototype.nodeType=Pi,Db(gc,Nb),hc.prototype.serializeToString=function(a,b,c){return ic.call(a,b,c)},Nb.prototype.toString=ic;try{if(Object.defineProperty){var $i=function _p(a){switch(a.nodeType){case Ji:case Ti:var b=[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(_p(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}};Object.defineProperty(Gb.prototype,"length",{get:function(){return Hb(this),this.$$length}}),Object.defineProperty(Nb.prototype,"textContent",{get:function(){return $i(this)},set:function(a){switch(this.nodeType){case Ji:case Ti:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),oc=function(a,b,c){a["$$"+b]=c}}}catch(_i){}var aj=bc,bj=Eb,cj=Mb,dj=Xb,ej=Nb,fj=Fb,gj=hc,hj={DocumentType:aj,DOMException:bj,DOMImplementation:cj,Element:dj,Node:ej,NodeList:fj,XMLSerializer:gj},ij=a(function(a,b){function c(a){this.options=a||{locator:{}}}function d(a,b,c){function d(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a),f[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof e)return b;a=b}var f={},h=a instanceof Function;return c=c||{},d("warning"),d("error"),d("fatalError"),f}function e(){this.cdata=!1}function f(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function h(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function i(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}var j=qi.NAMESPACE;c.prototype.parseFromString=function(a,b){var c=this.options,f=new k,g=c.domBuilder||new e,h=c.errorHandler,i=c.locator,l=c.xmlns||{},m=/\/x?html?$/.test(b),n=m?ri.HTML_ENTITIES:ri.XML_ENTITIES;return i&&g.setDocumentLocator(i),f.errorHandler=d(h,g,i),f.domBuilder=c.domBuilder||g,m&&(l[""]=j.HTML),l.xml=l.xml||j.XML,a&&"string"==typeof a?f.parse(a,l,n):f.errorHandler.error("invalid doc source"),g.doc},e.prototype={startDocument:function(){this.doc=(new m).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc,g=e.createElementNS(a,c||b),h=d.length;i(this,g),this.currentElement=g,this.locator&&f(this.locator,g);for(var j=0;j<h;j++){var a=d.getURI(j),k=d.getValue(j),c=d.getQName(j),l=e.createAttributeNS(a,c);this.locator&&f(d.getLocator(j),l),l.value=l.nodeValue=k,g.setAttributeNode(l)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName,this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&f(this.locator,c),i(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=h.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else var d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&f(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=h.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&f(this.locator,d),i(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&f(this.locator,e),i(this,e)}},warning:function(a){console.warn("[xmldom warning]\t"+a,g(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,g(this.locator))},fatalError:function(a){throw new l(a,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){e.prototype[a]=function(){return null}});var k=Gi.XMLReader,l=Gi.ParseError,m=b.DOMImplementation=hj.DOMImplementation;b.XMLSerializer=hj.XMLSerializer,b.DOMParser=c,b.__DOMHandler=e});ij.DOMImplementation,ij.XMLSerializer;var jj=ij.DOMParser;ij.__DOMHandler;var kj=function(a){return!!a&&"object"==typeof a},lj=function aq(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return"object"!=typeof b?a:(Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):kj(a[c])&&kj(b[c])?a[c]=aq(a[c],b[c]):a[c]=b[c]}),a)},{})},mj=function(a){return Object.keys(a).map(function(b){return a[b]})},nj=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c},oj=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},pj=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},qj=function(a,b){return a.reduce(function(a,c,d){return c[b]&&a.push(d),a},[])},rj={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},sj=function(a){var b=a.baseUrl,c=void 0===b?"":b,d=a.source,e=void 0===d?"":d,f=a.range,g=void 0===f?"":f,h=a.indexRange,i=void 0===h?"":h,j={uri:e,resolvedUri:Kh(c||"",e)};if(g||i){var k=g?g:i,l=k.split("-"),m=parseInt(l[0],10),n=parseInt(l[1],10);j.byterange={length:n-m+1,offset:m}}return j},tj=function(a){var b=a.offset+a.length-1;return a.offset+"-"+b},uj=function(a){return a&&"number"!=typeof a&&(a=parseInt(a,10)),isNaN(a)?null:a},vj={"static":function(a){var b=a.duration,c=a.timescale,d=void 0===c?1:c,e=a.sourceDuration,f=a.periodDuration,g=uj(a.endNumber),h=b/d;return"number"==typeof g?{start:0,end:g}:"number"==typeof f?{start:0,end:f/h}:{start:0,end:e/h}},dynamic:function(a){var b=a.NOW,c=a.clientOffset,d=a.availabilityStartTime,e=a.timescale,f=void 0===e?1:e,g=a.duration,h=a.start,i=void 0===h?0:h,j=a.minimumUpdatePeriod,k=void 0===j?0:j,l=a.timeShiftBufferDepth,m=void 0===l?1/0:l,n=uj(a.endNumber),o=(b+c)/1e3,p=d+i,q=o+k,r=q-p,s=Math.ceil(r*f/g),t=Math.floor((o-p-m)*f/g),u=Math.floor((o-p)*f/g);return{start:Math.max(0,t),end:"number"==typeof n?n:Math.min(s,u)}}},wj=function(a){return function(b,c){var d=a.duration,e=a.timescale,f=void 0===e?1:e,g=a.periodIndex,h=a.startNumber,i=void 0===h?1:h;return{number:i+b,duration:d/f,timeline:g,time:c*d}}},xj=function(a){var b=a.type,c=a.duration,d=a.timescale,e=void 0===d?1:d,f=a.periodDuration,g=a.sourceDuration,h=vj[b](a),i=h.start,j=h.end,k=nj(i,j).map(wj(a));if("static"===b){var l=k.length-1,m="number"==typeof f?f:g;k[l].duration=m-c/e*l}return k},yj=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c,e=a.sourceDuration,f=a.indexRange,g=void 0===f?"":f,h=a.duration;if(!b)throw new Error(rj.NO_BASE_URL);var i=sj({baseUrl:b,source:d.sourceURL,range:d.range}),j=sj({baseUrl:b,source:b,indexRange:g});if(j.map=i,h){var k=xj(a);k.length&&(j.duration=k[0].duration,j.timeline=k[0].timeline)}else e&&(j.duration=e,j.timeline=0);return j.number=0,[j]},zj=function(a,b,c){for(var d=a.sidx.map?a.sidx.map:null,e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,h=g.offset+g.length,i=b.timescale,j=b.references.filter(function(a){return 1!==a.referenceType}),k=[],l=a.endList?"static":"dynamic",m=h+b.firstOffset,n=0;n<j.length;n++){var o=b.references[n],p=o.referencedSize,q=o.subsegmentDuration,r=m+p-1,s=m+"-"+r,t={baseUrl:c,timescale:i,timeline:f,periodIndex:f,duration:q,sourceDuration:e,indexRange:s,type:l},u=yj(t)[0];d&&(u.map=d),k.push(u),m+=p}return a.segments=k,a},Aj=function(a){return a&&a.uri+"-"+tj(a.byterange)},Bj=function(a){var b=mj(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||"");if(a[c]){var d;b.segments[0]&&(b.segments[0].discontinuity=!0),(d=a[c].segments).push.apply(d,b.segments),b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b;return a},{}));return b.map(function(a){return a.discontinuityStarts=qj(a.segments,"discontinuity"),a})},Cj=function(a,b){var c=Aj(a.sidx),d=c&&b[c]&&b[c].sidx;return d&&zj(a,d,a.sidx.resolvedUri),a},Dj=function(a,b){if(void 0===b&&(b={}),!Object.keys(b).length)return a;for(var c in a)a[c]=Cj(a[c],b);return a},Ej=function(a,b){var c,d=a.attributes,e=a.segments,f=a.sidx,g={attributes:(c={NAME:d.id,BANDWIDTH:d.bandwidth,CODECS:d.codecs},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===d.type,timeline:d.periodIndex,resolvedUri:"",targetDuration:d.duration,segments:e,mediaSequence:e.length?e[0].number:1};return d.contentProtection&&(g.contentProtection=d.contentProtection),f&&(g.sidx=f),b&&(g.attributes.AUDIO="audio",g.attributes.SUBTITLES="subs"),g},Fj=function(a){var b,c=a.attributes,d=a.segments;"undefined"==typeof d&&(d=[{uri:c.baseUrl,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);var e=(b={NAME:c.id,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b);return c.codecs&&(e.CODECS=c.codecs),{attributes:e,uri:"",endList:"static"===c.type,timeline:c.periodIndex,resolvedUri:c.baseUrl||"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1}},Gj=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c=!1);var d,e=a.reduce(function(a,e){var f=e.attributes.role&&e.attributes.role.value||"",g=e.attributes.lang||"",h=e.attributes.label||"main";if(g&&!e.attributes.label){var i=f?" ("+f+")":"";h=""+e.attributes.lang+i}a[h]||(a[h]={language:g,autoselect:!0,"default":"main"===f,playlists:[],uri:""});var j=Cj(Ej(e,c),b);return a[h].playlists.push(j),"undefined"==typeof d&&"main"===f&&(d=e,d["default"]=!0),a},{});if(!d){var f=Object.keys(e)[0];e[f]["default"]=!0}return e},Hj=function(a,b){return void 0===b&&(b={}),a.reduce(function(a,c){var d=c.attributes.lang||"text";return a[d]||(a[d]={language:d,"default":!1,autoselect:!1,playlists:[],uri:""}),a[d].playlists.push(Cj(Fj(c),b)),a},{})},Ij=function(a){return a.reduce(function(a,b){return b?(b.forEach(function(b){var c=b.channel,d=b.language;a[d]={autoselect:!1,"default":!1,instreamId:c,language:d},b.hasOwnProperty("aspectRatio")&&(a[d].aspectRatio=b.aspectRatio),b.hasOwnProperty("easyReader")&&(a[d].easyReader=b.easyReader),b.hasOwnProperty("3D")&&(a[d]["3D"]=b["3D"])}),a):a},{})},Jj=function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===c.type,timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};return c.contentProtection&&(f.contentProtection=c.contentProtection),e&&(f.sidx=e),f},Kj=function(a){var b=a.attributes;return"video/mp4"===b.mimeType||"video/webm"===b.mimeType||"video"===b.contentType},Lj=function(a){var b=a.attributes;return"audio/mp4"===b.mimeType||"audio/webm"===b.mimeType||"audio"===b.contentType},Mj=function(a){var b=a.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType},Nj=function(a,b,c){var d;if(void 0===c&&(c={}),!a.length)return{};var e=a[0].attributes,f=e.sourceDuration,g=e.type,h=e.suggestedPresentationDelay,i=e.minimumUpdatePeriod,j=Bj(a.filter(Kj)).map(Jj),k=Bj(a.filter(Lj)),l=a.filter(Mj),m=a.map(function(a){return a.attributes.captionServices}).filter(Boolean),n={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(d={AUDIO:{},VIDEO:{}},d["CLOSED-CAPTIONS"]={},d.SUBTITLES={},d),uri:"",duration:f,playlists:Dj(j,c)};i>=0&&(n.minimumUpdatePeriod=1e3*i),b&&(n.locations=b),"dynamic"===g&&(n.suggestedPresentationDelay=h);var o=0===n.playlists.length;return k.length&&(n.mediaGroups.AUDIO.audio=Gj(k,c,o)),l.length&&(n.mediaGroups.SUBTITLES.subs=Hj(l,c)),m.length&&(n.mediaGroups["CLOSED-CAPTIONS"].cc=Ij(m)),n},Oj=function(a,b,c){var d=a.NOW,e=a.clientOffset,f=a.availabilityStartTime,g=a.timescale,h=void 0===g?1:g,i=a.start,j=void 0===i?0:i,k=a.minimumUpdatePeriod,l=void 0===k?0:k,m=(d+e)/1e3,n=f+j,o=m+l,p=o-n;return Math.ceil((p*h-b)/c)},Pj=function(a,b){for(var c=a.type,d=a.minimumUpdatePeriod,e=void 0===d?0:d,f=a.media,g=void 0===f?"":f,h=a.sourceDuration,i=a.timescale,j=void 0===i?1:i,k=a.startNumber,l=void 0===k?1:k,m=a.periodIndex,n=[],o=-1,p=0;p<b.length;p++){var q=b[p],r=q.d,s=q.r||0,t=q.t||0;o<0&&(o=t),t&&t>o&&(o=t);var u=void 0;if(s<0){var v=p+1;u=v===b.length?"dynamic"===c&&e>0&&g.indexOf("$Number$")>0?Oj(a,o,r):(h*j-o)/r:(b[v].t-o)/r}else u=s+1;for(var w=l+n.length+u,x=l+n.length;x<w;)n.push({number:x,duration:r/j,time:o,timeline:m}),o+=r,x++}return n},Qj=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Rj=function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"==typeof a[c])return b;var f=""+a[c];return"RepresentationID"===c?f:(e=d?parseInt(e,10):1,f.length>=e?f:""+new Array(e-f.length+1).join("0")+f)}},Sj=function(a,b){return a.replace(Qj,Rj(b))},Tj=function(a,b){return a.duration||b?a.duration?xj(a):Pj(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},Uj=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization,e=void 0===d?{sourceURL:"",range:""}:d,f=sj({baseUrl:a.baseUrl,source:Sj(e.sourceURL,c),range:e.range}),g=Tj(a,b);return g.map(function(b){c.Number=b.number,c.Time=b.time;var d=Sj(a.media||"",c),e=a.timescale||1,g=a.presentationTimeOffset||0,h=a.periodStart+(b.time-g)/e,i={uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Kh(a.baseUrl||"",d),map:f,number:b.number,presentationTime:h};return i})},Vj=function(a,b){var c=a.baseUrl,d=a.initialization,e=void 0===d?{}:d,f=sj({baseUrl:c,source:e.sourceURL,range:e.range}),g=sj({baseUrl:c,source:b.media,range:b.mediaRange});return g.map=f,g},Wj=function(a,b){var c=a.duration,d=a.segmentUrls,e=void 0===d?[]:d,f=a.periodStart;if(!c&&!b||c&&b)throw new Error(rj.SEGMENT_TIME_UNSPECIFIED);var g,h=e.map(function(b){return Vj(a,b)});c&&(g=xj(a)),b&&(g=Pj(a,b));var i=g.map(function(b,c){if(h[c]){var d=h[c],e=a.timescale||1,g=a.presentationTimeOffset||0;return d.timeline=b.timeline,d.duration=b.duration,d.number=b.number,d.presentationTime=f+(b.time-g)/e,d}}).filter(function(a){return a});return i},Xj=function(a){var b,c,d=a.attributes,e=a.segmentInfo;e.template?(c=Uj,b=lj(d,e.template)):e.base?(c=yj,b=lj(d,e.base)):e.list&&(c=Wj,b=lj(d,e.list));var f={attributes:d};if(!c)return f;var g=c(b,e.segmentTimeline);if(b.duration){var h=b,i=h.duration,j=h.timescale,k=void 0===j?1:j;b.duration=i/k}else g.length?b.duration=g.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):b.duration=0;return f.attributes=b,f.segments=g,e.base&&b.indexRange&&(f.sidx=g[0],f.segments=[]),f},Yj=function(a){return a.map(Xj)},Zj=function(a,b){return pj(a.childNodes).filter(function(a){var c=a.tagName;return c===b})},$j=function(a){return a.textContent.trim()},_j=function(a){var b=31536e3,c=2592e3,d=86400,e=3600,f=60,g=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,h=g.exec(a);if(!h)return 0;var i=h.slice(1),j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5];return parseFloat(j||0)*b+parseFloat(k||0)*c+parseFloat(l||0)*d+parseFloat(m||0)*e+parseFloat(n||0)*f+parseFloat(o||0)},ak=function(a){var b=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return b.test(a)&&(a+="Z"),Date.parse(a)},bk={mediaPresentationDuration:function(a){return _j(a)},availabilityStartTime:function(a){return ak(a)/1e3},minimumUpdatePeriod:function(a){return _j(a)},suggestedPresentationDelay:function(a){return _j(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return _j(a)},start:function(a){return _j(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},presentationTimeOffset:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?_j(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},ck=function(a){return a&&a.attributes?pj(a.attributes).reduce(function(a,b){var c=bk[b.name]||bk.DEFAULT;return a[b.name]=c(b.value),a},{}):{}},dk={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ek=function(a,b){return b.length?oj(a.map(function(a){return b.map(function(b){return Kh(a,$j(b))})})):a;
},fk=function(a){var b=Zj(a,"SegmentTemplate")[0],c=Zj(a,"SegmentList")[0],d=c&&Zj(c,"SegmentURL").map(function(a){return lj({tag:"SegmentURL"},ck(a))}),e=Zj(a,"SegmentBase")[0],f=c||b,g=f&&Zj(f,"SegmentTimeline")[0],h=c||e||b,i=h&&Zj(h,"Initialization")[0],j=b&&ck(b);j&&i?j.initialization=i&&ck(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var k={template:j,segmentTimeline:g&&Zj(g,"S").map(function(a){return ck(a)}),list:c&&lj(ck(c),{segmentUrls:d,initialization:ck(i)}),base:e&&lj(ck(e),{initialization:ck(i)})};return Object.keys(k).forEach(function(a){k[a]||delete k[a]}),k},gk=function(a,b,c){return function(d){var e=Zj(d,"BaseURL"),f=ek(b,e),g=lj(a,ck(d)),h=fk(d);return f.map(function(a){return{segmentInfo:lj(c,h),attributes:lj(g,{baseUrl:a})}})}},hk=function(a){return a.reduce(function(a,b){var c=ck(b),d=dk[c.schemeIdUri];if(d){a[d]={attributes:c};var e=Zj(b,"cenc:pssh")[0];if(e){var f=$j(e),g=f&&ib(f);a[d].pssh=g}}return a},{})},ik=function(a){if("urn:scte:dash:cc:cea-608:2015"===a.schemeIdUri){var b=a.value.split(";");return b.map(function(a){var b,c;if(c=a,/^CC\d=/.test(a)){var d=a.split("=");b=d[0],c=d[1]}else/^CC\d$/.test(a)&&(b=a);return{channel:b,language:c}})}if("urn:scte:dash:cc:cea-708:2015"===a.schemeIdUri){var c=a.value.split(";");return c.map(function(a){var b={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){var c=a.split("="),d=c[0],e=c[1],f=void 0===e?"":e;b.channel=d,b.language=a,f.split(",").forEach(function(a){var c=a.split(":"),d=c[0],e=c[1];"lang"===d?b.language=e:"er"===d?b.easyReader=Number(e):"war"===d?b.aspectRatio=Number(e):"3D"===d&&(b["3D"]=Number(e))})}else b.language=a;return b.channel&&(b.channel="SERVICE"+b.channel),b})}},jk=function(a,b,c){return function(d){var e=ck(d),f=ek(b,Zj(d,"BaseURL")),g=Zj(d,"Role")[0],h={role:ck(g)},i=lj(a,e,h),j=Zj(d,"Accessibility")[0],k=ik(ck(j));k&&(i=lj(i,{captionServices:k}));var l=Zj(d,"Label")[0];if(l&&l.childNodes.length){var m=l.childNodes[0].nodeValue.trim();i=lj(i,{label:m})}var n=hk(Zj(d,"ContentProtection"));Object.keys(n).length&&(i=lj(i,{contentProtection:n}));var o=fk(d),p=Zj(d,"Representation"),q=lj(c,o);return oj(p.map(gk(i,f,q)))}},kk=function(a,b){return function(c,d){var e=ek(b,Zj(c.node,"BaseURL")),f=parseInt(c.attributes.id,10),g=uc.isNaN(f)?d:f,h=lj(a,{periodIndex:g,periodStart:c.attributes.start});"number"==typeof c.attributes.duration&&(h.periodDuration=c.attributes.duration);var i=Zj(c.node,"AdaptationSet"),j=fk(c.node);return oj(i.map(jk(h,e,j)))}},lk=function(a){var b=a.attributes,c=a.priorPeriodAttributes,d=a.mpdType;return"number"==typeof b.start?b.start:c&&"number"==typeof c.start&&"number"==typeof c.duration?c.start+c.duration:c||"static"!==d?null:0},mk=function(a,b){void 0===b&&(b={});var c=b,d=c.manifestUri,e=void 0===d?"":d,f=c.NOW,g=void 0===f?Date.now():f,h=c.clientOffset,i=void 0===h?0:h,j=Zj(a,"Period");if(!j.length)throw new Error(rj.INVALID_NUMBER_OF_PERIOD);var k=Zj(a,"Location"),l=ck(a),m=ek([e],Zj(a,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=g,l.clientOffset=i,k.length&&(l.locations=k.map($j));var n=[];return j.forEach(function(a,b){var c=ck(a),d=n[b-1];c.start=lk({attributes:c,priorPeriodAttributes:d?d.attributes:null,mpdType:l.type}),n.push({node:a,attributes:c})}),{locations:l.locations,representationInfo:oj(n.map(kk(l,m)))}},nk=function(a){if(""===a)throw new Error(rj.DASH_EMPTY_MANIFEST);var b,c,d=new jj;try{b=d.parseFromString(a,"application/xml"),c=b&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(e){}if(!c||c&&c.getElementsByTagName("parsererror").length>0)throw new Error(rj.DASH_INVALID_XML);return c},ok=function(a){var b=Zj(a,"UTCTiming")[0];if(!b)return null;var c=ck(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(rj.UNSUPPORTED_UTC_TIMING_SCHEME)}return c},pk=function(a,b){void 0===b&&(b={});var c=mk(nk(a),b),d=Yj(c.representationInfo);return Nj(d,c.locations,b.sidxMapping)},qk=function(a){return ok(nk(a))},rk=Math.pow(2,32),sk=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},d=12;0===c.version?(c.earliestPresentationTime=b.getUint32(d),c.firstOffset=b.getUint32(d+4),d+=8):(c.earliestPresentationTime=b.getUint32(d)*rk+b.getUint32(d+4),c.firstOffset=b.getUint32(d+8)*rk+b.getUint32(d+12),d+=16),d+=2;var e=b.getUint16(d);for(d+=2;e>0;d+=12,e--)c.references.push({referenceType:(128&a[d])>>>7,referencedSize:2147483647&b.getUint32(d),subsegmentDuration:b.getUint32(d+4),startsWithSap:!!(128&a[d+8]),sapType:(112&a[d+8])>>>4,sapDeltaTime:268435455&b.getUint32(d+8)});return c},tk=sk,uk=function(a){return a.toString(2).length},vk=function(a){return Math.ceil(uk(a)/8)},wk=function(a){return ArrayBuffer.isView(a)},xk=function(a){return a instanceof Uint8Array?a:(Array.isArray(a)||wk(a)||a instanceof ArrayBuffer||(a="number"!=typeof a||"number"==typeof a&&a!==a?0:[a]),new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0))},yk=uc.BigInt||Number,zk=[yk("0x1"),yk("0x100"),yk("0x10000"),yk("0x1000000"),yk("0x100000000"),yk("0x10000000000"),yk("0x1000000000000"),yk("0x100000000000000"),yk("0x10000000000000000")],Ak=function(a,b){var c=void 0===b?{}:b,d=c.signed,e=void 0!==d&&d,f=c.le,g=void 0!==f&&f;a=xk(a);var h=g?"reduce":"reduceRight",i=a[h]?a[h]:Array.prototype[h],j=i.call(a,function(b,c,d){var e=g?d:Math.abs(d+1-a.length);return b+yk(c)*zk[e]},yk(0));if(e){var k=zk[a.length]/yk(2)-yk(1);j=yk(j),j>k&&(j-=k,j-=k,j-=yk(2))}return Number(j)},Bk=function(a,b){var c=void 0===b?{}:b,d=c.le,e=void 0!==d&&d;("bigint"!=typeof a&&"number"!=typeof a||"number"==typeof a&&a!==a)&&(a=0),a=yk(a);for(var f=vk(a),g=new Uint8Array(new ArrayBuffer(f)),h=0;h<f;h++){var i=e?h:Math.abs(h+1-g.length);g[i]=Number(a/zk[h]&yk(255)),a<0&&(g[i]=Math.abs(~g[i]),g[i]-=0===h?1:2)}return g},Ck=function(a,b){if("string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a)return new Uint8Array;b||(a=unescape(encodeURIComponent(a)));for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return c},Dk=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b=b.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!=typeof a}),b.length<=1)return xk(b[0]);var d=b.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0),e=new Uint8Array(d),f=0;return b.forEach(function(a){a=xk(a),e.set(a,f),f+=a.byteLength}),e},Ek=function(a,b,c){var d=void 0===c?{}:c,e=d.offset,f=void 0===e?0:e,g=d.mask,h=void 0===g?[]:g;a=xk(a),b=xk(b);var i=b.every?b.every:Array.prototype.every;return b.length&&a.length-f>=b.length&&i.call(b,function(b,c){var d=h[c]?h[c]&a[f+c]:a[f+c];return b===d})},Fk=xk([73,68,51]),Gk=function(a,b){void 0===b&&(b=0),a=xk(a);var c=a[b+5],d=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],e=(16&c)>>4;return e?d+20:d+10},Hk=function bq(a,b){return void 0===b&&(b=0),a=xk(a),a.length-b<10||!Ek(a,Fk,{offset:b})?b:(b+=Gk(a,b),bq(a,b))},Ik=function(a){return"string"==typeof a?Ck(a):"number"==typeof a?a:a},Jk=function(a){return Array.isArray(a)?a.map(function(a){return Ik(a)}):[Ik(a)]},Kk=function cq(a,b,c){void 0===c&&(c=!1),b=Jk(b),a=xk(a);var d=[];if(!b.length)return d;for(var e=0;e<a.length;){var f=(a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3])>>>0,g=a.subarray(e+4,e+8);if(0===f)break;var h=e+f;if(h>a.length){if(c)break;h=a.length}var i=a.subarray(e+8,h);Ek(g,b[0])&&(1===b.length?d.push(i):d.push.apply(d,cq(i,b.slice(1),c))),e=h}return d},Lk={EBML:xk([26,69,223,163]),DocType:xk([66,130]),Segment:xk([24,83,128,103]),SegmentInfo:xk([21,73,169,102]),Tracks:xk([22,84,174,107]),Track:xk([174]),TrackNumber:xk([215]),DefaultDuration:xk([35,227,131]),TrackEntry:xk([174]),TrackType:xk([131]),FlagDefault:xk([136]),CodecID:xk([134]),CodecPrivate:xk([99,162]),VideoTrack:xk([224]),AudioTrack:xk([225]),Cluster:xk([31,67,182,117]),Timestamp:xk([231]),TimestampScale:xk([42,215,177]),BlockGroup:xk([160]),BlockDuration:xk([155]),Block:xk([161]),SimpleBlock:xk([163])},Mk=[128,64,32,16,8,4,2,1],Nk=function(a){for(var b=1,c=0;c<Mk.length&&!(a&Mk[c]);c++)b++;return b},Ok=function(a,b,c,d){void 0===c&&(c=!0),void 0===d&&(d=!1);var e=Nk(a[b]),f=a.subarray(b,b+e);return c&&(f=Array.prototype.slice.call(a,b,b+e),f[0]^=Mk[e-1]),{length:e,value:Ak(f,{signed:d}),bytes:f}},Pk=function dq(a){return"string"==typeof a?a.match(/.{1,2}/g).map(function(a){return dq(a)}):"number"==typeof a?Bk(a):a},Qk=function(a){return Array.isArray(a)?a.map(function(a){return Pk(a)}):[Pk(a)]},Rk=function eq(a,b,c){if(c>=b.length)return b.length;var d=Ok(b,c,!1);if(Ek(a.bytes,d.bytes))return c;var e=Ok(b,c+d.length);return eq(a,b,c+e.length+e.value+d.length)},Sk=function fq(a,b){b=Qk(b),a=xk(a);var c=[];if(!b.length)return c;for(var d=0;d<a.length;){var e=Ok(a,d,!1),f=Ok(a,d+e.length),g=d+e.length+f.length;127===f.value&&(f.value=Rk(e,a,g),f.value!==a.length&&(f.value-=g));var h=g+f.value>a.length?a.length:g+f.value,i=a.subarray(g,h);Ek(b[0],e.bytes)&&(1===b.length?c.push(i):c=c.concat(fq(i,b.slice(1))));var j=e.length+f.length+i.length;d+=j}return c},Tk=xk([0,0,0,1]),Uk=xk([0,0,1]),Vk=xk([0,0,3]),Wk=function(a){for(var b=[],c=1;c<a.length-2;)Ek(a.subarray(c,c+3),Vk)&&(b.push(c+2),c++),c++;if(0===b.length)return a;var d=a.length-b.length,e=new Uint8Array(d),f=0;for(c=0;c<d;f++,c++)f===b[0]&&(f++,b.shift()),e[c]=a[f];return e},Xk=function(a,b,c,d){void 0===d&&(d=1/0),a=xk(a),c=[].concat(c);for(var e,f=0,g=0;f<a.length&&(g<d||e);){var h=void 0;if(Ek(a.subarray(f),Tk)?h=4:Ek(a.subarray(f),Uk)&&(h=3),h){if(g++,e)return Wk(a.subarray(e,f));var i=void 0;"h264"===b?i=31&a[f+h]:"h265"===b&&(i=a[f+h]>>1&63),c.indexOf(i)!==-1&&(e=f+h),f+=h+("h264"===b?1:2)}else f++}return a.subarray(0,0)},Yk=function(a,b,c){return Xk(a,"h264",b,c)},Zk=function(a,b,c){return Xk(a,"h265",b,c)},$k={webm:xk([119,101,98,109]),matroska:xk([109,97,116,114,111,115,107,97]),flac:xk([102,76,97,67]),ogg:xk([79,103,103,83]),ac3:xk([11,119]),riff:xk([82,73,70,70]),avi:xk([65,86,73]),wav:xk([87,65,86,69]),"3gp":xk([102,116,121,112,51,103]),mp4:xk([102,116,121,112]),fmp4:xk([115,116,121,112]),mov:xk([102,116,121,112,113,116]),moov:xk([109,111,111,118]),moof:xk([109,111,111,102])},_k={aac:function(a){var b=Hk(a);return Ek(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=Hk(a);return Ek(a,[255,2],{offset:b,mask:[255,6]})},webm:function(a){var b=Sk(a,[Lk.EBML,Lk.DocType])[0];return Ek(b,$k.webm)},mkv:function(a){var b=Sk(a,[Lk.EBML,Lk.DocType])[0];return Ek(b,$k.matroska)},mp4:function(a){return!_k["3gp"](a)&&!_k.mov(a)&&(!(!Ek(a,$k.mp4,{offset:4})&&!Ek(a,$k.fmp4,{offset:4}))||(!(!Ek(a,$k.moof,{offset:4})&&!Ek(a,$k.moov,{offset:4}))||void 0))},mov:function(a){return Ek(a,$k.mov,{offset:4})},"3gp":function(a){return Ek(a,$k["3gp"],{offset:4})},ac3:function(a){var b=Hk(a);return Ek(a,$k.ac3,{offset:b})},ts:function(a){if(a.length<189&&a.length>=1)return 71===a[0];for(var b=0;b+188<a.length&&b<188;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=Hk(a);return Ek(a,$k.flac,{offset:b})},ogg:function(a){return Ek(a,$k.ogg)},avi:function(a){return Ek(a,$k.riff)&&Ek(a,$k.avi,{offset:8})},wav:function(a){return Ek(a,$k.riff)&&Ek(a,$k.wav,{offset:8})},h264:function(a){return Yk(a,7,3).length},h265:function(a){return Zk(a,[32,33],3).length}},al=Object.keys(_k).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);al.forEach(function(a){var b=_k[a];_k[a]=function(a){return b(xk(a))}});var bl,cl,dl,el,fl,gl,hl,il=_k,jl=function(a){a=xk(a);for(var b=0;b<al.length;b++){var c=al[b];if(il[c](a))return c}return""},kl=function(a){return Kk(a,["moof"]).length>0},ll=9e4;bl=function(a){return a*ll},cl=function(a,b){return a*b},dl=function(a){return a/ll},el=function(a,b){return a/b},fl=function(a,b){return bl(el(a,b))},gl=function(a,b){return cl(dl(a),b)},hl=function(a,b,c){return dl(c?a:a-b)};var ml,nl={ONE_SECOND_IN_TS:ll,secondsToVideoTs:bl,secondsToAudioTs:cl,videoTsToSeconds:dl,audioTsToSeconds:el,audioTsToVideoTs:fl,videoTsToAudioTs:gl,metadataTsToSeconds:hl},ol=nl.ONE_SECOND_IN_TS,pl=Kh,ql=function(a,b,c){return a&&c&&c.responseURL&&b!==c.responseURL?c.responseURL:b},rl=function(a){return hb.log.debug?hb.log.debug.bind(hb,"VHS:",a+" >"):function(){}},sl=1/30,tl=3*sl,ul=function(a,b){var c,d=[];if(a&&a.length)for(c=0;c<a.length;c++)b(a.start(c),a.end(c))&&d.push([a.start(c),a.end(c)]);return hb.createTimeRanges(d)},vl=function(a,b){return ul(a,function(a,c){return a-tl<=b&&c+tl>=b})},wl=function(a,b){return ul(a,function(a){return a-sl>=b})},xl=function(a){if(a.length<2)return hb.createTimeRanges();for(var b=[],c=1;c<a.length;c++){var d=a.end(c-1),e=a.start(c);b.push([d,e])}return hb.createTimeRanges(b)},yl=function(a,b){var c=null,d=null,e=0,f=[],g=[];if(!(a&&a.length&&b&&b.length))return hb.createTimeRange();for(var h=a.length;h--;)f.push({time:a.start(h),type:"start"}),f.push({time:a.end(h),type:"end"});for(h=b.length;h--;)f.push({time:b.start(h),type:"start"}),f.push({time:b.end(h),type:"end"});for(f.sort(function(a,b){return a.time-b.time}),h=0;h<f.length;h++)"start"===f[h].type?(e++,2===e&&(c=f[h].time)):"end"===f[h].type&&(e--,1===e&&(d=f[h].time)),null!==c&&null!==d&&(g.push([c,d]),c=null,d=null);return hb.createTimeRanges(g)},zl=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},Al=function(a,b,c){void 0===c&&(c=1);var d=a.length?a.end(a.length-1):0;return(d-b)/c},Bl=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},Cl=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1},Dl=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},El=hb.createTimeRange,Fl=function(a){return(a.segments||[]).reduce(function(a,b,c){return b.parts?b.parts.forEach(function(d,e){a.push({duration:d.duration,segmentIndex:c,partIndex:e,part:d,segment:b})}):a.push({duration:b.duration,segmentIndex:c,partIndex:null,segment:b,part:null}),a},[])},Gl=function(a){var b=a.segments&&a.segments.length&&a.segments[a.segments.length-1];return b&&b.parts||[]},Hl=function(a){var b=a.preloadSegment;if(b){var c=b.parts,d=b.preloadHints,e=(d||[]).reduce(function(a,b){return a+("PART"===b.type?1:0)},0);return e+=c&&c.length?c.length:0}},Il=function(a,b){if(b.endList)return 0;if(a&&a.suggestedPresentationDelay)return a.suggestedPresentationDelay;var c=Gl(b).length>0;return c&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:c&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:b.targetDuration?3*b.targetDuration:0},Jl=function(a,b){var c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if("undefined"!=typeof e.start)return{result:e.start,precise:!0};if("undefined"!=typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if(e=a.segments[d],"undefined"!=typeof e.end)return{result:c+e.end,precise:!0};if(c+=e.duration,"undefined"!=typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},Kl=function(a,b){for(var c,d=0,e=b-a.mediaSequence;e<a.segments.length;e++){if(c=a.segments[e],"undefined"!=typeof c.start)return{result:c.start-d,precise:!0};if(d+=c.duration,"undefined"!=typeof c.end)return{result:c.end-d,precise:!0}}return{result:-1,precise:!1}},Ll=function(a,b,c){if("undefined"==typeof b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence)return 0;var d=Jl(a,b);if(d.precise)return d.result;var e=Kl(a,b);return e.precise?e.result:d.result+c},Ml=function(a,b,c){if(!a)return 0;if("number"!=typeof c&&(c=0),"undefined"==typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return uc.Infinity}return Ll(a,b,c)},Nl=function(a){var b=a.defaultDuration,c=a.durationList,d=a.startIndex,e=a.endIndex,f=0;if(d>e){var g=[e,d];d=g[0],e=g[1]}if(d<0){for(var h=d;h<Math.min(0,e);h++)f+=b;d=0}for(var i=d;i<e;i++)f+=c[i].duration;return f},Ol=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return Ml(a);if(null===b)return null;b=b||0;var e=Ll(a,a.mediaSequence+a.segments.length,b);return c&&(d="number"==typeof d?d:Il(null,a),e-=d),Math.max(0,e)},Pl=function(a,b,c){var d=!0,e=b||0,f=Ol(a,b,d,c);return null===f?El():El(e,f)},Ql=function(a){for(var b=a.playlist,c=a.currentTime,d=a.startingSegmentIndex,e=a.startingPartIndex,f=a.startTime,g=a.experimentalExactManifestTimings,h=c-f,i=Fl(b),j=0,k=0;k<i.length;k++){var l=i[k];if(d===l.segmentIndex&&("number"!=typeof e||"number"!=typeof l.partIndex||e===l.partIndex)){j=k;break}}if(h<0){if(j>0)for(var m=j-1;m>=0;m--){var n=i[m];if(h+=n.duration,g){if(h<0)continue}else if(h+sl<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:f-Nl({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:m})}}return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c}}if(j<0){for(var o=j;o<0;o++)if(h-=b.targetDuration,h<0)return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c};j=0}for(var p=j;p<i.length;p++){var q=i[p];if(h-=q.duration,g){if(h>0)continue}else if(h-sl>=0)continue;return{partIndex:q.partIndex,segmentIndex:q.segmentIndex,startTime:f+Nl({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:p})}}return{segmentIndex:i[i.length-1].segmentIndex,partIndex:i[i.length-1].partIndex,startTime:c}},Rl=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},Sl=function(a){return a.excludeUntil&&a.excludeUntil===1/0},Tl=function(a){var b=Rl(a);return!a.disabled&&!b},Ul=function(a){return a.disabled},Vl=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},Wl=function(a,b){return b.attributes&&b.attributes[a]},Xl=function(a,b,c,d){if(void 0===d&&(d=0),!Wl("BANDWIDTH",c))return NaN;var e=a*c.attributes.BANDWIDTH;return(e-8*d)/b},Yl=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return!!Tl(a)&&(a.attributes.BANDWIDTH||0)<c}).length},Zl=function(a,b){return!(!a&&!b||!a&&b||a&&!b)&&(a===b||(!(!a.id||!b.id||a.id!==b.id)||(!(!a.resolvedUri||!b.resolvedUri||a.resolvedUri!==b.resolvedUri)||!(!a.uri||!b.uri||a.uri!==b.uri))))},$l=function(a,b){var c=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{},d=!1;for(var e in c){for(var f in c[e])if(d=b(c[e][f]))break;if(d)break}return!!d},_l=function(a){if(!a||!a.playlists||!a.playlists.length){var b=$l(a,function(a){return a.playlists&&a.playlists.length||a.uri});return b}for(var c=function(b){var c=a.playlists[b],d=c.attributes&&c.attributes.CODECS;if(d&&d.split(",").every(function(a){return bi(a)}))return"continue";var e=$l(a,function(a){return Zl(c,a)});return e?"continue":{v:!1}},d=0;d<a.playlists.length;d++){var e=c(d);if("continue"!==e&&"object"==typeof e)return e.v}return!0},am={liveEdgeDelay:Il,duration:Ml,seekable:Pl,getMediaInfoForTime:Ql,isEnabled:Tl,isDisabled:Ul,isBlacklisted:Rl,isIncompatible:Sl,playlistEnd:Ol,isAes:Vl,hasAttribute:Wl,estimateSegmentRequestTime:Xl,isLowestEnabledRendition:Yl,isAudioOnly:_l,playlistMatch:Zl},bm=hb.log,cm=function(a,b){return a+"-"+b},dm=function(a){var b=a.onwarn,c=a.oninfo,d=a.manifestString,e=a.customTagParsers,f=void 0===e?[]:e,g=a.customTagMappers,h=void 0===g?[]:g,i=a.experimentalLLHLS,j=new Wh;b&&j.on("warn",b),c&&j.on("info",c),f.forEach(function(a){return j.addParser(a)}),h.forEach(function(a){return j.addTagMapper(a)}),j.push(d),j.end();var k=j.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(a){k.hasOwnProperty(a)&&delete k[a]}),k.segments&&k.segments.forEach(function(a){["parts","preloadHints"].forEach(function(b){a.hasOwnProperty(b)&&delete a[b]})})),!k.targetDuration){var l=10;k.segments&&k.segments.length&&(l=k.segments.reduce(function(a,b){return Math.max(a,b.duration)},0)),b&&b("manifest has no targetDuration defaulting to "+l),k.targetDuration=l}var m=Gl(k);if(m.length&&!k.partTargetDuration){var n=m.reduce(function(a,b){return Math.max(a,b.duration)},0);b&&(b("manifest has no partTargetDuration defaulting to "+n),bm.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),k.partTargetDuration=n}return k},em=function(a,b){a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(c){if(a.mediaGroups[c])for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d]){var f=a.mediaGroups[c][d][e];b(f,c,d,e)}})},fm=function(a){var b=a.playlist,c=a.uri,d=a.id;b.id=d,b.playlistErrors_=0,c&&(b.uri=c),b.attributes=b.attributes||{}},gm=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];fm({playlist:c,id:cm(b,c.uri)}),c.resolvedUri=pl(a.uri,c.uri),a.playlists[c.id]=c,a.playlists[c.uri]=c,c.attributes.BANDWIDTH||bm.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},hm=function(a){em(a,function(b){b.uri&&(b.resolvedUri=pl(a.uri,b.uri))})},im=function(a,b){var c=cm(0,b),d={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:uc.location.href,resolvedUri:uc.location.href,playlists:[{uri:b,id:c,resolvedUri:b,attributes:{}}]};return d.playlists[c]=d.playlists[0],d.playlists[b]=d.playlists[0],d},jm=function(a,b){a.uri=b;for(var c=0;c<a.playlists.length;c++)if(!a.playlists[c].uri){var d="placeholder-uri-"+c;a.playlists[c].uri=d}var e=_l(a);em(a,function(b,c,d,f){var g="placeholder-uri-"+c+"-"+d+"-"+f;if(!b.playlists||!b.playlists.length){if(e&&"AUDIO"===c&&!b.uri)for(var h=0;h<a.playlists.length;h++){var i=a.playlists[h];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===d)return}b.playlists=[Oc({},b)]}b.playlists.forEach(function(b,c){var d=cm(c,g);b.uri?b.resolvedUri=b.resolvedUri||pl(a.uri,b.uri):(b.uri=0===c?g:d,b.resolvedUri=b.uri),b.id=b.id||d,b.attributes=b.attributes||{},a.playlists[b.id]=b,a.playlists[b.uri]=b})}),gm(a),hm(a)},km=hb.mergeOptions,lm=hb.EventTarget,mm=function(a,b){if(b.endList)return a;var c=[];if(b.serverControl&&b.serverControl.canBlockReload){var d=b.preloadSegment,e=b.mediaSequence+b.segments.length;if(d){var f=d.parts||[],g=Hl(b)-1;g>-1&&g!==f.length-1&&c.push("_HLS_part="+g),(g>-1||f.length)&&e--}c.unshift("_HLS_msn="+e)}return b.serverControl&&b.serverControl.canSkipUntil&&c.unshift("_HLS_skip="+(b.serverControl.canSkipDateranges?"v2":"YES")),c.forEach(function(b,c){var d=0===c?"?":"&";a+=""+d+b}),a},nm=function(a,b){if(!a)return b;var c=km(a,b);if(a.preloadHints&&!b.preloadHints&&delete c.preloadHints,a.parts&&!b.parts)delete c.parts;else if(a.parts&&b.parts)for(var d=0;d<b.parts.length;d++)a.parts&&a.parts[d]&&(c.parts[d]=km(a.parts[d],b.parts[d]));return!a.skipped&&b.skipped&&(c.skipped=!1),a.preload&&!b.preload&&(c.preload=!1),c},om=function(a,b,c){var d=a.slice(),e=b.slice();c=c||0;for(var f,g=[],h=0;h<e.length;h++){var i=d[h+c],j=e[h];i?(f=i.map||f,g.push(nm(i,j))):(f&&!j.map&&(j.map=f),g.push(j))}return g},pm=function(a,b){!a.resolvedUri&&a.uri&&(a.resolvedUri=pl(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=pl(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=pl(b,a.map.uri)),a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=pl(b,a.map.key.uri)),a.parts&&a.parts.length&&a.parts.forEach(function(a){a.resolvedUri||(a.resolvedUri=pl(b,a.uri))}),a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(function(a){a.resolvedUri||(a.resolvedUri=pl(b,a.uri))})},qm=function(a){var b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints)for(var d=0;d<c.preloadHints.length;d++)if("MAP"===c.preloadHints[d].type)return b;c.duration=a.targetDuration,c.preload=!0,b.push(c)}return b},rm=function(a,b){return a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence},sm=function(a,b,c){void 0===c&&(c=rm);var d=km(a,{}),e=d.playlists[b.id];if(!e)return null;if(c(e,b))return null;b.segments=qm(b);var f=km(e,b);if(f.preloadSegment&&!b.preloadSegment&&delete f.preloadSegment,e.segments){if(b.skip){b.segments=b.segments||[];for(var g=0;g<b.skip.skippedSegments;g++)b.segments.unshift({skipped:!0})}f.segments=om(e.segments,b.segments,b.mediaSequence-e.mediaSequence)}f.segments.forEach(function(a){pm(a,f.resolvedUri)});for(var h=0;h<d.playlists.length;h++)d.playlists[h].id===b.id&&(d.playlists[h]=f);return d.playlists[b.id]=f,d.playlists[b.uri]=f,em(a,function(a,c,d,e){if(a.playlists)for(var f=0;f<a.playlists.length;f++)b.id===a.playlists[f].id&&(a.playlists[f]=b)}),d},tm=function(a,b){var c=a.segments[a.segments.length-1],d=c&&c.parts&&c.parts[c.parts.length-1],e=d&&d.duration||c&&c.duration;return b&&e?1e3*e:500*(a.partTargetDuration||a.targetDuration||10)},um=function(a){function b(b,c,d){var e;if(void 0===d&&(d={}),e=a.call(this)||this,!b)throw new Error("A non-empty playlist URL or object is required");e.logger_=rl("PlaylistLoader");var f=d,g=f.withCredentials,h=void 0!==g&&g,i=f.handleManifestRedirects,j=void 0!==i&&i;e.src=b,e.vhs_=c,e.withCredentials=h,e.handleManifestRedirects=j;var k=c.options_;return e.customTagParsers=k&&k.customTagParsers||[],e.customTagMappers=k&&k.customTagMappers||[],e.experimentalLLHLS=k&&k.experimentalLLHLS||!1,e.state="HAVE_NOTHING",e.handleMediaupdatetimeout_=e.handleMediaupdatetimeout_.bind(Yd(e)),e.on("mediaupdatetimeout",e.handleMediaupdatetimeout_),e}Zd(b,a);var c=b.prototype;return c.handleMediaupdatetimeout_=function(){var a=this;if("HAVE_METADATA"===this.state){var b=this.media(),c=pl(this.master.uri,b.uri);this.experimentalLLHLS&&(c=mm(c,b)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:c,withCredentials:this.withCredentials},function(b,c){if(a.request)return b?a.playlistRequestError(a.request,a.media(),"HAVE_METADATA"):void a.haveMetadata({playlistString:a.request.responseText,url:a.media().uri,id:a.media().id})})}},c.playlistRequestError=function(a,b,c){var d=b.uri,e=b.id;this.request=null,c&&(this.state=c),this.error={playlist:this.master.playlists[e],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:a.status>=500?4:2},this.trigger("error")},c.parseManifest_=function(a){var b=this,c=a.url,d=a.manifestString;return dm({onwarn:function(a){var d=a.message;return b.logger_("m3u8-parser warn for "+c+": "+d)},oninfo:function(a){var d=a.message;return b.logger_("m3u8-parser info for "+c+": "+d)},manifestString:d,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},c.haveMetadata=function(a){var b=a.playlistString,c=a.playlistObject,d=a.url,e=a.id;this.request=null,this.state="HAVE_METADATA";var f=c||this.parseManifest_({url:d,manifestString:b});f.lastRequest=Date.now(),fm({playlist:f,uri:d,id:e});var g=sm(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,g?(this.master=g,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(tm(this.media(),!!g)),this.trigger("loadedplaylist")},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),uc.clearTimeout(this.mediaUpdateTimeout),uc.clearTimeout(this.finalRenditionTimeout),this.off()},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof a){if(!this.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}if(uc.clearTimeout(this.finalRenditionTimeout),b){var d=(a.partTargetDuration||a.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=uc.setTimeout(this.media.bind(this,a,!1),d))}var e=this.state,f=!this.media_||a.id!==this.media_.id,g=this.master.playlists[a.id];if(g&&g.endList||a.endList&&a.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,void(f&&(this.trigger("mediachanging"),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(tm(a,!0)),f){if(this.state="SWITCHING_MEDIA",this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,d){if(c.request){if(a.lastRequest=Date.now(),a.resolvedUri=ql(c.handleManifestRedirects,a.resolvedUri,d),b)return c.playlistRequestError(c.request,a,e);c.haveMetadata({playlistString:d.responseText,url:a.uri,id:a.id}),"HAVE_MASTER"===e?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}},c.pause=function(){this.mediaUpdateTimeout&&(uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},c.load=function(a){var b=this;this.mediaUpdateTimeout&&(uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var c=this.media();if(a){var d=c?(c.partTargetDuration||c.targetDuration)/2*1e3:5e3;return void(this.mediaUpdateTimeout=uc.setTimeout(function(){b.mediaUpdateTimeout=null,b.load()},d))}return this.started?void(c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")):void this.start()},c.updateMediaUpdateTimeout_=function(a){var b=this;this.mediaUpdateTimeout&&(uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=uc.setTimeout(function(){b.mediaUpdateTimeout=null,b.trigger("mediaupdatetimeout"),b.updateMediaUpdateTimeout_(a)},a))},c.start=function(){var a=this;return this.started=!0,"object"==typeof this.src?(this.src.uri||(this.src.uri=uc.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){a.setupInitialPlaylist(a.src)},0)):void(this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(b,c){if(a.request){if(a.request=null,b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.src+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.src=ql(a.handleManifestRedirects,a.src,c);var d=a.parseManifest_({manifestString:c.responseText,url:a.src});a.setupInitialPlaylist(d)}}))},c.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},c.setupInitialPlaylist=function(a){if(this.state="HAVE_MASTER",a.playlists)return this.master=a,jm(this.master,this.srcUri()),a.playlists.forEach(function(a){a.segments=qm(a),a.segments.forEach(function(b){pm(b,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var b=this.srcUri()||uc.location.href;this.master=im(a,b),this.haveMetadata({playlistObject:a,url:b,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},b}(lm),vm=hb.xhr,wm=hb.mergeOptions,xm=function(a,b,c,d){
var e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),c.headers&&(a.responseHeaders=c.headers),b&&"ETIMEDOUT"===b.code&&(a.timedout=!0),b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=new Error("XHR Failed with a response of: "+(a&&(e||a.responseText)))),d(b,a)},ym=function(){var a=function b(a,c){a=wm({timeout:45e3},a);var d=b.beforeRequest||hb.Vhs.xhr.beforeRequest;if(d&&"function"==typeof d){var e=d(a);e&&(a=e)}var f=hb.Vhs.xhr.original===!0?vm:hb.Vhs.xhr,g=f(a,function(a,b){return xm(g,a,b,c)}),h=g.abort;return g.abort=function(){return g.aborted=!0,h.apply(g,arguments)},g.uri=a.uri,g.requestTime=Date.now(),g};return a.original=!0,a},zm=function(a){var b=a.offset+a.length-1,c=a.offset;return"bytes="+c+"-"+b},Am=function(a){var b={};return a.byterange&&(b.Range=zm(a.byterange)),b},Bm=function(a,b){return a.start(b)+"-"+a.end(b)},Cm=function(a,b){var c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")},Dm=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},Em=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},Fm=function(a){var b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")},Gm=function(a){return a.resolvedUri},Hm=function(a){for(var b,c,d=Array.prototype.slice.call(a),e=16,f="",g=0;g<d.length/e;g++)b=d.slice(g*e,g*e+e).map(Cm).join(""),c=d.slice(g*e,g*e+e).map(Dm).join(""),f+=b+" "+c+"\n";return f},Im=function(a){var b=a.bytes;return Hm(b)},Jm=function(a){var b,c="";for(b=0;b<a.length;b++)c+=Bm(a,b)+" ";return c},Km=Object.freeze({__proto__:null,createTransferableMessage:Em,initSegmentId:Fm,segmentKeyId:Gm,hexDump:Hm,tagDump:Im,textRanges:Jm}),Lm=.25,Mm=function(a,b){if(!b.dateTimeObject)return null;var c=b.videoTimingInfo.transmuxerPrependedSeconds,d=b.videoTimingInfo.transmuxedPresentationStart,e=d+c,f=a-e;return new Date(b.dateTimeObject.getTime()+1e3*f)},Nm=function(a){return a.transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds},Om=function(a,b){var c;try{c=new Date(a)}catch(d){return null}if(!b||!b.segments||0===b.segments.length)return null;var e=b.segments[0];if(c<e.dateTimeObject)return null;for(var f=0;f<b.segments.length-1;f++){e=b.segments[f];var g=b.segments[f+1].dateTimeObject;if(c<g)break}var h=b.segments[b.segments.length-1],i=h.dateTimeObject,j=h.videoTimingInfo?Nm(h.videoTimingInfo):h.duration+h.duration*Lm,k=new Date(i.getTime()+1e3*j);return c>k?null:(c>i&&(e=h),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:am.duration(b,b.mediaSequence+b.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},Pm=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c,d=0,e=0;e<b.segments.length&&(c=b.segments[e],d=c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationEnd:d+c.duration,!(a<=d));e++);var f=b.segments[b.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>d){if(a>d+f.duration*Lm)return null;c=f}return{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:d-c.duration,type:c.videoTimingInfo?"accurate":"estimate"}},Qm=function(a,b){var c,d;try{c=new Date(a),d=new Date(b)}catch(e){}var f=c.getTime(),g=d.getTime();return(g-f)/1e3},Rm=function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++){var c=a.segments[b];if(!c.dateTimeObject)return!1}return!0},Sm=function(a){var b=a.playlist,c=a.time,d=void 0===c?void 0:c,e=a.callback;if(!e)throw new Error("getProgramTime: callback must be provided");if(!b||void 0===d)return e({message:"getProgramTime: playlist and time must be provided"});var f=Pm(d,b);if(!f)return e({message:"valid programTime was not found"});if("estimate"===f.type)return e({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:f.estimatedStart});var g={mediaSeconds:d},h=Mm(d,f.segment);return h&&(g.programDateTime=h.toISOString()),e(null,g)},Tm=function gq(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo,g=a.pauseAfterSeek,h=void 0===g||g,i=a.tech,j=a.callback;if(!j)throw new Error("seekToProgramTime: callback must be provided");if("undefined"==typeof b||!c||!f)return j({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!i.hasStarted_)return j({message:"player must be playing a live stream to start buffering"});if(!Rm(c))return j({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});var k=Om(b,c);if(!k)return j({message:b+" was not found in the stream"});var l=k.segment,m=Qm(l.dateTimeObject,b);if("estimate"===k.type)return 0===e?j({message:b+" is not buffered yet. Try again"}):(f(k.estimatedStart+m),void i.one("seeked",function(){gq({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:h,tech:i,callback:j})}));var n=l.start+m,o=function(){return j(null,i.currentTime())};i.one("seeked",o),h&&i.pause(),f(n)},Um=function(a,b){if(4===a.readyState)return b()},Vm=function(a,b,c){var d,e=[],f=!1,g=function(a,b,d,e){return b.abort(),f=!0,c(a,b,d,e)},h=function(a,b){if(!f){if(a)return g(a,b,"",e);var c=b.responseText.substring(e&&e.byteLength||0,b.responseText.length);if(e=Dk(e,Ck(c,!0)),d=d||Hk(e),e.length<10||d&&e.length<d+2)return Um(b,function(){return g(a,b,"",e)});var h=jl(e);return"ts"===h&&e.length<188?Um(b,function(){return g(a,b,"",e)}):!h&&e.length<376?Um(b,function(){return g(a,b,"",e)}):g(null,b,h,e)}},i={uri:a,beforeSend:function(a){a.overrideMimeType("text/plain; charset=x-user-defined"),a.addEventListener("progress",function(b){return b.total,b.loaded,xm(a,null,{statusCode:a.status},h)})}},j=b(i,function(a,b){return xm(j,a,b,h)});return j},Wm=hb.EventTarget,Xm=hb.mergeOptions,Ym=function(a,b){if(!rm(a,b))return!1;if(a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length))return!1;if(!a.sidx&&b.sidx||a.sidx&&!b.sidx)return!1;if(a.segments&&!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(var c=0;c<a.segments.length;c++){var d=a.segments[c],e=b.segments[c];if(d.uri!==e.uri)return!1;if(d.byterange||e.byterange){var f=d.byterange,g=e.byterange;if(f&&!g||!f&&g)return!1;if(f.offset!==g.offset||f.length!==g.length)return!1}}return!0},Zm=function(a){var b=a.masterXml,c=a.srcUrl,d=a.clientOffset,e=a.sidxMapping,f=pk(b,{manifestUri:c,clientOffset:d,sidxMapping:e});return jm(f,c),f},$m=function(a,b,c){for(var d=!0,e=Xm(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod}),f=0;f<b.playlists.length;f++){var g=b.playlists[f];if(g.sidx){var h=Aj(g.sidx);c&&c[h]&&c[h].sidx&&zj(g,c[h].sidx,g.sidx.resolvedUri)}var i=sm(e,g,Ym);i&&(e=i,d=!1)}return em(b,function(a,b,c,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id,h=sm(e,a.playlists[0],Ym);h&&(e=h,e.mediaGroups[b][c][f].playlists[0]=e.playlists[g],d=!1)}}),b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1),d?null:e},_m=function(a,b){var c=Boolean(!a.map&&!b.map),d=c||Boolean(a.map&&b.map&&a.map.byterange.offset===b.map.byterange.offset&&a.map.byterange.length===b.map.byterange.length);return d&&a.uri===b.uri&&a.byterange.offset===b.byterange.offset&&a.byterange.length===b.byterange.length},an=function(a,b){var c={};for(var d in a){var e=a[d],f=e.sidx;if(f){var g=Aj(f);if(!b[g])break;var h=b[g].sidxInfo;_m(h,f)&&(c[g]=b[g])}}return c},bn=function(a,b){var c=an(a.playlists,b),d=c;return em(a,function(a,c,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists;d=Xm(d,an(g,b))}}),d},cn=function(a){function b(b,c,d,e){var f;void 0===d&&(d={}),f=a.call(this)||this,f.masterPlaylistLoader_=e||Yd(f),e||(f.isMaster_=!0);var g=d,h=g.withCredentials,i=void 0!==h&&h,j=g.handleManifestRedirects,k=void 0!==j&&j;if(f.vhs_=c,f.withCredentials=i,f.handleManifestRedirects=k,!b)throw new Error("A non-empty playlist URL or object is required");return f.on("minimumUpdatePeriod",function(){f.refreshXml_()}),f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().id)}),f.state="HAVE_NOTHING",f.loadedPlaylists_={},f.logger_=rl("DashPlaylistLoader"),f.isMaster_?(f.masterPlaylistLoader_.srcUrl=b,f.masterPlaylistLoader_.sidxMapping_={}):f.childPlaylist_=b,f}Zd(b,a);var c=b.prototype;return c.requestErrored_=function(a,b,c){return!this.request||(this.request=null,a?(this.error="object"!=typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2}:a,c&&(this.state=c),this.trigger("error"),!0):void 0)},c.addSidxSegments_=function(a,b,c){var d=this,e=a.sidx&&Aj(a.sidx);if(!a.sidx||!e||this.masterPlaylistLoader_.sidxMapping_[e])return void(this.mediaRequest_=uc.setTimeout(function(){return c(!1)},0));var f=ql(this.handleManifestRedirects,a.sidx.resolvedUri),g=function(f,g){if(!d.requestErrored_(f,g,b)){var h,i=d.masterPlaylistLoader_.sidxMapping_;try{h=tk(xk(g.response).subarray(8))}catch(j){return void d.requestErrored_(j,g,b)}return i[e]={sidxInfo:a.sidx,sidx:h},zj(a,h,a.sidx.resolvedUri),c(!0)}};this.request=Vm(f,this.vhs_.xhr,function(b,c,e,h){if(b)return g(b,c);if(!e||"mp4"!==e)return g({status:c.status,message:"Unsupported "+(e||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:a,internal:!0,blacklistDuration:1/0,code:2},c);var i=a.sidx.byterange,j=i.offset,k=i.length;return h.length>=k+j?g(b,{response:h.subarray(j,j+k),status:c.status,uri:c.uri}):void(d.request=d.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:Am({byterange:a.sidx.byterange})},g))})},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},uc.clearTimeout(this.minimumUpdatePeriodTimeout_),uc.clearTimeout(this.mediaRequest_),uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},c.hasPendingRequest=function(){return this.request||this.mediaRequest_},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"==typeof a){if(!this.masterPlaylistLoader_.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.masterPlaylistLoader_.master.playlists[a]}var d=!this.media_||a.id!==this.media_.id;return d&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,void(d&&(this.trigger("mediachanging"),this.trigger("mediachange")))):void(d&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,c,function(d){b.haveMetadata({startingState:c,playlist:a})})))},c.haveMetadata=function(a){var b=a.startingState,c=a.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[c.id]=c,this.mediaRequest_=null,this.refreshMedia_(c.id),"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")},c.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(uc.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},c.load=function(a){var b=this;uc.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var c=this.media();if(a){var d=c?c.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=uc.setTimeout(function(){return b.load()},d))}return this.started?void(c&&!c.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")):void this.start()},c.start=function(){var a=this;return this.started=!0,this.isMaster_?void this.requestMaster_(function(b,c){a.haveMaster_(),a.hasPendingRequest()||a.media_||a.media(a.masterPlaylistLoader_.master.playlists[0])}):void(this.mediaRequest_=uc.setTimeout(function(){return a.haveMaster_()},0))},c.requestMaster_=function(a){var b=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.requestErrored_(c,d))return void("HAVE_NOTHING"===b.state&&(b.started=!1));var e=d.responseText!==b.masterPlaylistLoader_.masterXml_;return b.masterPlaylistLoader_.masterXml_=d.responseText,d.responseHeaders&&d.responseHeaders.date?b.masterLoaded_=Date.parse(d.responseHeaders.date):b.masterLoaded_=Date.now(),b.masterPlaylistLoader_.srcUrl=ql(b.handleManifestRedirects,b.masterPlaylistLoader_.srcUrl,d),e?(b.handleMaster_(),void b.syncClientServerClock_(function(){return a(d,e)})):a(d,e)})},c.syncClientServerClock_=function(a){var b=this,c=qk(this.masterPlaylistLoader_.masterXml_);return null===c?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===c.method?(this.masterPlaylistLoader_.clientOffset_=c.value-Date.now(),a()):void(this.request=this.vhs_.xhr({uri:pl(this.masterPlaylistLoader_.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.masterPlaylistLoader_.clientOffset_=b.masterLoaded_-Date.now(),a();var f;f="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText),b.masterPlaylistLoader_.clientOffset_=f-Date.now(),a()}}))},c.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},c.handleMaster_=function(){this.mediaRequest_=null;var a=Zm({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),b=this.masterPlaylistLoader_.master;b&&(a=$m(b,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a?a:b;var c=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return c&&c!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=c),(!b||a&&a.minimumUpdatePeriod!==b.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},c.updateMinimumUpdatePeriodTimeout_=function(){var a=this.masterPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null),a.minimumUpdatePeriodTimeout_&&(uc.clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);var b=a.master&&a.master.minimumUpdatePeriod;return 0===b&&(a.media()?b=1e3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_))),"number"!=typeof b||b<=0?void(b<0&&this.logger_("found invalid minimumUpdatePeriod of "+b+", not setting a timeout")):void this.createMUPTimeout_(b)},c.createMUPTimeout_=function(a){var b=this.masterPlaylistLoader_;b.minimumUpdatePeriodTimeout_=uc.setTimeout(function(){b.minimumUpdatePeriodTimeout_=null,b.trigger("minimumUpdatePeriod"),b.createMUPTimeout_(a)},a)},c.refreshXml_=function(){var a=this;this.requestMaster_(function(b,c){c&&(a.media_&&(a.media_=a.masterPlaylistLoader_.master.playlists[a.media_.id]),a.masterPlaylistLoader_.sidxMapping_=bn(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.sidxMapping_),a.addSidxSegments_(a.media(),a.state,function(b){a.refreshMedia_(a.media().id)}))})},c.refreshMedia_=function(a){var b=this;if(!a)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var c=this.masterPlaylistLoader_.master.playlists,d=!this.media_||this.media_!==c[a];if(d?this.media_=c[a]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var e=function f(){b.media().endList||(b.mediaUpdateTimeout=uc.setTimeout(function(){b.trigger("mediaupdatetimeout"),f()},tm(b.media(),Boolean(d))))};e()}this.trigger("loadedplaylist")},b}(Wm),dn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},en=function(a){for(var b=new Uint8Array(new ArrayBuffer(a.length)),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},fn=function(a){return a.on=a.addEventListener,a.off=a.removeEventListener,a},gn=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(b){var c=new BlobBuilder;return c.append(a),URL.createObjectURL(c.getBlob())}},hn=function(a){return function(){var b=gn(a),c=fn(new Worker(b));c.objURL=b;var d=c.terminate;return c.on=c.addEventListener,c.off=c.removeEventListener,c.terminate=function(){return URL.revokeObjectURL(b),d.call(this)},c}},jn=function(a){return"var browserWorkerPolyFill = "+fn.toString()+";\nbrowserWorkerPolyFill(self);\n"+a},kn=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)},ln=jn(kn(function(){var a=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};a.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},a.prototype.push=function(a){this.trigger("data",a)},a.prototype.flush=function(a){this.trigger("done",a)},a.prototype.partialFlush=function(a){this.trigger("partialdone",a)},a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},a.prototype.reset=function(a){this.trigger("reset",a)};var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=a,M=Math.pow(2,32)-1;!function(){var a;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in x)x.hasOwnProperty(a)&&(x[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);y=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),z=new Uint8Array([0,0,0,1]),B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:B,audio:C},G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),F=new Uint8Array([0,0,0,0,0,0,0,0]),H=new Uint8Array([0,0,0,0,0,0,0,0]),I=H,J=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=H,E=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),b=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new Uint8Array(f+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},c=function(){return b(x.dinf,b(x.dref,G))},d=function(a){return b(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},e=function(){return b(x.ftyp,y,z,y,A)},q=function(a){return b(x.hdlr,D[a])},f=function(a){return b(x.mdat,a)},p=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(c[12]=a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=255&a.samplerate),b(x.mdhd,c)},o=function(a){return b(x.mdia,p(a),q(a.type),h(a))},g=function(a){return b(x.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},h=function(a){return b(x.minf,"video"===a.type?b(x.vmhd,E):b(x.smhd,F),c(),s(a))},i=function(a,c){for(var d=[],e=c.length;e--;)d[e]=u(c[e]);return b.apply(null,[x.moof,g(a)].concat(d))},j=function(a){for(var c=a.length,d=[];c--;)d[c]=m(a[c]);return b.apply(null,[x.moov,l(4294967295)].concat(d).concat(k(a)))},k=function(a){for(var c=a.length,d=[];c--;)d[c]=v(a[c]);return b.apply(null,[x.mvex].concat(d))},l=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return b(x.mvhd,c)},r=function(a){var c,d,e=a.samples||[],f=new Uint8Array(4+e.length);for(d=0;d<e.length;d++)c=e[d].flags,f[d+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return b(x.sdtp,f)},s=function(a){return b(x.stbl,t(a),b(x.stts,K),b(x.stsc,I),b(x.stsz,J),b(x.stco,H))},function(){var a,c;t=function(d){return b(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===d.type?a(d):c(d))},a=function(a){var c,d,e=a.sps||[],f=a.pps||[],g=[],h=[];for(c=0;c<e.length;c++)g.push((65280&e[c].byteLength)>>>8),g.push(255&e[c].byteLength),g=g.concat(Array.prototype.slice.call(e[c]));for(c=0;c<f.length;c++)h.push((65280&f[c].byteLength)>>>8),h.push(255&f[c].byteLength),h=h.concat(Array.prototype.slice.call(f[c]));if(d=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),b(x.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([e.length],g,[f.length],h))),b(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var i=a.sarRatio[0],j=a.sarRatio[1];d.push(b(x.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&j)>>24,(16711680&j)>>16,(65280&j)>>8,255&j])))}return b.apply(null,d)},c=function(a){return b(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),d(a))}}(),n=function(a){var c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return b(x.tkhd,c)},u=function(a){var c,d,e,f,g,h,i;return c=b(x.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=Math.floor(a.baseMediaDecodeTime/(M+1)),i=Math.floor(a.baseMediaDecodeTime%(M+1)),d=b(x.tfdt,new Uint8Array([1,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,255&h,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),g=92,"audio"===a.type?(e=w(a,g),b(x.traf,c,d,e)):(f=r(a),e=w(a,f.length+g),b(x.traf,c,d,e,f))},m=function(a){return a.duration=a.duration||4294967295,b(x.trak,n(a),o(a))},v=function(a){var c=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(c[c.length-1]=0),b(x.trex,c)},function(){var a,c,d;d=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},c=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+16*h.length,g=d(h,c),f=new Uint8Array(g.length+16*h.length),f.set(g),e=g.length,j=0;j<h.length;j++)i=h[j],f[e++]=(4278190080&i.duration)>>>24,f[e++]=(16711680&i.duration)>>>16,f[e++]=(65280&i.duration)>>>8,f[e++]=255&i.duration,f[e++]=(4278190080&i.size)>>>24,f[e++]=(16711680&i.size)>>>16,f[e++]=(65280&i.size)>>>8,f[e++]=255&i.size,f[e++]=i.flags.isLeading<<2|i.flags.dependsOn,f[e++]=i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,f[e++]=61440&i.flags.degradationPriority,f[e++]=15&i.flags.degradationPriority,f[e++]=(4278190080&i.compositionTimeOffset)>>>24,f[e++]=(16711680&i.compositionTimeOffset)>>>16,f[e++]=(65280&i.compositionTimeOffset)>>>8,f[e++]=255&i.compositionTimeOffset;return b(x.trun,f)},a=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+8*h.length,g=d(h,c),e=new Uint8Array(g.length+8*h.length),e.set(g),f=g.length,j=0;j<h.length;j++)i=h[j],e[f++]=(4278190080&i.duration)>>>24,e[f++]=(16711680&i.duration)>>>16,e[f++]=(65280&i.duration)>>>8,e[f++]=255&i.duration,e[f++]=(4278190080&i.size)>>>24,e[f++]=(16711680&i.size)>>>16,e[f++]=(65280&i.size)>>>8,e[f++]=255&i.size;return b(x.trun,e)},w=function(b,d){return"audio"===b.type?a(b,d):c(b,d)}}();var N,O,P,Q,R,S,T,U,V={ftyp:e,mdat:f,moof:i,moov:j,initSegment:function(a){var b,c=e(),d=j(a);return b=new Uint8Array(c.byteLength+d.byteLength),b.set(c),b.set(d,c.byteLength),b}},W=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0,b=0;b<a.length;b++)c=a[b],"access_unit_delimiter_rbsp"===c.nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},X=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},Y=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},Z=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},$=function(a,b){var c=Z();return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},_=function(a,b){var c,d,e,f,g,h=b||0,i=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)g=f[d],e=$(g,h),h+=e.size,i.push(e);return i},aa=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l},ba=function(a,b){var c,d=b||0,e=[];return c=$(a,d),e.push(c),e},ca=function(a){var b,c,d=0,e=a.byteLength,f=a.length,g=e+4*f,h=new Uint8Array(g),i=new DataView(h.buffer);for(b=0;b<a.length;b++)c=a[b],i.setUint32(d,c.data.byteLength),d+=4,h.set(c.data,d),d+=c.data.byteLength;return h},da={groupNalsIntoFrames:W,groupFramesIntoGops:X,extendFirstKeyFrame:Y,generateSampleTable:_,concatenateNalData:aa,generateSampleTableForFrame:ba,concatenateNalDataForFrame:ca},ea=[33,16,5,32,164,27],fa=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ga=function(a){for(var b=[];a--;)b.push(0);return b},ha=function(a){return Object.keys(a).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})},ia=function(){if(!N){var a={96e3:[ea,[227,64],ga(154),[56]],88200:[ea,[231],ga(170),[56]],64e3:[ea,[248,192],ga(240),[56]],48e3:[ea,[255,192],ga(268),[55,148,128],ga(54),[112]],44100:[ea,[255,192],ga(268),[55,163,128],ga(84),[112]],32e3:[ea,[255,192],ga(268),[55,234],ga(226),[112]],24e3:[ea,[255,192],ga(268),[55,255,128],ga(268),[111,112],ga(126),[224]],16e3:[ea,[255,192],ga(268),[55,255,128],ga(268),[111,255],ga(269),[223,108],ga(195),[1,192]],12e3:[fa,ga(268),[3,127,248],ga(268),[6,255,240],ga(268),[13,255,224],ga(268),[27,253,128],ga(259),[56]],11025:[fa,ga(268),[3,127,248],ga(268),[6,255,240],ga(268),[13,255,224],ga(268),[27,255,192],ga(268),[55,175,128],ga(108),[112]],8e3:[fa,ga(268),[3,121,16],ga(47),[7]]};N=ha(a)}return N},ja=9e4;O=function(a){return a*ja},P=function(a,b){return a*b},Q=function(a){return a/ja},R=function(a,b){return a/b},S=function(a,b){return O(R(a,b))},T=function(a,b){return P(Q(a),b)},U=function(a,b,c){return Q(c?a:a-b)};var ka={ONE_SECOND_IN_TS:ja,secondsToVideoTs:O,secondsToAudioTs:P,videoTsToSeconds:Q,audioTsToSeconds:R,audioTsToVideoTs:S,videoTsToAudioTs:T,metadataTsToSeconds:U},la=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},ma=function(a,b,c,d){var e,f,g,h,i=0,j=0,k=0,l=0;if(b.length&&(e=ka.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),i=Math.ceil(ka.ONE_SECOND_IN_TS/(a.samplerate/1024)),c&&d&&(j=e-Math.max(c,d),k=Math.floor(j/i),l=k*i),!(k<1||l>ka.ONE_SECOND_IN_TS/2))){for(f=ia()[a.samplerate],f||(f=b[0].data),g=0;g<k;g++)h=b[0],b.splice(0,0,{data:f,dts:h.dts-i,pts:h.pts-i});return a.baseMediaDecodeTime-=Math.floor(ka.videoTsToAudioTs(l,a.samplerate)),l}},na=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c&&(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0)}))},oa=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},pa=function(a){var b,c,d=0,e=new Uint8Array(la(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},qa={prefixWithSilence:ma,trimAdtsFramesByEarliestDts:na,generateSampleTable:oa,concatenateFrameData:pa},ra=ka.ONE_SECOND_IN_TS,sa=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),
void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},ta=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},ua=function(a,b){var c,d,e=a.minSegmentDts;return b||(e-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=e,c=Math.max(0,c),"audio"===a.type&&(d=a.samplerate/ra,c*=d,c=Math.floor(c)),c},va={clearDtsInfo:ta,calculateTrackBaseMediaDecodeTime:ua,collectDtsInfo:sa},wa=4,xa=128,ya=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&a[b]!==xa;){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&d===wa){var f=String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6]);if("GA94"===f){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}c.payload=void 0}b+=e,d=0,e=0}return c},za=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},Aa=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},Ba=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Ca={parseSei:ya,parseUserData:za,parseCaptionPackets:Aa,discardEmulationPreventionBytes:Ba,USER_DATA_REGISTERED_ITU_T_T35:wa},Da=function dd(a){a=a||{},dd.prototype.init.call(this),this.parse708captions_="boolean"!=typeof a.parse708captions||a.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Pa(0,0),new Pa(0,1),new Pa(1,0),new Pa(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ja),this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Da.prototype=new L,Da.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=Ca.parseSei(a.escapedRBSP),b.payload&&b.payloadType===Ca.USER_DATA_REGISTERED_ITU_T_T35&&(c=Ca.parseUserData(b)))){if(a.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=Ca.parseCaptionPackets(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},Da.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},Da.prototype.flushStream=function(a){return this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),this.captionPackets_.length=0,void this.flushCCStreams(a)):void this.flushCCStreams(a)},Da.prototype.flush=function(){return this.flushStream("flush")},Da.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Da.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},Da.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},Da.prototype.setsChannel1Active=function(a){return 4096===(30720&a.ccData)},Da.prototype.setsChannel2Active=function(a){return 6144===(30720&a.ccData)},Da.prototype.setsTextOrXDSActive=function(a){return 256===(28928&a.ccData)||4138===(30974&a.ccData)||6186===(30974&a.ccData)},Da.prototype.dispatchCea708Packet=function(a){this.parse708captions_&&this.cc708Stream_.push(a)};var Ea={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Fa=function(a){var b=Ea[a]||a;return 4096&a&&a===b?"":String.fromCharCode(b)},Ga=function(a){return 32<=a&&a<=127||160<=a&&a<=255},Ha=function(a){this.windowNum=a,this.reset()};Ha.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ha.prototype.getText=function(){return this.rows.join("\n")},Ha.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ha.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(a),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ha.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ha.prototype.addText=function(a){this.rows[this.rowIdx]+=a},Ha.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}};var Ia=function(a){this.serviceNum=a,this.text="",this.currentWindow=new Ha((-1)),this.windows=[]};Ia.prototype.init=function(a,b){this.startPts=a;for(var c=0;c<8;c++)this.windows[c]=new Ha(c),"function"==typeof b&&(this.windows[c].beforeRowOverflow=b)},Ia.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]};var Ja=function ed(){ed.prototype.init.call(this);var a=this;this.current708Packet=null,this.services={},this.push=function(b){3===b.type?(a.new708Packet(),a.add708Bytes(b)):(null===a.current708Packet&&a.new708Packet(),a.add708Bytes(b))}};Ja.prototype=new L,Ja.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ja.prototype.add708Bytes=function(a){var b=a.ccData,c=b>>>8,d=255&b;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(c),this.current708Packet.data.push(d)},Ja.prototype.push708Packet=function(){var a=this.current708Packet,b=a.data,c=null,d=null,e=0,f=b[e++];for(a.seq=f>>6,a.sizeCode=63&f;e<b.length;e++)f=b[e++],c=f>>5,d=31&f,7===c&&d>0&&(f=b[e++],c=f),this.pushServiceBlock(c,e,d),d>0&&(e+=d-1)},Ja.prototype.pushServiceBlock=function(a,b,c){var d,e=b,f=this.current708Packet.data,g=this.services[a];for(g||(g=this.initService(a,e));e<b+c&&e<f.length;e++)d=f[e],Ga(d)?e=this.handleText(e,g):16===d?e=this.extendedCommands(e,g):128<=d&&d<=135?e=this.setCurrentWindow(e,g):152<=d&&d<=159?e=this.defineWindow(e,g):136===d?e=this.clearWindows(e,g):140===d?e=this.deleteWindows(e,g):137===d?e=this.displayWindows(e,g):138===d?e=this.hideWindows(e,g):139===d?e=this.toggleWindows(e,g):151===d?e=this.setWindowAttributes(e,g):144===d?e=this.setPenAttributes(e,g):145===d?e=this.setPenColor(e,g):146===d?e=this.setPenLocation(e,g):143===d?g=this.reset(e,g):8===d?g.currentWindow.backspace():12===d?g.currentWindow.clearText():13===d?g.currentWindow.pendingNewLine=!0:14===d?g.currentWindow.clearText():141===d&&e++},Ja.prototype.extendedCommands=function(a,b){var c=this.current708Packet.data,d=c[++a];return Ga(d)&&(a=this.handleText(a,b,!0)),a},Ja.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},Ja.prototype.initService=function(a,b){var c=this;return this.services[a]=new Ia(a),this.services[a].init(this.getPts(b),function(b){c.flushDisplayed(b,c.services[a])}),this.services[a]},Ja.prototype.handleText=function(a,b,c){var d=this.current708Packet.data,e=d[a],f=c?4096:0,g=Fa(f|e),h=b.currentWindow;return h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(a)),h.pendingNewLine=!1,h.addText(g),a},Ja.prototype.setCurrentWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;return b.setCurrentWindow(e),a},Ja.prototype.defineWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;b.setCurrentWindow(e);var f=b.currentWindow;return d=c[++a],f.visible=(32&d)>>5,f.rowLock=(16&d)>>4,f.columnLock=(8&d)>>3,f.priority=7&d,d=c[++a],f.relativePositioning=(128&d)>>7,f.anchorVertical=127&d,d=c[++a],f.anchorHorizontal=d,d=c[++a],f.anchorPoint=(240&d)>>4,f.rowCount=15&d,d=c[++a],f.columnCount=63&d,d=c[++a],f.windowStyle=(56&d)>>3,f.penStyle=7&d,f.virtualRowCount=f.rowCount+1,a},Ja.prototype.setWindowAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.winAttr;return d=c[++a],e.fillOpacity=(192&d)>>6,e.fillRed=(48&d)>>4,e.fillGreen=(12&d)>>2,e.fillBlue=3&d,d=c[++a],e.borderType=(192&d)>>6,e.borderRed=(48&d)>>4,e.borderGreen=(12&d)>>2,e.borderBlue=3&d,d=c[++a],e.borderType+=(128&d)>>5,e.wordWrap=(64&d)>>6,e.printDirection=(48&d)>>4,e.scrollDirection=(12&d)>>2,e.justify=3&d,d=c[++a],e.effectSpeed=(240&d)>>4,e.effectDirection=(12&d)>>2,e.displayEffect=3&d,a},Ja.prototype.flushDisplayed=function(a,b){for(var c=[],d=0;d<8;d++)b.windows[d].visible&&!b.windows[d].isEmpty()&&c.push(b.windows[d].getText());b.endPts=a,b.text=c.join("\n\n"),this.pushCaption(b),b.startPts=a},Ja.prototype.pushCaption=function(a){""!==a.text&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts)},Ja.prototype.displayWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible=1);return a},Ja.prototype.hideWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible=0);return a},Ja.prototype.toggleWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible^=1);return a},Ja.prototype.clearWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&b.windows[f].clearText();return a},Ja.prototype.deleteWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&b.windows[f].reset();return a},Ja.prototype.setPenAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penAttr;return d=c[++a],e.textTag=(240&d)>>4,e.offset=(12&d)>>2,e.penSize=3&d,d=c[++a],e.italics=(128&d)>>7,e.underline=(64&d)>>6,e.edgeType=(56&d)>>3,e.fontStyle=7&d,a},Ja.prototype.setPenColor=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penColor;return d=c[++a],e.fgOpacity=(192&d)>>6,e.fgRed=(48&d)>>4,e.fgGreen=(12&d)>>2,e.fgBlue=3&d,d=c[++a],e.bgOpacity=(192&d)>>6,e.bgRed=(48&d)>>4,e.bgGreen=(12&d)>>2,e.bgBlue=3&d,d=c[++a],e.edgeRed=(48&d)>>4,e.edgeGreen=(12&d)>>2,e.edgeBlue=3&d,a},Ja.prototype.setPenLocation=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,d=c[++a],e.row=15&d,d=c[++a],e.column=63&d,a},Ja.prototype.reset=function(a,b){var c=this.getPts(a);return this.flushDisplayed(c,b),this.initService(b.serviceNum,a)};var Ka={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},La=function(a){return null===a?"":(a=Ka[a]||a,String.fromCharCode(a))},Ma=14,Na=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oa=function(){for(var a=[],b=Ma+1;b--;)a.push("");return a},Pa=function fd(a,b){fd.prototype.init.call(this),this.field_=a||0,this.dataChannel_=b||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096===(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=Oa();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Oa();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Oa()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))d=(3&d)<<8,f=La(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=(3&d)<<8,f=La(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(14&e)&&this.addFormatting(a.pts,["i"]),1===(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=Na.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&this.formatting_.indexOf("u")===-1&&this.addFormatting(a.pts,["u"]),16===(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14===(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=La(d),f+=La(e),this[this.mode_](a.pts,f),this.column_+=f.length)}};Pa.prototype=new L,Pa.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a,b){try{return a.trim()}catch(c){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},Pa.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Oa(),this.nonDisplayed_=Oa(),this.lastControlCode_=null,this.column_=0,this.row_=Ma,this.rollUpRows_=2,this.formatting_=[]},Pa.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Pa.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},Pa.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},Pa.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},Pa.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},Pa.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},Pa.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},Pa.prototype.isNormalChar=function(a){return a>=32&&a<=127},Pa.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=Ma,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Oa(),this.displayed_=Oa()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},Pa.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},Pa.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},Pa.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},Pa.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},Pa.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<Ma+1;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},Pa.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var Qa={CaptionStream:Da,Cea608Stream:Pa,Cea708Stream:Ja},Ra={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Sa=8589934592,Ta=4294967296,Ua="shared",Va=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>Ta;)a+=c*Sa;return a},Wa=function gd(a){var b,c;gd.prototype.init.call(this),this.type_=a||Ua,this.push=function(a){this.type_!==Ua&&a.type!==this.type_||(void 0===c&&(c=a.dts),a.dts=Va(a.dts,c),a.pts=Va(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){c=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Wa.prototype=new L;var Xa,Ya={TimestampRolloverStream:Wa,handleRollover:Va},Za=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},$a=function(a,b,c){return decodeURIComponent(Za(a,b,c))},_a=function(a,b,c){return unescape(Za(a,b,c))},ab=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},bb={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=$a(a.data,1,b),a.value=$a(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=$a(a.data,1,b),a.url=$a(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=_a(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};Xa=function(a){var b,c={descriptor:a&&a.descriptor},d=0,e=[],f=0;if(Xa.prototype.init.call(this),this.dispatchType=Ra.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,g,h,i,j;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=ab(a.data.subarray(6,10)),d+=10),!(f<d)){for(b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts},i=0;i<d;)b.data.set(e[0].data.subarray(0,d-i),i),i+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();c=10,64&b.data[5]&&(c+=4,c+=ab(b.data.subarray(10,14)),d-=ab(b.data.subarray(16,20)));do{if(g=ab(b.data.subarray(c+4,c+8)),g<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if(j=String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),h={id:j,data:b.data.subarray(c+10,c+g+10)},h.key=h.id,bb[h.id]&&(bb[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var k=h.data,l=(1&k[3])<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;l*=4,l+=3&k[7],h.timeStamp=l,void 0===b.pts&&void 0===b.dts&&(b.pts=h.timeStamp,b.dts=h.timeStamp),this.trigger("timestamp",h)}b.frames.push(h),c+=10,c+=g}while(c<d);this.trigger("data",b)}}}},Xa.prototype=new L;var cb,db,eb,fb=Xa,gb=Ya.TimestampRolloverStream,hb=188,ib=71;cb=function(){var a=new Uint8Array(hb),b=0;cb.prototype.init.call(this),this.push=function(c){var d,e=0,f=hb;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==ib||d[f]!==ib?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=hb,f+=hb);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===hb&&a[0]===ib&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}},cb.prototype=new L,db=function(){var a,b,c,d;db.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e,f,g;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=(15&a[1])<<8|a[2],e=3+c-4,f=(15&a[10])<<8|a[11],g=12+f;g<e;){var h=a[g],i=(31&a[g+1])<<8|a[g+2];h===Ra.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=i:h===Ra.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=i:h===Ra.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][i]=h),g+=((15&a[g+3])<<8|a[g+4])+5}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=Ra.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=Ra.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},db.prototype=new L,db.STREAM_TYPES={h264:27,adts:15},eb=function(){var a,b=this,c=!1,d={data:[],size:0},e={data:[],size:0},f={data:[],size:0},g=function(a,b){var c,d=a[0]<<16|a[1]<<8|a[2];b.data=new Uint8Array,1===d&&(b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=0!==(4&a[6]),c=a[7],192&c&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8]))},h=function(a,c,d){var e,f=new Uint8Array(a.size),h={type:c},i=0,j=0,k=!1;if(a.data.length&&!(a.size<9)){for(h.trackId=a.data[0].pid,i=0;i<a.data.length;i++)e=a.data[i],f.set(e.data,j),j+=e.data.byteLength;g(f,h),k="video"===c||h.packetLength<=a.size,(d||k)&&(a.size=0,a.data.length=0),k&&b.trigger("data",h)}};eb.prototype.init.call(this),this.push=function(g){({pat:function(){},pes:function(){var a,b;switch(g.streamType){case Ra.H264_STREAM_TYPE:a=d,b="video";break;case Ra.ADTS_STREAM_TYPE:a=e,b="audio";break;case Ra.METADATA_STREAM_TYPE:a=f,b="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&h(a,b,!0),a.data.push(g),a.size+=g.data.byteLength},pmt:function(){var d={type:"metadata",tracks:[]};a=g.programMapTable,null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),c=!0,b.trigger("data",d)}})[g.type]()},this.reset=function(){d.size=0,d.data.length=0,e.size=0,e.data.length=0,this.trigger("reset")},this.flushStreams_=function(){h(d,"video"),h(e,"audio"),h(f,"timed-metadata")},this.flush=function(){if(!c&&a){var d={type:"metadata",tracks:[]};null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),b.trigger("data",d)}c=!1,this.flushStreams_(),this.trigger("done")}},eb.prototype=new L;var jb={PAT_PID:0,MP2T_PACKET_LENGTH:hb,TransportPacketStream:cb,TransportParseStream:db,ElementaryStream:eb,TimestampRolloverStream:gb,CaptionStream:Qa.CaptionStream,Cea608Stream:Qa.Cea608Stream,Cea708Stream:Qa.Cea708Stream,MetadataStream:fb};for(var kb in Ra)Ra.hasOwnProperty(kb)&&(jb[kb]=Ra[kb]);var lb,mb=jb,nb=ka.ONE_SECOND_IN_TS,ob=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];lb=function(a){var b,c=0;lb.prototype.init.call(this),this.skipWarn_=function(a,b){this.trigger("log",{level:"warn",message:"adts skiping bytes "+a+" to "+b+" in frame "+c+" outside syncword"})},this.push=function(d){var e,f,g,h,i,j=0;if(a||(c=0),"audio"===d.type){b&&b.length?(g=b,b=new Uint8Array(g.byteLength+d.data.byteLength),b.set(g),b.set(d.data,g.byteLength)):b=d.data;for(var k;j+7<b.length;)if(255===b[j]&&240===(246&b[j+1])){if("number"==typeof k&&(this.skipWarn_(k,j),k=null),f=2*(1&~b[j+1]),e=(3&b[j+3])<<11|b[j+4]<<3|(224&b[j+5])>>5,h=1024*((3&b[j+6])+1),i=h*nb/ob[(60&b[j+2])>>>2],b.byteLength-j<e)break;this.trigger("data",{pts:d.pts+c*i,dts:d.dts+c*i,sampleCount:h,audioobjecttype:(b[j+2]>>>6&3)+1,channelcount:(1&b[j+2])<<2|(192&b[j+3])>>>6,samplerate:ob[(60&b[j+2])>>>2],samplingfrequencyindex:(60&b[j+2])>>>2,samplesize:16,data:b.subarray(j+7+f,j+e)}),c++,j+=e}else"number"!=typeof k&&(k=j),j++;"number"==typeof k&&(this.skipWarn_(k,j),k=null),b=b.subarray(j)}},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}},lb.prototype=new L;var pb,qb=lb;pb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var rb,sb,tb,ub=pb;sb=function(){var a,b,c=0;sb.prototype.init.call(this),this.push=function(d){var e;b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;for(var f=b.byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<f);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},sb.prototype=new L,tb={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},rb=function(){var a,b,c,d,e,f,g,h=new sb;rb.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g,nalUnitTypeCode:31&g[0]};switch(h.nalUnitTypeCode){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d,e=8,f=8;for(c=0;c<a;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o,p=0,q=0,r=0,s=0,t=[1,1];if(b=new ub(a),c=b.readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),tb[c]&&(f=b.readUnsignedExpGolomb(),3===f&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(m=3!==f?8:12,
o=0;o<m;o++)b.readBoolean()&&(o<6?g(16,b):g(64,b));if(b.skipUnsignedExpGolomb(),h=b.readUnsignedExpGolomb(),0===h)b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),o=0;o<i;o++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),l=b.readBits(1),0===l&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(p=b.readUnsignedExpGolomb(),q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb(),s=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(n=b.readUnsignedByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}t&&t[0]/t[1]}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:16*(j+1)-2*p-2*q,height:(2-l)*(k+1)*16-2*r-2*s,sarRatio:t}}},rb.prototype=new L;var vb,wb={H264Stream:rb,NalByteStream:sb},xb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],yb=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return c=c>=0?c:0,e?c+20:c+10},zb=function hd(a,b){return a.length-b<10||a[b]!=="I".charCodeAt(0)||a[b+1]!=="D".charCodeAt(0)||a[b+2]!=="3".charCodeAt(0)?b:(b+=yb(a,b),hd(a,b))},Ab=function(a){var b=zb(a,0);return a.length>=b+2&&255===(255&a[b])&&240===(240&a[b+1])&&16===(22&a[b+1])},Bb=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Cb=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},Db=function(a,b,c){return unescape(Cb(a,b,c))},Eb=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},Fb=function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":a[b]&!0&&240===(240&a[b+1])?"audio":null},Gb=function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240===(246&a[b+1]))return xb[(60&a[b+2])>>>2];b++}return null},Hb=function(a){var b,c,d,e;b=10,64&a[5]&&(b+=4,b+=Bb(a.subarray(10,14)));do{if(c=Bb(a.subarray(b+4,b+8)),c<1)return null;if(e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]),"PRIV"===e){d=a.subarray(b+10,b+c+10);for(var f=0;f<d.byteLength;f++)if(0===d[f]){var g=Db(d,0,f);if("com.apple.streaming.transportStreamTimestamp"===g){var h=d.subarray(f+1),i=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;return i*=4,i+=3&h[7]}break}}b+=10,b+=c}while(b<a.byteLength);return null},Ib={isLikelyAacData:Ab,parseId3TagSize:yb,parseAdtsSize:Eb,parseType:Fb,parseSampleRate:Gb,parseAacTimestamp:Hb};vb=function(){var a=new Uint8Array,b=0;vb.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,a=new Uint8Array(c.byteLength+g),a.set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(255!==(255&a[i])||240!==(240&a[i+1]))i++;else{if(a.length-i<7)break;if(h=Ib.parseAdtsSize(a,i),i+h>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else{if(a.length-i<10)break;if(h=Ib.parseId3TagSize(a,i),i+h>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}},vb.prototype=new L;var Jb,Kb,Lb,Mb,Nb=vb,Ob=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Pb=Ob,Qb=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Rb=Qb,Sb=wb.H264Stream,Tb=Ib.isLikelyAacData,Ub=ka.ONE_SECOND_IN_TS,Vb=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Wb=function(a,b,c,d,e,f){var g=c-b,h=d-b,i=e-c;return{start:{dts:a,pts:a+g},end:{dts:a+h,pts:a+i},prependedContentDuration:f,baseMediaDecodeTime:a}};Kb=function(a,b){var c,d=[],e=0,f=0,g=1/0;b=b||{},c=b.firstSequenceNumber||0,Kb.prototype.init.call(this),this.push=function(b){va.collectDtsInfo(a,b),a&&Pb.forEach(function(c){a[c]=b[c]}),d.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,l,m,n;return 0===d.length?void this.trigger("done","AudioSegmentStream"):(h=qa.trimAdtsFramesByEarliestDts(d,a,e),a.baseMediaDecodeTime=va.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),n=qa.prefixWithSilence(a,h,f,g),a.samples=qa.generateSampleTable(h),j=V.mdat(qa.concatenateFrameData(h)),d=[],i=V.moof(c,[a]),k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),va.clearDtsInfo(a),l=Math.ceil(1024*Ub/a.samplerate),h.length&&(m=h.length*l,this.trigger("segmentTimingInfo",Wb(ka.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),h[0].dts,h[0].pts,h[0].dts+m,h[0].pts+m,n||0)),this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+m})),this.trigger("data",{track:a,boxes:k}),void this.trigger("done","AudioSegmentStream"))},this.reset=function(){va.clearDtsInfo(a),d=[],this.trigger("reset")}},Kb.prototype=new L,Jb=function(a,b){var c,d,e,f=[],g=[];b=b||{},c=b.firstSequenceNumber||0,Jb.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){va.collectDtsInfo(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.config,a.sps=[b.data],Rb.forEach(function(b){a[b]=d[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||e||(e=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var d,e,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(d=da.groupNalsIntoFrames(f),h=da.groupFramesIntoGops(d),h[0][0].keyFrame||(e=this.getGopForFusion_(f[0],a),e?(n=e.duration,h.unshift(e),h.byteLength+=e.byteLength,h.nalCount+=e.nalCount,h.pts=e.pts,h.dts=e.dts,h.duration+=e.duration):h=da.extendFirstKeyFrame(h)),g.length){var o;if(o=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h),!o)return this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");va.clearDtsInfo(a),h=o}va.collectDtsInfo(a,h),a.samples=da.generateSampleTable(h),j=V.mdat(da.concatenateNalData(h)),a.baseMediaDecodeTime=va.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",Wb(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),i=V.moof(c,[a]),k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){va.clearDtsInfo(a),d=void 0,e=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=45e3,i=1e4,j=1/0;for(g=0;g<this.gopCache_.length;g++)f=this.gopCache_[g],e=f.gop,a.pps&&Vb(a.pps[0],f.pps[0])&&a.sps&&Vb(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration,c>=-i&&c<=h&&(!d||j>c)&&(d=f,j=c)));return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:(j=a.slice(c),j.byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){var b,c,d,e,f,h;for(b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}if(!h&&null===f)return null;var i;if(i=h?c:f,0===i)return a;var j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}},Jb.prototype=new L,Mb=function(a,b){this.numberOfTracks=0,this.metadataStream=b,a=a||{},"undefined"!=typeof a.remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Mb.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),void("audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))))}},Mb.prototype=new L,Mb.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,Rb.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Pb.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=V.initSegment(this.pendingTracks),g.initSegment=new Uint8Array(d.byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)b=this.pendingCaptions[e],b.startTime=ka.metadataTsToSeconds(b.startPts,h,this.keepOriginalTimestamps),b.endTime=ka.metadataTsToSeconds(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=ka.metadataTsToSeconds(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Mb.prototype.setRemux=function(a){this.remuxTracks=a},Lb=function(a){var b,c,d=this,e=!0;Lb.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new mb.MetadataStream,e.aacStream=new Nb,e.audioTimestampRolloverStream=new mb.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new mb.TimestampRolloverStream("timed-metadata"),e.adtsStream=new qb,e.coalesceStream=new Mb(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type&&"audio"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Kb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b}))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="ts",e.metadataStream=new mb.MetadataStream,e.packetStream=new mb.TransportPacketStream,e.parseStream=new mb.TransportParseStream,e.elementaryStream=new mb.ElementaryStream,e.timestampRolloverStream=new mb.TimestampRolloverStream,e.adtsStream=new qb,e.h264Stream=new Sb,e.captionStream=new mb.CaptionStream(a),e.coalesceStream=new Mb(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||(c=f.tracks[g],c.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(b=f.tracks[g],b.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime);b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new Jb(b,a),e.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Kb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(d){var e=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d),c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,va.clearDtsInfo(c),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),b&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,va.clearDtsInfo(b),e.captionStream.reset()),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.getLogTrigger_=function(a){var b=this;return function(c){c.stream=a,b.trigger("log",c)}},this.push=function(a){if(e){var b=Tb(a);if(b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),this.transmuxPipeline_)for(var c=Object.keys(this.transmuxPipeline_),d=0;d<c.length;d++){var f=c[d];"headOfPipeline"!==f&&this.transmuxPipeline_[f].on&&this.transmuxPipeline_[f].on("log",this.getLogTrigger_(f))}e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Lb.prototype=new L;var Xb,Yb,Zb,$b,_b,ac,bc={Transmuxer:Lb,VideoSegmentStream:Jb,AudioSegmentStream:Kb,AUDIO_PROPERTIES:Pb,VIDEO_PROPERTIES:Rb,generateSegmentTimingInfo:Wb},cc=function(a){return a>>>0},dc=function(a){return("00"+a.toString(16)).slice(-2)},ec={toUnsigned:cc,toHexString:dc},fc=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},gc=fc,hc=ec.toUnsigned,ic=function id(a,b){var c,d,e,f,g,h=[];if(!b.length)return null;for(c=0;c<a.byteLength;)d=hc(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]),e=gc(a.subarray(c+4,c+8)),f=d>1?c+d:a.byteLength,e===b[0]&&(1===b.length?h.push(a.subarray(c+8,f)):(g=id(a.subarray(c+8,f),b.slice(1)),g.length&&(h=h.concat(g)))),c=f;return h},jc=ic,kc=ec.toUnsigned,lc=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:kc(a[4]<<24|a[5]<<16|a[6]<<8|a[7])};return 1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=kc(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),b},mc=lc,nc=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},oc=nc,pc=function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:oc(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=oc(a.subarray(l,l+4)),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},qc=pc,rc=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},sc=rc,tc=Ca.discardEmulationPreventionBytes,uc=Qa.CaptionStream,vc=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null},wc=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i={logs:[],seiNals:[]};for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=vc(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:tc(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else{if(!g){i.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+e+" for trackId "+c+". See mux.js#223."});break}d.pts=g.pts,d.dts=g.dts}i.seiNals.push(d)}return i},xc=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=qc(a),c=b.samples;c.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),a.pts=d+a.compositionTimeOffset,d+=a.duration}),h=h.concat(c)}),h},yc=function(a,b){var c=jc(a,["moof","traf"]),d=jc(a,["mdat"]),e={},f=[];return d.forEach(function(a,b){var d=c[b];f.push({mdat:a,traf:d})}),f.forEach(function(a){var c,d,f=a.mdat,g=a.traf,h=jc(g,["tfhd"]),i=sc(h[0]),j=i.trackId,k=jc(g,["tfdt"]),l=k.length>0?mc(k[0]).baseMediaDecodeTime:0,m=jc(g,["trun"]);b===j&&m.length>0&&(c=xc(m,l,i),d=wc(f,c,j),e[j]||(e[j]={seiNals:[],logs:[]}),e[j].seiNals=e[j].seiNals.concat(d.seiNals),e[j].logs=e[j].logs.concat(d.logs))}),e},zc=function(a,b,c){var d;if(null===b)return null;d=yc(a,b);var e=d[b]||{};return{seiNals:e.seiNals,logs:e.logs,timescale:c}},Ac=function(){var a,b,c,d,e,f,g=!1;this.isInitialized=function(){return g},this.init=function(b){a=new uc,g=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0}),a.on("log",function(a){e.logs.push(a)})},this.isNewInit=function(a,b){return!(a&&0===a.length||b&&"object"==typeof b&&0===Object.keys(b).length)&&(c!==a[0]||d!==b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized())return null;if(!f||!g)return null;if(this.isNewInit(f,g))c=f[0],d=g[c];else if(null===c||!d)return b.push(a),null;for(;b.length>0;){var i=b.shift();this.parse(i,f,g)}return h=zc(a,c,d),h&&h.logs&&(e.logs=e.logs.concat(h.logs)),null!==h&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),e):e.logs.length?{logs:e.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(b){return this.isInitialized()&&b&&0!==b.length?void b.forEach(function(b){a.push(b)}):null},this.flushStream=function(){return this.isInitialized()?void(f?a.partialFlush():a.flush()):null},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={},e.logs=[]},this.resetCaptionStream=function(){return this.isInitialized()?void a.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],c=null,d=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Bc=Ac,Cc=ec.toUnsigned,Dc=ec.toHexString;Xb=function(a){var b={},c=jc(a,["moov","trak"]);return c.reduce(function(a,b){var c,d,e,f,g;return(c=jc(b,["tkhd"])[0])?(d=c[0],e=0===d?12:20,f=Cc(c[e]<<24|c[e+1]<<16|c[e+2]<<8|c[e+3]),(g=jc(b,["mdia","mdhd"])[0])?(d=g[0],e=0===d?12:20,a[f]=Cc(g[e]<<24|g[e+1]<<16|g[e+2]<<8|g[e+3]),a):null):null},b)},Yb=function(a,b){var c,d,e;return c=jc(b,["moof","traf"]),d=[].concat.apply([],c.map(function(b){return jc(b,["tfhd"]).map(function(c){var d,e,f;return d=Cc(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),e=a[d]||9e4,f=jc(b,["tfdt"]).map(function(a){var b,c;return b=a[0],c=Cc(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),1===b&&(c*=Math.pow(2,32),c+=Cc(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),c})[0],f="number"!=typeof f||isNaN(f)?1/0:f,f/e})})),e=Math.min.apply(null,d),isFinite(e)?e:0},Zb=function(a,b){var c,d=jc(b,["moof","traf"]),e=0,f=0;if(d&&d.length){var g=jc(d[0],["tfhd"])[0],h=jc(d[0],["trun"])[0],i=jc(d[0],["tfdt"])[0];if(g){var j=sc(g);c=j.trackId}if(i){var k=mc(i);e=k.baseMediaDecodeTime}if(h){var l=qc(h);l.samples&&l.samples.length&&(f=l.samples[0].compositionTimeOffset||0)}}var m=a[c]||9e4;return(e+f)/m},$b=function(a){var b=jc(a,["moov","trak"]),c=[];return b.forEach(function(a){var b=jc(a,["mdia","hdlr"]),d=jc(a,["tkhd"]);b.forEach(function(a,b){var e,f,g,h=gc(a.subarray(8,12)),i=d[b];"vide"===h&&(e=new DataView(i.buffer,i.byteOffset,i.byteLength),f=e.getUint8(0),g=0===f?e.getUint32(12):e.getUint32(20),c.push(g))})}),c},ac=function(a){var b=a[0],c=0===b?12:20;return Cc(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3])},_b=function(a){var b=jc(a,["moov","trak"]),c=[];return b.forEach(function(a){var b,d,e={},f=jc(a,["tkhd"])[0];f&&(b=new DataView(f.buffer,f.byteOffset,f.byteLength),d=b.getUint8(0),e.id=0===d?b.getUint32(12):b.getUint32(20));var g=jc(a,["mdia","hdlr"])[0];if(g){var h=gc(g.subarray(8,12));"vide"===h?e.type="video":"soun"===h?e.type="audio":e.type=h}var i=jc(a,["mdia","minf","stbl","stsd"])[0];if(i){var j=i.subarray(8);e.codec=gc(j.subarray(4,8));var k,l,m=jc(j,[e.codec])[0];m&&(/^[a-z]vc[1-9]$/i.test(e.codec)?(k=m.subarray(78),l=gc(k.subarray(4,8)),"avcC"===l&&k.length>11?(e.codec+=".",e.codec+=Dc(k[9]),e.codec+=Dc(k[10]),e.codec+=Dc(k[11])):e.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(e.codec)?(k=m.subarray(28),l=gc(k.subarray(4,8)),"esds"===l&&k.length>20&&0!==k[19]?(e.codec+="."+Dc(k[19]),e.codec+="."+Dc(k[20]>>>2&63).replace(/^0/,"")):e.codec="mp4a.40.2"):e.codec=e.codec.toLowerCase())}var n=jc(a,["mdia","mdhd"])[0];n&&(e.timescale=ac(n)),c.push(e)}),c};var Ec={findBox:jc,parseType:gc,timescale:Xb,startTime:Yb,compositionStartTime:Zb,videoTrackIds:$b,tracks:_b,getTimescaleFromMediaHeader:ac},Fc=function(a){var b=31&a[1];return b<<=8,b|=a[2]},Gc=function(a){return!!(64&a[1])},Hc=function(a){var b=0;return(48&a[3])>>>4>1&&(b+=a[4]+1),b},Ic=function(a,b){var c=Fc(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},Jc=function(a){var b=Gc(a),c=4+Hc(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},Kc=function(a){var b={},c=Gc(a),d=4+Hc(a);if(c&&(d+=a[d]+1),1&a[d+5]){var e,f,g;e=(15&a[d+1])<<8|a[d+2],f=3+e-4,g=(15&a[d+10])<<8|a[d+11];for(var h=12+g;h<f;){var i=d+h;b[(31&a[i+1])<<8|a[i+2]]=a[i],h+=((15&a[i+3])<<8|a[i+4])+5}return b}},Lc=function(a,b){var c=Fc(a),d=b[c];switch(d){case Ra.H264_STREAM_TYPE:return"video";case Ra.ADTS_STREAM_TYPE:return"audio";case Ra.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Mc=function(a){var b=Gc(a);if(!b)return null;var c=4+Hc(a);if(c>=a.byteLength)return null;var d,e=null;return d=a[c+7],192&d&&(e={},e.pts=(14&a[c+9])<<27|(255&a[c+10])<<20|(254&a[c+11])<<12|(255&a[c+12])<<5|(254&a[c+13])>>>3,e.pts*=4,e.pts+=(6&a[c+13])>>>1,e.dts=e.pts,64&d&&(e.dts=(14&a[c+14])<<27|(255&a[c+15])<<20|(254&a[c+16])<<12|(255&a[c+17])<<5|(254&a[c+18])>>>3,e.dts*=4,e.dts+=(6&a[c+18])>>>1)),e},Nc=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Oc=function(a){for(var b,c=4+Hc(a),d=a.subarray(c),e=0,f=0,g=!1;f<d.byteLength-3;f++)if(1===d[f+2]){e=f+5;break}for(;e<d.byteLength;)switch(d[e]){case 0:if(0!==d[e-1]){e+=2;break}if(0!==d[e-2]){e++;break}f+3!==e-2&&(b=Nc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0));do e++;while(1!==d[e]&&e<d.length);f=e-2,e+=3;break;case 1:if(0!==d[e-1]||0!==d[e-2]){e+=3;break}b=Nc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0),f=e-2,e+=3;break;default:e+=3}return d=d.subarray(f),e-=f,f=0,d&&d.byteLength>3&&(b=Nc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0)),g},Pc={parseType:Ic,parsePat:Jc,parsePmt:Kc,parsePayloadUnitStartIndicator:Gc,parsePesType:Lc,parsePesTime:Mc,videoPacketContainsKeyFrame:Oc},Qc=Ya.handleRollover,Rc={};Rc.ts=Pc,Rc.aac=Ib;var Sc=ka.ONE_SECOND_IN_TS,Tc=188,Uc=71,Vc=function(a,b){for(var c,d,e=0,f=Tc;f<a.byteLength;)if(a[e]!==Uc||a[f]!==Uc)e++,f++;else{switch(c=a.subarray(e,f),d=Rc.ts.parseType(c,b.pid)){case"pat":b.pid=Rc.ts.parsePat(c);break;case"pmt":var g=Rc.ts.parsePmt(c);b.table=b.table||{},Object.keys(g).forEach(function(a){b.table[a]=g[a]})}e+=Tc,f+=Tc}},Wc=function(a,b,c){for(var d,e,f,g,h,i=0,j=Tc,k=!1;j<=a.byteLength;)if(a[i]!==Uc||a[j]!==Uc&&j!==a.byteLength)i++,j++;else{switch(d=a.subarray(i,j),e=Rc.ts.parseType(d,b.pid)){case"pes":f=Rc.ts.parsePesType(d,b.table),g=Rc.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=Rc.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i+=Tc,j+=Tc}for(j=a.byteLength,i=j-Tc,k=!1;i>=0;)if(a[i]!==Uc||a[j]!==Uc&&j!==a.byteLength)i--,j--;else{switch(d=a.subarray(i,j),e=Rc.ts.parseType(d,b.pid)){case"pes":f=Rc.ts.parsePesType(d,b.table),g=Rc.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=Rc.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i-=Tc,j-=Tc}},Xc=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=0,m=Tc,n=!1,o={data:[],size:0};m<a.byteLength;)if(a[l]!==Uc||a[m]!==Uc)l++,m++;else{switch(d=a.subarray(l,m),e=Rc.ts.parseType(d,b.pid)){case"pes":if(f=Rc.ts.parsePesType(d,b.table),g=Rc.ts.parsePayloadUnitStartIndicator(d),"video"===f&&(g&&!n&&(h=Rc.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0)),!c.firstKeyFrame)){if(g&&0!==o.size){for(i=new Uint8Array(o.size),j=0;o.data.length;)k=o.data.shift(),i.set(k,j),j+=k.byteLength;if(Rc.ts.videoPacketContainsKeyFrame(i)){var p=Rc.ts.parsePesTime(i);p?(c.firstKeyFrame=p,c.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}o.size=0}o.data.push(d),o.size+=d.byteLength}}if(n&&c.firstKeyFrame)break;l+=Tc,m+=Tc}for(m=a.byteLength,l=m-Tc,n=!1;l>=0;)if(a[l]!==Uc||a[m]!==Uc)l--,m--;else{switch(d=a.subarray(l,m),e=Rc.ts.parseType(d,b.pid)){case"pes":f=Rc.ts.parsePesType(d,b.table),g=Rc.ts.parsePayloadUnitStartIndicator(d),"video"===f&&g&&(h=Rc.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0))}if(n)break;l-=Tc,m-=Tc}},Yc=function(a,b){if(a.audio&&a.audio.length){var c=b;("undefined"==typeof c||isNaN(c))&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=Qc(a.dts,c),a.pts=Qc(a.pts,c),a.dtsTime=a.dts/Sc,a.ptsTime=a.pts/Sc})}if(a.video&&a.video.length){var d=b;if(("undefined"==typeof d||isNaN(d))&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=Qc(a.dts,d),a.pts=Qc(a.pts,d),a.dtsTime=a.dts/Sc,a.ptsTime=a.pts/Sc}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=Qc(e.dts,d),e.pts=Qc(e.pts,d),e.dtsTime=e.dts/Sc,e.ptsTime=e.pts/Sc}}},Zc=function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;a.length-h>=3;){var i=Rc.aac.parseType(a,h);switch(i){case"timed-metadata":if(a.length-h<10){c=!0;break}if(g=Rc.aac.parseId3TagSize(a,h),g>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=Rc.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7){c=!0;break}if(g=Rc.aac.parseAdtsSize(a,h),g>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=Rc.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var j=Sc/e,k={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*j,pts:f+1024*d*j}]};return k},$c=function(a){var b={pid:null,table:null},c={};Vc(a,b);for(var d in b.table)if(b.table.hasOwnProperty(d)){var e=b.table[d];switch(e){case Ra.H264_STREAM_TYPE:c.video=[],Xc(a,b,c),0===c.video.length&&delete c.video;break;case Ra.ADTS_STREAM_TYPE:c.audio=[],Wc(a,b,c),
0===c.audio.length&&delete c.audio}}return c},_c=function(a,b){var c,d=Rc.aac.isLikelyAacData(a);return c=d?Zc(a):$c(a),c&&(c.audio||c.video)?(Yc(c,b),c):null},ad={inspect:_c,parseAudioPes_:Wc},bd=function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};var d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){var c={start:{decode:ka.videoTsToSeconds(b.start.dts),presentation:ka.videoTsToSeconds(b.start.pts)},end:{decode:ka.videoTsToSeconds(b.end.dts),presentation:ka.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:ka.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=ka.videoTsToSeconds(b.prependedContentDuration)),a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:c})}),b.on("audioSegmentTimingInfo",function(b){var c={start:{decode:ka.videoTsToSeconds(b.start.dts),presentation:ka.videoTsToSeconds(b.start.pts)},end:{decode:ka.videoTsToSeconds(b.end.dts),presentation:ka.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:ka.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=ka.videoTsToSeconds(b.prependedContentDuration)),a.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:c})}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ka.videoTsToSeconds(b.start),end:ka.videoTsToSeconds(b.end)}})}),b.on("videoTimingInfo",function(b){a.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ka.videoTsToSeconds(b.start),end:ka.videoTsToSeconds(b.end)}})}),b.on("log",function(b){a.postMessage({action:"log",log:b})})},cd=function(){function a(a,b){this.options=b||{},this.self=a,this.init()}var b=a.prototype;return b.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bc.Transmuxer(this.options),bd(this.self,this.transmuxer)},b.pushMp4Captions=function(a){this.captionParser||(this.captionParser=new Bc,this.captionParser.init());var b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.captionParser.parse(b,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],logs:c&&c.logs||[],data:b.buffer},[b.buffer])},b.probeMp4StartTime=function(a){var b=a.timescales,c=a.data,d=Ec.startTime(b,c);this.self.postMessage({action:"probeMp4StartTime",startTime:d,data:c},[c.buffer])},b.probeMp4Tracks=function(a){var b=a.data,c=Ec.tracks(b);this.self.postMessage({action:"probeMp4Tracks",tracks:c,data:b},[b.buffer])},b.probeTs=function(a){var b=a.data,c=a.baseStartTime,d="number"!=typeof c||isNaN(c)?void 0:c*ka.ONE_SECOND_IN_TS,e=ad.inspect(b,d),f=null;e&&(f={hasVideo:e.video&&2===e.video.length||!1,hasAudio:e.audio&&2===e.audio.length||!1},f.hasVideo&&(f.videoStart=e.video[0].ptsTime),f.hasAudio&&(f.audioStart=e.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:f,data:b},[b.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ka.secondsToVideoTs(b)))},b.setAudioAppendStart=function(a){this.transmuxer.setAudioAppendStart(Math.ceil(ka.secondsToVideoTs(a.appendStart)))},b.setRemux=function(a){this.transmuxer.setRemux(a.remux)},b.flush=function(a){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())},a}();self.onmessage=function(a){return"init"===a.data.action&&a.data.options?void(this.messageHandlers=new cd(self,a.data.options)):(this.messageHandlers||(this.messageHandlers=new cd(self)),void(a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data)))}})),mn=hn(ln),nn=function(a,b,c){var d=a.data.segment,e=d.type,f=d.initSegment,g=d.captions,h=d.captionStreams,i=d.metadata,j=d.videoFrameDtsTime,k=d.videoFramePtsTime;b.buffer.push({captions:g,captionStreams:h,metadata:i});var l=a.data.segment.boxes||{data:a.data.segment.data},m={type:e,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(f.data,f.byteOffset,f.byteLength)};"undefined"!=typeof j&&(m.videoFrameDtsTime=j),"undefined"!=typeof k&&(m.videoFramePtsTime=k),c(m)},on=function(a){var b=a.transmuxedData,c=a.callback;b.buffer=[],c(b)},pn=function(a,b){b.gopInfo=a.data.gopInfo},qn=function(a){var b=a.transmuxer,c=a.bytes,d=a.audioAppendStart,e=a.gopsToAlignWith,f=a.remux,g=a.onData,h=a.onTrackInfo,i=a.onAudioTimingInfo,j=a.onVideoTimingInfo,k=a.onVideoSegmentTimingInfo,l=a.onAudioSegmentTimingInfo,m=a.onId3,n=a.onCaptions,o=a.onDone,p=a.onEndedTimeline,q=a.onTransmuxerLog,r=a.isEndOfTimeline,s={buffer:[]},t=r,u=function(c){b.currentTransmux===a&&("data"===c.data.action&&nn(c,s,g),"trackinfo"===c.data.action&&h(c.data.trackInfo),"gopInfo"===c.data.action&&pn(c,s),"audioTimingInfo"===c.data.action&&i(c.data.audioTimingInfo),"videoTimingInfo"===c.data.action&&j(c.data.videoTimingInfo),"videoSegmentTimingInfo"===c.data.action&&k(c.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===c.data.action&&l(c.data.audioSegmentTimingInfo),"id3Frame"===c.data.action&&m([c.data.id3Frame],c.data.id3Frame.dispatchType),"caption"===c.data.action&&n(c.data.caption),"endedtimeline"===c.data.action&&(t=!1,p()),"log"===c.data.action&&q(c.data.log),"transmuxed"===c.data.type&&(t||(b.onmessage=null,on({transmuxedData:s,callback:o}),rn(b))))};if(b.onmessage=u,d&&b.postMessage({action:"setAudioAppendStart",appendStart:d}),Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e}),"undefined"!=typeof f&&b.postMessage({action:"setRemux",remux:f}),c.byteLength){var v=c instanceof ArrayBuffer?c:c.buffer,w=c instanceof ArrayBuffer?0:c.byteOffset;b.postMessage({action:"push",data:v,byteOffset:w,byteLength:c.byteLength},[v])}r&&b.postMessage({action:"endTimeline"}),b.postMessage({action:"flush"})},rn=function(a){a.currentTransmux=null,a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"==typeof a.currentTransmux?a.currentTransmux():qn(a.currentTransmux))},sn=function(a,b){a.postMessage({action:b}),rn(a)},tn=function(a,b){return b.currentTransmux?void b.transmuxQueue.push(sn.bind(null,b,a)):(b.currentTransmux=a,void sn(b,a))},un=function(a){tn("reset",a)},vn=function(a){tn("endTimeline",a)},wn=function(a){return a.transmuxer.currentTransmux?void a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,void qn(a))},xn=function(a){var b=new mn;b.currentTransmux=null,b.transmuxQueue=[];var c=b.terminate;return b.terminate=function(){return b.currentTransmux=null,b.transmuxQueue.length=0,c.call(b)},b.postMessage({action:"init",options:a}),b},yn={reset:un,endTimeline:vn,transmux:wn,createTransmuxer:xn},zn=function(a){var b=a.transmuxer,c=a.endAction||a.action,d=a.callback,e=Oc({},a,{endAction:null,transmuxer:null,callback:null}),f=function i(e){e.data.action===c&&(b.removeEventListener("message",i),e.data.data&&(e.data.data=new Uint8Array(e.data.data,a.byteOffset||0,a.byteLength||e.data.data.byteLength),a.data&&(a.data=e.data.data)),d(e.data))};if(b.addEventListener("message",f),a.data){var g=a.data instanceof ArrayBuffer;e.byteOffset=g?0:a.data.byteOffset,e.byteLength=a.data.byteLength;var h=[g?a.data:a.data.buffer];b.postMessage(e,h)}else b.postMessage(e)},An={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Bn=function(a){a.forEach(function(a){a.abort()})},Cn=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}},Dn=function(a){var b=a.target,c=Date.now()-b.requestTime,d={bandwidth:1/0,bytesReceived:0,roundTripTime:c||0};return d.bytesReceived=a.loaded,d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8*1e3),d},En=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:An.TIMEOUT,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:An.ABORTED,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:An.FAILURE,xhr:b}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+b.uri,code:An.FAILURE,xhr:b}:null},Fn=function(a,b,c){return function(d,e){var f=e.response,g=En(d,e);if(g)return c(g,a);if(16!==f.byteLength)return c({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:An.FAILURE,xhr:e},a);for(var h=new DataView(f),i=new Uint32Array([h.getUint32(0),h.getUint32(4),h.getUint32(8),h.getUint32(12)]),j=0;j<b.length;j++)b[j].bytes=i;return c(null,a)}},Gn=function(a,b){var c=jl(a.map.bytes);if("mp4"!==c){var d=a.map.resolvedUri||a.map.uri;return b({internal:!0,message:"Found unsupported "+(c||"unknown")+" container for initialization segment at URL: "+d,code:An.FAILURE})}zn({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:function(c){var d=c.tracks,e=c.data;return a.map.bytes=e,d.forEach(function(b){a.map.tracks=a.map.tracks||{},a.map.tracks[b.type]||(a.map.tracks[b.type]=b,"number"==typeof b.id&&b.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[b.id]=b.timescale))}),b(null)}})},Hn=function(a){var b=a.segment,c=a.finishProcessingFn;return function(a,d){var e=En(a,d);if(e)return c(e,b);var f=new Uint8Array(d.response);return b.map.key?(b.map.encryptedBytes=f,c(null,b)):(b.map.bytes=f,void Gn(b,function(a){return a?(a.xhr=d,a.status=d.status,c(a,b)):void c(null,b)}))}},In=function(a){var b=a.segment,c=a.finishProcessingFn,d=a.responseType;return function(a,e){var f=En(a,e);if(f)return c(f,b);var g="arraybuffer"!==d&&e.responseText?en(e.responseText.substring(b.lastReachedChar||0)):e.response;return b.stats=Cn(e),b.key?b.encryptedBytes=new Uint8Array(g):b.bytes=new Uint8Array(g),c(null,b)}},Jn=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=b.map&&b.map.tracks||{},p=Boolean(o.audio&&o.video),q=e.bind(null,b,"audio","start"),r=e.bind(null,b,"audio","end"),s=e.bind(null,b,"video","start"),t=e.bind(null,b,"video","end"),u=function(){return wn({bytes:c,transmuxer:b.transmuxer,audioAppendStart:b.audioAppendStart,gopsToAlignWith:b.gopsToAlignWith,remux:p,onData:function(a){a.type="combined"===a.type?"video":a.type,l(b,a)},onTrackInfo:function(a){d&&(p&&(a.isMuxed=!0),d(b,a))},onAudioTimingInfo:function(a){q&&"undefined"!=typeof a.start&&(q(a.start),q=null),r&&"undefined"!=typeof a.end&&r(a.end)},onVideoTimingInfo:function(a){s&&"undefined"!=typeof a.start&&(s(a.start),s=null),t&&"undefined"!=typeof a.end&&t(a.end)},onVideoSegmentTimingInfo:function(a){f(a)},onAudioSegmentTimingInfo:function(a){g(a)},onId3:function(a,c){h(b,a,c)},onCaptions:function(a){i(b,[a])},isEndOfTimeline:j,onEndedTimeline:function(){k()},onTransmuxerLog:n,onDone:function(a){m&&(a.type="combined"===a.type?"video":a.type,m(null,b,a))}})};zn({action:"probeTs",transmuxer:b.transmuxer,data:c,baseStartTime:b.baseStartTime,callback:function(a){b.bytes=c=a.data;var e=a.result;e&&(d(b,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:p}),d=null,e.hasAudio&&!p&&q(e.audioStart),e.hasVideo&&s(e.videoStart),q=null,s=null),u()}})},Kn=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=new Uint8Array(c);if(kl(o)){b.isFmp4=!0;var p=b.map.tracks,q={isFmp4:!0,hasVideo:!!p.video,hasAudio:!!p.audio};p.audio&&p.audio.codec&&"enca"!==p.audio.codec&&(q.audioCodec=p.audio.codec),p.video&&p.video.codec&&"encv"!==p.video.codec&&(q.videoCodec=p.video.codec),p.video&&p.audio&&(q.isMuxed=!0),d(b,q);var r=function(a){l(b,{data:o,type:q.hasAudio&&!q.isMuxed?"audio":"video"}),a&&a.length&&i(b,a),m(null,b,{})};return void zn({action:"probeMp4StartTime",timescales:b.map.timescales,data:o,transmuxer:b.transmuxer,callback:function(a){var d=a.data,f=a.startTime;return c=d.buffer,b.bytes=o=d,q.hasAudio&&!q.isMuxed&&e(b,"audio","start",f),q.hasVideo&&e(b,"video","start",f),p.video&&d.byteLength&&b.transmuxer?void zn({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:b.transmuxer,data:o,timescales:b.map.timescales,trackIds:[p.video.id],callback:function(a){c=a.data.buffer,b.bytes=o=a.data,a.logs.forEach(function(a){n(hb.mergeOptions(a,{stream:"mp4CaptionParser"}))}),r(a.captions)}}):void r()}})}return b.transmuxer?("undefined"==typeof b.container&&(b.container=jl(o)),"ts"!==b.container&&"aac"!==b.container?(d(b,{hasAudio:!1,hasVideo:!1}),void m(null,b,{})):void Jn({segment:b,bytes:c,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})):void m(null,b,{})},Ln=function(a,b){var c=a.id,d=a.key,e=a.encryptedBytes,f=a.decryptionWorker,g=function i(a){if(a.data.source===c){f.removeEventListener("message",i);var d=a.data.decrypted;b(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};f.addEventListener("message",g);var h;h=d.bytes.slice?d.bytes.slice():new Uint32Array(Array.prototype.slice.call(d.bytes)),f.postMessage(Em({source:c,encrypted:e,key:h,iv:d.iv}),[e.buffer,h.buffer])},Mn=function(a){var b=a.decryptionWorker,c=a.segment,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog;Ln({id:c.requestId,key:c.key,encryptedBytes:c.encryptedBytes,decryptionWorker:b},function(a){c.bytes=a,Kn({segment:c,bytes:c.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})})},Nn=function(a){var b=a.activeXhrs,c=a.decryptionWorker,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=0,p=!1;return function(a,q){if(!p){if(a)return p=!0,Bn(b),m(a,q);if(o+=1,o===b.length){var r=function(){return q.encryptedBytes?Mn({decryptionWorker:c,segment:q,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n}):void Kn({segment:q,bytes:q.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})};if(q.endOfAllRequests=Date.now(),q.map&&q.map.encryptedBytes&&!q.map.bytes)return Ln({decryptionWorker:c,id:q.requestId+"-init",encryptedBytes:q.map.encryptedBytes,key:q.map.key},function(a){q.map.bytes=a,Gn(q,function(a){return a?(Bn(b),m(a,q)):void r()})});r()}}}},On=function(a){var b=a.loadendState,c=a.abortFn;return function(a){var d=a.target;d.aborted&&c&&!b.calledAbortFn&&(c(),b.calledAbortFn=!0)}},Pn=function(a){var b=a.segment,c=a.progressFn;return a.trackInfoFn,a.timingInfoFn,a.videoSegmentTimingInfoFn,a.audioSegmentTimingInfoFn,a.id3Fn,a.captionsFn,a.isEndOfTimeline,a.endedTimelineFn,a.dataFn,function(a){var d=a.target;if(!d.aborted)return b.stats=hb.mergeOptions(b.stats,Dn(a)),!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now()),c(a,b)}},Qn=function(a){var b=a.xhr,c=a.xhrOptions,d=a.decryptionWorker,e=a.segment,f=a.abortFn,g=a.progressFn,h=a.trackInfoFn,i=a.timingInfoFn,j=a.videoSegmentTimingInfoFn,k=a.audioSegmentTimingInfoFn,l=a.id3Fn,m=a.captionsFn,n=a.isEndOfTimeline,o=a.endedTimelineFn,p=a.dataFn,q=a.doneFn,r=a.onTransmuxerLog,s=[],t=Nn({activeXhrs:s,decryptionWorker:d,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p,doneFn:q,onTransmuxerLog:r});if(e.key&&!e.key.bytes){var u=[e.key];e.map&&!e.map.bytes&&e.map.key&&e.map.key.resolvedUri===e.key.resolvedUri&&u.push(e.map.key);var v=hb.mergeOptions(c,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),w=Fn(e,u,t),x=b(v,w);s.push(x)}if(e.map&&!e.map.bytes){var y=e.map.key&&(!e.key||e.key.resolvedUri!==e.map.key.resolvedUri);if(y){var z=hb.mergeOptions(c,{uri:e.map.key.resolvedUri,responseType:"arraybuffer"}),A=Fn(e,[e.map.key],t),B=b(z,A);s.push(B)}var C=hb.mergeOptions(c,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:Am(e.map)}),D=Hn({segment:e,finishProcessingFn:t}),E=b(C,D);s.push(E)}var F=hb.mergeOptions(c,{uri:e.part&&e.part.resolvedUri||e.resolvedUri,responseType:"arraybuffer",headers:Am(e)}),G=In({segment:e,finishProcessingFn:t,responseType:F.responseType}),H=b(F,G);H.addEventListener("progress",Pn({segment:e,progressFn:g,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p})),s.push(H);var I={};return s.forEach(function(a){a.addEventListener("loadend",On({loadendState:I,abortFn:f}))}),function(){return Bn(s)}},Rn=rl("CodecUtils"),Sn=function(a){var b=a.attributes||{};if(b.CODECS)return _h(b.CODECS)},Tn=function(a,b){var c=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&c.AUDIO&&a.mediaGroups.AUDIO[c.AUDIO]},Un=function(a,b){if(!Tn(a,b))return!0;var c=b.attributes||{},d=a.mediaGroups.AUDIO[c.AUDIO];for(var e in d)if(!d[e].uri&&!d[e].playlists)return!0;return!1},Vn=function(a){var b={};return a.forEach(function(a){var c=a.mediaType,d=a.type,e=a.details;b[c]=b[c]||[],b[c].push($h(""+d+e))}),Object.keys(b).forEach(function(a){return b[a].length>1?(Rn("multiple "+a+" codecs found as attributes: "+b[a].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(b[a]=null)):void(b[a]=b[a][0])}),b},Wn=function(a){var b=0;return a.audio&&b++,a.video&&b++,b},Xn=function(a,b){var c=b.attributes||{},d=Vn(Sn(b)||[]);if(Tn(a,b)&&!d.audio&&!Un(a,b)){var e=Vn(ai(a,c.AUDIO)||[]);e.audio&&(d.audio=e.audio)}return d},Yn=rl("PlaylistSelector"),Zn=function(a){if(a&&a.playlist){var b=a.playlist;return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}},$n=function(a,b){if(!a)return"";var c=uc.getComputedStyle(a);return c?c[b]:""},_n=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},ao=function(a,b){var c,d;return a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH),c=c||uc.Number.MAX_VALUE,b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),d=d||uc.Number.MAX_VALUE,c-d},bo=function(a,b){var c,d;return a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width),c=c||uc.Number.MAX_VALUE,b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),d=d||uc.Number.MAX_VALUE,c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},co=function(a,b,c,d,e,f){if(a){var g={bandwidth:b,width:c,height:d,limitRenditionByPlayerDimensions:e},h=a.playlists;am.isAudioOnly(a)&&(h=f.getAudioTrackPlaylists_(),g.audioOnly=!0);var i=h.map(function(a){var b,c=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,d=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;return b=a.attributes&&a.attributes.BANDWIDTH,b=b||uc.Number.MAX_VALUE,{bandwidth:b,width:c,height:d,playlist:a}});_n(i,function(a,b){return a.bandwidth-b.bandwidth}),i=i.filter(function(a){return!am.isIncompatible(a.playlist)});var j=i.filter(function(a){return am.isEnabled(a.playlist)});j.length||(j=i.filter(function(a){return!am.isDisabled(a.playlist)}));var k=j.filter(function(a){return a.bandwidth*dn.BANDWIDTH_VARIANCE<b}),l=k[k.length-1],m=k.filter(function(a){return a.bandwidth===l.bandwidth})[0];if(e===!1){var n=m||j[0]||i[0];if(n&&n.playlist){var o="sortedPlaylistReps";return m&&(o="bandwidthBestRep"),j[0]&&(o="enabledPlaylistReps"),Yn("choosing "+Zn(n)+" using "+o+" with options",g),n.playlist}return Yn("could not choose a playlist with options",g),null}var p=k.filter(function(a){return a.width&&a.height});_n(p,function(a,b){return a.width-b.width});var q=p.filter(function(a){return a.width===c&&a.height===d});l=q[q.length-1];var r,s,t,u=q.filter(function(a){return a.bandwidth===l.bandwidth})[0];u||(r=p.filter(function(a){return a.width>c||a.height>d}),s=r.filter(function(a){return a.width===r[0].width&&a.height===r[0].height}),l=s[s.length-1],t=s.filter(function(a){return a.bandwidth===l.bandwidth})[0]);var v;if(f.experimentalLeastPixelDiffSelector){var w=p.map(function(a){return a.pixelDiff=Math.abs(a.width-c)+Math.abs(a.height-d),a});_n(w,function(a,b){return a.pixelDiff===b.pixelDiff?b.bandwidth-a.bandwidth:a.pixelDiff-b.pixelDiff}),v=w[0]}var x=v||t||u||m||j[0]||i[0];if(x&&x.playlist){var y="sortedPlaylistReps";return v?y="leastPixelDiffRep":t?y="resolutionPlusOneRep":u?y="resolutionBestRep":m?y="bandwidthBestRep":j[0]&&(y="enabledPlaylistReps"),Yn("choosing "+Zn(x)+" using "+y+" with options",g),x.playlist}return Yn("could not choose a playlist with options",g),null}},eo=function(){var a=this.useDevicePixelRatio?uc.devicePixelRatio||1:1;return co(this.playlists.master,this.systemBandwidth,parseInt($n(this.tech_.el(),"width"),10)*a,parseInt($n(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},fo=function(a){var b=-1,c=-1;if(a<0||a>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var d=this.useDevicePixelRatio?uc.devicePixelRatio||1:1;return b<0&&(b=this.systemBandwidth,c=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth),co(this.playlists.master,b,parseInt($n(this.tech_.el(),"width"),10)*d,parseInt($n(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},go=function(a){var b=a.master,c=a.currentTime,d=a.bandwidth,e=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,i=a.syncController,j=b.playlists.filter(function(a){return!am.isIncompatible(a)}),k=j.filter(am.isEnabled);k.length||(k=j.filter(function(a){return!am.isDisabled(a)}));var l=k.filter(am.hasAttribute.bind(null,"BANDWIDTH")),m=l.map(function(a){var b=i.getSyncPoint(a,e,h,c),j=b?1:2,k=am.estimateSegmentRequestTime(f,d,a),l=k*j-g;return{playlist:a,rebufferingImpact:l}}),n=m.filter(function(a){return a.rebufferingImpact<=0});return _n(n,function(a,b){return ao(b.playlist,a.playlist)}),n.length?n[0]:(_n(m,function(a,b){return a.rebufferingImpact-b.rebufferingImpact}),m[0]||null)},ho=function(){var a=this,b=this.playlists.master.playlists.filter(am.isEnabled);_n(b,function(a,b){return ao(a,b)});var c=b.filter(function(b){return!!Xn(a.playlists.master,b).video});return c[0]||null},io=function(a){var b,c=0;return a.bytes&&(b=new Uint8Array(a.bytes),a.segments.forEach(function(a){b.set(a,c),c+=a.byteLength})),b},jo=function(a,b,c){if(!a[c]){b.trigger({type:"usage",name:"vhs-608"}),b.trigger({type:"usage",name:"hls-608"});var d=c;/^cc708_/.test(c)&&(d="SERVICE"+c.split("_")[1]);var e=b.textTracks().getTrackById(d);if(e)a[c]=e;else{var f=b.options_.vhs&&b.options_.vhs.captionServices||{},g=c,h=c,i=!1,j=f[d];j&&(g=j.label,h=j.language,i=j["default"]),a[c]=b.addRemoteTextTrack({kind:"captions",id:d,"default":i,label:g,language:h},!1).track}}},ko=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=uc.WebKitDataCue||uc.VTTCue;c.forEach(function(a){var c=a.stream;b[c].addCue(new e(a.startTime+d,a.endTime+d,a.text))})}},lo=function(a){Object.defineProperties(a.frame,{id:{get:function(){return hb.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return hb.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return hb.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})},mo=function(a){var b=a.inbandTextTracks,c=a.metadataArray,d=a.timestampOffset,e=a.videoDuration;if(c){var f=uc.WebKitDataCue||uc.VTTCue,g=b.metadataTrack_;if(g&&(c.forEach(function(a){var b=a.cueTime+d;!("number"!=typeof b||uc.isNaN(b)||b<0)&&b<1/0&&a.frames.forEach(function(a){var c=new f(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,lo(c),g.addCue(c)})}),g.cues&&g.cues.length)){for(var h=g.cues,i=[],j=0;j<h.length;j++)h[j]&&i.push(h[j]);var k=i.reduce(function(a,b){var c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),l=Object.keys(k).sort(function(a,b){return Number(a)-Number(b)});l.forEach(function(a,b){var c=k[a],d=Number(l[b+1])||e;c.forEach(function(a){a.endTime=d})})}}},no=function(a,b,c){a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=b)},oo=function(a,b,c){var d,e;if(c&&c.cues)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime>=a&&e.endTime<=b&&c.removeCue(e)},po=function(a){var b=a.cues;if(b)for(var c=0;c<b.length;c++){for(var d=[],e=0,f=0;f<b.length;f++)b[c].startTime===b[f].startTime&&b[c].endTime===b[f].endTime&&b[c].text===b[f].text&&(e++,e>1&&d.push(b[f]));d.length&&d.forEach(function(b){return a.removeCue(b)})}},qo=function(a,b,c){if("undefined"==typeof b||null===b||!a.length)return[];var d,e=Math.ceil((b-c+3)*ol);for(d=0;d<a.length&&!(a[d].pts>e);d++);return a.slice(d)},ro=function(a,b,c){if(!b.length)return a;if(c)return b.slice();var d=b[0].pts,e=0;for(e;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)},so=function(a,b,c,d){for(var e=Math.ceil((b-d)*ol),f=Math.ceil((c-d)*ol),g=a.slice(),h=a.length;h--&&!(a[h].pts<=f););if(h===-1)return g;for(var i=h+1;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g},to=function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;var c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(f!==d[e])return!1;if(a[f]!==b[f])return!1}return!0},uo=22,vo=function(a,b,c){b=b||[];for(var d=[],e=0,f=0;f<b.length;f++){var g=b[f];if(a===g.timeline&&(d.push(f),e+=g.duration,e>c))return f}return 0===d.length?0:d[d.length-1]},wo=1,xo=500,yo=function(a){return"number"==typeof a&&isFinite(a)},zo=1/60,Ao=function(a,b,c){return"main"===a&&b&&c?c.hasAudio||c.hasVideo?b.hasVideo&&!c.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.hasVideo&&c.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},Bo=function(a,b,c){var d=b-dn.BACK_BUFFER_LENGTH;a.length&&(d=Math.max(d,a.start(0)));var e=b-c;return Math.min(e,d)},Co=function(a){var b=a.startOfSegment,c=a.duration,d=a.segment,e=a.part,f=a.playlist,g=f.mediaSequence,h=f.id,i=f.segments,j=void 0===i?[]:i,k=a.mediaIndex,l=a.partIndex,m=a.timeline,n=j.length-1,o="mediaIndex/partIndex increment";a.getMediaInfoForTime?o="getMediaInfoForTime ("+a.getMediaInfoForTime+")":a.isSyncRequest&&(o="getSyncSegmentCandidate (isSyncRequest)");var p="number"==typeof l,q=a.segment.uri?"segment":"pre-segment",r=p?Hl({preloadSegment:d})-1:0;return q+" ["+(g+k)+"/"+(g+n)+"]"+(p?" part ["+l+"/"+r+"]":"")+(" segment start/end ["+d.start+" => "+d.end+"]")+(p?" part start/end ["+e.start+" => "+e.end+"]":"")+(" startOfSegment ["+b+"]")+(" duration ["+c+"]")+(" timeline ["+m+"]")+(" selected by ["+o+"]")+(" playlist ["+h+"]")},Do=function(a){return a+"TimingInfo"},Eo=function(a){var b=a.segmentTimeline,c=a.currentTimeline,d=a.startOfSegment,e=a.buffered,f=a.overrideCheck;return f||b!==c?b<c?d:e.length?e.end(e.length-1):d:null},Fo=function(a){var b=a.timelineChangeController,c=a.currentTimeline,d=a.segmentTimeline,e=a.loaderType,f=a.audioDisabled;if(c===d)return!1;if("audio"===e){var g=b.lastTimelineChange({type:"main"});return!g||g.to!==d}if("main"===e&&f){var h=b.pendingTimelineChange({type:"audio"});return!h||h.to!==d}return!1},Go=function(a,b){var c=a&&"number"==typeof a.start&&"number"==typeof a.end?a.end-a.start:0,d=b&&"number"==typeof b.start&&"number"==typeof b.end?b.end-b.start:0;return Math.max(c,d)},Ho=function(a){var b=a.segmentDuration,c=a.maxDuration;return!!b&&Math.round(b)>c+sl},Io=function(a,b){if("hls"!==b)return null;var c=Go(a.audioTimingInfo,a.videoTimingInfo);if(!c)return null;var d=a.playlist.targetDuration,e=Ho({segmentDuration:c,maxDuration:2*d}),f=Ho({segmentDuration:c,maxDuration:d}),g="Segment with index "+a.mediaIndex+" "+("from playlist "+a.playlist.id+" ")+("has a duration of "+c+" ")+("when the reported duration is "+a.duration+" ")+("and the target duration is "+d+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return e||f?{severity:e?"warn":"info",message:g}:null},Jo=function(a){function b(b,c){var d;if(d=a.call(this)||this,!b)throw new TypeError("Initialization settings are required");if("function"!=typeof b.currentTime)throw new TypeError("No currentTime getter specified");if(!b.mediaSource)throw new TypeError("No MediaSource specified");return d.bandwidth=b.bandwidth,d.throughput={rate:0,count:0},d.roundTrip=NaN,d.resetStats_(),d.mediaIndex=null,d.partIndex=null,d.hasPlayed_=b.hasPlayed,d.currentTime_=b.currentTime,d.seekable_=b.seekable,d.seeking_=b.seeking,d.duration_=b.duration,d.mediaSource_=b.mediaSource,d.vhs_=b.vhs,d.loaderType_=b.loaderType,d.currentMediaInfo_=void 0,d.startingMediaInfo_=void 0,d.segmentMetadataTrack_=b.segmentMetadataTrack,d.goalBufferLength_=b.goalBufferLength,d.sourceType_=b.sourceType,d.sourceUpdater_=b.sourceUpdater,d.inbandTextTracks_=b.inbandTextTracks,d.state_="INIT",d.timelineChangeController_=b.timelineChangeController,d.shouldSaveSegmentTimingInfo_=!0,d.parse708captions_=b.parse708captions,d.experimentalExactManifestTimings=b.experimentalExactManifestTimings,d.checkBufferTimeout_=null,d.error_=void 0,d.currentTimeline_=-1,d.pendingSegment_=null,d.xhrOptions_=null,d.pendingSegments_=[],d.audioDisabled_=!1,d.isPendingTimestampOffset_=!1,d.gopBuffer_=[],d.timeMapping_=0,d.safeAppend_=hb.browser.IE_VERSION>=11,d.appendInitSegment_={audio:!0,video:!0},d.playlistOfLastInitSegment_={audio:null,video:null},d.callQueue_=[],d.loadQueue_=[],d.metadataQueue_={id3:[],caption:[]},d.waitingOnRemove_=!1,d.quotaExceededErrorRetryTimeout_=null,d.activeInitSegmentId_=null,d.initSegments_={},d.cacheEncryptionKeys_=b.cacheEncryptionKeys,d.keyCache_={},d.decrypter_=b.decrypter,
d.syncController_=b.syncController,d.syncPoint_={segmentIndex:0,time:0},d.transmuxer_=d.createTransmuxer_(),d.triggerSyncInfoUpdate_=function(){return d.trigger("syncinfoupdate")},d.syncController_.on("syncinfoupdate",d.triggerSyncInfoUpdate_),d.mediaSource_.addEventListener("sourceopen",function(){d.isEndOfStream_()||(d.ended_=!1)}),d.fetchAtBuffer_=!1,d.logger_=rl("SegmentLoader["+d.loaderType_+"]"),Object.defineProperty(Yd(d),"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a,this.trigger("statechange"))}}),d.sourceUpdater_.on("ready",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"main"===d.loaderType_&&d.timelineChangeController_.on("pendingtimelinechange",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"audio"===d.loaderType_&&d.timelineChangeController_.on("timelinechange",function(){d.hasEnoughInfoToLoad_()&&d.processLoadQueue_(),d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),d}Zd(b,a);var c=b.prototype;return c.createTransmuxer_=function(){return yn.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},c.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},c.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&uc.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},c.setAudio=function(a){this.audioDisabled_=!a,a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},c.abort=function(){return"WAITING"!==this.state?void(this.pendingSegment_&&(this.pendingSegment_=null)):(this.abort_(),this.state="READY",void(this.paused()||this.monitorBuffer_()))},c.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,uc.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},c.checkForAbort_=function(a){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==a:(this.state="READY",!0)},c.error=function(a){return"undefined"!=typeof a&&(this.logger_("error occurred:",a),this.error_=a),this.pendingSegment_=null,this.error_},c.endOfStream=function(){this.ended_=!0,this.transmuxer_&&yn.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},c.buffered_=function(){var a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return hb.createTimeRanges();if("main"===this.loaderType_){var b=a.hasAudio,c=a.hasVideo,d=a.isMuxed;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Fm(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales}),d||a},c.segmentKey=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Gm(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});var e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e},c.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},c.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.playlist=function(a,b){if(void 0===b&&(b={}),a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));var e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_("playlist update ["+e+" => "+(a.id||a.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var f=a.mediaSequence-c.mediaSequence;if(this.logger_("live window shift ["+f+"]"),null!==this.mediaIndex)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var g=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!g.parts||!g.parts.length||!g.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}d&&(d.mediaIndex-=f,d.mediaIndex<0?(d.mediaIndex=null,d.partIndex=null):(d.mediaIndex>=0&&(d.segment=a.segments[d.mediaIndex]),d.partIndex>=0&&d.segment.parts&&(d.part=d.segment.parts[d.partIndex]))),this.syncController_.saveExpiredSegmentInfo(c,a)}},c.pause=function(){this.checkBufferTimeout_&&(uc.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},c.paused=function(){return null===this.checkBufferTimeout_},c.resetEverything=function(a){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,a),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},c.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},c.resyncLoader=function(){this.transmuxer_&&yn.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},c.remove=function(a,b,c,d){if(void 0===c&&(c=function(){}),void 0===d&&(d=!1),b===1/0&&(b=this.duration_()),b<=a)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");var e=1,f=function(){e--,0===e&&c()};!d&&this.audioDisabled_||(e++,this.sourceUpdater_.removeAudio(a,b,f)),(d||"main"===this.loaderType_)&&(this.gopBuffer_=so(this.gopBuffer_,a,b,this.timeMapping_),e++,this.sourceUpdater_.removeVideo(a,b,f));for(var g in this.inbandTextTracks_)oo(a,b,this.inbandTextTracks_[g]);oo(a,b,this.segmentMetadataTrack_),f()},c.monitorBuffer_=function(){this.checkBufferTimeout_&&uc.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=uc.setTimeout(this.monitorBufferTick_.bind(this),1)},c.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&uc.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=uc.setTimeout(this.monitorBufferTick_.bind(this),xo)},c.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var a=this.chooseNextRequest_();a&&("number"==typeof a.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline})),this.loadSegment_(a))}},c.isEndOfStream_=function(a,b,c){if(void 0===a&&(a=this.mediaIndex),void 0===b&&(b=this.playlist_),void 0===c&&(c=this.partIndex),!b||!this.mediaSource_)return!1;var d="number"==typeof a&&b.segments[a],e=a+1===b.segments.length,f=!d||!d.parts||c+1===d.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&e&&f},c.chooseNextRequest_=function(){var a=Dl(this.buffered_())||0,b=Math.max(0,a-this.currentTime_()),c=!this.hasPlayed_()&&b>=1,d=b>=this.goalBufferLength_(),e=this.playlist_.segments;if(!e.length||c||d)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var f={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(f.isSyncRequest)f.mediaIndex=vo(this.currentTimeline_,e,a);else if(null!==this.mediaIndex){var g=e[this.mediaIndex],h="number"==typeof this.partIndex?this.partIndex:-1;f.startOfSegment=g.end?g.end:a,g.parts&&g.parts[h+1]?(f.mediaIndex=this.mediaIndex,f.partIndex=h+1):f.mediaIndex=this.mediaIndex+1}else{var i=am.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),j=i.segmentIndex,k=i.startTime,l=i.partIndex;f.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",f.mediaIndex=j,f.startOfSegment=k,f.partIndex=l}var m=e[f.mediaIndex],n=m&&"number"==typeof f.partIndex&&m.parts&&m.parts[f.partIndex];if(!m||"number"==typeof f.partIndex&&!n)return null;"number"!=typeof f.partIndex&&m.parts&&(f.partIndex=0);var o=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return f.mediaIndex>=e.length-1&&o&&!this.seeking_()?null:this.generateSegmentInfo_(f)},c.generateSegmentInfo_=function(a){var b=a.playlist,c=a.mediaIndex,d=a.startOfSegment,e=a.isSyncRequest,f=a.partIndex,g=a.forceTimestampOffset,h=a.getMediaInfoForTime,i=b.segments[c],j="number"==typeof f&&i.parts[f],k={requestId:"segment-loader-"+Math.random(),uri:j&&j.resolvedUri||i.resolvedUri,mediaIndex:c,partIndex:j?f:null,isSyncRequest:e,startOfSegment:d,playlist:b,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:j&&j.duration||i.duration,segment:i,part:j,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h},l="undefined"!=typeof g?g:this.isPendingTimestampOffset_;k.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:i.timeline,currentTimeline:this.currentTimeline_,startOfSegment:d,buffered:this.buffered_(),overrideCheck:l});var m=Dl(this.sourceUpdater_.audioBuffered());return"number"==typeof m&&(k.audioAppendStart=m-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(k.gopsToAlignWith=qo(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),k},c.timestampOffsetForSegment_=function(a){return Eo(a)},c.earlyAbortWhenNeeded_=function(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)){var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=am.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=Al(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;if(!(e<=f)){var g=go({master:this.vhs_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(g){var h=e-f,i=h-g.rebufferingImpact,j=.5;f<=sl&&(j=1),!g.playlist||g.playlist.uri===this.playlist_.uri||i<j||(this.bandwidth=g.playlist.attributes.BANDWIDTH*dn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},c.handleAbort_=function(a){this.logger_("Aborting "+Co(a)),this.mediaRequestsAborted+=1},c.handleProgress_=function(a,b){this.earlyAbortWhenNeeded_(b.stats),this.checkForAbort_(b.requestId)||this.trigger("progress")},c.handleTrackInfo_=function(a,b){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},to(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=b,this.currentMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},c.handleTimingInfo_=function(a,b,c,d){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var e=this.pendingSegment_,f=Do(b);e[f]=e[f]||{},e[f][c]=d,this.logger_("timinginfo: "+b+" - "+c+" - "+d),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},c.handleCaptions_=function(a,b){var c=this;if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){if(0===b.length)return void this.logger_("SegmentLoader received no captions from a caption event");var d=this.pendingSegment_;if(!d.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b));var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};b.forEach(function(a){f[a.stream]=f[a.stream]||{startTime:1/0,captions:[],endTime:0};var b=f[a.stream];b.startTime=Math.min(b.startTime,a.startTime+e),b.endTime=Math.max(b.endTime,a.endTime+e),b.captions.push(a)}),Object.keys(f).forEach(function(a){var b=f[a],d=b.startTime,g=b.endTime,h=b.captions,i=c.inbandTextTracks_;c.logger_("adding cues from "+d+" -> "+g+" for "+a),jo(i,c.vhs_.tech_,a),oo(d,g,i[a]),ko({captionArray:h,inbandTextTracks:i,timestampOffset:e})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},c.handleId3_=function(a,b,c){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var d=this.pendingSegment_;if(!d.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c));var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();no(this.inbandTextTracks_,c,this.vhs_.tech_),mo({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:e,videoDuration:this.duration_()})}},c.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(a){return a()}),this.metadataQueue_.caption.forEach(function(a){return a()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},c.processCallQueue_=function(){var a=this.callQueue_;this.callQueue_=[],a.forEach(function(a){return a()})},c.processLoadQueue_=function(){var a=this.loadQueue_;this.loadQueue_=[],a.forEach(function(a){return a()})},c.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var a=this.pendingSegment_;return!!a&&(!this.getCurrentMediaInfo_()||!Fo({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.getCurrentMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),a&&a.trackInfo||this.currentMediaInfo_},c.getMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),this.getCurrentMediaInfo_(a)||this.startingMediaInfo_},c.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var a=this.pendingSegment_,b=this.getCurrentMediaInfo_();if(!a||!b)return!1;var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed;return!(d&&!a.videoTimingInfo)&&(!(c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo)&&!Fo({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.handleData_=function(a,b){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,a,b));var c=this.pendingSegment_;if(this.setTimeMapping_(c.timeline),this.updateMediaSecondsLoaded_(c.segment),"closed"!==this.mediaSource_.readyState){if(a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map),a.key&&this.segmentKey(a.key,!0),c.isFmp4=a.isFmp4,c.timingInfo=c.timingInfo||{},c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[Do(b.type)].start;else{var d,e=this.getCurrentMediaInfo_(),f="main"===this.loaderType_&&e&&e.hasVideo;f&&(d=c.videoTimingInfo.start),c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:f,firstVideoFrameTimeForData:d,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(c,b.type),this.updateSourceBufferTimestampOffset_(c),c.isSyncRequest){this.updateTimingInfoEnd_(c),this.syncController_.saveSegmentTimingInfo({segmentInfo:c,shouldSaveTimelineMapping:"main"===this.loaderType_});var g=this.chooseNextRequest_();if(g.mediaIndex!==c.mediaIndex||g.partIndex!==c.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}c.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(c,b)}}},c.updateAppendInitSegmentStatus=function(a,b){"main"!==this.loaderType_||"number"!=typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)},c.getInitSegmentAndUpdateState_=function(a){var b=a.type,c=a.initSegment,d=a.map,e=a.playlist;if(d){var f=Fm(d);if(this.activeInitSegmentId_===f)return null;c=this.initSegmentForMap(d,!0).bytes,this.activeInitSegmentId_=f}return c&&this.appendInitSegment_[b]?(this.playlistOfLastInitSegment_[b]=e,this.appendInitSegment_[b]=!1,this.activeInitSegmentId_=null,c):null},c.handleQuotaExceededError_=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes,g=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Bl(g).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Bl(h).join(", "));var i=g.length?g.start(0):0,j=g.length?g.end(g.length-1):0,k=h.length?h.start(0):0,l=h.length?h.end(h.length-1):0;if(j-i<=wo&&l-k<=wo)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+Bl(g).join(", ")+", ")+("video buffer: "+Bl(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:d,type:e,bytes:f}));var m=this.currentTime_(),n=m-wo;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+n),this.remove(0,n,function(){c.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+wo+"s"),c.waitingOnRemove_=!1,c.quotaExceededErrorRetryTimeout_=uc.setTimeout(function(){c.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),c.quotaExceededErrorRetryTimeout_=null,c.processCallQueue_()},1e3*wo)},!0)},c.handleAppendError_=function(a,b){var c=a.segmentInfo,d=a.type,e=a.bytes;if(b){if(b.code===uo)return void this.handleQuotaExceededError_({segmentInfo:c,type:d,bytes:e});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",b),this.error(d+" append of "+e.length+"b failed for segment "+("#"+c.mediaIndex+" in playlist "+c.playlist.id)),this.trigger("appenderror")}},c.appendToSourceBuffer_=function(a){var b=a.segmentInfo,c=a.type,d=a.initSegment,e=a.data,f=a.bytes;if(!f){var g=[e],h=e.byteLength;d&&(g.unshift(d),h+=d.byteLength),f=io({bytes:h,segments:g})}this.sourceUpdater_.appendBuffer({segmentInfo:b,type:c,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:b,type:c,bytes:f}))},c.handleSegmentTimingInfo_=function(a,b,c){if(this.pendingSegment_&&b===this.pendingSegment_.requestId){var d=this.pendingSegment_.segment,e=a+"TimingInfo";d[e]||(d[e]={}),d[e].transmuxerPrependedSeconds=c.prependedContentDuration||0,d[e].transmuxedPresentationStart=c.start.presentation,d[e].transmuxedDecodeStart=c.start.decode,d[e].transmuxedPresentationEnd=c.end.presentation,d[e].transmuxedDecodeEnd=c.end.decode,d[e].baseMediaDecodeTime=c.baseMediaDecodeTime}},c.appendData_=function(a,b){var c=b.type,d=b.data;if(d&&d.byteLength&&("audio"!==c||!this.audioDisabled_)){var e=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null});this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:e,data:d})}},c.loadSegment_=function(a){var b=this;return this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),"number"==typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?void this.updateTransmuxerAndRequestSegment_(a):void this.loadQueue_.push(function(){var c=Oc({},a,{forceTimestampOffset:!0});Oc(a,b.generateSegmentInfo_(c)),b.isPendingTimestampOffset_=!1,b.updateTransmuxerAndRequestSegment_(a)})},c.updateTransmuxerAndRequestSegment_=function(a){var b=this;this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));var c=this.createSimplifiedSegmentObj_(a),d=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex),e=null!==this.mediaIndex,f=a.timeline!==this.currentTimeline_&&a.timeline>0,g=d||e&&f;this.logger_("Requesting "+Co(a)),c.map&&!c.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),a.abortRequests=Qn({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:c,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:g,endedTimelineFn:function(){b.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(c){var d=c.message,e=c.level,f=c.stream;b.logger_(Co(a)+" logged from transmuxer stream "+f+" as a "+e+": "+d)}})},c.trimBackBuffer_=function(a){var b=Bo(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);b>0&&this.remove(0,b)},c.createSimplifiedSegmentObj_=function(a){var b=a.segment,c=a.part,d={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part},e=a.playlist.segments[a.mediaIndex-1];if(e&&e.timeline===b.timeline&&(e.videoTimingInfo?d.baseStartTime=e.videoTimingInfo.transmuxedDecodeEnd:e.audioTimingInfo&&(d.baseStartTime=e.audioTimingInfo.transmuxedDecodeEnd)),b.key){var f=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);d.key=this.segmentKey(b.key),d.key.iv=f}return b.map&&(d.map=this.initSegmentForMap(b.map)),d},c.saveTransferStats_=function(a){this.mediaRequests+=1,a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)},c.saveBandwidthRelatedStats_=function(a,b){return this.pendingSegment_.byteLength=b.bytesReceived,a<zo?void this.logger_("Ignoring segment's bandwidth because its duration of "+a+(" is less than the min to record "+zo)):(this.bandwidth=b.bandwidth,void(this.roundTrip=b.roundTripTime))},c.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},c.segmentRequestFinished_=function(a,b,c){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId){if(a){if(this.pendingSegment_=null,this.state="READY",a.code===An.ABORTED)return;return this.pause(),a.code===An.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error"))}var d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats),d.endOfAllRequests=b.endOfAllRequests,c.gopInfo&&(this.gopBuffer_=ro(this.gopBuffer_,c.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(d)}},c.setTimeMapping_=function(a){var b=this.syncController_.mappingForTimeline(a);null!==b&&(this.timeMapping_=b)},c.updateMediaSecondsLoaded_=function(a){"number"==typeof a.start&&"number"==typeof a.end?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration},c.shouldUpdateTransmuxerTimestampOffset_=function(a){return null!==a&&("main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset())},c.trueSegmentStart_=function(a){var b=a.currentStart,c=a.playlist,d=a.mediaIndex,e=a.firstVideoFrameTimeForData,f=a.currentVideoTimestampOffset,g=a.useVideoTimingInfo,h=a.videoTimingInfo,i=a.audioTimingInfo;if("undefined"!=typeof b)return b;if(!g)return i.start;var j=c.segments[d-1];return 0!==d&&j&&"undefined"!=typeof j.start&&j.end===e+f?h.start:e},c.waitForAppendsToComplete_=function(a){var b=this.getCurrentMediaInfo_(a);if(!b)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed,f="main"===this.loaderType_&&d,g=!this.audioDisabled_&&c&&!e;return a.waitingOnAppends=0,a.hasAppendedData_?(f&&a.waitingOnAppends++,g&&a.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),void(g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a)))):(a.timingInfo||"number"!=typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),void this.checkAppendsDone_(a))},c.checkAppendsDone_=function(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())},c.checkForIllegalMediaSwitch=function(a){var b=Ao(this.loaderType_,this.getCurrentMediaInfo_(),a);return!!b&&(this.error({message:b,blacklistDuration:1/0}),this.trigger("error"),!0)},c.updateSourceBufferTimestampOffset_=function(a){if(null!==a.timestampOffset&&"number"==typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===this.loaderType_){var b=!1;a.timestampOffset-=a.timingInfo.start,a.changedTimestampOffset=!0,a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0),a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0),b&&this.trigger("timestampoffset")}},c.updateTimingInfoEnd_=function(a){a.timingInfo=a.timingInfo||{};var b=this.getMediaInfo_(),c="main"===this.loaderType_&&b&&b.hasVideo,d=c&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo;d&&(a.timingInfo.end="number"==typeof d.end?d.end:d.start+a.duration)},c.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_;this.updateTimingInfoEnd_(a),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});var b=Io(a,this.sourceType_);if(b&&("warn"===b.severity?hb.log.warn(b.message):this.logger_(b.message)),this.recordThroughput_(a),this.pendingSegment_=null,this.state="READY",a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_))return void this.logger_("Throwing away un-appended sync request "+Co(a));this.logger_("Appended "+Co(a)),this.addSegmentMetadataCue_(a),this.fetchAtBuffer_=!0,this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline})),this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate");var c=a.segment;if(c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration)return void this.resetEverything();var d=null!==this.mediaIndex;d&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},c.recordThroughput_=function(a){if(a.duration<zo)return void this.logger_("Ignoring segment's throughput because its duration of "+a.duration+(" is less than the min to record "+zo));var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8*1e3);this.throughput.rate+=(d-b)/++this.throughput.count},c.addSegmentMetadataCue_=function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if(yo(c)&&yo(d)){oo(c,d,this.segmentMetadataTrack_);var e=uc.WebKitDataCue||uc.VTTCue,f={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d},g=JSON.stringify(f),h=new e(c,d,g);h.value=f,this.segmentMetadataTrack_.addCue(h)}}},b}(hb.EventTarget),Ko=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},Lo=["video","audio"],Mo=function(a,b){var c=b[a+"Buffer"];return c&&c.updating||b.queuePending[a]},No=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("mediaSource"===d.type)return null;if(d.type===a)return c}return null},Oo=function hq(a,b){if(0!==b.queue.length){var c=0,d=b.queue[c];if("mediaSource"===d.type)return void(b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),hq("audio",b),hq("video",b)));if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!Mo(a,b)){if(d.type!==a){if(c=No(a,b.queue),null===c)return;d=b.queue[c]}return b.queue.splice(c,1),b.queuePending[a]=d,d.action(a,b),d.doneFn?void 0:(b.queuePending[a]=null,void hq(a,b))}}},Po=function(a,b){var c=b[a+"Buffer"],d=Ko(a);c&&(c.removeEventListener("updateend",b["on"+d+"UpdateEnd_"]),c.removeEventListener("error",b["on"+d+"Error_"]),b.codecs[a]=null,b[a+"Buffer"]=null)},Qo=function(a,b){return a&&b&&Array.prototype.indexOf.call(a.sourceBuffers,b)!==-1},Ro={appendBuffer:function(a,b,c){return function(d,e){var f=e[d+"Buffer"];if(Qo(e.mediaSource,f)){e.logger_("Appending segment "+b.mediaIndex+"'s "+a.length+" bytes to "+d+"Buffer");try{f.appendBuffer(a)}catch(g){e.logger_("Error with code "+g.code+" "+(g.code===uo?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+b.mediaIndex+" to "+d+"Buffer")),e.queuePending[d]=null,c(g)}}}},remove:function(a,b){return function(c,d){var e=d[c+"Buffer"];if(Qo(d.mediaSource,e)){d.logger_("Removing "+a+" to "+b+" from "+c+"Buffer");try{e.remove(a,b)}catch(f){
d.logger_("Remove "+a+" to "+b+" from "+c+"Buffer failed")}}}},timestampOffset:function(a){return function(b,c){var d=c[b+"Buffer"];Qo(c.mediaSource,d)&&(c.logger_("Setting "+b+"timestampOffset to "+a),d.timestampOffset=a)}},callback:function(a){return function(b,c){a()}},endOfStream:function(a){return function(b){if("open"===b.mediaSource.readyState){b.logger_("Calling mediaSource endOfStream("+(a||"")+")");try{b.mediaSource.endOfStream(a)}catch(c){hb.log.warn("Failed to call media source endOfStream",c)}}}},duration:function(a){return function(b){b.logger_("Setting mediaSource duration to "+a);try{b.mediaSource.duration=a}catch(c){hb.log.warn("Failed to set media source duration",c)}}},abort:function(){return function(a,b){if("open"===b.mediaSource.readyState){var c=b[a+"Buffer"];if(Qo(b.mediaSource,c)){b.logger_("calling abort on "+a+"Buffer");try{c.abort()}catch(d){hb.log.warn("Failed to abort on "+a+"Buffer",d)}}}}},addSourceBuffer:function(a,b){return function(c){var d=Ko(a),e=di(b);c.logger_("Adding "+a+"Buffer with codec "+b+" to mediaSource");var f=c.mediaSource.addSourceBuffer(e);f.addEventListener("updateend",c["on"+d+"UpdateEnd_"]),f.addEventListener("error",c["on"+d+"Error_"]),c.codecs[a]=b,c[a+"Buffer"]=f}},removeSourceBuffer:function(a){return function(b){var c=b[a+"Buffer"];if(Po(a,b),Qo(b.mediaSource,c)){b.logger_("Removing "+a+"Buffer with codec "+b.codecs[a]+" from mediaSource");try{b.mediaSource.removeSourceBuffer(c)}catch(d){hb.log.warn("Failed to removeSourceBuffer "+a+"Buffer",d)}}}},changeType:function(a){return function(b,c){var d=c[b+"Buffer"],e=di(a);Qo(c.mediaSource,d)&&c.codecs[b]!==a&&(c.logger_("changing "+b+"Buffer codec from "+c.codecs[b]+" to "+a),d.changeType(e),c.codecs[b]=a)}}},So=function(a){var b=a.type,c=a.sourceUpdater,d=a.action,e=a.doneFn,f=a.name;c.queue.push({type:b,action:d,doneFn:e,name:f}),Oo(b,c)},To=function(a,b){return function(c){if(b.queuePending[a]){var d=b.queuePending[a].doneFn;b.queuePending[a]=null,d&&d(b[a+"Error_"])}Oo(a,b)}},Uo=function(a){function b(b){var c;return c=a.call(this)||this,c.mediaSource=b,c.sourceopenListener_=function(){return Oo("mediaSource",Yd(c))},c.mediaSource.addEventListener("sourceopen",c.sourceopenListener_),c.logger_=rl("SourceUpdater"),c.audioTimestampOffset_=0,c.videoTimestampOffset_=0,c.queue=[],c.queuePending={audio:null,video:null},c.delayedAudioAppendQueue_=[],c.videoAppendQueued_=!1,c.codecs={},c.onVideoUpdateEnd_=To("video",Yd(c)),c.onAudioUpdateEnd_=To("audio",Yd(c)),c.onVideoError_=function(a){c.videoError_=a},c.onAudioError_=function(a){c.audioError_=a},c.createdSourceBuffers_=!1,c.initializedEme_=!1,c.triggeredReady_=!1,c}Zd(b,a);var c=b.prototype;return c.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},c.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},c.hasInitializedAnyEme=function(){return this.initializedEme_},c.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},c.createSourceBuffers=function(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},c.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},c.addSourceBuffer=function(a,b){So({type:"mediaSource",sourceUpdater:this,action:Ro.addSourceBuffer(a,b),name:"addSourceBuffer"})},c.abort=function(a){So({type:a,sourceUpdater:this,action:Ro.abort(a),name:"abort"})},c.removeSourceBuffer=function(a){return this.canRemoveSourceBuffer()?void So({type:"mediaSource",sourceUpdater:this,action:Ro.removeSourceBuffer(a),name:"removeSourceBuffer"}):void hb.log.error("removeSourceBuffer is not supported!")},c.canRemoveSourceBuffer=function(){return!hb.browser.IE_VERSION&&!hb.browser.IS_FIREFOX&&uc.MediaSource&&uc.MediaSource.prototype&&"function"==typeof uc.MediaSource.prototype.removeSourceBuffer},b.canChangeType=function(){return uc.SourceBuffer&&uc.SourceBuffer.prototype&&"function"==typeof uc.SourceBuffer.prototype.changeType},c.canChangeType=function(){return this.constructor.canChangeType()},c.changeType=function(a,b){return this.canChangeType()?void So({type:a,sourceUpdater:this,action:Ro.changeType(b),name:"changeType"}):void hb.log.error("changeType is not supported!")},c.addOrChangeSourceBuffers=function(a){var b=this;if(!a||"object"!=typeof a||0===Object.keys(a).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(function(c){var d=a[c];return b.hasCreatedSourceBuffers()?void(b.canChangeType()&&b.changeType(c,d)):b.addSourceBuffer(c,d)})},c.appendBuffer=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes;if(this.processedAppend_=!0,"audio"===e&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([a,b]),void this.logger_("delayed audio append of "+f.length+" until video append");var g=b;if(So({type:e,sourceUpdater:this,action:Ro.appendBuffer(f,d||{mediaIndex:-1},g),doneFn:b,name:"appendBuffer"}),"video"===e){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(a){c.appendBuffer.apply(c,a)})}},c.audioBuffered=function(){return Qo(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:hb.createTimeRange()},c.videoBuffered=function(){return Qo(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:hb.createTimeRange()},c.buffered=function(){var a=Qo(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=Qo(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():yl(this.audioBuffered(),this.videoBuffered())},c.setDuration=function(a,b){void 0===b&&(b=pc),So({type:"mediaSource",sourceUpdater:this,action:Ro.duration(a),name:"duration",doneFn:b})},c.endOfStream=function(a,b){void 0===a&&(a=null),void 0===b&&(b=pc),"string"!=typeof a&&(a=void 0),So({type:"mediaSource",sourceUpdater:this,action:Ro.endOfStream(a),name:"endOfStream",doneFn:b})},c.removeAudio=function(a,b,c){return void 0===c&&(c=pc),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?void So({type:"audio",sourceUpdater:this,action:Ro.remove(a,b),doneFn:c,name:"remove"}):void c()},c.removeVideo=function(a,b,c){return void 0===c&&(c=pc),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?void So({type:"video",sourceUpdater:this,action:Ro.remove(a,b),doneFn:c,name:"remove"}):void c()},c.updating=function(){return!(!Mo("audio",this)&&!Mo("video",this))},c.audioTimestampOffset=function(a){return"undefined"!=typeof a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(So({type:"audio",sourceUpdater:this,action:Ro.timestampOffset(a),name:"timestampOffset"}),this.audioTimestampOffset_=a),this.audioTimestampOffset_},c.videoTimestampOffset=function(a){return"undefined"!=typeof a&&this.videoBuffer&&this.videoTimestampOffset!==a&&(So({type:"video",sourceUpdater:this,action:Ro.timestampOffset(a),name:"timestampOffset"}),this.videoTimestampOffset_=a),this.videoTimestampOffset_},c.audioQueueCallback=function(a){this.audioBuffer&&So({type:"audio",sourceUpdater:this,action:Ro.callback(a),name:"callback"})},c.videoQueueCallback=function(a){this.videoBuffer&&So({type:"video",sourceUpdater:this,action:Ro.callback(a),name:"callback"})},c.dispose=function(){var a=this;this.trigger("dispose"),Lo.forEach(function(b){a.abort(b),a.canRemoveSourceBuffer()?a.removeSourceBuffer(b):a[b+"QueueCallback"](function(){return Po(b,a)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},b}(hb.EventTarget),Vo=function(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},Wo=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),Xo=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,d.mediaSource_=null,d.subtitlesTrack_=null,d.loaderType_="subtitle",d.featuresNativeTextTracks_=b.featuresNativeTextTracks,d.shouldSaveSegmentTimingInfo_=!1,d}Zd(b,a);var c=b.prototype;return c.createTransmuxer_=function(){return null},c.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return hb.createTimeRanges();var a=this.subtitlesTrack_.cues,b=a[0].startTime,c=a[a.length-1].startTime;return hb.createTimeRanges([[b,c]])},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=Fm(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){var e=Wo.byteLength+a.bytes.byteLength,f=new Uint8Array(e);f.set(a.bytes),f.set(Wo,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:f}}return d||a},c.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.track=function(a){return"undefined"==typeof a?this.subtitlesTrack_:(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},c.remove=function(a,b){oo(a,b,this.subtitlesTrack_)},c.fillBuffer_=function(){var a=this,b=this.chooseNextRequest_();if(b){if(null===this.syncController_.timestampOffsetForTimeline(b.timeline)){var c=function(){a.state="READY",a.paused()||a.monitorBuffer_()};return this.syncController_.one("timestampoffset",c),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(b)}},c.timestampOffsetForSegment_=function(){return null},c.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},c.skipEmptySegments_=function(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a},c.stopForError=function(a){this.error(a),this.state="READY",this.pause(),this.trigger("error")},c.segmentRequestFinished_=function(a,b,c){var d=this;if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(b.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(a)return a.code===An.TIMEOUT&&this.handleTimeout_(),a.code===An.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(a);var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,b.stats),this.state="APPENDING",this.trigger("appending");var f=e.segment;if(f.map&&(f.map.bytes=b.map.bytes),e.bytes=b.bytes,"function"!=typeof uc.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var g,h=function(){d.subtitlesTrack_.tech_.off("vttjsloaded",g),d.stopForError({message:"Error loading vtt.js"})};return g=function(){d.subtitlesTrack_.tech_.off("vttjserror",h),d.segmentRequestFinished_(a,b,c)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",g),void this.subtitlesTrack_.tech_.one("vttjserror",h)}f.requested=!0;try{this.parseVTTCues_(e)}catch(i){return void this.stopForError({message:i.message})}return this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.cues.length?e.timingInfo={start:e.cues[0].startTime,end:e.cues[e.cues.length-1].endTime}:e.timingInfo={start:e.startOfSegment,end:e.startOfSegment+e.duration},e.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY")):(e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,e.cues.forEach(function(a){d.subtitlesTrack_.addCue(d.featuresNativeTextTracks_?new uc.VTTCue(a.startTime,a.endTime,a.text):a)}),po(this.subtitlesTrack_),void this.handleAppendsDone_())},c.handleData_=function(){},c.updateTimingInfoEnd_=function(){},c.parseVTTCues_=function(a){var b,c=!1;"function"==typeof uc.TextDecoder?b=new uc.TextDecoder("utf8"):(b=uc.WebVTT.StringDecoder(),c=!0);var d=new uc.WebVTT.Parser(uc,uc.vttjs,b);if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=function(b){a.timestampmap=b},d.onparsingerror=function(a){hb.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){var e=a.segment.map.bytes;c&&(e=Vo(e)),d.parse(e)}var f=a.bytes;c&&(f=Vo(f)),d.parse(f),d.flush()},c.updateTimeMapping_=function(a,b,c){var d=a.segment;if(b){if(!a.cues.length)return void(d.empty=!0);var e=a.timestampmap,f=e.MPEGTS/ol-e.LOCAL+b.mapping;if(a.cues.forEach(function(a){a.startTime+=f,a.endTime+=f}),!c.syncInfo){var g=a.cues[0].startTime,h=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(g,h-d.duration)}}}},b}(Jo),Yo=function(a,b){for(var c=a.cues,d=0;d<c.length;d++){var e=c[d];if(b>=e.adStartTime&&b<=e.adEndTime)return e}return null},Zo=function(a,b,c){if(void 0===c&&(c=0),a.segments)for(var d,e=c,f=0;f<a.segments.length;f++){var g=a.segments[f];if(d||(d=Yo(b,e+g.duration/2)),d){if("cueIn"in g){d.endTime=e,d.adEndTime=e,e+=g.duration,d=null;continue}if(e<d.endTime){e+=g.duration;continue}d.endTime+=g.duration}else if("cueOut"in g&&(d=new uc.VTTCue(e,e+g.duration,g.cueOut),d.adStartTime=e,d.adEndTime=e+parseFloat(g.cueOut),b.addCue(d)),"cueOutCont"in g){var h=g.cueOutCont.split("/").map(parseFloat),i=h[0],j=h[1];d=new uc.VTTCue(e,e+g.duration,""),d.adStartTime=e-i,d.adEndTime=d.adStartTime+j,b.addCue(d)}e+=g.duration}},$o=[{name:"VOD",run:function(a,b,c,d,e){if(c!==1/0){var f={time:0,segmentIndex:0,partIndex:null};return f}return null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!Object.keys(a.timelineToDatetimeMappings).length)return null;var f=null,g=null,h=Fl(b);e=e||0;for(var i=0;i<h.length;i++){var j=b.endList||0===e?i:h.length-(i+1),k=h[j],l=k.segment,m=a.timelineToDatetimeMappings[l.timeline];if(m&&l.dateTimeObject){var n=l.dateTimeObject.getTime()/1e3,o=n+m;if(l.parts&&"number"==typeof k.partIndex)for(var p=0;p<k.partIndex;p++)o+=l.parts[p].duration;var q=Math.abs(e-o);if(null!==g&&(0===q||g<q))break;g=q,f={time:o,segmentIndex:k.segmentIndex,partIndex:k.partIndex}}}return f}},{name:"Segment",run:function(a,b,c,d,e){var f=null,g=null;e=e||0;for(var h=Fl(b),i=0;i<h.length;i++){var j=b.endList||0===e?i:h.length-(i+1),k=h[j],l=k.segment,m=k.part&&k.part.start||l&&l.start;if(l.timeline===d&&"undefined"!=typeof m){var n=Math.abs(e-m);if(null!==g&&g<n)break;(!f||null===g||g>=n)&&(g=n,f={time:m,segmentIndex:k.segmentIndex,partIndex:k.partIndex})}}return f}},{name:"Discontinuity",run:function(a,b,c,d,e){var f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length)for(var g=null,h=0;h<b.discontinuityStarts.length;h++){var i=b.discontinuityStarts[h],j=b.discontinuitySequence+h+1,k=a.discontinuities[j];if(k){var l=Math.abs(e-k.time);if(null!==g&&g<l)break;(!f||null===g||g>=l)&&(g=l,f={time:k.time,segmentIndex:i,partIndex:null})}}return f}},{name:"Playlist",run:function(a,b,c,d,e){if(b.syncInfo){var f={time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null};return f}return null}}],_o=function(a){function b(b){var c;return c=a.call(this)||this,c.timelines=[],c.discontinuities=[],c.timelineToDatetimeMappings={},c.logger_=rl("SyncController"),c}Zd(b,a);var c=b.prototype;return c.getSyncPoint=function(a,b,c,d){var e=this.runStrategies_(a,b,c,d);return e.length?this.selectSyncPoint_(e,{key:"time",value:d}):null},c.getExpiredTime=function(a,b){if(!a||!a.segments)return null;var c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;var d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return d.segmentIndex>0&&(d.time*=-1),Math.abs(d.time+Nl({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:d.segmentIndex,endIndex:0}))},c.runStrategies_=function(a,b,c,d){for(var e=[],f=0;f<$o.length;f++){var g=$o[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e},c.selectSyncPoint_=function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex)+("number"==typeof c.partIndex?",partIndex:"+c.partIndex:"")+"]"),c},c.saveExpiredSegmentInfo=function(a,b){for(var c=b.mediaSequence-a.mediaSequence,d=c-1;d>=0;d--){var e=a.segments[d];if(e&&"undefined"!=typeof e.start){b.syncInfo={mediaSequence:a.mediaSequence+d,time:e.start},this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},c.setDateTimeMappingForStart=function(a){if(this.timelineToDatetimeMappings={},a.segments&&a.segments.length&&a.segments[0].dateTimeObject){var b=a.segments[0],c=b.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[b.timeline]=-c}},c.saveSegmentTimingInfo=function(a){var b=a.segmentInfo,c=a.shouldSaveTimelineMapping,d=this.calculateSegmentTimeMapping_(b,b.timingInfo,c),e=b.segment;d&&(this.saveDiscontinuitySyncInfo_(b),b.playlist.syncInfo||(b.playlist.syncInfo={mediaSequence:b.playlist.mediaSequence+b.mediaIndex,time:e.start}));var f=e.dateTimeObject;e.discontinuity&&c&&f&&(this.timelineToDatetimeMappings[e.timeline]=-(f.getTime()/1e3))},c.timestampOffsetForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].time},c.mappingForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].mapping},c.calculateSegmentTimeMapping_=function(a,b,c){var d,e,f=a.segment,g=a.part,h=this.timelines[a.timeline];if("number"==typeof a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+h.time+"] [mapping: "+h.mapping+"]"))),d=a.startOfSegment,e=b.end+h.mapping;else{if(!h)return!1;d=b.start+h.mapping,e=b.end+h.mapping}return g&&(g.start=d,g.end=e),(!f.start||d<f.start)&&(f.start=d),f.end=e,!0},c.saveDiscontinuitySyncInfo_=function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){var i=void 0;i=g<0?c.start-Nl({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:e}):c.end+Nl({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:e}),this.discontinuities[f]={time:i,accuracy:h}}}},c.dispose=function(){this.trigger("dispose"),this.off()},b}(hb.EventTarget),ap=function(a){function b(){var b;return b=a.call(this)||this,b.pendingTimelineChanges_={},b.lastTimelineChanges_={},b}Zd(b,a);var c=b.prototype;return c.clearPendingTimelineChange=function(a){this.pendingTimelineChanges_[a]=null,this.trigger("pendingtimelinechange")},c.pendingTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.pendingTimelineChanges_[b]={type:b,from:c,to:d},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[b]},c.lastTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.lastTimelineChanges_[b]={type:b,from:c,to:d},delete this.pendingTimelineChanges_[b],this.trigger("timelinechange")),this.lastTimelineChanges_[b]},c.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},b}(hb.EventTarget),bp=jn(kn(function(){function a(a,c,d){return d={path:c,exports:{},require:function(a,c){return b(a,void 0===c||null===c?d.path:c)}},a(d,d.exports),d.exports}function b(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function c(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}var d=a(function(a){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}a.exports=c,a.exports["default"]=a.exports,a.exports.__esModule=!0}),e=a(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},a.exports["default"]=a.exports,a.exports.__esModule=!0,b(c,d)}a.exports=b,a.exports["default"]=a.exports,a.exports.__esModule=!0}),f=a(function(a){function b(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,e(a,b)}a.exports=b,a.exports["default"]=a.exports,a.exports.__esModule=!0}),g=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),h=function(){var a,b,c,d,e,f,g,h,i,j=[[[],[],[],[],[]],[[],[],[],[],[]]],k=j[0],l=j[1],m=k[4],n=l[4],o=[],p=[];for(a=0;a<256;a++)p[(o[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!m[b];b^=d||1,c=p[c]||1)for(g=c^c<<1^c<<2^c<<3^c<<4,g=g>>8^255&g^99,m[b]=g,n[g]=b,f=o[e=o[d=o[b]]],i=16843009*f^65537*e^257*d^16843008*b,h=257*o[g]^16843008*g,a=0;a<4;a++)k[a][b]=h=h<<24^h>>>8,l[a][g]=i=i<<24^i>>>8;for(a=0;a<5;a++)k[a]=k[a].slice(0),l[a]=l[a].slice(0);return j},i=null,j=function(){function a(a){i||(i=h()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var b,c,d,e=this._tables[0][4],f=this._tables[1],g=a.length,j=1;if(4!==g&&6!==g&&8!==g)throw new Error("Invalid aes key size");var k=a.slice(0),l=[];for(this._key=[k,l],b=g;b<4*g+28;b++)d=k[b-1],(b%g===0||8===g&&b%g===4)&&(d=e[d>>>24]<<24^e[d>>16&255]<<16^e[d>>8&255]<<8^e[255&d],b%g===0&&(d=d<<8^d>>>24^j<<24,j=j<<1^283*(j>>7))),k[b]=k[b-g]^d;for(c=0;b;c++,b--)d=k[3&c?b:b-4],b<=4||c<4?l[c]=d:l[c]=f[0][e[d>>>24]]^f[1][e[d>>16&255]]^f[2][e[d>>8&255]]^f[3][e[255&d]]}var b=a.prototype;return b.decrypt=function(a,b,c,d,e,f){var g,h,i,j,k=this._key[1],l=a^k[0],m=d^k[1],n=c^k[2],o=b^k[3],p=k.length/4-2,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(j=0;j<p;j++)g=s[l>>>24]^t[m>>16&255]^u[n>>8&255]^v[255&o]^k[q],h=s[m>>>24]^t[n>>16&255]^u[o>>8&255]^v[255&l]^k[q+1],i=s[n>>>24]^t[o>>16&255]^u[l>>8&255]^v[255&m]^k[q+2],o=s[o>>>24]^t[l>>16&255]^u[m>>8&255]^v[255&n]^k[q+3],q+=4,l=g,m=h,n=i;for(j=0;j<4;j++)e[(3&-j)+f]=w[l>>>24]<<24^w[m>>16&255]<<16^w[n>>8&255]<<8^w[255&o]^k[q++],g=l,l=m,m=n,n=o,o=g},a}(),k=function(a){function b(){var b;return b=a.call(this,g)||this,b.jobs=[],b.delay=1,b.timeout_=null,b}f(b,a);var c=b.prototype;return c.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},b}(g),l=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},m=function(a,b,c){var d,e,f,g,h,i,k,m,n,o=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),p=new j(Array.prototype.slice.call(b)),q=new Uint8Array(a.byteLength),r=new Int32Array(q.buffer);for(d=c[0],e=c[1],f=c[2],g=c[3],n=0;n<o.length;n+=4)h=l(o[n]),i=l(o[n+1]),k=l(o[n+2]),m=l(o[n+3]),p.decrypt(h,i,k,m,r,n),r[n]=l(r[n]^d),r[n+1]=l(r[n+1]^e),r[n+2]=l(r[n+2]^f),r[n+3]=l(r[n+3]^g),d=h,e=i,f=k,g=m;return q},n=function(){function a(b,d,e,f){var g=a.STEP,h=new Int32Array(b.buffer),i=new Uint8Array(b.byteLength),j=0;for(this.asyncStream_=new k,this.asyncStream_.push(this.decryptChunk_(h.subarray(j,j+g),d,e,i)),j=g;j<h.length;j+=g)e=new Uint32Array([l(h[j-4]),l(h[j-3]),l(h[j-2]),l(h[j-1])]),this.asyncStream_.push(this.decryptChunk_(h.subarray(j,j+g),d,e,i));this.asyncStream_.push(function(){f(null,c(i))})}var b=a.prototype;return b.decryptChunk_=function(a,b,c,d){return function(){var e=m(a,b,c);d.set(e,a.byteOffset)}},d(a,null,[{key:"STEP",get:function(){return 32e3}}]),a}(),o=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b};self.onmessage=function(a){var b=a.data,c=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),d=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),e=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new n(c,d,e,function(a,c){self.postMessage(o({source:b.source,decrypted:c}),[c.buffer])})}})),cp=hn(bp),dp=function(a){var b=a["default"]?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(b="main-desc"),b},ep=function(a,b){a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},fp=function(a,b){b.activePlaylistLoader=a,a.load()},gp=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.getActiveGroup(),i=f.activePlaylistLoader,j=f.lastGroup_;if((!h||!j||h.id!==j.id)&&(f.lastGroup_=h,f.lastTrack_=g,ep(d,f),h&&!h.isMasterPlaylist)){if(!h.playlistLoader)return void(i&&e.resetEverything());d.resyncLoader(),fp(h.playlistLoader,f)}}},hp=function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];d.lastGroup_=null,c.abort(),c.pause()}},ip=function(a,b){return function(){var c=b.masterPlaylistLoader,d=b.segmentLoaders,e=d[a],f=d.main,g=b.mediaTypes[a],h=g.activeTrack(),i=g.getActiveGroup(),j=g.activePlaylistLoader,k=g.lastTrack_;if((!k||!h||k.id!==h.id)&&(g.lastGroup_=i,g.lastTrack_=h,ep(e,g),i)){if(i.isMasterPlaylist){if(!h||!k||h.id===k.id)return;var l=b.vhs.masterPlaylistController_,m=l.selectPlaylist();if(l.media()===m)return;return g.logger_("track change. Switching master audio from "+k.id+" to "+h.id),c.pause(),f.resetEverything(),void l.fastQualityChange_(m)}if("AUDIO"===a){if(!i.playlistLoader)return f.setAudio(!0),void f.resetEverything();e.setAudio(!0),f.setAudio(!1)}if(j===i.playlistLoader)return void fp(i.playlistLoader,g);e.track&&e.track(h),e.resetEverything(),fp(i.playlistLoader,g)}}},jp={AUDIO:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;ep(c,d);var f=d.activeTrack(),g=d.activeGroup(),h=(g.filter(function(a){return a["default"]})[0]||g[0]).id,i=d.tracks[h];if(f===i)return void e({message:"Problem encountered loading the default audio track."});hb.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var j in d.tracks)d.tracks[j].enabled=d.tracks[j]===i;d.onTrackChanged()}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];hb.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ep(c,d);var e=d.activeTrack();e&&(e.mode="disabled"),d.onTrackChanged()}}},kp={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",jp[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",jp[a](a,c))}},lp={AUDIO:function(a,b){var c=b.vhs,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,h=b.mediaTypes[a],i=h.groups,j=h.tracks,k=h.logger_,l=b.masterPlaylistLoader,m=_l(l.master);g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{"default":{"default":!0}}},m&&(g[a].main["default"].playlists=l.master.playlists));for(var n in g[a]){i[n]||(i[n]=[]);for(var o in g[a][n]){var p=g[a][n][o],q=void 0;if(m?(k("AUDIO group '"+n+"' label '"+o+"' is a master playlist"),p.isMasterPlaylist=!0,q=null):q="vhs-json"===d&&p.playlists?new um(p.playlists[0],c,f):p.resolvedUri?new um(p.resolvedUri,c,f):p.playlists&&"dash"===d?new cn(p.playlists[0],c,f,l):null,p=hb.mergeOptions({id:o,playlistLoader:q},p),kp[a](a,p.playlistLoader,b),i[n].push(p),"undefined"==typeof j[o]){var r=new hb.AudioTrack({id:o,kind:dp(p),enabled:!1,language:p.language,"default":p["default"],label:o});j[o]=r}}}e.on("error",jp[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.vhs,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,i=b.mediaTypes[a],j=i.groups,k=i.tracks,l=b.masterPlaylistLoader;for(var m in h[a]){j[m]||(j[m]=[]);for(var n in h[a][m])if(!h[a][m][n].forced){var o=h[a][m][n],p=void 0;if("hls"===e)p=new um(o.resolvedUri,d,g);else if("dash"===e){var q=o.playlists.filter(function(a){return a.excludeUntil!==1/0});if(!q.length)return;p=new cn(o.playlists[0],d,g,l)}else"vhs-json"===e&&(p=new um(o.playlists?o.playlists[0]:o.resolvedUri,d,g));if(o=hb.mergeOptions({id:n,playlistLoader:p},o),kp[a](a,o.playlistLoader,b),j[m].push(o),"undefined"==typeof k[n]){var r=c.addRemoteTextTrack({id:n,kind:"subtitles","default":o["default"]&&o.autoselect,language:o.language,label:n},!1).track;k[n]=r}}}f.on("error",jp[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a],f=e.groups,g=e.tracks;for(var h in d[a]){f[h]||(f[h]=[]);for(var i in d[a][h]){var j=d[a][h][i];if(/^(?:CC|SERVICE)/.test(j.instreamId)){var k=c.options_.vhs&&c.options_.vhs.captionServices||{},l={label:i,language:j.language,instreamId:j.instreamId,"default":j["default"]&&j.autoselect};if(k[l.instreamId]&&(l=hb.mergeOptions(l,k[l.instreamId])),void 0===l["default"]&&delete l["default"],f[h].push(hb.mergeOptions({id:i},j)),"undefined"==typeof g[i]){var m=c.addRemoteTextTrack({id:l.instreamId,kind:"captions","default":l["default"],language:l.language,label:l.label},!1).track;g[i]=m}}}}}},mp=function iq(a,b){for(var c=0;c<a.length;c++){if(Zl(b,a[c]))return!0;if(a[c].playlists&&iq(a[c].playlists,b))return!0}return!1},np=function(a,b){return function(c){var d=b.masterPlaylistLoader,e=b.mediaTypes[a].groups,f=d.media();if(!f)return null;var g=null;f.attributes[a]&&(g=e[f.attributes[a]]);var h=Object.keys(e);if(!g)if("AUDIO"===a&&h.length>1&&_l(b.master))for(var i=0;i<h.length;i++){var j=e[h[i]];if(mp(j,f)){g=j;break}}else e.main?g=e.main:1===h.length&&(g=e[h[0]]);return"undefined"==typeof c?g:null!==c&&g?g.filter(function(a){return a.id===c.id})[0]||null:null}},op={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},pp=function(a,b){var c=b.mediaTypes;return function(){var b=c[a].activeTrack();return b?c[a].activeGroup(b):null}},qp=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){lp[b](b,a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.vhs,f=a.segmentLoaders,g=f.AUDIO,h=f.main;
["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=np(c,a),b[c].activeTrack=op[c](c,a),b[c].onGroupChanged=gp(c,a),b[c].onGroupChanging=hp(c,a),b[c].onTrackChanged=ip(c,a),b[c].getActiveGroup=pp(c,a)});var i=b.AUDIO.activeGroup();if(i){var j=(i.filter(function(a){return a["default"]})[0]||i[0]).id;b.AUDIO.tracks[j].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged();var k=b.AUDIO.getActiveGroup();k.playlistLoader?(h.setAudio(!1),g.setAudio(!0)):h.setAudio(!0)}c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})}),c.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanging()})});var l=function(){b.AUDIO.onTrackChanged(),d.trigger({type:"usage",name:"vhs-audio-change"}),d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",l),d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged),e.on("dispose",function(){d.audioTracks().removeEventListener("change",l),d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)}),d.clearTracks("audio");for(var m in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[m])},rp=function(){var a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:pc,activeTrack:pc,getActiveGroup:pc,onGroupChanged:pc,onTrackChanged:pc,lastTrack_:null,logger_:rl("MediaGroups["+b+"]")}}),a},sp=120,tp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],up=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},vp=function(a){var b=a.currentPlaylist,c=a.nextPlaylist,d=a.forwardBuffer,e=a.bufferLowWaterLine,f=a.bufferHighWaterLine,g=a.duration,h=a.experimentalBufferBasedABR,i=a.log;if(!c)return hb.log.warn("We received no playlist to switch to. Please check your stream."),!1;var j="allowing switch "+(b&&b.id||"null")+" -> "+c.id;if(!b)return i(j+" as current playlist is not set"),!0;if(c.id===b.id)return!1;if(!b.endList)return i(j+" as current playlist is live"),!0;var k=h?dn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:dn.MAX_BUFFER_LOW_WATER_LINE;if(g<k)return i(j+" as duration < max low water line ("+g+" < "+k+")"),!0;var l=c.attributes.BANDWIDTH,m=b.attributes.BANDWIDTH;if(l<m&&(!h||d<f)){var n=j+" as next bandwidth < current bandwidth ("+l+" < "+m+")";return h&&(n+=" and forwardBuffer < bufferHighWaterLine ("+d+" < "+f+")"),i(n),!0}if((!h||l>m)&&d>=e){var o=j+" as forwardBuffer >= bufferLowWaterLine ("+d+" >= "+e+")";return h&&(o+=" and next bandwidth > current bandwidth ("+l+" > "+m+")"),i(o),!0}return i("not "+j+" as no switching criteria met"),!1},wp=function(a){function b(b){var c;c=a.call(this)||this;var d=b.src,e=b.handleManifestRedirects,f=b.withCredentials,g=b.tech,h=b.bandwidth,i=b.externVhs,j=b.useCueTags,k=b.blacklistDuration,l=b.enableLowInitialPlaylist,m=b.sourceType,n=b.cacheEncryptionKeys,o=b.experimentalBufferBasedABR,p=b.experimentalLeastPixelDiffSelector;if(!d)throw new Error("A non-empty playlist URL or JSON manifest string is required");var q=b.maxPlaylistRetries;null!==q&&"undefined"!=typeof q||(q=1/0),ml=i,c.experimentalBufferBasedABR=Boolean(o),c.experimentalLeastPixelDiffSelector=Boolean(p),c.withCredentials=f,c.tech_=g,c.vhs_=g.vhs,c.sourceType_=m,c.useCueTags_=j,c.blacklistDuration=k,c.maxPlaylistRetries=q,c.enableLowInitialPlaylist=l,c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType=""),c.requestOptions_={withCredentials:f,handleManifestRedirects:e,maxPlaylistRetries:q,timeout:null},c.on("error",c.pauseLoading),c.mediaTypes_=rp(),c.mediaSource=new uc.MediaSource,c.handleDurationChange_=c.handleDurationChange_.bind(Yd(c)),c.handleSourceOpen_=c.handleSourceOpen_.bind(Yd(c)),c.handleSourceEnded_=c.handleSourceEnded_.bind(Yd(c)),c.mediaSource.addEventListener("durationchange",c.handleDurationChange_),c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_),c.mediaSource.addEventListener("sourceended",c.handleSourceEnded_),c.seekable_=hb.createTimeRanges(),c.hasPlayed_=!1,c.syncController_=new _o(b),c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,c.decrypter_=new cp,c.sourceUpdater_=new Uo(c.mediaSource),c.inbandTextTracks_={},c.timelineChangeController_=new ap;var r={vhs:c.vhs_,parse708captions:b.parse708captions,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.duration()},hasPlayed:function(){return c.hasPlayed_},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:h,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:n,sourceUpdater:c.sourceUpdater_,timelineChangeController:c.timelineChangeController_,experimentalExactManifestTimings:b.experimentalExactManifestTimings};c.masterPlaylistLoader_="dash"===c.sourceType_?new cn(d,c.vhs_,c.requestOptions_):new um(d,c.vhs_,c.requestOptions_),c.setupMasterPlaylistLoaderListeners_(),c.mainSegmentLoader_=new Jo(hb.mergeOptions(r,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),b),c.audioSegmentLoader_=new Jo(hb.mergeOptions(r,{loaderType:"audio"}),b),c.subtitleSegmentLoader_=new Xo(hb.mergeOptions(r,{loaderType:"vtt",featuresNativeTextTracks:c.tech_.featuresNativeTextTracks}),b),c.setupSegmentLoaderListeners_(),c.experimentalBufferBasedABR&&(c.masterPlaylistLoader_.one("loadedplaylist",function(){return c.startABRTimer_()}),c.tech_.on("pause",function(){return c.stopABRTimer_()}),c.tech_.on("play",function(){return c.startABRTimer_()})),tp.forEach(function(a){c[a+"_"]=up.bind(Yd(c),a)}),c.logger_=rl("MPC"),c.triggeredFmp4Usage=!1,"none"===c.tech_.preload()?(c.loadOnPlay_=function(){c.loadOnPlay_=null,c.masterPlaylistLoader_.load()},c.tech_.one("play",c.loadOnPlay_)):c.masterPlaylistLoader_.load(),c.timeToLoadedData__=-1,c.mainAppendsToLoadedData__=-1,c.audioAppendsToLoadedData__=-1;var s="none"===c.tech_.preload()?"play":"loadstart";return c.tech_.one(s,function(){var a=Date.now();c.tech_.one("loadeddata",function(){c.timeToLoadedData__=Date.now()-a,c.mainAppendsToLoadedData__=c.mainSegmentLoader_.mediaAppends,c.audioAppendsToLoadedData__=c.audioSegmentLoader_.mediaAppends})}),c}Zd(b,a);var c=b.prototype;return c.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},c.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},c.appendsToLoadedData_=function(){var a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return a===-1||b===-1?-1:a+b},c.timeToLoadedData_=function(){return this.timeToLoadedData__},c.checkABR_=function(){var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,"abr")},c.switchMedia_=function(a,b,c){var d=this.media(),e=d&&(d.id||d.uri),f=a.id||a.uri;e&&e!==f&&(this.logger_("switch media "+e+" -> "+f+" from "+b),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+b})),this.masterPlaylistLoader_.media(a,c)},c.startABRTimer_=function(){var a=this;this.stopABRTimer_(),this.abrTimer_=uc.setInterval(function(){return a.checkABR_()},250)},c.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(uc.clearInterval(this.abrTimer_),this.abrTimer_=null)},c.getAudioTrackPlaylists_=function(){var a=this.master(),b=a&&a.playlists||[];if(!a||!a.mediaGroups||!a.mediaGroups.AUDIO)return b;var c,d=a.mediaGroups.AUDIO,e=Object.keys(d);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{var f=d.main||e.length&&d[e[0]];for(var g in f)if(f[g]["default"]){c={label:g};break}}if(!c)return b;var h=[];for(var i in d)if(d[i][c.label]){var j=d[i][c.label];if(j.playlists&&j.playlists.length)h.push.apply(h,j.playlists);else if(j.uri)h.push(j);else if(a.playlists.length)for(var k=0;k<a.playlists.length;k++){var l=a.playlists[k];l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===i&&h.push(l)}}return h.length?h:b},c.setupMasterPlaylistLoaderListeners_=function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;Yl(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load()),qp({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,vhs:a.vhs_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),b),a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){a.loadOnPlay_&&a.tech_.off("play",a.loadOnPlay_);var b=a.masterPlaylistLoader_.media();if(!b){a.excludeUnsupportedVariants_();var c;if(a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),c||(c=a.selectPlaylist()),!c||!a.shouldSwitchToMedia_(c))return;a.initialMedia_=c,a.switchMedia_(a.initialMedia_,"initial");var d="vhs-json"===a.sourceType_&&a.initialMedia_.segments;if(!d)return;b=a.initialMedia_}a.handleUpdatedMediaPlaylist(b)}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;Yl(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();if("playlist-unchanged"!==b.lastExcludeReason_){var c=a.stuckAtPlaylistEnd_(b);c&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),a.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},c.handleUpdatedMediaPlaylist=function(a){this.useCueTags_&&this.updateAdCues_(a),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.updateDuration(!a.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},c.triggerPresenceUsage_=function(a,b){var c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(var f in c.AUDIO)for(var g in c.AUDIO[f]){var h=c.AUDIO[f][g];h.uri||(d=!1)}d&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(c.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),ml.Playlist.isAes(b)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&Object.keys(c.AUDIO[e[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},c.shouldSwitchToMedia_=function(a){var b=this.masterPlaylistLoader_.media(),c=this.tech_.buffered(),d=c.length?c.end(c.length-1)-this.tech_.currentTime():0,e=this.bufferLowWaterLine(),f=this.bufferHighWaterLine();return vp({currentPlaylist:b,nextPlaylist:a,forwardBuffer:d,bufferLowWaterLine:e,bufferHighWaterLine:f,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},c.setupSegmentLoaderListeners_=function(){var a=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist();a.shouldSwitchToMedia_(b)&&a.switchMedia_(b,"bandwidthupdate"),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){a.error=a.mainSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){a.error=a.audioSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){a.logger_("main segment loader ended"),a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(b){a.experimentalBufferBasedABR||(a.delegateLoaders_("all",["abort"]),a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},sp))});var b=function(){if(!a.sourceUpdater_.hasCreatedSourceBuffers())return a.tryToCreateSourceBuffers_();var b=a.getCodecsOrExclude_();b&&a.sourceUpdater_.addOrChangeSourceBuffers(b)};this.mainSegmentLoader_.on("trackinfo",b),this.audioSegmentLoader_.on("trackinfo",b),this.mainSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){a.logger_("audioSegmentLoader ended"),a.onEndOfStream()})},c.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},c.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},c.smoothQualityChange_=function(a){void 0===a&&(a=this.selectPlaylist()),this.fastQualityChange_(a)},c.fastQualityChange_=function(a){var b=this;return void 0===a&&(a=this.selectPlaylist()),a===this.masterPlaylistLoader_.media()?void this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(a,"fast-quality"),void this.mainSegmentLoader_.resetEverything(function(){hb.browser.IE_VERSION||hb.browser.IS_EDGE?b.tech_.setCurrentTime(b.tech_.currentTime()+.04):b.tech_.setCurrentTime(b.tech_.currentTime())}))},c.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.tech_.setCurrentTime(a.end(a.length-1)):void 0}},c.setupFirstPlay=function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(hb.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay"),a.tech_.setCurrentTime(c.end(0)),a.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(c.end(0))}return this.hasPlayed_=!0,this.load(),!0},c.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var a=this.tech_.play();"undefined"!=typeof a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")},c.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Math.abs(b)===1/0?Number.MAX_VALUE:b}}},c.handleDurationChange_=function(){this.tech_.trigger("durationchange")},c.onEndOfStream=function(){var a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var b=this.mainSegmentLoader_.getCurrentMediaInfo_();a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},c.stuckAtPlaylistEnd_=function(a){var b=this.seekable();if(!b.length)return!1;var c=this.syncController_.getExpiredTime(a,this.duration());if(null===c)return!1;var d=ml.Playlist.playlistEnd(a,c),e=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return d-e<=tl;var g=f.end(f.length-1);return g-e<=tl&&d-g<=tl},c.blacklistCurrentPlaylist=function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();if(b=b||a.blacklistDuration||this.blacklistDuration,!c)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));c.playlistErrors_++;var d=this.masterPlaylistLoader_.master.playlists,e=d.filter(Tl),f=1===e.length&&e[0]===c;if(1===d.length&&b!==1/0)return hb.log.warn("Problem encountered with playlist "+c.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var g=!1;d.forEach(function(a){if(a!==c){var b=a.excludeUntil;"undefined"!=typeof b&&b!==1/0&&(g=!0,delete a.excludeUntil)}}),g&&(hb.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;h=c.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*b,c.excludeUntil=h,a.reason&&(c.lastExcludeReason_=a.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var i=this.selectPlaylist();if(!i)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var j=a.internal?this.logger_:hb.log.warn,k=a.message?" "+a.message:"";j((a.internal?"Internal problem":"Problem")+" encountered with playlist "+c.id+"."+(k+" Switching to playlist "+i.id+".")),i.attributes.AUDIO!==c.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),i.attributes.SUBTITLES!==c.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var l=i.targetDuration/2*1e3||5e3,m="number"==typeof i.lastRequest&&Date.now()-i.lastRequest<=l;return this.switchMedia_(i,"exclude",f||m)},c.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},c.delegateLoaders_=function(a,b){var c=this,d=[],e="all"===a;(e||"main"===a)&&d.push(this.masterPlaylistLoader_);var f=[];(e||"audio"===a)&&f.push("AUDIO"),(e||"subtitle"===a)&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(a){var b=c.mediaTypes_[a]&&c.mediaTypes_[a].activePlaylistLoader;b&&d.push(b)}),["main","audio","subtitle"].forEach(function(b){var e=c[b+"SegmentLoader_"];!e||a!==b&&"all"!==a||d.push(e)}),d.forEach(function(a){return b.forEach(function(b){"function"==typeof a[b]&&a[b]()})})},c.setCurrentTime=function(a){var b=vl(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?b&&b.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},c.duration=function(){if(!this.masterPlaylistLoader_)return 0;var a=this.masterPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:ml.Playlist.duration(a):1/0:0},c.seekable=function(){return this.seekable_},c.onSyncInfoUpdate_=function(){var a;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var d=this.masterPlaylistLoader_.master,e=ml.Playlist.seekable(b,c,ml.Playlist.liveEdgeDelay(d,b));if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(b=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),c=this.syncController_.getExpiredTime(b,this.duration()),null===c)return;if(a=ml.Playlist.seekable(b,c,ml.Playlist.liveEdgeDelay(d,b)),0===a.length)return}var f,g;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),g=this.seekable_.start(0)),a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=hb.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===g||(this.logger_("seekable updated ["+zl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},c.updateDuration=function(a){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,a),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(a){var b=this.seekable();if(!b.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<b.end(b.length-1))&&this.sourceUpdater_.setDuration(b.end(b.length-1)))}var c=this.tech_.buffered(),d=ml.Playlist.duration(this.masterPlaylistLoader_.media());c.length>0&&(d=Math.max(d,c.end(c.length-1))),this.mediaSource.duration!==d&&this.sourceUpdater_.setDuration(d)},c.dispose=function(){var a=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(b){var c=a.mediaTypes_[b].groups;for(var d in c)c[d].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},c.master=function(){return this.masterPlaylistLoader_.master},c.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},c.areMediaTypesKnown_=function(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader,b=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),c=!a||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!b||!c)},c.getCodecsOrExclude_=function(){var a=this,b={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};b.video=b.main;var c=Xn(this.master(),this.media()),d={},e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(b.main.hasVideo&&(d.video=c.video||b.main.videoCodec||hi),b.main.isMuxed&&(d.video+=","+(c.audio||b.main.audioCodec||gi)),(b.main.hasAudio&&!b.main.isMuxed||b.audio.hasAudio||e)&&(d.audio=c.audio||b.main.audioCodec||b.audio.audioCodec||gi,b.audio.isFmp4=b.main.hasAudio&&!b.main.isMuxed?b.main.isFmp4:b.audio.isFmp4),!d.audio&&!d.video)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});var f,g=function(a,b){return a?ei(b):fi(b)},h={};if(["video","audio"].forEach(function(a){if(d.hasOwnProperty(a)&&!g(b[a].isFmp4,d[a])){var c=b[a].isFmp4?"browser":"muxer";h[c]=h[c]||[],h[c].push(d[a]),"audio"===a&&(f=c)}}),e&&f&&this.media().attributes.AUDIO){var i=this.media().attributes.AUDIO;this.master().playlists.forEach(function(b){var c=b.attributes&&b.attributes.AUDIO;c===i&&b!==a.media()&&(b.excludeUntil=1/0)}),this.logger_("excluding audio group "+i+" as "+f+' does not support codec(s): "'+d.audio+'"')}if(Object.keys(h).length){var j=Object.keys(h).reduce(function(a,b){return a&&(a+=", "),a+=b+' does not support codec(s): "'+h[b].join(",")+'"'},"")+".";return void this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:j,blacklistDuration:1/0})}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var k=[];if(["video","audio"].forEach(function(b){var c=(_h(a.sourceUpdater_.codecs[b]||"")[0]||{}).type,e=(_h(d[b]||"")[0]||{}).type;c&&e&&c.toLowerCase()!==e.toLowerCase()&&k.push('"'+a.sourceUpdater_.codecs[b]+'" -> "'+d[b]+'"')}),k.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+k.join(", ")+".",blacklistDuration:1/0,internal:!0})}return d},c.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();if(a){this.sourceUpdater_.createSourceBuffers(a);var b=[a.video,a.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(b)}}},c.excludeUnsupportedVariants_=function(){var a=this,b=this.master().playlists,c=[];Object.keys(b).forEach(function(d){var e=b[d];if(c.indexOf(e.id)===-1){c.push(e.id);var f=Xn(a.master,e),g=[];!f.audio||fi(f.audio)||ei(f.audio)||g.push("audio codec "+f.audio),!f.video||fi(f.video)||ei(f.video)||g.push("video codec "+f.video),f.text&&"stpp.ttml.im1t"===f.text&&g.push("text codec "+f.text),g.length&&(e.excludeUntil=1/0,a.logger_("excluding "+e.id+" for unsupported: "+g.join(", ")))}})},c.excludeIncompatibleVariants_=function(a){var b=this,c=[],d=this.master().playlists,e=Vn(_h(a)),f=Wn(e),g=e.video&&_h(e.video)[0]||null,h=e.audio&&_h(e.audio)[0]||null;Object.keys(d).forEach(function(a){var e=d[a];if(c.indexOf(e.id)===-1&&e.excludeUntil!==1/0){c.push(e.id);var i=[],j=Xn(b.masterPlaylistLoader_.master,e),k=Wn(j);if(j.audio||j.video){if(k!==f&&i.push('codec count "'+k+'" !== "'+f+'"'),!b.sourceUpdater_.canChangeType()){var l=j.video&&_h(j.video)[0]||null,m=j.audio&&_h(j.audio)[0]||null;l&&g&&l.type.toLowerCase()!==g.type.toLowerCase()&&i.push('video codec "'+l.type+'" !== "'+g.type+'"'),m&&h&&m.type.toLowerCase()!==h.type.toLowerCase()&&i.push('audio codec "'+m.type+'" !== "'+h.type+'"')}i.length&&(e.excludeUntil=1/0,b.logger_("blacklisting "+e.id+": "+i.join(" && ")))}}})},c.updateAdCues_=function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0)),Zo(a,this.cueTagsTrack_,b)},c.goalBufferLength=function(){var a=this.tech_.currentTime(),b=dn.GOAL_BUFFER_LENGTH,c=dn.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,dn.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)},c.bufferLowWaterLine=function(){var a=this.tech_.currentTime(),b=dn.BUFFER_LOW_WATER_LINE,c=dn.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,dn.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,dn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,this.experimentalBufferBasedABR?e:d)},c.bufferHighWaterLine=function(){return dn.BUFFER_HIGH_WATER_LINE},b}(hb.EventTarget),xp=function(a,b,c){return function(d){var e=a.master.playlists[b],f=Sl(e),g=Tl(e);return"undefined"==typeof d?g:(d?delete e.disabled:e.disabled=!0,d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled")),d)}},yp=function(a,b,c){var d=a.masterPlaylistController_,e=a.options_.smoothQualityChange,f=e?"smooth":"fast",g=d[f+"QualityChange_"].bind(d);if(b.attributes){var h=b.attributes.RESOLUTION;this.width=h&&h.width,this.height=h&&h.height,this.bandwidth=b.attributes.BANDWIDTH}this.codecs=Xn(d.master(),b),this.playlist=b,this.id=c,this.enabled=xp(a.playlists,b.id,g)},zp=function(a){a.representations=function(){var b=a.masterPlaylistController_.master(),c=_l(b)?a.masterPlaylistController_.getAudioTrackPlaylists_():b.playlists;return c?c.filter(function(a){return!Sl(a)}).map(function(b,c){return new yp(a,b,b.id)}):[]}},Ap=["seeking","seeked","pause","playing","error"],Bp=function(a){var b=a.buffered,c=a.targetDuration,d=a.currentTime;return!!b.length&&(!(b.end(0)-b.start(0)<2*c)&&(!(d>b.start(0))&&b.start(0)-d<c))},Cp=function(){function a(a){var b=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=rl("PlaybackWatcher"),this.logger_("initialize");var c=function(){return b.monitorCurrentTime_()},d=function(){return b.monitorCurrentTime_()},e=function(){return b.techWaiting_()},f=function(){return b.cancelTimer_()},g=function(){return b.fixesBadSeeks_()},h=this.masterPlaylistController_,i=["main","subtitle","audio"],j={};i.forEach(function(a){j[a]={reset:function(){return b.resetSegmentDownloads_(a)},updateend:function(){return b.checkSegmentDownloads_(a)}},h[a+"SegmentLoader_"].on("appendsdone",j[a].updateend),h[a+"SegmentLoader_"].on("playlistupdate",j[a].reset),b.tech_.on(["seeked","seeking"],j[a].reset)}),this.tech_.on("seekablechanged",g),this.tech_.on("waiting",e),this.tech_.on(Ap,f),this.tech_.on("canplay",d),this.tech_.one("play",c),this.dispose=function(){b.logger_("dispose"),b.tech_.off("seekablechanged",g),b.tech_.off("waiting",e),b.tech_.off(Ap,f),b.tech_.off("canplay",d),b.tech_.off("play",c),i.forEach(function(a){h[a+"SegmentLoader_"].off("appendsdone",j[a].updateend),h[a+"SegmentLoader_"].off("playlistupdate",j[a].reset),b.tech_.off(["seeked","seeking"],j[a].reset)}),b.checkCurrentTimeTimeout_&&uc.clearTimeout(b.checkCurrentTimeTimeout_),b.cancelTimer_()}}var b=a.prototype;return b.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&uc.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=uc.setTimeout(this.monitorCurrentTime_.bind(this),250)},b.resetSegmentDownloads_=function(a){var b=this.masterPlaylistController_[a+"SegmentLoader_"];this[a+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+a+" loader"),this[a+"StalledDownloads_"]=0,this[a+"Buffered_"]=b.buffered_()},b.checkSegmentDownloads_=function(a){var b=this.masterPlaylistController_,c=b[a+"SegmentLoader_"],d=c.buffered_(),e=Cl(this[a+"Buffered_"],d);return this[a+"Buffered_"]=d,e?void this.resetSegmentDownloads_(a):(this[a+"StalledDownloads_"]++,this.logger_("found #"+this[a+"StalledDownloads_"]+" "+a+" appends that did not increase buffer (possible stalled download)",{playlistId:c.playlist_&&c.playlist_.id,buffered:Bl(d)}),void(this[a+"StalledDownloads_"]<10||(this.logger_(a+" loader stalled download exclusion"),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:"vhs-"+a+"-download-exclusion"}),"subtitle"!==a&&b.blacklistCurrentPlaylist({
message:"Excessive "+a+" segment downloading detected."},1/0))))},b.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();return this.lastRecordedTime===a&&(!b.length||a+tl>=b.end(b.length-1))?this.techWaiting_():void(this.consecutiveUpdates>=5&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a))}},b.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},b.fixesBadSeeks_=function(){var a=this.tech_.seeking();if(!a)return!1;var b,c=this.seekable(),d=this.tech_.currentTime(),e=this.afterSeekableWindow_(c,d,this.media(),this.allowSeeksWithinUnsafeLiveWindow);if(e){var f=c.end(c.length-1);b=f}if(this.beforeSeekableWindow_(c,d)){var g=c.start(0);b=g+(g===c.end(0)?0:tl)}if("undefined"!=typeof b)return this.logger_("Trying to seek outside of seekable at time "+d+" with "+("seekable range "+zl(c)+". Seeking to ")+(b+".")),this.tech_.setCurrentTime(b),!0;var h=this.tech_.buffered();return!!Bp({buffered:h,targetDuration:this.media().targetDuration,currentTime:d})&&(b=h.start(0)+tl,this.logger_("Buffered region starts ("+h.start(0)+") "+(" just beyond seek point ("+d+"). Seeking to "+b+".")),this.tech_.setCurrentTime(b),!0)},b.waiting_=function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered(),c=vl(b,a);return c.length&&a+3<=c.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+c.start(0)+" -> "+c.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},b.techWaiting_=function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b)){var c=a.end(a.length-1);return this.logger_("Fell out of live window at time "+b+". Seeking to live point (seekable end) "+c),this.cancelTimer_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var d=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,e=this.tech_.buffered(),f=this.videoUnderflow_({audioBuffered:d.audioBuffered(),videoBuffered:d.videoBuffered(),currentTime:b});if(f)return this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var g=wl(e,b);if(g.length>0){var h=g.start(0)-b;return this.logger_("Stopped at "+b+", setting timer for "+h+", seeking to "+g.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*h,b),!0}return!1},b.afterSeekableWindow_=function(a,b,c,d){if(void 0===d&&(d=!1),!a.length)return!1;var e=a.end(a.length-1)+tl,f=!c.endList;return f&&d&&(e=a.end(a.length-1)+3*c.targetDuration),b>e},b.beforeSeekableWindow_=function(a,b){return!!(a.length&&a.start(0)>0&&b<a.start(0)-this.liveRangeSafeTimeDelta)},b.videoUnderflow_=function(a){var b=a.videoBuffered,c=a.audioBuffered,d=a.currentTime;if(b){var e;if(b.length&&c.length){var f=vl(b,d-3),g=vl(b,d),h=vl(c,d);h.length&&!g.length&&f.length&&(e={start:f.end(0),end:h.end(0)})}else{var i=wl(b,d);i.length||(e=this.gapFromVideoUnderflow_(b,d))}return!!e&&(this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+d),!0)}},b.skipTheGap_=function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime(),d=wl(b,c);this.cancelTimer_(),0!==d.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+sl),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},b.gapFromVideoUnderflow_=function(a,b){for(var c=xl(a),d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(b-e<4&&b-e>2)return{start:e,end:f}}return null},a}(),Dp={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}),c=b.currentSource_||this.currentSource();return a(c)}},Ep=function jq(a,b){var c=0,d=0,e=hb.mergeOptions(Dp,b);a.ready(function(){a.trigger({type:"usage",name:"vhs-error-reload-initialized"}),a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var f=function(){d&&a.currentTime(d)},g=function(b){null!==b&&void 0!==b&&(d=a.duration()!==1/0&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"vhs-error-reload"}),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},h=function(){return Date.now()-c<1e3*e.errorInterval?(a.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void a.trigger({type:"usage",name:"hls-error-reload-canceled"})):e.getSource&&"function"==typeof e.getSource?(c=Date.now(),e.getSource.call(a,g)):void hb.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},i=function k(){a.off("loadedmetadata",f),a.off("error",h),a.off("dispose",k)},j=function(b){i(),jq(a,b)};a.on("error",h),a.on("dispose",i),a.reloadSourceOnError=j},Fp=function(a){Ep(this,a)},Gp="2.10.2",Hp="5.13.0",Ip="0.19.0",Jp="4.7.0",Kp="3.1.2",Lp={PlaylistLoader:um,Playlist:am,utils:Km,STANDARD_PLAYLIST_SELECTOR:eo,INITIAL_PLAYLIST_SELECTOR:ho,lastBandwidthSelector:eo,movingAverageBandwidthSelector:fo,comparePlaylistBandwidth:ao,comparePlaylistResolution:bo,xhr:ym()};Object.keys(dn).forEach(function(a){Object.defineProperty(Lp,a,{get:function(){return hb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),dn[a]},set:function(b){return hb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof b||b<0?void hb.log.warn("value of Vhs."+a+" must be greater than or equal to 0"):void(dn[a]=b)}})});var Mp="videojs-vhs",Np=function(a,b){for(var c=b.media(),d=-1,e=0;e<a.length;e++)if(a[e].id===c.id){d=e;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})},Op=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)}),Np(a,b.playlists)};Lp.canPlaySource=function(){return hb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Pp=function(a,b,c){if(!a)return a;var d={};b&&b.attributes&&b.attributes.CODECS&&(d=Vn(_h(b.attributes.CODECS))),c&&c.attributes&&c.attributes.CODECS&&(d.audio=c.attributes.CODECS);var e=di(d.video),f=di(d.audio),g={};for(var h in a)g[h]={},f&&(g[h].audioContentType=f),e&&(g[h].videoContentType=e),b.contentProtection&&b.contentProtection[h]&&b.contentProtection[h].pssh&&(g[h].pssh=b.contentProtection[h].pssh),"string"==typeof a[h]&&(g[h].url=a[h]);return hb.mergeOptions(a,g)},Qp=function(a,b){return a.reduce(function(a,c){if(!c.contentProtection)return a;var d=b.reduce(function(a,b){var d=c.contentProtection[b];return d&&d.pssh&&(a[b]={pssh:d.pssh}),a},{});return Object.keys(d).length&&a.push(d),a},[])},Rp=function(a){var b=a.player,c=a.sourceKeySystems,d=a.audioMedia,e=a.mainPlaylists;if(!b.eme.initializeMediaKeys)return Promise.resolve();var f=d?e.concat([d]):e,g=Qp(f,Object.keys(c)),h=[],i=[];return g.forEach(function(a){i.push(new Promise(function(a,c){b.tech_.one("keysessioncreated",a)})),h.push(new Promise(function(c,d){b.eme.initializeMediaKeys({keySystems:a},function(a){return a?void d(a):void c()})}))}),Promise.race([Promise.all(h),Promise.race(i)])},Sp=function(a){var b=a.player,c=a.sourceKeySystems,d=a.media,e=a.audioMedia,f=Pp(c,d,e);return!!f&&(b.currentSource().keySystems=f,!(f&&!b.eme)||(hb.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},Tp=function(){if(!uc.localStorage)return null;var a=uc.localStorage.getItem(Mp);if(!a)return null;try{return JSON.parse(a)}catch(b){return null}},Up=function(a){if(!uc.localStorage)return!1;var b=Tp();b=b?hb.mergeOptions(b,a):a;try{uc.localStorage.setItem(Mp,JSON.stringify(b))}catch(c){return!1}return b},Vp=function(a){return 0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a};Lp.supportsNativeHls=function(){if(!Dc||!Dc.createElement)return!1;var a=Dc.createElement("video");if(!hb.getTech("Html5").isSupported())return!1;var b=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return b.some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),Lp.supportsNativeDash=function(){return!!(Dc&&Dc.createElement&&hb.getTech("Html5").isSupported())&&/maybe|probably/i.test(Dc.createElement("video").canPlayType("application/dash+xml"))}(),Lp.supportsTypeNatively=function(a){return"hls"===a?Lp.supportsNativeHls:"dash"===a&&Lp.supportsNativeDash},Lp.isSupported=function(){return hb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Wp=hb.getComponent("Component"),Xp=function(a){function b(b,c,d){var e;if(e=a.call(this,c,hb.mergeOptions(d.hls,d.vhs))||this,d.hls&&Object.keys(d.hls).length&&hb.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof d.initialBandwidth&&(e.options_.bandwidth=d.initialBandwidth),e.logger_=rl("VhsHandler"),c.options_&&c.options_.playerId){var f=hb(c.options_.playerId);f.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){return hb.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"hls-player-access"}),Yd(e)},configurable:!0}),f.hasOwnProperty("vhs")||Object.defineProperty(f,"vhs",{get:function(){return hb.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"vhs-player-access"}),Yd(e)},configurable:!0}),f.hasOwnProperty("dash")||Object.defineProperty(f,"dash",{get:function(){return hb.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Yd(e)},configurable:!0}),e.player_=f}if(e.tech_=c,e.source_=b,e.stats={},e.ignoreNextSeekingEvent_=!1,e.setOptions_(),e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return e.on(Dc,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){var b=Dc.fullscreenElement||Dc.webkitFullscreenElement||Dc.mozFullScreenElement||Dc.msFullscreenElement;b&&b.contains(e.tech_.el())?e.masterPlaylistController_.fastQualityChange_():e.masterPlaylistController_.checkABR_()}),e.on(e.tech_,"seeking",function(){return this.ignoreNextSeekingEvent_?void(this.ignoreNextSeekingEvent_=!1):void this.setCurrentTime(this.tech_.currentTime())}),e.on(e.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),e.on(e.tech_,"play",e.play),e}Zd(b,a);var c=b.prototype;return c.setOptions_=function(){var a=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=Tp();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=dn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===dn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(b){"undefined"!=typeof a.source_[b]&&(a.options_[b]=a.source_[b])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},c.src=function(a,b){var c=this;if(a){this.setOptions_(),this.options_.src=Vp(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Lp,this.options_.sourceType=ki(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a)},this.options_.smoothQualityChange&&hb.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new wp(this.options_);var d=hb.mergeOptions({liveRangeSafeTimeDelta:tl},this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Cp(d),this.masterPlaylistController_.on("error",function(){var a=hb.players[c.tech_.options_.playerId],b=c.masterPlaylistController_.error;"object"!=typeof b||b.code?"string"==typeof b&&(b={message:b,code:3}):b.code=3,a.error(b)});var e=this.options_.experimentalBufferBasedABR?Lp.movingAverageBandwidthSelector(.55):Lp.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):e.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Lp.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var a,b=1/(this.bandwidth||1);a=this.throughput>0?1/this.throughput:0;var c=Math.floor(1/(b+a));return c},set:function(){hb.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return c.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return c.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return c.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Bl(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Bl(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){c.options_.useBandwidthFromLocalStorage&&Up({bandwidth:c.bandwidth,throughput:Math.round(c.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){zp(c)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){c.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=uc.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},c.setupEme_=function(){var a=this,b=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,c=Sp({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:b&&b.media()});return this.player_.tech_.on("keystatuschange",function(b){"output-restricted"===b.status&&a.masterPlaylistController_.blacklistCurrentPlaylist({playlist:a.masterPlaylistController_.media(),message:"DRM keystatus changed to "+b.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==hb.browser.IE_VERSION&&c?(this.logger_("waiting for EME key session creation"),void Rp({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:b&&b.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){a.logger_("created EME key session"),a.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(b){a.logger_("error while creating EME key session",b),a.player_.error({message:"Failed to initialize media keys for EME",code:3})})):void this.masterPlaylistController_.sourceUpdater_.initializedEme()},c.setupQualityLevels_=function(){var a=this,b=hb.players[this.tech_.options_.playerId];b&&b.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Op(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){Np(a.qualityLevels_,a.playlists)}))},b.version=function(){return{"@videojs/http-streaming":Gp,"mux.js":Hp,"mpd-parser":Ip,"m3u8-parser":Jp,"aes-decrypter":Kp}},c.version=function(){return this.constructor.version()},c.canChangeType=function(){return Uo.canChangeType()},c.play=function(){this.masterPlaylistController_.play()},c.setCurrentTime=function(a){this.masterPlaylistController_.setCurrentTime(a)},c.duration=function(){return this.masterPlaylistController_.duration()},c.seekable=function(){return this.masterPlaylistController_.seekable()},c.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&uc.URL.revokeObjectURL&&(uc.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),a.prototype.dispose.call(this)},c.convertToProgramTime=function(a,b){return Sm({playlist:this.masterPlaylistController_.media(),time:a,callback:b})},c.seekToProgramTime=function(a,b,c,d){return void 0===c&&(c=!0),void 0===d&&(d=2),Tm({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})},b}(Wp),Yp={name:"videojs-http-streaming",VERSION:Gp,canHandleSource:function(a,b){void 0===b&&(b={});var c=hb.mergeOptions(hb.options,b);return Yp.canPlayType(a.type,c)},handleSource:function(a,b,c){void 0===c&&(c={});var d=hb.mergeOptions(hb.options,c);return b.vhs=new Xp(a,b,d),hb.hasOwnProperty("hls")||Object.defineProperty(b,"hls",{get:function(){return hb.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),b.vhs},configurable:!0}),b.vhs.xhr=ym(),b.vhs.src(a.src,a.type),b.vhs},canPlayType:function(a,b){void 0===b&&(b={});var c=hb.mergeOptions(hb.options,b),d=c.vhs.overrideNative,e=void 0===d?!hb.browser.IS_ANY_SAFARI:d,f=ki(a),g=f&&(!Lp.supportsTypeNatively(f)||e);return g?"maybe":""}},Zp=function(){return ei("avc1.4d400d,mp4a.40.2")};return Zp()&&hb.getTech("Html5").registerSourceHandler(Yp,0),hb.VhsHandler=Xp,Object.defineProperty(hb,"HlsHandler",{get:function(){return hb.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Xp},configurable:!0}),hb.VhsSourceHandler=Yp,Object.defineProperty(hb,"HlsSourceHandler",{get:function(){return hb.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Yp},configurable:!0}),hb.Vhs=Lp,Object.defineProperty(hb,"Hls",{get:function(){return hb.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Lp},configurable:!0}),hb.use||(hb.registerComponent("Hls",Lp),hb.registerComponent("Vhs",Lp)),hb.options.vhs=hb.options.vhs||{},hb.options.hls=hb.options.hls||{},hb.registerPlugin?hb.registerPlugin("reloadSourceOnError",Fp):hb.plugin("reloadSourceOnError",Fp),hb})}(void 0),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("global/document"),require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["exports","global/document","video.js","global/window"],b):b(a.videojsContribEme={},a.document,a.videojs,a.window)}(this,function(a,b,c,d){"use strict";function e(){return e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e.apply(this,arguments)}b=b&&b.hasOwnProperty("default")?b["default"]:b,c=c&&c.hasOwnProperty("default")?c["default"]:c,d=d&&d.hasOwnProperty("default")?d["default"]:d;var f=function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return c},g=function(a){return String.fromCharCode.apply(null,new Uint16Array(a.buffer))},h=function(a){var c=b.createElement("a");return c.href=a,c.hostname},i=function(a,b){if(a===b)return!0;if(a.byteLength!==b.byteLength)return!1;for(var c=new DataView(a),d=new DataView(b),e=0;e<c.byteLength;e++)if(c.getUint8(e)!==d.getUint8(e))return!1;return!0},j=function(a){return a instanceof Uint8Array||a instanceof Uint16Array?a.buffer:a},k=function(){var a=c.mergeOptions.apply(c,arguments);return Object.keys(a).forEach(function(b){null===a[b]&&delete a[b]}),a},l=function(a){var b=(new d.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(a)),"application/xml"),c=b.getElementsByTagName("HttpHeaders")[0],e={};if(c)for(var f=c.getElementsByTagName("name"),g=c.getElementsByTagName("value"),h=0;h<f.length;h++)e[f[h].childNodes[0].nodeValue]=g[h].childNodes[0].nodeValue;var i,j=b.getElementsByTagName("Challenge")[0];return j&&(i=d.atob(j.childNodes[0].nodeValue)),{headers:e,message:i}},m=function(a,b,d,e){var f=l(b),g=f.message,h=k(f.headers,d.emeHeaders,a.licenseHeaders);c.xhr({uri:a.url,method:"post",headers:h,body:g,responseType:"arraybuffer"},function(a,b,c){return a?void e(a):b.statusCode>=400&&b.statusCode<=599?void e({}):void e(null,c)})},n=function(a){if(a.supportedConfigurations)return a.supportedConfigurations;var b={},c=a.audioContentType,d=a.audioRobustness,f=a.videoContentType,g=a.videoRobustness,h=a.persistentState;return(c||d)&&(b.audioCapabilities=[e({},c?{contentType:c}:{},d?{robustness:d}:{})]),(f||g)&&(b.videoCapabilities=[e({},f?{contentType:f}:{},g?{robustness:g}:{})]),h&&(b.persistentState=h),[b]},o=function(a){var b;return Object.keys(a).forEach(function(c){var e=n(a[c]);b=b?b["catch"](function(a){return d.navigator.requestMediaKeySystemAccess(c,e)}):d.navigator.requestMediaKeySystemAccess(c,e)}),b},p=function T(a){var b=a.mediaKeys,d=a.initDataType,e=a.initData,f=a.options,g=a.getLicense,h=a.removeSession,i=a.eventBus,j=b.createSession();return i.trigger("keysessioncreated"),new Promise(function(b,k){j.addEventListener("message",function(a){"license-request"!==a.messageType&&"license-renewal"!==a.messageType||g(f,a.message).then(function(a){b(j.update(a))})["catch"](function(a){k(a)})},!1),j.addEventListener("keystatuseschange",function(b){var d=!1;j.keyStatuses.forEach(function(a,e){switch(i.trigger({keyId:e,status:a,target:j,type:"keystatuschange"}),a){case"expired":d=!0;break;case"internal-error":c.log.warn('Key status reported as "internal-error." Leaving the session open since we don\'t have enough details to know if this error is fatal.',b)}}),d&&j.close().then(function(){h(e),T(a)})},!1),j.generateRequest(d,e)["catch"](function(){k("Unable to create or initialize key session")})})},q=function(a){var b=a.video,c=a.initDataType,d=a.initData,e=a.options,f=a.getLicense,g=a.removeSession,h=a.eventBus;return b.mediaKeysObject?p({mediaKeys:b.mediaKeysObject,initDataType:c,initData:d,options:e,getLicense:f,removeSession:g,eventBus:h}):(b.pendingSessionData.push({initDataType:c,initData:d,options:e,getLicense:f,removeSession:g,eventBus:h}),Promise.resolve())},r=function(a){var b=a.video,c=a.certificate,d=a.createdMediaKeys;b.mediaKeysObject=d;var e=[];c&&e.push(d.setServerCertificate(c));for(var f=0;f<b.pendingSessionData.length;f++){var g=b.pendingSessionData[f];e.push(p({mediaKeys:b.mediaKeysObject,initDataType:g.initDataType,initData:g.initData,options:g.options,getLicense:g.getLicense,removeSession:g.removeSession,eventBus:g.eventBus}))}return b.pendingSessionData=[],e.push(b.setMediaKeys(d)),Promise.all(e)},s=function(a){return function(b,c,d){m(a,c,b,d)}},t=function(a){return function(b,d,e){var f=k({"Content-type":"application/octet-stream"},b.emeHeaders,a.licenseHeaders);c.xhr({uri:a.url,method:"POST",responseType:"arraybuffer",body:d,headers:f},function(a,b,c){return a?void e(a):b.statusCode>=400&&b.statusCode<=599?void e({}):void e(null,c)})}},u=function(a,b){return function(c,d){return new Promise(function(e,f){a(c,d,function(a,c){return b&&b.trigger("licenserequestattempted"),a?void f(a):void e(c)})})}},v=function(a,b){if("string"==typeof b&&(b={url:b}),!b.url&&!b.getLicense)throw new Error("Neither URL nor getLicense function provided to get license");return b.url&&!b.getLicense&&(b.getLicense="com.microsoft.playready"===a?s(b):t(b)),b},w=function(a){var b=a.video,c=a.initDataType,d=a.initData,e=a.keySystemAccess,f=a.options,g=a.removeSession,h=a.eventBus,i=Promise.resolve();if("undefined"==typeof b.mediaKeysObject){b.mediaKeysObject=null,b.pendingSessionData=[];var j,k;i=new Promise(function(a,c){return b.keySystem=e.keySystem,k=v(e.keySystem,f.keySystems[e.keySystem]),k.getCertificate?void k.getCertificate(f,function(b,d){return b?void c(b):(j=d,void a())}):void a(e)}).then(function(){return e.createMediaKeys()}).then(function(a){return r({video:b,certificate:j,createdMediaKeys:a})})["catch"](function(a){return a?Promise.reject(a):Promise.reject("Failed to create and initialize a MediaKeys object")})}return i.then(function(){return q({video:b,initDataType:c,initData:d,options:f,getLicense:b.keySystem?u(v(b.keySystem,f.keySystems[b.keySystem]).getLicense,h):null,removeSession:g,eventBus:h})})},x="com.apple.fps.1_0",y=function(a){var b=a.initData,c=a.id,d=a.cert;"string"==typeof c&&(c=f(c));var e=0,g=new ArrayBuffer(b.byteLength+4+c.byteLength+4+d.byteLength),h=new DataView(g),i=new Uint8Array(g,e,b.byteLength);i.set(b),e+=b.byteLength,h.setUint32(e,c.byteLength,!0),e+=4;var j=new Uint16Array(g,e,c.length);j.set(c),e+=j.byteLength,h.setUint32(e,d.byteLength,!0),e+=4;var k=new Uint8Array(g,e,d.byteLength);return k.set(d),new Uint8Array(g,0,g.byteLength)},z=function(a){var b=a.video,c=a.contentId,e=a.initData,f=a.cert,g=a.options,h=a.getLicense,i=a.eventBus;return new Promise(function(a,j){if(!b.webkitKeys)try{b.webkitSetMediaKeys(new d.WebKitMediaKeys(x))}catch(k){return void j("Could not create MediaKeys")}var l;try{l=b.webkitKeys.createSession("video/mp4",y({id:c,initData:e,cert:f}))}catch(k){return void j("Could not create key session")}i.trigger("keysessioncreated"),l.contentId=c,l.addEventListener("webkitkeymessage",function(a){h(g,c,a.message,function(a,b){return i&&i.trigger("licenserequestattempted"),a?void j(a):void l.update(new Uint8Array(b))})}),l.addEventListener("webkitkeyadded",function(){a()}),l.addEventListener("webkitkeyerror",function(){var a=l.error;j("KeySession error: code "+a.code+", systemCode "+a.systemCode)})})},A=function(a){return function(b,d){var e=k(b.emeHeaders,a.certificateHeaders);c.xhr({uri:a.certificateUri,responseType:"arraybuffer",headers:e},function(a,b,c){return a?void d(a):void d(null,new Uint8Array(c))})}},B=function(a,b){return h(g(b))},C=function(a){return function(b,d,e,f){var g=k({"Content-type":"application/octet-stream"},b.emeHeaders,a.licenseHeaders);c.xhr({uri:a.licenseUri,method:"POST",responseType:"arraybuffer",body:e,headers:g},function(a,b,c){return a?void f(a):b.statusCode>=400&&b.statusCode<=599?void f({}):void f(null,c)})}},D=function(a){var b=a.video,c=a.initData,d=a.options,e=a.eventBus,f=d.keySystems[x],g=f.getCertificate||A(f),h=f.getContentId||B,i=f.getLicense||C(f);return new Promise(function(a,b){g(d,function(c,d){return c?void b(c):void a(d)})}).then(function(a){return z({video:b,cert:a,initData:c,getLicense:i,options:d,contentId:h(d,c),eventBus:e})})},E="com.microsoft.playready",F=function(a,b,c,d){var e=a.keySystems[E];if("function"==typeof e.getKey)return void e.getKey(a,c.destinationURL,c.message.buffer,function(a,c){return a?void d.trigger({message:"Unable to get key: "+a,target:b,
type:"mskeyerror"}):void b.update(c)});"string"==typeof e?e={url:e}:"boolean"==typeof e&&(e={}),e.url||(e.url=c.destinationURL);var f=function(a,c){return d&&d.trigger("licenserequestattempted"),a?void d.trigger({message:"Unable to request key from url: "+e.url,target:b,type:"mskeyerror"}):void b.update(new Uint8Array(c))};e.getLicense?e.getLicense(a,c.message.buffer,f):m(e,c.message.buffer,a,f)},G=function(a,b,c,d){var e=a.msKeys.createSession("video/mp4",b);if(!e)throw new Error("Could not create key session.");d.trigger("keysessioncreated"),e.addEventListener("mskeymessage",function(a){F(c,e,a,d)}),e.addEventListener("mskeyerror",function(a){d.trigger({message:"Unexpected key error from key session with "+("code: "+e.error.code+" and systemCode: "+e.error.systemCode),target:e,type:"mskeyerror"})}),e.addEventListener("mskeyadded",function(){d.trigger({target:e,type:"mskeyadded"})})},H=function(a){var b=a.video,c=a.initData,e=a.options,f=a.eventBus;b.msKeys&&delete b.msKeys;try{b.msSetMediaKeys(new d.MSMediaKeys(E))}catch(g){throw new Error("Unable to create media keys for PlayReady key system. Error: "+g.message)}G(b,c,e,f)},I=function(a,b){for(var c=0;c<a.length;c++)if(a[c].initData){var d=j(a[c].initData),e=j(b);if(i(d,e))return!0}return!1},J=function(a,b){for(var c=0;c<a.length;c++)if(a[c].initData===b)return void a.splice(c,1)},K=function(a,b,c,d){if(!b||!b.keySystems)return Promise.resolve();var e=a.initData;return o(b.keySystems).then(function(f){var g=f.keySystem;return b.keySystems[g]&&b.keySystems[g].pssh&&(e=b.keySystems[g].pssh),I(c,e)||!e?Promise.resolve():(c.push({initData:e}),w({video:a.target,initDataType:a.initDataType,initData:e,keySystemAccess:f,options:b,removeSession:J.bind(null,c),eventBus:d}))})},L=function(a,b,c){return b.keySystems&&b.keySystems[x]&&a.initData?D({video:a.target,initData:a.initData,options:b,eventBus:c}):Promise.resolve()},M=function(a,b,c,d){if(b.keySystems&&b.keySystems[E]&&!c.reduce(function(a,b){return a||b.playready},!1)){var e=a.initData;b.keySystems[E]&&b.keySystems[E].pssh&&(e=b.keySystems[E].pssh),e&&(c.push({playready:!0,initData:e}),H({video:a.target,initData:e,options:b,eventBus:d}))}},N=function(a){return c.mergeOptions(a.currentSource(),a.eme.options)},O=function(a){var b=a.src();b!==a.eme.activeSrc&&(a.eme.activeSrc=b,a.eme.sessions=[])},P=function(a){return function(b){var c="string"==typeof b?b:b&&b.message||null;a.error({code:5,message:c})}},Q=function(a,b){if("video"===a.$(".vjs-tech").tagName.toLowerCase())if(O(a),d.WebKitMediaKeys){var c=function(c){O(a),L(c,N(a),a.tech_)["catch"](b)};a.tech_.el_.addEventListener("webkitneedkey",function(b){var d=N(a),e=d.firstWebkitneedkeyTimeout||1e3,f=a.src();a.eme.webkitneedkey_=a.eme.webkitneedkey_||{},a.eme.webkitneedkey_.src!==f&&(a.eme.webkitneedkey_={handledFirstEvent:!1,src:f}),a.eme.webkitneedkey_.handledFirstEvent?c(b):(a.clearTimeout(a.eme.webkitneedkey_.timeout),a.eme.webkitneedkey_.timeout=a.setTimeout(function(){a.eme.webkitneedkey_.handledFirstEvent=!0,a.eme.webkitneedkey_.timeout=null,c(b)},e))})}else d.MediaKeys?a.tech_.el_.addEventListener("encrypted",function(c){O(a),K(c,N(a),a.eme.sessions,a.tech_)["catch"](b)}):d.MSMediaKeys&&(a.tech_.el_.addEventListener("msneedkey",function(c){O(a);try{M(c,N(a),a.eme.sessions,a.tech_)}catch(d){b(d)}}),a.tech_.on("mskeyerror",b),a.on("dispose",function(){a.tech_.off("mskeyerror",b)}))},R=function(a){void 0===a&&(a={});var b=this,d=P(b);b.ready(function(){return Q(b,d)}),b.eme={initializeMediaKeys:function(e,f,g){void 0===e&&(e={}),void 0===f&&(f=function(){}),void 0===g&&(g=!1);var h=c.mergeOptions(b.currentSource(),a,e),i={initDataType:"cenc",initData:null,target:b.tech_.el_};if(O(b),b.tech_.el_.setMediaKeys)K(i,h,b.eme.sessions,b.tech_).then(function(){return f()})["catch"](function(a){f(a),g||d(a)});else if(b.tech_.el_.msSetMediaKeys){var j=function l(a){b.tech_.off("mskeyadded",l),b.tech_.off("mskeyerror",l),"mskeyerror"===a.type?(f(a.target.error),g||d(a.message)):f()};b.tech_.one("mskeyadded",j),b.tech_.one("mskeyerror",j);try{M(i,h,b.eme.sessions,b.tech_)}catch(k){b.tech_.off("mskeyadded",j),b.tech_.off("mskeyerror",j),f(k),g||d(k)}}},options:a}},S=c.registerPlugin||c.plugin;S("eme",R),a.hasSession=I,a.removeSession=J,a.handleEncryptedEvent=K,a.handleWebKitNeedKeyEvent=L,a.handleMsNeedKeyEvent=M,a.getOptions=N,a.setupSessions=O,a.emeErrorHandler=P,a["default"]=R,Object.defineProperty(a,"__esModule",{value:!0})}),function C(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,C,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c.IVPAIDAdUnit=function(){function a(){d(this,a)}return e(a,[{key:"handshakeVersion",value:function(){arguments.length<=0||void 0===arguments[0]?"2.0":arguments[0],arguments.length<=1||void 0===arguments[1]?void 0:arguments[1]}},{key:"initAd",value:function(a,b,c,d){arguments.length<=4||void 0===arguments[4]?{AdParameters:""}:arguments[4],arguments.length<=5||void 0===arguments[5]?{flashVars:""}:arguments[5],arguments.length<=6||void 0===arguments[6]?void 0:arguments[6]}},{key:"resizeAd",value:function(a,b,c){arguments.length<=3||void 0===arguments[3]?void 0:arguments[3]}},{key:"startAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"stopAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"pauseAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"resumeAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"expandAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"collapseAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"skipAd",value:function(){arguments.length<=0||void 0===arguments[0]?void 0:arguments[0]}},{key:"getAdLinear",value:function(a){}},{key:"getAdWidth",value:function(a){}},{key:"getAdHeight",value:function(a){}},{key:"getAdExpanded",value:function(a){}},{key:"getAdSkippableState",value:function(a){}},{key:"getAdRemainingTime",value:function(a){}},{key:"getAdDuration",value:function(a){}},{key:"setAdVolume",value:function(a){arguments.length<=1||void 0===arguments[1]?void 0:arguments[1]}},{key:"getAdVolume",value:function(a){}},{key:"getAdCompanions",value:function(a){}},{key:"getAdIcons",value:function(a){}}]),a}();Object.defineProperty(f,"EVENTS",{writable:!1,configurable:!1,value:["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"]})},{}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"==typeof b?"undefined":g(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof b?"undefined":g(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./IVPAIDAdUnit").IVPAIDAdUnit,j=Object.getOwnPropertyNames(i.prototype).filter(function(a){return["constructor"].indexOf(a)===-1});c.VPAIDAdUnit=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._destroyed=!1,c._flash=a,c}return f(b,a),h(b,[{key:"_destroy",value:function(){var a=this;this._destroyed=!0,j.forEach(function(b){a._flash.removeCallbackByMethodName(b)}),i.EVENTS.forEach(function(b){a._flash.offEvent(b)}),this._flash=null}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"on",value:function(a,b){this._flash.on(a,b)}},{key:"off",value:function(a,b){this._flash.off(a,b)}},{key:"handshakeVersion",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"2.0":arguments[0],b=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];this._flash.callFlashMethod("handshakeVersion",[a],b)}},{key:"initAd",value:function(a,b,c,d){var e=arguments.length<=4||void 0===arguments[4]?{AdParameters:""}:arguments[4],f=arguments.length<=5||void 0===arguments[5]?{flashVars:""}:arguments[5],g=arguments.length<=6||void 0===arguments[6]?void 0:arguments[6];this._flash.setSize(a,b),e=e||{AdParameters:""},f=f||{flashVars:""},this._flash.callFlashMethod("initAd",[this._flash.getWidth(),this._flash.getHeight(),c,d,e.AdParameters||"",f.flashVars||""],g)}},{key:"resizeAd",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];this._flash.setSize(a,b),this._flash.callFlashMethod("resizeAd",[this._flash.getWidth(),this._flash.getHeight(),c],d)}},{key:"startAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("startAd",[],a)}},{key:"stopAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("stopAd",[],a)}},{key:"pauseAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("pauseAd",[],a)}},{key:"resumeAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("resumeAd",[],a)}},{key:"expandAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("expandAd",[],a)}},{key:"collapseAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("collapseAd",[],a)}},{key:"skipAd",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];this._flash.callFlashMethod("skipAd",[],a)}},{key:"getAdLinear",value:function(a){this._flash.callFlashMethod("getAdLinear",[],a)}},{key:"getAdWidth",value:function(a){this._flash.callFlashMethod("getAdWidth",[],a)}},{key:"getAdHeight",value:function(a){this._flash.callFlashMethod("getAdHeight",[],a)}},{key:"getAdExpanded",value:function(a){this._flash.callFlashMethod("getAdExpanded",[],a)}},{key:"getAdSkippableState",value:function(a){this._flash.callFlashMethod("getAdSkippableState",[],a)}},{key:"getAdRemainingTime",value:function(a){this._flash.callFlashMethod("getAdRemainingTime",[],a)}},{key:"getAdDuration",value:function(a){this._flash.callFlashMethod("getAdDuration",[],a)}},{key:"setAdVolume",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];this._flash.callFlashMethod("setAdVolume",[a],b)}},{key:"getAdVolume",value:function(a){this._flash.callFlashMethod("getAdVolume",[],a)}},{key:"getAdCompanions",value:function(a){this._flash.callFlashMethod("getAdCompanions",[],a)}},{key:"getAdIcons",value:function(a){this._flash.callFlashMethod("getAdIcons",[],a)}}]),b}(i)},{"./IVPAIDAdUnit":1}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){if(this._destroyed)throw new Error("VPAIDFlashToJS is destroyed!")}function f(){this._loadLater&&(this.loadAdUnit(this._loadLater.url,this._loadLater.callback),delete this._loadLater)}function g(a,b){var c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];Object.defineProperty(t,a,{writable:c,configurable:!1,value:b})}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("swfobject"),j=a("./jsFlashBridge").JSFlashBridge,k=a("./VPAIDAdUnit").VPAIDAdUnit,l=a("./utils").noop,m=a("./utils").callbackTimeout,n=a("./utils").isPositiveInt,o=a("./utils").createElementWithID,p=a("./utils").unique("vpaid"),q=a("./flashTester.js").createFlashTester,r="10.1.0",s={isSupported:function(){return!0}},t=function(){function a(b,c){function e(a){return setTimeout(function(){c(new Error(a))},0),s}var g=arguments.length<=2||void 0===arguments[2]?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[2],h=this,k=arguments.length<=3||void 0===arguments[3]?{wmode:"transparent",salign:"tl",align:"left",allowScriptAccess:"always",scale:"noScale",allowFullScreen:"true",quality:"high"}:arguments[3],q=arguments.length<=4||void 0===arguments[4]?{debug:!1,timeout:1e4}:arguments[4];d(this,a);var s=this;if(this._vpaidParentEl=b,this._flashID=p(),this._destroyed=!1,c=c||l,g.width=n(g.width,800),g.height=n(g.height,400),o(b,this._flashID,!0),k.movie=g.data,k.FlashVars="flashid="+this._flashID+"&handler="+j.VPAID_FLASH_HANDLER+"&debug="+q.debug+"&salign="+k.salign,!a.isSupported())return e("user don't support flash or doesn't have the minimum required version of flash "+r);if(this.el=i.createSWF(g,k,this._flashID),!this.el)return e("swfobject failed to create object in element");var t=m(q.timeout,function(a,b){f.call(h),c(a,b)},function(){c("vpaid flash load timeout "+q.timeout)});this._flash=new j(this.el,g.data,this._flashID,g.width,g.height,t)}return h(a,[{key:"destroy",value:function(){this._destroyAdUnit(),this._flash&&(this._flash.destroy(),this._flash=null),this.el=null,this._destroyed=!0}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_destroyAdUnit",value:function(){delete this._loadLater,this._adUnitLoad&&(this._adUnitLoad=null,this._flash.removeCallback(this._adUnitLoad)),this._adUnit&&(this._adUnit._destroy(),this._adUnit=null)}},{key:"loadAdUnit",value:function(a,b){var c=this;e.call(this),this._adUnit&&this._destroyAdUnit(),this._flash.isReady()?(this._adUnitLoad=function(a,d){a||(c._adUnit=new k(c._flash)),c._adUnitLoad=null,b(a,c._adUnit)},this._flash.callFlashMethod("loadAdUnit",[a],this._adUnitLoad)):this._loadLater={url:a,callback:b}}},{key:"unloadAdUnit",value:function(){var a=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];e.call(this),this._destroyAdUnit(),this._flash.callFlashMethod("unloadAdUnit",[],a)}},{key:"getFlashID",value:function(){return e.call(this),this._flash.getFlashID()}},{key:"getFlashURL",value:function(){return e.call(this),this._flash.getFlashURL()}}]),a}();g("isSupported",function(){return i.hasFlashPlayerVersion(r)&&s.isSupported()},!0),g("runFlashTest",function(a){s=q(document.body,a)}),t.swfobject=i,b.exports=t},{"./VPAIDAdUnit":2,"./flashTester.js":4,"./jsFlashBridge":5,"./utils":8,swfobject:14}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("swfobject"),g="vpaid_video_flash_tester",h="vpaid_video_flash_tester_el",i=a("./jsFlashBridge").JSFlashBridge,j=a("./utils"),k=a("./registry").MultipleValuesRegistry,l=function(){function a(b){var c=this,e=arguments.length<=1||void 0===arguments[1]?{data:"VPAIDFlash.swf",width:800,height:400}:arguments[1];d(this,a),this.parentEl=j.createElementWithID(b,h),j.hideFlashEl(this.parentEl);var g={};g.movie=e.data,g.FlashVars="flashid="+h+"&handler="+i.VPAID_FLASH_HANDLER,g.allowScriptAccess="always",this.el=f.createSWF(e,g,h),this._handlers=new k,this._isSupported=!1,this.el&&(j.hideFlashEl(this.el),this._flash=new i(this.el,e.data,h,e.width,e.height,function(){var a=!0;c._isSupported=a,c._handlers.get("change").forEach(function(b){setTimeout(function(){b("change",a)},0)})}))}return e(a,[{key:"isSupported",value:function(){return this._isSupported}},{key:"on",value:function(a,b){this._handlers.add(a,b)}}]),a}();c.createFlashTester=function(a,b){return window[g]||(window[g]=new l(a,b)),window[g]}},{"./jsFlashBridge":5,"./registry":7,"./utils":8,swfobject:14}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){var d=this;setTimeout(function(){var e=d._callbacks.get(a);e&&(d._callbacks.remove(a),e(b,c))},0)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./utils").unique,h=a("./utils").isPositiveInt,i=a("./utils").stringEndsWith,j=a("./registry").SingleValueRegistry,k=a("./registry").MultipleValuesRegistry,l=a("./jsFlashBridgeRegistry"),m="vpaid_video_flash_handler",n="AdError",o=c.JSFlashBridge=function(){function a(b,c,e,f,h,i){d(this,a),this._el=b,this._flashID=e,this._flashURL=c,this._width=f,this._height=h,this._handlers=new k,this._callbacks=new j,this._uniqueMethodIdentifier=g(this._flashID),this._ready=!1,this._handShakeHandler=i,l.addInstance(this._flashID,this)}return f(a,[{key:"on",value:function(a,b){this._handlers.add(a,b)}},{key:"off",value:function(a,b){return this._handlers.remove(a,b)}},{key:"offEvent",value:function(a){return this._handlers.removeByKey(a)}},{key:"offAll",value:function(){return this._handlers.removeAll()}},{key:"callFlashMethod",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],c=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],d="";c&&(d=this._uniqueMethodIdentifier()+"_"+a,this._callbacks.add(d,c));try{this._el[a]([d].concat(b))}catch(f){c?e.call(this,d,f):this._trigger(n,f)}}},{key:"removeCallback",value:function(a){return this._callbacks.removeByValue(a)}},{key:"removeCallbackByMethodName",value:function(a){var b=this;this._callbacks.filterKeys(function(b){return i(b,a)}).forEach(function(a){b._callbacks.remove(a)})}},{key:"removeAllCallbacks",value:function(){return this._callbacks.removeAll()}},{key:"_trigger",value:function(a,b){var c=this;this._handlers.get(a).forEach(function(d){"AdClickThru"===a?d(b):setTimeout(function(){c._handlers.get(a).length>0&&d(b)},0)})}},{key:"_callCallback",value:function(a,b,c,d){var f=this._callbacks.get(b);return f?void e.call(this,b,c,d):void(c&&""===b&&this.trigger(n,c))}},{key:"_handShake",value:function(a,b){this._ready=!0,this._handShakeHandler&&(this._handShakeHandler(a,b),delete this._handShakeHandler)}},{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"setSize",value:function(a,b){this._width=h(a,this._width),this._height=h(b,this._height),this._el.setAttribute("width",this._width),this._el.setAttribute("height",this._height)}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(a){this.setSize(a,this._height)}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(a){this.setSize(this._width,a)}},{key:"getFlashID",value:function(){return this._flashID}},{key:"getFlashURL",value:function(){return this._flashURL}},{key:"isReady",value:function(){return this._ready}},{key:"destroy",value:function(){this.offAll(),this.removeAllCallbacks(),l.removeInstanceByID(this._flashID),this._el.parentElement&&this._el.parentElement.removeChild(this._el)}}]),a}();Object.defineProperty(o,"VPAID_FLASH_HANDLER",{writable:!1,configurable:!1,value:m}),window[m]=function(a,b,c,d,e,f){var g=l.getInstanceByID(a);g&&("handShake"===c?g._handShake(e,f):"event"!==b?g._callCallback(c,d,e,f):g._trigger(c,f))}},{"./jsFlashBridgeRegistry":6,"./registry":7,"./utils":8}],6:[function(a,b,c){"use strict";var d=a("./registry").SingleValueRegistry,e=new d,f={};Object.defineProperty(f,"addInstance",{writable:!1,configurable:!1,value:function(a,b){e.add(a,b)}}),Object.defineProperty(f,"getInstanceByID",{writable:!1,configurable:!1,value:function(a){return e.get(a)}}),Object.defineProperty(f,"removeInstanceByID",{writable:!1,configurable:!1,value:function(a){return e.remove(a)}}),b.exports=f},{"./registry":7}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.MultipleValuesRegistry=function(){function a(){d(this,a),this._registries={}}return e(a,[{key:"add",value:function(a,b){this._registries[a]||(this._registries[a]=[]),this._registries[a].indexOf(b)===-1&&this._registries[a].push(b)}},{key:"get",value:function(a){return this._registries[a]||[]}},{key:"filterKeys",value:function(a){return Object.keys(this._registries).filter(a)}},{key:"findByValue",value:function(a){var b=this,c=Object.keys(this._registries).filter(function(c){return b._registries[c].indexOf(a)!==-1});return c}},{key:"remove",value:function(a,b){if(this._registries[a]){var c=this._registries[a].indexOf(b);if(!(c<0))return this._registries[a].splice(c,1)}}},{key:"removeByKey",value:function(a){var b=this._registries[a];return delete this._registries[a],b}},{key:"removeByValue",value:function(a){var b=this,c=this.findByValue(a);return c.map(function(c){return b.remove(c,a)})}},{key:"removeAll",value:function(){var a=this._registries;return this._registries={},a}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),a}(),c.SingleValueRegistry=function(){function a(){d(this,a),this._registries={}}return e(a,[{key:"add",value:function(a,b){this._registries[a]=b}},{key:"get",value:function(a){return this._registries[a]}},{key:"filterKeys",value:function(a){return Object.keys(this._registries).filter(a)}},{key:"findByValue",value:function(a){var b=this,c=Object.keys(this._registries).filter(function(c){return b._registries[c]===a});return c}},{key:"remove",value:function(a){var b=this._registries[a];return delete this._registries[a],b}},{key:"removeByValue",value:function(a){var b=this,c=this.findByValue(a);return c.map(function(a){return b.remove(a)})}},{key:"removeAll",value:function(){var a=this._registries;return this._registries={},a}},{key:"size",value:function(){return Object.keys(this._registries).length}}]),a}()},{}],8:[function(a,b,c){"use strict";function d(a){var b=-1;return function(c){return a+"_"+ ++b}}function e(){}function f(a,b,c){var d=setTimeout(function(){b=e,c()},a);return function(){clearTimeout(d),b.apply(this,arguments)}}function g(a,b){var c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],d=document.createElement("div");return d.id=b,c&&(a.innerHTML=""),a.appendChild(d),d}function h(a,b){return!isNaN(parseFloat(a))&&isFinite(a)&&a>0?a:b}function i(a,b){return k.call(a,b)}function j(a){a.style.position="absolute",a.style.left="-1px",a.style.top="-1px",a.style.width="1px",a.style.height="1px"}Object.defineProperty(c,"__esModule",{value:!0}),c.unique=d,c.noop=e,c.callbackTimeout=f,c.createElementWithID=g,c.isPositiveInt=h,c.stringEndsWith=i,c.hideFlashEl=j;var k=function(){return String.prototype.endsWith?String.prototype.endsWith:function(a,b){var c=this.toString();(void 0===b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return d!==-1&&d===b}}()},{}],9:[function(a,b,c){"use strict";function d(a,b,c){}function e(a,b,c){Object.defineProperty(a,b,{writable:!1,configurable:!1,value:c})}var f=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],g=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],h=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],i=["setAdVolume"];d.prototype.handshakeVersion=function(a,b){},d.prototype.initAd=function(a,b,c,d,e,f,g){},d.prototype.startAd=function(a){},d.prototype.stopAd=function(a){},d.prototype.skipAd=function(a){},d.prototype.resizeAd=function(a,b,c,d){},d.prototype.pauseAd=function(a){},d.prototype.resumeAd=function(a){},d.prototype.expandAd=function(a){},d.prototype.collapseAd=function(a){},d.prototype.subscribe=function(a,b,c){},d.prototype.unsubscribe=function(a,b){},d.prototype.getAdLinear=function(a){},d.prototype.getAdWidth=function(a){},d.prototype.getAdHeight=function(a){},d.prototype.getAdExpanded=function(a){},d.prototype.getAdSkippableState=function(a){},d.prototype.getAdRemainingTime=function(a){},d.prototype.getAdDuration=function(a){},d.prototype.getAdVolume=function(a){},d.prototype.getAdCompanions=function(a){},d.prototype.getAdIcons=function(a){},d.prototype.setAdVolume=function(a,b){},e(d,"METHODS",f),e(d,"GETTERS",h),e(d,"SETTERS",i),e(d,"EVENTS",g);var j=f.filter(function(a){return["skipAd"].indexOf(a)===-1});e(d,"checkVPAIDInterface",function(a){var b=j.every(function(b){return"function"==typeof a[b]});return b}),b.exports=d},{}],10:[function(a,b,c){"use strict";function d(a,b,c,d){this._isValid=k(a),this._isValid&&(this._creative=a,this._el=b,this._videoEl=c,this._iframe=d,this._subscribers=new j,l.setFullSizeStyle(b),e.call(this))}function e(){if(o.forEach(function(a){this._creative.subscribe(g.bind(this,a),a)}.bind(this)),this._creative.subscribe(f.bind(this),n),this._videoEl){var a=this._iframe.contentDocument.documentElement,b=this._videoEl;a.addEventListener("click",function(c){c.target===a&&b.click()})}}function f(a,b,c){this._subscribers.triggerSync(n,{url:a,id:b,playerHandles:c})}function g(a){this._subscribers.trigger(a,Array.prototype.slice(arguments,1))}function h(a,b,c,d){a?a(c,d):c&&b.trigger(m,c)}var i=a("./IVPAIDAdUnit"),j=a("./subscriber"),k=i.checkVPAIDInterface,l=a("./utils"),m=(i.METHODS,"AdError"),n="AdClickThru",o=i.EVENTS.filter(function(a){return a!=n});d.prototype=Object.create(i.prototype),d.prototype.isValidVPAIDAd=function(){return this._isValid},i.METHODS.forEach(function(a){var b=["subscribe","unsubscribe","initAd"];b.indexOf(a)===-1&&(d.prototype[a]=function(){var b=i.prototype[a].length,c=Array.prototype.slice.call(arguments),d=b===c.length?c.pop():void 0;setTimeout(function(){var b,e=null;try{b=this._creative[a].apply(this._creative,c)}catch(f){e=f}h(d,this._subscribers,e,b)}.bind(this),0)})}),d.prototype.initAd=function(a,b,c,d,e,f,g){e=e||{},f=l.extend({slot:this._el,videoSlot:this._videoEl},f||{}),setTimeout(function(){var i;try{this._creative.initAd(a,b,c,d,e,f)}catch(j){i=j}h(g,this._subscribers,i)}.bind(this),0)},d.prototype.subscribe=function(a,b,c){this._subscribers.subscribe(b,a,c)},d.prototype.unsubscribe=function(a,b){this._subscribers.unsubscribe(b,a)},d.prototype.on=d.prototype.subscribe,d.prototype.off=d.prototype.unsubscribe,i.GETTERS.forEach(function(a){d.prototype[a]=function(b){setTimeout(function(){var c,d=null;try{c=this._creative[a]()}catch(e){d=e}h(b,this._subscribers,d,c)}.bind(this),0)}}),d.prototype.setAdVolume=function(a,b){setTimeout(function(){var c,d=null;try{this._creative.setAdVolume(a),c=this._creative.getAdVolume()}catch(e){d=e}d||(d=l.validate(c===a,"failed to apply volume: "+a)),h(b,this._subscribers,d,c)}.bind(this),0)},d.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},b.exports=d},{"./IVPAIDAdUnit":9,"./subscriber":12,"./utils":13}],11:[function(a,b,c){"use strict";function d(a,b,c,d){c=c||{},this._id=n(),this._destroyed=!1,this._frameContainer=m.createElementInEl(a,"div"),this._videoEl=b,this._vpaidOptions=d||{timeout:1e4},this._templateConfig={template:c.template||p,extraOptions:c.extraOptions||{}}}function e(a){var b=this[a];b&&(b.remove(),delete this[a])}function f(){h.call(this),delete this._adUnit}function g(){h.call(this),j.call(this)}function h(){e.call(this,"_frame"),i.call(this)}function i(){this._onLoad&&(window.removeEventListener("message",this._onLoad),m.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function j(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function k(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function l(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}var m=a("./utils"),n=m.unique("vpaidIframe"),o=a("./VPAIDAdUnit"),p='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"></script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');</script></body></html>',q="AdStopped";d.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,g.call(this))},d.prototype.isDestroyed=function(){return this._destroyed},d.prototype.loadAdUnit=function(a,b){function c(a){if(a.origin===l()){var c=JSON.parse(a.data);if(c.id===e.getID()){var d,g,h;if(e._frame.contentWindow?(h=e._frame.contentWindow.getVPAIDAd,g=m.validate("function"==typeof h,"the ad didn't return a function to create an ad")):g="the iframe is not anymore in the DOM tree",!g){var j=e._frame.contentWindow.document.querySelector(".ad-element");d=new o(h(),j,e._videoEl,e._frame),d.subscribe(q,f.bind(e)),g=m.validate(d.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return e._adUnit=d,i.call(e),b(g,g?null:d),!0}}}function d(){b("timeout",null)}k.call(this),g.call(this);var e=this,h=m.createIframeWithContent(this._frameContainer,this._templateConfig.template,m.extend({iframeURL_JS:a,iframeID:this.getID(),origin:l()},this._templateConfig.extraOptions));this._frame=h,this._onLoad=m.callbackTimeout(this._vpaidOptions.timeout,c.bind(this),d.bind(this)),window.addEventListener("message",this._onLoad)},d.prototype.unloadAdUnit=function(){g.call(this)},d.prototype.getID=function(){return this._id},b.exports=d},{"./VPAIDAdUnit":10,"./utils":13}],12:[function(a,b,c){"use strict";function d(){this._subscribers={}}d.prototype.subscribe=function(a,b,c){this.isHandlerAttached(a,b)||this.get(b).push({
handler:a,context:c,eventName:b})},d.prototype.unsubscribe=function(a,b){this._subscribers[b]=this.get(b).filter(function(b){return a!==b.handler})},d.prototype.unsubscribeAll=function(){this._subscribers={}},d.prototype.trigger=function(a,b){var c=this,d=this.get(a).concat(this.get("*"));d.forEach(function(a){setTimeout(function(){c.isHandlerAttached(a.handler,a.eventName)&&a.handler.call(a.context,b)},0)})},d.prototype.triggerSync=function(a,b){var c=this.get(a).concat(this.get("*"));c.forEach(function(a){a.handler.call(a.context,b)})},d.prototype.get=function(a){return this._subscribers[a]||(this._subscribers[a]=[]),this._subscribers[a]},d.prototype.isHandlerAttached=function(a,b){return this.get(b).some(function(b){return a===b.handler})},b.exports=d},{}],13:[function(a,b,c){"use strict";function d(){}function e(a,b){return a?null:new Error(b)}function f(a){var b=p[a];b&&(clearTimeout(b),delete p[a])}function g(a,b,c){var e,g;return g=setTimeout(function(){b=d,delete g[e],c()},a),e=function(){b.apply(this,arguments)&&f(e)},p[e]=g,e}function h(a,b,c){var d=document.createElement(b);return c&&(d.id=c),a.appendChild(d),d}function i(a,b,c){var d=j(a,null,c.zIndex);if(m(d,l(b,c)))return d}function j(a,b,c){var d=document.createElement("iframe");return d.src=b||"about:blank",d.marginWidth="0",d.marginHeight="0",d.frameBorder="0",d.width="100%",d.height="100%",k(d),c&&(d.style.zIndex=c),d.setAttribute("SCROLLING","NO"),a.innerHTML="",a.appendChild(d),d}function k(a){a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.margin="0px",a.style.padding="0px",a.style.border="none",a.style.width="100%",a.style.height="100%"}function l(a,b){return Object.keys(b).forEach(function(c){var d="object"==typeof d?JSON.stringify(b[c]):b[c];a=a.replace(new RegExp("{{"+c+"}}","g"),d)}),a}function m(a,b){var c=a.contentWindow&&a.contentWindow.document;return!!c&&(c.write(b),!0)}function n(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a}function o(a){var b=-1;return function(){return a+"_"+ ++b}}var p={};b.exports={noop:d,validate:e,clearCallbackTimeout:f,callbackTimeout:g,createElementInEl:h,createIframeWithContent:i,createIframe:j,setFullSizeStyle:k,simpleTemplate:l,setIframeContent:m,extend:n,unique:o}},{}],14:[function(a,b,c){!function(a,c){"function"==typeof define&&define.amd?define(c):"object"==typeof b&&b.exports?b.exports=c():a.swfobject=c()}(this,function(){function a(){if(!T&&document.getElementsByTagName("body")[0]){try{var a,b=r("span");b.style.display="none",a=M.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(c){return}T=!0;for(var d=P.length,e=0;e<d;e++)P[e]()}}function b(a){T?a():P[P.length]=a}function c(a){if(typeof L.addEventListener!==E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!==E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!==E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function d(){var a=M.getElementsByTagName("body")[0],b=r(F);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function f(){if(typeof c.GetVariable!==E)try{var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),X.pv=[s(g[0]),s(g[1]),s(g[2])])}catch(h){X.pv=[8,0,0]}else if(d<10)return d++,void setTimeout(f,10);a.removeChild(b),c=null,e()}()}else e()}function e(){var a=Q.length;if(a>0)for(var b=0;b<a;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(X.pv[0]>0){var j=q(c);if(j)if(!u(Q[b].swfVersion)||X.wk&&X.wk<312)if(Q[b].expressInstall&&g()){var k={};k.data=Q[b].expressInstall,k.width=j.getAttribute("width")||"0",k.height=j.getAttribute("height")||"0",j.getAttribute("class")&&(k.styleclass=j.getAttribute("class")),j.getAttribute("align")&&(k.align=j.getAttribute("align"));for(var l={},m=j.getElementsByTagName("param"),n=m.length,o=0;o<n;o++)"movie"!==m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));h(k,l,c,d)}else i(j),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=f(c),e.id=c,d(e))}else if(w(c,!0),d){var p=f(c);p&&typeof p.SetVariable!==E&&(e.success=!0,e.ref=p,e.id=p.id),d(e)}}}function f(a){var b=null,c=q(a);return c&&"OBJECT"===c.nodeName.toUpperCase()&&(b=typeof c.SetVariable!==E?c:c.getElementsByTagName(F)[0]||c),b}function g(){return!U&&u("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function h(a,b,c,d){var e=q(c);if(c=p(c),U=!0,A=d||null,B={success:!1,id:c},e){"OBJECT"===e.nodeName.toUpperCase()?(y=j(e),z=null):(y=e,z=c),a.id=J,(typeof a.width===E||!/%$/.test(a.width)&&s(a.width)<310)&&(a.width="310"),(typeof a.height===E||!/%$/.test(a.height)&&s(a.height)<137)&&(a.height="137");var f=X.ie?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURIComponent(L.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(M.title.slice(0,47)+" - Flash Player Installation");if(typeof b.flashvars!==E?b.flashvars+="&"+g:b.flashvars=g,X.ie&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",n(e)}l(a,b,c)}}function i(a){if(X.ie&&4!=a.readyState){a.style.display="none";var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(j(a),b),n(a)}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=r("div");if(X.win&&X.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;f<e;f++)1==d[f].nodeType&&"PARAM"===d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function k(a,b){var c=r("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function l(a,b,c){var d,e=q(c);if(c=p(c),X.wk&&X.wk<312)return d;if(e){var f,g,h,i=r(X.ie?"div":F);typeof a.id===E&&(a.id=c);for(h in b)b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&m(i,h,b[h]);X.ie&&(i=k(a.data,i.innerHTML));for(f in a)a.hasOwnProperty(f)&&(g=f.toLowerCase(),"styleclass"===g?i.setAttribute("class",a[f]):"classid"!==g&&"data"!==g&&i.setAttribute(f,a[f]));X.ie?R[R.length]=a.id:(i.setAttribute("type",I),i.setAttribute("data",a.data)),e.parentNode.replaceChild(i,e),d=i}return d}function m(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=q(a);b&&"OBJECT"===b.nodeName.toUpperCase()&&(X.ie?(b.style.display="none",function c(){if(4==b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(c,10)}()):b.parentNode.removeChild(b))}function o(a){return a&&a.nodeType&&1===a.nodeType}function p(a){return o(a)?a.id:a}function q(a){if(o(a))return a;var b=null;try{b=M.getElementById(a)}catch(c){}return b}function r(a){return M.createElement(a)}function s(a){return parseInt(a,10)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){a+="";var b=X.pv,c=a.split(".");return c[0]=s(c[0]),c[1]=s(c[1])||0,c[2]=s(c[2])||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function v(a,b,c,d){var e=M.getElementsByTagName("head")[0];if(e){var f="string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),X.ie&&typeof M.styleSheets!==E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}C&&(typeof C.addRule!==E?C.addRule(a,b):typeof M.createTextNode!==E&&C.appendChild(M.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(V){var c=b?"visible":"hidden",d=q(a);T&&d?d.style.visibility=c:"string"==typeof a&&v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\"<>\.;]/,c=null!==b.exec(a);return c&&typeof encodeURIComponent!==E?encodeURIComponent(a):a}var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=window,M=document,N=navigator,O=!1,P=[],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=!1,X=function(){var a=typeof M.getElementById!==E&&typeof M.getElementsByTagName!==E&&typeof M.createElement!==E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),g="Microsoft Internet Explorer"===N.appName,h=[0,0,0],i=null;if(typeof N.plugins!==E&&typeof N.plugins[G]===F)i=N.plugins[G].description,i&&typeof N.mimeTypes!==E&&N.mimeTypes[I]&&N.mimeTypes[I].enabledPlugin&&(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=s(i.replace(/^(.*)\..*$/,"$1")),h[1]=s(i.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(i)?s(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof L.ActiveXObject!==E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[s(i[0]),s(i[1]),s(i[2])]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){X.w3&&((typeof M.readyState!==E&&("complete"===M.readyState||"interactive"===M.readyState)||typeof M.readyState===E&&(M.getElementsByTagName("body")[0]||M.body))&&a(),T||(typeof M.addEventListener!==E&&M.addEventListener("DOMContentLoaded",a,!1),X.ie&&(M.attachEvent(K,function b(){"complete"===M.readyState&&(M.detachEvent(K,b),a())}),L==top&&!function c(){if(!T){try{M.documentElement.doScroll("left")}catch(b){return void setTimeout(c,0)}a()}}()),X.wk&&!function d(){if(!T)return/loaded|complete/.test(M.readyState)?void a():void setTimeout(d,0)}()))})();P[0]=function(){O?d():e()};(function(){X.ie&&window.attachEvent("onunload",function(){for(var a=S.length,b=0;b<a;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;d<c;d++)n(R[d]);for(var e in X)X[e]=null;X=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(X.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(X.w3)return f(a)},embedSWF:function(a,c,d,e,f,i,j,k,m,n){var o=p(c),q={success:!1,id:o};X.w3&&!(X.wk&&X.wk<312)&&a&&c&&d&&e&&f?(w(o,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===F)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var r={};if(k&&typeof k===F)for(var s in k)r[s]=k[s];if(j&&typeof j===F)for(var t in j)if(j.hasOwnProperty(t)){var v=W?encodeURIComponent(t):t,x=W?encodeURIComponent(j[t]):j[t];typeof r.flashvars!==E?r.flashvars+="&"+v+"="+x:r.flashvars=v+"="+x}if(u(f)){var y=l(b,r,c);b.id==o&&w(o,!0),q.success=!0,q.ref=y,q.id=y.id}else{if(i&&g())return b.data=i,void h(b,r,c,n);w(o,!0)}n&&n(q)})):n&&n(q)},switchOffAutoHideShow:function(){V=!1},enableUriEncoding:function(a){W=typeof a===E||a},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return X.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){X.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){X.w3&&n(a)},createCSS:function(a,b,c,d){X.w3&&v(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),!a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=q(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),X.ie&&(y.style.display="block")),A&&A(B)),U=!1}},version:"2.3"}})},{}],15:[function(a,b,c){"use strict";function d(a){return this instanceof d?void this.initialize(a):new d(a)}var e=a("./InLine"),f=a("./Wrapper");d.prototype.initialize=function(a){this.id=a.attr("id"),this.sequence=a.attr("sequence"),a.inLine&&(this.inLine=new e(a.inLine)),a.wrapper&&(this.wrapper=new f(a.wrapper))},b.exports=d},{"./InLine":18,"./Wrapper":28}],16:[function(a,b,c){"use strict";function d(a){function b(a){var b=[];return f.isDefined(a)&&(a=f.isArray(a)?a:[a],a.forEach(function(a){b.push(new e(a))})),b}if(!(this instanceof d))return new d(a);h.info("<Companion> found companion ad"),h.debug("<Companion>  companionJTree:",a),this.creativeType=g.attr(a.staticResource,"creativeType"),this.staticResource=g.keyValue(a.staticResource),h.info("<Companion>  creativeType: "+this.creativeType),h.info("<Companion>  staticResource: "+this.staticResource);var c=null;g.keyValue(a.HTMLResource)?c=g.keyValue(a.HTMLResource):g.keyValue(a.hTMLResource)&&(c=g.keyValue(a.hTMLResource)),null!==c&&h.info("<Companion> found html resource",c),this.htmlResource=c;var i=null;g.keyValue(a.IFrameResource)?i=g.keyValue(a.IFrameResource):g.keyValue(a.iFrameresource)&&(i=g.keyValue(a.iFrameresource)),null!==i&&h.info("<Companion> found iframe resource",i),this.iframeResource=i,this.id=g.attr(a,"id"),this.width=g.attr(a,"width"),this.height=g.attr(a,"height"),this.expandedWidth=g.attr(a,"expandedWidth"),this.expandedHeight=g.attr(a,"expandedHeight"),this.scalable=g.attr(a,"scalable"),this.maintainAspectRatio=g.attr(a,"maintainAspectRatio"),this.minSuggestedDuration=g.attr(a,"minSuggestedDuration"),this.apiFramework=g.attr(a,"apiFramework"),this.companionClickThrough=g.keyValue(a.companionClickThrough),this.trackingEvents=b(a.trackingEvents&&a.trackingEvents.tracking),h.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}var e=a("./TrackingEvent"),f=a("../../utils/utilityFunctions"),g=a("../../utils/xml"),h=a("../../utils/consoleLogger");b.exports=d},{"../../utils/consoleLogger":41,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./TrackingEvent":21}],17:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);if(this.id=a.attr("id"),this.sequence=a.attr("sequence"),this.adId=a.attr("adId"),this.apiFramework=a.attr("apiFramework"),a.linear&&(this.linear=new e(a.linear)),a.companionAds){var b=[],c=a.companionAds&&a.companionAds.companion;g.isDefined(c)&&(c=g.isArray(c)?c:[c],c.forEach(function(a){b.push(new f(a))})),this.companionAds=b}}var e=a("./Linear"),f=a("./Companion"),g=a("../../utils/utilityFunctions");d.prototype.isSupported=function(){return!this.linear||this.linear.isSupported()},d.parseCreatives=function(a){var b,c=[];return g.isDefined(a)&&g.isDefined(a.creative)&&(b=g.isArray(a.creative)?a.creative:[a.creative],b.forEach(function(a){c.push(new d(a))})),c},b.exports=d},{"../../utils/utilityFunctions":47,"./Companion":16,"./Linear":19}],18:[function(a,b,c){"use strict";function d(a){function b(a){return a?g.transformArray(g.isArray(a)?a:[a],function(a){if(g.isNotEmptyString(a.keyValue))return{uri:a.keyValue,type:a.attr("type")}}):[]}return this instanceof d?(this.adTitle=h.keyValue(a.adTitle),this.adSystem=h.keyValue(a.adSystem),this.impressions=e.parseImpressions(a.impression),this.creatives=f.parseCreatives(a.creatives),this.description=h.keyValue(a.description),this.advertiser=h.keyValue(a.advertiser),this.surveys=b(a.survey),this.error=h.keyValue(a.error),this.pricing=h.keyValue(a.pricing),void(this.extensions=a.extensions)):new d(a)}var e=a("./vastUtil"),f=a("./Creative"),g=a("../../utils/utilityFunctions"),h=a("../../utils/xml");d.prototype.isSupported=function(){var a,b;if(0===this.creatives.length)return!1;for(a=0,b=this.creatives.length;a<b;a+=1)if(!this.creatives[a].isSupported())return!1;return!0},b.exports=d},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],19:[function(a,b,c){"use strict";function d(a){function b(a,b){var c=[];return h.isDefined(a)&&(a=h.isArray(a)?a:[a],a.forEach(function(a){c.push(new e(a,b))})),c}function c(a){var b=[];return h.isDefined(a)&&(a=h.isArray(a)?a:[a],a.forEach(function(a){b.push(new f(a))})),b}return this instanceof d?(this.duration=i.duration(j.keyValue(a.duration)),this.mediaFiles=c(a.mediaFiles&&a.mediaFiles.mediaFile),this.trackingEvents=b(a.trackingEvents&&a.trackingEvents.tracking,this.duration),this.skipoffset=i.offset(j.attr(a,"skipoffset"),this.duration),a.videoClicks&&(this.videoClicks=new g(a.videoClicks)),void(a.adParameters&&(this.adParameters=j.keyValue(a.adParameters),j.attr(a.adParameters,"xmlEncoded")&&(this.adParameters=j.decode(this.adParameters))))):new d(a)}var e=a("./TrackingEvent"),f=a("./MediaFile"),g=a("./VideoClicks"),h=a("../../utils/utilityFunctions"),i=a("./parsers"),j=a("../../utils/xml");d.prototype.isSupported=function(){var a,b;for(a=0,b=this.mediaFiles.length;a<b;a+=1)if(this.mediaFiles[a].isSupported())return!0;return!1},b.exports=d},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./MediaFile":20,"./TrackingEvent":21,"./VideoClicks":27,"./parsers":29}],20:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.src=e.keyValue(a);for(var b=0;b<g.length;b++){var c=g[b];this[c]=a.attr(c)}}var e=a("../../utils/xml"),f=a("./vastUtil"),g=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"];d.prototype.isSupported=function(){return f.isVPAID(this)?!!f.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||f.isFlashSupported()},b.exports=d},{"../../utils/xml":48,"./vastUtil":30}],21:[function(a,b,c){"use strict";function d(a,b){return this instanceof d?(this.name=a.attr("event"),this.uri=f.keyValue(a),void("progress"===this.name&&(this.offset=e.offset(a.attr("offset"),b)))):new d(a,b)}var e=a("./parsers"),f=a("../../utils/xml");b.exports=d},{"../../utils/xml":48,"./parsers":29}],22:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);var b={WRAPPER_LIMIT:5};a=a||{},this.settings=k.extend({},a,b),this.errorURLMacros=[]}var e=a("./Ad"),f=a("./VASTError"),g=a("./VASTResponse"),h=a("./vastUtil"),i=a("../../utils/async"),j=a("../../utils/http").http,k=a("../../utils/utilityFunctions"),l=a("../../utils/xml"),m=a("../../utils/consoleLogger");d.prototype.getVASTResponse=function(a,b){function c(a,b){try{var c=e._buildVASTResponse(a);b(null,c)}catch(d){b(d)}}function d(a,b){return a?k.isFunction(b)?void 0:new f("on VASTClient.getVASTResponse, missing callback function"):new f("on VASTClient.getVASTResponse, missing ad tag URL")}var e=this,g=d(a,b);if(g){if(k.isFunction(b))return b(g);throw g}i.waterfall([this._getVASTAd.bind(this,a),c],b)},d.prototype._getVASTAd=function(a,b){function c(a,b){var c=p._requestVASTXml.bind(p,a);i.waterfall([c,d],b)}function d(a,b){var c;try{c=l.toJXONTree(a),m.debug("built JXONTree from VAST response:",c),k.isArray(c.ad)?c.ads=c.ad:c.ad?c.ads=[c.ad]:c.ads=[],b(g(c),c)}catch(d){b(new f("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml",100),null)}}function g(a){var b=l.attr(a,"version");return a.ad?b&&3!=b&&2!=b?new f('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "'+b+'"',102):null:new f("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree",303)}function h(a,b,c){return b.length>=p.WRAPPER_LIMIT?c(new f("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is "+p.WRAPPER_LIMIT+")",302),b):void i.waterfall([function(b){k.isString(a)?o(a,b):b(null,a)},j],function(a,d){return d&&b.push(d),a?c(a,b):d.wrapper?h(d.wrapper.VASTAdTagURI,b,c):c(null,b)})}function j(a,b){try{var c=new e(a);b(n(c),c)}catch(d){b(new f("on VASTClient.getVASTAd.buildAd, error parsing xml",100),null)}}function n(a){var b=a.wrapper,c=a.inLine,d="on VASTClient.getVASTAd.validateAd, ";return c&&b?new f(d+"InLine and Wrapper both found on the same Ad",101):c||b?c&&!c.isSupported()?new f(d+"could not find MediaFile that is supported by this video player",403):b&&!b.VASTAdTagURI?new f(d+"missing 'VASTAdTagURI' in wrapper",101):null:new f(d+"nor wrapper nor inline elements found on the Ad",101)}function o(a,b){p._requestVASTXml(a,function(a,c){if(a)return b(a);try{var d=l.toJXONTree(c);b(g(d),d.ad)}catch(e){b(new f("on VASTClient.getVASTAd.requestVASTAd, error parsing xml",100))}})}var p=this;c(a,function(a,c){function d(a,c){a?(p._trackError(a,c),e.length>0?h(e.shift(),[],d):b(a,c)):b(null,c)}var e=c&&k.isArray(c.ads)?c.ads:null;return a?(p._trackError(a,e),b(a,e)):void h(e.shift(),[],d)})},d.prototype._requestVASTXml=function(a,b){function c(a,c,d){if(a){var e=k.isDefined(d)?"on VASTClient.requestVastXML, HTTP request error with status '"+d+"'":"on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";return b(new f(e,301),null)}b(null,c)}try{k.isFunction(a)?a(c):(m.info("requesting adTagUrl: "+a),j.get(a,c,{withCredentials:!0}))}catch(d){b(d)}},d.prototype._buildVASTResponse=function(a){function b(a,b){b.forEach(function(b){a.addAd(b)})}function c(a){var b=a.trackingEvents.progress;if(!a.hasLinear())throw new f("on VASTClient._buildVASTResponse, Received an Ad type that is not supported",200);if(void 0===a.duration)throw new f("on VASTClient._buildVASTResponse, Missing duration field in VAST response",101);b&&b.forEach(function(a){if(!k.isNumber(a.offset))throw new f("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event",101)})}var d=new g;return b(d,a),c(d),d},d.prototype._trackError=function(a,b){function c(a){a.wrapper&&a.wrapper.error&&d.push(a.wrapper.error),a.inLine&&a.inLine.error&&d.push(a.inLine.error)}if(k.isArray(b)&&0!==b.length){var d=[];b.forEach(c),h.track(d,{ERRORCODE:a.code||900})}},b.exports=d},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/http":43,"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],23:[function(a,b,c){"use strict";function d(a,b){this.message="VAST Error: "+(a||""),b&&(this.code=b)}d.prototype=new Error,d.prototype.name="VAST Error",b.exports=d},{}],24:[function(a,b,c){"use strict";function d(a){return this instanceof d?void(this.player=a):new d(a)}var e=a("./VASTResponse"),f=a("./VASTError"),g=a("./VASTTracker"),h=a("./vastUtil"),i=a("../../utils/async"),j=a("../../utils/dom"),k=a("../../utils/playerUtils"),l=a("../../utils/utilityFunctions"),m=a("../../utils/consoleLogger");d.prototype.playAd=function(a,b){var c=this;return b=b||l.noop,a instanceof e?(i.waterfall([function(b){b(null,a)},this._selectAdSource.bind(this),this._createVASTTracker.bind(this),this._addClickThrough.bind(this),this._addSkipButton.bind(this),this._setupEvents.bind(this),this._playSelectedAd.bind(this)],function(a,d){a&&d&&c._trackError(a,d),b(a,d)}),this._adUnit={_src:null,type:"VAST",pauseAd:function(){c.player.pause(!0)},resumeAd:function(){c.player.play(!0)},isPaused:function(){return c.player.paused(!0)},getSrc:function(){return this._src}},this._adUnit):b(new f("On VASTIntegrator, missing required VASTResponse"))},d.prototype._selectAdSource=function(a,b){var c,d=j.getDimension(this.player.el()).width;return a.mediaFiles.sort(function(a,b){var c=Math.abs(d-a.width),e=Math.abs(d-b.width);return c-e}),(c=this.player.selectSource(a.mediaFiles).source)?(m.info("selected source: ",c),this._adUnit&&(this._adUnit._src=c),b(null,c,a)):void b(new f("Could not find Ad mediafile supported by this player",403),a)},d.prototype._createVASTTracker=function(a,b,c){try{c(null,a,new g(a.src,b),b)}catch(d){c(d,b)}},d.prototype._setupEvents=function(a,b,c,d){function e(){m.off("fullscreenchange",f),m.off("vast.adStart",i),m.off("pause",g),m.off("timeupdate",h),m.off("volumechange",j)}function f(){m.isFullscreen()?b.trackFullscreen():b.trackExitFullscreen()}function g(){Math.abs(m.duration()-m.currentTime())<2||(b.trackPause(),k.once(m,["play","vast.adEnd","vast.adsCancel"],function(a){"play"===a.type&&b.trackResume()}))}function h(){var a=1e3*m.currentTime();b.trackProgress(a)}function i(){b.trackImpressions(),b.trackCreativeView()}function j(){var a=m.muted();a?b.trackMute():l&&b.trackUnmute(),l=a}var l,m=this.player;return m.on("fullscreenchange",f),m.on("vast.adStart",i),m.on("pause",g),m.on("timeupdate",h),m.on("volumechange",j),k.once(m,["vast.adEnd","vast.adsCancel"],e),k.once(m,["vast.adEnd","vast.adsCancel","vast.adSkip"],function(a){"vast.adEnd"===a.type&&b.trackComplete()}),d(null,a,c)},d.prototype._addSkipButton=function(a,b,c,d){function e(a,b){function c(){a.off("timeupdate",e),j.remove(d)}var d=f(a),e=g.bind(i,d,b,a);a.el().appendChild(d),a.on("timeupdate",e),k.once(a,["vast.adEnd","vast.adsCancel"],c)}function f(a){var c=window.document.createElement("div");return j.addClass(c,"vast-skip-button"),c.onclick=function(d){return j.hasClass(c,"enabled")&&(b.trackSkip(),a.trigger("vast.adSkip")),void 0!==window.Event.prototype.stopPropagation&&void d.stopPropagation()},c}function g(a,b,c){var d=Math.ceil(b-c.currentTime());d>0?a.innerHTML="Skip in "+l.toFixedDigits(d,2)+"...":j.hasClass(a,"enabled")||(j.addClass(a,"enabled"),a.innerHTML="Skip ad")}var h,i=this;l.isNumber(c.skipoffset)&&(h=c.skipoffset/1e3,e(this.player,h)),d(null,a,b,c)},d.prototype._addClickThrough=function(a,b,c,d){function e(a,b,c){var d=window.document.createElement("a"),e=c.clickThrough;return j.addClass(d,"vast-blocker"),d.href=g(e,a),l.isString(e)&&(d.target="_blank"),d.onclick=function(c){return a.paused()?(a.play(),void 0!==window.Event.prototype.stopPropagation&&c.stopPropagation(),!1):(a.pause(),void b.trackClick())},d}function f(a,b,c){a.href=g(b.clickThrough,c)}function g(b,c){var d={ASSETURI:a.src,CONTENTPLAYHEAD:h.formatProgress(1e3*c.currentTime())};return b?h.parseURLMacro(b,d):"#"}function i(){m.off("timeupdate",o),j.remove(n)}var m=this.player,n=e(m,b,c),o=f.bind(this,n,c,m);return m.el().insertBefore(n,m.controlBar.el()),m.on("timeupdate",o),k.once(m,["vast.adEnd","vast.adsCancel"],i),d(null,a,b,c)},d.prototype._playSelectedAd=function(a,b,c){function d(){k.once(e,["playing","vast.adsCancel"],function(a){function d(a){"ended"===a.type&&e.duration()-e.currentTime()>3||(e.off("ended",d),e.off("vast.adsCancel",d),e.off("vast.adSkip",d),"ended"!==a.type&&"vast.adSkip"!==a.type||c(null,b))}"vast.adsCancel"!==a.type&&(m.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart..."),e.trigger("vast.adStart"),e.on("ended",d),e.on("vast.adsCancel",d),e.on("vast.adSkip",d))}),m.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()..."),e.play()}var e=this.player;e.preload("auto"),e.src(a),m.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad..."),k.once(e,["durationchange","error","vast.adsCancel"],function(a){"durationchange"===a.type?(m.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()"),d()):"error"===a.type&&c(new f("on VASTIntegrator, Player is unable to play the Ad",400),b)})},d.prototype._trackError=function(a,b){h.track(b.errorURLMacros,{ERRORCODE:a.code||900})},b.exports=d},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./VASTTracker":26,"./vastUtil":30}],25:[function(a,b,c){"use strict";function d(){return this instanceof d?(this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,void(this.skipoffset=void 0)):new d}function e(a,b){b.forEach(function(b){a.push(b)})}var f=a("./Ad"),g=a("./VideoClicks"),h=a("./Linear"),i=a("./InLine"),j=a("./Wrapper"),k=a("../../utils/utilityFunctions"),l=a("../../utils/xml");window.InLine__A=i,d.prototype.addAd=function(a){var b,c;a instanceof f&&(b=a.inLine,c=a.wrapper,this.ads.push(a),b&&this._addInLine(b),c&&this._addWrapper(c))},d.prototype._addErrorTrackUrl=function(a){var b=a instanceof l.JXONTree?l.keyValue(a):a;b&&this.errorURLMacros.push(b)},d.prototype._addImpressions=function(a){k.isArray(a)&&e(this.impressions,a)},d.prototype._addClickThrough=function(a){k.isNotEmptyString(a)&&(this.clickThrough=a)},d.prototype._addClickTrackings=function(a){k.isArray(a)&&e(this.clickTrackings,a)},d.prototype._addCustomClicks=function(a){k.isArray(a)&&e(this.customClicks,a)},d.prototype._addTrackingEvents=function(a){var b=this.trackingEvents;a&&(a=k.isArray(a)?a:[a],a.forEach(function(a){b[a.name]||(b[a.name]=[]),b[a.name].push(a)}))},d.prototype._addTitle=function(a){k.isNotEmptyString(a)&&(this.adTitle=a)},d.prototype._addDuration=function(a){k.isNumber(a)&&(this.duration=a)},d.prototype._addVideoClicks=function(a){a instanceof g&&(this._addClickThrough(a.clickThrough),this._addClickTrackings(a.clickTrackings),this._addCustomClicks(a.customClicks))},d.prototype._addMediaFiles=function(a){k.isArray(a)&&e(this.mediaFiles,a)},d.prototype._addSkipoffset=function(a){a&&(this.skipoffset=a)},d.prototype._addAdParameters=function(a){a&&(this.adParameters=a)},d.prototype._addLinear=function(a){a instanceof h&&(this._addDuration(a.duration),this._addTrackingEvents(a.trackingEvents),this._addVideoClicks(a.videoClicks),this._addMediaFiles(a.mediaFiles),this._addSkipoffset(a.skipoffset),this._addAdParameters(a.adParameters),this._linearAdded=!0)},d.prototype._addInLine=function(a){var b=this;a instanceof i&&(this._addTitle(a.adTitle),this._addErrorTrackUrl(a.error),this._addImpressions(a.impressions),a.creatives.forEach(function(a){a.linear&&b._addLinear(a.linear)}))},d.prototype._addWrapper=function(a){var b=this;a instanceof j&&(this._addErrorTrackUrl(a.error),this._addImpressions(a.impressions),a.creatives.forEach(function(a){var c=a.linear;c&&(b._addVideoClicks(c.videoClicks),b.clickThrough=void 0,b._addTrackingEvents(c.trackingEvents))}))},d.prototype.hasLinear=function(){return this._linearAdded},b.exports=d},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Ad":15,"./InLine":18,"./Linear":19,"./VideoClicks":27,"./Wrapper":28}],26:[function(a,b,c){"use strict";function d(a,b){return this instanceof d?(this.sanityCheck(a,b),void this.initialize(a,b)):new d(a,b)}var e=a("./VASTError"),f=a("./VASTResponse"),g=a("./vastUtil"),h=a("../../utils/utilityFunctions");d.prototype.initialize=function(a,b){this.response=b,this.assetURI=a,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*b.duration)/100},midpoint:{tracked:!1,time:Math.round(50*b.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*b.duration)/100}}},d.prototype.sanityCheck=function(a,b){if(!h.isString(a)||h.isEmptyString(a))throw new e("on VASTTracker constructor, missing required the URI of the ad asset being played");if(!(b instanceof f))throw new e("on VASTTracker constructor, missing required VAST response")},d.prototype.trackURLs=function(a,b){h.isArray(a)&&a.length>0&&(b=h.extend({ASSETURI:this.assetURI,CONTENTPLAYHEAD:g.formatProgress(this.progress)},b||{}),g.track(a,b))},d.prototype.trackEvent=function(a,b){function c(a){var b;return a&&(b=[],a.forEach(function(a){a.uri&&b.push(a.uri)})),b}this.trackURLs(c(this.response.trackingEvents[a])),b&&(this.response.trackingEvents[a]=void 0)},d.prototype.trackProgress=function i(a){function b(b,c){var d=3e3;return b>a&&Math.abs(c-b)>d}function c(a,b,c){m[a]&&c&&j.push({name:a,trackOnce:!!b})}function d(a){function b(a,b){var e=d[a];i(e,b)&&(e.tracked=!0,c(a,k,!0))}var d=g.quartiles,e=g.quartiles.firstQuartile,f=g.quartiles.midpoint,h=g.quartiles.thirdQuartile;e.tracked?f.tracked?h.tracked||b("thirdQuartile",a):b("midpoint",a):b("firstQuartile",a)}function i(a,b){var c=a.time;return b>=c&&b<=c+5e3}function e(a){if(h.isArray(m.progress)){var b=[];m.progress.forEach(function(c){c.offset<=a?g.trackURLs([c.uri]):b.push(c)}),m.progress=b}}function f(){j.forEach(function(a){g.trackEvent(a.name,a.trackOnce)})}var g=this,j=[],k=!0,l=!1,m=this.response.trackingEvents;h.isNumber(a)&&(c("start",k,a>0),c("rewind",l,b(this.progress,a)),d(a),e(a),f(),this.progress=a)},["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(a){d.prototype["track"+h.capitalize(a)]=function(){
this.trackEvent(a)}}),["start","skip","close","closeLinear"].forEach(function(a){d.prototype["track"+h.capitalize(a)]=function(){this.trackEvent(a,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(a){d.prototype["track"+h.capitalize(a)]=function(){this.quartiles[a].tracked=!0,this.trackEvent(a,!0)}}),d.prototype.trackComplete=function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)},d.prototype.trackErrorWithCode=function(a){h.isNumber(a)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:a})},d.prototype.trackImpressions=function(){this.trackURLs(this.response.impressions)},d.prototype.trackCreativeView=function(){this.trackEvent("creativeView")},d.prototype.trackClick=function(){this.trackURLs(this.response.clickTrackings)},b.exports=d},{"../../utils/utilityFunctions":47,"./VASTError":23,"./VASTResponse":25,"./vastUtil":30}],27:[function(a,b,c){"use strict";function d(a){function b(a){var b=[];return a&&(a=e.isArray(a)?a:[a],a.forEach(function(a){b.push(f.keyValue(a))})),b}return this instanceof d?(this.clickThrough=f.keyValue(a.clickThrough),this.clickTrackings=b(a.clickTracking),void(this.customClicks=b(a.customClick))):new d(a)}var e=a("../../utils/utilityFunctions"),f=a("../../utils/xml");b.exports=d},{"../../utils/utilityFunctions":47,"../../utils/xml":48}],28:[function(a,b,c){"use strict";function d(a){return this instanceof d?(this.adSystem=h.keyValue(a.adSystem),this.impressions=e.parseImpressions(a.impression),this.VASTAdTagURI=h.keyValue(a.vASTAdTagURI),this.creatives=f.parseCreatives(a.creatives),this.error=h.keyValue(a.error),this.extensions=a.extensions,this.followAdditionalWrappers=!g.isDefined(h.attr(a,"followAdditionalWrappers"))||h.attr(a,"followAdditionalWrappers"),this.allowMultipleAds=h.attr(a,"allowMultipleAds"),void(this.fallbackOnNoAd=h.attr(a,"fallbackOnNoAd"))):new d(a)}var e=a("./vastUtil"),f=a("./Creative"),g=a("../../utils/utilityFunctions"),h=a("../../utils/xml");b.exports=d},{"../../utils/utilityFunctions":47,"../../utils/xml":48,"./Creative":17,"./vastUtil":30}],29:[function(a,b,c){"use strict";var d=a("../../utils/utilityFunctions"),e=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,f={duration:function g(a){function b(a){return 60*parseInt(a,10)*60*1e3}function g(a){return 60*parseInt(a,10)*1e3}function c(a){return 1e3*parseInt(a,10)}var f,h;return d.isString(a)&&(f=a.match(e),f&&(h=b(f[1])+g(f[2])+c(f[3])+parseInt(f[5]||0))),isNaN(h)?null:h},offset:function(a,b){function c(a){var b=/^\d+(\.\d+)?%$/g;return b.test(a)}function d(a,b){return b?e(b,parseFloat(a.replace("%",""))):null}function e(a,b){return a*b/100}return c(a)?d(a,b):f.duration(a)}};b.exports=f},{"../../utils/utilityFunctions":47}],30:[function(a,b,c){"use strict";var d=a("../../utils/utilityFunctions"),e=a("../vpaid/VPAIDHTML5Tech"),f=a("../vpaid/VPAIDFlashTech"),g=a("VPAIDFLASHClient/js/VPAIDFLASHClient"),h={track:function(a,b){var c=h.parseURLMacros(a,b),d=[];return c.forEach(function(a){var b=new Image;b.src=a,d.push(b)}),d},parseURLMacros:function(a,b){var c=[];return b=b||{},b.CACHEBUSTING||(b.CACHEBUSTING=Math.round(1e10*Math.random())),a.forEach(function(a){c.push(h._parseURLMacro(a,b))}),c},parseURLMacro:function(a,b){return b=b||{},b.CACHEBUSTING||(b.CACHEBUSTING=Math.round(1e10*Math.random())),h._parseURLMacro(a,b)},_parseURLMacro:function(a,b){return b=b||{},d.forEach(b,function(b,c){a=a.replace(new RegExp("\\["+c+"\\]","gm"),b)}),a},parseDuration:function(a){function b(a){return 60*parseInt(a,10)*60*1e3}function c(a){return 60*parseInt(a,10)*1e3}function e(a){return 1e3*parseInt(a,10)}var f,g,h=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return d.isString(a)&&(f=a.match(h),f&&(g=b(f[1])+c(f[2])+e(f[3])+parseInt(f[5]||0))),isNaN(g)?null:g},parseImpressions:function(a){return a?(a=d.isArray(a)?a:[a],d.transformArray(a,function(a){if(d.isNotEmptyString(a.keyValue))return a.keyValue})):[]},formatProgress:function(a){var b,c,e,f;return b=a/36e5,b=Math.floor(b),c=a/6e4%60,c=Math.floor(c),e=a/1e3%60,e=Math.floor(e),f=a%1e3,d.toFixedDigits(b,2)+":"+d.toFixedDigits(c,2)+":"+d.toFixedDigits(e,2)+"."+d.toFixedDigits(f,3)},parseOffset:function(a,b){function c(a){var b=/^\d+(\.\d+)?%$/g;return b.test(a)}function d(a,b){return b?e(b,parseFloat(a.replace("%",""))):null}function e(a,b){return a*b/100}return c(a)?d(a,b):h.parseDuration(a)},VPAID_techs:[f,e],isVPAID:function(a){return!!a&&"VPAID"===a.apiFramework},findSupportedVPAIDTech:function(a){var b,c,d;for(b=0,c=this.VPAID_techs.length;b<c;b+=1)if(d=this.VPAID_techs[b],d.supports(a))return d;return null},isFlashSupported:function(){return g.isSupported()},runFlashSupportCheck:function(a){g.runFlashTest({data:a})}};b.exports=h},{"../../utils/utilityFunctions":47,"../vpaid/VPAIDFlashTech":32,"../vpaid/VPAIDHTML5Tech":33,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],31:[function(a,b,c){"use strict";function d(a,b){function c(a,b){if(!a||!d.checkVPAIDInterface(a))throw new e("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface");if(!f.isObject(b))throw new e("on VPAIDAdUnitWrapper, expected options hash  but got '"+b+"'");if(!("responseTimeout"in b&&f.isNumber(b.responseTimeout)))throw new e("on VPAIDAdUnitWrapper, expected responseTimeout in options")}return this instanceof d?(c(a,b),this.options=f.extend({},b),void(this._adUnit=a)):new d(a,b)}var e=a("../vast/VASTError"),f=a("../../utils/utilityFunctions");d.checkVPAIDInterface=function g(a){function b(a){return f.isFunction(a.subscribe)||f.isFunction(a.addEventListener)||f.isFunction(a.on)}function g(a){return f.isFunction(a.unsubscribe)||f.isFunction(a.removeEventListener)||f.isFunction(a.off)}for(var c=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],d=0,e=c.length;d<e;d++)if(!a||!f.isFunction(a[c[d]]))return!1;return b(a)&&g(a)},d.prototype.adUnitAsyncCall=function(){function a(a,b,c){if(!f.isString(a)||!f.isFunction(c[a]))throw new e("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");if(!f.isFunction(b))throw new e("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")}function b(){return function(){c&&clearTimeout(c),h.apply(this,arguments)}}var c,d=f.arrayLikeObjToArray(arguments),g=d.shift(),h=d.pop();a(g,h,this._adUnit),d.push(b()),this._adUnit[g].apply(this._adUnit,d),c=setTimeout(function(){c=null,h(new e("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '"+g+"'")),h=f.noop},this.options.responseTimeout)},d.prototype.on=function(a,b){var c=this._adUnit.addEventListener||this._adUnit.subscribe||this._adUnit.on;c.call(this._adUnit,a,b)},d.prototype.off=function(a,b){var c=this._adUnit.removeEventListener||this._adUnit.unsubscribe||this._adUnit.off;c.call(this._adUnit,a,b)},d.prototype.waitForEvent=function(a,b,c){function d(a,b){if(!f.isString(a))throw new e("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");if(!f.isFunction(b))throw new e("on VPAIDAdUnitWrapper.waitForEvent, missing callback")}function g(){var a=f.arrayLikeObjToArray(arguments);h&&(clearTimeout(h),h=null),a.unshift(null),b.apply(c,a)}var h;d(a,b),c=c||null,this.on(a,g),h=setTimeout(function(){b(new e("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '"+a+"'")),h=null,b=f.noop},this.options.responseTimeout)},d.prototype.handshakeVersion=function(a,b){this.adUnitAsyncCall("handshakeVersion",a,b)},d.prototype.initAd=function(a,b,c,d,e,f){this.waitForEvent("AdLoaded",f),this._adUnit.initAd(a,b,c,d,e)},d.prototype.resizeAd=function(a,b,c,d){this.adUnitAsyncCall("resizeAd",a,b,c,d)},d.prototype.startAd=function(a){this.waitForEvent("AdStarted",a),this._adUnit.startAd()},d.prototype.stopAd=function(a){this.waitForEvent("AdStopped",a),this._adUnit.stopAd()},d.prototype.pauseAd=function(a){this.waitForEvent("AdPaused",a),this._adUnit.pauseAd()},d.prototype.resumeAd=function(a){this.waitForEvent("AdPlaying",a),this._adUnit.resumeAd()},d.prototype.expandAd=function(a){this.waitForEvent("AdExpandedChange",a),this._adUnit.expandAd()},d.prototype.collapseAd=function(a){this.waitForEvent("AdExpandedChange",a),this._adUnit.collapseAd()},d.prototype.skipAd=function(a){this.waitForEvent("AdSkipped",a),this._adUnit.skipAd()},["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(a){var b="get"+f.capitalize(a);d.prototype[b]=function(a){this.adUnitAsyncCall(b,a)}}),d.prototype.setAdVolume=function(a,b){this.adUnitAsyncCall("setAdVolume",a,b)},b.exports=d},{"../../utils/utilityFunctions":47,"../vast/VASTError":23}],32:[function(a,b,c){"use strict";function d(a,b){function c(a){if(!a||!h.isString(a.src))throw new f("on VPAIDFlashTech, invalid MediaFile")}return this instanceof d?(c(a),this.name="vpaid-flash",this.mediaFile=a,this.containerEl=null,this.vpaidFlashClient=null,void(this.settings=b)):new d(a)}var e=a("../../utils/mimetypes"),f=a("../vast/VASTError"),g=a("VPAIDFLASHClient/js/VPAIDFLASHClient"),h=a("../../utils/utilityFunctions"),i=a("../../utils/dom"),j=a("../../utils/consoleLogger");d.VPAIDFLASHClient=g,d.supports=function(a){return e.flash.indexOf(a)>-1&&d.VPAIDFLASHClient.isSupported()},d.prototype.loadAdUnit=function k(a,b,c){function k(a,b){if(!i.isDomElement(a))throw new f("on VPAIDFlashTech.loadAdUnit, invalid dom container element");if(!h.isFunction(b))throw new f("on VPAIDFlashTech.loadAdUnit, missing valid callback")}var e=this,g=this.settings&&this.settings.vpaidFlashLoaderPath?{data:this.settings.vpaidFlashLoaderPath}:void 0;k(a,c),this.containerEl=a,j.debug("<VPAIDFlashTech.loadAdUnit> loading VPAIDFLASHClient with opts:",g),this.vpaidFlashClient=new d.VPAIDFLASHClient(a,function(a){return a?c(a):(j.info("<VPAIDFlashTech.loadAdUnit> calling VPAIDFLASHClient.loadAdUnit(); that.mediaFile:",e.mediaFile),void e.vpaidFlashClient.loadAdUnit(e.mediaFile.src,c))},g)},d.prototype.unloadAdUnit=function(){if(this.vpaidFlashClient){try{this.vpaidFlashClient.destroy()}catch(a){j.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidFlashClient=null}this.containerEl&&(i.remove(this.containerEl),this.containerEl=null)},b.exports=d},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDFLASHClient/js/VPAIDFLASHClient":3}],33:[function(a,b,c){"use strict";function d(a){function b(a){if(!a||!h.isString(a.src))throw new f(d.INVALID_MEDIA_FILE)}return this instanceof d?(b(a),this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,void(this.mediaFile=a)):new d(a)}var e=a("../../utils/mimetypes"),f=a("../vast/VASTError"),g=a("VPAIDHTML5Client/js/VPAIDHTML5Client"),h=a("../../utils/utilityFunctions"),i=a("../../utils/dom"),j=a("../../utils/consoleLogger");d.VPAIDHTML5Client=g,d.supports=function(a){return!h.isOldIE()&&e.html5.indexOf(a)>-1},d.prototype.loadAdUnit=function(a,b,c){function e(a,b,c){if(!i.isDomElement(a))throw new f(d.INVALID_DOM_CONTAINER_EL);if(!i.isDomElement(b)||"video"!==b.tagName.toLowerCase())throw new f(d.INVALID_DOM_CONTAINER_EL);if(!h.isFunction(c))throw new f(d.MISSING_CALLBACK)}e(a,b,c),this.containerEl=a,this.videoEl=b,this.vpaidHTMLClient=new d.VPAIDHTML5Client(a,b,{}),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,c)},d.prototype.unloadAdUnit=function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(a){j.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(i.remove(this.containerEl),this.containerEl=null)};var k="on VPAIDHTML5Tech";d.INVALID_MEDIA_FILE=k+", invalid MediaFile",d.INVALID_DOM_CONTAINER_EL=k+", invalid container HtmlElement",d.INVALID_DOM_VIDEO_EL=k+", invalid HTMLVideoElement",d.MISSING_CALLBACK=k+", missing valid callback",b.exports=d},{"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"VPAIDHTML5Client/js/VPAIDHTML5Client":11}],34:[function(a,b,c){"use strict";function d(a,b){function c(){var b=document.createElement("div");return n.addClass(b,"VPAID-container"),a.el().insertBefore(b,a.controlBar.el()),b}return this instanceof d?(this.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},this.player=a,this.containerEl=c(a),this.options={responseTimeout:5e3,VPAID_VERSION:"2.0"},void(this.settings=b)):new d(a)}function e(a,b,c){var d=a.el().querySelector(".vjs-tech"),e=n.getDimension(d),g=a.isFullscreen()?c.FULLSCREEN:c.NORMAL;b.resizeAd(e.width,e.height,g,f)}function f(a){a&&q.error("ERROR: "+a.message,a)}var g=a("../../utils/mimetypes"),h=a("../vast/VASTError"),i=a("../vast/VASTResponse"),j=a("../vast/VASTTracker"),k=a("../vast/vastUtil"),l=a("./VPAIDAdUnitWrapper"),m=a("../../utils/async"),n=a("../../utils/dom"),o=a("../../utils/playerUtils"),p=a("../../utils/utilityFunctions"),q=a("../../utils/consoleLogger");d.prototype.playAd=function(a,b){function c(a,c,d){a&&d&&f._trackError(d,a.code),g.trigger("vpaid.adEnd"),b(a,d)}function d(){g.trigger("vpaid.adEnd")}function e(){j&&j.unloadAdUnit(),n.removeClass(g.el(),"vjs-vpaid-ad")}if(!(a instanceof i))return b(new h("on VASTIntegrator.playAd, missing required VASTResponse"));var f=this,g=this.player;q.debug("<VPAIDIntegrator.playAd> looking for supported tech...");var j=this._findSupportedTech(a,this.settings);if(b=b||p.noop,this._adUnit=null,n.addClass(g.el(),"vjs-vpaid-ad"),g.on("vast.adsCancel",d),g.one("vpaid.adEnd",function(){g.off("vast.adsCancel",d),e()}),j)q.info("<VPAIDIntegrator.playAd> found tech: ",j),m.waterfall([function(b){b(null,j,a)},this._loadAdUnit.bind(this),this._playAdUnit.bind(this),this._finishPlaying.bind(this)],c),this._adUnit={_paused:!0,type:"VPAID",pauseAd:function(){g.trigger("vpaid.pauseAd"),g.pause(!0)},resumeAd:function(){g.trigger("vpaid.resumeAd")},isPaused:function(){return this._paused},getSrc:function(){return j.mediaFile}};else{q.debug("<VPAIDIntegrator.playAd> could not find suitable tech");var k=new h("on VPAIDIntegrator.playAd, could not find a supported mediaFile",403);c(k,this._adUnit,a)}return this._adUnit},d.prototype._findSupportedTech=function(a,b){if(!(a instanceof i))return null;var c,d,e,f,h,j=a.mediaFiles.filter(k.isVPAID),l=b&&b.preferredTech,m=[];for(c=0,d=j.length;c<d;c+=1)if(e=j[c],f=k.findSupportedVPAIDTech(e.type)){if(h=!!l&&(e.type===l||g[l]&&g[l].indexOf(e.type)>-1))return new f(e,b);m.push({mediaFile:e,tech:f})}if(m.length){var n=m[0];return new n.tech(n.mediaFile,b)}return null},d.prototype._createVPAIDAdUnitWrapper=function(a,b,c){return new l(a,{src:b,responseTimeout:c})},d.prototype._loadAdUnit=function(a,b,c){var d=this,e=this.player,f=e.el().querySelector(".vjs-tech"),g=this.settings.responseTimeout||this.options.responseTimeout;a.loadAdUnit(this.containerEl,f,function(f,h){if(f)return c(f,h,b);try{var i=d._createVPAIDAdUnitWrapper(h,a.mediaFile.src,g),j="vjs-"+a.name+"-ad";n.addClass(e.el(),j),e.one("vpaid.adEnd",function(){n.removeClass(e.el(),j)}),c(null,i,b)}catch(k){c(k,h,b)}})},d.prototype._playAdUnit=function(a,b,c){m.waterfall([function(c){c(null,a,b)},this._handshake.bind(this),this._initAd.bind(this),this._setupEvents.bind(this),this._addSkipButton.bind(this),this._linkPlayerControls.bind(this),this._startAd.bind(this)],c)},d.prototype._handshake=function(a,b,c){function d(a){var b=e(a);return b>=1&&b<=2}function e(a){var b=a.split(".");return parseInt(b[0],10)}a.handshakeVersion(this.options.VPAID_VERSION,function(e,f){return e?c(e,a,b):f&&d(f)?c(null,a,b):c(new h('on VPAIDIntegrator._handshake, unsupported version "'+f+'"'),a,b)})},d.prototype._initAd=function(a,b,c){var d=this.player.el().querySelector(".vjs-tech"),e=n.getDimension(d);a.initAd(e.width,e.height,this.VIEW_MODE.NORMAL,-1,{AdParameters:b.adParameters||""},function(d){c(d,a,b)})},d.prototype._createVASTTracker=function(a,b){return new j(a,b)},d.prototype._setupEvents=function(a,b,c){function d(){m._adUnit&&m._adUnit.isPaused()&&(m._adUnit._paused=!1),l.trigger("play")}function f(){m._adUnit&&(m._adUnit._paused=!0),l.trigger("pause")}function g(){a.pauseAd(p.noop)}function h(){a.resumeAd(p.noop)}var i=a.options.src,j=this._createVASTTracker(i,b),l=this.player,m=this;a.on("AdSkipped",function(){l.trigger("vpaid.AdSkipped"),j.trackSkip()}),a.on("AdImpression",function(){l.trigger("vpaid.AdImpression"),j.trackImpressions()}),a.on("AdStarted",function(){l.trigger("vpaid.AdStarted"),j.trackCreativeView(),d()}),a.on("AdVideoStart",function(){l.trigger("vpaid.AdVideoStart"),j.trackStart(),d()}),a.on("AdPlaying",function(){l.trigger("vpaid.AdPlaying"),j.trackResume(),d()}),a.on("AdPaused",function(){l.trigger("vpaid.AdPaused"),j.trackPause(),f()}),a.on("AdVideoFirstQuartile",function(){l.trigger("vpaid.AdVideoFirstQuartile"),j.trackFirstQuartile()}),a.on("AdVideoMidpoint",function(){l.trigger("vpaid.AdVideoMidpoint"),j.trackMidpoint()}),a.on("AdVideoThirdQuartile",function(){l.trigger("vpaid.AdVideoThirdQuartile"),j.trackThirdQuartile()}),a.on("AdVideoComplete",function(){l.trigger("vpaid.AdVideoComplete"),j.trackComplete()}),a.on("AdClickThru",function(c){function d(b){var c={ASSETURI:a.options.src,CONTENTPLAYHEAD:0};return b?k.parseURLMacro(b,c):null}l.trigger("vpaid.AdClickThru");var e=c.url,f=c.playerHandles,g=p.isNotEmptyString(e)?e:d(b.clickThrough);j.trackClick(),f&&g&&window.open(g,"_blank")}),a.on("AdUserAcceptInvitation",function(){l.trigger("vpaid.AdUserAcceptInvitation"),j.trackAcceptInvitation(),j.trackAcceptInvitationLinear()}),a.on("AdUserClose",function(){l.trigger("vpaid.AdUserClose"),j.trackClose(),j.trackCloseLinear()}),a.on("AdUserMinimize",function(){l.trigger("vpaid.AdUserMinimize"),j.trackCollapse()}),a.on("AdError",function(){l.trigger("vpaid.AdError"),j.trackErrorWithCode(901)}),a.on("AdVolumeChange",function(){l.trigger("vpaid.AdVolumeChange");var b=l.volume();a.getAdVolume(function(a,c){b!==c&&(0===c&&b>0&&j.trackMute(),c>0&&0===b&&j.trackUnmute(),l.volume(c))})});var o=e.bind(this,l,a,this.VIEW_MODE),q=p.throttle(o,100),r=this.settings.autoResize;r&&(n.addEventListener(window,"resize",q),n.addEventListener(window,"orientationchange",q)),l.on("vast.resize",o),l.on("vpaid.pauseAd",g),l.on("vpaid.resumeAd",h),l.one("vpaid.adEnd",function(){l.off("vast.resize",o),l.off("vpaid.pauseAd",g),l.off("vpaid.resumeAd",h),r&&(n.removeEventListener(window,"resize",q),n.removeEventListener(window,"orientationchange",q))}),c(null,a,b)},d.prototype._addSkipButton=function(a,b,c){function d(){i.trigger("vpaid.AdSkippableStateChange"),a.getAdSkippableState(function(a,b){b?h||e(i):f(i)})}function e(a){h=g(a),a.el().appendChild(h)}function f(){n.remove(h),h=null}function g(){var b=window.document.createElement("div");return n.addClass(b,"vast-skip-button"),n.addClass(b,"enabled"),b.innerHTML="Skip ad",b.onclick=function(b){return a.skipAd(p.noop),void 0!==window.Event.prototype.stopPropagation&&void b.stopPropagation()},b}var h,i=this.player;a.on("AdSkippableStateChange",d),o.once(i,["vast.adEnd","vast.adsCancel"],f),c(null,a,b)},d.prototype._linkPlayerControls=function(a,b,c){function d(a,b){function c(){var c=a.muted()?0:a.volume();b.setAdVolume(c,f)}function d(){a.trigger("vpaid.AdVolumeChange");var c=a.volume();b.getAdVolume(function(b,d){b?f(b):c!==d&&a.volume(d)})}a.on("volumechange",c),b.on("AdVolumeChange",d),a.one("vpaid.adEnd",function(){a.off("volumechange",c)})}function g(a,b,c){var d=e.bind(h,a,b,c);a.on("fullscreenchange",d),a.one("vpaid.adEnd",function(){a.off("fullscreenchange",d)})}var h=this;d(this.player,a),g(this.player,a,this.VIEW_MODE),c(null,a,b)},d.prototype._startAd=function(a,b,c){var d=this.player;a.startAd(function(e){e||d.trigger("vast.adStart"),c(e,a,b)})},d.prototype._finishPlaying=function(a,b,c){function d(d){c(d,a,b)}var e=this.player;a.on("AdStopped",function(){e.trigger("vpaid.AdStopped"),d(null)}),a.on("AdError",function(a){var b=a?a.message:"on VPAIDIntegrator, error while waiting for the adUnit to finish playing";d(new h(b))})},d.prototype._trackError=function(a,b){k.track(a.errorURLMacros,{ERRORCODE:b||901})},b.exports=d},{"../../utils/async":40,"../../utils/consoleLogger":41,"../../utils/dom":42,"../../utils/mimetypes":44,"../../utils/playerUtils":45,"../../utils/utilityFunctions":47,"../vast/VASTError":23,"../vast/VASTResponse":25,"../vast/VASTTracker":26,"../vast/vastUtil":30,"./VPAIDAdUnitWrapper":31}],35:[function(a,b,c){"use strict";var d=a("../../utils/dom"),e=document.createElement("div");e.className="vjs-ads-label vjs-control vjs-label-hidden",e.innerHTML="Sponsor";var f=function(a){return{init:function(b,c){c.el=e,a.call(this,b,c),setTimeout(function(){var a=b.controlBar&&(b.controlBar.getChild("timerControls")||b.controlBar.getChild("currentTimeDisplay"));a&&b.controlBar.el().insertBefore(e,a.el()),d.removeClass(e,"vjs-label-hidden")},0)},el:function(){return e}}};b.exports=f},{"../../utils/dom":42}],36:[function(a,b,c){"use strict";var d=videojs.getComponent("Component"),e=a("./ads-label")(d);videojs.registerComponent("AdsLabel",videojs.extend(d,e))},{"./ads-label":35}],37:[function(a,b,c){"use strict";var d=document.createElement("div"),e=function(a){return{init:function(b,c){c.el=d,d.className="vjs-black-poster",a.call(this,b,c);var e=b.getChild("posterImage");setTimeout(function(){e&&b&&b.el()&&b.el().insertBefore(d,e.el())},0)},el:function(){return d}}};b.exports=e},{}],38:[function(a,b,c){"use strict";var d=videojs.getComponent("Component"),e=a("./black-poster")(d);videojs.registerComponent("BlackPoster",videojs.extend(d,e))},{"./black-poster":37}],39:[function(a,b,c){"use strict";var d=a("../ads/vast/VASTClient"),e=a("../ads/vast/VASTError"),f=a("../ads/vast/vastUtil"),g=a("../ads/vast/VASTIntegrator"),h=a("../ads/vpaid/VPAIDIntegrator"),i=a("../utils/async"),j=a("../utils/dom"),k=a("../utils/playerUtils"),l=a("../utils/utilityFunctions"),m=a("../utils/consoleLogger");b.exports=function n(a){function b(){function a(){u.vast&&u.vast.adUnit&&(u.vast.adUnit=null)}function b(){c(),t&&(k.restorePlayerSnapshot(u,t),t=null)}function c(){k.once(u,["playing","vast.reset","vast.firstPlay"],function(a){"playing"===a.type&&(u.trigger("vast.contentStart"),k.once(u,["ended","vast.reset","vast.firstPlay"],function(a){"ended"===a.type&&u.trigger("vast.contentEnd")}))})}function d(a){return x.adsEnabled?a(null):void a(new e("Ads are not enabled"))}function f(a){g()?(t=k.getPlayerSnapshot(u),u.pause(),m(),u.paused()?a(null):k.once(u,["playing"],function(){u.pause(),a(null)})):a(new e("video content has been playing before preroll ad"))}function g(){return!l.isIPhone()||u.currentTime()<=x.iosPrerollCancelTimeout}function h(a){function b(){c&&(clearTimeout(c),c=null)}var c;v=!1,c=setTimeout(function(){r(new e("timeout while waiting for the video to start playing",402))},x.adCancelTimeout),k.once(u,["vast.adStart","vast.adsCancel"],b),a(null)}function m(){j.addClass(u.el(),"vjs-vast-ad-loading"),k.once(u,["vast.adStart","vast.adsCancel"],n)}function n(){setTimeout(function(){j.removeClass(u.el(),"vjs-vast-ad-loading")},100)}k.removeNativePoster(u),k.once(u,["vast.adsCancel","vast.adEnd"],function(){a(),b()}),i.waterfall([d,f,h,o],function(a,b){a?r(a,b):u.trigger("vast.adEnd")})}function c(){u.trigger("vast.adsCancel"),v=!0}function o(a){i.waterfall([p,q],a)}function p(a){n.getVASTResponse(x.adTagUrl?x.adTagUrl():x.adTagXML,a)}function q(a,b){function c(){i||u.controlBar.getChild("AdsLabel")||u.controlBar.addChild("AdsLabel")}function d(){u.controlBar.removeChild("AdsLabel"),i=!0}function e(){function a(){u.duration()-e>d&&(u.pause(!0),u.play(!0),u.currentTime(e))}function b(){var a=u.currentTime(),b=Math.abs(a-e);b>d?(f+=1,f>=2&&u.pause(!0),u.currentTime(e)):e=a}function c(){u.off("timeupdate",b),u.off("ended",a)}var d=3,e=0,f=0;u.on("timeupdate",b),u.on("ended",a),k.once(u,["vast.adEnd","vast.adsCancel","vast.adError"],c)}if(!v){var f=s(a)?new h(u,x):new g(u),i=!1;k.once(u,["vast.adStart","vast.adsCancel"],function(a){"vast.adStart"===a.type&&c()}),k.once(u,["vast.adEnd","vast.adsCancel"],d),l.isIDevice()&&e(),u.vast.vastResponse=a,m.debug("calling adIntegrator.playAd() with vastResponse:",a),u.vast.adUnit=f.playAd(a,b)}}function r(a,b){u.trigger({type:"vast.adError",error:a}),c(),m.error("AD ERROR:",a.message,a,b)}function s(a){var b,c,d=a.mediaFiles;for(b=0,c=d.length;b<c;b++)if(f.isVPAID(d[b]))return!0;return!1}var t,u=this,n=new d,v=!1,w={timeout:500,iosPrerollCancelTimeout:2e3,adCancelTimeout:3e3,playAdAlways:!1,adsEnabled:!0,autoResize:!0,vpaidFlashLoaderPath:"/VPAIDFlash.swf",verbosity:0},x=l.extend({},w,a||{});return l.isUndefined(x.adTagUrl)&&l.isDefined(x.url)&&(x.adTagUrl=x.url),l.isString(x.adTagUrl)&&(x.adTagUrl=l.echoFn(x.adTagUrl)),l.isDefined(x.adTagXML)&&!l.isFunction(x.adTagXML)?r(new e("on VideoJS VAST plugin, the passed adTagXML option does not contain a function")):l.isDefined(x.adTagUrl)||l.isFunction(x.adTagXML)?(m.setVerbosity(x.verbosity),f.runFlashSupportCheck(x.vpaidFlashLoaderPath),k.prepareForAds(u),x.playAdAlways&&u.on("vast.contentEnd",function(){setTimeout(function(){u.trigger("vast.reset")},0)}),u.on("vast.firstPlay",b),u.on("vast.reset",function(){t=null,c()}),u.vast={isEnabled:function(){return x.adsEnabled},enable:function(){x.adsEnabled=!0},disable:function(){x.adsEnabled=!1}},u.vast):r(new e("on VideoJS VAST plugin, missing adTagUrl on options object"))}},{"../ads/vast/VASTClient":22,"../ads/vast/VASTError":23,"../ads/vast/VASTIntegrator":24,"../ads/vast/vastUtil":30,"../ads/vpaid/VPAIDIntegrator":34,"../utils/async":40,"../utils/consoleLogger":41,"../utils/dom":42,"../utils/playerUtils":45,"../utils/utilityFunctions":47}],40:[function(a,b,c){var d=a("./utilityFunctions"),e={};e.setImmediate=function(a){setTimeout(a,0)},e.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},e.waterfall=function(a,b){if(b=b||function(){},!d.isArray(a)){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var f=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var d=Array.prototype.slice.call(arguments,1),g=a.next();g?d.push(f(g)):d.push(b),e.setImmediate(function(){a.apply(null,d)})}}};f(e.iterator(a))()},e.when=function(a,b){if(!d.isFunction(b))throw new Error("async.when error: missing callback argument");var c=d.isFunction(a)?a:function(){return!!a};return function(){var a=d.arrayLikeObjToArray(arguments),e=a.pop();return c.apply(null,a)?b.apply(this,arguments):(a.unshift(null),e.apply(null,a))}},b.exports=e},{"./utilityFunctions":47}],41:[function(a,b,c){"use strict";function d(a){k=a}function e(a,b){b.length>0&&"string"==typeof b[0]&&(b[0]=l+b[0]),a.apply?a.apply(console,Array.prototype.slice.call(b)):a(Array.prototype.slice.call(b))}function f(){k<4||("undefined"==typeof console.debug?e(console.log,arguments):e(console.debug,arguments))}function g(){k<3||e(console.log,arguments)}function h(){k<2||e(console.info,arguments)}function i(){k<1||e(console.warn,arguments)}function j(){e(console.error,arguments)}var k=0,l="[videojs-vast-vpaid] ",m={setVerbosity:d,debug:f,log:g,info:h,warn:i,error:j};"undefined"!=typeof console&&console.log||(m.debug=function(){},m.log=function(){},m.info=function(){},m.warn=function(){},m.error=function(){}),b.exports=m},{}],42:[function(a,b,c){"use strict";var d=a("./utilityFunctions"),e={};e.isVisible=function(a){var b=window.getComputedStyle(a);return"hidden"!==b.visibility},e.isHidden=function(a){var b=window.getComputedStyle(a);return"none"===b.display},e.isShown=function(a){return!e.isHidden(a)},e.hide=function(a){a.__prev_style_display_=a.style.display,a.style.display="none"},e.show=function(a){e.isHidden(a)&&(a.style.display=a.__prev_style_display_),a.__prev_style_display_=void 0},e.hasClass=function(a,b){var c,e,f;if(d.isNotEmptyString(b)){if(a.classList)return a.classList.contains(b);for(c=d.isString(a.getAttribute("class"))?a.getAttribute("class").split(/\s+/):[],b=b||"",e=0,f=c.length;e<f;e+=1)if(c[e]===b)return!0}return!1},e.addClass=function(a,b){var c;if(d.isNotEmptyString(b)){if(a.classList)return a.classList.add(b);c=d.isString(a.getAttribute("class"))?a.getAttribute("class").split(/\s+/):[],d.isString(b)&&d.isNotEmptyString(b.replace(/\s+/,""))&&(c.push(b),a.setAttribute("class",c.join(" ")))}},e.removeClass=function(a,b){var c;if(d.isNotEmptyString(b)){if(a.classList)return a.classList.remove(b);c=d.isString(a.getAttribute("class"))?a.getAttribute("class").split(/\s+/):[];var e,f,g=[];if(d.isString(b)&&d.isNotEmptyString(b.replace(/\s+/,""))){for(e=0,f=c.length;e<f;e+=1)b!==c[e]&&g.push(c[e]);a.setAttribute("class",g.join(" "))}}},e.addEventListener=function(a,b,c){return d.isArray(a)?void d.forEach(a,function(a){e.addEventListener(a,b,c)}):d.isArray(b)?void d.forEach(b,function(b){e.addEventListener(a,b,c)}):void(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},e.removeEventListener=function(a,b,c){return d.isArray(a)?void d.forEach(a,function(a){e.removeEventListener(a,b,c)}):d.isArray(b)?void d.forEach(b,function(b){e.removeEventListener(a,b,c)}):void(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null)},e.dispatchEvent=function(a,b){a.dispatchEvent?a.dispatchEvent(b):a.fireEvent("on"+b.eventType,b)},e.isDescendant=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},e.getTextContent=function(a){return a.textContent||a.text},e.prependChild=function(a,b){return b.parentNode&&b.parentNode.removeChild(b),a.insertBefore(b,a.firstChild)},e.remove=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},e.isDomElement=function(a){return a instanceof Element},e.click=function(a,b){e.addEventListener(a,"click",b)},e.once=function(a,b,c){function d(){c.apply(null,arguments),e.removeEventListener(a,b,d)}e.addEventListener(a,b,d)},e.getDimension=function(a){var b;return!d.isOldIE()&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),{width:b.width,height:b.height}):{width:a.offsetWidth,height:a.offsetHeight}},b.exports=e},{"./utilityFunctions":47}],43:[function(a,b,c){"use strict";function d(a){this.message="HttpRequest Error: "+(a||"")}function e(a){if(!h.isFunction(a))throw new d("Missing XMLHttpRequest factory method");this.createXhr=a}function f(){var a=new XMLHttpRequest;return"withCredentials"in a||(a=new XDomainRequest),a}var g=a("./urlUtils"),h=a("./utilityFunctions");d.prototype=new Error,d.prototype.name="HttpRequest Error",e.prototype.run=function(a,b,c,e){function f(a,b,c){if(!h.isString(a)||h.isEmptyString(a))throw new d("Invalid url '"+a+"'");if(!h.isFunction(b))throw new d("Invalid handler '"+b+"' for the http request");if(h.isDefined(c)&&!h.isObject(c))throw new d("Invalid options map '"+c+"'")}function i(a,b){h.forEach(b,function(b,c){h.isDefined(b)&&a.setRequestHeader(c,b)})}function j(){c(-1,null,null,"")}f(b,c,e);var k,l,m=this.createXhr();e=e||{},k=h.isNumber(e.timeout)?e.timeout:0,m.open(a,g.urlParts(b).href,!0),e.headers&&i(m,e.headers),e.withCredentials&&(m.withCredentials=!0),m.onload=function(){var a,b,d;m.getAllResponseHeaders||(m.getAllResponseHeaders=function(){return null}),m.status||(m.status=200),h.isDefined(l)&&(clearTimeout(l),l=void 0),a=m.statusText||"",b="response"in m?m.response:m.responseText,d=1223===m.status?204:m.status,c(d,b,m.getAllResponseHeaders(),a)},m.onerror=j,m.onabort=j,m.send(),k>0&&(l=setTimeout(function(){m&&m.abort()},k))},e.prototype.get=function(a,b,c){function e(a,c,e,g){f(a)?b(null,c,a,e,g):b(new d(g),c,a,e,g)}function f(a){return 200<=a&&a<300}this.run("GET",a,e,c)};var i=new e(f);b.exports={http:i,HttpRequest:e,HttpRequestError:d,createXhr:f}},{"./urlUtils":46,"./utilityFunctions":47}],44:[function(a,b,c){"use strict";b.exports={html5:["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],
flash:["application/x-shockwave-flash"]}},{}],45:[function(a,b,c){"use strict";var d=a("./dom"),e=a("./utilityFunctions"),f={};f.getPlayerSnapshot=function(a){function b(a){var b=a.remoteTextTracks?a.remoteTextTracks():[];b&&e.isArray(b.tracks_)&&(b=b.tracks_),e.isArray(b)||(b=[]);var c=[];return b.forEach(function(a){c.push({track:a,mode:a.mode}),a.mode="disabled"}),c}var c=a.el().querySelector(".vjs-tech"),d={ended:a.ended(),src:a.currentSrc(),currentTime:a.currentTime(),type:a.currentType(),playing:!a.paused(),suppressedTracks:b(a)};return c&&(d.nativePoster=c.poster,d.style=c.getAttribute("style")),d},f.restorePlayerSnapshot=function g(a,b){function c(){var b=setTimeout(function(){a.trigger("canplay")},1e3);a.one("canplay",function(){clearTimeout(b)})}function d(a,b){return a.src()?a.src()!==b.src:a.currentSrc()!==b.src}function g(){var a=b.suppressedTracks;a.forEach(function(a){a.track.mode=a.mode})}function e(){if(!f.isReadyToResume(a)&&i--)setTimeout(e,50);else try{a.currentTime()!==b.currentTime?(b.playing&&a.one("seeked",function(){a.play()}),a.currentTime(b.currentTime)):b.playing&&a.play()}catch(c){videojs.log.warn("Failed to resume the content after an advertisement",c)}}var h=a.el().querySelector(".vjs-tech"),i=20;b.nativePoster&&(h.poster=b.nativePoster),"style"in b&&h.setAttribute("style",b.style||""),d(a,b)?(a.one("contentloadedmetadata",g),a.one("canplay",e),c(),a.src({src:b.src,type:b.type}),a.load()):(g(),b.playing&&a.play())},f.isReadyToResume=function(a){return a.readyState()>1||(void 0===a.seekable()||a.seekable().length>0)},f.prepareForAds=function(a){function b(){var b=a.play;a.play=function(d){function f(){e.isIPhone()||(o=i(),a.muted(!0)),b.apply(j,arguments)}function g(d){c()&&!d?a.vast.adUnit.resumeAd():b.apply(j,arguments)}var j=this;return h()?f():g(d),this};var d=a.pause;a.pause=function(b){return c()&&!b?a.vast.adUnit.pauseAd():d.apply(this,arguments),this};var f=a.paused;a.paused=function(b){return c()&&!b?a.vast.adUnit.isPaused():f.apply(this,arguments)}}function c(){return a.vast&&a.vast.adUnit}function f(){h()&&(q=!1,a.trigger("vast.firstPlay"))}function g(){q=!0,p.show(),j()}function h(){return q}function i(){return{muted:a.muted(),volume:a.volume()}}function j(){o&&(a.currentTime(0),k(o),o=null)}function k(b){e.isObject(b)&&(a.volume(b.volume),a.muted(b.muted))}function l(){d.hasClass(p.el(),"vjs-hidden")||p.hide()}function m(){d.addClass(a.el(),"vjs-ad-playing")}function n(){d.removeClass(a.el(),"vjs-ad-playing")}var o,p=a.addChild("blackPoster"),q=!0;b(),a.on("play",f),a.on("vast.reset",g),a.on("vast.firstPlay",j),a.on("error",l),a.on("vast.adStart",l),a.on("vast.adsCancel",l),a.on("vast.adError",l),a.on("vast.adStart",m),a.on("vast.adEnd",n),a.on("vast.adsCancel",n)},f.removeNativePoster=function(a){var b=a.el().querySelector(".vjs-tech");b&&b.removeAttribute("poster")},f.once=function(a,b,c){function d(){c.apply(null,arguments),b.forEach(function(b){a.off(b,d)})}b.forEach(function(b){a.on(b,d)})},b.exports=f},{"./dom":42,"./utilityFunctions":47}],46:[function(a,b,c){"use strict";function d(a){var b=a;return i&&(h.setAttribute("href",b),b=h.href),h.setAttribute("href",b),{href:h.href,protocol:h.protocol?h.protocol.replace(/:$/,""):"",host:h.host,search:h.search?h.search.replace(/^\?/,""):"",hash:h.hash?h.hash.replace(/^#/,""):"",hostname:h.hostname,port:g.isNotEmptyString(h.port)?h.port:80,pathname:"/"===h.pathname.charAt(0)?h.pathname:"/"+h.pathname}}function e(a,b){var c,d;return b=g.isFunction(b)?b:function(){return!0},a=a.trim().replace(/^\?/,""),c=a.split("&"),d={},g.forEach(c,function(a){var c,e,f;""!==a&&(c=a.split("="),e=c[0],f=c[1],b(e,f)&&(d[e]=f))}),d}function f(a){var b=[];return g.forEach(a,function(a,c){b.push(c+"="+a)}),b.join("&")}var g=a("./utilityFunctions"),h=document.createElement("a"),i=document.documentMode;b.exports={urlParts:d,queryStringToObj:e,objToQueryString:f}},{"./utilityFunctions":47}],47:[function(a,b,c){"use strict";function d(){}function e(a){return null===a}function f(a){return void 0!==a}function g(a){return void 0===a}function h(a){return"object"==typeof a}function i(a){return"function"==typeof a}function j(a){return"number"==typeof a}function k(a){return O.isObject(a)&&a.window===a}function l(a){return"[object Array]"===Object.prototype.toString.call(a)}function m(a){if(null===a||O.isWindow(a)||O.isFunction(a)||O.isUndefined(a))return!1;var b=a.length;return!(a.nodeType!==K||!b)||(O.isString(a)||O.isArray(a)||0===b||"number"==typeof b&&b>0&&b-1 in a)}function n(a){return"string"==typeof a}function o(a){return O.isString(a)&&0===a.length}function p(a){return O.isString(a)&&0!==a.length}function q(a){return Array.prototype.slice.call(a)}function r(a,b,c){var d,e;if(a)if(i(a))for(d in a)"prototype"===d||"length"===d||"name"===d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(l(a)){var f="object"!=typeof a;for(d=0,e=a.length;d<e;d++)(f||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function s(a,b){return b=b||"_",a.replace(L,function(a,c){return(c?b:"")+a.toLowerCase()})}function t(a){return!!O.isString(a)&&M.test(a.trim())}function u(a){var b,c,d;for(c=1;c<arguments.length;c++){b=arguments[c];for(d in b)b.hasOwnProperty(d)&&(h(a[d])&&!e(a[d])&&h(b[d])?a[d]=u({},a[d],b[d]):a[d]=b[d])}return a}function v(a){return a.charAt(0).toUpperCase()+a.slice(1)}function w(a){return a.charAt(0).toLowerCase()+a.slice(1)}function x(a,b){var c=[];return a.forEach(function(a,d){var e=b(a,d);O.isDefined(e)&&c.push(e)}),c}function y(a,b){var c=a+"";if(b=O.isNumber(b)?b:0,a=O.isNumber(a)?a:parseInt(a,10),O.isNumber(a)&&!isNaN(a)){for(c=a+"";c.length<b;)c="0"+c;return c}return"NaN"}function z(a,b){var c=(new Date).getTime()-(b+1);return function(){var d=(new Date).getTime();d-c>=b&&(c=d,a.apply(this,arguments))}}function A(a,b){var c;return function(){c&&clearTimeout(c),c=setTimeout(function(){a.apply(this,arguments),c=void 0},b)}}function B(a,b,c){for(var d=b(a),e=0;e<d.length;e++){if(c(d[e]))return d[e];var f=B(d[e],b,c);if(f)return f}}function C(a){return function(){return a}}function D(a){return O.isNumber(a)&&(a+=""),!!O.isString(a)&&N.test(a.trim())}function E(){var a=O.getInternetExplorerVersion(navigator);return a!==-1&&a<10}function F(a){var b=-1;if("Microsoft Internet Explorer"==a.appName){var c=a.userAgent,d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),e=d.exec(c);null!==e&&(b=parseFloat(e[1]))}return b}function G(){return/iP(hone|ad)/.test(O._UA)}function H(){return/iP(hone|ad|od)|Android|Windows Phone/.test(O._UA)}function I(){return/iP(hone|od)/.test(O._UA)}function J(){return/Android/.test(O._UA)}var K=1,L=/[A-Z]/g,M=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,N=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,O={_UA:navigator.userAgent,noop:d,isNull:e,isDefined:f,isUndefined:g,isObject:h,isFunction:i,isNumber:j,isWindow:k,isArray:l,isArrayLike:m,isString:n,isEmptyString:o,isNotEmptyString:p,arrayLikeObjToArray:q,forEach:r,snake_case:s,isValidEmail:t,extend:u,capitalize:v,decapitalize:w,transformArray:x,toFixedDigits:y,throttle:z,debounce:A,treeSearch:B,echoFn:C,isISO8601:D,isOldIE:E,getInternetExplorerVersion:F,isIDevice:G,isMobile:H,isIPhone:I,isAndroid:J};b.exports=O},{}],48:[function(a,b,c){"use strict";var d=a("./utilityFunctions"),e={};e.strToXMLDoc=function(a){function b(a){var b,e=new DOMParser;try{if(b=e.parseFromString(a,"application/xml"),c(b)||d.isEmptyString(a))throw new Error}catch(f){throw new Error("xml.strToXMLDOC: Error parsing the string: '"+a+"'")}return b}function c(a){try{var b=new DOMParser,c=b.parseFromString("INVALID","text/xml"),d=c.getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===d?a.getElementsByTagName("parsererror").length>0:a.getElementsByTagNameNS(d,"parsererror").length>0}catch(e){}}if("undefined"==typeof window.DOMParser){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(a),e}return b(a)},e.parseText=function(a){return/^\s*$/.test(a)?null:/^(?:true|false)$/i.test(a)?"true"===a.toLowerCase():isFinite(a)?parseFloat(a):d.isISO8601(a)?new Date(a):a.trim()},e.JXONTree=function f(a){var b=e.parseText;if(a.documentElement)return new e.JXONTree(a.documentElement);if(a.hasChildNodes()){for(var c,g,f,h="",i=0;i<a.childNodes.length;i++)c=a.childNodes.item(i),3===(c.nodeType-1|1)?h+=3===c.nodeType?c.nodeValue.trim():c.nodeValue:1!==c.nodeType||c.prefix||(g=d.decapitalize(c.nodeName),f=new e.JXONTree(c),this.hasOwnProperty(g)?(this[g].constructor!==Array&&(this[g]=[this[g]]),this[g].push(f)):this[g]=f);h&&(this.keyValue=b(h))}var j="undefined"==typeof a.hasAttributes?a.attributes.length>0:a.hasAttributes();if(j)for(var k,l=0;l<a.attributes.length;l++)k=a.attributes.item(l),this["@"+d.decapitalize(k.name)]=b(k.value.trim())},e.JXONTree.prototype.attr=function(a){return this["@"+d.decapitalize(a)]},e.toJXONTree=function(a){var b=e.strToXMLDoc(a);return new e.JXONTree(b)},e.keyValue=function(a){if(a)return a.keyValue},e.attr=function(a,b){if(a)return a["@"+d.decapitalize(b)]},e.encode=function(a){if(d.isString(a))return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e.decode=function(a){if(d.isString(a))return a.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},b.exports=e},{"./utilityFunctions":47}],49:[function(a,b,c){"use strict";a("./plugin/components/ads-label_5"),a("./plugin/components/black-poster_5");var d=a("./plugin/videojs.vast.vpaid");videojs.plugin("vastClient",d)},{"./plugin/components/ads-label_5":36,"./plugin/components/black-poster_5":38,"./plugin/videojs.vast.vpaid":39}]},{},[49]),function(a){!function(){var a=!1;!function(b,c){if("object"==typeof exports&&"object"==typeof module)module.exports=c(require("video.js"));else if("function"==typeof a&&a.amd)a(["video.js"],c);else{var d=c("object"==typeof exports?require("video.js"):b.videojs);for(var e in d)("object"==typeof exports?exports:b)[e]=d[e]}}("undefined"!=typeof self?self:this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=2)}([function(a,b,c){!function(){!function(b,c){a.exports=c()}(0,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=16)}([function(a,b,c){(function(b){var c;c="undefined"!=typeof window?window:void 0!==b?b:"undefined"!=typeof self?self:{},a.exports=c}).call(b,c(6))},function(a,b){function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function e(a,b){var c=H(a)||n(a)?d(a.length,String):[],e=c.length,f=!!e;for(var g in a)!b&&!B.call(a,g)||f&&("length"==g||j(g,e))||c.push(g);return c}function f(a,b,c){var d=a[b];B.call(a,b)&&m(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function g(a){if(!l(a))return E(a);var b=[];for(var c in Object(a))B.call(a,c)&&"constructor"!=c&&b.push(c);return b}function h(a,b){return b=F(void 0===b?a.length-1:b,0),function(){for(var d=arguments,e=-1,f=F(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(var h=Array(b+1);++e<b;)h[e]=d[e];return h[b]=g,c(a,this,h)}}function i(a,b,c,d){c||(c={});for(var e=-1,g=b.length;++e<g;){var h=b[e],i=d?d(c[h],a[h],h,c,a):void 0;f(c,h,void 0===i?a[h]:i)}return c}function j(a,b){return!!(b=null==b?v:b)&&("number"==typeof a||z.test(a))&&a>-1&&a%1==0&&a<b}function k(a,b,c){if(!s(c))return!1;var d=typeof b;return!!("number"==d?o(c)&&j(b,c.length):"string"==d&&b in c)&&m(c[b],a)}function l(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||A)}function m(a,b){return a===b||a!==a&&b!==b}function n(a){return p(a)&&B.call(a,"callee")&&(!D.call(a,"callee")||C.call(a)==w)}function o(a){return null!=a&&r(a.length)&&!q(a)}function p(a){return t(a)&&o(a)}function q(a){var b=s(a)?C.call(a):"";return b==x||b==y}function r(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=v}function s(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function t(a){return!!a&&"object"==typeof a}function u(a){return o(a)?e(a):g(a)}var v=9007199254740991,w="[object Arguments]",x="[object Function]",y="[object GeneratorFunction]",z=/^(?:0|[1-9]\d*)$/,A=Object.prototype,B=A.hasOwnProperty,C=A.toString,D=A.propertyIsEnumerable,E=function(a,b){return function(c){return a(b(c))}}(Object.keys,Object),F=Math.max,G=!D.call({valueOf:1},"valueOf"),H=Array.isArray,I=function(a){return h(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&k(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h)}return b})}(function(a,b){if(G||l(b)||o(b))return void i(b,u(b),a);for(var c in b)B.call(b,c)&&f(a,c,b[c])});a.exports=I},function(a,b,c){"use strict";function d(a,b,c){c=void 0===c?1:c,a[b]=a[b]||0,a[b]+=c}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={};f.now=function(){var a=e["default"].performance,b=a&&a.timing;return b&&"number"==typeof b.navigationStart&&"function"==typeof a.now?b.navigationStart+a.now():Date.now()},b["default"]=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(18),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=e["default"].methodFactory;e["default"].methodFactory=function(a,b,c){var d=f(a,b,c);return function(){for(var a=["[mux]"],b=0;b<arguments.length;b++)a.push(arguments[b]);d.apply(void 0,a)}},e["default"].setLevel(e["default"].getLevel()),b["default"]=e["default"]},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(a){return f(a)[0]},e=function(a){return f(a)[1]},f=function(a){if("string"!=typeof a||""===a)return["localhost"];var b=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,c=a.match(b)||[],d=c[4],e=void 0;return d&&(e=(d.match(/[^\.]+\.[^\.]+$/)||[])[0]),[d,e]};b.extractHostnameAndDomain=f,b.extractHostname=d,b.extractDomain=e},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})},e=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)};b.generateUUID=d,b.generateShortID=e},function(a,b,c){"use strict";function d(a){a=a||"";var b={};return a.trim().split(/[\r\n]+/).forEach(function(a){if(a){var c=a.split(": "),d=c.shift();d&&e.indexOf(d.toLowerCase())>=0&&(b[d]=c.join(": "))}}),b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=["x-cdn","content-type"]},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.findMediaElement=b.getMuxPlayerId=void 0;var d=c(7),e=function(a){return a&&void 0!==a.nodeName?(a.muxId||(a.muxId=a.id||(0,d.generateShortID)()),a.muxId):a},f=function(a){var b=void 0;return a&&void 0!==a.nodeName?(b=a,a=e(b)):b=document.querySelector(a),[b,a,b&&b.nodeName?b.nodeName.toLowerCase():""]};b.getMuxPlayerId=e,b.findMediaElement=f},function(a,b,c){"use strict";function d(){return"1"===(f["default"].doNotTrack||f["default"].navigator&&(f["default"].navigator.doNotTrack||f["default"].navigator.msDoNotTrack))}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(0),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={};f.exists=function(){var a=e["default"].performance;return void 0!==(a&&a.timing)},f.domContentLoadedEventEnd=function(){var a=e["default"].performance,b=a&&a.timing;return b&&b.domContentLoadedEventEnd},f.navigationStart=function(){var a=e["default"].performance,b=a&&a.timing;return b&&b.navigationStart},b["default"]=f},function(a,b,c){"use strict";var d=c(42),e=c(43),f=c(14);a.exports={formats:f,parse:e,stringify:d}},function(a,b,c){"use strict";var d=Object.prototype.hasOwnProperty,e=function(){for(var a=[],b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a}(),f=function(a){for(var b;a.length;){var c=a.pop();if(b=c.obj[c.prop],Array.isArray(b)){for(var d=[],e=0;e<b.length;++e)void 0!==b[e]&&d.push(b[e]);c.obj[c.prop]=d}}return b};b.arrayToObject=function(a,b){for(var c=b&&b.plainObjects?Object.create(null):{},d=0;d<a.length;++d)void 0!==a[d]&&(c[d]=a[d]);return c},b.merge=function(a,c,e){if(!c)return a;if("object"!=typeof c){if(Array.isArray(a))a.push(c);else{if("object"!=typeof a)return[a,c];(e.plainObjects||e.allowPrototypes||!d.call(Object.prototype,c))&&(a[c]=!0)}return a}if("object"!=typeof a)return[a].concat(c);var f=a;return Array.isArray(a)&&!Array.isArray(c)&&(f=b.arrayToObject(a,e)),Array.isArray(a)&&Array.isArray(c)?(c.forEach(function(c,f){d.call(a,f)?a[f]&&"object"==typeof a[f]?a[f]=b.merge(a[f],c,e):a.push(c):a[f]=c}),a):Object.keys(c).reduce(function(a,f){var g=c[f];return d.call(a,f)?a[f]=b.merge(a[f],g,e):a[f]=g,a},f)},b.assign=function(a,b){return Object.keys(b).reduce(function(a,c){return a[c]=b[c],a},a)},b.decode=function(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}},b.encode=function(a){if(0===a.length)return a;for(var b="string"==typeof a?a:String(a),c="",d=0;d<b.length;++d){var f=b.charCodeAt(d);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122?c+=b.charAt(d):f<128?c+=e[f]:f<2048?c+=e[192|f>>6]+e[128|63&f]:f<55296||f>=57344?c+=e[224|f>>12]+e[128|f>>6&63]+e[128|63&f]:(d+=1,f=65536+((1023&f)<<10|1023&b.charCodeAt(d)),c+=e[240|f>>18]+e[128|f>>12&63]+e[128|f>>6&63]+e[128|63&f])}return c},b.compact=function(a){for(var b=[{obj:{o:a},prop:"o"}],c=[],d=0;d<b.length;++d)for(var e=b[d],g=e.obj[e.prop],h=Object.keys(g),i=0;i<h.length;++i){var j=h[i],k=g[j];"object"==typeof k&&null!==k&&-1===c.indexOf(k)&&(b.push({obj:g,prop:j}),c.push(k))}return f(b)},b.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},b.isBuffer=function(a){return null!==a&&void 0!==a&&!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))}},function(a,b,c){"use strict";var d=String.prototype.replace,e=/%20/g;a.exports={"default":"RFC3986",formatters:{RFC1738:function(a){return d.call(a,e,"+")},RFC3986:function(a){return a}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function f(a){var b={},c={};return Object.keys(a).forEach(function(d){var e=!1;if(a.hasOwnProperty(d)&&void 0!==a[d]){var f=d.split("_"),g=f[0],i=l[g];i||(h["default"].info("Data key word `"+f[0]+"` not expected in "+d),i=g+"_"),f.splice(1).forEach(function(a){"url"===a&&(e=!0),n[a]?i+=n[a]:(h["default"].info("Data key word `"+a+"` not expected in "+d),i+="_"+a+"_")}),e?c[i]=a[d]:b[i]=a[d]}}),(0,j["default"])(b,c)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f;var g=c(4),h=d(g),i=c(1),j=d(i),k={a:"env",b:"beacon",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},l=e(k),m={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",dg:"downscaling",dm:"domain",dn:"cdn","do":"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init","in":"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},n=e(m)},function(a,b,c){"use strict";a.exports=c(17)["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=c(0),g=d(f),h=c(9),i=c(4),j=d(i),k=c(10),l=d(k),m=c(3),n=d(m),o=c(19),p=d(o),q=c(50),r=d(q),s=c(51),t=d(s),u={},v=function w(a){var b=arguments;"string"==typeof a?w.hasOwnProperty(a)?g["default"].setTimeout(function(){b=Array.prototype.splice.call(b,1),w[a].apply(null,b)},0):j["default"].warn("`"+a+"` is an unknown task"):"function"==typeof a?g["default"].setTimeout(function(){a(w)},0):j["default"].warn("`"+a+"` is invalid.")};v.loaded=n["default"].now(),v.NAME="mux-embed",v.VERSION="4.0.0",v.API_VERSION="2.1",v.PLAYER_TRACKED=!1,v.monitor=function(a,b){return(0,r["default"])(v,a,b)},v.destroyMonitor=function(a){var b=(0,h.findMediaElement)(a),c=e(b,1),d=c[0];d&&d.mux&&"function"==typeof d.mux.destroy?d.mux.destroy():j["default"].error("A video element monitor for `"+a+"` has not been initialized via `mux.monitor`.")},v.addHLSJS=function(a,b){var c=(0,h.getMuxPlayerId)(a);u[c]?u[c].addHLSJS(b):j["default"].error("A monitor for `"+c+"` has not been initialized.")},v.addDashJS=function(a,b){var c=(0,h.getMuxPlayerId)(a);u[c]?u[c].addDashJS(b):j["default"].error("A monitor for `"+c+"` has not been initialized.")},v.removeHLSJS=function(a){var b=(0,h.getMuxPlayerId)(a);u[b]?u[b].removeHLSJS():j["default"].error("A monitor for `"+b+"` has not been initialized.")},v.removeDashJS=function(a){var b=(0,h.getMuxPlayerId)(a);u[b]?u[b].removeDashJS():j["default"].error("A monitor for `"+b+"` has not been initialized.")},v.init=function(a,b){(0,l["default"])()&&b&&b.respectDoNotTrack&&j["default"].info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var c=(0,h.getMuxPlayerId)(a);u[c]=new p["default"](v,c,b)},v.emit=function(a,b,c){var d=(0,h.getMuxPlayerId)(a);u[d]?(u[d].emit(b,c),"destroy"===b&&delete u[d]):j["default"].error("A monitor for `"+d+"` has not been initialized.")},void 0!==g["default"]&&"function"==typeof g["default"].addEventListener&&g["default"].addEventListener("unload",function(){v.WINDOW_UNLOADING=!0},!1),v.checkDoNotTrack=l["default"],v.log=j["default"],v.utils=t["default"],b["default"]=v},function(a,b,c){var d,e;!function(f,g){"use strict";d=g,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e)}(0,function(){"use strict";function a(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(b){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function b(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(c){return"debug"===c&&(c="log"),typeof console!==i&&("trace"===c&&j?b:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,"log"):h)}function d(a,b){for(var c=0;c<k.length;c++){var d=k[c];this[d]=c<a?h:this.methodFactory(d,a,b)}this.log=this.debug}function e(a,b,c){return function(){typeof console!==i&&(d.call(this,b,c),this[a].apply(this,arguments))}}function f(a,b,d){return c(a)||e.apply(this,arguments)}function g(a,b,c){function e(a){var b=(k[a]||"silent").toUpperCase();if(typeof window!==i&&l){try{return void(window.localStorage[l]=b)}catch(a){}try{window.document.cookie=encodeURIComponent(l)+"="+b+";"}catch(a){}}}function g(){var a;if(typeof window!==i&&l){try{a=window.localStorage[l]}catch(a){}if(typeof a===i)try{var b=window.document.cookie,c=b.indexOf(encodeURIComponent(l)+"=");-1!==c&&(a=/^([^;]+)/.exec(b.slice(c))[1])}catch(a){}return void 0===j.levels[a]&&(a=void 0),a}}var h,j=this,l="loglevel";"string"==typeof a?l+=":"+a:"symbol"==typeof a&&(l=void 0),j.name=a,j.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},j.methodFactory=c||f,j.getLevel=function(){return h},j.setLevel=function(b,c){if("string"==typeof b&&void 0!==j.levels[b.toUpperCase()]&&(b=j.levels[b.toUpperCase()]),!("number"==typeof b&&b>=0&&b<=j.levels.SILENT))throw"log.setLevel() called with invalid level: "+b;if(h=b,!1!==c&&e(b),d.call(j,b,a),typeof console===i&&b<j.levels.SILENT)return"No console available for logging"},j.setDefaultLevel=function(a){g()||j.setLevel(a,!1)},j.enableAll=function(a){j.setLevel(j.levels.TRACE,a)},j.disableAll=function(a){j.setLevel(j.levels.SILENT,a)};var m=g();null==m&&(m=null==b?"WARN":b),j.setLevel(m,!1)}var h=function(){},i="undefined",j=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"],l=new g,m={};l.getLogger=function(a){if("symbol"!=typeof a&&"string"!=typeof a||""===a)throw new TypeError("You must supply a name when creating a logger.");var b=m[a];return b||(b=m[a]=new g(a,l.getLevel(),l.methodFactory)),b};var n=typeof window!==i?window.log:void 0;return l.noConflict=function(){return typeof window!==i&&window.log===l&&(window.log=n),l},l.getLoggers=function(){return m},l["default"]=l,l})},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=c(4),g=d(f),h=c(1),i=d(h),j=c(7),k=c(5),l=c(0),m=d(l),n=c(11),o=d(n),p=c(2),q=d(p),r=c(20),s=d(r),t=c(25),u=c(26),v=c(27),w=d(v),x=c(28),y=d(x),z=c(29),A=d(z),B=c(30),C=d(B),D=c(31),E=d(D),F=c(32),G=d(F),H=c(33),I=d(H),J=c(34),K=d(J),L=c(35),M=d(L),N=c(36),O=d(N),P=c(37),Q=d(P),R=c(38),S=d(R),T=c(39),U=d(T),V=c(40),W=d(V),X=c(49),Y=d(X),Z=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],$=function(a,b,c){var d=this;this.DOM_CONTENT_LOADED_EVENT_END=o["default"].domContentLoadedEventEnd(),this.NAVIGATION_START=o["default"].navigationStart();var e={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,errorTranslator:function(a){return a}};this.mux=a,this.id=b,c=(0,i["default"])(e,c),c.data=c.data||{},c.data.property_key&&(c.data.env_key=c.data.property_key,delete c.data.property_key),g["default"].setLevel(c.debug?"debug":"warn"),this.getPlayheadTime=c.getPlayheadTime,this.getStateData=c.getStateData||function(){},this.getAdData=c.getAdData||function(){},this.minimumRebufferDuration=c.minimumRebufferDuration,this.sustainedRebufferThreshold=c.sustainedRebufferThreshold,this.playbackHeartbeatTime=c.playbackHeartbeatTime,this.disableRebufferTracking=c.disableRebufferTracking,this.disableRebufferTracking&&this.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),this.errorTranslator=c.errorTranslator,this.playbackEventDispatcher=new W["default"](a,c.data.env_key,c),this.data={player_instance_id:(0,j.generateUUID)(),mux_sample_rate:c.sampleRate,beacon_domain:c.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(a,b){b=(0,i["default"])({viewer_time:this.mux.utils.now()},b),this.oldEmit(a,b)};var f=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(this);this.on("viewinit",function(a,b){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,i["default"])(this.data,b),this._initializeViewData(),this.one("play",f),this.one("adbreakstart",f)});var h=function(a){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",a)}.bind(this);this.on("videochange",function(a,b){h(b)}),this.on("programchange",function(a,b){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),h((0,i["default"])(b,{view_program_changed:!0})),f()}),this.on("destroy",this.destroy);var k=this.destroy.bind(this);void 0!==m["default"]&&"function"==typeof m["default"].addEventListener&&m["default"].addEventListener("unload",k,!1),this.on("destroy",function(){void 0!==m["default"]&&"function"==typeof m["default"].removeEventListener&&m["default"].removeEventListener("unload",k)}),this.on("playerready",function(a,b){(0,i["default"])(this.data,b)}),Z.forEach(function(a){
d.on(a,function(b,c){0!==a.indexOf("ad")&&this._updateStateData(),(0,i["default"])(this.data,c),this._sanitizeData()}),d.on("after"+a,function(){("error"!==a||this.viewErrored)&&this.send(a)})}),this.on("viewend",function(a,b){(0,i["default"])(d.data,b)});var l=function(a){var b=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=b-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};this.one("playerready",l),A["default"].apply(this),U["default"].apply(this),O["default"].apply(this),G["default"].apply(this),y["default"].apply(this),M["default"].apply(this),C["default"].apply(this),E["default"].apply(this),Q["default"].apply(this),I["default"].apply(this),K["default"].apply(this),S["default"].apply(this),Y["default"].apply(this),c.hlsjs&&this.addHLSJS(c),c.dashjs&&this.addDashJS(c),this.emit("viewinit",c.data)};(0,i["default"])($.prototype,w["default"].prototype),(0,i["default"])($.prototype,G["default"].prototype),(0,i["default"])($.prototype,O["default"].prototype),(0,i["default"])($.prototype,y["default"].prototype),(0,i["default"])($.prototype,C["default"].prototype),(0,i["default"])($.prototype,E["default"].prototype),(0,i["default"])($.prototype,Q["default"].prototype),(0,i["default"])($.prototype,I["default"].prototype),(0,i["default"])($.prototype,K["default"].prototype),$.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),m["default"].clearTimeout(this._heartBeatTimeout))},$.prototype.send=function(a){var b=(0,i["default"])({},this.data);if(1===b.player_error_code&&(delete b.player_error_code,delete b.player_error_message),b.player_source_duration===1/0||b.video_source_duration===1/0?b.video_source_is_live=!0:(b.player_source_duration>0||b.video_source_duration>0)&&(b.video_source_is_live=!1),b.video_source_url=b.video_source_url||b.player_source_url,b.video_source_url){var c=(0,k.extractHostnameAndDomain)(b.video_source_url),d=e(c,2),f=d[0],g=d[1];b.video_source_domain=g,b.video_source_hostname=f}delete b.ad_request_id,this.playbackEventDispatcher.send(a,b),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},$.prototype._updateStateData=function(){(0,i["default"])(this.data,this.getStateData()),this.getPlayheadTime&&(this.data.player_playhead_time=this.getPlayheadTime()),this._sanitizeData()},$.prototype._sanitizeData=function(){var a=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(b){var c=parseInt(a.data[b],10);a.data[b]=isNaN(c)?void 0:c}),["player_source_url","video_source_url"].forEach(function(b){if(a.data[b]){var c=a.data[b].toLowerCase();0!==c.indexOf("data:")&&0!==c.indexOf("blob:")||(a.data[b]="MSE style URL")}})},$.prototype._resetVideoData=function(a,b){var c=this;Object.keys(this.data).forEach(function(a){0===a.indexOf("video_")&&delete c.data[a]})},$.prototype._resetViewData=function(){var a=this;Object.keys(this.data).forEach(function(b){0===b.indexOf("view_")&&delete a.data[b]}),this.data.view_sequence_number=1},$.prototype._resetErrorData=function(a,b){delete this.data.player_error_code,delete this.data.player_error_message},$.prototype._initializeViewData=function(){var a=this,b=this.data.view_id=(0,j.generateUUID)();this.data.video_id||(this.data.video_id=(0,s["default"])(this.data.player_source_url));var c=function(){b===a.data.view_id&&(0,q["default"])(a.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",c):c()},$.prototype._restartHeartBeat=function(){var a=this;m["default"].clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=m["default"].setTimeout(function(){a.data.player_is_paused||a.emit("hb")},1e4))},$.prototype.addHLSJS=function(a){return a.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=a.hlsjs,void(0,t.monitorHlsJs)(this.mux,this.id,a.hlsjs,{},a.Hls||m["default"].Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},$.prototype.removeHLSJS=function(){this.hlsjs&&((0,t.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},$.prototype.addDashJS=function(a){return a.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=a.dashjs,void(0,u.monitorDashJS)(this.mux,this.id,a.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},$.prototype.removeDashJS=function(){this.dashjs&&((0,u.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},b["default"]=$},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=g["default"].createElement("a");b.href=a;var c=b.pathname.replace(/\.[^\/.]+$/,"");return i["default"].encode(b.host+c).split("=")[0]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(21),g=d(f),h=c(23),i=d(h)},function(a,b,c){(function(b){var d,e=void 0!==b?b:"undefined"!=typeof window?window:{},f=c(22);"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"])||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f),a.exports=d}).call(b,c(6))},function(a,b){},function(a,b,c){(function(a,d){var e;!function(d){var f=("object"==typeof a&&a&&a.exports,function(a){this.message=a});f.prototype=new Error,f.prototype.name="InvalidCharacterError";var g=function(a){throw new f(a)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=/[\t\n\f\r ]/g,j=function(a){a=String(a).replace(i,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9\/]/.test(a))&&g("Invalid character: the string to be decoded is not correctly encoded.");for(var c,d,e=0,f="",j=-1;++j<b;)d=h.indexOf(a.charAt(j)),c=e%4?64*c+d:d,e++%4&&(f+=String.fromCharCode(255&c>>(-2*e&6)));return f},k=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&g("The string to be encoded contains characters outside of the Latin1 range.");for(var b,c,d,e,f=a.length%3,i="",j=-1,k=a.length-f;++j<k;)b=a.charCodeAt(j)<<16,c=a.charCodeAt(++j)<<8,d=a.charCodeAt(++j),e=b+c+d,i+=h.charAt(e>>18&63)+h.charAt(e>>12&63)+h.charAt(e>>6&63)+h.charAt(63&e);return 2==f?(b=a.charCodeAt(j)<<8,c=a.charCodeAt(++j),e=b+c,i+=h.charAt(e>>10)+h.charAt(e>>4&63)+h.charAt(e<<2&63)+"="):1==f&&(e=a.charCodeAt(j),i+=h.charAt(e>>2)+h.charAt(e<<4&63)+"=="),i},l={encode:k,decode:j,version:"0.1.0"};void 0!==(e=function(){return l}.call(b,c,b,a))&&(a.exports=e)}()}).call(b,c(24)(a),c(6))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.stopMonitoringHlsJs=b.monitorHlsJs=void 0;var e=c(8),f=d(e),g=c(11),h=d(g),i=c(5),j=function(a){if(!a)return{};var b=h["default"].navigationStart();return{bytesLoaded:a.total,requestStart:Math.round(b+a.trequest),responseStart:Math.round(b+a.tfirst),responseEnd:Math.round(b+a.tload)}},k=function(a){if(a&&"function"==typeof a.getAllResponseHeaders)return(0,f["default"])(a.getAllResponseHeaders())},l=function(a,b,c){var d=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]),e=a.log;if(!h["default"].exists())return void e.warn("performance timing not supported. Not tracking HLS.js.");var f=function(c,d){return a.emit(b,c,d)},g=function(a,b){var c=b.levels,d=b.audioTracks,e=b.url,g=b.stats,h=b.networkDetails,l={},m={};c.forEach(function(a,b){l[b]={width:a.width,height:a.height,bitrate:a.bitrate,attrs:a.attrs}}),d.forEach(function(a,b){m[b]={name:a.name,language:a.lang,bitrate:a.bitrate}});var n=j(g),o=n.bytesLoaded,p=n.requestStart,q=n.responseStart,r=n.responseEnd;f("requestcompleted",{request_event_type:a,request_bytes_loaded:o,request_start:p,request_response_start:q,request_response_end:r,request_type:"manifest",request_hostname:(0,i.extractHostname)(e),request_response_headers:k(h),request_rendition_lists:{media:l,audio:m,video:{}}})};c.on(d.Events.MANIFEST_LOADED,g);var l=function(a,b){var c=b.details,d=b.level,e=b.networkDetails,g=b.stats,h=j(g),l=h.bytesLoaded,m=h.requestStart,n=h.responseStart,o=h.responseEnd;f("requestcompleted",{request_event_type:a,request_bytes_loaded:l,request_start:m,request_response_start:n,request_response_end:o,request_current_level:d,request_type:"manifest",request_hostname:(0,i.extractHostname)(c.url),request_response_headers:k(e)})};c.on(d.Events.LEVEL_LOADED,l);var m=function(a,b){var c=b.details,d=b.networkDetails,e=b.stats,g=j(e),h=g.bytesLoaded,l=g.requestStart,m=g.responseStart,n=g.responseEnd;f("requestcompleted",{request_event_type:a,request_bytes_loaded:h,request_start:l,request_response_start:m,request_response_end:n,request_type:"manifest",request_hostname:(0,i.extractHostname)(c.url),request_response_headers:k(d)})};c.on(d.Events.AUDIO_TRACK_LOADED,m);var n=function(a,b){var d=b.stats,e=b.networkDetails,g=b.frag,h=j(d),l=h.bytesLoaded,m=h.requestStart,n=h.responseStart,o=h.responseEnd,p={request_event_type:a,request_bytes_loaded:l,request_start:m,request_response_start:n,request_response_end:o,request_hostname:e?(0,i.extractHostname)(e.responseURL):void 0,request_response_headers:k(e),request_media_duration:g.duration};"main"===g.type?(p.request_type="media",p.request_current_level=g.level,p.request_video_width=(c.levels[g.level]||{}).width,p.request_video_height=(c.levels[g.level]||{}).height):p.request_type=g.type,f("requestcompleted",p)};c.on(d.Events.FRAG_LOADED,n);var o=function(a,b){var c=b.details,e=b.response,g=b.context,h=b.frag;if(c===d.ErrorDetails.MANIFEST_LOAD_ERROR||c===d.ErrorDetails.MANIFEST_LOAD_TIMEOUT||c===d.ErrorDetails.FRAG_LOAD_ERROR||c===d.ErrorDetails.FRAG_LOAD_TIMEOUT||c===d.ErrorDetails.LEVEL_LOAD_ERROR||c===d.ErrorDetails.LEVEL_LOAD_TIMEOUT){var j=h&&h.url||g&&g.url||"";f("requestfailed",{request_error:c,request_url:j,request_hostname:(0,i.extractHostname)(j),request_type:c===d.ErrorDetails.FRAG_LOAD_ERROR||c===d.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:e&&e.code,request_error_text:e&&e.text})}};c.on(d.Events.ERROR,o);var p=function(a,b){var c=b.frag,d=c&&c._url||"";f("requestcanceled",{request_cancel:a,request_url:d,request_type:"media",request_hostname:(0,i.extractHostname)(d)})};c.on(d.Events.FRAG_LOAD_EMERGENCY_ABORTED,p);var q=function(a,b){var d=b.level,g=c.levels.find(function(a){return a.level===d});if(g&&g.attrs&&g.attrs.BANDWIDTH){var h=g.attrs.BANDWIDTH;h?f("renditionchange",{video_source_bitrate:h,video_source_width:g.width,video_source_height:g.height}):e.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};c.on(d.Events.LEVEL_SWITCHED,q),c._stopMuxMonitor=function(){c.off(d.Events.MANIFEST_LOADED,g),c.off(d.Events.LEVEL_LOADED,l),c.off(d.Events.AUDIO_TRACK_LOADED,m),c.off(d.Events.FRAG_LOADED,n),c.off(d.Events.ERROR,o),c.off(d.Events.FRAG_LOAD_EMERGENCY_ABORTED,p),c.off(d.Events.LEVEL_SWITCHED,q),c.off(d.Events.DESTROYING,c._stopMuxMonitor),delete c._stopMuxMonitor},c.on(d.Events.DESTROYING,c._stopMuxMonitor)},m=function(a){a&&"function"==typeof a._stopMuxMonitor&&a._stopMuxMonitor()};b.monitorHlsJs=l,b.stopMonitoringHlsJs=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.stopMonitoringDashJS=b.monitorDashJS=void 0;var e=c(0),f=d(e),g=c(8),h=d(g),i=c(5),j=function(a,b){if(!a||"function"!=typeof a.getRequests)return{};var c=a.getRequests({state:"executed"});if(0===c.length)return{};var d=c[c.length-1],e=(0,i.extractHostname)(d.url),f=d.bytesLoaded,g=new Date(d.requestStartDate).getTime(),j=new Date(d.firstByteDate).getTime(),k=new Date(d.requestEndDate).getTime(),l=isNaN(d.duration)?0:d.duration,m="function"==typeof b.getMetricsFor?b.getMetricsFor(d.mediaType).HttpList:b.getDashMetrics().getHttpRequests(d.mediaType),n=void 0;return m.length>0&&(n=(0,h["default"])(m[m.length-1]._responseHeaders||"")),{requestStart:g,requestResponseStart:j,requestResponseEnd:k,requestBytesLoaded:f,requestResponseHeaders:n,requestMediaDuration:l,requestHostname:e}},k=function(a,b){var c=b.getQualityFor(a),d=b.getCurrentTrackFor(a),e=d.bitrateList;return e?{currentLevel:c,renditionWidth:e[c].width||null,renditionHeight:e[c].height||null,renditionBitrate:e[c].bandwidth}:{}},l=function(a,b,c){var d=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],a.log);if(!c||!c.on)return void d.warn("Invalid dash.js player reference. Monitoring blocked.");var e=function(c,d){return a.emit(b,c,d)},g=function(a){var b=a.type,c=a.data,d=c||{},f=d.url;e("requestcompleted",{request_event_type:b,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,i.extractHostname)(f)})};c.on("manifestLoaded",g);var h={},l=function(a){var b=a.type,d=a.fragmentModel,f=a.chunk,g=f||{},i=g.mediaInfo,k=i||{},l=k.type,m=k.bitrateList;m=m||[];var n={};m.forEach(function(a,b){n[b]={},n[b].width=a.width,n[b].height=a.height,n[b].bitrate=a.bandwidth,n[b].attrs={}}),"video"===l?h.video=n:"audio"===l?h.audio=n:h.media=n;var o=j(d,c),p=o.requestStart,q=o.requestResponseStart,r=o.requestResponseEnd,s=o.requestResponseHeaders,t=o.requestMediaDuration,u=o.requestHostname;e("requestcompleted",{request_event_type:b,request_start:p,request_response_start:q,request_response_end:r,request_bytes_loaded:-1,request_type:l+"_init",request_response_headers:s,request_hostname:u,request_media_duration:t,request_rendition_lists:h})};c.on("initFragmentLoaded",l);var m=function(a){var b=a.type,d=a.fragmentModel,f=a.chunk,g=f||{},h=g.mediaInfo,i=g.start,l=h||{},m=l.type,n=j(d,c),o=n.requestStart,p=n.requestResponseStart,q=n.requestResponseEnd,r=n.requestBytesLoaded,s=n.requestResponseHeaders,t=n.requestMediaDuration,u=n.requestHostname,v=k(m,c),w=v.currentLevel,x=v.renditionWidth,y=v.renditionHeight,z=v.renditionBitrate;e("requestcompleted",{request_event_type:b,request_start:o,request_response_start:p,request_response_end:q,request_bytes_loaded:r,request_type:m,request_response_headers:s,request_hostname:u,request_media_start_time:i,request_media_duration:t,request_current_level:w,request_labeled_bitrate:z,request_video_width:x,request_video_height:y})};c.on("mediaFragmentLoaded",m);var n={video:void 0,audio:void 0,totalBitrate:void 0},o=function(){if(n.video&&"number"==typeof n.video.bitrate){if(!n.video.width||!n.video.height)return void d.warn("have bitrate info for video but missing width/height");var a=n.video.bitrate;return n.audio&&"number"==typeof n.audio.bitrate&&(a+=n.audio.bitrate),a!==n.totalBitrate?(n.totalBitrate=a,{video_source_bitrate:a,video_source_height:n.video.height,video_source_width:n.video.width}):void 0}},p=function(a,b,f){if("number"!=typeof a.newQuality)return void d.warn("missing evt.newQuality in qualityChangeRendered event",a);var g=a.mediaType;if("audio"===g||"video"===g){var h=c.getBitrateInfoListFor(g).find(function(b){return b.qualityIndex===a.newQuality});if(!h||"number"!=typeof h.bitrate)return void d.warn("missing bitrate info for "+g);n[g]=h;var i=o();i&&e("renditionchange",i)}};c.on("qualityChangeRendered",p);var q=function(a){var b=a.error,c=a.event;c=c||{};var d=c.request||{},g=f["default"].event&&f["default"].event.currentTarget||{};e("requestfailed",{request_error:b+"_"+c.id+"_"+d.type,request_url:c.url,request_hostname:(0,i.extractHostname)(c.url),request_type:d.mediaType,request_error_code:g.status,request_error_type:g.statusText})};c.on("error",q),c._stopMuxMonitor=function(){c.off("manifestLoaded",g),c.off("initFragmentLoaded",l),c.off("mediaFragmentLoaded",m),c.off("qualityChangeRendered",p),c.off("error",q),delete c._stopMuxMonitor}},m=function(a){a&&"function"==typeof a._stopMuxMonitor&&a._stopMuxMonitor()};b.monitorDashJS=l,b.stopMonitoringDashJS=m},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){},e=0;d.prototype.on=function(a,b,c){return b._eventEmitterGuid=b._eventEmitterGuid||++e,this._listeners=this._listeners||{},this._listeners[a]=this._listeners[a]||[],c&&(b=b.bind(c)),this._listeners[a].push(b),b},d.prototype.off=function(a,b){var c=this._listeners&&this._listeners[a];c&&c.forEach(function(a,d){a._eventEmitterGuid===b._eventEmitterGuid&&c.splice(d,1)})},d.prototype.one=function(a,b,c){var d=this;b._eventEmitterGuid=b._eventEmitterGuid||++e;var f=function g(){d.off(a,g),b.apply(c||this,arguments)};f._eventEmitterGuid=b._eventEmitterGuid,this.on(a,f)},d.prototype.emit=function(a,b){var c=this;if(this._listeners){b=b||{};var d=this._listeners["before*"]||[],e=this._listeners[a]||[],f=this._listeners["after"+a]||[],g=function(b,d){b=b.slice(),b.forEach(function(b){b.call(c,{type:a},d)})};g(d,b),g(e,b),g(f,b)}},b["default"]=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",function(){this._playheadShouldBeProgressing=!0}),this.on("play",this._startPlaybackHeartbeatInterval),this.on("playing",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("adplaying",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("viewstart",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("aderror",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adended",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",function(){this.data.player_is_paused?this._stopPlaybackHeartbeatInterval():this._startPlaybackHeartbeatInterval()}),this.on("timeupdate",function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")}),this.on("devicesleep",function(a,b){null!==this._playbackHeartbeatInterval&&(e["default"].clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:b.viewer_time}),this._playbackHeartbeatInterval=null)})};f.prototype._startPlaybackHeartbeatInterval=function(){var a=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=e["default"].setInterval(function(){a.emit("playbackheartbeat")},this.playbackHeartbeatTime))},f.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(e["default"].clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},b["default"]=f},function(a,b,c){"use strict";function d(){var a=this;this.on("viewinit",function(){a.viewErrored=!1}),this.on("error",function(){try{var b=a.errorTranslator({player_error_code:a.data.player_error_code,player_error_message:a.data.player_error_message});b?(a.data.player_error_code=b.player_error_code,a.data.player_error_message=b.player_error_message,a.viewErrored=!0):(delete a.data.player_error_code,delete a.data.player_error_message)}catch(b){a.mux.log.warn("Exception in error translator callback.",b),a.viewErrored=!0}})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};f.prototype._updateWatchTime=function(a,b){var c=b.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=c),(0,e["default"])(this.data,"view_watch_time",c-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=c},f.prototype._clearWatchTimeState=function(a,b){this._updateWatchTime(a,b),this._watchTimeTrackerLastCheckedTime=null},b["default"]=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};f.prototype._updatePlaybackTime=function(){var a=this.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&a>this._playbackTimeTrackerLastPlayheadPosition){var b=a-this._playbackTimeTrackerLastPlayheadPosition;b<=1e3&&(0,e["default"])(this.data,"view_content_playback_time",b)}this._playbackTimeTrackerLastPlayheadPosition=a},f.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},b["default"]=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",function(){this.off("timeupdate",this._updatePlayheadTime)})};d.prototype._updateMaxPlayheadPosition=function(){this.data.view_max_playhead_position=void 0===this.data.view_max_playhead_position?this.data.player_playhead_time:Math.max(this.data.view_max_playhead_position,this.data.player_playhead_time)},d.prototype._updatePlayheadTime=function(a,b){if(b.player_playhead_time)this.data.player_playhead_time=b.player_playhead_time,this._updateMaxPlayheadPosition();else if(this.getPlayheadTime){var c=this.getPlayheadTime();void 0!==c&&(this.data.player_playhead_time=c,this._updateMaxPlayheadPosition())}},b["default"]=d},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(3),f=d(e),g=c(2),h=d(g),i=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",function(){this._cleanupRebufferTracker(null,{viewer_time:f["default"].now()})})};i.prototype._checkIfRebuffering=function(a,b){if(!this.disableRebufferTracking){if(this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing)return void this._cleanupRebufferTracker(a,b);if(null===this._lastCheckedTime)return this._prepareRebufferTrackerState(b.viewer_time),void this._updateRebufferMetrics();if(this._lastPlayheadTime!==this.data.player_playhead_time)return void this._cleanupRebufferTracker(a,b,!0);var c=b.viewer_time-this._lastPlayheadTimeUpdatedTime;c>=this.sustainedRebufferThreshold&&(this._rebuffering?this._updateRebufferMetrics(b.viewer_time-this._lastCheckedTime):(this._rebuffering=!0,(0,h["default"])(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(c),this.emit("rebufferstart"))),this._lastCheckedTime=b.viewer_time}},i.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},i.prototype._prepareRebufferTrackerState=function(a){this._lastCheckedTime=a,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=a},i.prototype._cleanupRebufferTracker=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.disableRebufferTracking){if(this._rebuffering)this._rebuffering=!1,this._updateRebufferMetrics(b.viewer_time-this._lastCheckedTime),this.emit("rebufferend",{viewer_time:b.viewer_time});else{if(null===this._lastCheckedTime)return void this._updateRebufferMetrics();var d=this.data.player_playhead_time-this._lastPlayheadTime,e=b.viewer_time-this._lastPlayheadTimeUpdatedTime;d>0&&e-d>this.minimumRebufferDuration?((0,h["default"])(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(e-d),this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+e-d})):this._updateRebufferMetrics()}c?this._prepareRebufferTrackerState(b.viewer_time):this._clearRebufferTrackerState()}},i.prototype._updateRebufferMetrics=function(a){a>0&&(0,h["default"])(this.data,"view_rebuffer_duration",a),this.data.view_watch_time>=0&&this.data.view_rebuffer_count>0&&(this.data.view_rebuffer_frequency=this.data.view_rebuffer_count/this.data.view_watch_time,this.data.view_rebuffer_percentage=this.data.view_rebuffer_duration/this.data.view_watch_time)},b["default"]=i},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=function(){this.on("viewinit",function(){var a=this.data,b=a.view_id;if(!a.view_program_changed){var c=function(a,c){var d=c.viewer_time;"playing"===a.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(d||e["default"].now(),b):"adplaying"!==a.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(d||e["default"].now(),b)};this.one("playing",c),this.one("adplaying",c),this.one("viewend",function(){this.off("playing",c),this.off("adplaying",c)})}})};f.prototype.calculateTimeToFirstFrame=function(a,b){b===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:a}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},b["default"]=f},function(a,b,c){"use strict";function d(){var a=this;this.on("viewinit",function(){this._lastPlayheadPosition=-1});var b=["pause","rebufferstart","seeking","error","adbreakstart","hb"],c=["playing","hb"];b.forEach(function(b){a.on(b,function(){if(this._lastPlayheadPosition>=0&&this.data.player_playhead_time>=0&&this._lastPlayerWidth>=0&&this._lastSourceWidth>0&&this._lastPlayerHeight>=0&&this._lastSourceHeight>0){var a=this.data.player_playhead_time-this._lastPlayheadPosition;if(a<0)return void(this._lastPlayheadPosition=-1);var b=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),c=Math.max(0,b-1),d=Math.max(0,1-b);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,c),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,d),(0,f["default"])(this.data,"view_total_content_playback_time",a),(0,f["default"])(this.data,"view_total_upscaling",c*a),(0,f["default"])(this.data,"view_total_downscaling",d*a)}this._lastPlayheadPosition=-1})}),c.forEach(function(b){a.on(b,function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height})})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(2),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){this.isSeeking=!1,this.on("seeking",function(a,b){(0,k["default"])(this.data,b),this._lastSeekingTime=g["default"].now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))}),this.on("seeked",function(){this.isSeeking=!1;var a=this._lastSeekingTime||g["default"].now(),b=g["default"].now()-a;(0,i["default"])(this.data,"view_seek_count",1),(0,i["default"])(this.data,"view_seek_duration",b);var c=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(c,b)}),this.on("viewend",function(){this.isSeeking=!1})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(3),g=d(f),h=c(2),i=d(h),j=c(1),k=d(j)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=c(2),g=d(f),h=c(5),i=c(1),j=d(i),k=function(a,b){a.push(b),a.sort(function(a,b){return a.viewer_time-b.viewer_time})},l=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],m=function(){var a=this;this.on("viewinit",function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0}),l.forEach(function(b){return a.on(b,a._updateAdData)});var b=function(){a.isAdBreak=!1};this.on("adbreakstart",function(){this.isAdBreak=!0}),this.on("play",b),this.on("playing",b),this.on("viewend",b),this.on("adrequest",function(a,b){b=(0,j["default"])({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},b),k(this._adRequests,b),(0,g["default"])(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,g["default"])(this.data,"view_preroll_request_count"))}),this.on("adresponse",function(a,b){b=(0,j["default"])({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},b),k(this._adResponses,b);var c=this.findAdRequest(b.ad_request_id);c&&(0,g["default"])(this.data,"view_ad_request_time",Math.max(0,b.viewer_time-c.viewer_time))}),this.on("adplay",function(a,b){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,g["default"])(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,this._adRequests.length>0&&(this.data.view_preroll_request_time=Math.max(0,b.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,b.viewer_time-this.data.view_start)),this._prerollPlayTime=b.viewer_time)}),this.on("adplaying",function(a,b){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=b.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=b.viewer_time-this._prerollPlayTime)}),this.on("adended",function(){this._wouldBeNewAdPlay=!0}),this.on("aderror",function(){this._wouldBeNewAdPlay=!0})};m.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},m.prototype.findAdRequest=function(a){for(var b=0;b<this._adRequests.length;b++)if(this._adRequests[b].ad_request_id===a)return this._adRequests[b]},m.prototype._updateAdData=function(a,b){
if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&b.ad_tag_url){var c=(0,h.extractHostnameAndDomain)(b.ad_tag_url),d=e(c,2),f=d[0],g=d[1];this.data.view_preroll_ad_tag_domain=g,this.data.view_preroll_ad_tag_hostname=f}if(!this.data.view_preroll_ad_asset_hostname&&b.ad_asset_url){var i=(0,h.extractHostnameAndDomain)(b.ad_asset_url),j=e(i,2),k=j[0],l=j[1];this.data.view_preroll_ad_asset_domain=l,this.data.view_preroll_ad_asset_hostname=k}}},b["default"]=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=this,b=void 0,c=void 0,d=function(){a.disableRebufferTracking||((0,i["default"])(a.data,"view_waiting_rebuffer_count",1),b=g["default"].now(),c=window.setInterval(function(){if(b){var c=g["default"].now();(0,i["default"])(a.data,"view_waiting_rebuffer_duration",c-b),b=c}},250))},e=function(){a.disableRebufferTracking||b&&((0,i["default"])(a.data,"view_waiting_rebuffer_duration",g["default"].now()-b),b=!1,window.clearInterval(c))},f=!1,h=function(){f=!0},j=function(){f=!1,e()};this.on("waiting",function(){f&&d()}),this.on("playing",function(){e(),h()}),this.on("pause",j),this.on("seeking",j)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(3),g=d(f),h=c(2),i=d(h)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=this;this.one("playbackheartbeat",j),this.on("playbackheartbeatend",function(){a.off("before*",k),a.one("playbackheartbeat",j)})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(1),g=d(f),h=c(3),i=d(h),j=function(){this.lastWallClockTime=i["default"].now(),this.on("before*",k)},k=function(a){var b=i["default"].now(),c=this.lastWallClockTime;this.lastWallClockTime=b,b-c>3e4&&(this.emit("devicesleep",{viewer_time:c}),(0,g["default"])(this.data,{viewer_time:c}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:b}),(0,g["default"])(this.data,{viewer_time:b}),this.send("devicewake"))}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=c(0),g=d(f),h=c(41),i=c(4),j=d(i),k=c(45),l=d(k),m=c(10),n=d(m),o=c(46),p=d(o),q=c(15),r=d(q),s=c(47),t=d(s),u=c(1),v=d(u),w=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],x=["viewstart","error","ended","viewend"],y=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mux=a,this.envKey=b,this.eventQueue=new t["default"]((0,l["default"])(b,c.beaconDomain)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=c.sampleRate,this.disableCookies=c.disableCookies,this.respectDoNotTrack=c.respectDoNotTrack;var d=c.platform||{};this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:d.name,viewer_application_version:d.version,viewer_application_engine:d.layout,viewer_device_name:d.product,viewer_device_category:"",viewer_device_manufacturer:d.manufacturer,viewer_os_family:d.os&&d.os.family,viewer_os_architecture:d.os&&d.os.architecture,viewer_os_version:d.os&&d.os.version};var e=(0,p["default"])();e&&(this.pageLevelData=(0,v["default"])(this.pageLevelData,{viewer_connection_type:e})),void 0!==g["default"]&&g["default"].location&&g["default"].location.href&&(this.pageLevelData.page_url=g["default"].location.href),this.viewerData=this.disableCookies?{}:(0,h.getAndUpdateViewerData)()};y.prototype.send=function(a,b){if(a){if(this.respectDoNotTrack&&(0,n["default"])())return j["default"].info("Not sending `"+a+"` because Do Not Track is enabled");if(!b||"object"!==(void 0===b?"undefined":e(b)))return j["default"].error("A data object was expected in send() but was not provided");var c=this.disableCookies?{}:(0,h.getAndUpdateSessionData)(),d={};(0,v["default"])(d,this.pageLevelData),(0,v["default"])(d,b),(0,v["default"])(d,c),(0,v["default"])(d,this.viewerData),d.event=a,d.env_key=this.envKey,d.user_id&&(d.viewer_user_id=d.user_id,delete d.user_id);var f=d.mux_sample_number>=this.sampleRate,g=this._deduplicateBeaconData(a,d),i=(0,r["default"])(g);if(this.lastEventTime=this.mux.utils.now(),f)return j["default"].info("Not sending event due to sample rate restriction",a,d,i);if(!this.envKey)return j["default"].info("Not sending event due to missing environment key",a,d,i);if(!this.rateLimited)if(j["default"].info("Sending event",a,d,i),this.rateLimited=!this.eventQueue.queueEvent(a,i),this.mux.WINDOW_UNLOADING&&"viewend"===a)this.eventQueue.destroy(!0);else if(x.indexOf(a)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return d.event="eventrateexceeded",i=(0,r["default"])(d),this.eventQueue.queueEvent(d.event,i),j["default"].error("Beaconing disabled due to rate limit.")}},y.prototype.destroy=function(){this.eventQueue.destroy(!1)};var z=function(a,b,c,d){return!(!a||0!==b.indexOf("request_")||"request_response_headers"!==b&&"object"===(void 0===c?"undefined":e(c))&&"object"===(void 0===d?"undefined":e(d))&&Object.keys(c||{}).length===Object.keys(d||{}).length)},A=function(a,b){return"renditionchange"===a&&0===b.indexOf("video_source_")};y.prototype._deduplicateBeaconData=function(a,b){var c=this,d={},e=b.view_id;if(!e||"viewstart"===a||"viewend"===a||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)d=(0,v["default"])({},b),e&&(this.previousBeaconData=d),e&&"viewend"===a&&(this.previousBeaconData=null);else{var f=0===a.indexOf("request");Object.keys(b).forEach(function(e){var g=b[e];(g!==c.previousBeaconData[e]||w.indexOf(e)>-1||z(f,e,g,c.previousBeaconData[e])||A(a,e))&&(d[e]=g,c.previousBeaconData[e]=g)})}return d},b["default"]=y},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.getAndUpdateSessionData=b.getAndUpdateViewerData=void 0;var e=c(12),f=d(e),g=c(44),h=d(g),i=c(7),j=c(3),k=d(j),l=function(){var a=void 0;try{a=f["default"].parse(h["default"].get("muxData")||"")}catch(b){a={}}return a},m=function(a){try{h["default"].set("muxData",f["default"].stringify(a),{expires:7300})}catch(a){}},n=function(){var a=l();return a.mux_viewer_id=a.mux_viewer_id||(0,i.generateUUID)(),a.msn=a.msn||Math.random(),m(a),{mux_viewer_id:a.mux_viewer_id,mux_sample_number:a.msn}},o=function(){var a=l(),b=k["default"].now();return a.session_start&&(a.sst=a.session_start,delete a.session_start),a.session_id&&(a.sid=a.session_id,delete a.session_id),a.session_expires&&(a.sex=a.session_expires,delete a.session_expires),(!a.sex||a.sex<b)&&(a.sid=(0,i.generateUUID)(),a.sst=b),a.sex=b+15e5,m(a),{session_id:a.sid,session_start:a.sst,session_expires:a.sex}};b.getAndUpdateViewerData=n,b.getAndUpdateSessionData=o},function(a,b,c){"use strict";var d=c(13),e=c(14),f={brackets:function(a){return a+"[]"},indices:function(a,b){return a+"["+b+"]"},repeat:function(a){return a}},g=Date.prototype.toISOString,h={delimiter:"&",encode:!0,encoder:d.encode,encodeValuesOnly:!1,serializeDate:function(a){return g.call(a)},skipNulls:!1,strictNullHandling:!1},i=function j(a,b,c,e,f,g,i,k,l,m,n,o){var p=a;if("function"==typeof i)p=i(b,p);else if(p instanceof Date)p=m(p);else if(null===p){if(e)return g&&!o?g(b,h.encoder):b;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||d.isBuffer(p))return g?[n(o?b:g(b,h.encoder))+"="+n(g(p,h.encoder))]:[n(b)+"="+n(String(p))];var q=[];if(void 0===p)return q;var r;if(Array.isArray(i))r=i;else{var s=Object.keys(p);r=k?s.sort(k):s}for(var t=0;t<r.length;++t){var u=r[t];f&&null===p[u]||(q=Array.isArray(p)?q.concat(j(p[u],c(b,u),c,e,f,g,i,k,l,m,n,o)):q.concat(j(p[u],b+(l?"."+u:"["+u+"]"),c,e,f,g,i,k,l,m,n,o)))}return q};a.exports=function(a,b){var c=a,g=b?d.assign({},b):{};if(null!==g.encoder&&void 0!==g.encoder&&"function"!=typeof g.encoder)throw new TypeError("Encoder has to be a function.");var j=void 0===g.delimiter?h.delimiter:g.delimiter,k="boolean"==typeof g.strictNullHandling?g.strictNullHandling:h.strictNullHandling,l="boolean"==typeof g.skipNulls?g.skipNulls:h.skipNulls,m="boolean"==typeof g.encode?g.encode:h.encode,n="function"==typeof g.encoder?g.encoder:h.encoder,o="function"==typeof g.sort?g.sort:null,p=void 0!==g.allowDots&&g.allowDots,q="function"==typeof g.serializeDate?g.serializeDate:h.serializeDate,r="boolean"==typeof g.encodeValuesOnly?g.encodeValuesOnly:h.encodeValuesOnly;if(void 0===g.format)g.format=e["default"];else if(!Object.prototype.hasOwnProperty.call(e.formatters,g.format))throw new TypeError("Unknown format option provided.");var s,t,u=e.formatters[g.format];"function"==typeof g.filter?(t=g.filter,c=t("",c)):Array.isArray(g.filter)&&(t=g.filter,s=t);var v=[];if("object"!=typeof c||null===c)return"";var w;w=g.arrayFormat in f?g.arrayFormat:"indices"in g?g.indices?"indices":"repeat":"indices";var x=f[w];s||(s=Object.keys(c)),o&&s.sort(o);for(var y=0;y<s.length;++y){var z=s[y];l&&null===c[z]||(v=v.concat(i(c[z],z,x,k,l,m?n:null,t,o,p,q,u,r)))}var A=v.join(j),B=!0===g.addQueryPrefix?"?":"";return A.length>0?B+A:""}},function(a,b,c){"use strict";var d=c(13),e=Object.prototype.hasOwnProperty,f={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:d.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},g=function(a,b){for(var c={},d=b.ignoreQueryPrefix?a.replace(/^\?/,""):a,g=b.parameterLimit===1/0?void 0:b.parameterLimit,h=d.split(b.delimiter,g),i=0;i<h.length;++i){var j,k,l=h[i],m=l.indexOf("]="),n=-1===m?l.indexOf("="):m+1;-1===n?(j=b.decoder(l,f.decoder),k=b.strictNullHandling?null:""):(j=b.decoder(l.slice(0,n),f.decoder),k=b.decoder(l.slice(n+1),f.decoder)),e.call(c,j)?c[j]=[].concat(c[j]).concat(k):c[j]=k}return c},h=function(a,b,c){for(var d=b,e=a.length-1;e>=0;--e){var f,g=a[e];if("[]"===g)f=[],f=f.concat(d);else{f=c.plainObjects?Object.create(null):{};var h="["===g.charAt(0)&&"]"===g.charAt(g.length-1)?g.slice(1,-1):g,i=parseInt(h,10);!isNaN(i)&&g!==h&&String(i)===h&&i>=0&&c.parseArrays&&i<=c.arrayLimit?(f=[],f[i]=d):f[h]=d}d=f}return d},i=function(a,b,c){if(a){var d=c.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a,f=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,i=f.exec(d),j=i?d.slice(0,i.index):d,k=[];if(j){if(!c.plainObjects&&e.call(Object.prototype,j)&&!c.allowPrototypes)return;k.push(j)}for(var l=0;null!==(i=g.exec(d))&&l<c.depth;){if(l+=1,!c.plainObjects&&e.call(Object.prototype,i[1].slice(1,-1))&&!c.allowPrototypes)return;k.push(i[1])}return i&&k.push("["+d.slice(i.index)+"]"),h(k,b,c)}};a.exports=function(a,b){var c=b?d.assign({},b):{};if(null!==c.decoder&&void 0!==c.decoder&&"function"!=typeof c.decoder)throw new TypeError("Decoder has to be a function.");if(c.ignoreQueryPrefix=!0===c.ignoreQueryPrefix,c.delimiter="string"==typeof c.delimiter||d.isRegExp(c.delimiter)?c.delimiter:f.delimiter,c.depth="number"==typeof c.depth?c.depth:f.depth,c.arrayLimit="number"==typeof c.arrayLimit?c.arrayLimit:f.arrayLimit,c.parseArrays=!1!==c.parseArrays,c.decoder="function"==typeof c.decoder?c.decoder:f.decoder,c.allowDots="boolean"==typeof c.allowDots?c.allowDots:f.allowDots,c.plainObjects="boolean"==typeof c.plainObjects?c.plainObjects:f.plainObjects,c.allowPrototypes="boolean"==typeof c.allowPrototypes?c.allowPrototypes:f.allowPrototypes,c.parameterLimit="number"==typeof c.parameterLimit?c.parameterLimit:f.parameterLimit,c.strictNullHandling="boolean"==typeof c.strictNullHandling?c.strictNullHandling:f.strictNullHandling,""===a||null===a||void 0===a)return c.plainObjects?Object.create(null):{};for(var e="string"==typeof a?g(a,c):a,h=c.plainObjects?Object.create(null):{},j=Object.keys(e),k=0;k<j.length;++k){var l=j[k],m=i(l,e[l],c);h=d.merge(h,m,c)}return d.compact(h)}},function(a,b,c){"use strict";var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(g){var h=!1;if(d=g,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e),h=!0,"object"===f(b)&&(a.exports=g(),h=!0),!h){var i=window.Cookies,j=window.Cookies=g();j.noConflict=function(){return window.Cookies=i,j}}}(function(){function a(c){function d(a,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=b({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(a){}return e=c.write?c.write(e,a):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)),a=a.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),a=a.replace(/[\(\)]/g,escape),document.cookie=[a,"=",e,f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}a||(g={});for(var i=document.cookie?document.cookie.split("; "):[],j=/(%[0-9A-Z]{2})+/g,k=0;k<i.length;k++){var l=i[k].split("="),m=l.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{var n=l[0].replace(j,decodeURIComponent);if(m=c.read?c.read(m,n):c(m,n)||m.replace(j,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(a){}if(a===n){g=m;break}a||(g[n]=m)}catch(a){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(a,c){d(a,"",b(c,{expires:-1}))},d.withConverter=a,d}var b=function(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b};return a(function(){})})},function(a,b,c){"use strict";function d(a,b){return a=a||"",b=b||"litix.io",a.match(/^[a-z0-9]+$/)?"https://"+a+"."+b:"https://img.litix.io/a.gif"}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f=function(){var a=void 0;switch(g()){case"cellular":a="cellular";break;case"ethernet":a="wired";break;case"wifi":a="wifi";break;case void 0:break;default:a="other"}return a},g=function(){var a=e["default"].navigator,b=a&&(a.connection||a.mozConnection||a.webkitConnection);return b&&b.type};b["default"]=f},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0),f=d(e),g=c(4),h=d(g),i=c(48),j=d(i),k=c(1),l=d(k),m=c(15),n=d(m),o=!!f["default"].XMLHttpRequest&&"withCredentials"in new f["default"].XMLHttpRequest,p={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:5e3},q=function(a,b){this._beaconUrl=a||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,l["default"])({},p,b)};q.prototype.queueEvent=function(a,b){var c=(0,l["default"])({},b);return o?(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===a)&&(this._eventQueue.push(c),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):(j["default"].send(this._beaconUrl,c),!0)},q.prototype.flushEvents=function(){o&&(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},q.prototype.destroy=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,a?this._clearBeaconQueue():this.flushEvents(),f["default"].clearTimeout(this._sendTimeout)},q.prototype._clearBeaconQueue=function(){var a=f["default"].navigator,b=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,c=this._eventQueue.slice(b);if(b>0&&(0,l["default"])(c[c.length-1],(0,n["default"])({mux_view_message:"event queue truncated"})),a.sendBeacon)a.sendBeacon(this._beaconUrl,JSON.stringify({events:c}));else if(f["default"].XMLHttpRequest){var d=new f["default"].XMLHttpRequest;d.open("POST",this._beaconUrl),d.setRequestHeader("Content-Type","application/json"),d.send(JSON.stringify({events:c}))}else j["default"].send(this._beaconUrl,c[c.length-1])},q.prototype._sendBeaconQueue=function(){var a=this;if(f["default"].XMLHttpRequest&&!this._postInFlight){var b=new f["default"].XMLHttpRequest,c=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0,b.onreadystatechange=function(){4===b.readyState&&(200!==b.status?(a._eventQueue=c.concat(a._eventQueue),a._failureCount+=1,h["default"].info("Error sending beacon: "+b.status),h["default"].info(b.responseText)):a._failureCount=0,a._postInFlight=!1)},b.open("POST",this._beaconUrl),b.setRequestHeader("Content-Type","application/json"),b.send(JSON.stringify({events:c}))}},q.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var a=Math.pow(2,this._failureCount-1);return(1+(a*=Math.random()))*this._options.baseTimeBetweenBeacons},q.prototype._startBeaconSending=function(){var a=this;f["default"].clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=f["default"].setTimeout(function(){a._eventQueue.length&&a._sendBeaconQueue(),a._startBeaconSending()},this._getNextBeaconTime()))},b["default"]=q},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(12),f=d(e),g=c(0),h=d(g),i={};i.send=function(a,b){function c(){d.src=g+(e?"&rc="+e:"")}var d=new Image,e=0,g=a+"?"+f["default"].stringify(b);return d.addEventListener("error",function(){e>3||h["default"].setTimeout(function(){e++,c()},5e3*e)}),c(),d},b["default"]=i},function(a,b,c){"use strict";function d(){function a(a,b){var c=b.request_start,i=b.request_response_start,j=b.request_response_end,k=b.request_bytes_loaded;g++;var l=void 0,m=void 0;if(i?(l=i-c,m=j-i):m=j-c,m>0&&k>0){var n=k/m*8e3;h++,e+=k,f+=m,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,n),this.data.view_average_request_throughput=e/f*8e3,this.data.view_request_count=g,l>0&&(d+=l,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,l),this.data.view_average_request_latency=d/h)}}function b(a,b){g++,i++,this.data.view_request_count=g,this.data.view_request_failed_count=i}function c(a,b){g++,j++,this.data.view_request_count=g,this.data.view_request_canceled_count=j}var d=0,e=0,f=0,g=0,h=0,i=0,j=0;this.on("requestcompleted",a),this.on("requestfailed",b),this.on("requestcanceled",c)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(a,b,c){var d=(0,i.findMediaElement)(b),g=f(d,3),l=g[0],m=g[1],n=g[2],o=a.log,p=a.utils.getComputedStyle,q=a.utils.secondsToMs,r={automaticErrorTracking:!0};return l?"video"!==n&&"audio"!==n?o.error("The element of `"+m+"` was not a media element."):(c=(0,h["default"])(r,c),c.data=(0,h["default"])({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"4.0.0"},c.data),c.getPlayheadTime=function(){return q(l.currentTime)},c.getStateData=function(){var a=this.hlsjs&&this.hlsjs.url,b=this.dashjs&&e("function"===this.dashjs.getSource)&&this.dashjs.getSource();return{player_is_paused:l.paused,player_playhead_time:q(l.currentTime),player_width:parseInt(p(l,"width")),player_height:parseInt(p(l,"height")),player_autoplay_on:l.autoplay,player_preload_on:l.preload,video_poster_url:l.poster,video_source_url:a||b||l.currentSrc,video_source_duration:q(l.duration),video_source_height:l.videoHeight,video_source_width:l.videoWidth}},l.mux=l.mux||{},l.mux.emit=function(b,c){a.emit(m,b,c)},l.mux.destroy=function(){Object.keys(l.mux.listeners).forEach(function(a){l.removeEventListener(a,l.mux.listeners[a],!1)}),delete l.mux.listeners,a.emit(m,"destroy")},l.mux.swapElement=function(b){var c=(0,i.findMediaElement)(b),d=f(c,3),e=d[0],g=d[1],j=d[2];return e?"video"!==j&&"audio"!==j?a.log.error("The element of `"+g+"` was not a media element."):(e.muxId=l.muxId,delete l.muxId,e.mux=e.mux||{},e.mux.listeners=(0,h["default"])({},l.mux.listeners),delete l.mux.listeners,Object.keys(e.mux.listeners).forEach(function(a){l.removeEventListener(a,e.mux.listeners[a],!1),e.addEventListener(a,e.mux.listeners[a],!1)}),e.mux.swapElement=l.mux.swapElement,e.mux.destroy=l.mux.destroy,delete l.mux,void(l=e)):a.log.error("No element was found with the `"+g+"` query selector.")},l.mux.addHLSJS=function(b){a.addHLSJS(m,b)},l.mux.addDashJS=function(b){a.addDashJS(m,b)},l.mux.removeHLSJS=function(){a.removeHLSJS(m)},l.mux.removeDashJS=function(){a.removeDashJS(m)},a.init(m,c),a.emit(m,"playerready"),l.paused||(a.emit(m,"play"),l.readyState>2&&a.emit(m,"playing")),l.mux.listeners={},void j.forEach(function(b){("error"!==b||c.automaticErrorTracking)&&(l.mux.listeners[b]=function(){var c={};"error"===b&&(c.player_error_code=l.error&&l.error.code,c.player_error_message=l.error&&k[l.error.code]),a.emit(m,b,c)},l.addEventListener(b,l.mux.listeners[b],!1))})):o.error("No element was found with the `"+m+"` query selector.")}Object.defineProperty(b,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b["default"]=d;var g=c(1),h=function(a){return a&&a.__esModule?a:{"default":a}}(g),i=c(9),j=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],k={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(52),f=d(e),g=c(2),h=d(g),i=c(53),j=d(i),k=c(54),l=d(k),m=c(1),n=d(m),o=c(8),p=d(o),q=c(5),r=c(3),s=d(r),t={};t.safeCall=f["default"],t.safeIncrement=h["default"],t.getComputedStyle=j["default"],t.secondsToMs=l["default"],t.assign=n["default"],t.headersStringToObject=p["default"],t.extractHostnameAndDomain=q.extractHostnameAndDomain,t.extractHostname=q.extractHostname,t.now=s["default"].now,b["default"]=t},function(a,b,c){"use strict";function d(a,b,c,d){var e=d;if(a&&"function"==typeof a[b])try{e=a[b].apply(a,c)}catch(a){f["default"].info("safeCall error",a)}return e}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(4),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){"use strict";function d(a,b){if(a&&b&&f["default"]&&"function"==typeof f["default"].getComputedStyle){var c=void 0;return g&&g.has(a)&&(c=g.get(a)),c||(c=f["default"].getComputedStyle(a,null),g&&g.set(a,c)),c.getPropertyValue(b)}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(0),f=function(a){return a&&a.__esModule?a:{"default":a}}(e),g=void 0;f["default"]&&f["default"].WeakMap&&(g=new WeakMap)},function(a,b,c){"use strict";function d(a){return Math.floor(1e3*a)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d}])})}()},function(a,b,c){"use strict";function d(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return{}},h=!1;a.on("adstart",function(){h=!0}),a.on("adend",function(){h=!1}),a.on("adserror",function(){h=!1});var i=function(){var d=g(b.currentTime()),i=function k(){var c=f["default"].utils.now(),i=g(b.currentTime());if(h){if(i>d){var j=e();j.viewer_time=c-Math.max(0,i-d),b.off("timeupdate",k),a.mux.emit("adplaying",j)}}else b.off("timeupdate",k)};b.on("timeupdate",i);var j=function l(){b.off("timeupdate",i),c.forEach(function(a){b.off(a,l)})};c.forEach(function(a){b.on(a,j)})};d.forEach(function(a){b.on(a,i)})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(0),f=function(a){return a&&a.__esModule?a:{"default":a}}(e),g=f["default"].utils.secondsToMs},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(g["default"].IS_IE8)return!1;var b=this,c=b.id();a=w({automaticErrorTracking:!0},a),a.data=w({player_software_name:"Video.js",player_software_version:g["default"].VERSION||"< 4.11",player_mux_plugin_name:"videojs-mux",player_mux_plugin_version:"4.0.0"},a.data),a.getPlayheadTime=function(){return z(b.currentTime())},a.getStateData=function(){var a=x(b,"videoHeight"),c=x(b,"videoWidth");if(void 0===c||void 0===a){var d=b.el().firstChild;d&&"VIDEO"===d.nodeName.toUpperCase()&&(a=d.videoHeight,c=d.videoWidth)}return{player_is_paused:x(b,"paused"),player_is_fullscreen:x(b,"isFullscreen"),player_autoplay_on:!!x(b,"autoplay"),player_preload_on:x(b,"preload"),player_width:y(b.el(),"width"),player_height:y(b.el(),"height"),player_language_code:x(b,"language"),video_poster_url:x(b,"poster"),video_source_url:x(b,"currentSrc"),video_source_mime_type:x(b,"currentType")&&x(b,"currentType").toLowerCase(),video_source_duration:z(x(b,"duration")||0),video_source_height:a,video_source_width:c}},b.mux=function(){v.error("[videojs-mux] The plugin was initialized more than once.")},b.mux.emit=function(a,b){i["default"].emit(c,a,b)},b.mux.addHLSJS=function(a){i["default"].addHLSJS(c,a)},b.mux.log=v,b.mux.utils=i["default"].utils,i["default"].init(c,a);var d=!1,e=function(){d||b.mux.emit("playerready"),d=!0};b.ready(function(){b.addClass("vjs-mux"),k["default"].setTimeout(e,0)});var f=!1;b.one("play",e),A.forEach(function(c){("error"!==c||a.automaticErrorTracking)&&b.on(c,function(){if(!f){var a={};if("error"===c){var d=x(b,"error");a.player_error_code=d&&d.code,a.player_error_message=d&&d.message}b.mux.emit(c,a)}})});var h=!1;b.on("play",function(){h=!0}),b.on("pause",function(){h=!1}),b.on("adstart",function(){f=!0,h&&b.mux.emit("pause"),b.mux.emit("adbreakstart")}),b.on("adend",function(){b.mux.emit("adbreakend"),f=!1,x(b,"paused")||(b.mux.emit("play"),h=!0,b.onceux&&b.mux.emit("playing"))}),b.ima&&(0,m["default"])(b),b.onceux&&(0,s["default"])(b),b.ima3&&"function"==typeof b.ima3.ready&&(0,o["default"])(b),b.FreeWheelPlugin&&b.FreeWheelPlugin.VERSION&&(0,q["default"])(b),b.on("dispose",function(){b.mux.emit("destroy")})}var f=c(3),g=d(f),h=c(0),i=d(h),j=c(4),k=d(j),l=c(6),m=d(l),n=c(7),o=d(n),p=c(8),q=d(p),r=c(9),s=d(r),t=c(10),u=d(t),v=i["default"].log,w=i["default"].utils.assign,x=i["default"].utils.safeCall,y=i["default"].utils.getComputedStyle,z=i["default"].utils.secondsToMs,A=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"];(g["default"].registerPlugin||g["default"].plugin||function(){i["default"].log.error("No valid method to register videojs plugin available.")})("mux",e),(0,u["default"])(g["default"])},function(b,c){b.exports=a},function(a,b,c){(function(b){var c;c="undefined"!=typeof window?window:void 0!==b?b:"undefined"!=typeof self?self:{},a.exports=c}).call(b,c(5))},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){"use strict";function d(a){var b=function(b){b=b||{};var c="function"==typeof b.getAdData?b.getAdData():{},d="function"==typeof b.getAd?b.getAd():{},e="function"==typeof d.getMediaUrl?d.getMediaUrl():c.mediaUrl,f=a.ima.settings||{},g={};return e&&(g.ad_asset_url=e),f.adTagUrl&&(g.ad_tag_url=f.adTagUrl),g},c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0;try{var i=window.google.ima.AdEvent.Type;c=i.LOADED,d=i.STARTED,e=i.COMPLETE,f=i.PAUSED,g=i.RESUMED,h=i.SKIPPED}catch(a){c="loaded",d="start",e="complete",f="pause",g="resume",h="skip"}var j=0;a.mux.triggerAdRequest=function(){j++,a.mux.emit("adrequest",b())},a.on("adsready",function(){var i=a.ima.addEventListener||function(){};i(c,function(c){var d=b(c);j>0&&(j--,a.mux.emit("adresponse",d)),a.mux.emit("adplay",d)}),i(d,function(c){var d=b(c);a.mux.emit("adplaying",d)}),i(g,function(c){var d=b(c);a.mux.emit("adplay",d),a.mux.emit("adplaying",d)}),i(f,function(c){var d=b(c);a.mux.emit("adpause",d)}),i(e,function(c){var d=b(c);a.mux.emit("adended",d)}),i(h,function(c){var d=b(c);a.mux.emit("adended",d)}),a.on("adserror",function(){j>0&&(j--,a.mux.emit("adresponse")),a.mux.emit("aderror")})})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(a){if("string"!=typeof a)return!1;var b=a.split(".").map(function(a){return parseInt(a)}),c=b[0],d=b[1];return c>2||2===c&&d>=3}function e(a){var b=function(){var b=a.ima3.currentAd,c=a.ima3.settings,d={};return b&&(d.ad_asset_url=b.mediaUrl),c&&(d.ad_tag_url=c.serverUrl),d};if(d(a.ima3.version)){var c=0,e=function(){c>0&&(c--,a.mux.emit("adresponse",b()))};a.on("ads-request",function(){c++,a.mux.emit("adrequest",b())}),a.on("ads-load",function(){e(),a.mux.emit("adplay",b())}),a.on("adserror",function(){e(),a.mux.emit("aderror")}),a.on("ads-play",function(){a.mux.emit("adplay",b())}),a.on("ads-pause",function(){a.mux.emit("adpause",b())}),a.on("ads-ad-ended",function(){a.mux.emit("adended",b())})}a.ima3.ready(function(){if(a.ima3.adPlayer){d(a.ima3.version)||(a.ima3.adPlayer.on("play",function(){a.mux.emit("adplay")}),a.ima3.adPlayer.on("pause",function(){a.mux.emit("adpause")}),a.ima3.adPlayer.on("ended",function(){a.mux.emit("adended")}));var c=["pause","ended","adserror"],e=["play"];(0,g["default"])(a,a.ima3.adPlayer,c,e,b)}else a.mux.log("Legacy IMA3 plugin found, ad events may not track correctly."),a.on("ads-ad-started",function(){a.mux.emit("adplaying",b())}),a.on("ads-play",function(){a.mux.emit("adplaying",b())})})}Object.defineProperty(b,"__esModule",{value:!0}),b.brightcoveImaAdsEventsSupported=d,b["default"]=e;var f=c(1),g=function(a){return a&&a.__esModule?a:{"default":a}}(f)},function(a,b,c){"use strict";function d(a){var b=function(b){var c=a.FreeWheelPlugin,d={};switch(b){case"adplay":case"adplaying":case"adpause":d.ad_asset_url=a.currentSrc()}return c&&(d.ad_tag_url="html5"===c.tech.toLowerCase()?c.settings.Html5.serverUrl:c.settings.Flash.serverUrl),d};a.on("ads-request",function(){a.mux.emit("adrequest",b("adrequest"))}),a.on("ads-load",function(){a.mux.emit("adresponse",b("adresponse"))}),a.on("adserror",function(){a.mux.emit("aderror")}),a.on("ads-ad-started",function(){a.mux.emit("adplay",b("adplay")),a.mux.emit("adplaying",b("adplaying"))}),a.on("ads-play",function(){a.mux.emit("adplay",b("adplay")),a.mux.emit("adplaying",b("adplaying"))}),a.on("ads-pause",function(){a.mux.emit("adpause",b("adpause"))}),a.on("ads-ad-ended",function(){a.mux.emit("adended",b("adended"))}),a.on("adend",function(){a.mux.emit("play")})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d},function(a,b,c){"use strict";function d(a){var b=["onceux-linearad-pause","onceux-linearad-skipped","onceux-linearad-complete","adserror"],c=["adstart","onceux-linearad-resume"];(0,f["default"])(a,a,b,c),a.on("adstart",function(){a.mux.emit("adplay")}),a.on("onceux-linearad-start",function(b){b.linearAd&&b.linearAd.index>0&&(a.mux.emit("adplay"),a.mux.emit("adplaying"))}),a.on("onceux-linearad-resume",function(){
a.mux.emit("adplay")}),a.on("onceux-linearad-pause",function(){a.mux.emit("adpause")}),a.on("onceux-linearad-complete",function(){a.mux.emit("adended")}),a.on("onceux-linearad-skipped",function(){a.mux.emit("adended")})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(1),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){"use strict";function d(a){if(!i&&"function"==typeof a.getTech){for(var b=a.getTech("Html5")||{},c=b.sourceHandlers,d=0;d<c.length;d++)!function(a){var b=c[a],d=b.handleSource;b.handleSource=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=d(a,b,c);if(f&&"function"==typeof f.xhr)try{var i=n.VERSION.split("."),j=e(i,2),k=j[0],l=j[1];k=parseInt(k),l=parseInt(l);var m=k>=7&&l>=4?f.player().id():f.player_.el_.parentNode.id;(0,g["default"])(n(m),f.xhr),(0,h.trackRenditionChanges)(n(m))}catch(n){}return f}}(d);i=!0}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b["default"]=d;var f=c(11),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=c(13),i=!1},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=function(b,c,d){var e=(0,g["default"])(a,b,c);return function(){try{e()}catch(a){}try{d()}catch(a){}}},d=function(a){return function(a){var b=i["default"].utils.now();try{d(a)}catch(d){}try{a.onreadystatechange=c(a,b,a.onreadystatechange||function(){})}catch(d){}}};b.beforeRequest=function(a){return function(b){var c=a(b);return c.beforeSend=d(c.beforeSend||function(){}),c}}(b.beforeRequest||function(a){return a})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(12),g=d(f),h=c(0),i=d(h)},function(a,b,c){"use strict";function d(a,b,c){var d=a.mux.utils.extractHostnameAndDomain,f=a.mux.utils.headersStringToObject,h=function(a){var b=a["content-type"];return b?b.match(/^audio\/mpegurl/i)?"manifest":b.match(/^audio.*/i)?"audio":b.match(/^video.*/)?"video":b.match(/^application\/x-mpegurl/i)?"manifest":b.match(/^application\/vnd.apple.mpegurl/i)?"manifest":b.match(/^application\/dash+xml/i)?"manifest":"unknown":"unknown"},i=0;return function(){var j=b.readyState;if(j>=2){if(i=i||g["default"].utils.now(),4!==j)return;if(b.status>=200&&b.status<300){var k=g["default"].utils.now(),l="arraybuffer"===b.responseType?b.response.byteLength:b.responseText.length,m=d(b.responseURL),n=e(m,1),o=n[0],p=f(b.getAllResponseHeaders?b.getAllResponseHeaders():""),q=h(p),r={request_start:c,request_response_start:i,request_response_end:k,request_bytes_loaded:l,request_hostname:o,request_response_headers:p,request_type:q};a.mux.emit("requestcompleted",r)}else a.mux.emit("requestfailed")}}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b["default"]=d;var f=c(0),g=function(a){return a&&a.__esModule?a:{"default":a}}(f)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(a){for(var b=a.textTracks(),c=void 0,d=0;d<b.length;d++)"segment-metadata"===b[d].label&&(c=b[d]);return c},e=function(a){var b=d(a),c=void 0;b&&b.on&&b.on("cuechange",function(){try{var b=a.tech({IWillNotUseThisInPlugins:!0}),d=b.vhs||b.hls,e=d.playlists.media().attributes.BANDWIDTH;c!==e&&a.mux.emit("renditionchange",{video_source_bitrate:e}),c=e}catch(b){a.mux&&a.mux.log&&a.mux.log.warn&&a.mux.log.warn("Cannot retrieve BANDWIDTH information from player: "+b)}})};b.getSegmentMetadataTrack=d,b.trackRenditionChanges=e}])})}()}(void 0),function(a){"use strict";a(window.jQuery||window.$)}(function(a){"use strict";return!a||!a.fn||!a.fn.jquery||a.fn.jquery.split(".")[1]<7?(q("The PBS KIDS Video Plugin requires jQuery v1.7.0 or newer. Using org.pbskids.video.jQuery instead."),a=org.pbskids.video.jQuery):org.pbskids.video.jQuery=a,window.vpaid_video_flash_tester={_handlers:{_registries:{}},_isSupported:!1},org.pbskids.video.Player=function(b,c){function l(){n("_init()");for(var b in c)switch(b){case"onHoverOverlay":case"playIconOverlay":case"loadingOverlay":for(var e in c[b])Xb[b][e]=c[b][e];break;default:Xb[b]=c[b]}Xb.debug=Boolean(Xb.debug&&d),org.pbskids.video.PlayerEvent.debug=Xb.debug,org.pbskids.video.VideoEvent.debug=Xb.debug,org.pbskids.video.VideoErrorEvent.debug=Xb.debug,0===a("#pbskids-videojs-css").length&&a("head").append(a("<link/>").attr({id:"pbskids-videojs-css",type:"text/css",rel:"stylesheet",href:Ua})),__KIDS_Video_Tracking(function(){__KIDS_Video_Tracking("create",w,"auto",{name:v}),__KIDS_Video_Tracking("create",y,"auto",{name:x}),Da(Ca,[t])})}function s(a){"function"==typeof a.eme&&a.eme()}function t(){if(n("_construct()"),k=Lb?"hls":"mp4",Pa="kids-mezzannine-16x9",0===a("video#"+b).length){var c=b+"-videoEl";if(a("#"+b+" video").length>0){var e=a("#"+b+" video").first();e.attr("id")||e.attr("id",c),b=e.attr("id")}else a("<video/>").attr("id",c).appendTo("#"+b),b=c}videojs.options.persistTextTrackSettings=!0,videojs.options.width=a("#"+b).width(),videojs.options.height=Xb.aspectRatio>1.5?"288px":"360px",Ha=videojs(b,{controls:!1,autoplay:Xb.autoPlay,preload:"auto",plugins:{eme:{}},html5:{nativeTextTracks:!1},loop:!1}),Ha.addClass("video-js"),Ha.addClass("pbskids-default-skin");var g=function(a){return sessionStorage&&"true"===sessionStorage.getItem(a)},h=g("kidsadsoff");h&&q("Flag sessionStorage.kidsadsoff is set to true!"),Ia=h?{enable:function(){},disable:function(){}}:Ha.vastClient({adTagXML:$b,adCancelTimeout:15e3,playAdAlways:!0,adsEnabled:!1}),n("_construct()","Mux enabled: "+xb.toString().toUpperCase()),xb&&Ha.mux({debug:d,data:{property_key:"BSUJfZJSSUexntro-hQ5tPA0t",player_name:f,player_version:"2.7.8",video_id:"",video_title:"",video_series:"",video_producer:"",video_content_type:"",video_duration:"",video_is_live:!1,video_language_code:"",video_variant_name:"",video_variant_id:"",video_encoding_variant:"",video_cdn:""}}),d&&(window.adClient=Ia,window.kidsPlayer=Wa,window.kidsVjsPlayer=Ha),Ha.ready(u)}function u(){n("_finalize()"),a("html").addClass("no-flash-video");var d=function(a,b){return parseFloat(a,10)*-1/2+b},h={background:"url("+Xb.playIconOverlay.url+") no-repeat center center"};Xb.playIconOverlay.width&&(h.left="50%",h.position="relative",h["background-size"]="cover",h.width=Xb.playIconOverlay.width,h["margin-left"]=Xb.playIconOverlay.width.replace(/\d+(px|\%)/i,d)),Xb.playIconOverlay.height&&(h.position="relative",h["background-size"]="cover",h.height=Xb.playIconOverlay.height),Xb.playIconOverlay.opacity&&a(".pbskids-default-skin .vjs-big-play-button").css({"background-color":"transparent","background-image":"url("+e+"pbsk/video/img/background_"+Xb.playIconOverlay.color+"_opacity_"+Xb.playIconOverlay.opacity+".png)"}),a(".pbskids-default-skin .vjs-big-play-button span:first").css(h);var i={border:"2px solid white","border-radius":"50%",background:"url("+Xb.loadingOverlay.url+") no-repeat center center"};Xb.loadingOverlay.width&&(i.left="50%",i.position="relative",i["background-size"]="cover",i.width=Xb.loadingOverlay.width,i["margin-left"]=Xb.loadingOverlay.width.replace(/\d+(px|\%)/i,d)),Xb.loadingOverlay.height&&(i.top="50%",i.position="relative",i["background-size"]="cover",i.height=Xb.loadingOverlay.height,i["margin-top"]=Xb.loadingOverlay.height.replace(/\d+(px|\%)/i,d)),a(".pbskids-default-skin .vjs-loading-spinner").css({"background-image":"url("+e+"pbsk/video/img/background_"+Xb.loadingOverlay.color+"_opacity_"+Xb.loadingOverlay.opacity+".png)"}).append(a("<span/>").css(i));var j=function(){var b=function(){d(),ra(),X()};if(!Ha.tech.featuresNativeTextTracks){var c=function(b){b&&i(),a(".pbskids-default-skin .vjs-text-track-settings").toggleClass("show-help",b)},d=function(){c(!1)},e=function(){a(".pbskids-default-skin .vjs-modal-dialog-content").prepend(a("<button/>").addClass("pbskids-captions-toggle-help").prop("title","Closed Captioning Help").html("?").on("click",c))};a('<div class="pbskids-captions-toggle-settings"/>').on("click",W).insertAfter(a(".pbskids-default-skin .vjs-big-play-button"));var f,g=function(b){var c=a(".vjs-text-track-settings .pbskids-captions-help");c.length||(c=a("<aside/>").addClass("pbskids-captions-help").appendTo(a(".pbskids-default-skin .vjs-text-track-settings")));var e=function(a){return a.trim().replace(/[\r\n]/g,"<br />")};c.html(['<h2 id="closedcaptioning">Closed Captioning</h2> <dl> <dt id="closedcaptions">What is closed captioning?</dt> <dd> <p>Closed captioning is the visual display of the audio portion of video programming. Captioning provides access to individuals who are deaf or hard of hearing.</p> </dd> <dt id="captioningconcerns">What if I have a concern with closed captioning on the online PBS KIDS video player(s) or PBS KIDS video iOS app?</dt> <dd> <p>For closed captioning feedback, please contact:</p> <blockquote><p>',b.pbsKidsVideoAppCaptionsContactName,"<br /> ",b.pbsKidsVideoAppCaptionsContactAddress,"<br /> Tel: ",b.pbsKidsVideoAppCaptionsContactPhone,"<br /> Fax: ",b.pbsKidsVideoAppCaptionsContactFax,'<br /> Email: <a href="mailto:',b.pbsKidsVideoAppCaptionsContactEmail,'">',b.pbsKidsVideoAppCaptionsContactEmail,"</a> </p></blockquote> <p>",e(b.pbsKidsVideoAppCaptionsInstructions),'</p> </dd> <dt id="nocaptions">Why do some videos have closed captioning and others do not?</dt> <dd> <p>',e(b.pbsKidsVideoAppCaptionsDescription),"</p> </dd> </dl>"].join("")).prepend(a("<button/>").addClass("pbskids-captions-close-help").prop("title","Close").html("X").on("click",d))},h=function(){var b=a('script[src*="/jquery.pbskidsvideo.latest.js"], script[src*="/jquery.pbskidsvideo.min-latest.js"]'),c=!(!b[0]||!b[0].src)&&b[0].src;if("function"==typeof URL){var d=new URL(c);return d.host}},i=function(){if(f)return void g(f);var b=["pbsKidsVideoAppCaptionsContactAddress","pbsKidsVideoAppCaptionsContactEmail","pbsKidsVideoAppCaptionsContactFax","pbsKidsVideoAppCaptionsContactName","pbsKidsVideoAppCaptionsContactPhone","pbsKidsVideoAppCaptionsDescription","pbsKidsVideoAppCaptionsInstructions"],c="{ videoApp { "+b.join(" ")+" } }",d=h();a.ajax({url:"https://graph.services.pbskids.org/graph?query="+encodeURIComponent(c),dataType:"json",headers:{"apollographql-client-name":"pbs.kids.producer-player","apollographql-client-version":"v"+window.org.pbskids.video.version+(d?"@"+d:"")},success:function(a){a&&a.data&&a.data.videoApp?(f=a.data.videoApp,g(f)):r("Closed captioning help info returned from API in unexpected format.")},error:function(){r("Could not load closed captioning help info!")}})};a(".pbskids-default-skin .vjs-default-button").on("click",d),a(".pbskids-default-skin .vjs-done-button").on("click",b),a(".pbskids-default-skin .vjs-close-button").on("click",b)}a(document).on(org.pbskids.video.VideoEvent.CAPTIONS_STATE_CHANGE,function(a){a.captionsState&&e()})};if(j(),!Eb&&(Xb.onVideoClick||Xb.onHoverOverlay.url)){var l=a('<div class="pbskids-onhover-overlay"/>').insertBefore(a(".pbskids-default-skin .vjs-loading-spinner"));Xb.onVideoClick&&l.css({cursor:"pointer"}).click(sa),"toggle-fullscreen"!==Xb.onVideoClick||Xb.onHoverOverlay.url||(Xb.onHoverOverlay={url:e+"pbsk/video/img/button_big.png",width:"43px",height:"43px",fs_url:e+"pbsk/video/img/button_small.png",fs_width:"78px",fs_height:"30px"}),Xb.onHoverOverlay.url&&(a('<img alt=""Exit Full Screen" class="normal-screen-img"/>').prop("src",Xb.onHoverOverlay.url).appendTo(l).css({width:Xb.onHoverOverlay.width,height:Xb.onHoverOverlay.height}),l.fs_url=l.fs_url||l.url,l.fs_width=l.fs_width||l.width,l.fs_height=l.fs_height||l.height,a('<img alt="Watch in Full Screen" class="full-screen-img"/>').prop("src",Xb.onHoverOverlay.fs_url).appendTo(l).css({width:Xb.onHoverOverlay.fs_width,height:Xb.onHoverOverlay.fs_height}),Pb&&l.addClass("has-touch"))}Wa.registerControl("muteToggleControl",Xb.muteToggleControl||""),Wa.registerControl("pauseToggleControl",Xb.pauseToggleControl||""),Wa.registerControl("captionsToggleControl",Xb.captionsToggleControl||""),Wa.registerControl("fullscreenToggleControl",Xb.fullscreenToggleControl||""),Wa.registerControl("timerRemaining",Xb.timerRemaining||""),Wa.registerControl("timerCurrent",Xb.timerCurrent||""),Wa.registerControl("timerDuration",Xb.timerDuration||""),Wa.registerControl("scrubber",Xb.scrubber||""),Wa.registerControl("volumeDisplay",Xb.volumeDisplay||""),Wa.registerControl("volumeSlider",Xb.volumeSlider||""),Wa.registerControl("verticalVolumeSlider",Xb.verticalVolumeSlider||"");for(var m=0;m<zb.length;m++)Ha.on(zb[m],ca);if(Ha.on("error",ba),Ha.textTracks().addEventListener("change",pa),Ha.textTracks().addEventListener("addtrack",na),Ha.textTracks().addEventListener("removetrack",oa),Ha.on("vast.adStart",ca),Ha.on("vast.adSkip",ca),Ha.on("vast.adError",ca),Ha.on("vast.adsCancel",ca),Ha.on("vast.reset",function(a){o("Sponsor Ad | "+a.type,a)}),Ha.on("vast.firstPlay",function(a){o("Sponsor Ad | "+a.type,a)}),Ha.on("fullscreenchange",function(){Wa.isFullscreen()||Wa.exitFullscreen()}),Pb&&!Mb){var q="#fullscreen",s=function(){return window.location.hash===q?"":window.location.hash};s()||(a(window).on("popstate",function(){!s()&&window.location.hash!==q&&Wa.isFullscreen()&&aa()}),Ha.on("fullscreenchange",function(){s()||(window.location.hash=Wa.isFullscreen()?q:"")}))}a(window).resize(ta),a(document).on(org.pbskids.video.VideoEvent.PLAY_STATE_CHANGE,ea),a(document).on(org.pbskids.video.VideoEvent.CURRENT_TIME_CHANGE,ia),a(document).on(org.pbskids.video.VideoEvent.DURATION_CHANGE,ja),a(document).on(org.pbskids.video.VideoEvent.SEEKING_CHANGE,ha),a(document).on(org.pbskids.video.VideoEvent.CAN_PLAY_STATE_CHANGE,fa),a(document).on(org.pbskids.video.VideoEvent.CAN_SEEK_STATE_CHANGE,ga),a(document).on(org.pbskids.video.VideoEvent.CAPTIONS_STATE_CHANGE,qa),a(document).on(org.pbskids.video.VideoEvent.VIDEO_END,ka),a(document).on(org.pbskids.video.VideoEvent.AD_START,va),a(document).on(org.pbskids.video.VideoEvent.AD_END,wa),Pb||(a(document).on(org.pbskids.video.VideoEvent.MUTE_CHANGE,la),a(document).on(org.pbskids.video.VideoEvent.VOLUME_CHANGE,ma)),Xb.debug&&n("Added VideoEvent Listeners"),c.disableKeyboard===!0||Pb&&!Ob||(a(document).on("keydown",Gb?Fa:Ga),Xb.debug&&n("Enabled KeyBoard Navigation"));var t={success:!0,id:a(Ha).prop("id"),ref:Ha,player:Wa,playerName:f,affiliateId:g,message:""};"function"==typeof Xb.onPlayerComplete&&Xb.onPlayerComplete.call(Wa,t),t.eventType=org.pbskids.video.PlayerEvent.PLAYER_READY,da(t),Xb.debug&&n("_finalize(): call onPlayerComplete() : data = ",t);var u="OOPS! The video could not be played. Try the next one.";videojs.addLanguage("en",{"The media could not be loaded, either because the server or network failed or because the format is not supported.":u}),videojs.addLanguage("en",{"No compatible source was found for this media.":u}),a("#"+b).resize(ua),ua(),Ka=setTimeout(function(){a("#"+b+"_flash_api").css({width:"101%"}),La=setTimeout(function(){a("#"+b+"_flash_api").css({width:""})},200)},200),c.muteOnLoad&&Wa.mute(),Xb.release&&cc(Xb.release),p("--------------------------------------------------"),p("jQuery vers.:      ",a.fn.jquery),p("VideoJS vers.:     ",videojs.VERSION),p("--------------------------------------------------"),p("VideoJS techName:  ",Ha.techName),p("videoType:         ",k),p("HLS_SUPPORT:       ",Lb),p("NATIVE_HLS_SUPPORT:",videojs.Vhs.supportsNativeHls),p("--------------------------------------------------"),p("IS_IE:             ",Cb),p("IS < IE10:         ",Db),p("IS_IOS:            ",Mb),p("ANDROID_VERSION:   ",videojs.ANDROID_VERSION),p("IS_ANDROID:        ",Fb),p("IS_OLD_ANDROID:    ",Jb),p("IS_KINDLE_FIRE:    ",Hb),p("IS_OLD_KINDLE:     ",Ib),p("IS_iPOCKET:        ",Eb),p("IS_TOUCH_PAD:      ",Nb),p("IS_GOOGLE_TV:      ",Gb),p("IS_WINDOWS_7:      ",Kb),p("--------------------------------------------------"),p("HAS_TOUCH:         ",Pb),p("HAS_POINTER MS10:  ",Boolean(window.MSPointerEvent)),p("HAS_POINTER MS11:  ",Boolean(window.PointerEvent)),p("--------------------------------------------------"),p("UA-String:         ",navigator.userAgent)}function C(a,b){var c;if("play"===a){if(!b)return void r("A release Object is required for this method.");if("play"===Ra)return;var d="episode"===(b.type||"").toLowerCase()?1:0,e="*null",g="*null";"string"==typeof b.nola_episode&&b.nola_episode.length>=3&&(e=b.nola_episode.substr(0,b.nola_episode.length-2),g=b.nola_episode.substr(-2));var h=b.duration&&b.duration<6e5?ns_.StreamingTag.ContentType.ShortFormOnDemand:ns_.StreamingTag.ContentType.LongFormOnDemand;c={ns_st_ci:b.guid,ns_st_cl:1e3*b.duration,ns_st_st:f||"*null",ns_st_pu:"PBS KIDS",ns_st_pr:b.series_title||"*null",ns_st_ep:b.title||"*null",ns_st_sn:e,ns_st_en:g,ns_st_ge:"KIDS",ns_st_ti:"*null",ns_st_ia:0,ns_st_ce:d,ns_st_ddt:b.airdate?b.airdate.split(" ")[0]:"*null",ns_st_tdt:b.encore_datetime?b.encore_datetime.split(" ")[0]:"*null",c3:"PBS KIDS",c4:b.series_title||"*null",c6:"*null"},o("COMSCORE: method = playVideoContentPart",c),Ra="play",Qa.playVideoContentPart(c,h)}else if("playAd"===a){if("playAd"===Ra)return;c={ns_st_cl:Math.round(1e3*kb)},o("COMSCORE: method = playVideoAdvertisement",c),Ra="playAd",Qa.playVideoAdvertisement(c,ns_.StreamingTag.AdType.LinearOnDemandPreRoll)}else if("stop"===a||"pause"===a){if("stop"===Ra)return;o("COMSCORE: method = stop"),Ra="stop",Qa.stop()}else Ra="",r("COMSCORE ERROR: '"+a+"' is not a valid comScore StreamingTag method.")}function D(a,b){if(b&&$a&&!Ia.adUnit){$a=!1,a=Math.max(a||0,0);var c,d=a/b.duration*100;isNaN(d)&&(d=0),c=0===d?"0%":d<5?"0-5%":d<10?"5-10%":d<20?"10-20%":d<30?"20-30%":d<40?"30-40%":d<50?"40-50%":d<60?"50-60%":d<70?"60-70%":d<80?"70-80%":d<90?"80-90%":d<95?"90-95%":"95-100%",ca("viewed",{release:b,percentViewed:d}),C("stop"),z("Duration Viewed",F(b),c,Math.ceil(a),[v,b.series_nola])}}function E(a,b){if(b){if(Ia.adUnit)return void o("Sponsor Ad | Ad playing, don't report playback event.");switch(a.toLowerCase()){case"mediacomplete":a="MediaComplete";break;case"mediastart":a="MediaStart",C("play",b);break;default:return}z("Playback",a,F(b),null,[v,b.series_nola])}}function F(a){var b=(a.series_title||"No-Series-Title")+" | "+(a.title||"No-Title")+" | "+(a.media_id||"No-Media-ID")+" | "+(a.type||"No-Video-Type");return b}function G(b,c,d,e){b&&("function"==typeof d&&b.each(function(){a(this).off(Qb),a(this).on(Qb,d)}),"function"==typeof c&&b.each(function(){a(this).off("click"),a(this).on("click",c)}),b.removeClass("disabled-control disabled").addClass("enabled-control").css(e||{}))}function H(b,c,d,e,f){b&&(b.removeClass("enabled-control").css(e||{}),!1!==f&&b.addClass("disabled-control disabled"),"function"==typeof d&&b.each(function(){a(this).off(Qb,d)}),"function"==typeof c&&b.each(function(){a(this).off("click",c)}))}function I(){return Jb||Ia.adUnit?void J():void(tb&&(G(tb.scrubber,null,P),G(tb.track),G(tb.thumb),ab=!0))}function J(a){tb&&(ab=!1,H(tb.scrubber,null,P,null,a),H(tb.track,null,null,null,a),H(tb.thumb,null,null,{left:"0"},a),T(null))}function K(){vb&&!Ya&&(G(vb.scrubber,null,Q),G(vb.track),G(vb.thumb),Ya=!0)}function L(a){vb&&(H(vb.scrubber,null,Q,null,a),H(vb.track,null,null,null,a),H(vb.thumb,null,null,null,a),Ya=!1)}function M(){O(vb),ma({volume:Wa.muted()===!0?0:Wa.volume()})}function N(){O(tb),tb.scrubTo(jb/kb)}function O(b,c){if(b&&(b.bounds=null,b.scrubbing=!1,"function"==typeof c&&(b.updateFunction=c),"none"===b.scrubber.css("display").toLowerCase()&&b.scrubber.css("display","block"),b.track.width()+b.track.height()>0)){var d=function(b){for(var c,d=1;!Fb&&b;){try{c=b&&b.style?b.style.zoom:"",c="string"==typeof c&&c.indexOf("%")>-1?parseFloat(c)/100:parseFloat(c||1)}catch(e){c=!1}if(c===!1)return d;d*=isNaN(c)||0===c?1:c,b=a(b).parent().get(0)}return d},e=function(b){for(var c,d,e,f={x:1,y:1};b;){try{d=e=1,c=a(b).css("transform"),c&&c.match(/\(.*\)/)&&(c=c.split("(")[1].split(")")[0].split(","),c&&("undefined"!=typeof c[0]&&(d=parseFloat(c[0])),"undefined"!=typeof c[3]&&(e=parseFloat(c[3]))))}catch(g){d=e=!1}if(d===!1)return f;f.x*=isNaN(d)||0===d?1:d,f.y*=isNaN(e)||0===e?1:e,b=a(b).parent().get(0)}return f},f=b.track.offset(),g=d(b.thumb),h=d(b.track),i=e(b.track),j=e(b.thumb),k=-f.top*(Cb?1:h),l=-f.left*(Cb?1:h),m=b.track.width()*h*i.x,n=b.track.height()*h*i.y,o=b.thumb.outerWidth()*g*j.x,p=b.thumb.outerHeight()*g*j.y;b.scrubber.css("display",""),b.bounds={top:k,left:l,width:m,height:n},b.scrubTo=function(a){var c,d=0;b.vertical===!0?(a=1-Math.min(1-d,Math.max(d,a||d)),c=(n-p)*a/h/i.x,b.thumb.css("top",c)):(a=Math.min(1-d,Math.max(d,a||d)),c=(m-o)*a/h/i.y,b.thumb.css("left",c))}}}function P(a){R(a,tb)}function Q(a){R(a,vb)}function R(b,c){b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,c.scrubbing=!0,a(document).on(Rb,c,S),a(document).on(Sb,function(a){T(a,c)}),Pb&&a(document).on(Tb,function(a){T(a,c)}),S(b,c)}function S(a,b){a.preventDefault&&a.preventDefault(),b=b||a.data;var c=NaN,d=function(){var b=!(!a.originalEvent.touches||!a.originalEvent.touches[0])&&a.originalEvent.touches[0];return b=b?b:!(!a.originalEvent.changedTouches||!a.originalEvent.changedTouches[0])&&a.originalEvent.changedTouches[0]}(),e=Pb&&d?d:Ob?a.originalEvent:a;e&&b&&b.bounds&&(c=b.vertical===!0?Math.min(1,Math.max(0,b.bounds.height-(e.pageY+b.bounds.top))/b.bounds.height):Math.min(1,Math.max(0,e.pageX+b.bounds.left)/b.bounds.width),b.scrubTo(c),b.updateFunction(c))}function T(b,c){a(document).off(Rb,S),a(document).off(Sb,T),Pb&&a(document).off(Tb,T),c&&(c.scrubbing=!1)}function U(a){if(Ia.adUnit)return void n("Captions | _displayCaptions() | AD IS PLAYING, ABORT",{show:a});a=a===!0;var b=a?"showing":"disabled";Ba(a),Ha&&Ha.textTracks().length>0?(n("Captions | _displayCaptions()",{show:a,mode:b,tracks:Ha.textTracks()}),Ha.textTracks()[0].mode=b):(n("Captions | _displayCaptions()",{show:a,mode:b,tracks:"no tracks"}),ca("captionschange",{captionsState:b}))}function V(){n("Captions | toggleCaptions() _showingCaptions = ",_a),U(!_a)}function W(){Z()?X():Y()}function X(){Ha&&(Ha.textTrackSettings.hide(),ra())}function Y(){Ha&&(cb=!Ha.paused(),Ha.pause(),Ha.textTrackSettings.show(),!Mb&&!Wa.isFullscreen()&&Ha.width()<452?aa():Mb&&Wa.isFullscreen()&&aa())}function Z(){return Ha&&Ha.textTrackSettings&&!Ha.textTrackSettings.hasClass("vjs-hidden")}function $(){Wa.paused()||Jb?(B("togglePause","Unpause"),Wa.unpause()):(B("togglePause","Pause"),Wa.pause())}function _(){Wa.muted()?Wa.unmute():Wa.mute()}function aa(){n("toggle-fullscreen()"),Wa.isFullscreen()?(B("toggleScreen","Normal"),X(),Wa.exitFullscreen()):(B("toggleScreen","Fullscreen"),Wa.enterFullscreen())}function ba(b){var c;if(b=b.type?Ha.error():b,n("_dispatchVideoErrorEvent() err",b),!b||0!==b.code){if(!b||!b.code)return void(org.pbskids.video.VideoErrorEvent.debug&&n("Not a valid video error",b,"warn"));switch(b.code){case 403:c=a.Event(org.pbskids.video.VideoErrorEvent.GEO_RESTRICTED),b.type="GEO_RESTRICTED",b.message="PBS video is restricted to the United States and its territories.";break;case 404:c=a.Event(org.pbskids.video.VideoErrorEvent.VIDEO_NOT_FOUND),b.type="VIDEO_NOT_FOUND";break;case 410:c=a.Event(org.pbskids.video.VideoErrorEvent.VIDEO_EXPIRED),b.type="VIDEO_EXPIRED"}if(!b.type)return void(org.pbskids.video.VideoErrorEvent.debug&&n("Not a valid video error",b,"warn"));c&&(c.code=b.code,c.message=b.message,c.videoErrorData=b,a(document).trigger(c),window.$&&window.$!==a&&window.$(document).trigger(c),Ha.error(b.message)),org.pbskids.video.VideoErrorEvent.debug&&(n("Video Error Event | "+b.type,b),n("Video Error EVENT | src",Ha.src));var d=Oa?Oa.guid||"No-GUID":"No-GUID";A("VideoErrorEvent",b.type,d)}}function ca(b,c){if(b){var d,e=c||{},f=null,g=(b.type||b).replace(/\./g,"_");switch(g){case"unload":d=a.Event(org.pbskids.video.VideoEvent.VIDEO_UNLOAD),f=function(){ca("durationchange",{duration:0}),ca("canplaychange",{canPlay:!1}),ca("canseekchange",{canSeek:!1})};break;case"loadstart":f=function(){ca("canplaychange",{canPlay:!1})};case"loadedmetadata":f||(f=function(){ca("canplaychange",{canPlay:!0})});case"waiting":d=a.Event(org.pbskids.video.VideoEvent.LOAD_STATE_CHANGE),e.loadState="loading";break;case"loadeddata":d=a.Event(org.pbskids.video.VideoEvent.LOAD_STATE_CHANGE),e.loadState="ready";break;case"canplaychange":if(db===e.canPlay)return;d=a.Event(org.pbskids.video.VideoEvent.CAN_PLAY_STATE_CHANGE),db=e.canPlay=!!e.canPlay;break;case"play":eb!==Wa.canSeek()&&(f=function(){ca("canseekchange",{canSeek:!eb})},Ba(!1));case"pause":d=a.Event(org.pbskids.video.VideoEvent.PLAY_STATE_CHANGE),e.playState="play"===g?"playing":"paused";break;case"timeupdate":if(e.time=Ha.currentTime(),!Ma)return;if(isNaN(e.time)||e.time<0||e.time===1/0)return;d=a.Event(org.pbskids.video.VideoEvent.CURRENT_TIME_CHANGE),e.percent=kb>0?e.time/kb:0,e.remainingTime=kb>0?kb-e.time:0,e.guid=Ma.guid,e.media_id=Ma.media_id,e.series_title=Ma.series_title,e.series_nola=Ma.series_nola,eb||Wa.canSeek()!==!0||(f=function(){ca("canseekchange",{canSeek:!0})});break;case"durationchange":if("undefined"==typeof e.duration&&(e.duration=Ha.duration()),isNaN(e.duration)||e.duration<0||e.duration===1/0)return;d=a.Event(org.pbskids.video.VideoEvent.DURATION_CHANGE),kb=e.duration;break;case"videostarted":if(!e.release)return;d=a.Event(org.pbskids.video.VideoEvent.VIDEO_START);break;case"ended":if(Ha.currentTime()>kb+2)return;d=a.Event(org.pbskids.video.VideoEvent[Ia.adUnit?"AD_END":"VIDEO_END"]);break;case"viewed":if(!e.release)return;d=a.Event(org.pbskids.video.VideoEvent.VIDEO_VIEWED),e.percentViewed=e.percentViewed||0;break;case"mutechange":d=a.Event(org.pbskids.video.VideoEvent.MUTE_CHANGE),e.muted=fb=void 0!==e.muted?e.muted:Ha.muted();break;case"volumechange":d=a.Event(org.pbskids.video.VideoEvent.VOLUME_CHANGE),e.muted=Ha.muted(),e.volume=Ha.volume(),e.muted!==fb&&(f=function(){ca("mutechange",{muted:e.muted})});break;case"captionschange":if(_a===Boolean("showing"===e.captionsState))return;d=a.Event(org.pbskids.video.VideoEvent.CAPTIONS_STATE_CHANGE),_a=!_a;break;case"canseekchange":if(eb===e.canSeek)return;d=a.Event(org.pbskids.video.VideoEvent.CAN_SEEK_STATE_CHANGE),eb=e.canSeek=!!e.canSeek;break;case"seeking":case"seeked":d=a.Event(org.pbskids.video.VideoEvent.SEEKING_CHANGE),e.time=Ha.currentTime(),e.percent=kb>0?e.time/kb:0,e.remainingTime=kb>0?kb-e.time:0,e.seeking="seeking"===g;break;case"vast_adStart":d=a.Event(org.pbskids.video.VideoEvent.AD_START);break;case"vast_adSkip":case"vast_adError":case"vast_adsCancel":if(ib)return void(ib=!1);d=a.Event(org.pbskids.video.VideoEvent.AD_END);break;default:return void(org.pbskids.video.VideoEvent.debug&&q("event type, "+g+", is not defined",b))}d.origEvent=g,d.videoData=e;for(var h in e)d[h]=e[h];org.pbskids.video.VideoEvent.debug&&"timeupdate"!==g&&n("Video Event | "+d.type,d),a(document).trigger(d),window.$&&window.$!==a&&window.$(document).trigger(d),f&&f()}}function da(b){var c,d={};switch(b.eventType=(b.eventType||"").replace(/\./g,"_"),b.eventType){case org.pbskids.video.PlayerEvent.PLAYER_READY:d.success=b.success||!1,d.id=b.id||"",d.ref=b.ref||void 0,d.player=b.player||void 0;break;default:return void(org.pbskids.video.PlayerEvent.debug&&q("event type, "+b.eventType+", is not defined",b))}c=a.Event(b.eventType),c.playerData=d;for(var e in d)c[e]=d[e];a(b.caller||document).trigger(c),window.$&&window.$!==a&&window.$(b.caller||document).trigger(c)}function ea(a){var b="playing"===a.playState;!Ia.adUnit&&$a&&(b?C("play",Ma):C("pause")),b&&(Za=!0),nb&&!Jb&&nb.toggleClass("playing",b).toggleClass("paused",!b),Ha.controls()&&Ha.controls(!1),ab||I()}function fa(a){return a&&a.canPlay?(G(nb,$),G(ob,V),mb&&!Xa&&(G(mb,_),Xa=!0),K(),a.volume=Wa.muted()?0:Wa.volume(),void ma(a)):(H(nb,$),void H(ob,V))}function ga(a){a.canSeek?I():J()}function ha(a){jb=a.time,rb&&rb.html(Wa.formatTime(a.time)),qb&&qb.html(Wa.formatTime(a.remainingTime))}function ia(a){lb+=a.time-jb,jb=a.time,!$a&&jb>0&&($a=!0,E("MediaStart",Ma),ca("videostarted",{release:Ma}),G(nb,$),Ia.adUnit&&(hb=!0)),rb&&rb.html(Wa.formatTime(a.time)),qb&&qb.html(Wa.formatTime(a.remainingTime)),tb&&tb.scrubbing===!1&&tb.scrubTo(a.percent)}function ja(a){sb&&sb.html(Wa.formatTime(a.duration)),qb&&qb.html(Wa.formatTime(Wa.remainingTime()))}function ka(){bb=!0,E("MediaComplete",Ma),D(lb,Ma,1)}function la(b){mb&&(mb.toggleClass("muted",b.muted===!0),a("html").toggleClass("video-player-muted",b.muted===!0)),b.volume=b.muted===!0?0:Wa.volume(),ma(b)}function ma(a){ub&&ub.html(Math.round(100*a.volume)+"%"),vb&&vb.scrubTo&&!vb.scrubbing&&vb.scrubTo(a.volume)}function na(){n("Captions | _onAddTrack()",{_showingCaptions:_a,tracks:Ha.textTracks()}),Ha.textTracks().length>Ha.remoteTextTracks().length&&(n("Captions | _onAddTrack(), call _removeRemoteCaptions()"),za()),n("Captions | _onAddTrack(), call _displayCaptions()"),U(_a)}function oa(){n("Captions | _onRemoveTrack()"),Ha.textTracks().length>Ha.remoteTextTracks().length&&(n("Captions | _onRemoveTrack(), call _displayCaptions()"),U(_a))}function pa(){n("Captions | _onTextTrackListModeChange()| dispatch captionschange event",{tracks:Ha.textTracks(),captionsState:Ha.textTracks()[0].mode}),ca("captionschange",{captionsState:Ha.textTracks()[0].mode})}function qa(a){n("Captions | _onCaptionsStateChange()",a),Ha.removeClass("pbskids-captions-showing"),Ha.removeClass("pbskids-captions-disabled"),Ha.addClass("pbskids-captions-"+a.captionsState),ob&&ob.toggleClass("captions-on","showing"===a.captionsState)}function ra(){cb&&Ha.play()}function sa(b){switch(Xb.onVideoClick){case"toggle-fullscreen":var c=function(){return b.target&&b.target.className&&b.target.className.split(" ").indexOf("full-screen-img")!==-1};Pb&&!Mb&&Wa.isFullscreen()&&!c()?a(".video-js").toggleClass("vjs-user-active").toggleClass("vjs-user-inactive"):aa();break;case"toggle-pause":$()}}function ta(){vb&&M(),tb&&N()}function ua(){if(n("_onPlayerResized() _player = ",Ha),Ha&&Ha.el_){var a=Math.round(Ha.width()/Xb.aspectRatio);Ha.height(a),Ha.tech().height()<320?Ha.addClass("pbskids-tiny-video"):Ha.removeClass("pbskids-tiny-video")}}function va(a){o("_onAdStart()",a),J(),H(ob,V),C("playAd"),Ha.currentTime(0)}function wa(a){o("Sponsor Ad | _onAdEnd",a),$a=!1,n("Captions | _onAdEnd(), call _removeNativeCaptions()",a),hb?(n("_onAdEnd(), Ad played, call _reloadTech()"),dc(Na)):(n("Captions | _onAdEnd(), Ad didn't play, add remote captions for the release."),xa()),I(),G(ob,V)}function xa(c){if(Mb)return void n("Captions | _addCaptions() | Not adding Video JS caption tracks in iOS. Instead we will use native browser captions.");n("Captions | _addCaptions()"),c=c||Ma;var d=function(a){Ha.addRemoteTextTrack({src:a,kind:"captions",language:"en",label:"english"},!0),n("Captions | Loading caption from URI...",a)};c&&0===Ha.textTracks().length&&c.captions&&c.captions.webvtt&&(c.captions.webvtt.url=c.captions.webvtt.url.replace("http://","https://"),n("Captions | _addCaptions() | No Text Tracks in video, add remote tracks",{"release.captions":c.captions}),a("#"+b+"_html5_api").attr("crossorigin","anonymous"),d(c.captions.webvtt.url));var e=[].slice.call(Ha.textTracks()).filter(function(a){return!a.src});e.forEach(function(a){Ha.removeRemoteTextTrack(a)}),0===Ha.textTracks().length&&d("data:text/vtt;base64,V0VCVlRUCgowMDowMC4wMDAgLS0+IDk5Ojk5LjAwMCBhbGlnbjptaWRkbGUgcG9zaXRpb246MCUsc3RhcnQgbGluZTo5MCUgc2l6ZToxMDAlCjxpPkNhcHRpb25zIG5vdCBhdmFpbGFibGUgZm9yIHRoaXMgbWVkaWEuPC9pPg==");
}function ya(){for(n("Captions | _removeNativeCaptions()");Ha.textTracks().length>0&&Ha.textTracks().removeTrack_;)n("Captions | removing native track from ad"),Ha.textTracks().removeTrack_(Ha.textTracks()[0])}function za(){for(n("Captions | _removeRemoteCaptions()");Ha.remoteTextTracks().length>0;)Ha.removeRemoteTextTrack(Ha.remoteTextTracks()[0])}function Aa(){var a=[];if(Mb){var b=Ha.tech_&&Ha.tech_.el_&&Ha.tech_.el_.textTracks&&Ha.tech_.el_.textTracks.length;b&&(a=Array.prototype.slice.call(Ha.tech_.el_.textTracks))}return a}function Ba(a){var b=Aa();b.length&&(b[0].mode=a?"showing":"hidden")}function Ca(a,b){n("_enableProducerTracking()");var c=Ja;if(c&&c.length>0)for(var d=0;d<c.length;d++)__KIDS_Video_Tracking("create",c[d].tracking_id,"auto",{name:c[d].nola});n("_enableProducerTracking() :: Enabled"),a.apply(null,b||[])}function Da(b,c){n("_getHostProgram()");var d=function(d){if(d&&d.playerName)return f=d.playerName,g=d.affiliateId||"",h=d.defaultProgram||"",i=d.defaultProgramTitle||"",j="",A("Validated jsPlugin","Player Location",window.location.href),void(h?a.ajax({type:"GET",url:m+"show-tracking",dataType:"json",fail:function(){var a="Connection error, please try again in a moment";r(a,null,!0)},success:function(a){Ja=a;var d=a.filter(function(a){return a.slug===h||"string"==typeof h&&h.split(",").indexOf(a.slug)>-1}).length>0;d||(j=h,h="",i=""),b.apply(this,c||[])}}):b.apply(this,c||[]));var e="This is not an authorized instance of a PBS KIDS video player";A("Unauthorized jsPlugin","Player Location",window.location.href),r(e,null,!0)};a.ajax({type:"GET",url:m+"validate-player",dataType:"json",data:{program:window.location.href},fail:function(){var a="Connection error, please try again in a moment";r(a,null,!0)},success:d})}function Ea(a,b){var c=window.PointerEvent?"touch-action":"-ms-touch-action";a.style[c]=b;var d=a.childNodes;for(var e in d)d[e].style&&(d[e].style[c]=b)}function Fa(a){var b=a.keyCode;switch(b){case Ab.SPACE:case Bb.TOGGLE_PAUSE:Wa.togglePause();break;case Bb.STOP:Wa.pause();break;case Bb.FORWARD:Wa.seekToTime(Wa.currentTime()+10);break;case Bb.REWIND:Wa.seekToTime(Wa.currentTime()-5)}}function Ga(a){var b=a.keyCode;switch(b){case Ab.ENTER:case Ab.SPACE:Wa.togglePause(),a.preventDefault();break;case Ab.RIGHT:a.shiftKey||(Wa.seekToTime(Wa.currentTime()+10),a.preventDefault());break;case Ab.LEFT:a.shiftKey||(Wa.seekToTime(Wa.currentTime()-5),a.preventDefault());break;case Ab.UP:Pb||Wa.volume(Wa.volume()+.1),a.preventDefault();break;case Ab.DOWN:Pb||Wa.volume(Wa.volume()-.1),a.preventDefault();break;case Ab.C:!Pb&&a.shiftKey&&V()}}var Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta="org.pbskids.video.Player",Ua=e+"pbsk/video/lib/assets/css/video-js.css",Va=(new Date).getTime(),Wa=this,Xa=!1,Ya=!1,Za=!1,$a=!1,_a=!1,ab=!1,bb=!0,cb=!1,db=!1,eb=!1,fb=!1,gb=100,hb=!1,ib=!1,jb=0,kb=0,lb=0,mb=null,nb=null,ob=null,pb=null,qb=null,rb=null,sb=null,tb=null,ub=null,vb=null,wb="3005420",xb=Math.random()<=.1,yb=function(){var a="https://pubads.g.doubleclick.net/gampad/ads",b="",c={impl:"s",gdfp_req:"1",ad_rule:"1",tfcd:"0",env:"vp",unviewed_position_start:"1",output:"xml_vast2",iu:"22540141786/n6735.pbs.kids",cmsid:"2585507",correlator:Va,sz:"400x300"};for(var d in c)b+=(b?"&":"?")+d+"="+c[d];return a+b}(),zb=["durationchange","ended","fullscreenchange","loadedalldata","loadeddata","loadedmetadata","loadstart","pause","play","seeked","seeking","timeupdate","volumechange","waiting"],Ab={SPACE:32,ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,C:67},Bb={FORWARD:228,REWIND:227,STOP:178,TOGGLE_PAUSE:179},Cb=/MSIE\s/.test(navigator.userAgent)||/Trident.*rv\:11\./.test(navigator.userAgent),Db=Cb&&!Boolean(window.requestAnimationFrame),Eb=/iphone|ipod/gi.test(navigator.appVersion),Fb=/android/gi.test(navigator.appVersion),Gb=/googletv/gi.test(navigator.appVersion),Hb=/silk|kindlefire/gi.test(navigator.appVersion),Ib=Hb&&(!Fb||videojs.ANDROID_VERSION<4),Jb=Fb&&videojs.ANDROID_VERSION<4||Ib,Kb=/Windows NT 6\.1/.test(navigator.userAgent),Lb=!(Jb||Gb||Db||Cb&&Kb),Mb=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Nb=/hp-tablet/gi.test(navigator.appVersion),Ob=Boolean(window.PointerEvent||window.MSPointerEvent),Pb="ontouchstart"in window&&!Nb,Qb=window.PointerEvent?"pointerdown":window.MSPointerEvent?"MSPointerDown":Pb?"touchstart":"mousedown",Rb=window.PointerEvent?"pointermove":window.MSPointerEvent?"MSPointerMove":Pb?"touchmove":"mousemove",Sb=window.PointerEvent?"pointerup":window.MSPointerEvent?"MSPointerUp":Pb?"touchend":"mouseup",Tb=window.PointerEvent?"pointerout":window.MSPointerEvent?"MSPointerOut":Pb?"touchcancel":document.attachEvent?"mouseleave":"mouseout",Ub=videojs.browser.IS_ANY_SAFARI,Vb=function(a){return{"com.microsoft.playready":a.playready_license,"com.widevine.alpha":a.widevine_license,"com.apple.fps.1_0":{getContentId:function(a,b){return String.fromCharCode.apply(null,new Uint16Array(b.buffer))},certificateUri:a.fairplay_certificate,licenseUri:a.fairplay_license}}},Wb=function(a){return"object"==typeof a&&a.url?a.drm_enabled?(s(Ha),[{src:a.url,type:"hls"===a.format?"application/x-mpegURL":"application/dash+xml",keySystems:Vb(a)}]):a.url:a},Xb={debug:!1,autoPlay:!0,aspectRatio:16/9,disableKeyboard:!1,muteOnLoad:!1,onPlayerComplete:null,onVideoClick:"",muteToggleControl:"",pauseToggleControl:"",captionsToggleControl:"",fullscreenToggleControl:"",scrubber:"",timerRemaining:"",timerCurrent:"",timerDuration:"",volumeDisplay:"",volumeSlider:"",verticalVolumeSlider:"",loadingOverlay:{url:e+"pbsk/video/img/arrowspin.gif",width:"50px",height:"50px",color:"white",opacity:90},playIconOverlay:{url:e+"pbsk/video/img/button_overlay_play.png",width:"",height:"",color:"black",opacity:50},onHoverOverlay:{url:"",width:"",height:"",fs_url:"",fs_width:"",fs_height:""}};if("string"!=typeof b)return Sa="org.pbskids.video.Player requires "+(arguments.length>0?"the first":"one")+" parameter of type String",void r(Sa,null,!0);if(b=b.substr(b.indexOf("#")+1),!document.getElementById(b))return Sa='An html element with the id, "'+b+'",  could not be found',void r(Sa,null,!0);var Yb=function(b,c){"string"==typeof b&&"function"==typeof c&&(a(document).off(b,c),a(document).on(b,c))},Zb=function(b,c){"string"==typeof b&&"function"==typeof c&&a(document).off(b,c)},$b=function(b){function c(c){if(o("Sponsor Ad | Make ajax request for "+c),Db){o("Sponsor Ad | Use XDomainRequest()");var f=new XDomainRequest;if(!f)return q("Sponsor Ad | Could not create XDomainRequest()"),void b(null,"<VAST/>");f.onerror=e,f.ontimeout=e,f.onload=function(b){d(a.parseXML(b.target.responseText))},f.timeout=8e3,f.open("get",c),f.send()}else o("Sponsor Ad | Use $.ajax"),a.ajax({url:c,dataType:"xml",success:d,error:e,xhrFields:{withCredentials:!0}})}function d(d){if(o("Sponsor Ad | XML Loaded"),d||(q("Sponsor Ad | No XML content. Abort!"),b(null,"<VAST/>")),a("Playlist Preroll Ad",d).length>0){var e=a.trim(a("Playlist Preroll Ad",d)[0].textContent);return o("Sponsor Ad | XML contains a redirect url:",e),g++,void(g>f?(q("Sponsor Ad | Too many ad redirects. Abort!",void 0,!0),b(null,"<VAST/>")):c(e))}o("Sponsor Ad | XML Vast Content:",d),a('MediaFile[type!="video/mp4"]',d).remove(),a("VideoClicks",d).remove();var h;"undefined"!=typeof XMLSerializer?(o("Sponsor Ad | Use XMLSerializer()"),h=(new XMLSerializer).serializeToString(d)):(o("Sponsor Ad | Use XMLOBJECT.xml"),h=d.xml),o("Sponsor Ad | Feed XML String to the VAST-Video-Plugin"),b(null,h)}function e(){o("Sponsor Ad | Error loading VAST XML"),b(null,"<VAST/>")}var f=5,g=0;return Ma||Ma.media_id?void c(yb+"&vid="+Ma.media_id):(q("Sponsor Ad | Video does not have a media id. Abort call to ad-service. ",void 0,!0),void b(null,"<VAST/>"))},_b=function(b,c){var d="Could not find a published video for this site matching these parameters:",e={},f={page:1,page_size:20,available:"public"};if("object"==typeof b&&null!==b){for(var g in b)f[g]=b[g];b.startindex&&b.endindex&&(f.page_size=b.endindex-b.startindex+1)}h&&(f.program=h),j&&(f.category=j),f.program&&(f.program=f.program.toLowerCase()),e=ac(f),a.ajax({type:"GET",url:m+"show-list/",dataType:"json",data:e,success:function(a){a.items&&a.items.length>0?cc(a.items[0],c):q(d,b,!0)}})},ac=function(a){var b={},c=a.keyword||a.keywords||a.group||"";return b.shows=h||a.program||"",b.shows_title=i||a.program||"",b.page=a.page||1,b.page_size=Math.min(a.page_size||20,50),b.available=a.available||"public",b.sort=a.sort||"-encored_on",a.category&&(c+=c?",":"",c+=j),c&&(a.keyword?b.keyword=c:b.keywords=c),a["episode-id"]&&(b["episode-id"]=a["episode-id"]),a.guid&&(b.guid=a.guid),a.type&&(b.type=a.type),b},bc=function(a,b){return a.videos.find(function(a){if(a.drm_enabled&&(!b||a.bitrate===b))return Ub?"hls"===a.format:"dash"===a.format})},cc=function(c,d){function e(d){return bb||(Na=void 0,o("Sponsor Ad | video did not end naturally, trigger vast.reset"),ib=!0,Ha.trigger("vast.reset")),bb=!1,hb=!1,o("Release type = ",c.type),"string"==typeof c.type&&"episode"===c.type.toLowerCase()?Ia.enable():Ia.disable(),a("#"+b+"_html5_api").removeAttr("crossorigin"),Oa=c,D(lb,Ma,2),lb=0,jb=0,"ok"!==d.status?void ba({code:d.http_code,message:(d.message||"").replace(/^Redirect/,"This video")+"."}):(h.url=d.url=d.url.replace("http://","https://"),n("Captions | _loadVideo(), Remove all captions."),za(),ya(),Qa=new ns_.StreamingTag({customerC2:wb}),window._comScoreStreamingTag=Qa,Ha.poster(c.images[Pa]?c.images[Pa].url||"":""),Ha.src(Wb(h)),xb&&Ha.mux.emit("videochange",{video_id:c.guid||"No-GUID",video_title:c.title||"No-Title",video_series:c.series_title||c.series_nola||"No-Series-Title",video_producer:c.series_title||c.series_nola||"No-Series-Title",video_content_type:c.type||"No-Type",video_duration:1e3*c.duration,video_is_live:!1,video_language_code:"",video_variant_name:"",video_variant_id:"",video_encoding_variant:"",video_cdn:""}),xa(c),Ma=c,void(Na=h))}var f;if(!Ia.adUnit){if(Ha.controls()&&Ha.controls(!1),void 0===d&&(d=Xb.autoPlay),d!==Ha.autoplay()&&Ha.autoplay(d),"object"!=typeof c){if("string"!=typeof c)return f="No ReleaseObject or guid was provided. Exiting "+(d?".loadAndPlay()":".loadAndStop()")+".",void q(f,null,!0);if("geocheck"===c)c={guid:"urs-error-handling-test",videos:{},images:{}},c.images[Pa]="",c.videos=[{format:k,url:"https://urs.pbs.org/redirect/0799778fa666469aa19eea926f771bef/"}];else if("expired"===c)c={guid:"urs-error-handling-test",videos:{},images:{}},c.images[Pa]="",c.videos=[{format:k,url:"https://urs.pbs.org/redirect/240d6a05fe884d8dabb79bfc88bfe603/"}];else{if("notfound"!==c)return"first"===c?(Ha.src()&&(n("_loadVideo() call _unload()","unload current video while fetching the next one."),ec()),void _b({status:"available"},d)):(Ha.src()&&(n("_loadVideo() call _unload()","unload current video while fetching the next one."),ec()),void _b({guid:c},d));c={guid:"urs-error-handling-test",videos:{},images:{}},c.images[Pa]="",c.videos=[{format:k,url:"https://urs.pbs.org/redirect/not-found/"}]}}var g=bc(c,"720p")||bc(c),h=g?g:c.videos.find(function(a){return a.format===k}),i=h.url;if(!i)return f="No compatible video source was found in the ReleaseObject. Exiting "+(d?".loadAndPlay()":".loadAndStop()")+".",void q(f,null,!0);c.images[Pa]&&c.images[Pa].url&&(c.images[Pa].url=c.images[Pa].url.replace("http://","https://")),i=i.replace("http://","https://"),i.match(/\/urs(-qa)?\.pbs\.org\//)?(n("Following redirect",h),a.ajax({type:"GET",url:i,dataType:"jsonp",data:{format:"jsonp"},success:e})):(n("No redirect needed",h),e(Object.assign({},h,{status:"ok"})))}},dc=function(a){if(n("_reloadTech() source = ",a),Ha.tech.eventHandler&&(n("Temporarily turn off error handling."),Ha.tech.off("error")),Ia.adUnit&&(Ia.adUnit=null,hb=!1,o("Sponsor Ad | _unload(), dispatch vast.adsCancel"),ca("vast.adsCancel"),ca("unload")),"Html5"===Ha.techName&&Ha.tag)a?Ha.src(Wb(a)):(Ha.tag.src="",Ha.tag.src=null);else for(var b=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},c=0,d=Ha.options_.techOrder;c<d.length;c++){var e=b(d[c]),f=window.videojs[e];if(f&&f.isSupported()){a?(Ia.disable(),Ha.loadTech(e,{src:a.url})):Ha.loadTech(e);break}}a&&(n("Captions | _reloadTech(), Add remote captions for the release."),xa()),Ha.muted(fb),o("Sponsor Ad | _reloadTech(), clear ad unit data"),Ha.removeClass("vjs-ad-playing"),Ha.tech.eventHandler&&(n("turn error handling back on"),Ha.tech.on("error",Ha.tech.eventHandler))},ec=function(){n("_unload()"),Ha.pause(),Ha.poster(null),n("Captions | _unload() Remove all captions."),za(),ya(),Na=void 0,Ha.src()&&(n("_unload() call _reloadTech()"),dc())},fc=function(){n("_destroy()"),clearTimeout(Ka),clearTimeout(La),a("html").removeClass("no-flash-video"),a("#pbskids-videojs-css").remove(),J(!1),L(!1),H(nb,$,null,null,!1),H(ob,V,null,null,!1),H(mb,_,null,null,!1),H(pb,aa,null,null,!1);for(var b=0;b<zb.length;b++)Ha.off(zb[b],ca);Ha.off("error",ba),Ha.textTracks()&&(Ha.textTracks().removeEventListener("change",pa),Ha.textTracks().removeEventListener("addtrack",na),Ha.textTracks().removeEventListener("removetrack",oa)),Ha.off("vast.adStart",ca),Ha.off("vast.adSkip",ca),Ha.off("vast.adError",ca),Ha.off("vast.adsCancel",ca),a(window).resize(ta),a(document).off(org.pbskids.video.VideoEvent.PLAY_STATE_CHANGE,ea),a(document).off(org.pbskids.video.VideoEvent.CURRENT_TIME_CHANGE,ia),a(document).off(org.pbskids.video.VideoEvent.DURATION_CHANGE,ja),a(document).off(org.pbskids.video.VideoEvent.SEEKING_CHANGE,ha),a(document).off(org.pbskids.video.VideoEvent.CAN_PLAY_STATE_CHANGE,fa),a(document).off(org.pbskids.video.VideoEvent.CAN_SEEK_STATE_CHANGE,ga),a(document).off(org.pbskids.video.VideoEvent.CAPTIONS_STATE_CHANGE,qa),a(document).off(org.pbskids.video.VideoEvent.VIDEO_END,ka),a(document).off(org.pbskids.video.VideoEvent.AD_START,va),a(document).off(org.pbskids.video.VideoEvent.AD_END,wa),Pb||(a(document).off(org.pbskids.video.VideoEvent.MUTE_CHANGE,la),a(document).off(org.pbskids.video.VideoEvent.VOLUME_CHANGE,ma)),c.disableKeyboard===!0||Pb&&!Ob||a(document).off("keydown",Gb?Fa:Ga),d&&(window.kidsPlayer=null,window.kidsVjsPlayer=null),xb&&(Ha.mux.emit("destroy"),Ha.mux.emit=function(){}),Ha.dispose(),Ha=null};this.createEndpointParameters=ac,this.currentRelease=function(){return Ma},this.isStationPlayer=function(){return!1},this.addEventListener=function(a,b){Yb(a,b)},this.removeEventListener=function(a,b){Zb(a,b)},this.supportsFullscreen=function(){return!!Ha&&Ha.supportsFullScreen()},this.isFullscreen=function(){return!!Ha&&Ha.isFullscreen()},this.toggleFullscreen=function(){aa()},this.enterFullscreen=function(){Ha&&(Ha.requestFullscreen(),a("html").addClass("isfullscreen"))},this.exitFullscreen=function(){Ha&&(Ha.exitFullscreen(),a("html").removeClass("isfullscreen"))},this.aspectRatio=function(){return Xb.aspectRatio},this.videoType=function(){return k},this.isFlashPlayer=function(){return!1},this.supportsHLS=function(){return Lb},this.commonName=function(){return f},this.playerName=function(){return f},this.affiliateId=function(){return g},this.paused=function(){return!!Ha&&Ha.paused()},this.muted=function(){return!!Ha&&Ha.muted()},this.canSeek=function(){return!!Ha&&Boolean(Ha.seekable()&&Ha.seekable().length>0)},this.canPlay=function(){return!!Ha&&Ha.isReady},this.currentTime=function(){return Ha?Ha.currentTime():0},this.remainingTime=function(){return kb-this.currentTime()},this.duration=function(){return kb},this.pause=function(){Ha&&Ha.pause()},this.unpause=function(){Ha&&Ha.play()},this.playVideo=function(){Ha&&Ha.play()},this.togglePause=function(){Ha&&(this.paused()?this.unpause():this.pause())},this.seekToTime=function(a){Ha&&ab&&!isNaN(a)&&(a=Math.max(0,Math.min(a,kb)),Ha.currentTime(a))},this.seekToPercent=function(a){Ha&&ab&&!isNaN(a)&&(a=Math.max(0,Math.min(a,1)),Ha.currentTime(kb*a))},this.mute=function(){Ha&&Ha.muted(!0)},this.unmute=function(){Ha&&(Ha.muted(!1),Ha.volume(Math.max(.2,gb)))},this.volume=function(a){return Ha?isNaN(a)?Ha.volume():(a=gb=Math.max(0,Math.min(1,a)),Ha.muted(0===a),Ha.volume(a)):gb},this.showingCaptions=function(){return _a},this.toggleCaptions=function(){V()},this.showCaptions=function(){U(!0)},this.hideCaptions=function(){U(!1)},this.showingCaptionSettings=function(){return Z()},this.showCaptionSettings=function(){Y()},this.hideCaptionSettings=function(){X()},this.toggleCaptionSettings=function(){W()},this.unload=function(){Ha&&(n("external call to _unload()"),ec())},this.destroy=function(){Ha&&fc()},this.loadAndPlay=function(a){Ha&&cc(a,!0)},this.loadAndStop=function(a){Ha&&cc(a,!1)},this.loadAndPause=this.loadAndStop,this.formatTime=function(a){if(isNaN(a)||a<=0||a>1/0)return"--:--";var b=Math.floor(a/60),c=Math.floor(a%60);return b+":"+(c<10?"0":"")+c},this.registerControl=function(c,d){Xb.debug&&d&&n("registerControl() : type: "+c+" , selector: "+d);var e,f,g,h=a(d);if(0===h.length)return void(d&&(e='Html element(s) could not be found using the selector, "'+d+'"',q(e,null,!0)));switch(c){case"timerRemaining":qb=h;break;case"timerCurrent":rb=h;break;case"timerDuration":sb=h;break;case"volumeDisplay":ub=h;break;case"fullscreenToggleControl":h.addClass("pbskids-video-control"),pb=h,G(pb,aa);break;case"muteToggleControl":Pb?h.hide():(h.addClass("pbskids-video-control"),mb=h,Wa.canPlay()?G(mb,_):H(mb,_));break;case"captionsToggleControl":h.addClass("pbskids-video-control"),ob=h,Wa.canPlay()?G(ob,V):H(ob,V);break;case"pauseToggleControl":h.addClass("pbskids-video-control"),nb=h,Wa.canPlay()?G(nb,$):H(nb,$);break;case"volumeSlider":case"verticalVolumeSlider":f=a(".scrubber-track",h).first(),g=a(".scrubber-thumb",h).first(),f.length>0&&g.length>0?Pb?h.hide():(vb={},vb.vertical="verticalVolumeSlider"===c,vb.scrubber=h.first(),vb.track=f,vb.thumb=g,vb.thumb.css({position:"relative"}),vb.scrubber.addClass("pbskids-video-control"),Ob&&Ea(vb.scrubber.get(0),"none"),O(vb,Wa.volume),vb.track.resize(M),Wa.canPlay()?K():L()):(e='The html element defined by the selector, "'+d+'", must have a child with the class, "scrubber-track", AND a child with the class, "scrubber-thumb"',r(e,null,!0));break;case"scrubber":a("#"+b+" .vjs-progress-control").removeClass("vjs-control"),f=a(".scrubber-track",h).first(),g=a(".scrubber-thumb",h).first(),f.length>0&&g.length>0?(tb={},tb.scrubber=h.first(),tb.track=f,tb.thumb=g,tb.thumb.css({position:"relative"}),tb.scrubber.addClass("pbskids-video-control"),Ob&&Ea(tb.scrubber.get(0),"none"),O(tb,Wa.seekToPercent),tb.track.resize(N),Wa.canSeek()?I():J()):(e='The html element defined by the selector, "'+d+'", must have a child with the class, "scrubber-track", AND a child with the class, "scrubber-thumb"',r(e,null,!0));break;default:e='The control-type, "'+c+'" is not a recognized control-type in '+Ta+".registerControl()",q(e,null,!0)}},l()},org.pbskids.video.Player}),function(a){"use strict";a(window.jQuery||window.$,null)}(function(a,b){"use strict";return a&&a.fn&&a.fn.jquery&&!(a.fn.jquery.split(".")[1]<7)||(a=org.pbskids.video.jQuery),org.pbskids.video.PlayList=function(c,e,f,g){function i(){for(var h in g)if("object"==typeof la[h]&&"object"==typeof g[h])for(var i in g[h])la[h][i]=g[h][i];else la[h]=g[h];I=a("#"+c),H=I.get(0),K=" ."+e,L=a(K,I).first(),J=f,la.debug=Boolean(la.debug&&d),org.pbskids.video.PlaylistEvent.debug=la.debug,"NO_ISCROLL"!==la.iScrollOpts&&(M=c+"-iScrollContainer",a("<div/>").prop("id",M).addClass(la.iScrollOpts.containerClass).css({position:"relative",overflow:"hidden"}).insertBefore(I).append(I),la.loadingIndicator&&(a("<img/>").addClass(la.loadingIndicatorClass).prop({src:la.loadingIndicator,alt:"Loading Videos..."}).appendTo(a("#"+M)),O=a("<li/>").addClass("appendingIndicator-container").append(a("<img/>").addClass(la.appendingIndicatorClass).prop({src:la.loadingIndicator,alt:"Loading More Videos..."})).append(a("<span/>").html(la.appendingVideosMessage))),la.loadMoreButtonClass&&(P=a("<li/>").addClass(la.loadMoreButtonClass).append(a("<span/>").html(la.loadMoreVideosMessage)).css({cursor:"pointer"}).click(function(){S.appendMore()})),N=la.iScrollOpts.onRefresh,la.iScrollOpts.onRefresh=C,S.iScroll=new b(M,la.iScrollOpts)),S.registerControl("nextVideoControl",la.nextVideoControl||""),S.registerControl("previousVideoControl",la.previousVideoControl||""),a(document).on(org.pbskids.video.VideoEvent.VIDEO_END,w),a(document).on(org.pbskids.video.VideoEvent.AD_START,x),a(document).on(org.pbskids.video.VideoEvent.AD_END,y),g.disableKeyboard!==!0&&a(document).on("keydown",ha?E:F),d&&("undefined"==typeof window.kidsPlaylists&&(window.kidsPlaylists=[]),window.kidsPlaylists.push(S)),S.purge()}function l(a,b,c,d,e){!a.images[c]&&a.images[b]&&(a.images[c]={width:d,height:e,url:a.images[b].url+".resize."+d+"x"+e+".png"})}function p(b,c,d){if(b.supports[k]){var e,f=L.clone(),g=new Date;d=d||-1,s(f,"video-title",b.title),s(f,"video-description",b.description),s(f,"video-duration",J.formatTime(b.duration)),s(f,"series-title",b.series_title),b.images.thumbnailkidsgodefault&&b.images.thumbnailkidsgodefault.url&&(b.images.thumbnailkidsgodefault.url=b.images.thumbnailkidsgodefault.url.replace("http://","https://")),l(b,"kids-mezzannine-16x9","originalres_16x9",512,288),l(b,"kids-mezzannine-16x9","covestackcard_kids",454,255),l(b,"kids-mezzannine-16x9","littlevideothumbnail",160,90),l(b,"kids-mezzannine-4x3","googlethumbnail",160,190);for(var h in b.images)r(f,h,b.images[h],b.title);switch((b.type||"").toLowerCase()){case"episode":f.addClass("episode");break;case"clip":f.addClass("clip")}if(a(".video-airdate",f).addClass("no-value"),b.encored_on&&(e=b.encored_on.match(/(\d+)/g))){var i=new Date(e[0],e[1]-1,e[2]),j=(g-i)/864e5;j<=7&&f.addClass("new-video"),a(".video-airdate",f).removeClass("no-value"),s(f,"video-airdate",e[1]+"-"+e[2]+"-"+e[0])}if(a(".video-expiration",f).addClass("no-value"),b.expirationdate&&(e=b.expirationdate.match(/(\d+)/g))){var m=new Date(e[0],e[1]-1,e[2],e[3],e[4]),n=(m-g)/864e5;n<=7&&(a(".video-expiration",f).removeClass("no-value"),s(f,"video-expiration","Expires in "+(n<1?Math.round(24*n)+" hours":Math.round(n)+" days")))}return f.addClass("guid_"+b.guid).addClass("pbskids-video-control").prop("data-item-guid",b.guid).prop("data-item-index",c).click(function(a){z(a,b)}),c%2===1&&f.addClass("alternate"),d===b.guid&&f.addClass("selected"),la.reverseOrder?f.prependTo(I):f.appendTo(I),X&&u(f),f}return null}function r(b,c,d,e){d&&d.url&&a("img."+c,b).prop("src",d.url.replace("http://","https://")).prop("alt",e).prop("data-original-width",d.width+"px").prop("data-original-height",d.height+"px")}function s(b,c,d){d?(a("."+c,b).html(d),b.prop("data-"+c,d)):a("."+c,b).addClass("no-value")}function t(b,c,d){b&&(b.removeClass("disabled-control disabled").css({"pointer-events":""}),!1!==d&&b.addClass("enabled-control"),"function"==typeof c&&b.each(function(){a(this).off("click"),a(this).on("click",c)}))}function u(b,c,d){b&&(b.removeClass("enabled-control"),!1!==d&&b.addClass("disabled-control disabled").css({"pointer-events":"none"}),"function"==typeof c&&b.each(function(){a(this).off("click",c)}))}function v(a){S.iScroll&&S.iScroll.scrollToElement(a,100)}function w(){S.autoPlayNext()&&S.next()}function x(){X=!0,u(da,S.next),u(ea,S.previous),u(a(K,I))}function y(){X=!1,t(da,S.next),t(ea,S.previous),t(a(K,I),null,!1)}function z(a,b){if(X)return void o("Ad is Playing, abort _selectAndPlayRelease()");var c={};S.setFocusTo(a.currentTarget),J.loadAndPlay(b);for(var d in b)c[d]=b[d];delete c.videos,G({eventType:org.pbskids.video.PlaylistEvent.RELEASE_SELECTED,release:c,playlist:S,caller:H})}function A(b){if(X)return void o("Ad is Playing, abort _selectAndPauseRelease()");var c,d=a(b).prop("data-item-guid"),e={};if(d)for(var f=0;f<Y.length;f++)if(Y[f].guid===d){c=Y[f];break}if(!c)return void q("Release not found, abort _selectAndPauseRelease()");S.setFocusTo(b),J.loadAndPause(c);for(var g in c)e[g]=c[g];delete e.videos,G({eventType:org.pbskids.video.PlaylistEvent.RELEASE_SELECTED,release:e,playlist:S,caller:H})}function C(){S.iScroll&&S.iScroll.vScrollbarWrapper&&a(S.iScroll.vScrollbarWrapper).css({position:"absolute",top:"0px",right:"0px"}),N&&"function"==typeof N&&N.call(S.iScroll)}function D(b,c,d,e,f,g){var h=Y.length;if(V=!1,f!==ba)return void(la.debug&&n(I.prop("id")+": rejected: ",e,"warn"));la.debug&&n(I.prop("id")+": received: ",e),b||(b=[],c=0,d=!0),ca=e,Z=e.category||"",$=e.program||"",_=e.group||"",aa=c||b.length,W=d===!1,Y=Y.concat(b);for(var i=0;i<b.length;i++)p(b[i],h,e.selectedID),h++;la.debug&&n("items received: "+b.length+"; items requested: "+e.page_size+"; can load more: "+W),t(da,S.next),t(ea,S.previous),U=!0,la.loadingIndicator&&a("."+la.loadingIndicatorClass,"#"+M).css("display","none"),O&&O.detach(),P&&W&&P.appendTo(I),S.iScroll&&S.iScroll.refresh();var j=S.autoPlay();G({eventType:org.pbskids.video.PlaylistEvent[(g||"REFRESH")+"_COMPLETE"],queryOpts:e,playlist:b,totalCount:aa,caller:H}),"APPEND"!==g&&(j?e.selectedID?a(K+".guid_"+e.selectedID,I).triggerHandler("click"):S.next():e.selectedID&&S.setFocusTo(a(K+".guid_"+e.selectedID,I)))}function E(a){var b=a.keyCode;switch(b){case ga.NEXT:S.next();break;case ga.PREVIOUS:S.previous()}}function F(a){var b=a.keyCode;switch(b){case fa.RIGHT:a.shiftKey&&(S.next(),a.preventDefault());break;case fa.LEFT:a.shiftKey&&(S.previous(),a.preventDefault())}}function G(b){var c,d={};switch(b.eventType=(b.eventType||"").replace(/\./g,"_"),b.eventType){case org.pbskids.video.PlaylistEvent.REFRESH_COMPLETE:case org.pbskids.video.PlaylistEvent.APPEND_COMPLETE:case org.pbskids.video.PlaylistEvent.COPY_COMPLETE:d.playlist=b.playlist||[],d.totalCount=b.totalCount||d.playlist.length;case org.pbskids.video.PlaylistEvent.REFRESH_START:case org.pbskids.video.PlaylistEvent.APPEND_START:case org.pbskids.video.PlaylistEvent.COPY_START:var e=b.queryOpts||{};d.category=e.category||e.group||(e.keywords||e.keyword?"":"New Videos"),d.program=e.program||"",d.keywords=e.keywords||"",d.keyword=e.keyword||"",d.videoType=e.type||"";break;case org.pbskids.video.PlaylistEvent.RELEASE_SELECTED:d.release=b.release||{},d.playlist=b.playlist||{};break;default:return void(org.pbskids.video.PlaylistEvent.debug&&q("eventType, "+b.eventType+", is not defined ",b))}c=a.Event(b.eventType),c.playlistData=d;for(var f in d)c[f]=d[f];a(b.caller||document).trigger(c),window.$&&window.$!==a&&window.$(b.caller||document).trigger(c)}b=b||org.pbskids.iScrollMOD;var H,I,J,K,L,M,N,O,P,Q,R,S=this,T="org.pbskids.video.PlayList",U=!1,V=!1,W=!0,X=!1,Y=[],Z="",$="",_="",aa=0,ba="",ca={},da=null,ea=null,fa={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},ga={NEXT:176,PREVIOUS:177},ha=/googletv/gi.test(navigator.appVersion),ia=/hp-tablet/gi.test(navigator.appVersion),ja=Boolean(window.PointerEvent||window.MSPointerEvent),ka="ontouchstart"in window&&!ia,la={autoPlay:!0,autoPlayNext:!0,nextVideoControl:"",previousVideoControl:"",loadingIndicator:"",loadingIndicatorClass:"loading-indicator",appendingIndicatorClass:"appending-indicator",appendingVideosMessage:"Loading More Videos...",loadMoreButtonClass:"",loadMoreVideosMessage:"Load More Videos",reverseOrder:!1,debug:!1,disableKeyboard:!1,release:void 0,iScrollOpts:{hScroll:!1,vScroll:!0,containerClass:"iScrollContainer",dragScrollBars:!(ka||ja),minBarHeight:ka||ja?8:36,scrollbarClass:(ka||ja?"touch ":"")+"scrollbar"}};return"string"!=typeof c?(R=T+" requires that the first parameter be of type String. This should be the id attribute of the html element to contain the playlist",void n(R,null,"error",!0)):(c=c.substr(c.indexOf("#")+1),document.getElementById(c)?"string"!=typeof e?(R=T+" requires a class name of type String for the sample html element to be used as a model for building playlist items (releases)",void n(R,null,"error",!0)):(e=e.substr(e.indexOf(".")+1),0===a("#"+c+" ."+e).length?(R='An html element with the class, "'+e+'",  could not be found within #'+c,void n(R,null,"error",!0)):f?(this.addEventListener=function(b,c){H&&(a(H).off(b,c),a(H).on(b,c))},this.removeEventListener=function(b,c){H&&a(H).off(b,c)},this.iScroll=null,this.scrollToSelectedItem=function(){I&&v(K+".selected")},this.getContainerID=function(){return M},this.getListData=function(){return Y},this.getCategory=function(){return Z},this.getProgram=function(){return $},this.getGroup=function(){return _},this.getTotalCount=function(){return aa},this.getQueryOptions=function(){return ca},this.autoPlayNext=function(a){return"boolean"==typeof a&&(la.autoPlayNext=a),la.autoPlayNext},this.autoPlay=function(a){return"boolean"==typeof a&&(la.autoPlay=a),la.autoPlay},this.hasPlaylist=function(){return!!I&&U},this.loading=function(){return!!I&&V},this.canLoadMore=function(){return I&&W&&!V},this.length=function(){return I?Y.length:0},this.selectedIndex=function(b){return I||X?(b=parseInt(b),isNaN(b)||(Q=Math.max(0,b%Y.length),a(K+".guid_"+Y[Q].guid,I).triggerHandler("click")),Q||0):0},this.selectItem=function(b){if(I||X){var c=/^[0-9a-z]{8}\-[0-9a-z]{4}\-[0-9a-z]{4}\-[0-9a-z]{4}\-[0-9a-z]{12}$/;c.test(b)?a(K+".guid_"+b,I).triggerHandler("click"):isNaN(parseInt(b))||this.selectedIndex(b)}},this.setFocusTo=function(b){if(I||X){var c=b;"object"!=typeof c&&(c=a(""+b,I)),0===c.length&&(c=a(K+".guid_"+b,I),0===c.length)||(a(K+".selected",I).removeClass("selected"),a(c).addClass("selected"),Q=a(c).prop("data-item-index"),S.scrollToSelectedItem())}},this.refresh=function(b){if(I){V=!0;var c={page:1,page_size:20,program:"",category:"",group:"",selectedID:"",available:"public"},d={};if("object"==typeof b&&null!==b){for(var e in b)c[e]=b[e];b.startindex&&b.endindex&&(c.page_size=b.endindex-b.startindex+1)}h&&(c.program=h),j&&(c.category=j),c.program&&(c.program=c.program.toLowerCase()),d=J.createEndpointParameters(c),G({eventType:org.pbskids.video.PlaylistEvent.REFRESH_START,queryOpts:c,caller:H}),this.purge();var f=new Date,g=f.getMinutes()+"_"+f.getSeconds()+"_"+f.getMilliseconds();ba=g,la.debug&&n(I.prop("id")+": fetch: ",c),a.ajax({type:"GET",url:m+"show-list/",dataType:"json",data:d,success:function(a){D(a.items,a.matched,a.isLastPage,c,g)}}),O&&O.detach(),la.loadingIndicator&&a("."+la.loadingIndicatorClass,"#"+M).css("display","block"),S.iScroll&&a(S.iScroll.vScrollbarWrapper).css("display","none")}},this.appendMore=function(b,c){if(I&&this.canLoadMore()){V=!0;var d="APPEND"+(c?"-AUTOPLAY":""),e=ca;e.page=e.page+1;var f=J.createEndpointParameters(e);G({eventType:org.pbskids.video.PlaylistEvent.APPEND_START,queryOpts:e,caller:H});var g=new Date,h=g.getMinutes()+"_"+g.getSeconds()+"_"+g.getMilliseconds();ba=h,la.debug&&n(I.prop("id")+": fetch to append: ",e),a.ajax({type:"GET",url:m+"show-list/",dataType:"json",data:f,success:function(a){D(a.items,a.matched,a.isLastPage,e,h,d)}}),P&&P.detach(),O&&(O.detach(),O.appendTo(I),S.iScroll&&S.iScroll.refresh())}},this.appendItem=function(a){return I&&"object"==typeof a&&null!==a?p(a,Y.push(a)-1):null},this.copyFromPlaylist=function(a,b){a&&a.getListData&&this.copyPlaylistData(a.getListData(),a.getQueryOptions(),b,a.getTotalCount())},this.copyPlaylistData=function(a,b,c,d,e){if(I&&a){V=!0;var f=b||{};f.page=1,f.page_size=a.length,c&&(f.selectedID=c),G({eventType:org.pbskids.video.PlaylistEvent.COPY_START,queryOpts:f,caller:H}),this.purge();var g=new Date,h=g.getMinutes()+"_"+g.getSeconds()+"_"+g.getMilliseconds();ba=h,O&&O.detach(),la.debug&&n(I.prop("id")+": copy: ",f),D(a,d||a.length,e||!1,f,h,"COPY")}},this.abortLoad=function(){I&&(la.debug&&n(I.prop("id")+": abort loading",null,"warn"),ba="undefined")},this.purge=function(){I&&(u(da,S.next),u(ea,S.previous),Q=0,Y=[],U=!1,V=!1,W=!1,la.loadingIndicator&&a("."+la.loadingIndicatorClass,"#"+M).css("display","none"),O&&O.detach(),P&&P.detach(),S.iScroll&&a(S.iScroll.vScrollbarWrapper).css("display","none"),I.empty(),S.iScroll&&S.iScroll.refresh())},this.destroy=function(){I&&(S.abortLoad(),u(da,S.next,!1),u(ea,S.previous,!1),a(document).off(org.pbskids.video.VideoEvent.VIDEO_END,w),a(document).off(org.pbskids.video.VideoEvent.AD_START,x),a(document).off(org.pbskids.video.VideoEvent.AD_END,y),g.disableKeyboard!==!0&&a(document).off("keydown",ha?E:F),
Q=0,Y=[],U=!1,V=!1,W=!1,S.iScroll&&(S.iScroll.destroy(),S.iScroll=null),I.empty(),I.insertBefore(a("#"+M)),a("#"+M).remove(),I=null,H=null,K="",L=null,J=null)},this.previous=function(b){if(I)if(J.currentTime()/J.duration()>.1)J.seekToTime(0),b&&B("Skip Buttons","Return to Beginning");else{var c=a(K+".selected",I).first().prev();0===c.length&&(c=a(K,I).last()),a(c).triggerHandler("click"),b&&B("Skip Buttons","Play Previous")}},this.next=function(b){if(I){b&&B("Skip Buttons","Play Next");var c=a(K+".selected",I).last().next();c.hasClass(la.loadMoreButtonClass)?S.appendMore(void 0,!0):(0===c.length&&(c=a(K,I).first()),a(c).triggerHandler("click"))}},this.loadNext=function(){if(I){var b=a(K+".selected",I).last().next();0===b.length&&(b=a(K,I).first()),A(b)}},this.registerControl=function(b,c){if(I){la.debug&&c&&n("registerControl() : type: "+b+" , selector: "+c);var d,e=a(c);if(0===e.length)return void(c&&(d='Html element(s) could not be found using the selector, "'+c+'"',n(d,null,"warn",!0)));switch(b){case"nextVideoControl":e.addClass("pbskids-video-control"),da=e,S.hasPlaylist()?t(da,S.next):u(da,S.next);break;case"previousVideoControl":e.addClass("pbskids-video-control"),ea=e,S.hasPlaylist()?t(ea,S.previous):u(ea,S.previous);break;default:d='The control-type, "'+b+'" is not a recognized control-type in '+T+".registerControl()",n(d,null,"warn",!0)}}},void i()):(R=T+" requires that an instance of org.pbskids.video.Player be created to serve videos to",void n(R,null,"error",!0))):(R='An html element with the id, "'+c+'",  could not be found',void n(R,null,"error",!0)))},org.pbskids.video.PlayList}),function(a){!function(a){"use strict";a()}(function(a,b){"use strict";return a&&b&&(window.org.pbskids.video.Player=a,window.org.pbskids.video.PlayList=b),window.org.pbskids.video})}(void 0)}();

