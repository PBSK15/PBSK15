/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Array.prototype.erase=function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)];};Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.23',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onerror=function(){throw('Failed to load library from '+path);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.IE=/MSIE/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent);ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.kindle=/Silk/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.mobile=true;ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,stages:[],numStages:0,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED;createjs.Ticker.setFPS(fps);createjs.Ticker.addEventListener("tick",this.run.bind(this));},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;}else{throw('System.setDelegate: No run() function in object');}},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},addStage:function(stage,name){stage.canvas.width=this.width;stage.canvas.height=this.height;this.stages.push(stage);this.numStages=this.stages.length;return stage;},run:function(event){this.tick=event.delta/1000;if(this.delegate){this.delegate.run();ig.input.clearPressed();}
if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}
for(var i=0;i<this.numStages;i++){this.stages[i].update(event);}},getDrawPos:null});});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},keyCode:0,initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
this.keyCode=code;var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.stopPropagation();event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.system','impact.input').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.ready=true;ig.system.setGameNow(gameClass);};});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};},run:function(){this.update();this.draw();},update:function(){},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;},});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/impact/visibility.js
ig.baked=true;ig.module('impact.visibility').defines(function(){ig.VisibilityController=ig.Class.extend({_bindedHandler:null,hidden:null,visibilitychange:null,i:0,docHidden:false,init:function(){if(ig.Visibility!==null){console.error("You do not instantiate this class!");return;}
ig.Visibility=this;},addListeners:function(){ig.log("Visibility Listeners Active");this._bindedHandler=this.onPageVisibilityChange.bind(this);window.addEventListener("pagehide",this._bindedHandler);window.addEventListener("pageshow",this._bindedHandler);window.addEventListener('focus',this._bindedHandler);window.addEventListener('blur',this._bindedHandler);if(typeof document.hidden!=="undefined"){this.hidden="hidden";this.visibilityChange="visibilitychange";this.docHidden=true;}else if(typeof document.mozHidden!=="undefined"){this.hidden="mozHidden";this.visibilityChange="mozvisibilitychange";this.docHidden=true;}else if(typeof document.msHidden!=="undefined"){this.hidden="msHidden";this.visibilityChange="msvisibilitychange";this.docHidden=true;}else if(typeof document.webkitHidden!=="undefined"){this.hidden="webkitHidden";this.visibilityChange="webkitvisibilitychange";this.docHidden=true;}
if(this.visibilityChange&&this.hidden){document.addEventListener(this.visibilityChange,this._bindedHandler);window.addEventListener(this.visibilityChange,this._bindedHandler);}},removeListeners:function(){if(!this._bindedHandler)
return;window.removeEventListener("pagehide",this._bindedHandler);window.removeEventListener("pageshow",this._bindedHandler);window.removeEventListener('focus',this._bindedHandler);window.removeEventListener('blur',this._bindedHandler);if(this.visibilityChange&&this.hidden){document.removeEventListener(this.visibilityChange,this._bindedHandler);}},onPageVisibilityChange:function(event){if(!event)
return;switch(event.type){case this.visibilityChange:case"visibilitychange":cjs.Sound.setMute(document[this.hidden]);if(document[this.hidden]&&ig.game.currentScreen){ig.game.currentScreen.pause(true,true);ig.system.paused=true;}else if(ig.game.currentScreen){ig.game.currentScreen.pause(false,true);ig.system.paused=false;}
break;case"pagehide":case"blur":cjs.Sound.setMute(true);if(ig.game.currentScreen){ig.game.currentScreen.pause(true,true);}
ig.system.paused=true;break;case"pageshow":case"focus":cjs.Sound.setMute(false);if(ig.game.currentScreen){ig.game.currentScreen.pause(false,true);}
ig.system.paused=false;break;}}});ig.Visibility=null;new ig.VisibilityController();});

// lib/game/loader.js
ig.baked=true;ig.module('game.loader').requires('impact.game').defines(function(){ig.MyLoader=ig.Class.extend({bgTheta:0,stars:[],init:function(){this.container=new createjs.Container();ig.game.stage.addChild(this.container);var data=ig.game.preQueue.getResult("LoaderData");data.images=[ig.game.preQueue.getResult("LoaderSheet")];this.sheet=new cjs.SpriteSheet(data);this.lbg=new createjs.Sprite(this.sheet,"loader_bg");this.lbg.set({x:(ig.system.realWidth)/2,y:(ig.system.realHeight)/2,regX:this.lbg.getBounds().width/2,regY:this.lbg.getBounds().height/2});this.container.addChild(this.lbg);this.generateStars();this.twoBrains=new createjs.Sprite(this.sheet,"tb_face");this.twoBrains.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,regX:this.twoBrains.getBounds().width/2,regY:this.twoBrains.getBounds().height/2,scaleX:0.1,scaleY:0.1});this.container.addChild(this.twoBrains);this.startTheta=0;this.bounceHeadLarger();},rotateBG:function(){this.lbg.rotation=0;createjs.Tween.get(this.lbg).to({rotation:360},5000).call(this.rotateBG,null,this);},bounceHeadLarger:function(){createjs.Tween.get(this.twoBrains).to({scaleX:1,scaleY:1},1000,createjs.Ease.backOut);},generateStars:function(){var star;if(this.stars.length===0){while(this.stars.length<10){star=new createjs.Sprite(this.sheet,"loader_star");star.x=ig.system.realWidth/2;star.y=ig.system.realHeight/2;star.scaleX=0.05;star.scaleY=0.05;star.regX=star.getBounds().x/2;star.regY=star.getBounds().y/2;star.rotation=ig.getRandomInt(0,360);this.stars.push(star);this.container.addChild(star);cjs.Tween.get(this).wait(250*this.stars.length).call(this.throwStar,[star],this);}}else{var len=this.stars.length;for(var i=0;i<len;i++){star=this.stars[i].set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,scaleX:0.05,scaleY:0.05});cjs.Tween.get(this).wait(250*(i+1)).call(this.throwStar,[star],this);}}
this.starCallTween=cjs.Tween.get(this).wait(250*this.stars.length+3000).call(this.generateStars,null,this);},throwStar:function(star){if(!star){return;}
this.startTheta+=90;if(this.startTheta===360){this.startTheta=0;}
var theta=(ig.getRandomInt(this.startTheta,this.startTheta+90)).toRad(),destX=ig.system.realWidth/2+Math.cos(theta)*(ig.system.realWidth),destY=ig.system.realHeight/2+Math.sin(theta)*(ig.system.realHeight),destRotation=star.rotation+360;createjs.Tween.get(star).to({x:destX,y:destY,scaleX:1,scaleY:1,rotation:destRotation},3000,createjs.Ease.quintInOut);},end:function(){ig.game.stage.removeChild(this.container);if(this.starCallTween){this.starCallTween.setPaused(true);this.starCallTween=null;}}});});

// lib/impact/vo-sequence.js
ig.baked=true;ig.module('impact.vo-sequence').defines(function(){ig.VOSequence=ig.Class.extend({_sequence:[],_index:0,_callback:null,_current:null,init:function(){},play:function(callback){this._index=-1;this._callback=callback;this._next();},add:function(id,delay){this._sequence.push({id:id,delay:delay||0});return this;},_next:function(){this._index++;if(this._current){this._current.removeAllEventListeners();}
var seq=this._sequence[this._index];if(seq){this._current=cjs.Sound.play(seq.id,{delay:seq.delay});if(this._current){this._current.on("complete",this._onSoundComplete,this);}else{this._next();}}else if(this._callback){this._callback();}},stop:function(){this._current.stop();},_onSoundComplete:function(){this._next();}});});

// lib/game/views/titlescreen-view.js
ig.baked=true;ig.module('game.views.titlescreen-view').requires('impact.impact').defines(function(){ig.TitleScreenView=ig.Class.extend({titleBoard:{},init:function(x,y,controller,settings){this.controller=controller;this.titleBoard.bg=new createjs.Sprite(ig.SHEETS.UI,"title_board");this.titleBoard.bg.x=(ig.system.realWidth-this.titleBoard.bg.getBounds().width)/2;this.titleBoard.bg.y=-200;this.titleBoard.bg.rotation=5;this.playButtonContainer=new createjs.Container();this.playButtonCheese=new createjs.Sprite(ig.SHEETS.UI,"cheesegoop-medium");var width=this.playButtonCheese.getBounds().width,height=this.playButtonCheese.getBounds().height;this.playButtonCheese.set({x:width/2,y:width/2,scaleX:0.1,scaleY:0.1,regX:width/2,regY:height/2});this.playButton=new createjs.Sprite(ig.SHEETS.UI,"play_button");this.playButton.set({x:width/2,y:width/2,scaleX:0.5,scaleY:0.5,regX:(this.playButton.getBounds().width)/2,regY:(this.playButton.getBounds().height)/2});this.playButton.on("rollover",this.onHover,null);this.playButton.on("rollout",this.onLeave,null);this.playButton.on("mousedown",this.onPress,this,true);this.playButtonContainer.setBounds(0,0,width,height);this.playButtonContainer.set({x:800,y:500,regX:width/2,regY:height/2});this.playButtonContainer.addChild(this.playButtonCheese,this.playButton);this.controller.layers.titleScreen.addChild(this.titleBoard.bg,this.playButtonContainer);createjs.Tween.get(this.titleBoard.bg).to({y:10,rotation:0},2000,createjs.Ease.elasticOut);cjs.Sound.play("cheese_squish");createjs.Tween.get(this.playButtonCheese).wait(100).to({scaleX:1,scaleY:1},600,createjs.Ease.quintOut).set({y:-14,regY:0}).to({scaleY:1.1},2000,cjs.Ease.quadInOut);},onHover:function(event){createjs.Sound.play("button_mouseover");var rot=ig.hoverRotations[ig.getRandomInt(0,5)];createjs.Tween.get(this,{override:true}).to({rotation:rot,scaleX:0.6,scaleY:0.6},800,createjs.Ease.elasticOut);},onLeave:function(event){createjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:0.5,scaleY:0.5},800,createjs.Ease.elasticOut);},onPress:function(event){this.controller.tweenToIntro();},kill:function(){this.controller.layers.titleScreen.removeAllChildren();}});});

// lib/game/screens/main-screen.js
ig.baked=true;ig.module('game.screens.main-screen').requires('game.views.titlescreen-view','impact.impact').defines(function(){ig.MainScreenEntity=ig.Class.extend({isTitleScreen:false,layers:{},views:{},missCount:0,scoreDisplayText:0,debugAnchors:false,loadedTargets:{},targetHighlights:{},targetCheeses:{},itemsDespawned:false,crosshairs:{currentAnchor:{}},cheeseHitSprite:null,randomTargets:[],currentTarget:null,itemNamePhrase:null,itemDescription:null,playItemNameTween:null,revealTargetTween:null,itemHintTween:null,aimPhrase:null,currentHenchmanAnim:null,playerMiss:false,playerWait:false,playerWaitTime:0,resetPlayerHitTimer:false,targetHits:0,crosshairsLocked:false,timer:null,timerTickReference:null,paused:false,playing:false,layer_names:["floorWalls","windows","rearGround","midGround","foreGround","lights","rayGun","HUD"],init:function(x,y,settings){this.floor=new cjs.Bitmap(ig.game.queue.getResult("floor")).set({x:0,y:248});this.backwall=new cjs.Bitmap(ig.game.queue.getResult("backwall")).set({x:0,y:0});this.windows=new cjs.Bitmap(ig.game.queue.getResult("windows")).set({x:0,y:0});this.backgroundBoxes=new cjs.Bitmap(ig.game.queue.getResult("background-boxes")).set({x:49,y:100});this.midgroundBoxes=new cjs.Bitmap(ig.game.queue.getResult("midground-boxes")).set({x:0,y:158});this.foregroundBoxes=new cjs.Bitmap(ig.game.queue.getResult("foreground-boxes")).set({x:0,y:426});this.layers.floorWalls=new cjs.Container();this.layers.windows=new cjs.Container();this.layers.rearGround=new cjs.Container();this.layers.midGround=new cjs.Container();this.layers.foreGround=new cjs.Container();this.layers.lights=new cjs.Bitmap(ig.game.queue.getResult("lights")).set({x:0,y:0});this.layers.rayGun=new cjs.Container();this.layers.HUD=new cjs.Container();var ln=this.layer_names;var len=ln.length;for(var i=0;i<len;i++){ig.game.stage.addChild(this.layers[ln[i]]);}
var rw=ig.system.realWidth;var rh=ig.system.realHeight;this.aimPhrases=["aimat","trytohit","trytoget","canyouhit"];var g=new cjs.Graphics().beginFill(cjs.Graphics.getRGB(0,0,0)).rect(0,0,rw,rh);this.blackOverlay=new cjs.Shape(g).set({alpha:0,visible:false});ig.game.stage.addChild(this.blackOverlay);this.music=cjs.Sound.play("cheese_music",{loop:-1});this.timerTickReference=this.timerTick.bind(this);this.numberOfTargets=ig.targets["round"+ig.game.currentLevel].length;this.chooseRandomTargets();this.initBackgroundComponents();if(settings&&settings.isTitleScreen===true){this.initTitleScreen();}else if(settings&&settings.isTapScreen===true){this.initTapScreen();}else{this.initLevel();}},initTapScreen:function(){this.tapScreen=new cjs.Bitmap(ig.game.preQueue.getResult("TapScreen"));this.tapScreen.on("click",this.runIntroAnimFromRestart,this,true);ig.game.stage.addChild(this.tapScreen);},pause:function(pause){this.paused=pause;},update:function(){if(!ig.game.isOver&&!this.paused){if(ig.input.pressed("aim_up")&&this.crosshairs.currentAnchor.top!==null&&!this.crosshairsLocked){this.crosshairs.currentAnchor=this.crosshairs.currentAnchor.top;this.moveCrosshairs();}else if(ig.input.pressed("aim_down")&&this.crosshairs.currentAnchor.bottom!==null&&!this.crosshairsLocked){this.crosshairs.currentAnchor=this.crosshairs.currentAnchor.bottom;this.moveCrosshairs();}else if(ig.input.pressed("aim_left")&&this.crosshairs.currentAnchor.left!==null&&!this.crosshairsLocked){this.crosshairs.currentAnchor=this.crosshairs.currentAnchor.left;this.moveCrosshairs();}else if(ig.input.pressed("aim_right")&&this.crosshairs.currentAnchor.right!==null&&!this.crosshairsLocked){this.crosshairs.currentAnchor=this.crosshairs.currentAnchor.right;this.moveCrosshairs();}
if(ig.input.pressed("fire")&&!this.crosshairs.moving&&!this.crosshairsLocked){this.crosshairsLocked=true;this.playCheeseHitSprite();this.checkTarget();}
if(this.cheeseHitSprite!==null&&this.cheeseHitSprite.isVisible()&&this.cheeseHitSprite.paused){if(this.playing){this.crosshairsLocked=false;}
this.cheeseHitSprite.set({visible:false});}
if(this.timerDisplay&&this.scoreDisplay){this.scoreDisplay.text=((this.scoreDisplayText).toInt()).toString();this.scoreDisplay.set({regX:this.scoreDisplay.getBounds().width/2});}}},draw:function(){},kill:function(){this.timer=null;if(ig.ua.mobile){var len=this.loadedTargets.length;for(var i=0;i<len;i++){this.loadedTargets[i].removeAllEventListeners();}
ig.game.stage.off("stagemousedown",this.handleTargetTouchV2);}
this.menuButton.removeAllEventListeners();this.helpButton.removeAllEventListeners();ig.game.stage.removeAllEventListeners();ig.game.stage.removeAllChildren();},initBackgroundComponents:function(){this.layers.floorWalls.addChild(this.floor,this.backwall);this.layers.windows.addChild(this.windows);this.layers.rearGround.addChild(this.backgroundBoxes);this.layers.midGround.addChild(this.midgroundBoxes);this.layers.foreGround.addChild(this.foregroundBoxes);this.cacheBGComponents();},cacheBGComponents:function(){var rw=ig.system.realWidth;var rh=ig.system.realHeight;if(arguments.length!==0){var len=arguments.length;for(var i=0;i<len;i++){this.layers[arguments[i]].cache(0,0,rw,rh);}}else{this.layers.floorWalls.cache(0,0,rw,rh);this.layers.windows.cache(0,0,rw,rh);this.layers.rearGround.cache(0,0,rw,rh);this.layers.midGround.cache(0,0,rw,rh);this.layers.foreGround.cache(0,0,rw,rh);}},uncacheBGComponents:function(){if(arguments.length!==0){var len=arguments.length;for(var i=0;i<len;i++){this.layers[arguments[i]].uncache();}}else{this.layers.floorWalls.uncache();this.layers.windows.uncache();this.layers.rearGround.uncache();this.layers.midGround.uncache();this.layers.foreGround.uncache();}},moveCrosshairs:function(){this.crosshairs.moving=true;cjs.Tween.get(this.crosshairs,{override:true}).to({x:this.crosshairs.currentAnchor.x,y:this.crosshairs.currentAnchor.y},250).call(this.crosshairsDoneMoving,null,this);this.aimGun(this.crosshairs.currentAnchor.x,this.crosshairs.currentAnchor.y);},crosshairsDoneMoving:function(){this.crosshairs.moving=false;this.cheeseHitSprite.set({x:this.crosshairs.currentAnchor.x,y:this.crosshairs.currentAnchor.y});},checkTarget:function(){this.lastFireTime=this.timeRemaining;if(this.currentHenchmanAnim!==null&&(!this.currentHenchmanAnim.paused||!this.itemNameAnim.paused)){this.currentHenchmanAnim.stop();this.itemNameAnim.stop();}
if(this.henchmanContainer){this.henchmanContainer.removeAllChildren();if(Math.abs(this.henchmanContainer.rotation)===23){this.henchmanContainer.rotation=0;}}
if(this.crosshairs.currentAnchor.id===this.currentTarget.id){this.targetHits++;this.fireHit();}else{this.fireMiss();}},chooseRandomTargets:function(){var randomArr=[];for(var i=0;i<this.numberOfTargets;i++){randomArr[i]=ig.targets["round"+ig.game.currentLevel][i].id;}
randomArr=ig.shuffleArray(randomArr);this.randomTargets=randomArr.slice(0,5);},setCurrentTarget:function(){if(this.randomTargets.length!==0){var tar=this.randomTargets.pop();this.currentTarget=ig.findWhere(ig.targets["round"+ig.game.currentLevel],{id:tar});}
this.currentTarget.used=true;},revealCurrentTarget:function(){this.itemNameField===undefined||(cjs.Tween.get(this.itemNameField).to({alpha:0},500,cjs.Ease.quadInOut));this.layers.HUD.removeChild(this.itemNameField);this.itemNameField=new cjs.BitmapText(this.currentTarget.name.toString(),this.itemNameSpritesheet);this.itemNameField.set({x:ig.system.realWidth/2,y:40,regX:this.itemNameField.getBounds().width/2,scaleX:0.7,scaleY:0.7,alpha:0});var x=this.itemNameField.x;var y=this.itemNameField.y;var w=this.itemNameField.getBounds().width;var h=this.itemNameField.getBounds().height;this.itemNameField.cache(0,0,w,h);this.layers.HUD.addChild(this.itemNameField);cjs.Tween.get(this.itemNameField).wait(500).to({alpha:1},500,cjs.Ease.quadInOut);this.aimAtAnim();},fireMiss:function(){if(ig.ua.mobile){this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;}
this.playerMiss=true;this.missCount++;if(this.itemHintTween!==null){this.itemHintTween.setPaused(true);this.itemHintTween=null;}
cjs.Sound.play("miss_thatsnotit");this.itemHintTween=cjs.Tween.get(this).wait(1000).call(this.playItemHint,null,this);},fireHit:function(){if(ig.ua.mobile){this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;}
if(ig.game.isAudioLimited){cjs.Sound.play("hit_thatwasit");}else{cjs.Sound.play(ig.henchmanHitFeedback[ig.getRandomInt(0,10)]);}
var scoreIncrement,newScore;if(this.playerWait||this.playerMiss){ig.game.score+=100;this.playerWait=false;this.playerMiss=false;}else{ig.game.score+=200;}
this.missCount=0;this.uncacheBGComponents(this.currentTarget.layer);this.targetHighlights[this.currentTarget.id].visible=false;this.loadedTargets[this.currentTarget.id].visible=false;this.targetCheeses[this.currentTarget.id].visible=true;if(this.currentTarget.id==="Comet"){var drop=this.targetCheeses[this.currentTarget.id].y+200;cjs.Tween.get(this.targetCheeses[this.currentTarget.id]).to({y:drop},1400,cjs.Ease.bounceOut).call(this.cacheBGComponents,[],this);}else if(this.currentTarget.id==="Star"){var drop=this.targetCheeses[this.currentTarget.id].y+48;cjs.Tween.get(this.targetCheeses[this.currentTarget.id]).to({y:drop},1000,cjs.Ease.bounceOut).call(this.cacheBGComponents,[],this);}else if(this.currentTarget.id==="Pulley"){var drop=this.targetCheeses[this.currentTarget.id].y+180;cjs.Tween.get(this.targetCheeses[this.currentTarget.id]).to({y:drop,rotation:-90,regX:this.targetCheeses[this.currentTarget.id].getBounds().width/2,regY:this.targetCheeses[this.currentTarget.id].getBounds().height/2},750,cjs.Ease.quadIn).to({scaleX:0.8,scaleY:1.2},250,cjs.Ease.quadOut).to({scaleX:1,scaleY:1},250,cjs.Ease.quadIn).call(this.cacheBGComponents,[],this);}else{this.cacheBGComponents(this.currentTarget.layer);}
this.cheeseMeterIncrement();cjs.Tween.get(this.scoreDisplay).to({scaleX:0.8,scaleY:0.8,rotation:ig.hoverRotations[ig.getRandomInt(0,5)]},750).wait(750).to({scaleX:0.7,scaleY:0.7,rotation:0},500);if(this.targetHits===5){if(ig.game.currentLevel===3){cjs.Tween.get(this).wait(500).call(this.gameOverSuccess,null,this);}else{this.roundEnd();}}else{this.setCurrentTarget();this.revealTargetTween=cjs.Tween.get(this).wait(1500).call(this.revealCurrentTarget);cjs.Tween.get(this).to({scoreDisplayText:ig.game.score},500);}},roundEnd:function(){ig.game.currentLevel++;this.timerTickReference=null;this.crosshairsLocked=true;cjs.Tween.get(this).to({scoreDisplayText:ig.game.score},500).wait(250).call(this.cheeseSplat,[this.fadeToBonusRound,this],this);},cheeseMeterIncrement:function(){switch(this.targetHits){case 1:this.cheeseMeter.set({alpha:1});this.cheeseMeter.gotoAndPlay("oneFifth");break;case 2:this.cheeseMeter.gotoAndPlay("twoFifths");break;case 3:this.cheeseMeter.gotoAndPlay("threeFifths");break;case 4:this.cheeseMeter.gotoAndPlay("fourFifths");break;case 5:this.cheeseMeter.gotoAndPlay("full");break;default:break;}},cheeseSplat:function(callback,scope){this.largeSplat=new cjs.Sprite(this.lgCheeseSplatSpritesheet,"lg_splat");if(!ig.game.isAudioLimited){cjs.Tween.get(this.music).to({volume:0},1000);cjs.Sound.play("cheese_squish");}
this.largeSplat.set({framerate:30});this.largeSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2});var that=this;this.largeSplat.on("animationend",this.onSplatComplete,null,false,{callback:callback,scope:scope,that:that});this.layers.HUD.removeAllChildren();this.layers.HUD.addChild(this.largeSplat);},onSplatComplete:function(event,data){if(event.name==="lg_splat"){this.stop();var crop=new cjs.Sprite(data.that.lgCheeseSplatSpritesheet,"last");data.that.layers.HUD.addChild(crop);cjs.Tween.get(crop).to({scaleY:1.1},2000,cjs.Ease.quadInOut).call(data.callback,null,data.scope);}},menuButtonClick:function(event,data){if(!this.paused){this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;this.itemNamePhrase===null||(this.itemNamePhrase.stop());this.itemNamePhrase=null;this.revealTargetTween===null||(this.revealTargetTween.setPaused(true));this.revealTargetTween=null;cjs.Sound.stop();this.timerTickReference=null;this.timer=null;this.cheeseSplat(data.callback,data.scope);}},fadeToBonusRound:function(){cjs.Sound.stop();cjs.Tween.get(this.blackOverlay).set({visible:true}).to({alpha:1},1000,cjs.Ease.quadInOut).call(ig.game.loadNext,null,ig.game);},fadeToTitleScreen:function(){cjs.Tween.get(this.blackOverlay).set({visible:true}).to({alpha:1},1200,cjs.Ease.quadInOut).call(this.restartAtTitleScreen,null,this);},restartAtTitleScreen:function(){if(!this.itemsDespawned){this.despawnItems();}
ig.game.stage.removeAllChildren();cjs.Sound.stop();if(ig.ua.mobile){ig.game.gotoScreen(3);}else{ig.game.gotoScreen(0);}},aimAtAnim:function(){var rand=ig.getRandomInt(0,this.aimPhrases.length);this.aimPhrase=new ig.VOSequence();if(ig.ua.mobile){if(ig.game.isAudioLimited){this.aimPhrase.add("aimat",200).add("i_"+this.currentTarget.id,200);}else{this.aimPhrase.add("aimat",100).add("i_"+this.currentTarget.id,100);}
this.aimPhrase.play();}},playItemName:function(){this.itemNamePhrase=cjs.Sound.play("i_"+this.currentTarget.id);},playCurrentHenchAnim:function(){if(this.cta.x>ig.system.realWidth/2){cjs.Tween.get(this.henchmanContainer).to({rotation:23},400,cjs.Ease.quadInOut);}else if(this.cta.x<ig.system.realWidth/2){cjs.Tween.get(this.henchmanContainer).to({rotation:-23},400,cjs.Ease.quadInOut);}
this.currentHenchmanAnim.gotoAndPlay(1);},itemHintAnim:function(){this.currentHenchmanAnim.visible=false;this.itemNameAnim.visible=true;window.requestAnimationFrame(this.playItemHintAnim.bind(this));},playItemHintAnim:function(){this.itemNameAnim.play();},onAimAtAnimComplete:function(){if(this.cta.x>ig.system.realWidth/2){cjs.Tween.get(this.henchmanContainer).to({rotation:0},400,cjs.Ease.quadInOut);}else if(this.cta.x<ig.system.realWidth/2){cjs.Tween.get(this.henchmanContainer).to({rotation:0},400,cjs.Ease.quadInOut);}
cjs.Tween.get(this.itemNameAnim).wait(500).set({visible:false});},playItemHint:function(){if(this.missCount===1){this.itemDescription=cjs.Sound.play("d_"+this.currentTarget.id);}else{this.aimAtAnim();this.highlightItem();}},highlightItem:function(){var rotation,currentTargetImage=this.loadedTargets[this.currentTarget.id],currentTargetLayer=this.layers[this.currentTarget.layer];this.uncacheBGComponents(this.currentTarget.layer);if(this.currentTarget.id!=="Spider"||this.currentTarget.id!=="Comet"||this.currentTarget.id!=="Magnet"){rotation=ig.getRandomInt(-5,5);}else{rotation=0;}
currentTargetLayer.setChildIndex(currentTargetImage,currentTargetLayer.getNumChildren()-1);cjs.Tween.get(currentTargetImage,{override:true}).to({rotation:rotation,scaleX:1.25,scaleY:1.25},1500,cjs.Ease.elasticOut).wait(500).to({rotation:0,scaleX:1,scaleY:1},500,cjs.Ease.quadIn);cjs.Tween.get(this.targetHighlights[this.currentTarget.id],{override:true}).set({visible:true}).to({rotation:rotation,scaleX:1.25,scaleY:1.25,alpha:1},1500,cjs.Ease.elasticOut).wait(500).to({rotation:0,scaleX:1,scaleY:1,alpha:0},500,cjs.Ease.quadIn).set({visible:false}).call(this.cacheBGComponents,[this.currentTarget.layer],this);},spawnTargets:function(level){var data;data=ig.game.queue.getResult("ItemsL"+ig.game.currentLevel+"Data");data.images=[ig.game.queue.getResult("ItemsL"+ig.game.currentLevel+"Sheet")];this.itemSheet=new cjs.SpriteSheet(data);data=ig.game.queue.getResult("HighlightsL"+ig.game.currentLevel+"Data");data.images=[ig.game.queue.getResult("HighlightsL"+ig.game.currentLevel+"Sheet")];this.highlightSheet=new cjs.SpriteSheet(data);data=ig.game.queue.getResult("CheesesL"+ig.game.currentLevel+"Data");data.images=[ig.game.queue.getResult("CheesesL"+ig.game.currentLevel+"Sheet")];this.itemCheeseSheet=new cjs.SpriteSheet(data);this.uncacheBGComponents();var target=ig.sortArrayByObjKeys(ig.targets["round"+ig.game.currentLevel]),len=ig.targets["round"+ig.game.currentLevel].length,targetImage,targetImageHighlight,targetImageCheese,targetHotZone,hzWidth,hzHeight,hzx,hzy,hzRegx,hzRegy,g,s,p;for(var i=0;i<len;i++){target[i].used=false;targetImage=new cjs.Sprite(this.itemSheet,target[i].id);targetImageHighlight=new cjs.Sprite(this.highlightSheet,target[i].id);targetImageCheese=new cjs.Sprite(this.itemCheeseSheet,target[i].id);targetImage.x=target[i].x;targetImage.y=target[i].y;target[i].r=Math.sqrt(Math.pow(targetImage.getBounds().width,2)+Math.pow(targetImage.getBounds().height,2));targetImageHighlight.x=target[i].x;targetImageHighlight.y=target[i].y;targetImageCheese.x=target[i].x;targetImageCheese.y=target[i].y;targetImage.regX=(targetImage.getBounds().width/2)+target[i].fineX;targetImage.regY=(targetImage.getBounds().height/2)+target[i].fineY;targetImageHighlight.regX=(targetImageHighlight.getBounds().width/2)+target[i].fineX;targetImageHighlight.regY=(targetImageHighlight.getBounds().height/2)+target[i].fineY;targetImageCheese.regX=(targetImageCheese.getBounds().width/2)+target[i].fineX+target[i].cheeseX;targetImageCheese.regY=(targetImageCheese.getBounds().height/2)+target[i].fineY+target[i].cheeseY;targetImage.set({scaleX:0.1,scaleY:0.1,alpha:0.05});targetImageHighlight.set({scaleX:1,scaleY:1,alpha:0,visible:false});targetImageCheese.set({visible:false});cjs.Tween.get(targetImage).wait(i*100).to({scaleX:1,scaleY:1,alpha:1},1000,cjs.Ease.elasticOut);this.layers[target[i].layer].addChild(targetImage,targetImageHighlight,targetImageCheese);if(this.debugAnchors){g=new cjs.Graphics();g.beginFill(cjs.Graphics.getRGB(255,0,0));g.drawCircle(0,0,2);s=new cjs.Shape(g);s.x=targetImage.x;s.y=targetImage.y;this.layers.midGround.addChild(s);}
this.loadedTargets[target[i].id]=targetImage;this.targetHighlights[target[i].id]=targetImageHighlight;this.targetCheeses[target[i].id]=targetImageCheese;}
cjs.Tween.get(this).wait((len*100)+1000).call(this.cacheBGComponents,[],this);},handleTargetTouch:function(event,data){if(!this.crosshairsLocked&&!this.paused){if(data.id===this.crosshairs.currentAnchor.id&&this.crosshairs.visible){this.crosshairsLocked=true;this.playCheeseHitSprite();this.checkTarget();}else{this.crosshairs.currentAnchor=ig.findWhere(ig.anchors["round"+ig.game.currentLevel],data);this.moveCrosshairs();}
if(this.crosshairs.visible===false&&this.playing){this.crosshairs.visible=true;}}},handleTargetTouchV2:function(event){if(!this.crosshairsLocked&&!this.paused){var targets=ig.targets["round"+ig.game.currentLevel],len=targets.length,touchDistance=null,tDtemp,tX=event.stageX,tY=event.stageY,tarX,tarY,closeTarget;for(var i=0;i<len;i++){tarX=targets[i].x;tarY=targets[i].y;tDtemp=Math.sqrt(Math.pow((tarX-tX),2)+Math.pow((tarY-tY),2));if(touchDistance===null||tDtemp<touchDistance){touchDistance=tDtemp;closeTarget=targets[i];}}
if(closeTarget.id===this.crosshairs.currentAnchor.id&&this.crosshairs.visible){this.crosshairsLocked=true;this.playCheeseHitSprite();this.checkTarget();}else{this.crosshairs.currentAnchor=ig.findWhere(ig.anchors["round"+ig.game.currentLevel],{id:closeTarget.id});this.moveCrosshairs();}
if(this.crosshairs.visible===false&&this.playing){this.crosshairs.visible=true;}}},playCheeseHitSprite:function(){this.spray();this.cheeseHitSprite.set({visible:true}).gotoAndPlay("run");if(!ig.game.isAudioLimited){this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;this.itemDescription===null||(this.itemDescription.stop());this.itemDescription=null;cjs.Sound.play("cheese_squish");}},timerTick:function(){if(this.timerTickReference!==null){if(!this.paused){this.timeRemaining--;if((this.lastFireTime-this.timeRemaining)>=10&&!Boolean((this.lastFireTime-this.timeRemaining)%10)){this.playerWait=true;this.missCount++;this.playItemHint();}
if(this.timerDisplay){this.timerDisplay.text=ig.formatTime(this.timeRemaining);this.timerDisplay.set({regX:this.timerDisplay.getBounds().width/2});}
if(this.timeRemaining<10){cjs.Sound.play("timer_beep");cjs.Tween.get(this.timerDisplay).to({scaleX:0.8,scaleY:0.8},250,cjs.Ease.quadInOut).wait(100).to({scaleX:0.7,scaleY:0.7},650,cjs.Ease.quadInOut);}
if(this.timeRemaining===0&&this.targetHits<5){this.timerTickReference=null;this.timer=null;this.itemHint=null;ig.game.isOver=true;this.despawnItems();this.layers.HUD.removeAllChildren();this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;this.itemNamePhrase===null||(this.itemNamePhrase.stop());this.itemNamePhrase=null;this.revealTargetTween===null||(this.revealTargetTween.setPaused(true));this.revealTargetTween=null;this.itemHintTween===null||(this.itemHintTween.setPaused(true));this.itemHintTween=null;if(!ig.game.isAudioLimited){cjs.Sound.stop();cjs.Sound.play("timer_buzz");}
ig.game.stage.removeAllEventListeners();ig.game.loadFailureAnims();return;}else{this.timer=cjs.Tween.get(this).wait(1000).call(this.timerTickReference);}}else{this.timer=cjs.Tween.get(this).wait(1000).call(this.timerTickReference);}}},despawnItems:function(){this.itemsDespawned=true;var parent;for(tar in this.loadedTargets){this.loadedTargets[tar].off("click",this.handleTargetTouch);parent=this.loadedTargets[tar].parent;parent.removeChild(this.loadedTargets[tar],this.targetHighlights[tar],this.targetCheeses[tar]);}
this.cacheBGComponents();},gameOverSuccess:function(){this.timer.setPaused(true);this.timer=null;ig.game.isOver=true;this.despawnItems();this.currentAnimation=new DTBLanims.success.GreatSuccess();this.currentAnimation.set({mouseChildren:false,mouseEnabled:false,onAnimationComplete:this.showPlayAgainScreen.bind(this),framerate:30,});ig.game.stage.removeChild(this.layers.rayGun);this.layers.HUD.removeAllChildren();this.layers.HUD.addChild(this.currentAnimation);this.playAnim=this.playCurrentAnim.bind(this);window.requestAnimationFrame(this.playAnim);},playCurrentAnim:function(){this.playAnim=null;this.currentAnimation.play();},gameOverFailure:function(){var cheeseSplat=function(){this.cheeseSplat(this.showGameOverScreen,this);}
var rand=ig.getRandomInt(1,3);if(ig.game.isAudioLimited){rand=1;}
this.currentAnimation=new DTBLanims.failure["Loss"+rand]();this.currentAnimation.set({mouseChildren:false,mouseEnabled:false,onAnimationComplete:cheeseSplat.bind(this),framerate:30,x:ig.system.realWidth/2-10,y:ig.system.realHeight/2});ig.game.stage.removeChild(this.layers.rayGun);this.layers.HUD.removeAllChildren();this.layers.HUD.addChild(this.currentAnimation);window.requestAnimationFrame(this.playCurrentAnim.bind(this));},showPlayAgainScreen:function(){var yourScore=new cjs.Sprite(ig.SHEETS.UI,"your_score");yourScore.set({x:ig.system.realWidth/2,y:70,regX:yourScore.getBounds().width/2,regY:yourScore.getBounds().height/2,scaleX:0.5,scaleY:0.5});var playAgain=new cjs.Sprite(ig.SHEETS.UI,"play_again");playAgain.set({x:ig.system.realWidth-80,y:ig.system.realHeight,regX:playAgain.getBounds().width/2,regY:playAgain.getBounds().height/2});var spritesheet=new cjs.SpriteSheet(ig.game.queue.getResult("TimerFontData"));var scoreDisplay=new cjs.BitmapText(((ig.game.score).toInt()).toString(),spritesheet);scoreDisplay.set({x:ig.system.realWidth/2,y:150,regX:scoreDisplay.getBounds().width/2,regY:scoreDisplay.getBounds().height/2});playAgain.on("click",this.fadeToTitleScreen,this,true);if(!ig.ua.mobile){playAgain.on("mouseover",ig.game.playAgainButtonOver,null);playAgain.on("mouseout",ig.game.playAgainButtonLeave,null);}
this.layers.HUD.addChild(yourScore,scoreDisplay,playAgain);},showGameOverScreen:function(){var tryAgain=new cjs.Sprite(ig.SHEETS.UI,"try_again");tryAgain.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2+15,regX:tryAgain.getBounds().width/2,regY:tryAgain.getBounds().height/2,scaleX:0.9,scaleY:0.9});var g=new cjs.Graphics().beginFill("#fff").drawRect(0,0,tryAgain.getBounds().width,tryAgain.getBounds().height);tryAgain.hitArea=g;ig.game.stage.on("stagemousedown",this.fadeToTitleScreen,this,true);if(!ig.ua.mobile){tryAgain.on("mouseover",ig.game.tryAgainButtonOver,null);tryAgain.on("mouseout",ig.game.tryAgainButtonLeave,null);}
var yourScore=new cjs.Sprite(ig.SHEETS.UI,"your_score");yourScore.set({x:ig.system.realWidth/2,y:70,regX:yourScore.getBounds().width/2,regY:yourScore.getBounds().height/2,scaleX:0.5,scaleY:0.5});var data=ig.game.queue.getResult("FailScoreData");data.images=[ig.game.queue.getResult("FailScore")];var spritesheet=new cjs.SpriteSheet(data);var scoreDisplay=new cjs.BitmapText(((ig.game.score).toInt()).toString(),spritesheet);scoreDisplay.set({x:ig.system.realWidth/2,y:150,scaleX:0.9,scaleY:0.9,regX:scoreDisplay.getBounds().width/2,regY:scoreDisplay.getBounds().height/2});this.layers.HUD.addChild(tryAgain,yourScore,scoreDisplay);},initLevel:function(){this.crosshairsLocked=true;this.anchorSet=ig.anchors["round"+ig.game.currentLevel];if(ig.game.currentLevel===1){this.timeRemaining=60;}else if(ig.game.currentLevel===2){this.timeRemaining=45;}else if(ig.game.currentLevel===3){this.timeRemaining=30;}
this.lastFireTime=this.timeRemaining;this.scoreDisplayText=ig.game.score;this.targetHits=0;if(this.views.titleScreen){this.views.titleScreen.kill();this.views.titleScreen=null;}
ig.game.stage.removeChild(this.layers.titleScreen);this.spawnCheeseRoundHUD();this.spawnTargets();var delay;if(!ig.game.isAudioLimited){if(ig.game.currentLevel===1){var s=cjs.Sound.play("narrator_ready_play");this.tutorialSequence=this.playTutorialSequence.bind(this);cjs.Tween.get(this).wait(5000).call(this.tutorialSequence);}else{if(ig.game.currentLevel===2){cjs.Sound.play("roundbegin_procheeseray");delay=5000;}else if(ig.game.currentLevel===3){cjs.Sound.play("roundbegin_backtocheese");delay=4500;}
cjs.Tween.get(this).wait(delay).call(this.initPlay);}}else{if(ig.game.currentLevel===1){this.playTutorialSequence();}else{this.initPlay();}}},initPlay:function(){if(!ig.game.isAudioLimited){this.music.setVolume(0.3);}
this.timerTick();if(ig.game.currentLevel!==1){this.initCrosshairs();}
this.setCurrentTarget();this.aimGun(this.crosshairs.currentAnchor.x,this.crosshairs.currentAnchor.y);ig.game.stage.on("stagemousedown",this.handleTargetTouchV2,this);this.menuButton=new cjs.Sprite(ig.SHEETS.UI,"menu_button").set({x:77,y:ig.system.realHeight-48});this.helpButton=new cjs.Sprite(ig.SHEETS.UI,"help_button").set({x:ig.system.realWidth-77,y:ig.system.realHeight-48});this.menuButton.set({regX:this.menuButton.getBounds().width/2,regY:this.menuButton.getBounds().height/2});this.helpButton.set({regX:this.helpButton.getBounds().width/2,regY:this.helpButton.getBounds().height/2});this.menuButton.on("click",this.menuButtonClick,this,true,{callback:this.fadeToTitleScreen,scope:this});this.helpButton.on("click",this.helpButtonClick,this,false);if(!ig.ua.mobile){this.menuButton.on("mouseover",ig.game.menuButtonOver,null);this.menuButton.on("mouseout",ig.game.menuButtonLeave,null);this.helpButton.on("mouseover",ig.game.helpButtonOver,null);this.helpButton.on("mouseout",ig.game.helpButtonLeave,null);}
this.layers.HUD.addChild(this.menuButton,this.helpButton,this.helpContainer);this.roundTitle=new cjs.Sprite(ig.SHEETS.UI,"round000"+ig.game.currentLevel);this.roundTitle.set({x:ig.system.realWidth/2,y:100,regX:this.roundTitle.getBounds().width/2,regY:this.roundTitle.getBounds().height/2,alpha:0,scaleX:0.7,scaleY:0.7});this.layers.HUD.addChild(this.roundTitle);cjs.Tween.get(this.roundTitle).to({scaleX:1,scaleY:1,alpha:1},1000,cjs.Ease.quintOut).wait(50).to({scaleX:0.7,scaleY:0.7,alpha:0},1000,cjs.Ease.quintIn).call(this.revealCurrentTarget,null,this);cjs.Sound.play("narrator_round"+ig.game.currentLevel);cjs.Tween.get(this).wait(1000).set({crosshairsLocked:false,playing:true});},despawnLevel:function(){for(layer in this.layers){this.layers[layer].removeAllChildren();}
if(ig.ua.mobile){for(tar in this.loadedTargets){this.loadedTargets[tar].removeAllEventListeners();}}
this.loadedTargets={};this.targetHighlights={};this.targetCheeses={};this.timer=null;},initCrosshairs:function(){this.crosshairs=new cjs.Sprite(ig.SHEETS.UI,"crosshairs");var start=ig.game.currentLevel===1?5:(ig.game.currentLevel===2?12:11);this.crosshairs.currentAnchor=ig.anchors["round"+ig.game.currentLevel][start];this.crosshairs.x=this.crosshairs.currentAnchor.x;this.crosshairs.y=this.crosshairs.currentAnchor.y;this.crosshairs.set({regX:this.crosshairs.getBounds().width/2,regY:this.crosshairs.getBounds().height/2});this.crosshairs.snapToPixel=true;if(ig.ua.mobile){this.crosshairs.visible=false;}
this.cheeseHitSprite=new cjs.Sprite(this.cheeseHitSheet,"idle").set({visible:false,regX:156,regY:67,x:this.crosshairs.x,y:this.crosshairs.y});this.cheeseHitSprite.framerate=30;this.layers.HUD.addChild(this.cheeseHitSprite,this.crosshairs);},tweenToIntro:function(){cjs.Tween.get(this.views.titleScreen.playButtonContainer).to({y:ig.system.realHeight+400},600,cjs.Ease.backIn);cjs.Tween.get(this.views.titleScreen.titleBoard).to({y:-300,rotation:5},800,cjs.Ease.backIn).call(this.playIntroAnim,null,this);},runIntroAnimFromRestart:function(){ig.game.stage.removeChild(this.tapScreen);this.initTitleScreen();this.playIntroAnim();},playIntroAnim:function(){if(!ig.game.isAudioLimited){this.music.setVolume(0.3);}
this.skipButton=new cjs.Sprite(ig.SHEETS.UI,"skip");this.skipButton.set({x:840,y:ig.system.realHeight+this.skipButton.getBounds().height+20});this.layers.titleScreen.addChild(this.skipButton);cjs.Tween.get(this.skipButton).wait(2000).to({y:ig.system.realHeight-100},1000,cjs.Ease.backOut);this.skipButton.on("click",this.onIntroAnimationComplete,this,true);this.playAnim=this.playCurrentAnim.bind(this);window.requestAnimationFrame(this.playAnim);},onIntroAnimationComplete:function(){this.currentAnimation.stop();cjs.Sound.stop();this.music=cjs.Sound.play("cheese_music",{volume:0.3,loop:-1});this.currentAnimation.onAnimationComplete=null;this.currentAnimation=null;cjs.Tween.get(this).wait(200).call(this.initLevel);},initTitleScreen:function(){this.layers.titleScreen=new cjs.Container();ig.game.stage.addChild(this.layers.titleScreen);if(!ig.ua.mobile){this.views.titleScreen=new ig.TitleScreenView(0,0,this,{});}
this.currentAnimation=new DTBLanims.intro.IntroDialogue();this.currentAnimation.set({mouseChildren:false,mouseEnabled:false,onAnimationComplete:this.onIntroAnimationComplete.bind(this),framerate:30,y:ig.system.realHeight});this.layers.titleScreen.addChild(this.currentAnimation);if(!ig.ua.mobile){this.layers.titleScreen.swapChildren(this.currentAnimation,this.views.titleScreen.playButtonContainer);cjs.Tween.get(this.currentAnimation).to({y:0},750,cjs.Ease.cubicOut);}else{this.currentAnimation.y=0;this.playIntroAnim();}},spawnCheeseRoundHUD:function(){var data;data=ig.game.queue.getResult("TimerFontData");data.images=[ig.game.queue.getResult("TimerFont")];this.timerFontSpritesheet=new cjs.SpriteSheet(data);data=ig.game.queue.getResult("ItemFontData");data.images=[ig.game.queue.getResult("ItemFont")];this.itemNameSpritesheet=new cjs.SpriteSheet(data);data=ig.game.queue.getResult("LargeCheeseSplatData");data.images=[ig.game.queue.getResult("LargeCheeseSplat2"),ig.game.queue.getResult("LargeCheeseSplat1")];this.lgCheeseSplatSpritesheet=new cjs.SpriteSheet(data);this.scoreLabel=new cjs.Sprite(ig.SHEETS.UI,"score");this.scoreLabel.set({x:80,y:20,regX:this.scoreLabel.getBounds().width/2,scaleX:0.8,scaleY:0.8});var shadow=new cjs.Shadow("#53473b",1,3,5);this.scoreDisplay=new cjs.BitmapText(((this.scoreDisplayText).toInt()).toString(),this.timerFontSpritesheet);this.scoreDisplay.set({x:80,y:this.scoreLabel.y+60,scaleX:0.7,scaleY:0.7,regX:this.scoreDisplay.getBounds().width/2,regY:this.scoreDisplay.getBounds().height/2});this.scoreDisplay.shadow=shadow;this.timerContainer=new cjs.Container();this.timerContainer.setBounds(0,0,219,168);this.timerContainer.set({x:ig.system.realWidth-(this.timerContainer.getBounds().width/2+20),y:150,regX:this.timerContainer.getBounds().width/2,regY:this.timerContainer.getBounds().height/2});this.timerBG=new cjs.Sprite(ig.SHEETS.UI,"timer_bg");this.timerDisplay=new cjs.BitmapText(ig.formatTime(this.timeRemaining),this.timerFontSpritesheet);this.timerDisplay.set({regX:this.timerDisplay.getBounds().width/2,regY:this.timerDisplay.getBounds().height/2,x:140,y:131});this.timerDisplay.shadow=shadow;this.timerDisplay.scaleX=0.7;this.timerDisplay.scaleY=0.7;this.timerContainer.addChild(this.timerBG,this.timerDisplay);this.cheeseMeterSpritesheet=new cjs.SpriteSheet({images:[ig.game.queue.getResult("KaseMeterSheet")],frames:{width:132,height:85},animations:{idle:[0,0,false],tutorial:[0,55,false],oneFifth:[1,20,false],twoFifths:[21,40,false],threeFifths:[41,60,false],fourFifths:[61,80,false],full:[81,100,false],},framerate:20});this.cheeseMeter=new cjs.Sprite(this.cheeseMeterSpritesheet,"idle");this.cheeseMeter.set({x:42,y:-28,alpha:0});this.cheeseMeter.on("animationend",this.onCheeseMeterAnimationEnd,null,true);this.timerContainer.addChild(this.cheeseMeter);this.tutorialContainer=new cjs.Container();this.tutorialContainer.visible=false;this.arrowKeys=new cjs.Sprite(ig.SHEETS.UI,"arrow_keys");this.arrowKeysHighlight=new cjs.Sprite(ig.SHEETS.UI,"arrow_keys_highlight").set({alpha:0});this.spaceBar=new cjs.Sprite(ig.SHEETS.UI,"space_bar");this.spaceBarHighlight=new cjs.Sprite(ig.SHEETS.UI,"space_bar_highlight").set({alpha:0});this.tutorialContainer.setBounds(0,0,360,302);this.tutorialContainer.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2-100,regX:this.tutorialContainer.getBounds().width/2,regY:this.tutorialContainer.getBounds().height/2});this.arrowKeys.set({x:this.tutorialContainer.getBounds().width/2,y:this.arrowKeys.getBounds().height/2,regX:this.arrowKeys.getBounds().width/2,regY:this.arrowKeys.getBounds().height/2});this.arrowKeysHighlight.set({x:this.tutorialContainer.getBounds().width/2,y:this.arrowKeys.y,regX:this.arrowKeysHighlight.getBounds().width/2,regY:this.arrowKeysHighlight.getBounds().height/2});this.spaceBar.set({x:this.tutorialContainer.getBounds().width/2,y:this.tutorialContainer.getBounds().height-(this.spaceBar.getBounds().height/2),regY:this.spaceBar.getBounds().height/2,regX:this.spaceBar.getBounds().width/2});this.spaceBarHighlight.set({x:this.tutorialContainer.getBounds().width/2,y:this.spaceBar.y,regY:this.spaceBarHighlight.getBounds().height/2,regX:this.spaceBarHighlight.getBounds().width/2});this.tutorialContainer.addChild(this.arrowKeys,this.arrowKeysHighlight,this.spaceBar,this.spaceBarHighlight);this.helpContainer=new cjs.Container();var g=new cjs.Graphics().beginFill(cjs.Graphics.getRGB(0,0,0)).rect(0,0,ig.system.realWidth,ig.system.realHeight);this.helpOverlay=new cjs.Shape(g).set({alpha:0,visible:false});this.helpText=new cjs.Sprite(ig.SHEETS.UI,"cheese_help_text").set({alpha:0,x:ig.system.realWidth/2,y:ig.system.realHeight/2});this.helpText.set({regX:this.helpText.getBounds().width/2,regY:this.helpText.getBounds().height/2});data=ig.game.queue.getResult("CheeseHelpData");data.images=[ig.game.queue.getResult("CheeseHelpSplat")];this.helpSplatSheet=new cjs.SpriteSheet(data,"idle");this.helpSplat=new cjs.Sprite(this.helpSplatSheet);this.helpSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,framerate:30,visible:false,scaleY:1});this.helpContainer.addChild(this.helpOverlay,this.helpSplat,this.helpText);this.cheeseHitSheet=new cjs.SpriteSheet({images:[ig.game.queue.getResult("splash_hit_cheese")],frames:{width:244,height:123},animations:{idle:[0],run:{frames:[0,1,2,3,4,5,6,7,8,9,10,11],next:false}}});-
this.layers.HUD.addChild(this.scoreLabel,this.scoreDisplay,this.timerContainer,this.tutorialContainer);this.spawnRayGunBarrel();if(ig.game.currentLevel!==1){this.zoomRayGun();}},onHelpSplatEnd:function(event){this.helpSplat.removeEventListener("animationend",this.helpSplatEndCallback);this.helpSplatEndCallback=null;if(event.name==="help_splat"){this.helpSplat.stop();this.helpSplat.y=20;this.helpSplat.gotoAndPlay("last");cjs.Tween.get(this.helpSplat).to({scaleY:1.1},2700,cjs.Ease.quadOut);}},onCheeseMeterAnimationEnd:function(event){if(event.name==="tutorial"){this.gotoAndPlay("idle");}},spawnRayGunBarrel:function(){var zoomY=70;this.layers.rayGun.setBounds(0,0,70,180);this.layers.rayGun.set({regX:this.layers.rayGun.getBounds().width/2,regY:this.layers.rayGun.getBounds().height-30,x:ig.system.realWidth/2,y:ig.system.realHeight-zoomY});var data=ig.game.queue.getResult("RayGunData");data.images=[ig.game.queue.getResult("RayGunImage")];this.rayGunSheet=new cjs.SpriteSheet(data);this.rayGun={};this.spraySheet=new cjs.SpriteSheet({images:[ig.game.queue.getResult("CheeseSprayImage")],frames:{width:11,height:344},animations:{spray:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],next:false},test:{frames:[14]}}});this.raySpray=new cjs.Sprite(this.spraySheet,"spray");this.raySpray.set({visible:false,regX:this.raySpray.getBounds().width/2,regY:this.raySpray.getBounds().height,y:5,x:this.layers.rayGun.getBounds().width/2-4,framerate:40});this.raySpray.on("animationend",this.onSprayEnd);this.rayGun.base=new cjs.Bitmap(ig.game.queue.getResult("CheeseRayBase"));this.rayGun.base.set({x:ig.system.realWidth/2,y:ig.system.realHeight-zoomY,scaleX:0.5,scaleY:0.5,regX:this.rayGun.base.getBounds().width/2});this.layers.HUD.addChild(this.rayGun.base);this.rayGun.barrel=new cjs.Sprite(this.rayGunSheet,"barrel");this.rayGun.barrel.set({x:this.layers.rayGun.getBounds().width/2,y:5,regX:this.rayGun.barrel.getBounds().width/2});this.rayGun.ring1_top=new cjs.Sprite(this.rayGunSheet,"ring1_top");this.rayGun.ring1_top.set({x:this.layers.rayGun.getBounds().width/2,y:46,regX:this.rayGun.ring1_top.getBounds().width/2,regY:this.rayGun.ring1_top.getBounds().height});this.rayGun.ring1_bot=new cjs.Sprite(this.rayGunSheet,"ring1_bot");this.rayGun.ring1_bot.set({x:this.layers.rayGun.getBounds().width/2,y:44,regX:this.rayGun.ring1_bot.getBounds().width/2});this.rayGun.ring2_top=new cjs.Sprite(this.rayGunSheet,"ring2_top");this.rayGun.ring2_top.set({x:this.layers.rayGun.getBounds().width/2,y:73,regX:this.rayGun.ring2_top.getBounds().width/2,regY:this.rayGun.ring2_top.getBounds().height});this.rayGun.ring2_bot=new cjs.Sprite(this.rayGunSheet,"ring2_bot");this.rayGun.ring2_bot.set({x:this.layers.rayGun.getBounds().width/2,y:70,regX:this.rayGun.ring2_bot.getBounds().width/2});this.rayGun.ball=new cjs.Sprite(this.rayGunSheet,"ball");this.rayGun.ball.set({x:this.layers.rayGun.getBounds().width/2-2,y:5,regX:this.rayGun.ball.getBounds().width/2});this.layers.rayGun.set({scaleX:0.5,scaleY:0.5});this.layers.rayGun.addChild(this.rayGun.ring1_bot,this.rayGun.ring2_bot,this.rayGun.barrel,this.raySpray,this.rayGun.ball,this.rayGun.ring1_top,this.rayGun.ring2_top);},aimGun:function(anchorX,anchorY){var x,y;var delX,delY,angle;x=anchorX;y=anchorY;delX=x-ig.system.realWidth/2;delY=y-ig.system.realHeight;if(delX<0){angle=-(90-Math.atan(delY/delX)*(180/Math.PI));}else{angle=90+Math.atan(delY/delX)*(180/Math.PI);}
this.rayGun.topX=this.layers.rayGun.x-(this.layers.rayGun.getBounds().height-30)*Math.cos((angle+90).toRad());this.rayGun.topY=this.layers.rayGun.y-(this.layers.rayGun.getBounds().height-30)*Math.sin((angle+90).toRad());delX=x-this.rayGun.topX;delY=y-this.rayGun.topY;this.rayGun.distanceToTarget=Math.sqrt(Math.pow(delX,2)+Math.pow(delY,2));cjs.Tween.get(this.layers.rayGun).to({rotation:angle,scaleY:1-(y*(0.25/ig.system.realHeight))},250,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.ring1_top).to({scaleY:0.65+(y*(0.35/ig.system.realHeight))},250,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.ring1_bot).to({scaleY:0.65+(y*(0.35/ig.system.realHeight))},250,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.ring2_top).to({scaleY:0.65+(y*(0.35/ig.system.realHeight))},250,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.ring2_bot).to({scaleY:0.65+(y*(0.35/ig.system.realHeight))},250,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.ball).to({scaleY:1+(y*(0.25/ig.system.realHeight))},250,cjs.Ease.quadInOut);},spray:function(){var rsH=this.raySpray.getBounds().height,targ=this.rayGun.distanceToTarget
ratio=targ/rsH,scale=1.3*ratio;this.raySpray.set({visible:true,scaleY:scale});this.raySpray.gotoAndPlay("spray");},onSprayEnd:function(event){if(event.name==="spray"){this.stop();this.set({visible:false});}},helpButtonClick:function(event){event.stopImmediatePropagation();if(!this.paused){this.paused=true;this.helpSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,scaleY:1});this.aimPhrase===null||(this.aimPhrase.stop());this.aimPhrase=null;this.itemNamePhrase===null||(this.itemNamePhrase.stop());this.itemNamePhrase=null;this.itemDescription===null||(this.itemDescription.stop());this.itemDescription=null;this.helpText.set({alpha:0});this.helpOverlay.set({visible:false,alpha:0});this.helpSplat.set({visible:false,scaleY:1});this.helpContainer.set({alpha:1});if(this.itemNameField!==undefined){cjs.Tween.removeTweens(this.itemNameField);cjs.Tween.get(this.itemNameField).to({alpha:0},150,cjs.Ease.quadInOut).set({visible:false});}
cjs.Tween.get(this.crosshairs).to({alpha:0},150,cjs.Ease.quadInOut);cjs.Tween.get(this.layers.rayGun).to({alpha:0},150,cjs.Ease.quadInOut);cjs.Tween.get(this.helpOverlay).set({visible:true}).to({alpha:0.5},250,cjs.Ease.quadInOut).wait(200).call(this.fadeInHelpText,null,this);}},fadeInHelpText:function(){var delay;if(ig.game.isAudioLimited){cjs.Sound.play("narrator_mobile_instr");delay=5000;}else{if(ig.ua.mobile){delay=9000;}else{delay=13000;}
this.narratorTutorialAudio();}
this.helpSplatEndCallback=this.onHelpSplatEnd.bind(this);this.helpSplat.addEventListener("animationend",this.helpSplatEndCallback);this.helpSplat.set({visible:true});this.helpSplat.gotoAndPlay("help_splat");cjs.Tween.get(this.helpText).wait(200).to({alpha:1},500,cjs.Ease.quadInOut).wait(delay).call(this.closeHelp,null,this);},closeHelp:function(){this.paused=false;if(this.itemNameField!==undefined){this.itemNameField.visible=true;cjs.Tween.get(this.itemNameField).set({visible:true}).wait(300).to({alpha:1},150,cjs.Ease.quadInOut);}
cjs.Tween.get(this.crosshairs).wait(300).to({alpha:1},150,cjs.Ease.quadInOut);cjs.Tween.get(this.layers.rayGun).wait(300).to({alpha:1},150,cjs.Ease.quadInOut);cjs.Tween.get(this.helpContainer).to({alpha:0},500,cjs.Ease.quadInOut);},playTutorialSequence:function(){this.tutorialSequence=null;this.crosshairsLocked=true;this.zoomRayGun();this.narratorTutorialAudio();if(ig.ua.mobile){this.initCrosshairs();if(ig.game.isAudioLimited){cjs.Sound.play("narrator_mobile_instr");cjs.Tween.get(this).wait(6000).call(this.initPlay);}else{this.xHairs=new cjs.Sprite(ig.SHEETS.UI,"crosshairs");var start=ig.game.currentLevel===1?5:(ig.game.currentLevel===2?12:11);this.xHairs.x=ig.anchors["round"+ig.game.currentLevel][start].x;this.xHairs.y=ig.anchors["round"+ig.game.currentLevel][start].y;this.xHairs.set({regX:this.xHairs.getBounds().width/2,regY:this.xHairs.getBounds().height/2,alpha:0});this.layers.HUD.addChild(this.xHairs);var x=ig.anchors["round"+ig.game.currentLevel][5].x,y=ig.anchors["round"+ig.game.currentLevel][5].y;cjs.Tween.get(this.xHairs).wait(250).set({alpha:1}).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).to({scaleX:1.2,scaleY:1.2},300,cjs.Ease.quadOut).to({scaleX:1.0,scaleY:1.0},150,cjs.Ease.quadOut).set({visible:false}).call(this.aimGun,[x,y],this).wait(100).call(this.playCheeseHitSprite,null,this);cjs.Tween.get(this.cheeseMeter).wait(5000).call(this.cheeseMeter.gotoAndPlay,["tutorial"],this.cheeseMeter);cjs.Tween.get(this.cheeseMeter).wait(5000).to({alpha:1},750,cjs.Ease.quadInOut).wait(1000).to({alpha:0},500,cjs.Ease.quadInOut);cjs.Tween.get(this.timerContainer).wait(5000).to({rotation:7,scaleX:1.1,scaleY:1.1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1},500,cjs.Ease.quadInOut).wait(3000).call(this.initPlay,null,this);}}else{this.tutorialContainer.set({visible:true});cjs.Tween.get(this.tutorialContainer).to({alpha:1},500,cjs.Ease.quadInOut);cjs.Tween.get(this.arrowKeys).wait(1000).to({rotation:3,scaleX:1.1,scaleY:1.1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1},500,cjs.Ease.quadInOut);cjs.Tween.get(this.arrowKeysHighlight).wait(1000).to({rotation:3,scaleX:1.1,scaleY:1.1,alpha:1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1,alpha:0},500,cjs.Ease.quadInOut);cjs.Tween.get(this.spaceBar).wait(5000).to({rotation:-3,scaleX:1.1,scaleY:1.1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1},500,cjs.Ease.quadInOut);cjs.Tween.get(this.spaceBarHighlight).wait(5000).to({rotation:-3,scaleX:1.1,scaleY:1.1,alpha:1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1,alpha:0},500,cjs.Ease.quadInOut).call(this.cheeseMeter.gotoAndPlay,["tutorial"],this.cheeseMeter);cjs.Tween.get(this.cheeseMeter).wait(9000).to({alpha:1},750,cjs.Ease.quadInOut).wait(1000).to({alpha:0},500,cjs.Ease.quadInOut);cjs.Tween.get(this.timerContainer).wait(9000).to({rotation:7,scaleX:1.1,scaleY:1.1},1800,cjs.Ease.elasticOut).wait(1000).to({rotation:0,scaleX:1,scaleY:1},500,cjs.Ease.quadInOut);cjs.Tween.get(this.tutorialContainer).wait(8750).to({alpha:0},500,cjs.Ease.quadInOut).set({visible:false}).wait(4250).call(this.initPlay,null,this);}},narratorTutorialAudio:function(){if(ig.ua.mobile){if(ig.game.isAudioLimited){cjs.Sound.play("narrator_mobile_instr");}else{cjs.Sound.play("narrator_mobile_instr");cjs.Sound.play("narrator_cheeseometer",{delay:5000});}}else{cjs.Sound.play("narrator_arrowbuttons");cjs.Sound.play("narrator_thenspacebar",{delay:5000});cjs.Sound.play("narrator_cheeseometer",{delay:8000});}},zoomRayGun:function(){cjs.Tween.get(this.layers.rayGun).to({y:ig.system.realHeight,scaleX:1,scaleY:1},1000,cjs.Ease.quadInOut);cjs.Tween.get(this.rayGun.base).to({y:ig.system.realHeight,scaleX:1,scaleY:1},1000,cjs.Ease.quadInOut);}});});

// lib/game/screens/bonus-item.js
ig.baked=true;ig.module('game.screens.bonus-item').requires('impact.impact').defines(function(){ig.BonusItem=ig.Class.extend({killed:false,id:0,init:function(container){this.container=container;var rand=ig.getRandomInt(0,5);this.itemType=ig.BonusItem.itemType[rand];this.sprite=new cjs.Sprite(this.container.bonusAssetsSheet,this.itemType);var w=this.sprite.getBounds().width,h=this.sprite.getBounds().height;this.sprite.set({x:(ig.system.realWidth/10)+ig.getRandomInt(0,7)*(ig.system.realWidth/10),y:-h,regX:w/2,regY:h/2,scaleX:0.6,scaleY:0.6});this.w=w*this.sprite.scaleX;this.h=h*this.sprite.scaleY;if(rand===2||rand===3){this.pointValue=50;}else{this.pointValue=25;}
this.speed=90.0+36.0/ig.game.currentLevel;this.container.layers.bonusItems.addChild(this.sprite);this.id=ig.BonusItem.count++;},update:function(){this.sprite.y+=Math.floor(this.speed*ig.system.tick);if(this.sprite.y>ig.system.realHeight+this.sprite.regY){if(!this.killed){this.kill();}
this.container.bonusItemsOnScreen.shift();this.container.numberOfBonusItems=this.container.bonusItemsOnScreen.length;}},kill:function(){this.killed=true;this.container.layers.bonusItems.removeChild(this.sprite);},isPointInCurrentBounds:function(x,y){if(this.killed){return false;}else{return(x>(this.sprite.x-(this.w/2))&&y>(this.sprite.y-(this.h/2))&&x<(this.sprite.x+(this.w/2))&&y<(this.sprite.y+(this.h/2)));}}});ig.BonusItem.itemType=["mouse_blimp","mouse_logo","mouse_trap","mouse_wheel","van"];ig.BonusItem.count=0;});

// lib/game/screens/bonus-screen.js
ig.baked=true;ig.module('game.screens.bonus-screen').requires('impact.impact','game.screens.bonus-item').defines(function(){ig.BonusScreenEntity=ig.Class.extend({isTitleScreen:false,layers:{},views:{},targetHits:0,missCount:0,scoreDisplayText:0,debugAnchors:false,anchors:[],splotchMinXThresh:90,splotchMaxXThresh:960-90,loadedTargets:[],randomTargets:[],currentTarget:null,crosshairsLocked:true,playerMiss:0,playerWait:false,playerWaitTime:0,resetPlayerHitTimer:false,targetHits:0,lastFireTime:0,touchAiming:false,timer:null,paused:false,errorct:0,bonusItemsOnScreen:[],goopMeterBarTween:null,init:function(x,y,settings){var data=ig.game.queue.getResult("BonusAssetsData");data.images=[ig.game.queue.getResult("BonusAssetsSheet")]
this.bonusAssetsSheet=new createjs.SpriteSheet(data);this.bg=new createjs.Sprite(this.bonusAssetsSheet,"bonus_round_bg").set({x:0,y:0});ig.game.stage.addChild(this.bg);this.layers.bonusItems=new createjs.Container();this.layers.rayGun=new createjs.Container();this.layers.HUD=new createjs.Container();this.layers.henchmen=new createjs.Container();for(layer in this.layers){ig.game.stage.addChild(this.layers[layer]);}
var g=new createjs.Graphics().beginFill(createjs.Graphics.getRGB(0,0,0)).rect(0,0,ig.system.realWidth,ig.system.realHeight);this.blackOverlay=new createjs.Shape(g).set({alpha:1,visible:true});ig.game.stage.addChild(this.blackOverlay);createjs.Tween.get(this.blackOverlay).to({alpha:0},500,createjs.Ease.quadInOut).call(this.initLevel,null,this).set({visible:false});for(var i=ig.system.realWidth/10;i<=(4*ig.system.realWidth)/5;i+=ig.system.realWidth/10){this.anchors[(i/(ig.system.realWidth/10))-1]=i;}
this.timerTickReference=this.timerTick.bind(this);},pause:function(pause,kill){this.goopMeterBarTween===null||(this.goopMeterBarTween.setPaused(pause));this.paused=pause;if(kill){var l=this.bonusItemsOnScreen.length;for(var i=0;i<l;i++){this.bonusItemsOnScreen[i].kill();this.bonusItemsOnScreen[i]=null;}
this.bonusItemsOnScreen=[];this.numberOfBonusItems=0;this.goopMeterBarTween=null;cjs.Tween.removeTweens(this.goopMeterBar);console.log(this.timeRemaining);}},update:function(){if(!this.paused&&!ig.game.isOver){if(this.crosshairs){if(ig.input.pressed("aim_left")&&this.crosshairs.currentAnchor>0&&!this.crosshairsLocked){this.moveCrosshairs("left");}else if(ig.input.pressed("aim_right")&&this.crosshairs.currentAnchor<this.anchors.length-2&&!this.crosshairsLocked){this.moveCrosshairs("right");}
if(ig.input.pressed("fire")&&!this.crosshairs.moving){this.spray();this.checkTarget();}}
if(this.timerDisplay&&this.scoreDisplay){this.scoreDisplay.text=((this.scoreDisplayText).toInt()).toString();this.scoreDisplay.set({regX:this.scoreDisplay.getBounds().width/2});}
if(this.goopHitSprite&&this.goopHitSprite.isVisible()&&this.goopHitSprite.paused){this.crosshairsLocked=false;this.goopHitSprite.set({visible:false});}
for(var i=0;i<this.numberOfBonusItems;i++){this.bonusItemsOnScreen[i].update();}
if(this.goopMeterBarTween===null&&this.goopMeterBar&&this.playing){this.goopMeterBarTween=createjs.Tween.get(this.goopMeterBar).set({scaleY:this.timeRemaining/30}).to({scaleY:0.01},(this.timeRemaining*1000));}}},draw:function(){},kill:function(){this.timer=null;this.dropTween=null;createjs.Tween.removeAllTweens();this.menuButton.removeAllEventListeners();this.helpButton.removeAllEventListeners();ig.game.stage.removeAllEventListeners();ig.game.stage.removeAllChildren();},initBonusTouchBounds:function(){this.bonusTouchBounds=[];var numberOfSegments=7;for(var i=0,x=(ig.system.realWidth*3)/20;i<numberOfSegments;i++,x+=ig.system.realWidth/10){this.bonusTouchBounds[i]=x;}},aimCrosshairsWithTouch:function(event){if(!this.touchAiming&&!this.paused&&!this.crosshairsLocked){this.touchAiming=true;var len=this.bonusTouchBounds.length;var i;if(event.stageX>this.bonusTouchBounds[len-1]){i=len-1;}else{for(i=0;i<len;i++){if(event.stageX<this.bonusTouchBounds[i]){break;}}}
if(i===this.crosshairs.currentAnchor){this.spray();this.checkTarget();}else{this.moveCrosshairs(i);}
this.touchAiming=false;}},moveCrosshairs:function(dir){this.crosshairs.moving=true;if(typeof dir==="string"){if(dir==="left"){this.crosshairs.currentAnchor--;}else{this.crosshairs.currentAnchor++;}}else if(typeof dir==="number"){this.crosshairs.currentAnchor=dir;}
createjs.Tween.get(this.crosshairs,{override:true}).to({x:this.anchors[this.crosshairs.currentAnchor]},250).call(this.crosshairsDoneMoving,null,this);this.aimGun();},crosshairsDoneMoving:function(){this.crosshairs.moving=false;this.goopHitSprite.set({x:this.crosshairs.x,y:this.crosshairs.y});if(this.touchAiming){this.touchAiming=false;}},checkTarget:function(){var len=this.bonusItemsOnScreen.length,hit=false,point;for(var i=0;i<len;i++){if(this.bonusItemsOnScreen[i].isPointInCurrentBounds(this.crosshairs.x,this.crosshairs.y)){createjs.Tween.get(this.bonusItemsOnScreen[i].sprite).to({scaleX:0.05,scaleY:0.05,alpha:0},200,createjs.Ease.backIn).call(this.bonusItemsOnScreen[i].kill,null,this.bonusItemsOnScreen[i]);this.fireHit(this.bonusItemsOnScreen[i].pointValue);hit=true;break;}}
if(!hit){return;}},fireMiss:function(){this.playerMiss++;if(!Boolean(this.playerMiss%3)){if(ig.ua.mobile){cjs.Sound.play("narrator_mobile_instr");}else{cjs.Sound.play("goop_controls");}}},fireHit:function(increment){createjs.Sound.play("cheese_squish");this.crosshairsLocked=true;this.goopHitSprite.set({visible:true}).gotoAndPlay("run");ig.game.score+=increment;this.targetHits++;this.lastFireTime=this.timeRemaining;this.goopSplotch();createjs.Tween.get(this).to({scoreDisplayText:ig.game.score},500);},goopSplotch:function(){var splotch,splX=ig.getRandomInt(0,ig.system.realWidth+1),splY,yStart,ySpread,randScaleX,randScaleY,randScale;if(splX>this.splotchMinXThresh&&splX<this.splotchMaxXThresh){yStart=ig.getRandomInt(0,2)===0?0:480;ySpread=120;}else{yStart=0;ySpread=ig.system.realHeight+1;}
splY=ig.getRandomInt(yStart,yStart+ySpread);randScale=ig.getRandomInt(4,11)/10;randScaleX=randScale*ig.getRandomInt(90,111)/100;randScaleY=randScale*ig.getRandomInt(90,111)/100;splotch=new cjs.Sprite(this.bonusAssetsSheet,"screen_goop"+ig.getRandomInt(1,5));splotch.set({x:splX,y:splY,scaleX:0.1*randScale,scaleY:0.1*randScale,regX:splotch.getBounds().width/2,regY:splotch.getBounds().height/2});this.goopSplotchesContainer.addChild(splotch);cjs.Tween.get(splotch).to({scaleX:randScaleX,scaleY:randScaleY,rotation:720},400);},cheeseSplat:function(callback,scope){callback.call(scope);},fadeToTitleScreen:function(event){if(!this.paused){createjs.Sound.stop();this.timerTickReference=null;this.timer.setPaused(true);this.timer=null;var gotoS=0;if(ig.ua.mobile){gotoS=3}
createjs.Tween.get(this.blackOverlay).set({visible:true}).to({alpha:1},500,createjs.Ease.quadInOut).call(ig.game.gotoScreen,[gotoS],ig.game);}},bonusEndAnim:function(){var endSplat=new cjs.Sprite(this.helpSplatSheet,"goop_end");endSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,scaleX:0.05,scaleY:0.05});this.layers.HUD.removeChild(this.goopHitSprite,this.crosshairs);this.layers.HUD.addChild(endSplat);cjs.Tween.get(endSplat).to({scaleX:1.7,scaleY:1.7},400,cjs.Ease.quartIn);cjs.Tween.get(endSplat).wait(300).to({alpha:0},100,cjs.Ease.quartOut);this.crosshairsLocked=true;if(ig.game.currentLevel===2){this.currentAnimation=new DTBLanims.phrases.everythinggoop_1();}else{this.currentAnimation=new DTBLanims.phrases.charlieseegoop_2();}
this.bonusEndAnimComplete=this.onBonusEndAnimComplete.bind(this);var hcw=this.currentAnimation.getBounds().width,hch=this.currentAnimation.getBounds().height;this.currentAnimation.set({mouseChilren:false,mouseEnabled:false,framerate:30,onAnimationComplete:this.bonusEndAnimComplete,regX:hcw/2-148,regY:hch/2+300,x:-150,y:ig.system.realHeight+300,scaleX:1.05,scaleY:1.05});this.charlieTween=new createjs.Sprite(this.bonusAssetsSheet,"charlie_tween");var ctw=this.charlieTween.getBounds().width,cth=this.charlieTween.getBounds().height;this.charlieTween.set({regX:ctw/2,regY:cth,x:ig.system.realWidth+125,y:ig.system.realHeight+200,scaleX:0.93,scaleY:0.93});this.layers.henchmen.addChild(this.currentAnimation,this.charlieTween);createjs.Tween.get(this.currentAnimation).to({rotation:25},1000,createjs.Ease.quadInOut).call(this.pleasePlayCurrentAnimation,null,this);createjs.Tween.get(this.charlieTween).to({rotation:-25},1000,createjs.Ease.quadInOut);},pleasePlayCurrentAnimation:function(){this.henchAnim=this.playCurrentAnimation.bind(this);window.requestAnimationFrame(this.henchAnim);},playCurrentAnimation:function(){createjs.Sound.stop();this.currentAnimation.play();},onBonusEndAnimComplete:function(){this.bonusEndAnimComplete=null;createjs.Tween.get(this.itemLayerOverlay).set({visible:true}).to({alpha:1},1000,createjs.Ease.quadInOut);createjs.Tween.get(this.layers.rayGun).to({alpha:0},500,createjs.Ease.quadInOut);createjs.Tween.get(this.goopMeterContainer).to({x:180},1000,createjs.Ease.backIn);createjs.Tween.get(this.blackOverlay).set({visible:true}).wait(1000).to({alpha:1},1500,createjs.Ease.quadInOut).call(ig.game.gotoScreen,[1],ig.game);},timerTick:function(){if(this.timerTickReference!==null){if(!this.paused){this.timeRemaining--;if(this.timerDisplay){this.timerDisplay.text=ig.formatTime(this.timeRemaining);this.timerDisplay.set({regX:this.timerDisplay.getBounds().width/2});}
if(this.timeRemaining<10){createjs.Sound.play("timer_beep");createjs.Tween.get(this.timerDisplay).to({scaleX:0.8,scaleY:0.8},250,createjs.Ease.quadInOut).wait(100).to({scaleX:0.7,scaleY:0.7},650,createjs.Ease.quadInOut);}
if(this.timeRemaining===0){createjs.Sound.play("timer_buzz");clearTimeout(this.timer);this.dropTween=null;this.layers.bonusItems.removeAllChildren();this.layers.rayGun.removeChild(this.raySpray);ig.game.stage.off("stagemousedown",this.aimCrosshairsWithTouch);this.moveCrosshairs(4);this.bonusEndAnim();return;}else{this.timer=cjs.Tween.get(this).wait(1000).call(this.timerTickReference);}}else{this.timer=cjs.Tween.get(this).wait(1000).call(this.timerTickReference);}}else{this.timer=null;this.dropTween=null;}},initLevel:function(){clearTimeout(this.testTimeout);if(!ig.game.isAudioLimited){this.music=createjs.Sound.play("goop_music",{loop:-1});}
this.anchorSet=ig.anchors["round"+ig.game.currentLevel];this.timeRemaining=30;this.scoreDisplayText=ig.game.score;this.spawnBonusRoundHUD();this.playTutorialSequence();},despawnLevel:function(){},initPlay:function(){if(ig.ua.mobile){this.initBonusTouchBounds();ig.game.stage.on("stagemousedown",this.aimCrosshairsWithTouch,this);}
if(!ig.game.isAudioLimited){this.music.setVolume(1);}
this.playing=true;this.timerTick();this.initCrosshairs();this.crosshairsLocked=false;this.aimGun();this.menuButton=new createjs.Sprite(ig.SHEETS.UI,"menu_button").set({x:77,y:ig.system.realHeight-48});this.helpButton=new createjs.Sprite(ig.SHEETS.UI,"help_button").set({x:ig.system.realWidth-77,y:ig.system.realHeight-48});this.menuButton.set({regX:this.menuButton.getBounds().width/2,regY:this.menuButton.getBounds().height/2});this.helpButton.set({regX:this.helpButton.getBounds().width/2,regY:this.helpButton.getBounds().height/2});this.menuButton.on("click",this.fadeToTitleScreen,this,true);this.helpButton.on("click",this.helpButtonClick,this);if(!ig.ua.mobile){this.menuButton.on("mouseover",ig.game.menuButtonOver,null);this.menuButton.on("mouseout",ig.game.menuButtonLeave,null);this.helpButton.on("mouseover",ig.game.helpButtonOver,null);this.helpButton.on("mouseout",ig.game.helpButtonLeave,null);}
this.layers.HUD.addChild(this.menuButton,this.helpButton,this.helpContainer);this.goopMeterBarTween=createjs.Tween.get(this.goopMeterBar).to({scaleY:0.01},(this.timeRemaining*1000));},dropItem:function(){if(this.timeRemaining>0&&!this.paused){this.bonusItemsOnScreen.push(new ig.BonusItem(this));this.numberOfBonusItems=this.bonusItemsOnScreen.length;this.dropTween=cjs.Tween.get(this).wait(1500+150/ig.game.currentLevel).call(this.dropItem,null,this);}else if(this.paused){this.dropTween=cjs.Tween.get(this).wait(1500+150/ig.game.currentLevel).call(this.dropItem,null,this);}},initCrosshairs:function(){this.crosshairs=new createjs.Sprite(this.bonusAssetsSheet,"crosshairs");this.crosshairs.currentAnchor=4;this.crosshairs.x=this.anchors[this.crosshairs.currentAnchor];this.crosshairs.y=ig.system.realHeight/2;this.crosshairs.set({regX:this.crosshairs.getBounds().width/2,regY:this.crosshairs.getBounds().height/2});this.crosshairs.snapToPixel=true;this.goopHitSheet=new createjs.SpriteSheet({images:[ig.game.queue.getResult("splash_hit_goop")],frames:{width:244,height:123},animations:{idle:[0],run:{frames:[0,1,2,3,4,5,6,7,8,9,10,11],next:false}}});this.goopHitSprite=new createjs.Sprite(this.goopHitSheet,"idle").set({visible:false,regX:156,regY:67,x:this.crosshairs.x,y:this.crosshairs.y});this.goopHitSprite.framerate=30;this.layers.HUD.addChild(this.goopHitSprite,this.crosshairs);},spawnBonusRoundHUD:function(){var data=ig.game.queue.getResult("BonusAssetsData");data.images=[ig.game.queue.getResult("BonusAssetsSheet")]
this.bonusAssetsSheet=new createjs.SpriteSheet(data);var bg=new createjs.Graphics().beginFill("#4d3a27").rect(0,0,40,380);var gm=new createjs.Graphics().beginFill("#E7FB77").rect(0,0,40,380);this.goopMeterContainer=new createjs.Container();this.goopMeterBG=new createjs.Shape(bg).set({x:840,y:490,regY:380});this.goopMeter=new createjs.Sprite(this.bonusAssetsSheet,"goop_meter").set({x:815,y:84,scaleX:0.9,scaleY:0.9});this.goopMeterTimer=new createjs.Sprite(this.bonusAssetsSheet,"goop_meter_timer").set({x:780,y:30});this.goopMeterBar=new createjs.Shape(gm).set({x:840,y:490,regY:380});var spritesheet=new createjs.SpriteSheet(ig.game.queue.getResult("TimerFontData"));var shadow=new createjs.Shadow("#53473b",1,3,5);this.timerDisplay=new createjs.BitmapText(ig.formatTime(this.timeRemaining),spritesheet).set({x:this.goopMeterTimer.x+82,y:this.goopMeterTimer.y+18});this.timerDisplay.set({regX:this.timerDisplay.getBounds().width/2});this.timerDisplay.scaleX=0.7;this.timerDisplay.scaleY=0.7;this.timerDisplay.shadow=shadow;this.goopMeterContainer.addChild(this.goopMeterBG,this.goopMeterBar,this.goopMeter,this.goopMeterTimer,this.timerDisplay);this.scoreLabel=new createjs.Sprite(ig.SHEETS.UI,"score");this.scoreLabel.set({x:80,y:20,regX:this.scoreLabel.getBounds().width/2,scaleX:0.8,scaleY:0.8});this.scoreDisplay=new createjs.BitmapText(((this.scoreDisplayText).toInt()).toString(),spritesheet);this.scoreDisplay.set({x:80,y:this.scoreLabel.y+40,scaleX:0.7,scaleY:0.7,regX:this.scoreDisplay.getBounds().width/2});var g=new createjs.Graphics().beginFill(createjs.Graphics.getRGB(0,0,0)).rect(0,0,ig.system.realWidth,ig.system.realHeight);this.itemLayerOverlay=new createjs.Shape(g).set({alpha:0,visible:false});this.helpContainer=new createjs.Container();g=new createjs.Graphics().beginFill(createjs.Graphics.getRGB(0,0,0)).rect(0,0,ig.system.realWidth,ig.system.realHeight);this.helpOverlay=new createjs.Shape(g).set({alpha:0,visible:false});this.helpText=new createjs.Sprite(this.bonusAssetsSheet,"goop_help_text").set({alpha:0,x:ig.system.realWidth/2,y:ig.system.realHeight/2});this.helpText.set({regX:this.helpText.getBounds().width/2,regY:this.helpText.getBounds().height/2});data=ig.game.queue.getResult("GoopHelpData");data.images=[ig.game.queue.getResult("GoopHelpSplat")];this.helpSplatSheet=new createjs.SpriteSheet(data);this.helpSplat=new createjs.Sprite(this.helpSplatSheet,"idle");this.helpSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,framerate:30,visible:false,scaleY:1});this.helpSplat.on("animationend",this.onHelpSplatEnd,null);this.helpContainer.addChild(this.helpOverlay,this.helpSplat,this.helpText);this.goopSplotchesContainer=new cjs.Container();this.layers.HUD.addChild(this.itemLayerOverlay,this.goopSplotchesContainer,this.goopMeterContainer,this.scoreLabel,this.scoreDisplay,this.tutorialContainer);this.spawnRayGunBarrel();this.zoomRayGun();},onHelpSplatEnd:function(event){if(event.name==="help_splat"){this.stop();this.y=20;this.gotoAndPlay("last");createjs.Tween.get(this).to({scaleY:1.1},2700,createjs.Ease.quadOut);}},spawnRayGunBarrel:function(){var zoomY=100;this.layers.rayGun.setBounds(0,0,113,279);this.layers.rayGun.set({regX:this.layers.rayGun.getBounds().width/2,regY:this.layers.rayGun.getBounds().height-150,x:ig.system.realWidth/2,y:ig.system.realHeight-100,rotation:0});this.rayGun={};this.spraySheet=new createjs.SpriteSheet({images:[ig.game.queue.getResult("GoopSprayImage")],frames:{width:11,height:344},animations:{spray:{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],next:false},test:{frames:[14]}}});this.raySpray=new createjs.Sprite(this.spraySheet,"spray");this.raySpray.set({visible:false,regX:this.raySpray.getBounds().width/2,regY:this.raySpray.getBounds().height,y:5,x:this.layers.rayGun.getBounds().width/2,framerate:35});this.raySpray.on("animationend",this.onSprayEnd);this.initRayGunComponents();},initRayGunComponents:function(){var zoomY=120;this.rayGun.base=new createjs.Sprite(this.bonusAssetsSheet,"rg_base");this.rayGun.base.set({x:ig.system.realWidth/2,y:ig.system.realHeight-zoomY,scaleX:0.6,scaleY:0.6,regX:this.rayGun.base.getBounds().width/2});this.layers.HUD.addChild(this.rayGun.base);this.rayGun.barrel=new createjs.Sprite(this.bonusAssetsSheet,"cheese_ray_barrel");this.rayGun.barrel.set({x:this.layers.rayGun.getBounds().width/2,y:5,regX:this.rayGun.barrel.getBounds().width/2});this.rayGun.ring1_top=new createjs.Sprite(this.bonusAssetsSheet,"upper_ring_top");this.rayGun.ring1_top.set({x:this.layers.rayGun.getBounds().width/2,y:67,regX:this.rayGun.ring1_top.getBounds().width/2,regY:this.rayGun.ring1_top.getBounds().height});this.rayGun.ring1_bot=new createjs.Sprite(this.bonusAssetsSheet,"upper_ring_bot");this.rayGun.ring1_bot.set({x:this.layers.rayGun.getBounds().width/2,y:65,regX:this.rayGun.ring1_bot.getBounds().width/2});this.rayGun.ring2_top=new createjs.Sprite(this.bonusAssetsSheet,"lower_ring_top");this.rayGun.ring2_top.set({x:this.layers.rayGun.getBounds().width/2,y:93,regX:this.rayGun.ring2_top.getBounds().width/2,regY:this.rayGun.ring2_top.getBounds().height});this.rayGun.ring2_bot=new createjs.Sprite(this.bonusAssetsSheet,"lower_ring_bot");this.rayGun.ring2_bot.set({x:this.layers.rayGun.getBounds().width/2,y:90,regX:this.rayGun.ring2_bot.getBounds().width/2});this.rayGun.ball=new createjs.Sprite(this.bonusAssetsSheet,"endcap");this.rayGun.ball.set({x:this.layers.rayGun.getBounds().width/2,y:-22,regX:this.rayGun.ball.getBounds().width/2});this.layers.rayGun.set({scaleX:0.5,scaleY:0.5});this.layers.rayGun.addChild(this.rayGun.ring1_bot,this.rayGun.ring2_bot,this.raySpray,this.rayGun.ball,this.rayGun.barrel,this.rayGun.ring1_top,this.rayGun.ring2_top);},onSprayEnd:function(event){if(event.name==="spray"){this.stop();this.set({visible:false});}},aimGun:function(angle){if(!angle){var delX=this.anchors[this.crosshairs.currentAnchor]-ig.system.realWidth/2,delY=this.crosshairs.y-ig.system.realHeight,angle;if(delX<0){angle=-(90-Math.atan(delY/delX)*(180/Math.PI));}else{angle=90+Math.atan(delY/delX)*(180/Math.PI);}}
this.rayGun.topX=this.layers.rayGun.x-(this.layers.rayGun.getBounds().height-150)*Math.cos((angle+90).toRad());this.rayGun.topY=this.layers.rayGun.y-(this.layers.rayGun.getBounds().height-150)*Math.sin((angle+90).toRad());var delX=this.anchors[this.crosshairs.currentAnchor]-this.rayGun.topX,delY=this.crosshairs.y-this.rayGun.topY;this.rayGun.distanceToTarget=Math.sqrt(Math.pow(delX,2)+Math.pow(delY,2));createjs.Tween.get(this.layers.rayGun).to({rotation:angle,scaleY:1-(this.crosshairs.y*(0.25/ig.system.realHeight))},250,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.ring1_top).to({scaleY:0.65+(this.crosshairs.y*(0.35/ig.system.realHeight))},250,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.ring1_bot).to({scaleY:0.65+(this.crosshairs.y*(0.35/ig.system.realHeight))},250,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.ring2_top).to({scaleY:0.65+(this.crosshairs.y*(0.35/ig.system.realHeight))},250,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.ring2_bot).to({scaleY:0.65+(this.crosshairs.y*(0.35/ig.system.realHeight))},250,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.ball).to({scaleY:1+(this.crosshairs.y*(0.25/ig.system.realHeight))},250,createjs.Ease.quadInOut);},spray:function(){if(!ig.game.isAudioLimited){createjs.Sound.play("goop_spray");}
var rsH=this.raySpray.getBounds().height,targ=this.rayGun.distanceToTarget
ratio=targ/rsH,scale=1.2*ratio;this.raySpray.set({visible:true,scaleY:scale});this.raySpray.gotoAndPlay("spray");},helpButtonClick:function(event){if(!this.paused){this.pause(true);this.helpText.set({alpha:0});this.helpOverlay.set({visible:false,alpha:0});this.helpSplat.set({x:ig.system.realWidth/2,y:ig.system.realHeight/2,visible:false,scaleY:1});this.helpContainer.set({alpha:1});createjs.Tween.get(this.crosshairs).to({alpha:0},150,createjs.Ease.quadInOut);createjs.Tween.get(this.layers.rayGun).to({alpha:0},150,createjs.Ease.quadInOut);createjs.Tween.get(this.helpOverlay).set({visible:true}).to({alpha:0.5},250,createjs.Ease.quadInOut).wait(200).call(this.fadeInHelpText,null,this);}},fadeInHelpText:function(){var delay;if(ig.ua.mobile){cjs.Sound.play("narrator_mobile_goopinstr");delay=5000;}else{createjs.Sound.play("narrator_goopinstr");createjs.Sound.play("narrator_thenspacebar",{delay:4500});delay=7000;}
this.helpSplat.set({visible:true});this.helpSplat.gotoAndPlay("help_splat");createjs.Tween.get(this.helpText).wait(200).to({alpha:1},500,createjs.Ease.quadInOut).wait(delay).call(this.closeHelp,null,this);},closeHelp:function(){this.pause(false);this.crosshairs.set({visible:true});this.layers.rayGun.set({visible:true});createjs.Tween.get(this.crosshairs).wait(300).to({alpha:1},150,createjs.Ease.quadInOut);createjs.Tween.get(this.layers.rayGun).wait(300).to({alpha:1},150,createjs.Ease.quadInOut);createjs.Tween.get(this.helpContainer).to({alpha:0},500,createjs.Ease.quadInOut);},playTutorialSequence:function(){if(!ig.game.isAudioLimited){this.music.setVolume(0.7);}
this.roundTitle=new createjs.Sprite(this.bonusAssetsSheet,"bonus_round_text");this.roundTitle.set({x:ig.system.realWidth/2,y:120,regX:this.roundTitle.getBounds().width/2,regY:this.roundTitle.getBounds().height/2,alpha:0,scaleX:0.7,scaleY:0.7});this.layers.HUD.addChild(this.roundTitle);createjs.Tween.get(this.roundTitle).to({scaleX:1,scaleY:1,alpha:1},1000,createjs.Ease.quintOut).wait(3000).to({scaleX:0.7,scaleY:0.7,alpha:0},1000,createjs.Ease.quintIn).set({visible:false});var delay;if(ig.game.currentLevel===3){delay=4000;createjs.Sound.play("goop_playgoopagain");}else{if(!ig.game.isAudioLimited){delay=10000;createjs.Sound.play("goop_playwithgoopray");createjs.Sound.play("goop_hitfallingstuff",{delay:6500});}else{delay=6500;cjs.Tween.get(this).wait(5000).call(cjs.Sound.play,["goop_hitfallingstuff"],cjs.Sound);}}
cjs.Tween.get(this).wait(delay-2500).call(this.dropItem);cjs.Tween.get(this).wait(delay).call(this.initPlay);},zoomRayGun:function(){createjs.Tween.get(this.layers.rayGun).wait(500).to({y:ig.system.realHeight,scaleX:1,scaleY:1},1000,createjs.Ease.quadInOut);createjs.Tween.get(this.rayGun.base).wait(500).to({y:ig.system.realHeight,scaleX:1,scaleY:1},1000,createjs.Ease.quadInOut);}});});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.game','impact.visibility','game.loader','impact.vo-sequence','game.screens.main-screen','game.screens.bonus-screen').defines(function(){ig.ANIMSHEETS={};ig.SHEETS={};ig.timeStamp=0;ig.anchors={round1:[{id:"Bird",x:-340,y:-167,neighbors:[null,"Fungus","Watering_Can","Snail"]},{id:"Snail",x:-431,y:8,neighbors:["Bird","Watering_Can","Octopus",null]},{id:"Octopus",x:-441,y:147,neighbors:["Snail","Watering_Can",null,null]},{id:"Watering_Can",x:-273,y:94,neighbors:["Bird","Seeds",null,"Snail"]},{id:"Seeds",x:-156,y:56,neighbors:["Fungus","Fossil",null,"Watering_Can"]},{id:"Fossil",x:-29,y:50,neighbors:["Flower","Spider",null,"Seeds"]},{id:"Spider",x:60,y:18,neighbors:["Fish","Mammal",null,"Fossil"]},{id:"Fungus",x:-145,y:-119,neighbors:[null,"Flower","Seeds","Bird"]},{id:"Flower",x:-38,y:-136,neighbors:[null,"Fish","Fossil","Fungus"]},{id:"Mammal",x:206,y:23,neighbors:["Fish","Egg","Cactus","Spider"]},{id:"Fish",x:138,y:-125,neighbors:[null,"Mammal","Mammal","Flower"]},{id:"Egg",x:258,y:43,neighbors:["Mammal","Insect","Cactus","Mammal"]},{id:"Cactus",x:233,y:130,neighbors:["Egg","Reptile",null,"Mammal"]},{id:"Reptile",x:314,y:162,neighbors:["Egg","Insect",null,"Cactus"]},{id:"Insect",x:423,y:93,neighbors:["Egg",null,null,"Reptile"]}],round2:[{id:"Asteroid",x:-180,y:75,neighbors:[null,"Graph",null,"Saturn"]},{id:"Astronaut",x:198,y:29,neighbors:["Crater","Comet","Rover","Telescope"]},{id:"Cloud",x:426,y:106,neighbors:[null,null,"Rover","Comet"]},{id:"Comet",x:309,y:36,neighbors:[null,"Cloud","Rover","Astronaut"]},{id:"Crater",x:158,y:-148,neighbors:[null,null,"Astronaut","Weather_Chart"]},{id:"Earth",x:-403,y:-18.5,neighbors:["Space_Shuttle","Saturn","Jupiter",null]},{id:"Graph",x:-108,y:35,neighbors:["Weather_Chart","Star",null,"Asteroid"]},{id:"Jupiter",x:-395,y:170,neighbors:["Earth","Saturn",null,null]},{id:"Saturn",x:-274,y:88,neighbors:["Space_Shuttle","Asteroid",null,"Earth"]},{id:"Rover",x:287,y:165,neighbors:["Comet","Cloud",null,"Astronaut"]},{id:"Satellite",x:-189,y:-133,neighbors:[null,"Weather_Chart","Graph","Space_Shuttle"]},{id:"Space_Shuttle",x:-335,y:-156,neighbors:[null,"Satellite","Saturn","Earth"]},{id:"Star",x:-14,y:33,neighbors:["Weather_Chart","Telescope",null,"Graph"]},{id:"Telescope",x:69,y:29,neighbors:["Crater","Astronaut",null,"Star"]},{id:"Weather_Chart",x:-45,y:-147,neighbors:[null,"Crater","Star","Satellite"]}],round3:[{id:"Beaker",x:312,y:161,neighbors:[null,"Calculator",null,"Ruler"]},{id:"Binoculars",x:-188,y:60,neighbors:["Thermometer","Light_Bulb",null,"Scale"]},{id:"Calculator",x:405,y:138,neighbors:[null,null,null,"Beaker"]},{id:"Goggles",x:136,y:97,neighbors:["Hammer","Ruler",null,"Magnet"]},{id:"Hammer",x:108,y:-113,neighbors:[null,null,"Goggles","Pulley"]},{id:"Light_Bulb",x:-113,y:97,neighbors:["Thermometer","Recycling_Bin",null,"Binoculars"]},{id:"Magnet",x:59,y:49,neighbors:["Hammer","Goggles",null,"Recycling_Bin"]},{id:"Magnifying_Glass",x:-375,y:160,neighbors:["Notebook","Scale",null,null]},{id:"Microscope",x:-333,y:-173,neighbors:[null,"Thermometer","Scale","Notebook"]},{id:"Notebook",x:-432,y:29,neighbors:["Microscope","Scale","Magnifying_Glass",null]},{id:"Pulley",x:1,y:-123,neighbors:[null,"Hammer","Recycling_Bin","Thermometer"]},{id:"Recycling_Bin",x:-43,y:67,neighbors:["Pulley","Magnet",null,"Light_Bulb"]},{id:"Ruler",x:214,y:115,neighbors:[null,"Beaker",null,"Goggles"]},{id:"Scale",x:-263,y:105,neighbors:["Microscope","Binoculars",null,"Magnifying_Glass"]},{id:"Thermometer",x:-157,y:-134,neighbors:[null,"Pulley","Binoculars","Microscope"]}]};ig.anchorShift={x:487,y:302};ig.targets={round1:[{name:"Bird",id:"Bird",fineX:0,fineY:0,cheeseX:0,cheeseY:-15,layer:"rearGround"},{name:"Snail",id:"Snail",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Octopus",id:"Octopus",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Watering_Can",id:"Watering_Can",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Seeds",id:"Seeds",fineX:0,fineY:0,cheeseX:5,cheeseY:0,layer:"rearGround"},{name:"Fossil",id:"Fossil",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Spider",id:"Spider",fineX:-11,fineY:158,cheeseX:11,cheeseY:-158,layer:"rearGround"},{name:"Fungus",id:"Fungus",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"},{name:"Flower",id:"Flower",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"},{name:"Mammal",id:"Mammal",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Fish",id:"Fish",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"},{name:"Egg",id:"Egg",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Cactus",id:"Cactus",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Reptile",id:"Reptile",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Insect",id:"Insect",fineX:0,fineY:0,cheeseX:0,cheeseY:-15,layer:"foreGround"}],round2:[{name:"Asteroid",id:"Asteroid",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Astronaut",id:"Astronaut",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Cloud",id:"Cloud",fineX:0,fineY:0,cheeseX:0,cheeseY:-5,layer:"foreGround"},{name:"Comet",id:"Comet",fineX:-170,fineY:90,cheeseX:170,cheeseY:-90,layer:"foreGround"},{name:"Crater",id:"Crater",fineX:0,fineY:0,cheeseX:0,cheeseY:-15,layer:"floorWalls"},{name:"Earth",id:"Earth",fineX:0,fineY:0,cheeseX:0,cheeseY:-20,layer:"midGround"},{name:"Graph",id:"Graph",fineX:0,fineY:0,cheeseX:0,cheeseY:-25,layer:"rearGround"},{name:"Jupiter",id:"Jupiter",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Saturn",id:"Saturn",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Rover",id:"Rover",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Satellite",id:"Satellite",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"},{name:"Space_Shuttle",id:"Space_Shuttle",fineX:0,fineY:0,cheeseX:0,cheeseY:-5,layer:"rearGround"},{name:"Star",id:"Star",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Telescope",id:"Telescope",fineX:0,fineY:0,cheeseX:0,cheeseY:-15,layer:"windows"},{name:"Weather_Chart",id:"Weather_Chart",fineX:0,fineY:0,cheeseX:0,cheeseY:-20,layer:"floorWalls"}],round3:[{name:"Beaker",id:"Beaker",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Binoculars",id:"Binoculars",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"windows"},{name:"Calculator",id:"Calculator",fineX:0,fineY:10,cheeseX:0,cheeseY:0,layer:"foreGround"},{name:"Goggles",id:"Goggles",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"windows"},{name:"Hammer",id:"Hammer",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"},{name:"Light_Bulb",id:"Light_Bulb",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"windows"},{name:"Magnet",id:"Magnet",fineX:0,fineY:5,cheeseX:0,cheeseY:0,layer:"rearGround"},{name:"Magnifying_Glass",id:"Magnifying_Glass",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Microscope",id:"Microscope",fineX:0,fineY:0,cheeseX:0,cheeseY:-14,layer:"rearGround"},{name:"Notebook",id:"Notebook",fineX:0,fineY:0,cheeseX:0,cheeseY:5,layer:"midGround"},{name:"Pulley",id:"Pulley",fineX:-6,fineY:32,cheeseX:0,cheeseY:0,layer:"windows"},{name:"Recycling_Bin",id:"Recycling_Bin",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"windows"},{name:"Ruler",id:"Ruler",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Scale",id:"Scale",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"midGround"},{name:"Thermometer",id:"Thermometer",fineX:0,fineY:0,cheeseX:0,cheeseY:0,layer:"floorWalls"}]};ig.hoverRotations=[2,-8,6,-3,0];ig.henchmanHitFeedback=["hit_goodaim","hit_goodshot","hit_heyhey","hit_ideatthat","hit_looksdelicious","hit_mmmm","hit_thatsit","hit_thatsright","hit_thatwasit","hit_yougotit"];ig.prepareTargets=function(){var len,thisRound,top,right,bottom,left;for(round in ig.anchors){len=ig.anchors[round].length;thisRound=ig.anchors[round];for(var i=0;i<len;i++){thisRound[i].ind=i;thisRound[i].x+=ig.anchorShift.x;thisRound[i].y+=ig.anchorShift.y;if(!ig.ua.mobile){thisRound[i].top=thisRound[i].neighbors[0]===null?null:ig.findWhere(thisRound,{id:thisRound[i].neighbors[0]});thisRound[i].right=thisRound[i].neighbors[1]===null?null:ig.findWhere(thisRound,{id:thisRound[i].neighbors[1]});thisRound[i].bottom=thisRound[i].neighbors[2]===null?null:ig.findWhere(thisRound,{id:thisRound[i].neighbors[2]});thisRound[i].left=thisRound[i].neighbors[3]===null?null:ig.findWhere(thisRound,{id:thisRound[i].neighbors[3]});}
ig.targets[round][i].x=ig.anchors[round][i].x;ig.targets[round][i].y=ig.anchors[round][i].y;}}};ig.MyGame=ig.Game.extend({currentLevel:1,currentScreen:null,loader:null,screenTransitionAlpha:0,score:0,isOver:false,contentFullyLoaded:false,failureAnimLoaded:false,contentLoadedTo:null,sounds:{},init:function(){this.stage=ig.system.addStage(new createjs.Stage("canvas"));this.stage.snapToPixelEnabled=ig.ua.mobile;cjs.Sound.EXTENSION_MAP.mp3="mpeg";this.isAudioLimited=ig.ua.mobile&&!createjs.WebAudioPlugin.isSupported();window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};if(ig.ua.mobile){if(cjs.Touch.isSupported()){createjs.Touch.enable(this.stage);this.stage.enableDOMEvents(false);}
this.preloadAssets();}else{ig.input.initMouse();ig.input.bind(ig.KEY.UP_ARROW,'aim_up');ig.input.bind(ig.KEY.DOWN_ARROW,'aim_down');ig.input.bind(ig.KEY.LEFT_ARROW,'aim_left');ig.input.bind(ig.KEY.RIGHT_ARROW,'aim_right');ig.input.bind(ig.KEY.SPACE,"fire");this.stage.enableMouseOver();this.preloadAssets();}
if(!ig.ua.kindle){ig.Visibility.addListeners();}
ig.prepareTargets();},initSound:function(){if(!cjs.Sound.initializeDefaultPlugins()){console.log("Sound problem");return;}
if(cjs.WebAudioPlugin.isSupported()){cjs.WebAudioPlugin.playEmptySound();}
cjs.Sound.alternateExtensions=["ogg","mp3"];cjs.Sound.defaultInterruptBehavior=cjs.Sound.INTERRUPT_EARLY;},preloadAssets:function(){this.preQueue=new createjs.LoadQueue(true,ig.prefix);this.preQueue.setMaxConnections(4);this.preQueue.loadTimeout=50000;this.preQueue.loadManifest([{id:"LoaderData",src:"media/images/loader/loader_assets.json"},{id:"LoaderSheet",src:"media/images/loader/loader_assets.png"}]);if(ig.ua.mobile){this.preQueue.loadManifest([{id:"TapScreen",src:"media/images/mobile_only/tap_screen.png"}]);}
if(this.isAudioLimited){this.preQueue.loadManifest([{id:"LimitedAudio",src:"media/audio/limited/limited_track.json"}]);}else{this.preQueue.loadManifest([{id:"HenchmenPhrasesAudio1",src:"media/audio/initial/henchmen_phrases/henchmen_phrases.json"},{id:"HenchmenPhrasesAudio2",src:"media/audio/second/henchmen_phrases/henchmen_phrases.json"},{id:"HenchmenPhrasesAudio3",src:"media/audio/third/henchmen_phrases/henchmen_phrases.json"},{id:"FailureAudio",src:"media/audio/initial/fail/fail_track.json"},{id:"IntroAudio",src:"media/audio/initial/intro/intro_track.json"},{id:"SfxAudio",src:"media/audio/initial/sfx/sfx_track.json"},{id:"GoopPhrasesAudio",src:"media/audio/second/goop_phrases/goop_phrases.json"},{id:"SuccessAudio",src:"media/audio/third/success/success.json"}]);}
this.preloadComplete=this.onPreloadComplete.bind(this);this.eachLoad=this.onLoadDebug.bind(this);this.preQueue.addEventListener("complete",this.preloadComplete);},onPreloadComplete:function(){this.preQueue.removeEventListener("complete",this.preloadComplete);this.preloadComplete=null;if(ig.ua.mobile){this.tapScreen=new createjs.Bitmap(this.preQueue.getResult("TapScreen"));this.tapScreen.on("click",this.mobileInit,this,true);this.stage.addChild(this.tapScreen);}else{this.initSound();this.loadAssets();}},mobileInit:function(){this.stage.removeChild(this.tapScreen);this.initSound();this.loadAssets();},onLoadDebug:function(e){console.log(e.item);},loadAssets:function(){this.loader=new ig.MyLoader();this.queue=new createjs.LoadQueue(true,ig.prefix);this.queue.installPlugin(createjs.Sound);this.queue.setMaxConnections(4);this.queue.loadTimeout=50000;this.loadComplete=this.onLoadComplete.bind(this);this.loadDebug=this.onLoadDebug.bind(this);var soundData;if(this.isAudioLimited){soundData=this.preQueue.getResult("LimitedAudio");this.queue.loadManifest([{src:"media/audio/limited/"+soundData.urls[0],data:{channels:2,audioSprite:soundData.audioSprite}}]);}else{soundData=this.preQueue.getResult("IntroAudio");this.queue.loadManifest([{src:"media/audio/initial/intro/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}}]);soundData=this.preQueue.getResult("SfxAudio");this.queue.loadManifest([{src:"media/audio/initial/sfx/"+soundData.urls[0],data:{channels:6,audioSprite:soundData.audioSprite}}]);soundData=this.preQueue.getResult("HenchmenPhrasesAudio1");this.queue.loadManifest([{src:"media/audio/initial/henchmen_phrases/"+soundData.urls[0],data:{channels:2,audioSprite:soundData.audioSprite}}]);}
this.queue.loadManifest([{id:"IntroAnimSheet",src:"media/anims/intro/images/intro.png"},{id:"IntroAnimData",src:"media/anims/intro/images/intro.json"},{id:"IntroAnimJS",src:"media/anims/intro/intro.js"},{id:"TimerFont",src:"media/images/fonts/adlib_regular_60_nums.png"},{id:"TimerFontData",src:"media/images/fonts/adlib_60_nums.json"},{id:"ItemFont",src:"media/images/fonts/adlib_regular_60_letters.png"},{id:"ItemFontData",src:"media/images/fonts/adlib_regular_60_letters.json"},{id:"CheeseRayBase",src:"media/images/cheese_ray/base.png"},{id:"RayGunData",src:"media/images/cheese_ray/cheese_ray.json"},{id:"RayGunImage",src:"media/images/cheese_ray/barrelparts.png"},{id:"UISheet",src:"media/images/ui/ui_assets.png"},{id:"UIData",src:"media/images/ui/ui_assets.json"},{id:"splash_hit_cheese",src:"media/images/cheese/splash_hit/splash_hit.png"},{id:"KaseMeterSheet",src:"media/images/cheese/meter/cheese_meter.png"},{id:"CheeseSprayImage",src:"media/images/cheese_ray/cheese_spray.png"},{id:"LargeCheeseSplat1",src:"media/images/cheese/large_splat/splat_lg0.png"},{id:"LargeCheeseSplat2",src:"media/images/cheese/large_splat/splat_lg1.png"},{id:"LargeCheeseSplatData",src:"media/images/cheese/large_splat/splat_lg1.json"},{id:"CheeseHelpSplat",src:"media/images/cheese/splat_help/cheese_help_splat.png"},{id:"CheeseHelpData",src:"media/images/cheese/splat_help/cheese_help_splat.json"},{id:"lights",src:"media/images/background/lights.png"},{id:"foreground-boxes",src:"media/images/background/foregroundboxes.png"},{id:"midground-boxes",src:"media/images/background/midgroundboxes.png"},{id:"background-boxes",src:"media/images/background/backgroundboxes.png"},{id:"windows",src:"media/images/background/windows.png"},{id:"backwall",src:"media/images/background/backwall.png"},{id:"floor",src:"media/images/background/floor.png"},{id:"ItemsL1Data",src:"media/images/level1_items/level1.json"},{id:"ItemsL1Sheet",src:"media/images/level1_items/sheet.png"},{id:"HighlightsL1Data",src:"media/images/level1_items/highlights1.json"},{id:"HighlightsL1Sheet",src:"media/images/level1_items/highlight_sheet.png"},{id:"CheesesL1Data",src:"media/images/level1_items/cheeses1.json"},{id:"CheesesL1Sheet",src:"media/images/level1_items/cheese_sheet.png"}]);this.queue.addEventListener("complete",this.loadComplete);},onLoadComplete:function(){this.queue.removeEventListener("complete",this.loadComplete);this.loadComplete=null;var data;if(this.currentLevel===1){data=this.queue.getResult("IntroAnimData");data.images=[this.queue.getResult("IntroAnimSheet")];ig.ANIMSHEETS.INTRO=new createjs.SpriteSheet(data);data=this.queue.getResult("UIData");data.images=[this.queue.getResult("UISheet")];ig.SHEETS.UI=new createjs.SpriteSheet(data);}else if(this.currentLevel===2){data=this.queue.getResult("PhrasesData");data.images=[this.queue.getResult("PhrasesSheet")];ig.ANIMSHEETS.PHRASES=new createjs.SpriteSheet(data);}else if(this.currentLevel===3&&!this.contentFullyLoaded){data=this.queue.getResult("SuccessData");data.images=[this.queue.getResult("SuccessSheet1"),this.queue.getResult("SuccessSheet2")];ig.ANIMSHEETS.SUCCESS=new createjs.SpriteSheet(data);this.contentFullyLoaded=true;}
this.contentLoadedTo=this.currentLevel;this.loader.end();this.stage.removeAllChildren();this.loader=null;this.loadComplete=true;if(this.currentLevel===1){this.gotoScreen(0);}else{this.gotoScreen(2);}},UIbuttonPressActions:function(action){switch(action){case"try_again":break;case"play_again":break;case"start_intro_anim":this.currentScreen.tweenToIntro();break;default:throw("The action \""+action+"\" does not yet have functionality specified.");break;}},playAgainButtonOver:function(event){createjs.Sound.play("button_mouseover");var rot=ig.hoverRotations[ig.getRandomInt(0,5)];createjs.Tween.get(this,{override:true}).to({rotation:rot,scaleX:1.1,scaleY:1.1},800,createjs.Ease.elasticOut);},playAgainButtonLeave:function(event){createjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:1,scaleY:1},800,createjs.Ease.elasticOut);},tryAgainButtonOver:function(event){createjs.Sound.play("button_mouseover");var rot=ig.hoverRotations[ig.getRandomInt(0,5)];createjs.Tween.get(this,{override:true}).to({rotation:rot,scaleX:1,scaleY:1},800,createjs.Ease.elasticOut);},tryAgainButtonLeave:function(event){createjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:0.9,scaleY:0.9},800,createjs.Ease.elasticOut);},menuButtonOver:function(event){if(!ig.game.currentScreen.paused){createjs.Sound.play("button_mouseover");var rot=ig.hoverRotations[ig.getRandomInt(0,5)];createjs.Tween.get(this,{override:true}).to({rotation:rot,scaleX:1.1,scaleY:1.1},800,createjs.Ease.elasticOut);}},menuButtonLeave:function(event){if(!ig.game.currentScreen.paused){createjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:1,scaleY:1},800,createjs.Ease.elasticOut);}},helpButtonOver:function(event){if(!ig.game.currentScreen.paused){createjs.Sound.play("button_mouseover");var rot=ig.hoverRotations[ig.getRandomInt(0,5)];createjs.Tween.get(this,{override:true}).to({rotation:rot,scaleX:1.1,scaleY:1.1},800,createjs.Ease.elasticOut);}},helpButtonLeave:function(event){if(!ig.game.currentScreen.paused){createjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:1,scaleY:1},800,createjs.Ease.elasticOut);}},gotoScreen:function(screen){if(this.currentScreen!==null){this.currentScreen.kill();this.currentScreen=null;}
switch(screen){case 0:this.currentLevel=1;this.score=0;this.isOver=false;this.currentScreen=new ig.MainScreenEntity(0,0,{isTitleScreen:true});break;case 1:this.currentScreen=new ig.MainScreenEntity(0,0);break;case 2:this.currentScreen=new ig.BonusScreenEntity(0,0);break;case 3:this.currentLevel=1;this.score=0;this.isOver=false;this.currentScreen=new ig.MainScreenEntity(0,0,{isTapScreen:true});break;default:break;}},loadFailureAnims:function(){if(!this.failureAnimLoaded){this.loader=new ig.MyLoader();var soundData;this.loadComplete=this.onFailureAnimsLoadComplete.bind(this);this.queue.addEventListener("complete",this.loadComplete);if(!this.isAudioLimited){soundData=this.preQueue.getResult("FailureAudio");this.queue.loadFile({src:"media/audio/initial/fail/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}});}
this.queue.loadManifest([{id:"FailSheet1",src:"media/anims/failure/images/fail.png"},{id:"FailData",src:"media/anims/failure/images/fail.json"},{id:"FailAnimJS",src:"media/anims/failure/failure.min.js"},{id:"FailScore",src:"media/images/fonts/adlib_score.png"},{id:"FailScoreData",src:"media/images/fonts/adlib_score.json"}]);this.failureAnimLoaded=true;}else{this.currentScreen.gameOverFailure();}},onFailureAnimsLoadComplete:function(){data=this.queue.getResult("FailData");data.images=[this.queue.getResult("FailSheet1")];ig.ANIMSHEETS.FAILURE=new createjs.SpriteSheet(data);this.loader.end();this.loader=null;this.currentScreen.gameOverFailure();},loadNext:function(){if(!this.contentFullyLoaded&&this.currentLevel>this.contentLoadedTo){this.loadComplete=this.onLoadComplete.bind(this);this.queue.addEventListener("complete",this.loadComplete);this.loader=new ig.MyLoader();var soundData;if(this.isAudioLimited){}else{if(this.currentLevel===2){soundData=this.preQueue.getResult("HenchmenPhrasesAudio2");this.queue.loadFile({src:"media/audio/second/henchmen_phrases/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}});soundData=this.preQueue.getResult("GoopPhrasesAudio");this.queue.loadFile({src:"media/audio/second/goop_phrases/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}});}else if(this.currentLevel===3){soundData=this.preQueue.getResult("HenchmenPhrasesAudio3");this.queue.loadFile({src:"media/audio/third/henchmen_phrases/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}});soundData=this.preQueue.getResult("SuccessAudio");this.queue.loadFile({src:"media/audio/third/success/"+soundData.urls[0],data:{channels:1,audioSprite:soundData.audioSprite}});}}
if(this.currentLevel===2){this.queue.loadManifest([{id:"splash_hit_goop",src:"media/images/goop/splash_hit.png"},{id:"BonusAssetsSheet",src:"media/images/bonus/bonus_assets.png"},{id:"BonusAssetsData",src:"media/images/bonus/bonus_assets.json"},{id:"GoopSprayImage",src:"media/images/goop_ray/goop_spray.png"},{id:"GoopHelpSplat",src:"media/images/goop/splat_help/goop_help_splat.png"},{id:"GoopHelpData",src:"media/images/goop/splat_help/goop_help_splat.json"},{id:"ItemsL2Data",src:"media/images/level2_items/level2.json"},{id:"ItemsL2Sheet",src:"media/images/level2_items/sheet.png"},{id:"HighlightsL2Data",src:"media/images/level2_items/highlights2.json"},{id:"HighlightsL2Sheet",src:"media/images/level2_items/highlight_sheet.png"},{id:"CheesesL2Data",src:"media/images/level2_items/cheeses2.json"},{id:"CheesesL2Sheet",src:"media/images/level2_items/cheese_sheet.png"},{id:"PhrasesAnimJS",src:"media/anims/phrases/phrases.min.js"},{id:"PhrasesData",src:"media/anims/phrases/images/phrases.json"},{id:"PhrasesSheet",src:"media/anims/phrases/images/phrases.png"}]);}else if(this.currentLevel===3){this.queue.loadManifest([{id:"ItemsL3Data",src:"media/images/level3_items/level3.json"},{id:"ItemsL3Sheet",src:"media/images/level3_items/sheet.png"},{id:"HighlightsL3Data",src:"media/images/level3_items/highlights3.json"},{id:"HighlightsL3Sheet",src:"media/images/level3_items/highlight_sheet.png"},{id:"CheesesL3Data",src:"media/images/level3_items/cheeses3.json"},{id:"CheesesL3Sheet",src:"media/images/level3_items/cheese_sheet.png"},{id:"SuccessAnimJS",src:"media/anims/success/success.min.js"},{id:"SuccessData",src:"media/anims/success/images/success0.json"},{id:"SuccessSheet1",src:"media/anims/success/images/success0.png"},{id:"SuccessSheet2",src:"media/anims/success/images/success1.png"}]);}}else{this.gotoScreen(2);}},run:function(){if(this.currentScreen!==null){this.currentScreen.update();}
ig.timeStamp=Date.now();},update:function(){this.parent();},draw:function(){this.parent();}});ig.findWhere=function(list,properties){var len=list.length;var obj;var isMatch;for(var i=0;i<len;i++){obj=list[i];isMatch=true;for(thing in properties){if(typeof obj[thing]==="undefined"||obj[thing]!==properties[thing]){isMatch=false;break;}}
if(isMatch){return obj;}}
if(!isMatch){return undefined;}};ig.inRange=function(number,min,max,inclusive){inclusive!==undefined||(inclusive="");if(inclusive==="min"){return number>=min&&number<max;}else if(inclusive==="max"){return number>min&&number<=max;}else if(inclusive==="both"){return number>=min&&number<=max;}else{return number>min&&number<max;}};ig.getRandomInt=function(min,max){return(Math.random()*(max-min)+min).toInt();};ig.TextUtils={getStyleStr:function(stringObject,defaultStyle,customScale){customScale=(typeof customScale==="undefined")?1:customScale;var styleStr="";if(stringObject.bold!==undefined)
styleStr+=stringObject.bold==true?"bold ":"";else
styleStr+=defaultStyle.bold==true?"bold ":"";var fontSize=10;if(stringObject.size!==undefined)
fontSize=stringObject.size;else
fontSize=defaultStyle.size;fontSize=Math.round(fontSize*customScale);styleStr+=fontSize+"px ";if(stringObject.font!==undefined)
styleStr+=stringObject.font;else
styleStr+=defaultStyle.font;return styleStr;},getStyleFontSize:function(stringObject,defaultStyle,customScale){var fontSize=10;if(stringObject.size!==undefined)
fontSize=stringObject.size;else
fontSize=defaultStyle.size;fontSize=fontSize*customScale;return fontSize;}};ig.sortArrayByObjKeys=function(array){function compare(a,b){return b.x-a.x;}
array.sort(compare);return array;};ig.sortAsc=function(a,b){return a-b;};ig.sortDesc=function(a,b){return b-a;};ig.cloneArray=function(array){c=[];for(var i=0;i<array.length;i++){c[i]=array[i];}
return c;};ig.shuffleArray=function(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}
return array;}
ig.formatTime=function(timeSeconds){var seconds=((timeSeconds+60)%60).toString();var minutes=(Math.floor(timeSeconds/60)).toString();var hours=Math.floor(timeSeconds/3600);if(seconds.length<2){seconds="0"+seconds;}
if(hours<=0){var formattedTime=minutes+':'+seconds;}else{if(minutes.length<2){minutes="0"+minutes;}
var formattedTime=(hours+':'+minutes+':'+seconds);}
return formattedTime;};ig.deploy=function(mediaPath){ig.prefix=mediaPath||"";ig.main('#canvas',ig.MyGame,60,GameStartup.targetWidth,GameStartup.targetHeight,1,ig.MyLoader);};});